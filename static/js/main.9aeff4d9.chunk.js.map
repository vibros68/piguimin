{"version":3,"sources":["actions/lib.js","lib/editors_content_backup.js","actions/methods.js","actions/api.js","actions/app.js","lib/external_api.js","actions/external_api.js","apps lazy /^/.//.*//config/.json$/ groupOptions: {} namespace object","assets/images sync /^/.//.*$","assets/images/cms-logo-dark.svg","assets/images/cms-logo-light.svg","assets/images/pi-logo-dark.svg","assets/images/pi-logo-light.svg","assets/images/search-small.svg","components/ProposalsList/ProposalsList.module.css","components/DCC/DCC.module.css","hooks/api/useApprovedProposals.js","hooks/api/useUserDetail.js","hooks/api/useUserIdentity.js","assets/copies lazy /^/.//.*/.md$/ groupOptions: {} namespace object","components/Invoice/Invoice.module.css","containers/Routes/Route.jsx","containers/Routes/AdminAuthenticatedRoute.jsx","containers/Routes/AuthenticatedRoute.jsx","containers/Routes/NotAuthenticatedRoute.jsx","pages/User/Login.jsx","pages/User/PrivacyPolicy.jsx","components/DevelopmentOnlyContent.jsx","components/EmailSentMessage.jsx","containers/User/VerifyEmail/hooks.js","containers/User/VerifyEmail/validation.js","containers/User/VerifyEmail/RequestForm.jsx","pages/User/RequestResendVerificationEmail.jsx","containers/User/ResetPassword/validation.js","containers/User/ResetPassword/hooks.js","containers/User/ResetPassword/RequestForm.jsx","pages/User/RequestResetPassword.jsx","containers/User/ResetPassword/ResetForm.jsx","pages/User/ResetPassword.jsx","containers/User/Detail/ManageContractor/helpers.js","components/HelpMessage/HelpMessage.jsx","containers/User/Search/validation.js","containers/User/Search/Search.jsx","containers/User/Search/hooks.js","pages/User/Search.jsx","containers/User/Signup/validation.js","components/ModalIdentityWarning.jsx","containers/User/hooks/useIdentityWarningModal.js","containers/User/Signup/Form.jsx","containers/User/Signup/hooks.js","pages/User/Signup.jsx","components/LoadingWithMessage/LoadingWithMessage.jsx","containers/User/VerifyEmail/Verify.jsx","pages/User/VerifyEmail.jsx","pages/User/VerifyKey/VerifyKey.jsx","pages/User/VerifyKey/index.js","pages/commonRoutes.js","pages/NotFound/NotFound.jsx","components/ModalSearchVotes/validation.js","components/ModalSearchVotes/ModalSearchVotes.jsx","components/ModalSearchVotes/hooks.js","components/DateTooltip/DateTooltip.jsx","components/DownloadJSON.jsx","components/Join/Join.jsx","components/CopyToClipboard/CopyToClipboard.jsx","components/CopyLink.jsx","components/RecordWrapper/RecordWrapper.jsx","components/IconButton/IconButton.jsx","components/Proposal/helpers.js","containers/Proposal/hooks/useProposalVoteTimeInfo.js","containers/Proposal/hooks/useProposalVote.js","containers/Proposal/hooks/useProposalURLs.js","components/ProposalsList/ProposalItem.jsx","components/LoadingPlaceholders.jsx","components/ProposalsList/ProposalsList.jsx","components/Proposal/VotesCount.jsx","containers/Comments/Download/hooks.js","containers/Comments/Download/DownloadComments.jsx","containers/Comments/Download/DownloadCommentsTimestamps.jsx","containers/Proposal/Download/DownloadVotesTimestamps.jsx","containers/Proposal/Download/hooks.js","containers/Proposal/Actions/helpers.js","containers/Proposal/Actions/hooks.js","components/ModalConfirmWithReason.jsx","containers/Proposal/Actions/UnvettedActionsProvider.jsx","components/ModalStartVote/validation.js","components/ModalStartVote/ModalStartVote.jsx","components/ModalSetBillingStatus/validation.js","components/ModalSetBillingStatus/helpers.js","components/ModalSetBillingStatus/ModalSetBillingStatus.jsx","containers/Proposal/Actions/PublicActionsProvider.jsx","components/AdminContent.jsx","components/Proposal/ProposalActions.jsx","components/Diff/helpers.js","components/Diff/DiffLine.jsx","components/InvoiceDatasheet/components/CellRenderer/CellRenderer.jsx","components/InvoiceDatasheet/components/TableButton/TableButton.jsx","components/InvoiceDatasheet/InvoiceDatasheet.jsx","components/Diff/DiffLineitems.jsx","components/InvoiceDatasheet/index.js","components/Diff/Diff.jsx","components/ModalDiff/CompareVersionSelector.jsx","components/ModalDiff/constants.js","components/ModalDiff/TimestampTitle.jsx","components/ModalDiff/hooks.js","components/ModalDiff/DiffProposal.jsx","components/ModalDiff/ModalDiffProposal.jsx","components/Invoice/Field.jsx","containers/Invoice/helpers.js","containers/Invoice/constants.js","components/ModalDiff/ModalDiffInvoice.jsx","components/VersionPicker/hooks.js","components/VersionPicker/VersionPicker.jsx","components/Proposal/Proposal.jsx","containers/Proposal/Detail/hooks.js","containers/Proposal/Detail/helpers.js","containers/Comments/hooks.js","components/CommentForm/CommentFormLoader.jsx","components/CommentForm/CommentFormLazy.jsx","containers/Comments/helpers.js","components/Likes/Likes.jsx","containers/Comments/Comment/Comment.jsx","containers/Comments/Comment/CommentWrapper.jsx","containers/Comments/CommentsList/CommentsList.jsx","containers/Comments/CommentsList/CommentsListWrapper.jsx","containers/Comments/Comment/CommentLoader.jsx","containers/Comments/commentsReducer.js","containers/Comments/Comments.jsx","components/Proposal/ProposalLoader.jsx","components/Or.jsx","components/WhatAreYourThoughts/WhatAreYourThoughts.jsx","containers/Proposal/Detail/Detail.jsx","pages/Proposals/Detail.jsx","containers/Proposal/Vetted/helpers.js","components/LazyList.jsx","components/RecordsView/RecordsView.jsx","components/RecordsView/helpers.js","containers/Proposal/Vetted/Vetted.jsx","pages/Proposals/VettedList.jsx","containers/Proposal/Admin/helpers.js","containers/Proposal/Admin/Admin.jsx","pages/Proposals/AdminList.jsx","components/ProposalForm/ProposalFormLoader.jsx","components/ProposalForm/ProposalFormLazy.jsx","containers/Proposal/New/New.jsx","containers/Proposal/New/hooks.js","components/ModalDrafts/ModalDrafts.jsx","pages/Proposals/New.jsx","containers/Proposal/Edit/Edit.jsx","containers/Proposal/Edit/hooks.js","pages/Proposals/Edit.jsx","components/Proposal/RawProposal.jsx","pages/Proposals/Raw.jsx","components/ModalChangeUsername.jsx","components/Proposal/DraftProposal.jsx","containers/Proposal/User/Drafts.jsx","containers/Proposal/User/Submitted.jsx","containers/Invoice/Actions/hooks.js","containers/Invoice/Actions/AdminActionsProvider.jsx","containers/Invoice/Actions/Actions.jsx","components/Invoice/helpers.js","components/Invoice/Invoice.jsx","hooks/api/useAdminInvoices.js","containers/Invoice/List/ListWrapper.jsx","containers/Invoice/User/hooks.js","components/Invoice/DraftInvoice.jsx","containers/Invoice/User/Drafts.jsx","containers/DCC/User/hooks.js","components/DCC/DraftDcc.jsx","containers/DCC/User/Drafts.jsx","containers/User/Detail/Drafts.jsx","components/HiddenUsernameField.jsx","components/ModalChangePassword.jsx","containers/User/Detail/validation.js","containers/User/Detail/helpers.js","containers/User/Detail/hooks/useManageUser.js","containers/User/Detail/hooks/useChangePassword.js","containers/User/Detail/InfoSection.jsx","containers/User/Detail/Account/components/AdminSection.jsx","containers/User/Detail/Account/components/AddressSection.jsx","containers/User/Detail/Account/components/EmailSection.jsx","containers/User/Detail/Account/components/PasswordSection.jsx","containers/User/Detail/Account/components/PaywallSection.jsx","containers/User/Detail/Account/components/UserDataSection.jsx","containers/User/Detail/Account/AdminAccount.jsx","containers/User/Detail/Account/UserAccount.jsx","containers/User/Detail/Account/OtherAccount.jsx","containers/User/Detail/Account/Account.jsx","containers/User/Detail/Credits/components/RegistrationFeeSection.jsx","containers/User/Detail/Credits/components/ProposalCreditsSection.jsx","containers/User/Detail/Credits/components/RescanSection.jsx","containers/User/Detail/Credits/AdminCredits.jsx","components/DcrTransactionLink.jsx","containers/User/Detail/Credits/helpers.js","components/ExportToCsv.jsx","containers/User/Detail/Credits/components/CreditHistorySection.jsx","containers/User/Detail/Credits/AdminUserCredits.jsx","containers/User/Detail/Credits/UserCredits.jsx","containers/User/Detail/Credits/Credits.jsx","containers/User/Detail/Identity/components/PublicKeyText.jsx","containers/User/Detail/Identity/components/IdentityList.jsx","containers/User/Detail/Identity/components/PastKeysSection.jsx","containers/User/Detail/Identity/components/UserIdSection.jsx","containers/User/Detail/Identity/OtherIdentity.jsx","components/ModalImportIdentity.jsx","components/FileDownloadLink.jsx","components/PrivateKeyDownloadManager.jsx","containers/User/Detail/Identity/UserIdentity.jsx","containers/User/Detail/Identity/Identity.jsx","containers/User/Detail/Preferences/Preferences.jsx","containers/User/Detail/Preferences/hooks.js","containers/User/Detail/ManageContractor/ManageDccForm.jsx","containers/User/Detail/ManageContractor/UserView.jsx","containers/User/Detail/ManageContractor/EditContractorForm.jsx","containers/User/Detail/hooks/useContractor.js","containers/User/Detail/ManageContractor/ManageContractor.jsx","containers/User/Detail/ProposalsOwned/ProposalBilling.jsx","containers/User/Detail/ProposalsOwned/hooks.js","containers/User/Detail/ProposalsOwned/ProposalsOwned.jsx","containers/User/hooks/useTotp.js","containers/User/Totp/Set.jsx","containers/User/Totp/Totp.jsx","containers/User/Detail/Detail.jsx","containers/User/Detail/hooks/useChangeUsername.js","pages/User/Detail.jsx","pages/Routes.jsx","components/CheckboxField.jsx","components/CheckboxGroupField/CheckboxGroupField.jsx","components/MonthPickerField/MonthPickerField.jsx","containers/User/Search/SearchSelector.jsx","components/InvoiceFilters/InvoiceFilterForm.jsx","components/InvoiceFilters/FilterInvoices.jsx","containers/Invoice/User/List.jsx","pages/Invoices/UserList.jsx","components/InvoiceForm/validation.js","components/InvoiceForm/DraftSaver.jsx","components/InvoiceForm/ExchangeRateField.jsx","components/InvoiceForm/InvoiceForm.jsx","containers/Invoice/New/New.jsx","containers/Invoice/New/hooks.js","pages/Invoices/New.jsx","containers/Invoice/Detail/hooks.js","components/Invoice/InvoiceLoader.jsx","containers/Invoice/Edit/Edit.jsx","containers/Invoice/Edit/hooks.js","pages/Invoices/Edit.jsx","containers/Invoice/Detail/CodeStats.jsx","containers/Invoice/Detail/InvoiceDetails.jsx","containers/Invoice/Detail/Stats.jsx","containers/Invoice/Detail/Detail.jsx","pages/Invoices/Detail.jsx","containers/User/Invite/ModalnviteContractor.jsx","containers/User/Invite/hooks.js","containers/Invoice/List/List.jsx","pages/Invoices/AdminList.jsx","containers/Invoice/Payouts/PayoutsList.jsx","containers/Invoice/Payouts/hooks.js","pages/Invoices/Payouts.jsx","components/PayoutsDateRange/PayoutsDateRange.jsx","containers/Invoice/PayoutSummaries/PayoutSummaries.jsx","containers/Invoice/PayoutSummaries/hooks.js","pages/Invoices/InvoicePayouts.jsx","containers/Invoice/ProposalBillingSummary/ProposalBillingSummary.jsx","containers/Invoice/ProposalBillingSummary/index.js","containers/Invoice/ProposalBillingSummary/hooks.js","pages/Invoices/ProposalBillingSummary.jsx","containers/Invoice/ProposalBillingDetails/helpers.js","containers/Invoice/ProposalBillingDetails/ProposalBillingDetails.jsx","containers/Invoice/ProposalBillingDetails/index.js","containers/Invoice/ProposalBillingDetails/hooks.js","pages/Invoices/ProposalBillingDetails.jsx","hooks/utils/useFetchOnce.js","components/DCC/Field.jsx","containers/DCC/Actions/hooks.js","containers/DCC/Actions/AdminActionsProvider.jsx","containers/DCC/Actions/Actions.jsx","components/ModalVotesList/ModalVotesList.jsx","containers/DCC/Actions/SupportOppose.jsx","components/DCC/DCC.jsx","components/DCC/DccLoader.jsx","containers/DCC/Detail/Detail.jsx","containers/DCC/Detail/hooks.js","pages/DCCs/Detail.jsx","containers/DCC/List/List.jsx","containers/DCC/List/hooks.js","pages/DCCs/List.jsx","components/DccForm/validation.js","components/DccForm/DraftSaver.jsx","components/DccForm/DccForm.jsx","containers/DCC/New/hooks.js","containers/DCC/New/New.jsx","pages/DCCs/New.jsx","pages/RoutesCMS.jsx","pages/index.js","containers/User/SessionChecker/SessionChecker.jsx","containers/User/SessionChecker/hooks.js","validation/setupFormValidators.js","App.js","index.js","selectors/models/users.js","components/Select/SelectField.jsx","lib/api.js","components/Files/ThumbnailRemoveButton.jsx","components/Files/ImageThumbnail.jsx","components/Files/TextThumbnail.jsx","components/Files/ThumbnailGridErrors.jsx","components/Files/ThumbnailGrid.jsx","utils/strings.js","hooks/utils/useLocalStorage.js","hooks/utils/useEventListener.js","hooks/api/useNavigation.js","components/IdentityMessageError.jsx","components/LoggedInContent.jsx","components/StaticMarkdown/index.js","containers/User/Totp/Totp.module.css","components/FormWrapper/FormWrapper.module.css","pages/User/VerifyKey/VerifyKey.module.css","components/Likes/Likes.module.css","containers/Proposal/helpers.js","hooks/api/useTimestamps.js","components/ModalExternalLink.jsx","components/Markdown/helpers.js","components/Markdown/Markdown.jsx","containers/User/Search/Search.module.css","components/ModalFullImage/ModalFullImage.module.css","containers/User/Detail/InfoSection.module.css","components/InvoiceFilters/InvoiceFilterForm.module.css","containers/Invoice/ProposalBillingDetails/ProposalBillingDetails.module.css","components/ModalLogin.jsx","hooks/utils/useDocumentTitle.js","hooks/utils/useScrollToTop.js","hooks/api/useProposalsBatch.js","hooks/api/useIdentity.js","utils.js","hooks/api/useSubContractors.js","hooks/api/useValidationSchema.js","hooks/utils/useQueryString.js","hooks/utils/useQueryStringWithIndexValue.js","containers/Proposal/User/hooks.js","hooks/utils/useFetchMachine.js","hooks/api/useComments.js","hooks/api/useUserByPublicKey.js","hooks/utils/useCrash.js","components/PaymentStatusTag/PaymentStatusTag.jsx","selectors/helpers.js","containers/User/Detail/ProposalsOwned/ProposalsOwned.module.css","containers/Invoice/Payouts/PayoutsList.module.css","containers/Invoice/PayoutSummaries/PayoutSummaries.module.css","containers/Invoice/ProposalBillingSummary/ProposalBillingSummary.module.css","hooks/utils/useModalContext.js","components/Link.jsx","components/PaymentFaucet/PaymentFaucet.module.css","components/PaymentComponent/PaymentComponent.module.css","components/NavigationDrawer/NavigationDrawer.module.css","components/ModalSetBillingStatus/ModalSetBillingStatus.module.css","components/WhatAreYourThoughts/WhatAreYourThoughts.module.css","lib/pki.js","containers/User/Detail/Account/Account.module.css","containers/User/Detail/Preferences/Preferences.module.css","components/CheckboxGroupField/CheckboxGroupField.module.css","components/ModalAttachFiles/ModalAttachFiles.module.css","components/DccForm/DccForm.module.css","containers/Config/ConfigProvider.js","containers/Config/Config.js","containers/Config/ConfigFilter.js","containers/Config/index.js","hooks/utils/useAsyncState.js","components/ModalPayPaywall/ModalPayPaywall.jsx","components/StaticMarkdown/StaticMarkdown.jsx","hooks/api/useExchangeRate.js","hooks/utils/useOnRouteChange.js","hooks/api/useSupervisors.js","hooks/api/useVerifyKey.js","hooks/utils/useBooleanState.js","hooks/utils/useScrollFormOnError.js","hooks/utils/useSessionStorage.js","components/HamburgerMenu/HamburgerMenu.jsx","components/ProposalCreditsIndicator/ProposalCreditsIndicator.jsx","components/HeaderNav/HeaderNav.jsx","components/NavigationDrawer/NavigationDrawer.jsx","containers/Header/Header.jsx","components/ModalOnboard/ModalOnboard.jsx","hooks/utils/useOnboardModal.js","containers/Config/helpers.js","components/ErrorBoundary.jsx","containers/Loader/hooks.js","containers/Loader/LoaderScreen/LoaderScreen.jsx","containers/Loader/Loader.js","containers/User/Detail/ManageContractor/ManageContractor.module.css","components/PaymentFaucet/PaymentFaucet.jsx","components/PaymentFaucet/hooks.js","components/QRCode/QRCode.jsx","components/PaymentComponent/PaymentComponent.jsx","components/NewButton/NewButton.jsx","components/Sidebar.jsx","components/layout/MultipleContentPage/MultipleContentPage.jsx","components/ModalPrivacyPolicy.jsx","containers/User/Login/validation.js","components/ModalTotpVerify.jsx","containers/User/Login/Form.jsx","containers/User/Login/hooks.js","components/DigitsInput/DigitsInput.jsx","containers/User/Totp/Verify.jsx","components/PaywallMessage.jsx","components/SidebarContent/SidebarContent.jsx","components/IdentityErrorBoundary.js","components/ModalProvider.jsx","containers/StaticContent/StaticContentProvider.jsx","components/Logo/Logo.jsx","components/ModalFullImage/ModalFullImage.jsx","components/Router/GoBackLink.module.css","components/HamburgerMenu/HamburgerMenu.module.css","components/PaymentStatusTag/PaymentStatusTag.module.css","containers/Header/Header.module.css","components/DigitsInput/DigitsInput.module.css","hooks/api/usePolicy.js","components/HelpMessage/HelpMessage.module.css","pages/NotFound/NotFound.module.css","components/ModalSearchVotes/ModalSearchVotes.module.css","components/ModalDrafts/ModalDrafts.module.css","components/MonthPickerField/MonthPickerField.module.css","containers/Invoice/List/List.module.css","containers/DCC/helpers.js","utils/validation.js","components/RecordWrapper/RecordWrapper.module.css","assets/images/rfp-tag.svg","lib/errors.js","containers/Loader/LoaderScreen/LoaderScreen.module.css","components/SidebarContent/SidebarContent.module.css","components/ProposalCreditsIndicator/ProposalCreditsIndicator.module.css","containers/User/Login/LoginForm.module.css","components/LoadingWithMessage/LoadingWithMessage.module.css","containers/DCC/constants.js","components/DateTooltip/DateTooltip.module.css","components/CopyToClipboard/CopyToClipboard.module.css","components/Proposal/ProposalActions.module.css","components/InvoiceDatasheet/components/TableButton/TableButton.module.css","containers/Proposal/Detail/Detail.module.css","containers/User/Detail/Detail.module.css","components/Proposal/Proposal.module.css","components/AttachFileInput/AttachFileInput.module.css","components/ModalVotesList/ModalVotesList.module.css","hooks/utils/useScrollTo.js","components/FormWrapper/FormWrapper.jsx","lib/local_storage.js","containers/DCC/DccProvider.jsx","constants.js","components/layout/helpers/Row.jsx","components/ModalConfirm.jsx","containers/User/Detail/Credits/Credits.module.css","hooks/api/usePaywall.js","reducers/app.js","reducers/util.js","reducers/handlers.js","reducers/api.js","reducers/external_api.js","reducers/models/comments.js","reducers/models/credits.js","reducers/models/users.js","reducers/models/proposals.js","reducers/models/proposalVotes.js","reducers/models/invoices.js","reducers/models/invoicePayouts.js","reducers/models/dccs.js","reducers/models/paywall.js","reducers/models/codestats.js","reducers/models/proposalBilling.js","reducers/models/proposalOwnerBilling.js","reducers/index.js","redux/configureStore.js","redux/hooks.js","redux/ReduxProvider.js","redux/index.js","hooks/utils/useAPIAction.js","components/layout/SingleContentPage/SingleContentPage.jsx","components/Files/Input.jsx","components/Files/helpers.js","components/ModalAttachFiles/ModalAttachFiles.jsx","components/AttachFileInput/AttachFileInput.jsx","lib/merkle.js","components/NewButton/NewButton.module.css","components/ModalPayPaywall/ModalPayPaywall.module.css","components/StaticMarkdown/StaticMarkdown.module.css","components/ModalBuyProposalCredits/validation.js","components/ModalBuyProposalCredits/hooks.js","components/ModalBuyProposalCredits/ModalBuyProposalCredits.jsx","containers/User/Detail/Credits/hooks.js","components/ModalBuyProposalCredits/ModalBuyProposalCredits.module.css","components/ProposalCreditsIndicator/assets/plus.svg","pages/NotFound/notFound.svg","components/Join/Join.module.css","components/IconButton/IconButton.module.css","components/Diff/Diff.module.css","components/InvoiceDatasheet/components/CellRenderer/CellRenderer.module.css","containers/Proposal/Vetted/VettedProposals.module.css","components/Proposal/DraftProposal.module.css","containers/Invoice/List/ListWrapper.module.css","components/Invoice/DraftInvoice.module.css","components/DCC/DraftDcc.module.css","containers/User/Search/SearchSelector.module.css","containers/Invoice/User/List.module.css","components/AttachFileInput/attach-file.svg","components/InvoiceForm/InvoiceForm.module.css","components/PayoutsDateRange/PayoutsDateRange.module.css","assets/fonts/source-sans-pro/SourceSansPro-Light.ttf","assets/fonts/source-sans-pro/SourceSansPro-Regular.ttf","assets/fonts/source-sans-pro/SourceSansPro-SemiBold.ttf","lib/fp.js","actions/types.js","components/ModalDiff/ModalDiff.module.css","components/InvoiceDatasheet/InvoiceDatasheet.module.css","containers/User/Detail/Identity/Identity.module.css","components/layout/layouts.module.css","containers/Comments/Comment/Comment.module.css","selectors/api.js","selectors/app.js","selectors/external_api.js","selectors/models/comments.js","selectors/models/credits.js","selectors/models/proposals.js","selectors/models/proposalVotes.js","selectors/models/invoices.js","selectors/models/invoicePayouts.js","selectors/models/dccs.js","selectors/models/paywall.js","selectors/models/codestats.js","selectors/models/proposalBilling.js","selectors/models/proposalOwnerBilling.js","containers/Invoice/Detail/Detail.module.css","components/HeaderNav/HeaderNav.module.css","hooks/utils/useThrowError.js","lib/queryString.js","components/Router/RouterProvider.jsx","components/Router/Router.jsx","components/Router/GoBackLink.jsx","components/Files/Files.module.css","helpers.js","components/InvoiceDatasheet/components/SelectEditor.jsx","components/InvoiceDatasheet/components/TextArea.jsx","components/InvoiceDatasheet/wrappers.jsx","components/InvoiceDatasheet/helpers.js","containers/Comments/Comments.module.css"],"names":["types","getProposalBackupKey","key","path","resetNewProposalData","sessionStorage","setItem","getInvoiceBackupKey","resetNewInvoiceData","policy","JSON","stringify","generateBlankLineItem","getCurrentMonth","getCurrentYear","getDCCBackupKey","resetNewDccData","reduceTypes","compose","reduce","t","name","type","payload","error","Object","keys","i","onResetNewUser","act","RESET_NEW_USER","onResetRescanUserPayments","userid","dispatch","RESET_RESCAN_USER_PAYMENTS","onSetHasTotp","SET_HAS_TOTP","requestApiInfo","fetchUser","REQUEST_INIT_SESSION","api","response","RECEIVE_INIT_SESSION","activeusersession","clearStateLocalStorage","onRequestMe","getState","REQUEST_ME","isCMS","sel","then","RECEIVE_ME","onFetchUser","catch","globalpollingpointer","clearPollingPointer","clearTimeout","onPollUserPayment","haspaid","verified","UPDATE_USER_PAYWALL_STATUS","status","PAYWALL_STATUS_PAID","paymentpolling","setPollingPointer","setTimeout","onGetPolicy","REQUEST_POLICY","Promise","all","www","ticketvote","comments","pi","policyOnRedux","RECEIVE_POLICY","withCsrf","fn","csrf","onInviteUserConfirm","email","isTemp","_","REQUEST_INVITE_USER","temp","RECEIVE_INVITE_USER","toString","Error","onCreateNewUser","username","password","REQUEST_NEW_USER","RECEIVE_NEW_USER","onCreateNewUserCMS","verificationtoken","onVerifyNewUser","verificationToken","REQUEST_VERIFY_NEW_USER","res","RECEIVE_VERIFY_NEW_USER","err","onSearchUser","query","REQUEST_USER_SEARCH","RECEIVE_USER_SEARCH","onLogin","code","onRequireCSRF","REQUEST_LOGIN","RECEIVE_LOGIN","pki","keyNeedsReplace","handleLogout","isPermanent","handlePermanentLogout","handleNormalLogout","clearProposalPaymentPollingPointer","handleLocalLogout","RECEIVE_LOGOUT","onLogout","REQUEST_LOGOUT","RECEIVE_CMS_LOGOUT","CSRF_NEEDED","onFetchUserInvoices","REQUEST_USER_INVOICES","RECEIVE_USER_INVOICES","onFetchInvoiceComments","token","REQUEST_RECORD_COMMENTS","RECEIVE_RECORD_COMMENTS","onFetchAdminInvoices","start","end","REQUEST_ADMIN_INVOICES","RECEIVE_ADMIN_INVOICES","onFetchUserCodeStats","REQUEST_CODE_STATS","RECEIVE_CODE_STATS","codestats","repostats","onFetchProposalBilling","REQUEST_PROPOSAL_BILLING","RECEIVE_PROPOSAL_BILLING","onFetchProposalsBatchWithoutState","tokens","state","fetchProposals","fetchVoteSummary","fetchProposalSummary","__","requests","map","filenames","PROPOSAL_METADATA_FILENAME","VOTE_METADATA_FILENAME","includefiles","proposalsRes","voteSummariesRes","proposalSummariesRes","proposals","records","parsedProposals","parseReceivedProposalsMap","voteSummaries","summaries","proposalSummaries","onFetchProposalDetailsWithoutState","version","record","onFetchProposalsBatch","fetchCommentCounts","REQUEST_PROPOSALS_BATCH","onFetchProposalsBatchVoteSummary","onFetchBatchProposalSummary","find","commentsCount","counts","proposalsWithCommentCounts","acc","curr","RECEIVE_PROPOSALS_BATCH","parseRawProposalsBatch","onFetchProposalDetails","parseRawProposal","linkby","submissions","linkedfrom","onFetchTokenInventory","page","isVoteStatus","REQUEST_TOKEN_INVENTORY","PROPOSAL_STATE_UNVETTED","votes","byRecords","UNREVIEWED","unvetted","unreviewed","CENSORED","vetted","censored","ARCHIVED","archived","byVotes","AUTHORIZED","authorized","UNAUTHORIZED","unauthorized","ACTIVE_VOTE","started","APPROVED","approved","REJECTED","rejected","INELIGIBLE","ineligible","RECEIVE_RECORDS_INVENTORY","RECEIVE_VOTES_INVENTORY","onFetchInvoice","REQUEST_INVOICE","invoice","length","RECEIVE_INVOICE","userId","REQUEST_USER","test","RECEIVE_USER","user","onFetchProposalComments","onFetchLikedComments","REQUEST_LIKED_COMMENTS","RECEIVE_LIKED_COMMENTS","onEditCmsUser","cmsUserInfo","REQUEST_EDIT_CMS_USER","obj","RECEIVE_EDIT_CMS_USER","entries","value","onManageCmsUser","userID","domain","supervisorIDs","proposalsOwned","REQUEST_MANAGE_CMS_USER","RECEIVE_MANAGE_CMS_USER","onManageUser","action","reason","REQUEST_MANAGE_USER","RECEIVE_MANAGE_USER","onCommentVote","currentUserID","commentid","vote","sectionId","REQUEST_LIKE_COMMENT","resolve","comment","RECEIVE_LIKE_COMMENT_SUCCESS","RECEIVE_LIKE_COMMENT","onCensorComment","publickey","REQUEST_CENSOR_COMMENT","receipt","RECEIVE_CENSOR_COMMENT","onUpdateUserKey","REQUEST_UPDATED_KEY","publicKey","SHOULD_AUTO_VERIFY_KEY","RECEIVE_UPDATED_KEY","success","onVerifyUserKey","REQUEST_VERIFIED_KEY","pubkey","RECEIVE_VERIFIED_KEY","onSetInvoiceStatus","REQUEST_SETSTATUS_INVOICE","RECEIVE_SETSTATUS_INVOICE","onSetProposalStatus","linkto","oldStatus","REQUEST_SETSTATUS_PROPOSAL","proposal","RECEIVE_SETSTATUS_PROPOSAL","PROPOSAL_STATUS_PUBLIC","onSetBillingStatus","billingStatus","REQUEST_SET_BILLING_STATUS","timestamp","RECEIVE_SET_BILLING_STATUS","onFetchBillingStatusChanges","REQUEST_BILLING_STATUS_CHANGES","billingstatuschanges","RECEIVE_BILLING_STATUS_CHANGES","onResetPassword","REQUEST_RESET_PASSWORD","RECEIVE_RESET_PASSWORD","onVerifyResetPassword","newpassword","RECEIVE_VERIFY_RESET_PASSWORD","onResendVerificationEmailConfirm","REQUEST_RESEND_VERIFICATION_EMAIL","RECEIVE_RESEND_VERIFICATION_EMAIL","resetResendVerificationEmail","RESET_RESEND_VERIFICATION_EMAIL","onStartVote","voteParams","REQUEST_START_VOTE","RECEIVE_START_VOTE","onFetchProposalPaywallDetails","REQUEST_PROPOSAL_PAYWALL_DETAILS","RECEIVE_PROPOSAL_PAYWALL_DETAILS","onUserProposalCredits","REQUEST_USER_PROPOSAL_CREDITS","RECEIVE_USER_PROPOSAL_CREDITS","onFetchUserProposals","REQUEST_USER_INVENTORY","tokensLength","RECEIVE_USER_INVENTORY","numofproposals","REQUEST_PROPOSALS_VOTE_SUMMARY","RECEIVE_PROPOSALS_VOTE_SUMMARY","REQUEST_BATCH_PROPOSAL_SUMMARY","RECEIVE_BATCH_PROPOSAL_SUMMARY","onFetchProposalVoteResults","REQUEST_PROPOSAL_VOTE_RESULTS","RECEIVE_PROPOSAL_VOTE_RESULTS","onAuthorizeVote","REQUEST_AUTHORIZE_VOTE","RECEIVE_AUTHORIZE_VOTE","onRevokeVote","REQUEST_REVOKE_AUTH_VOTE","RECEIVE_REVOKE_AUTH_VOTE","numOfRequests","globalProposalPaymentPollingPointer","onPollProposalPaywallPayment","isLimited","TOGGLE_CREDITS_PAYMENT_POLLING","REQUEST_PROPOSAL_PAYWALL_PAYMENT","txid","TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT","RECEIVE_PROPOSAL_PAYWALL_PAYMENT","onRescanUserPayments","REQUEST_RESCAN_USER_PAYMENTS","RECEIVE_RESCAN_USER_PAYMENTS","onGeneratePayouts","REQUEST_GENERATE_PAYOUTS","RECEIVE_GENERATE_PAYOUTS","onInvoicePayouts","REQUEST_INVOICE_PAYOUTS","RECEIVE_INVOICE_PAYOUTS","onPayApprovedInvoices","REQUEST_PAY_APPROVED","RECEIVE_PAY_APPROVED","onGetSpendingSummary","REQUEST_SPENDING_SUMMARY","RECEIVE_SPENDING_SUMMARY","onFetchSpendingDetails","REQUEST_SPENDING_DETAILS","RECEIVE_SPENDING_DETAILS","onFetchExchangeRate","month","year","REQUEST_EXCHANGE_RATE","RECEIVE_EXCHANGE_RATE","onFetchUserSubcontractors","REQUEST_USER_SUBCONTRACTORS","RECEIVE_USER_SUBCONTRACTORS","onFetchCmsUsers","REQUEST_CMS_USERS","RECEIVE_CMS_USERS","onFetchDccsByStatus","REQUEST_DCCS","RECEIVE_DCCS","onFetchDcc","REQUEST_DCC","RECEIVE_DCC","onFetchDccComments","onSupportOpposeDcc","REQUEST_SUPPORT_OPPOSE_DCC","dccvote","RECEIVE_SUPPORT_OPPOSE_DCC","isSupport","DCC_SUPPORT_VOTE","onSetDccStatus","REQUEST_SET_DCC_STATUS","RECEIVE_SET_DCC_STATUS","onSetTotp","TOTP_DEFAULT_TYPE","REQUEST_SET_TOTP","RECEIVE_SET_TOTP","e","onVerifyTotp","REQUEST_VERIFY_TOTP","RECEIVE_VERIFY_TOTP","onFetchRecordTimestamps","onFetchCommentsTimestamps","commentsids","onFetchTicketVoteTimestamps","votespage","onFetchVotesBundle","serverpublickey","REQUEST_VOTES_BUNDLE","auths","details","RECEIVE_VOTES_BUNDLE","onSaveNewInvoice","location","contact","rate","address","lineitems","exchangerate","files","lineItems","REQUEST_NEW_INVOICE","RECEIVE_NEW_INVOICE","numcomments","onSubmitInvoice","fromUSDUnitsToUSDCents","onSaveNewProposal","amount","startDate","endDate","description","rfpDeadline","rfpLink","Number","REQUEST_NEW_PROPOSAL","startdate","enddate","markdown","attachments","RECEIVE_NEW_PROPOSAL","onSubmitProposal","trim","onSaveNewDcc","nomineeid","statement","contractortype","nomineeuserid","REQUEST_NEW_DCC","dcc","RECEIVE_NEW_DCC","onSubmitNewDcc","onEditProposal","Math","round","REQUEST_EDIT_PROPOSAL","RECEIVE_EDIT_PROPOSAL","censorshiprecord","onSubmitEditedProposal","onEditComment","commentID","parentID","extraData","extraDataHint","commentEdit","parentid","extradata","extradatahint","REQUEST_EDIT_COMMENT","responsecomment","RECEIVE_EDIT_COMMENT","onEditCommentApi","onSaveNewComment","commentText","REQUEST_NEW_COMMENT","shortToken","shortRecordToken","commentsMap","values","flat","cm","signature","isAuthorUpdate","PROPOSAL_UPDATE_HINT","RECEIVE_NEW_COMMENT","PROPOSAL_MAIN_THREAD_KEY","onSubmitCommentApi","onEditInvoice","REQUEST_EDIT_INVOICE","RECEIVE_EDIT_INVOICE","onSubmitEditedInvoice","onSaveDraftProposal","draftId","id","uniqueID","SAVE_DRAFT_PROPOSAL","floor","Date","now","onLoadDraftProposals","uuid","stateFromLS","loadStateLocalStorage","drafts","LOAD_DRAFT_PROPOSALS","onDeleteDraftProposal","DELETE_DRAFT_PROPOSAL","onSaveDraftInvoice","rest","SAVE_DRAFT_INVOICE","onLoadDraftInvoices","LOAD_DRAFT_INVOICES","onDeleteDraftInvoice","DELETE_DRAFT_INVOICE","onSaveChangeUsername","newUsername","REQUEST_CHANGE_USERNAME","RECEIVE_CHANGE_USERNAME","onChangeUsername","onSaveChangePassword","existingPassword","newPassword","REQUEST_CHANGE_PASSWORD","RECEIVE_CHANGE_PASSWORD","onChangePassword","onIdentityImported","successMsg","errorMsg","IDENTITY_IMPORTED","keyMismatch","KEY_MISMATCH","toggleCreditsPaymentPolling","bool","toggleProposalPaymentReceived","TOGGLE_PROPOSAL_PAYMENT_RECEIVED","onEditUserPreferences","preferences","REQUEST_EDIT_USER","RECEIVE_EDIT_USER","onEditUser","onSaveNewDccComment","onSubmitDccCommentApi","onSaveDraftDcc","nomineeusername","SAVE_DRAFT_DCC","onLoadDraftDccs","LOAD_DRAFT_DCCS","onDeleteDraftDcc","DELETE_DRAFT_DCC","payWithFaucet","params","method","formBody","encodedKey","encodeURIComponent","encodedValue","push","join","fetch","mode","headers","body","json","POST","REQUEST_PAYWALL_PAYMENT_WITH_FAUCET","external_api","RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET","resetPaywallPaymentWithFaucet","RESET_PAYWALL_PAYMENT_WITH_FAUCET","webpackAsyncContext","req","__webpack_require__","o","ids","slice","module","exports","webpackContext","webpackContextResolve","useApprovedProposals","proposalPageSize","initialTokens","useState","remainingTokens","setRemainingTokens","useProposalsBatch","fetchRfpLinks","fetchVoteSummaries","proposalsTokens","loading","verifying","isLoading","useEffect","difference","splice","proposalsNotRFP","useMemo","filter","p","proposalsByToken","useUserDetail","useSelector","uid","undefined","userSelector","isAdmin","useAction","isRequestingUser","userMissingData","identities","needsFetch","args","useAPIAction","useThrowError","useUserIdentity","userPubkey","currentUserUsername","currentUserEmail","identityImportSuccess","updateUserKeyToken","updateUserKeyError","shouldAutoVerifyKey","keyMismatchAction","Route","selector","title","titleSelector","props","titleFromState","useDocumentTitle","withRouter","history","useLoaderContext","initDone","currentUser","isadmin","PageUserLogin","SingleContentPage","PageUserPrivacyPolicy","privacyPolicyContent","useConfig","contentWidth","StaticMarkdown","contentName","DevelopmentOnlyContent","children","show","style","EmailSentMessage","bulletPoints","marginTop","marginBottom","padding","bp","idx","href","defaultProps","useRequestResendVerificationEmail","onResendVerificationEmail","validationSchema","Yup","shape","required","useVerifyUserEmail","setLoading","setSuccess","setError","onVerify","schema","getQueryStringValues","isValid","validateUrlParamsAndVerifyUser","RequestVerificationEmailForm","setEmail","devToken","setDevToken","handleSubmitAction","useCallback","setSubmitting","resetForm","setFieldError","FormWrapper","initialValues","onSubmit","Form","Title","Actions","handleChange","handleBlur","handleSubmit","errors","touched","label","autoComplete","onChange","onBlur","to","PageUserRequestResendVerificationEmail","usernameValidator","minusernamelength","maxusernamelength","usernamesupportedchars","matches","yupFieldMatcher","min","minLengthMessage","max","maxLengthMessage","requestResetValidationSchema","resetValidationSchema","minpasswordlength","verify_password","oneOf","urlParamsValidationSchema","useValidationSchemaFromPolicy","schemaFn","setValidationSchema","usePolicy","RequestForm","requestResetResponse","useResetPassword","setUsername","setVerificationToken","ErrorMessage","isSubmitting","global","PageUserRequestResetPassword","SuccessContent","ResetForm","setInitialValues","invalidParamsError","setInvalidParamsError","resetPasswordValidationSchema","urlValidationSchema","validateUrlParams","useVerifyResetPassword","enableReinitialize","PageUserResetPassword","typeOptions","selectTypeOptions","op","getSupervisorsNames","supervisors","userSupervisors","flatMap","HelpMessage","className","isDarkTheme","useTheme","themeName","DEFAULT_DARK_THEME_NAME","classNames","styles","container","data-testid","textAlign","helpMessage","dark","searchSchema","searchBy","searchTerm","when","UserSearch","TopBanner","PageDetails","Main","searchResult","searchError","setSearchError","foundUsers","setFoundUsers","filterValue","setFilterValue","supportedDomains","get","contractorDomains","getContractorDomains","searchOptions","isByDomain","isByType","isByEmail","isByUsername","isCmsSearchByUsername","filteredResult","result","u","includes","filterUserResult","users","supporteddomains","Username","Domain","getDomainName","Type","Email","ID","getFormattedSearchResults","actionsContent","setFieldValue","handleChangeSelectField","field","v","searchByRadioGroup","optionClassName","searchByRadioButton","options","searchBox","placeholder","SelectField","select","searchButton","onClick","kind","fillScreen","data","PageUserSearch","MultipleContentPage","topBannerHeight","Search","signupValidationSchema","withVerificationToken","ModalIdentityWarning","onClose","onConfirm","confirmMessage","isCms","maxWidth","iconType","iconSize","float","SignupForm","signupResponse","onCreateNewUseFromAdminInvitation","onResetSignup","enableAdminInvite","recordType","constants","onSignup","RECORD_TYPE_PROPOSAL","useSignup","asyncSubmit","useModelContext","handleOpenModal","handleCloseModal","onCancel","useIdentityWarningModal","signupSuccess","Footer","Link","PageUserSignup","LoadingWithMessage","message","spinnerProps","wrapper","text","VerifyEmail","invert","PageUserVerifyEmail","Verify","VerifyKey","useVerifyKey","verifyUserKey","verifyUserKeyError","keyUpdated","setKeyUpdated","verifyAndUpdateLocalKey","qs","parse","search","verifyUserPubkey","pushToHome","successButtonText","iconAndTextWrapper","iconWrapper","size","backgroundColor","iconColor","btn","commonRoutes","exact","component","PageUserVerifyKey","noCardWrap","contentWrapper","alt","notFoundImg","src","notFoundImage","returnHomeBtn","ModalSearchVotes","ticketFound","setTicketFound","proposalToken","modalOpen","proposalVoteResultsSelector","proposalVoteResults","castvotes","useSearchVotes","apiError","searchVotesModal","ticket","foundTicket","ticketToken","findTicket","Ticket","Option","votebit","globalError","loadingWrapper","searchInput","disablePagination","DateTooltip","placement","additionInfo","timeAgo","distance","addSuffix","getTimeAgo","dateTooltip","darkDateTooltip","content","formatUnixTimestamp","DownloadJSON","fileName","customComponent","isAsync","beforeDownload","asyncLoading","setAsyncLoading","onDownload","fileDownload","handleDownload","cursor","Join","SeparatorComponent","childrenArray","React","Children","toArray","c","child","Fragment","cloneElement","propType","PropTypes","node","CopyToClipboard","tooltipText","feedbackActive","setFeedbackActive","copyTooltip","darkCopyTooltip","onCopyToClipboard","str","el","document","createElement","appendChild","execCommand","removeChild","copyToClipboard","CopyLink","url","Author","Event","event","eventTooltip","truncate","RecordToken","isCopyable","shouldPlaceTooltipLeft","useMediaQuery","recordToken","tooltipPlacement","Wrapper","baseTitle","underlineTitle","Subtitle","separatorSymbol","subtitleWrapper","subtitleSeparator","JoinTitle","flexWrap","Edit","tabIndex","disabled","editButton","Status","disableMobileView","MobileHeader","edit","isRfp","titleWrapper","titleEditWrapper","RfpTag","mobileRfpTag","titleStatusWrapper","memo","rfptag","rfpTag","Header","subtitle","mobile","isRfpSubmission","rfpProposalLink","header","rfpTitleWrapper","ChartsLink","legacytoken","apiInfo","useLoader","hostName","testnet","actionsTooltip","darkActionsTooltip","target","rel","SearchVotes","MarkdownLink","active","viewBox","CommentsLink","numOfComments","showIcon","gray","commentsLink","commentsNumber","darkCommentsNumber","RfpProposalLink","rfpTitle","proposedFor","darkProposedFor","DownloadRecord","bundle","metadata","DownloadTimestamps","useTimestamps","DownloadVotes","LinkSection","closeOnItemClick","link","MetadataLabel","metadataLabel","MetadataValue","Metadata","isRFP","startDateView","formatDateToInternationalString","formatUnixTimestampToObj","endDateView","RecordWrapper","Row","IconButton","forwardRef","ref","iconButton","getStatusBarData","voteSummary","results","color","sort","a","getProposalStatusTagProps","proposalSummary","PROPOSAL_SUMMARY_STATUS_UNVETTED","PROPOSAL_SUMMARY_STATUS_UNVETTED_ABANDONED","PROPOSAL_SUMMARY_STATUS_ABANDONED","PROPOSAL_SUMMARY_STATUS_UNVETTED_CENSORED","PROPOSAL_SUMMARY_STATUS_CENSORED","PROPOSAL_SUMMARY_STATUS_UNDER_REVIEW","PROPOSAL_SUMMARY_STATUS_VOTE_AUTHORIZED","PROPOSAL_SUMMARY_STATUS_VOTE_STARTED","PROPOSAL_SUMMARY_STATUS_REJECTED","PROPOSAL_SUMMARY_STATUS_ACTIVE","PROPOSAL_SUMMARY_STATUS_CLOSED","PROPOSAL_SUMMARY_STATUS_COMPLETED","PROPOSAL_SUMMARY_STATUS_APPROVED","useProposalVoteTimeInfo","bestBlock","bestblock","voteEndTimestamp","getVoteEndTimestamp","voteBlocksLeft","getVoteBlocksLeft","useProposalVote","voteSummarySelector","proposalSummarySelector","billingStatusChangeMetadataSelector","billingStatusChangeMetadata","voteActive","isVoteActiveProposal","useProposalURLs","javascriptEnabled","proposalURL","getProposalUrl","commentsURL","getCommentsUrl","authorURL","getAuthorUrl","rfpProposalURL","PROPOSAL_STATE_VETTED","ProposalItem","useRouter","isVoteActive","hasvoteSummary","endblockheight","isAbandoned","isAbandonedProposal","isPublic","isPublicProposal","isVotingFinished","isVotingFinishedProposal","mdScreen","smallMobile","itemWrapper","justify","align","goToFullProposal","noMargin","itemTitle","statusBarWrapper","getQuorumInVotes","markerPosition","passpercentage","markerTooltipText","markerTooltipClassName","statusBarTooltip","timeLeftPassed","voteEvent","statusWrapper","statusTag","width","height","LoadingPlaceholders","numberOfItems","Item","placeholders","Placeholder","theme","primaryColor","getThemeProperty","secondaryColor","speed","x","y","ProposalsList","hasSubmissions","weight","b","index","VotesCount","eligibleVotes","quorumVotes","quorumPercentage","votesReceived","votesLeft","voteCount","quorumAndVotes","quorumReached","votesQuorum","createContext","useDownloadCommentsTimestamps","timestampsPageSize","timestamps","setTimestamps","remaining","setRemaining","progress","setProgress","commentsSelector","allCommentsBySection","commentsLength","multiPage","getCommentIdsForPagination","commentIds","take","takeRight","getProgressPercentage","toFixed","useFetchMachine","actions","initial","ts","loadCommentsTimestamps","send","RESOLVE","START","next","VERIFY","REJECT","FETCH","verify","handleSaveCommentsTimetamps","makeTimestampsBundle","resp","DownloadComments","useDownloadComments","isTimestamp","DownloadCommentsTimestamps","policyComments","timestampspagesize","marginRight","DownloadCommentsTimestampsWrapper","setStart","hasLoadedTimestamps","DownloadVotesTimestamps","votesCount","setVotes","setAuths","setDetails","setPage","total","loadVotesTimestamps","hasProofs","proofs","handleSaveVotesTimetamps","useDownloadVoteTimestamps","policyTicketVote","DownloadVotesTimestampsWrapper","fullVoteParamObject","duration","quorumpercentage","mask","bit","parent","PublicProposalsActionsContext","UnvettedProposalsActionsContext","usePublicProposalActions","useContext","useUnvettedProposalActions","ModalConfirmWithReason","subject","reasonLabel","successMessage","successTitle","onCloseSuccess","useModalContext","crash","useCrash","onSubmitReason","isIdentityError","successIconBgColor","iconCheckmarkColor","iconComponent","onCensorProposal","PROPOSAL_STATUS_CENSORED","onApproveProposal","useUnvettedActions","Provider","onCensor","onApprove","ModalConfirm","getMinQuorumPercentage","isTestnet","getMinPassPercentage","minAmountMessage","maxAmountMessage","passPercentage","getBlockDurationArray","getDurationOptions","isTesnet","blockDuration","nb","durationInDays","ModalStartVote","voteType","linkbyperiodmin","votedurationmin","votedurationmax","onSubmitStartVote","VOTE_TYPE_STANDARD","isRfpReadyToVote","isInitialValid","tesnet","isValidSync","vertical","PROPOSAL_BILLING_STATUS_CLOSED","billingStatusLabels","PROPOSAL_BILLING_STATUS_ACTIVE","PROPOSAL_BILLING_STATUS_COMPLETED","StatusesExplanation","ModalSetBillingStatus","billingStatusOptions","onSubmitSetBillingStatus","fieldName","setFieldTouched","isBillingStatusClosed","statusSelectWrapper","option","onStart","onAuthorize","onRevoke","onSetBillingStatusAction","onAbandonProposal","PROPOSAL_STATUS_ARCHIVED","cb","usePublicActions","handleOpenAbandonModal","handleOpenAuthorizeVoteModal","handleOpenRevokeVoteModal","handleSetBillingStatusModal","handleStartVoteModal","getProposalToken","handleStartRunoffVoteModal","submissionsTokens","submissionsProposalSummaries","submissionVotes","prop","VOTE_TYPE_RUNOFF","onAbandon","onStartRunoffVote","AdminContent","fallback","propTypes","UnvettedActions","withProposal","isUnreviewedProposal","reportButton","noBorder","PublicActions","rfpSubmissionsVoteSummaries","resetRfpSubmissionsData","billingstatuschangesmax","policyPi","isProposalOwner","isVotingStartAuthorized","isVotingNotAuthorizedProposal","isReadyToRunoff","isRfpReadyToRunoff","isUnderDiscussion","isUnderDiscussionProposal","isApproved","isApprovedProposal","numbillingstatuschanges","isSetBillingStatusAllowed","ProposalActions","markLineAsAdded","elem","lineIndex","removed","added","markLineAsRemoved","markLineAsUnchanged","lineDiffFunc","arr","some","arrelem","lineEqFunc","getLineArray","string","split","line","markAsAdded","markAsRemoved","filesDiffFunc","getFilesDiff","newFiles","oldFiles","itemsDiffFunc","isEqual","itemsEqFunc","setLineitemParams","DiffLine","lineAdded","lineRemoved","lineContent","Markdown","CellRenderer","cell","readOnly","onDoubleClick","onMouseOver","onMouseDown","onContextMenu","editing","handleOnMouseOver","handleOnMouseDown","erroredCell","TableButton","tableButton","tableButtonDisabled","noop","SheetRenderer","table","tableHead","col","tableHeadCell","minWidth","TableRow","tableRow","InvoiceDatasheet","userRate","proposalsError","isMobile","useSubContractors","subContractors","subContractorsError","grid","setGrid","currentRate","setCurrentRate","handleCellsChange","changes","newGrid","processCellsChange","convertGridToLineItems","SUBTOTAL_COL","handleAddNewRow","preventDefault","newValue","concat","convertLineItemsToGrid","copyTextToClipboard","window","clipboardData","setData","handleRemoveLastRow","dropRight","createTableHeaders","valueRenderer","sheetRenderer","rowRenderer","removeRowsIsDisabled","invoiceError","uniqueErrArr","flowRight","uniq","charAt","toUpperCase","renderErrors","datasheetWrapper","handleCopy","range","dataRenderer","getSelection","j","parsePaste","rowCount","row","onCellsChanged","cellRenderer","DiffLineitems","getProposalName","subdomain","proposalname","subuserid","subrate","labor","expenses","others","laborHours","fromMinutesToHours","subRate","fromUSDCentsToUSDUnits","lineExpenses","subTotal","lineSubTotal","newLine","multiline","items","expenseTotal","laborTotal","renderGrid","item","proposaltoken","numberOfCols","newTotals","lastLine","getTotalsLine","dataSheet","lineitemsAddedDark","lineitemsAdded","lineitemsRemovedDark","lineitemsRemoved","DiffHTML","oldTextBody","newTextBody","linesDiff","newCommentBody","oldCommentBody","oldComLines","newComLines","newTextLineCounter","oldTextLineCounter","diffLine","diffStrings","diffWordsWithSpace","removedIndex","handleDiffLine","addedIndex","diffTable","cellSpacing","cellPadding","FileWrapper","file","mime","viewOnly","ModalFullImage","images","FilesDiff","fileAdded","fileRemoved","fileUnchanged","noFiles","DiffText","newText","oldText","DiffInvoices","oldData","newData","lineitemsDiff","newItems","oldItems","getLineitemsDiff","contractorrate","CompareVersionSelector","latest","base","compare","darkIconColor","versionsOptions","rangeRight","versionSelectorContainer","versionSelectorWrapper","itemsListClassName","versionCompareIcon","TimestampTitle","publishedat","abandonedat","parseProposal","getAttachmentsFiles","DiffProposal","initVersion","versionsQueue","setVersionsQueue","fetchedProposals","setFetchedProposals","baseVersion","setBaseVersion","compareVersion","setCompareVersion","baseProposal","compareProposal","drop","done","fetchingNotDone","changedVersion","versionType","useCompareVersionSelector","isDiffAvailable","activeTabIndex","setActiveTabIndex","headerSubtitle","titleDiff","onSelectTab","diffTabs","contentClassName","diffTabContent","diffWrapper","versionSpinnerContainer","ModalDiffProposal","modalContent","Field","renderValue","fieldLabel","getInitialDateValue","getInvoiceMinMaxYearAndMonth","presentationalInvoiceName","input","contractorname","presentationalDraftInvoiceName","draft","date","isUnreviewedInvoice","getInvoiceTotalHours","getInvoiceTotalExpenses","getPreviousMonthsRange","minDate","minMonth","getMonth","minYear","getFullYear","ModalDiffInvoice","prevInvoice","prevInput","summariespagesize","prevTokens","contentStyle","minHeight","linesBeforeTruncate","topMarginSize","topDetails","contractorlocation","contractorcontact","paymentaddress","addr","lineitemsWrapper","VersionPicker","proposalState","setIsLoading","selectedVersion","setSelectedVersion","fetchInvoiceVersions","prevInvoiceResponse","disablePicker","onChangeVersion","RECORD_TYPE_INVOICE","useVersionPicker","versions","Proposal","extended","collapseBodyContent","billingStatusChangeUsername","censoredat","rfpSubmissions","statuschangemsg","statuschangeusername","startblockheight","isVetted","PROPOSAL_TYPE_RFP","PROPOSAL_TYPE_RFP_SUBMISSION","isRfpActive","isActiveRfp","isNotExtendedRfpOrSubmission","hasVoteSummary","fullToken","getVotesReceived","isCensored","isCensoredProposal","isClosed","isClosedProposal","proposalStatusReason","proposalStatusUsername","isPublicAccessible","isAuthor","isVotingAuthorized","isVotingAuthorizedProposal","isEditable","isEditableProposal","showEditedDate","showExtendedVersionPicker","showVersionAsText","showVoteEnd","showRfpSubmissions","isEmpty","showEditIcon","openSearchVotesModal","rawMarkdown","getMarkdownContent","imageRegexParser","imgs","matchAll","markdownFiles","digest","groups","getKeyByValue","replace","replaceImgDigestWithPayload","statusTagProps","proposalStatusLabel","hasProposalStatusInformation","abandonedProposal","rfpProposal","toLowerCase","authorizeTooltip","versionPicker","darkVersionPicker","subtitleStatusTag","quorumTooltip","blocksLeft","renderStatusInfoComponent","getEligibleTickets","usdFormatter","format","markdownContainer","rfpMarkdownContainer","filesRow","lastRow","downloadLinksWrapper","proposalActions","copyLink","origin","LoggedInContent","ProposalWrapper","getProposalRfpLinksTokens","isSubmission","useProposal","threadParentID","tokenShort","onFetchProposalsVoteSummary","proposalSelector","loadingVoteSummary","loadingProposalSummary","loadingBillingStatusChanges","rfpLinks","isCurrentUserProposalAuthor","unfetchedProposalTokens","r","unfetchedSummariesTokens","vs","getUnfetchedVoteSummaries","pick","l","isMissingDetails","f","getDetailsFile","isMissingVoteSummary","isMissingProposalSummary","isMissingBillingStatusChangeMetadata","needsInitialFetch","hasRemainingTokens","statuschangepk","useUserByPublicKey","userPubKey","billingStatusAdminPubKey","hasToFetchRfpLinks","load","getTokensForProposalsPagination","tokensBatch","proposalWithLinks","getProposalRfpLinks","onReloadProposalDetails","useComments","onSubmitComment","commentSectionIds","hasAuthorUpdates","singleThreadRootId","commentsError","commentsLoading","finishedCommentsFetch","commentsFinishedLoading","CommentContext","ProposalFormLoader","CommentForm","lazy","CommentFormLazy","CommentFormLoader","commentSortOptions","SORT_BY_TOP","SORT_BY_OLD","SORT_BY_NEW","createSelectOptionFromSortOption","sortOption","sortComments","mapOptionToSort","orderBy","getSort","sorter","resultvotes","upvotes","downvotes","Likes","upLikes","downLikes","onLike","onDislike","defaultColor","activeColor","likeColor","dislikeColor","isDisliked","handleDebounceVote","voteFn","debounce","renderCount","count","isLike","likesResult","leftLikeBox","likeBtn","likeDisabled","rightLikeBox","forbiddenCommentsMdElements","permalink","createdAt","author","authorID","authorUpdateTitle","censoredBy","highlightAuthor","likesUpCount","likesDownCount","likeOption","disableLikes","disableLikesClick","commentBody","showReplies","disableReply","onClickCensor","onClickReply","onClickShowReplies","editCommentID","setEditCommentID","numOfReplies","numOfNewHiddenReplies","highlightAsNew","censorable","isFlatMode","seeInContextLink","extraSmall","editperiod","allowedits","currentTimeSec","getTime","isEditableState","setIsEditableState","censorButton","censor","censoredByUsername","showNewReplies","isThread","NOJS_ROUTE_PREFIX","handleEditComment","info","commentAuthor","recordAuthor","editIcon","likesWrapper","renderImages","disallowedElements","reply","persistKey","editForm","ContextLink","contextLink","Replies","childrenContainer","CommentContent","showReplyForm","handleSubmitComment","handleToggleReplyForm","handleCommentSubmitted","commentForm","replyForm","onCommentSubmitted","CommentWrapper","recordBaseLink","getCommentLikeOption","enableCommentVote","recordAuthorID","recordAuthorUsername","loadingLikes","userLoggedIn","identityError","paywallMissing","openCensorModal","openLoginModal","getCommentVotes","latestAuthorUpdateId","areAuthorUpdatesAllowed","deleted","createdat","isNew","sumOfNewDescendants","isInLatestUpdateCommentTree","rootId","leafId","current","isInCommentTree","notInLatestAuthorUpdateThread","isRecordAuthor","setShowReplyForm","setShowReplies","hasChildrenComments","isFlatReply","handleToggleReplies","handleLikeComment","PROPOSAL_COMMENT_UPVOTE","handleDislikeComment","PROPOSAL_COMMENT_DOWNVOTE","handleClickCensor","isLikeCommentDisabled","CommentsList","getChildren","commentId","lastTimeAccessed","createComputedComment","numOfNewChildren","sum","recordsBaseLink","nestedComments","setNestedComments","isSingleThread","singleThreadParent","CommentLoader","rx","ry","initialState","commentsReducer","addedComment","maxBy","commentFromNewComments","FlatModeButton","isActive","flatButtonWrapper","flatModeActive","flatButtonText","flatTooltipWrapper","flatModTooltip","CommentsListAndActions","setSortOption","recordTokenFull","lastVisitTimestamp","commentsCtx","handleOpenLoginModal","userEmail","numOfDuplicatedComments","hasDuplicatedComments","isEditing","handleSetSortOption","selectOptions","selectValue","useLocalStorage","flatModeOnLocalStorage","setflatModeOnLocalStorage","isFlatCommentsMode","setIsFlatCommentsMode","debouncedHandleCommentsModeToggle","newFlagValue","handleCommentVote","handleCensorCommentModal","handleCensorComment","handleCommentCensoringInfo","commentLoaders","numOfContents","contents","singleThreadCommentCannotBeAccessed","commentsHeader","commentsTitle","sortContainer","commentsWrapper","useReducer","updateId","updateTitle","commentAreaContainer","ExtraSmallLoader","yOffset","RegularLoader","ProposalLoader","Or","WhatAreYourThoughts","onLoginClick","onSignupClick","darkText","buttonsWrapper","SetPageTitle","match","tokenFromUrl","threadParentCommentID","hasScrollToQuery","getQueryStringValue","areCommentsAllowed","isActiveProposal","isUnvetted","readOnlyReason","isRejectedProposal","isCensoredProposalSummary","isCompletedProposal","getCommentBlockedReason","usePaywall","isPaid","paywallEnabled","useIdentity","isWaitingMount","setIsWaitingMount","hasLoadedDetails","shouldScrollToComments","useScrollTo","onRedirectToSignup","ModalLogin","onLoggedIn","CommentsSection","getProposalLink","canSubmitComments","proposalComments","commentsHeaderWrapper","IdentityMessageError","disableSubmit","mountTimeout","customMain","breakpoint","ProposalDetailPage","tabValues","statusByTab","PROPOSAL_VOTING_ACTIVE","PROPOSAL_VOTING_AUTHORIZED","PROPOSAL_VOTING_NOT_AUTHORIZED","PROPOSAL_VOTING_APPROVED","PROPOSAL_VOTING_REJECTED","PROPOSAL_VOTING_INELIGIBLE","DefaultLoader","DefaultEmptyList","LazyList","initialLoad","loadingPlaceholder","onFetchMore","hasMore","emptyListComponent","renderItem","pageStart","minInitialLoading","initialLoading","setInitialLoading","timer","loadMore","getFilteredRecordsAndToken","tab","filterCensored","filteredTokens","filteredRecords","Boolean","getRecordsByTabOption","getDefaultEmptyMessage","RecordsView","tabLabels","recordTokensByTab","renderRecord","getEmptyMessage","onFetchMoreProposals","onTabChange","onSetIndex","pageSize","loadingItems","setLoadingItems","tabOption","tabs","nojsTabs","loadingPlaceholders","renderProposal","forceLoad","VettedProposals","Sidebar","useQueryStringWithIndexValue","statuses","inventoryPageSize","onRestartMachine","hasMoreProposals","mapProposalsTokensByTab","LIST_HEADER_VETTED","displayTabCount","newIndex","dropdownTabsForMobile","VettedList","disableScrollToTop","Vetted","PROPOSAL_STATUS_UNREVIEWED","AdminProposals","setTabIndex","inventorypagesize","proposalStatus","LIST_HEADER_ADMIN","AdminList","Admin","ProposalForm","ProposalFormLazy","NewProposal","modalTitle","draftWrapper","draftTitleRfp","DraftsButton","draftProposals","useDraftProposals","openDraftsModal","ModalDrafts","PageProposalsNew","hasDetails","PROPOSAL_TYPE_REGULAR","CancelButton","RawProposal","rawMarkdownPre","ModalChangeUsername","setNewUsername","onSubmitChangeUsername","canSubmit","onDelete","handleDeleteDraft","deleteDraft","keepOnMobile","Drafts","draftID","Proposals","hasMoreToLoad","setHasMore","useUserProposals","numOfUserProposals","amountOfProposalsFetched","lastProposal","lastProposalToken","console","numOfProposalsLoaded","initialFetchDone","amountOfMissingProposals","itemsToBeLoaded","adminInvoicesActionsContext","useAdminInvoiceActions","AdminActionsProvider","invoices","nextInvoice","or","onRejectInvoice","onApproveInvoice","onDisputeInvoice","useAdminActions","onReject","onDispute","onPay","InvoiceActions","withInvoice","approveButton","rejectButton","disputeButton","getInvoiceStatusTagProps","Invoice","isPublicMode","approvedProposalsError","approvedProposals","payout","isEditableInvoice","invoiceToken","invoiceURL","invContractorName","invContractorLocation","invContractorRate","invContractorContact","paymentAddress","exchangeRate","totalHours","totalExpenses","expensetotal","totalAmount","totalDcrAmount","convertAtomsToDcr","dcrtotal","invoiceAttachments","num","li","useAdminInvoices","InvoicesAdmin","userInovices","inv","renderInvoice","renderInvoices","renderEmptyMessage","spinnerWrapper","useDraftInvoices","draftInvoices","useStoreSubscribe","handleSaveAppDraftInvoices","unsubscribe","useDraftDccs","draftDccs","handleSaveAppDraftDccs","domainName","presentationalDraftDccName","presentationalStatement","HiddenUsernameField","visibility","ModalChangePassword","onSubmitChangePassword","newPasswordVerify","reasonValidationSchema","changePasswordValidationSchema","buildUsernameRegex","supportedChars","regex","RegExp","changeUsernameValidationSchema","excludeEmptyString","IDENTITY","ACCOUNT","PREFERENCES","CREDITS","SUBMITTED_PROPOSALS","DRAFT_PROPOSALS","INVOICES","DRAFTS","MANAGE_DCC","PROPOSALS_OWNED","TOTP","isExpired","expiryTime","useManageUser","manageUserAction","loadingSelector","useChangePassword","useValidationSchema","InfoSection","alignLabelCenter","sectionWrapper","darkLabel","alignSelf","infoError","noInfo","wordBreak","newuserverificationtoken","useNavigation","handlePermanentLogoutClick","AdminAccount","newuserverificationexpiry","newuserpaywalladdress","newuserpaywallamount","newuserpaywalltxnotbefore","failedloginattempts","resetpasswordverificationtoken","resetpasswordverificationexpiry","updatekeyverificationtoken","updatekeyverificationexpiry","islocked","isdeactivated","isUserPageOwner","enablePaywall","MANAGE_USER_DEACTIVATE","deactivateUser","isApiRequestingDeactivateUser","MANAGE_USER_REACTIVATE","reactivateUser","isApiRequestingReactivateUser","MANAGE_USER_EXPIRE_NEW_USER_VERIFICATION","markVerificationTokenAsExpired","isApiRequestingMarkNewUserAsExpired","MANAGE_USER_EXPIRE_RESET_PASSWORD_VERIFICATION","markResetPasswordTokenAsExpired","isApiRequestingMarkResetPasswordAsExpired","MANAGE_USER_EXPIRE_UPDATE_KEY_VERIFICATION","markUpdateKeyAsExpired","isApiRequestingMarkUpdateKeyAsExpired","isActivationLoading","handleOpenDeactivateReactivateUserModal","AdminSection","EmailSection","PasswordSection","UserDataSection","AddressSection","PaywallSection","UserAccount","OtherAccount","Account","isUser","openPaywallModal","isApiRequestingMarkAsPaid","openMarkAsPaidModal","block","blockDetails","darkTitle","descriptionParagraph","darkDescriptionParagraph","proposalCredits","proposalCreditPrice","amountOfCreditsAddedOnRescan","errorRescan","Credits","MANAGE_USER_CLEAR_USER_PAYWALL","markAsPaid","useCredits","useRescanUserCredits","onRescanUserCredits","isLoadingRescan","RegistrationFeeSection","ProposalCreditsSection","RescanSection","DcrTransactionLink","txID","tableHeaders","manuallyCleared","getRowDataForPurchase","purchase","Amount","numberPurchased","price","Transaction","txId","confirming","confirmations","paywallConfirmations","datePurchased","formatShortUnixTimestamp","getCsvData","d","ExportToCsv","fields","filename","csvContent","forEach","titles","encodeURI","setAttribute","getElementById","click","exportToCsv","display","purchases","pendingTransaction","creditPrice","proposalCreditsPurchases","proposalPaywallPaymentConfirmations","proposalPaywallPaymentTxid","proposalPaywallPaymentAmount","paywallTxNotBefore","paywallAmount","paywallTxId","userPaywallStatus","paywallPayment","allPurchases","paywallconfirmations","overflowX","isApiRequestingUserProposalCredits","proposalPaymentReceived","shouldPollPaywallPayment","useUserPaymentModals","handleOpenPaywallModal","handleOpenBuyCreditsModal","CreditHistorySection","AdminCredits","UserCredits","AdminUserCredits","monospace","IdentityList","identityList","identity","KeysModal","pastIdentities","full","fieldHeading","OtherIdentity","loadingKey","activeIdentity","isactive","PUB_KEY_STATUS_LOADING","paddingSize","PublicKeyText","PastKeysSection","UserIdSection","auditIdentity","setFileError","PUBLIC_KEY_MISMATCH","INVALID_KEY_PAIR","onSelectFiles","base64","getJsonData","secretKey","INVALID_FILE","stack","ModalImportIdentity","fileError","onSubmitNewIdentity","LOAD_KEY_FAILED","flexDirection","justifyContent","alignItems","handleFiles","multipleFiles","fileTypes","FileDownloadLink","download","PrivateKeyDownloadManager","keyData","updateKey","setKeyData","isSubscribed","fetchKeys","margin","Identity","UserIdentity","Preferences","isApiRequestingEditUser","editUserResponse","editUserError","showConfirm","setShowConfirm","formikProps","customSetFieldValue","marginHorizontal1","Checkbox","checked","submitButton","savedIcon","selectStyles","provided","multipleSelectStyles","ManageDccForm","onUpdate","supervisoruserids","proposalsowned","updated","setUpdated","useSupervisors","loadingSupervisors","supervisorsError","supervisorsOptions","initialSupervisorOptions","getInitialAndOptionsSupervisors","loadingOwnedProposals","proposalsOptions","initialOwnedProposals","getInitialAndOptionsProposals","handleSubmitForm","dirty","submitEnabled","errorMessage","isMulti","UserDccInfo","contractorType","showEdit","onToggleDccEdit","ownedProposals","owned","getOwnedProposals","UserContractorInfo","githubname","matrixname","showGitHubName","onToggleContractorInfoEdit","ManageContractorUserView","requireGitHubName","hideDccInfo","hideContractorInfo","showDccForm","showContractorInfoForm","EditContractorForm","onEdit","handleEditContractor","editContractor","useContractor","onUpdateDccInfo","onUpdateContractorInfo","isDeveloper","isUserDeveloper","ManageContractor","setShowContractorInfoForm","setShowDccForm","enableEditMode","canEditDccInfo","canSeeContractorInfo","UserView","totalReducer","lineitem","formatData","Subdomain","Description","Labor","Expenses","Total","MonthItems","monthItems","linesPerPage","totalText","YearItems","yearItems","groupedByMonth","groupBy","reverse","MONTHS_LABELS","AllItems","groupedByYearItems","BillingInfo","groupedByYear","ProposalTitle","proposalTitle","ProposalBilling","billingInfoSelector","billingInfo","getProposalBillingInfo","useProposalsOwnedBilling","showInfo","setShowInfo","showBillingInfo","showLoading","ProposalsOwned","useUserTotpVerified","hasTotp","SetTotp","totp","isAlreadySet","setContainer","qrcode","image","instructions","copyableKey","totpAuthenticators","Totp","userTotp","alreadySet","errorcode","isInvalidParamsError","useTotp","handleResetTotp","handleVerifyTotp","Set","shouldShowResetInstructions","verifyProps","resetProps","handleOpenTOTPModal","buttonLabel","Tabs","Tab","isAdminOrTheUser","ownsProposals","tabLabel","filterByRecordType","setKeyAsLoaded","setPubkey","refreshPubKey","existing","myPubKeyHex","PUB_KEY_STATUS_LOADED","isMobileScreen","currentTabComponent","Submitted","getTabComponents","titleLink","PageUserDetail","useOnboardModal","TransitionGroup","CSSTransition","timeout","Switch","PageProposalsVettedList","PageProposalsAdmin","render","PageProposalNew","PageProposalDetail","PageProposalRaw","PageProposalEdit","PageNotFound","CheckboxField","CheckboxGroupField","groupName","renderList","elements","groupList","groupListItem","renderDropdown","groupDropdown","groupDropdownItem","makeText","m","Array","firstDateLabel","secondDateLabel","Arrow","isOpen","arrowAnchorOpen","arrowAnchor","MonthPickerField","years","toggleable","multiChoice","isDisabled","setDisabled","useBooleanState","openPicker","closePicker","togglePicker","isMonthsMode","isRange","lang","selectedDate","newValues","valueWrapper","SearchSelector","extStyles","inputValue","setInputValue","resultForEmailSelector","resultForUsernameSelector","resultsForEmail","resultsForUsername","unionBy","useReactiveSearchUser","onInputChange","newV","isSearchable","noOptionsMessage","escapeClearsValue","defaultInitialValues","filters","disputed","paid","HookOnFormChange","OnChangeFiltersModifier","InvoiceFilterForm","disableUserFilter","isAdminPage","handleLastMonths","filterOptions","adminFilterOptions","shift","form","topFilters","monthPicker","checkboxesWrapper","presetDates","FilterInvoices","filterValues","filterByDate","filterByRange","firstDateSelected","secondDateSelected","first","second","invoiceDate","filterByUserID","filterByStatus","filteredInvoices","flow","array","func","isRequired","object","ListUserInvoices","DefaultNewButton","invoicesSelector","useUserInvoices","setFilters","handleFiltersChange","PageListUserInvoices","List","lineItemPathRegex","DraftSaver","setValues","submitSuccess","setDraftId","onSave","saving","setSaving","saved","setSaved","canSaveDraft","setQueryStringValue","foundDraftInvoice","omit","ExchangeRateField","useExchangeRate","InvoiceForm","isFormValid","setSessionStorageInvoice","validateFiles","useScrollFormOnError","SubmitButton","handleChangeInvoiceDatasheet","handleFilesChange","fs","lineItemErrors","errMsg","improveLineItemErrors","handleFileRemoval","handleChangeWithTouched","AttachFileInput","onRemove","errorsPerFile","editMode","setSubmitSuccess","invoiceFormValidation","cmscontactsupportedchars","cmsnamelocationsupportedchars","maxlocationlength","minlocationlength","mincontactlength","maxcontactlength","minnamelength","maxnamelength","minlineitemcollength","maxlineitemcollength","invoicefieldsupportedchars","typeError","of","optional","invoiceValidationSchema","validmimetypes","maximagesize","maximages","validMimeTypes","startsWith","validatedFiles","maxFilesExceededMessage","maxFileSizeMessage","validMimeTypesMessage","generateFilesValidatorByPolicy","FORM_INITIAL_VALUES","formInitialValues","useSessionStorage","sessionStorageInvoice","userDetails","NewInvoice","PageInvoicesNew","useInvoice","invoiceSelector","unfetchedProposalsTokens","getProposalsTokensFromInvoice","hasUnfetchedProposalsTokens","RETRY","InvoiceLoader","isInvoiceLoaded","PageInvoiceEdit","Headers","statsHeader","collapse","h","Statistic","add","del","singleStat","addition","deletion","ContributionList","links","pos","prs","lastIndex","numberPos","prUrl","prNumber","URL","pathname","substring","getUrlEnd","CodeStatDetails","commitadditions","commitdeletions","updatedadditions","updateddeletions","repository","mergedadditions","mergeddeletions","reviewadditions","reviewdeletions","reviews","commits","setShow","contributionDetails","FetchCodeStats","useFetchCodeStats","IndividualCodeStats","codeStatsSelector","useCodeStats","shouldPrintTable","shouldPrintEmptyMessage","codeStats","cs","titleLinkWrapper","printInvoiceInfo","invoiceLinkWrapper","formatCentsToUSD","FetchInvoices","showStats","setShowStats","currentInvoice","invTimestamp","useInvoices","uilink","subcontractorsids","sc","statsTitle","subContractorsInLineItems","linesSubContractors","setMonth","InvoiceDetailPage","ModalInviteContractor","onInviteContractor","onInvite","icon","ActionsContent","openInviteModal","inviteContractorLink","generatePayoutsLink","payoutSummariesLink","proposalBillingSummaryLink","actionsWrapper","ListAdminInvoices","PageListAdminInvoices","PayoutsList","payouts","useAdminPayouts","hasPayouts","payBtn","bodyCellClassName","tableBodyCell","headClassName","approvedtime","labortotal","copyableText","PageGeneratePayoutsList","DEFAULT_INITIAL_VALUES","sDate","eDate","getCurrentDateValue","datesRange","PayoutsDateRange","InvoicePayoutsList","dates","setDates","lineItemPayouts","useInvoicePayouts","hasLineItemPayouts","valueOf","handleDatesChange","paiddate","amountreceived","invoicetoken","PageInvoicePayouts","PayoutSummaries","TABLE_HEADERS","ProposalBillingSummary","proposalsBilled","getSpendingSummary","useProposalBillingSummary","setProposals","searchString","setSearchString","actionsClassName","searchWrapper","rounded","stringRegex","newProposals","card","totalbilled","ProposalsBillingSummary","isSubContractorLineItem","getInvoiceTotalLabor","getSubContractorsInfo","SubContractorReference","onMouseEnter","onMouseLeave","reference","getDetailsData","totalUsd","cur","totalDcr","totalLabor","subContractorTotalLabor","getSubContractorTotalLabor","detailsData","totaldcr","totalusd","subContractorTotal","lineItem","getSubContractorTotal","subContractorTotalDcr","subContractorRate","head","getSubContractorRate","getSubContractor","ProposalBillingDetails","proposalBillingDetails","getSpendingDetails","useProposalBillingDetails","loadingSubContractors","isTotalZero","isDetailsLoaded","anyError","proposalDetailsData","tableWrapper","ProposalsBilling","DEFAULT_ARGS","useFetchOnce","enabled","adminDccsActionsContext","useAdminDccActions","onApproveDcc","DCC_STATUS_APPROVED","onRejectDcc","DCC_STATUS_REJECTED","presentationalDccName","reasonLabe","DccActions","withDcc","isDccActive","VotesList","currentID","list","marker","ModalVotesList","supportList","againstList","neutralList","SupportOpposeActions","buttonsClassName","dccToken","onFetchUsers","onSupportDcc","DCC_SUPPORT_ACTION","onOpposeDcc","DCC_OPPOSE_ACTION","isContractor","isUserValidContractor","useDccActions","supportuserids","supportusernames","againstuserids","againstusernames","handleOpenModalConfirm","handleSupportDcc","handleOpposeDcc","isVotingAvailable","isDccSupportOpposeAvailable","supportButton","opposeButton","dccSupportOpposeStatus","showMarker","dccSupportOpposeList","dccpayload","timesubmitted","sponsoruserid","sponsorusername","statuschangereason","timereviewed","dccURL","dccDomain","dccContractorType","dccStatement","isRevocationDcc","presentationalDccContractorType","isDccApproved","getDccStatusTagProps","bottomMarginSize","presentationalDccType","SupportOppose","supportOpposeBar","supportOpposeButtons","dccActions","ExtraSmallContentLoader","RegularContentLoader","DccLoader","dccSelector","useDcc","dccLink","DccDetailPage","ListDccs","DCC_STATUS_ACTIVE","setStatus","dccsByStatus","onFetchDccs","dccs","unorderedDccs","sortDccsByTimestamp","handleTabChange","useDccs","renderDccs","presentationalStatus","DccList","issuanceFieldValidator","DCC_TYPE_ISSUANCE","useQueryString","foundDraftDcc","delay","Select","formSelect","formSelectError","DccForm","cmsUsers","setSessionStorageDcc","isUserValid","isSupervisor","isIssuance","setIsIssuance","DCC_TYPE_REVOCATION","CONTRACTOR_TYPE_REVOKED","handleChangeSelector","handleChangeNomineeSelector","getDccTypeOptions","radioButton","getNomineeOptions","nominee","getContractorTypeOptions","TextArea","userDomain","dccFormValidation","cmsstatementsupportedchars","dccValidationSchema","sessionStorageDcc","CONTRACTOR_TYPE_SUPERVISOR","removeCurrentUser","NewDcc","onSubmitDcc","nomineeUsersSelector","CONTRACTOR_TYPE_NOMINEE","fullUsers","nomineeUsers","usersError","useNewDcc","PageDccsNew","Redirect","loggedIn","PageInvoiceDetail","PageProposalBillingSummary","PageProposalBillingDetails","PageDccList","PageDccNew","PageDccDetail","Root","RoutesCMS","SessionChecker","showModal","sessionExpired","setSessionExpired","sessionmaxage","lastlogintime","checkUserSession","expired","interval","setInterval","clearInterval","useSessionChecker","closeModal","openModal","disableDismiss","bytesSize","maxSizeInBytes","maxFiles","maxByteSize","themeCustomVariables","themes","DEFAULT_LIGHT_THEME_NAME","defaultLightTheme","defaultDarkTheme","fonts","SourceSansProLight","SourceSansProRegular","SourceSansProSemiBold","App","defaultThemeName","Config","Loader","StaticContent","Router","ModalProvider","targetElement","ReactDOM","userByID","searchResults","searchResultsByID","queryResultsByEmail","queryResultsByUsername","queryResultsByPublicKey","cmsUsersByContractorType","cmsUsersByDomain","cmsUserByID","newUser","makeGetUserByID","createSelector","currentCmsUser","currentUserIsAdmin","currentUserPublicKey","currentUserPaywallAddress","currentUserPaywallTxid","currentUserPaywallTxNotBefore","currentUserKeyVerificationToken","currentUserVerifiedKey","currentUserEdited","currentUserResetPassword","currentUserPaywallAmount","paywallamount","currentUserPreferences","emailNotificationsToPreferences","emailnotifications","makeGetSearchResultsByEmail","allResults","idsByEmail","makeGetSearchResultsByUsername","idsByUsn","makeGetUsersByContractorTypes","contractorTypes","contractorTypesArray","castArray","flatten","usersByCurrentDomain","usersByDomain","userTotpVerified","totpverified","getSelectValue","formValue","STATUS_ERR","400","401","403","404","apiRecords","apiTicketVote","apiComments","apiPi","getUrl","GET","withoutVersion","credentials","parseResponse","getOptions","Accept","getResponse","convertMarkdownToFile","utoa","convertJsonToFile","makeProposal","objectToSHA256","bufferToBase64String","objectToBuffer","digestPayload","makeInvoice","makeComment","makeCommentEdit","makeDccComment","makeCommentVote","makeCensoredComment","makeDCC","makeDCCVote","signRegister","digests","Buffer","from","root","MerkleTree","getRoot","signDccComment","signComment","signCommentEdit","signDcc","signDccVote","signCommentVote","signCensorComment","reject","contentType","internalError","statusCode","parseResponseBody","csrfToken","ErrorCode","errorcontext","ErrorContext","pluginid","APIPluginError","APIUserError","me","route","register","verifyNewUser","likedComments","editUser","manageUser","manageCmsUser","proposalBilling","login","commentVote","censorComment","changeUsername","newusername","changePassword","currentpassword","resetPassword","verifyResetPassword","resendVerificationEmailRequest","updateKeyRequest","starttime","endtime","verifyKeyRequest","policyWWW","userProposals","searchUser","proposalsBatch","proposalDetails","commentsTimestamps","commentids","invoiceComments","logout","proposalSetStatus","proposalSetBillingStatus","pk","billingStatusChanges","newProposal","editProposal","newComment","editComment","startVote","signatures","starts","proposalsBatchVoteSummary","batchProposalSummary","proposalVoteDetails","proposalSubmissions","ticketVoteTimestamps","proposalAuthorizeOrRevokeVote","verifyUserPayment","proposalPaywallDetails","proposalPaywallPayment","userProposalCredits","rescanUserPayments","PUT","proposalsInventory","votesInventory","recordsTimestamp","invoiceSetStatus","searchCmsUsers","inviteNewUser","newInvoice","INVOICE_STATUS_UNREVIEWED","editInvoice","userInvoices","adminInvoices","generatePayouts","invoicePayouts","payApprovedInvoices","userSubcontractors","newDcc","dccDetails","supportOpposeDCC","setDCCStatus","dccComments","newDccComment","setTotp","verifyTotp","RemoveButton","removeFileIcon","ImageThumbnail","handleClick","imageThumbnailWrapper","imageThumbnail","TextThumbnail","fileThumbnailWrapper","fileThumbnail","fileThumbnailText","ThumbnailGridErrors","fileErrors","isArray","fileErrorText","ThumbnailGrid","thumbnailGrid","initialIndex","capitalize","stringInput","initialValue","serializedState","localStorage","getItem","getLocalStorageValue","storedValue","setStoredValue","onSetValue","serializedValue","setLocalStorageValue","useEventListener","oldValue","parsedValue","log","eventName","handler","element","savedHandler","useRef","addEventListener","eventListener","removeEventListener","totalVotes","trunc","eligibletickets","isActiveApprovedRfp","proposalLinkBy","minlinkbyperiod","isSubmissionsPreVote","PROPOSAL_VOTING_FINISHED","chainHeight","blocks","blockTimeMinutes","BLOCK_DURATION_TESTNET","BLOCK_DURATION_MAINNET","dateMs","markdownFile","getTextFromIndexMd","isJsEnabled","metaKey","ctrlKey","getRfpLinkedProposals","shortProposalToken","linkedProposal","set","linkedFrom","val","hasRfpSubmissions","isSubmissionWithProposals","getProposalStatusLabel","isByRecordStatus","PUBLIC","inventory","getRecordsTokensByStatusList","ModalExternalLink","tmpLink","border","borderRadius","background","protocol","hostname","hash","newWindow","open","opener","LinkRenderer","newProps","xssFilters","uriInDoubleQuotedAttr","handleFilterXss","top","isExternalLink","imageHandler","linkHandler","customComponents","img","MarkdownRenderer","skipHtml","unwrapDisallowed","remarkPlugins","gfm","components","prototype","confirmWithModal","displayExternalLikWarning","escapeHtml","useOnRouteChange","titleStyle","paddingRight","hideTitle","redirectToPrivacyPolicyRoute","emailId","passwordId","renderPrivacyPolicyModal","defaultTitle","newTitle","setDocumentTitle","useScrollToTop","disable","useLayoutEffect","scrollTo","getUnfetchedTokens","cacheVoteStatus","updateCacheVoteStatusMap","isRefresh","isUndefined","getProposals","missingBillingStatusChangesTokens","tokensToLoad","linkedProposals","voteStatus","proposalWithCacheVotetatus","voteStatuses","setStatuses","initializedInventory","setInitializedInventory","recordState","currentStatuses","statusIndex","setStatusIndex","currentStatus","billingStatusChangesByToken","allByStatus","isStatusApproved","tokensFetched","errorSelector","scanNextStatusTokens","oldTokens","newTokens","newTokensByStatus","isPageComplete","hasNextStatus","needsToCompletePaginationBatch","nextIndex","nextStatus","nextStatusTokens","billingsToFetch","batchBillingTokensToFetch","tokensToFetch","unfetchedTokens","assign","compact","getRfpLinks","unfetchedRfpLinks","isFetchDone","isAnotherTokensScanningRequired","newStatuses","foundPreviousSessionStatus","statusLabel","isProposalsBatchComplete","machineCurrentState","IDENTITY_NOT_FOUND","IDENTITY_MISMATCH","setIdentity","userActivePublicKey","valid","verifyIdentity","currency","atoms","unixtimestamp","toUTCString","day","getDate","currentdate","getUTCDate","getUTCMonth","getUTCFullYear","Intl","NumberFormat","centsInput","isPluginIdentityError","errorid","IDENTITY_ERROR","formatTimestampsFromMessage","msg","newMsg","formattedTime","schemaCreator","setValue","findIndexValue","findIndex","computedValues","setIndex","handleSaveAppDraftProposals","tokensSelector","proposalsSelector","tokensByStatus","numOfUserProposalsSelector","resTokens","getRfpSubmissions","DEFAULT_STATE","mapStateTransitionActions","fetchReducer","nextState","getNextState","currentState","allCommentsBySectionSelector","sectionCommentsSelector","sectionIdsSelector","commentsLikesSelector","commentsVotesSelector","lastVisitTimestampSelector","commentsLikes","commentsVotes","RECORD_TYPE_DCC","onFetchComments","onFetchLikes","onCommentVoteAction","isCurrentUserAdmin","isProposal","hasCommentsLeft","isRecordMissingComments","isVettedProposal","needsToFetchComments","needsToFetchCommentsLikes","resultsByPk","resultsByID","isLoadingUser","setState","mapPaymentToStatusTag","PAYWALL_STATUS_WAITING","PAYWALL_STATUS_LACKING_CONFIRMATIONS","PaymentStatusTag","number","createDeepEqualSelector","createSelectorCreator","defaultMemoize","NOTIFICATION_EMAIL_MY_PROPOSAL_STATUS_CHANGE","NOTIFICATION_EMAIL_MY_PROPOSAL_VOTE_STARTED","NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VETTED","NOTIFICATION_EMAIL_REGULAR_PROPOSAL_EDITED","NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VOTE_STARTED","NOTIFICATION_EMAIL_ADMIN_PROPOSAL_NEW","NOTIFICATION_EMAIL_ADMIN_PROPOSAL_VOTE_AUTHORIZED","NOTIFICATION_EMAIL_COMMENT_ON_MY_PROPOSAL","NOTIFICATION_EMAIL_COMMENT_ON_MY_COMMENT","modalContext","otherProps","toHex","toUint8Array","toByteArray","bytes","Uint8Array","ceil","parseInt","substr","call","loadKeys","localforage","STORAGE_PREFIX","removeKeys","removeItem","generateKeys","nacl","sign","keyPair","warn","myKeyPair","myPublicKey","detached","signStringHex","util","decodeUTF8","signString","verifyKeyPair","keysFromHex","sig","pubKey","getKeys","keysToHex","importKeys","decodedKeys","needStorageKeyReplace","replaceStorageKey","oldKey","newKey","ConfigContext","CustomConfigContext","ConfigConsumer","Consumer","defaultConfig","customConfig","ConfigProvider","configOptions","CustomConfigProvider","customConfigOptions","env","dotenvParse","process","defaultPreset","politeiaConfig","runtimeConfig","loadConfig","presetName","mergeAll","configModule","default","setConfig","cfg","initConfig","paywallenabled","enableCredits","ConfigFilter","showIf","config","useAsyncState","ModalPayPaywall","paywallAddress","paywallDescription","paragraphRenderer","headingRenderer","level","Heading","H1","H2","H3","H4","H5","H6","markdownHeadings","linkRenderer","source","setSource","getContent","useStaticContent","fetchSource","h2","exchangeRates","currRate","moth","getKey","needsFetching","callbackFn","mountedRef","setValueFalse","getSessionStorageValue","setSessionStorageValue","HamburgerMenu","toggleShowMenu","showMenu","navButton","navIconClose","navIcon","usePollProposalCreditsPayment","proposalCreditsButton","plusIcon","navMenuPaths","setThemeName","userIsAdmin","isValidContractor","menuItems","admin","dccRequired","activeDropdownItem","onMenuItemClick","darkThemeOnLocalStorage","setDarkThemeOnLocalStorage","onThemeToggleHandler","loggedInContainer","noCreditsContainer","dropdown","noCreditsDropdown","dropdownList","onToggle","toggled","navContainer","themeToggleWrapper","publicWrapper","navLinkCtn","NavLink","navLink","activeClassName","activeNavLink","navLinkText","NavigationDrawer","fullScreen","useLockBodyScrollOnTrue","navigationDrawerFullScreen","navigationDrawer","navigationDrawerShow","navWrapper","SidebarContent","small","extrasmall","setShowMenu","hideLogo","showLogo","Logo","ModalOnboard","onBoardContent","onBoardLink","focus","firstUserAccess","showOnboard","setShowOnboard","ErrorBoundary","this","errorRenderer","displayError","Component","onRequestApiInfo","localLogout","defaultStyle","transition","opacity","transitionStyles","entering","entered","exiting","exited","LoaderScreen","mounted","setMounted","Transition","in","LoaderContext","setInitDone","setApiInfo","userActiveOnLocalStorage","setUserActiveOnLocalStorage","onInit","hasUser","PaymentFaucet","onFail","isApiRequestingPayWithFaucet","proposalPaywallPaymentTxidSelector","paywallFaucetTxidSelector","payWithFaucetTxId","payWithFaucetError","resetFaucet","useFaucet","handlePayment","paywallFaucet","transactionIdMessage","transactionLabel","transactionIdLink","QRCode","qr_img","qr","imageSync","dangerouslySetInnerHTML","__html","PaymentComponent","paywallInfo","qrcodeWrapper","infoWrapper","goTo","newButton","UISidebar","renderError","singleContentMain","isNull","headerClassName","titleAndSubtitleWrapperClassName","titleContent","pageDetailsTitle","customPageDetails","pageDetailsHeader","titleAndSubtitleWrapper","pageDetailsActions","customTab","customMainNoSidebar","MultipleContentpage","ModalPrivacyPolicy","loginValidationSchema","ModalTotpVerifyContent","onType","clearCode","TOTP_CODE_LENGTH","ModalTotpVerify","LoginForm","loadingPolicy","useLogin","TOTP_MISSING_LOGIN_ERROR","overlay","handleOnPrivacyPolicyClick","privacyPolicyTxt","createAccounTxt","getDigitsArrayFromCode","newDigits","fillArray","fill","DigitsInput","autoFocus","digits","setDigits","focused","setFocused","inputRef","mainInput","numbersOnlyCode","digitsWrapper","focusedInput","defaultValue","onFocus","selectionStart","selectionEnd","onChangeDigit","onFill","isForm","VerifyTotp","inputClassName","enableVerify","setEnableVerify","setCode","onFillCode","newCode","inputLabel","PaywallMessage","paywallContent","WrapperComponent","SidebarBlock","sideBarBlockWrapper","aboutContent","IdentityErrorBoundary","listen","identityErrorRenderer","toggleReducer","toggle","modalStack","modalToDisplay","toggleDisplay","modal","newModal","pop","previousModal","staticContentContext","StaticContentProvider","setContents","markdownContent","logoLight","logoDark","logoSrc","role","require","currentImageIdx","setCurrentImageIdx","currentImage","imgSrc","imgAlt","canNavigate","showNextImage","showPreviousImage","prevIndex","wrapperClassName","navigator","navigatorCard","navigatorIcon","onFetchPolicy","dccTypes","dccStatusList","DCC_STATUS_DRAFTS","CMS_USER_TYPES","CONTRACTOR_TYPE_SUBCONTRACTOR","idList","usernameList","isUserIdOn","idArray","isDccNotActiveFP","DCC_FULL_USER_CONTRACTOR_TYPES","DCC_DOMAIN_DEVELOPER","buildRegexFromSupportedChars","concatedChars","char","buildSimpleMatchRegexFromSupportedChars","invalidMessage","stringUtils","buildValidCharsStrFromSupportedChars","minLenght","exactLengthMessage","maxLength","minAmount","maxAmount","defaultErrorMessage","context","PiUserError","RecordsUserError","CommentsUserError","TicketvoteUserError","WWWUserError","pluginId","PiPluginError","PiUserPluginError","CommentsPluginError","TicketvotePluginError","1","2","3","4","errorMap","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","29","0","21","22","23","24","25","26","27","28","30","31","32","33","34","35","36","37","38","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","shouldScroll","scrollToElement","scrollIntoView","singleAction","footer","loader","stateKey","persistentStateKey","saveStateLocalStorage","stateFromLs","draftProposalsFromStore","app","draftProposalsLocalStorage","draftInvoicesFromStore","draftInvoicesLocalStorage","draftDccsFromStore","draftDccsLocalStorage","customConfigDcc","TESTNET","CMSWWWMODE","EXPLORER","CENSORSHIP_TOKEN_LENGTH","PROPOSAL_FILTER_ALL","PROPOSAL_AMOUNT_UNIT","USER_METADATA_PLUGIN","INVOICE_STATUS_NEW","INVOICE_STATUS_UPDATED","INVOICE_STATUS_DISPUTED","INVOICE_STATUS_REJECTED","INVOICE_STATUS_APPROVED","INVOICE_STATUS_PAID","INVALID_DATE_LABEL","hide","wrap","onSubmitForm","userIsPaidSelector","userPaywallStatusSelector","userIsPaid","creditsEnabled","init","csrfIsNeeded","shouldVerifyKey","identityImportResult","pollingCreditsPayment","reachedCreditsPaymentPollingLimit","newDraftProposals","newDraft","lastSubmitted","newDraftInvoices","newDraftDccs","DEFAULT_REQUEST_STATE","isRequesting","request","receive","keepError","reset","onRequestLikeComment","likeComment","userInventory","tokenInventory","commentslikes","userSearch","proposalOwnerBilling","resendVerificationEmail","setStatusProposal","updateUserKey","proposalsVoteSummary","authorizeVote","payApproved","spendingSummary","inviteUser","setStatusInvoice","newState","byToken","accessTimeByToken","backup","olderVotesFirst","calcScoreByComment","accObj","currentVote","calcVotes","oldVote","newUpvotes","newDownvotes","oldCommentVotes","update","accesstime","filteredComments","uniqWith","arrVal","othVal","signaure","authorUpdateIds","sectionIds","authorUpdateThreads","authorUpdateTree","calculateAuthorUpdateTree","isNewSectionId","oldCommentIdx","commentsUserVote","oldComment","oldCommentsVotes","newCommentsLikes","censorTargetComment","commentsByToken","sec","byUserID","credits","unspent","unspentcredits","spent","spentcredits","newcredits","DEFAULT_SEARCH_STATE","queryByEmail","queryByUsername","queryByPublicKey","byID","cms","byContractorType","byDomain","onReceiveLogout","publicData","onReceiveCMSLogout","userData","verifiedkey","usersByID","usersIds","searchedByEmail","searchedByUsername","searchedByPublicKey","usersFromContractorType","usersFromDomain","mapStatusToName","allByVoteStatus","allByRecordStatus","allProposalsByUserId","allTokensByUserId","numOfProposalsByUserId","newProposalToken","mapReviewStatusToTokenInventoryStatus","proposalIndexFile","getIndexMdFromText","updateAllByVoteStatus","newStatus","updatedByStatus","foundToken","updateProposalRfpLinks","updateInventory","allProps","propsStatus","payloadStatus","updateMultiProposalSummary","newReason","updateProposalSummary","updateMultiBillingStatusChanges","statuschanges","updateBillingStatusChanges","normalizedSummaries","indexFile","unreviewdProps","numOfProps","statusTokensArray","newArr","receiveVoteStatusChange","receiveMultiVoteStatusChange","proposalVotes","newInvoiceToken","invoiceArrayToByTokenObject","invoicesByToken","onReceiveInvoices","receivedInvoices","union","payoutSummaries","byStatus","newDccToken","dccStatus","onReceiveDccs","receivedDccs","dccsByToken","dccArrayToByTokenObject","dccArrayToByStatusObject","onReceiveDcc","receivedDcc","onReceiveSupportOpposeDcc","support","supportids","oppose","againstids","onReceiveSetDccStatus","dccsByOldDccStatus","dccByStatusRemoveByToken","onReceiveDraftDcc","onReceiveDrafts","paywall","newuserpaywalltx","faucetTxid","proposalsList","byProposalToken","rootReducer","combineReducers","getComposer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","getMiddlewares","thunkMiddleware","configureStore","preloadedState","composeEnhancers","middlewares","createStore","applyMiddleware","reduxContext","createSelectorHook","useDispatch","createDispatchHook","bindActionCreators","store","subscribe","throttle","ReduxProvider","useApplyAction","setResponse","apply","executeAction","areArgsEqual","newArgs","oldArgs","every","newArg","actionArgs","areArgsMatched","cachedArgs","customContainer","singleContent","FilesInput","acceptedFiles","as","accept","formattedFiles","btoa","getFormattedFiles","multiple","ModalAttachFiles","subTitle","imagefilecountmax","greyText","selectFileWrapper","selectFileButton","AttachFiles","handleOnChange","attachFileButton","attachSVG","sha256","crypto","createHash","leaves","hashAlgorithm","hashAlgo","layers","createHashes","nodes","layerIndex","left","right","leaf","proof","layer","isRightNode","pairIndex","position","targetNode","isLeftNode","buffers","creditsNumber","useProposalCreditsPaymentInfo","numOfConfirmations","proposalPaywallPaymentConfirmationsSelector","isPollingCreditsPayment","proposalPaywallPaymentAmountSelector","ModalBuyProposalCredits","initialStep","startPollingPayment","setNumber","customOnClose","setModalType","modalType","disableNext","actionButtons","isApiRequestingProposalPaywall","proposalPaywallAddressSelector","proposalCreditPriceSelector","creditsSelector","creditsPurchasesSelector","proposalPaywallAddress","proposalCreditsUnspent","paywallFaucetTxid","onPurchaseProposalCredits","shouldFetchPurchaseProposalCredits","shouldFetchProposalCredits","prevProposalPaywallPaymentTxid","amountOfCreditsAddedOnRescanSelector","onRescan","onResetRescan","onStartPollingPayment","customCloseProposalCreditsModal","fns","REQUEST_PROPOSAL","RECEIVE_PROPOSAL","REQUEST_START_RUNOFF_VOTE","RECEIVE_START_RUNOFF_VOTE","REQUEST_VOTES_DETAILS","RECEIVE_VOTES_DETAILS","REQUEST_VERIFY_RESET_PASSWORD","isTestNet","resolveEditUserValues","prefs","getIsApiRequesting","getApiError","isApiRequestingProposal","isApiRequestingInit","isApiRequestingPolicy","isApiRequestingUser","isApiRequestingUserSearch","isApiRequestingPropVoteResults","isApiRequestingProposalsVoteSummary","isApiRequestingBatchProposalSummary","isApiRequestingBillingStatusChanges","isApiRequestingVotesDetails","isApiRequestingVoteSummary","isApiRequestingRescanUserPayments","isApiRequestingProposalOwnerBilling","isApiRequestingComments","isApiRequestingCommentsLikes","isApiRequestingManageUser","apiManageUserPayload","makeIsApiRequestingManageUserByAction","apiInitError","propVoteResultsError","apiUserProposalsError","apiProposalError","apiPropsVoteSummaryError","apiProposalsBatchError","apiRescanUserPaymentsError","apiProposalCommentsError","apiInvoiceCommentsError","apiDccCommentsError","apiLikeCommentsError","apiCommentsLikesError","isApiRequestingInvoicePayouts","isApiRequestingProposalBillingSummary","isApiRequestingProposalBillingDetails","getIsExtApiRequesting","getExtApiError","getExtApiResponse","commentsInfoByToken","commentsVotesByToken","commentsLikesByToken","getByToken","mapByToken","getSectionIds","getCommentsMap","makeGetRecordCommentSectionIds","makeGetRecordCommentsInfo","makeGetRecordSectionComments","makeGetRecordComments","getSectionComments","makeGetRecordCommentsVotes","makeGetRecordCommentsLikes","makeGetLastAccessTime","creditsByUserID","makeGetCreditsAddedOnRescan","makeGetUnspentUserCredits","makeGetUserCreditsPurchasesByTx","spentUserCredits","makeGetSpentUserCredits","unspentUserCredits","groupedCredits","credit","datepurchased","proposalSummariesByToken","allProposalsByUserID","allTokensByUserID","makeGetProposalByToken","propsByToken","makeGetProposalSummaryByToken","s","makeGetBillingStatusChangeMetadata","makeGetUserProposalsTokens","makeGetNumOfProposalsByUserId","makeGetUserProposals","voteSummariesByToken","makeGetProposalVoteSummary","makeGetProposalVoteResults","summary","startvotereply","allInvoicesTokens","sortByNewestFirst","allInvoices","invByToken","makeGetInvoicesByUserID","makeGetInvoiceByToken","currUserID","payment","timelastupdated","toLocaleString","allDccsTokens","allDccs","makeGetDccByToken","paywallByUserID","makeGetPaywallByUserID","makeGetUserPaywallStatus","getUserPaywallStatus","makeGetPaywallCreditPrice","creditprice","createPaywallSelector","makeGetUserIsPaid","makeGetPaywallAddress","makeGetPaywallTxid","makeGetPaywallAmount","makeGetPaywallConfirmations","makeGetPaywallFaucetTxid","codeStatsByUserID","makeGetCodeStatsByUserID","userCodeStats","proposalOwnerBillingByToken","makeGetBillingInfoByToken","setQueryStringWithoutPageReload","qsValue","newurl","host","replaceState","queryString","newQsValue","routerCtx","navigationHistory","ctxValue","backArrow","isExactMatch","isExact","GoBackLink","hierarchy","hierarchyRef","previousHierarchyLink","hierarchyMatches","matchPath","strict","currentIndex","previousDefaultLinkIndex","prev","returnLinkContainer","returnLink","darkReturnLink","go","CryptoJS","SHA256","arrayBufferToWordArray","base64ToArrayBuffer","enc","Hex","sha3_256","unescape","atou","decodeURIComponent","escape","atob","parsedProps","parseProposalMetadata","parseVoteMetadata","parseProposalIndexFile","usermds","md","parsed","splitFp","parseUserPluginMetadata","mdByStatus","getProposalTimestamps","buf","buffer","binary_string","len","charCodeAt","ab","i8a","lib","WordArray","create","prefix","random","keyToBeMatched","minutes","parseFloat","fromHoursToMinutes","hours","cents","units","convertObjectToUnixTimestamp","endOfDay","replaceBlobsByDigestsAndGetFiles","newDescription","blob","has","b64toBlob","b64Data","sliceSize","byteCharacters","byteArrays","offset","byteNumbers","byteArray","Blob","replaceImgDigestByBlob","vals","blobUrl","webkitURL","createObjectURL","getChildrenComments","parents","authorUpdateId","allTreeComments","dayView","customStyles","control","SelectEditor","onCommit","getValueObj","setNewValue","TextAreaWrapper","wrapped","selectWrapper","textWithErrorWrapper","valuesOptions","highlightChar","textAreaWrapper","textWrapper","printHighlightingUnsupported","uniqueUnmatched","isMultiline","multilineCellValue","getUnmatchedSet","re","unmatched","multilineTextWrapper","singlelineTextWrapper","columnTypes","SUBCONTRACTOR_COL","SUBRATE_COL","LABOR_COL","EXP_COL","capitalizeFirstLetter","getSubcontractorOptions","policyLineItemTypes","supportedlineitemtypes","policyDomains","subtotal","lineLength","totals","commonProps","policySupportedChars","isLaborReadonly","isSubContractorReadonly","isExpenseReadonly","subUser","subContractorValue","typeValue","rowErrors","tableLine","valueViewer","dataEditor","gridBody","forceComponent","totalsLine","copyGrid","rowValues","updateGridCell","processTypeColChange","processSubRateColChange","processLaborColChange","processExpenseColChange","processSubtotalColChange","g","currentGrid","change"],"mappings":"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","file":"static/js/main.9aeff4d9.chunk.js","sourcesContent":["import compose from \"lodash/fp/compose\";\nimport reduce from \"lodash/fp/reduce\";\n\nexport const basicAction = (type) => (payload, error) => ({\n  type,\n  error: !!error,\n  payload: error ? error : payload\n});\n\nexport const reduceTypes = (types) =>\n  compose(\n    reduce((t, name) => ({ ...t, [name]: basicAction(types[name]) }), {}),\n    Object.keys\n  )(types);\n\nexport const callAfterMinimumWait = (callback, waitTimeMs) => {\n  let args = null;\n  let timedOut = false;\n\n  const revisedCallback = function () {\n    if (!timedOut) {\n      args = arguments;\n      return;\n    }\n\n    callback.apply(this, arguments);\n  };\n\n  setTimeout(() => {\n    timedOut = true;\n    if (args) {\n      revisedCallback.apply(this, args);\n    }\n  }, waitTimeMs);\n\n  return revisedCallback;\n};\n","/*\nThis lib is designed to handle persisting data for the text editors using session storage\n*/\nimport qs from \"query-string\";\nimport { getCurrentMonth, getCurrentYear } from \"../helpers\";\nimport { generateBlankLineItem } from \"../components/InvoiceDatasheet/helpers\";\n\nexport const NEW_PROPOSAL_PATH = \"/record/new\";\n\nexport const getProposalPath = (location) => {\n  const { pathname, search } = location;\n  const { draftid } = qs.parse(search);\n  const path = draftid ? `${pathname}-${draftid}` : pathname;\n  return path;\n};\n\nexport const PROPOSAL_FORM_NAME = \"name\";\nexport const PROPOSAL_FORM_DESC = \"description\";\n\nexport const getProposalBackupKey = (key, path) => `proposal-${key}::${path}`;\n\nconst updateProposalFormData = (state) => {\n  const proposalFormState = state.form[\"form/record\"];\n  const newProposalData = (proposalFormState && proposalFormState.values) || {};\n  const name = newProposalData[PROPOSAL_FORM_NAME];\n  const description = newProposalData[PROPOSAL_FORM_DESC];\n  if (!name && !description) {\n    return;\n  }\n\n  const path = getProposalPath(window.location);\n  sessionStorage.setItem(\n    getProposalBackupKey(PROPOSAL_FORM_NAME, path),\n    newProposalData[PROPOSAL_FORM_NAME]\n  );\n  sessionStorage.setItem(\n    getProposalBackupKey(PROPOSAL_FORM_DESC, path),\n    newProposalData[PROPOSAL_FORM_DESC]\n  );\n};\n\nexport const resetNewProposalData = () => {\n  sessionStorage.setItem(\n    getProposalBackupKey(PROPOSAL_FORM_NAME, NEW_PROPOSAL_PATH),\n    \"\"\n  );\n  sessionStorage.setItem(\n    getProposalBackupKey(PROPOSAL_FORM_DESC, NEW_PROPOSAL_PATH),\n    \"\"\n  );\n};\n\nexport const getNewProposalData = () => {\n  return {\n    name:\n      sessionStorage.getItem(\n        getProposalBackupKey(PROPOSAL_FORM_NAME, NEW_PROPOSAL_PATH)\n      ) || \"\",\n    description:\n      sessionStorage.getItem(\n        getProposalBackupKey(PROPOSAL_FORM_DESC, NEW_PROPOSAL_PATH)\n      ) || \"\"\n  };\n};\n\nexport const handleSaveTextEditorsContent = (state) => {\n  updateProposalFormData(state);\n};\n\n//CMS\nexport const NEW_INVOICE_PATH = \"/invoices/new\";\n\nexport const getInvoicePath = (location) => {\n  const { pathname, search } = location;\n  const { draftid } = qs.parse(search);\n  const path = draftid ? `${pathname}-${draftid}` : pathname;\n  return path;\n};\n\nexport const INVOICE_FORM_ADDRESS = \"address\";\nexport const INVOICE_FORM_CONTACT = \"contact\";\nexport const INVOICE_FORM_LINE_ITEMS = \"lineitems\";\nexport const INVOICE_FORM_LOCATION = \"location\";\nexport const INVOICE_FORM_MONTH = \"month\";\nexport const INVOICE_FORM_YEAR = \"year\";\nexport const INVOICE_FORM_NAME = \"name\";\nexport const INVOICE_FORM_RATE = \"rate\";\n\nexport const getInvoiceBackupKey = (key, path) => `invoice-${key}::${path}`;\n\nconst updateInvoiceFormData = (state) => {\n  const invoiceFormState = state.form[\"form/record\"];\n  const newInvoiceData = (invoiceFormState && invoiceFormState.values) || {};\n\n  const address = newInvoiceData[INVOICE_FORM_ADDRESS];\n  const contact = newInvoiceData[INVOICE_FORM_CONTACT];\n  const lineitems = newInvoiceData[INVOICE_FORM_LINE_ITEMS];\n  const location = newInvoiceData[INVOICE_FORM_LOCATION];\n  const month = newInvoiceData[INVOICE_FORM_MONTH];\n  const year = newInvoiceData[INVOICE_FORM_YEAR];\n  const name = newInvoiceData[INVOICE_FORM_NAME];\n  const rate = newInvoiceData[INVOICE_FORM_RATE];\n\n  if (\n    !address &&\n    !contact &&\n    !lineitems &&\n    !location &&\n    !month &&\n    !year &&\n    !name &&\n    !rate\n  ) {\n    return;\n  }\n\n  const path = getInvoicePath(window.location);\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_ADDRESS, path),\n    newInvoiceData[INVOICE_FORM_ADDRESS]\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_CONTACT, path),\n    newInvoiceData[INVOICE_FORM_CONTACT]\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_LINE_ITEMS, path),\n    JSON.stringify(newInvoiceData[INVOICE_FORM_LINE_ITEMS])\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_LOCATION, path),\n    newInvoiceData[INVOICE_FORM_LOCATION]\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_MONTH, path),\n    newInvoiceData[INVOICE_FORM_MONTH]\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_YEAR, path),\n    newInvoiceData[INVOICE_FORM_YEAR]\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_NAME, path),\n    newInvoiceData[INVOICE_FORM_NAME]\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_RATE, path),\n    newInvoiceData[INVOICE_FORM_RATE]\n  );\n};\n\nexport const resetNewInvoiceData = (policy) => {\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_ADDRESS, NEW_INVOICE_PATH),\n    \"\"\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_CONTACT, NEW_INVOICE_PATH),\n    \"\"\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_LINE_ITEMS, NEW_INVOICE_PATH),\n    JSON.stringify([generateBlankLineItem(policy)])\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_LOCATION, NEW_INVOICE_PATH),\n    \"\"\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_MONTH, NEW_INVOICE_PATH),\n    getCurrentMonth() - 1\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_YEAR, NEW_INVOICE_PATH),\n    getCurrentYear()\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_NAME, NEW_INVOICE_PATH),\n    \"\"\n  );\n  sessionStorage.setItem(\n    getInvoiceBackupKey(INVOICE_FORM_RATE, NEW_INVOICE_PATH),\n    \"\"\n  );\n};\n\nexport const getNewInvoiceData = () => {\n  const getDefaultDate = () => {\n    const isFirstMonth = getCurrentMonth() === 1;\n    const year = isFirstMonth ? getCurrentYear() - 1 : getCurrentYear();\n    const month = isFirstMonth ? 12 : getCurrentMonth() - 1;\n    return { year, month };\n  };\n\n  return {\n    address:\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_ADDRESS, NEW_INVOICE_PATH)\n      ) || \"\",\n    contact:\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_CONTACT, NEW_INVOICE_PATH)\n      ) || \"\",\n    lineitems: JSON.parse(\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_LINE_ITEMS, NEW_INVOICE_PATH)\n      )\n    ) || [generateBlankLineItem()],\n    location:\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_LOCATION, NEW_INVOICE_PATH)\n      ) || \"\",\n    month:\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_MONTH, NEW_INVOICE_PATH)\n      ) || getDefaultDate().month,\n    year:\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_YEAR, NEW_INVOICE_PATH)\n      ) || getDefaultDate().year,\n    name:\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_NAME, NEW_INVOICE_PATH)\n      ) || \"\",\n    rate:\n      sessionStorage.getItem(\n        getInvoiceBackupKey(INVOICE_FORM_RATE, NEW_INVOICE_PATH)\n      ) || \"\"\n  };\n};\n\nexport const handleSaveCSVEditorsContent = (state) => {\n  updateInvoiceFormData(state);\n};\n\nexport const getDCCBackupKey = (key, path) => `dcc-${key}::${path}`;\n\nexport const NEW_DCC_PATH = \"/dcc/new\";\n\nexport const getDCCPath = (location) => {\n  const { pathname, search } = location;\n  const { draftid } = qs.parse(search);\n  const path = draftid ? `${pathname}-${draftid}` : pathname;\n  return path;\n};\n\nexport const DCC_FORM_TYPE = \"dcctype\";\nexport const DCC_FORM_NOMINEE_ID = \"nomineeid\";\nexport const DCC_FORM_STATEMENT = \"dccstatement\";\nexport const DCC_FORM_DOMAIN = \"dccdomain\";\nexport const DCC_FORM_CONTRACTOR_TYPE = \"contractortype\";\n\nconst updateDCCFormData = (state) => {\n  const dccFormState = state.form[\"form/dcc\"];\n  const newDccData = (dccFormState && dccFormState.values) || {};\n\n  const type = newDccData[DCC_FORM_TYPE];\n  const nomineeuserid = newDccData[DCC_FORM_NOMINEE_ID];\n  const statement = newDccData[DCC_FORM_STATEMENT];\n  const domain = newDccData[DCC_FORM_DOMAIN];\n  const contractortype = newDccData[DCC_FORM_CONTRACTOR_TYPE];\n\n  if (!type && !nomineeuserid && !statement && !domain && !contractortype) {\n    return;\n  }\n\n  const path = getDCCPath(window.location);\n  sessionStorage.setItem(\n    getDCCBackupKey(DCC_FORM_CONTRACTOR_TYPE, path),\n    newDccData[DCC_FORM_CONTRACTOR_TYPE]\n  );\n  sessionStorage.setItem(\n    getDCCBackupKey(DCC_FORM_DOMAIN, path),\n    newDccData[DCC_FORM_DOMAIN]\n  );\n  sessionStorage.setItem(\n    getDCCBackupKey(DCC_FORM_STATEMENT, path),\n    newDccData[DCC_FORM_STATEMENT]\n  );\n  sessionStorage.setItem(\n    getDCCBackupKey(DCC_FORM_TYPE, path),\n    newDccData[DCC_FORM_TYPE]\n  );\n  sessionStorage.setItem(\n    getDCCBackupKey(DCC_FORM_NOMINEE_ID, path),\n    newDccData[DCC_FORM_NOMINEE_ID]\n  );\n};\n\nexport const getNewDccData = () => {\n  return {\n    dcctype:\n      sessionStorage.getItem(getDCCBackupKey(DCC_FORM_TYPE, NEW_DCC_PATH)) ||\n      \"\",\n    dccdomain:\n      sessionStorage.getItem(getDCCBackupKey(DCC_FORM_DOMAIN, NEW_DCC_PATH)) ||\n      \"\",\n    contractortype:\n      sessionStorage.getItem(\n        getDCCBackupKey(DCC_FORM_CONTRACTOR_TYPE, NEW_DCC_PATH)\n      ) || \"\",\n    dcccstatement:\n      sessionStorage.getItem(\n        getDCCBackupKey(DCC_FORM_STATEMENT, NEW_DCC_PATH)\n      ) || \"\",\n    nomineeid:\n      sessionStorage.getItem(\n        getDCCBackupKey(DCC_FORM_NOMINEE_ID, NEW_DCC_PATH)\n      ) || \"\"\n  };\n};\n\nexport const resetNewDccData = () => {\n  sessionStorage.setItem(getDCCBackupKey(DCC_FORM_TYPE, NEW_DCC_PATH), \"\");\n  sessionStorage.setItem(\n    getDCCBackupKey(DCC_FORM_CONTRACTOR_TYPE, NEW_DCC_PATH),\n    \"\"\n  );\n  sessionStorage.setItem(getDCCBackupKey(DCC_FORM_DOMAIN, NEW_DCC_PATH), \"\");\n  sessionStorage.setItem(getDCCBackupKey(DCC_FORM_STATEMENT, NEW_DCC_PATH), \"\");\n  sessionStorage.setItem(\n    getDCCBackupKey(DCC_FORM_NOMINEE_ID, NEW_DCC_PATH),\n    \"\"\n  );\n};\n\nexport const handleSaveDCCContent = (state) => {\n  updateDCCFormData(state);\n};\n","import * as types from \"./types\";\nimport { reduceTypes } from \"./lib\";\nexport default reduceTypes(types);\n","import Promise from \"promise\";\nimport * as api from \"../lib/api\";\nimport {\n  resetNewInvoiceData,\n  resetNewProposalData,\n  resetNewDccData\n} from \"../lib/editors_content_backup\";\nimport { clearStateLocalStorage } from \"../lib/local_storage\";\nimport * as pki from \"../lib/pki\";\nimport * as sel from \"../selectors\";\nimport act from \"./methods\";\nimport {\n  PAYWALL_STATUS_PAID,\n  DCC_SUPPORT_VOTE,\n  TOTP_DEFAULT_TYPE,\n  UNREVIEWED,\n  CENSORED,\n  AUTHORIZED,\n  UNAUTHORIZED,\n  ACTIVE_VOTE,\n  APPROVED,\n  REJECTED,\n  INELIGIBLE,\n  ARCHIVED,\n  PROPOSAL_METADATA_FILENAME,\n  VOTE_METADATA_FILENAME,\n  PROPOSAL_STATE_UNVETTED,\n  PROPOSAL_UPDATE_HINT,\n  PROPOSAL_MAIN_THREAD_KEY,\n  PROPOSAL_STATUS_PUBLIC\n} from \"src/constants\";\nimport {\n  parseReceivedProposalsMap,\n  parseRawProposal,\n  parseRawProposalsBatch,\n  shortRecordToken\n} from \"../helpers\";\n\nexport const onResetNewUser = act.RESET_NEW_USER;\n\nexport const onResetRescanUserPayments = (userid) => (dispatch) =>\n  dispatch(act.RESET_RESCAN_USER_PAYMENTS(userid));\n\nexport const onSetHasTotp = (payload) => (dispatch) =>\n  dispatch(act.SET_HAS_TOTP(payload));\n\nexport const requestApiInfo =\n  (fetchUser = true) =>\n  async (dispatch) => {\n    dispatch(act.REQUEST_INIT_SESSION());\n    try {\n      const response = await api.apiInfo();\n      dispatch(act.RECEIVE_INIT_SESSION(response));\n      // if there is an active session, try to fetch the user information\n      // otherwise we make sure there are no user data saved into localstorage\n      if (!response.activeusersession) {\n        clearStateLocalStorage();\n      } else if (fetchUser || response.activeusersession) {\n        await dispatch(onRequestMe());\n      }\n\n      return response;\n    } catch (error) {\n      dispatch(act.RECEIVE_INIT_SESSION(null, error));\n      throw error;\n    }\n  };\n\nexport const onRequestMe = () => (dispatch, getState) => {\n  dispatch(act.REQUEST_ME());\n  const isCMS = sel.isCMS(getState());\n  return api\n    .me()\n    .then((response) => {\n      dispatch(act.RECEIVE_ME(response));\n      // fetch CMS user details if needed\n      isCMS && response.userid && dispatch(onFetchUser(response.userid));\n    })\n    .catch((error) => {\n      dispatch(act.RECEIVE_ME(null, error));\n      clearStateLocalStorage();\n      throw error;\n    });\n};\n\nlet globalpollingpointer = null;\n\nexport const clearPollingPointer = () => clearTimeout(globalpollingpointer);\nexport const setPollingPointer = (paymentpolling) => {\n  globalpollingpointer = paymentpolling;\n};\n\nconst POLL_INTERVAL = 10 * 1000;\nexport const onPollUserPayment = () => (dispatch, getState) => {\n  const userid = sel.currentUserID(getState());\n  if (!userid) {\n    clearPollingPointer();\n    return;\n  }\n  return api\n    .verifyUserPayment()\n    .then((response) => response.haspaid)\n    .then((verified) => {\n      dispatch(\n        act.UPDATE_USER_PAYWALL_STATUS({\n          status: verified ? PAYWALL_STATUS_PAID : null,\n          userid\n        })\n      );\n      if (!verified) {\n        const paymentpolling = setTimeout(\n          () => dispatch(onPollUserPayment()),\n          POLL_INTERVAL\n        );\n        setPollingPointer(paymentpolling);\n      }\n    })\n    .catch((error) => {\n      clearPollingPointer();\n      throw error;\n    });\n};\n\nexport const onGetPolicy = () => async (dispatch, getState) => {\n  const isCMS = sel.isCMS(getState());\n  dispatch(act.REQUEST_POLICY());\n  try {\n    const [www, ticketvote, comments, pi] = await Promise.all([\n      api.policyWWW(),\n      !isCMS && api.policyTicketVote(),\n      !isCMS && api.policyComments(),\n      !isCMS && api.policyPi()\n    ]);\n    const policyOnRedux = { www };\n    if (!isCMS) {\n      policyOnRedux.ticketvote = ticketvote;\n      policyOnRedux.comments = comments;\n      policyOnRedux.pi = pi;\n    }\n    dispatch(act.RECEIVE_POLICY(policyOnRedux));\n  } catch (error) {\n    dispatch(act.RECEIVE_POLICY(null, error));\n    throw error;\n  }\n};\n\nexport const withCsrf = (fn) => (dispatch, getState) => {\n  const csrf = sel.csrf(getState());\n  if (csrf) return fn(dispatch, getState, csrf);\n\n  return dispatch(requestApiInfo()).then(() =>\n    withCsrf(fn)(dispatch, getState)\n  );\n};\n\nexport const onInviteUserConfirm = ({ email, isTemp }) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_INVITE_USER({ email }));\n    return api\n      .inviteNewUser(csrf, { email, temp: isTemp })\n      .then((response) => {\n        dispatch(act.RECEIVE_INVITE_USER(response));\n      })\n      .catch((error) => {\n        if (error.toString() === \"Error: No available storage method found.\") {\n          //local storage error\n          dispatch(\n            act.RECEIVE_INVITE_USER(\n              null,\n              new Error(\"CMS requires local storage to work.\")\n            )\n          );\n        } else {\n          dispatch(act.RECEIVE_INVITE_USER(null, error));\n        }\n        throw error;\n      });\n  });\n\nexport const onCreateNewUser = ({ email, username, password }) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_NEW_USER({ email }));\n    return api\n      .newUser(csrf, email, username, password)\n      .then((response) => dispatch(act.RECEIVE_NEW_USER(response)))\n      .catch((error) => {\n        if (error.toString() === \"Error: No available storage method found.\") {\n          //local storage error\n          dispatch(\n            act.RECEIVE_NEW_USER(\n              null,\n              new Error(\"Politeia requires local storage to work.\")\n            )\n          );\n        } else {\n          dispatch(act.RECEIVE_NEW_USER(null, error));\n        }\n        throw error;\n      });\n  });\n\nexport const onCreateNewUserCMS = ({\n  email,\n  username,\n  password,\n  verificationtoken\n}) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_NEW_USER({ email }));\n    return api\n      .register(csrf, email, username, password, verificationtoken)\n      .then((response) => {\n        dispatch(act.RECEIVE_NEW_USER(response));\n      })\n      .catch((error) => {\n        if (error.toString() === \"Error: No available storage method found.\") {\n          //local storage error\n          dispatch(\n            act.RECEIVE_NEW_USER(\n              null,\n              new Error(\"CMS requires local storage to work.\")\n            )\n          );\n        } else {\n          dispatch(act.RECEIVE_NEW_USER(null, error));\n        }\n        throw error;\n      });\n  });\n\nexport const onVerifyNewUser =\n  (email, verificationToken, username) => (dispatch) => {\n    dispatch(act.REQUEST_VERIFY_NEW_USER({ email, verificationToken }));\n    return api\n      .verifyNewUser(email, verificationToken, username)\n      .then((res) => dispatch(act.RECEIVE_VERIFY_NEW_USER(res)))\n      .catch((err) => {\n        dispatch(act.RECEIVE_VERIFY_NEW_USER(null, err));\n        throw err;\n      });\n  };\n\nexport const onSearchUser = (query, isCMS) => (dispatch) => {\n  dispatch(act.REQUEST_USER_SEARCH());\n  const apiReq = !isCMS ? api.searchUser(query) : api.searchCmsUsers(query);\n  return apiReq\n    .then((res) => dispatch(act.RECEIVE_USER_SEARCH({ ...res, query })))\n    .catch((err) => {\n      dispatch(act.RECEIVE_USER_SEARCH(null, err));\n      throw err;\n    });\n};\n\n// onLogin handles a user's login. If it is his first login on the app\n// after registering, his key will be saved under his email. If so, it\n// changes the storage key to his uuid.\nexport const onLogin =\n  ({ email, password, code }) =>\n  (dispatch, getState) => {\n    dispatch(onRequireCSRF());\n    return withCsrf(async (dispatch, _, csrf) => {\n      dispatch(act.REQUEST_LOGIN({ email }));\n      try {\n        const response = await api.login(csrf, email, password, code);\n        await dispatch(onRequestMe());\n        dispatch(act.RECEIVE_LOGIN(response));\n        const { userid, username } = response;\n        const keyNeedsReplace = await pki.needStorageKeyReplace(\n          email,\n          username\n        );\n        if (keyNeedsReplace) {\n          pki.replaceStorageKey(keyNeedsReplace, userid);\n        }\n        return;\n      } catch (error) {\n        dispatch(act.RECEIVE_LOGIN(null, error));\n        throw error;\n      }\n    })(dispatch, getState);\n  };\n\n// handleLogout calls the correct logout handler according to the user\n// selected option between a normal logout or a permanent logout.\nexport const handleLogout = (isPermanent, userid) => () =>\n  isPermanent ? handlePermanentLogout(userid) : handleNormalLogout;\n\n// handleNormalLogout handles all the procedure to be done once the user is\n// logged out.\n// It can be called either when the logout request has been successful or\n// when the session has already expired.\nexport const handleNormalLogout = () => {\n  clearStateLocalStorage();\n  clearPollingPointer();\n  clearProposalPaymentPollingPointer();\n};\n\n// handleLocalLogout can be used to clean user session on logout\n// without requesting the API\nexport const handleLocalLogout = () => (dispatch) => {\n  dispatch(act.RECEIVE_LOGOUT());\n  handleNormalLogout();\n};\n\n// handlePermanentLogout handles the logout procedures while deleting all\n// user related information from the browser storage and cache.\nexport const handlePermanentLogout = (userid) =>\n  pki.removeKeys(userid).then(() => {\n    clearStateLocalStorage(userid);\n    clearPollingPointer();\n    clearProposalPaymentPollingPointer();\n  });\n\nexport const onLogout = (isCMS, isPermanent) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const userid = sel.currentUserID(getState());\n    dispatch(act.REQUEST_LOGOUT());\n    return api\n      .logout(csrf)\n      .then((response) =>\n        isCMS\n          ? dispatch(act.RECEIVE_CMS_LOGOUT(response))\n          : dispatch(act.RECEIVE_LOGOUT(response))\n      )\n      .then(() => handleLogout(isPermanent, userid))\n      .catch((error) => {\n        dispatch(act.RECEIVE_LOGOUT(null, error));\n        throw error;\n      });\n  });\n\nexport const onRequireCSRF = () => (dispatch) => {\n  dispatch(act.CSRF_NEEDED(true));\n};\n\nexport const onChangeUsername = (password, newUsername) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_CHANGE_USERNAME());\n    return api\n      .changeUsername(csrf, password, newUsername)\n      .then((response) =>\n        dispatch(\n          act.RECEIVE_CHANGE_USERNAME({ ...response, username: newUsername })\n        )\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_CHANGE_USERNAME(null, error));\n        throw error;\n      });\n  });\n\nexport const onChangePassword = (password, newPassword) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_CHANGE_PASSWORD());\n    return api\n      .changePassword(csrf, password, newPassword)\n      .then((response) => dispatch(act.RECEIVE_CHANGE_PASSWORD(response)))\n      .catch((error) => {\n        dispatch(act.RECEIVE_CHANGE_PASSWORD(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchUserInvoices = () => (dispatch) => {\n  dispatch(act.REQUEST_USER_INVOICES());\n  return api\n    .userInvoices()\n    .then((response) => dispatch(act.RECEIVE_USER_INVOICES(response)))\n    .catch((error) => {\n      dispatch(act.RECEIVE_USER_INVOICES(null, error));\n      throw error;\n    });\n};\n\nexport const onFetchInvoiceComments = (token) => (dispatch) => {\n  dispatch(act.REQUEST_RECORD_COMMENTS());\n  return api\n    .invoiceComments(token)\n    .then((response) => {\n      dispatch(act.RECEIVE_RECORD_COMMENTS({ ...response, token }));\n    })\n    .catch((error) => {\n      dispatch(act.RECEIVE_RECORD_COMMENTS(null, error));\n      throw error;\n    });\n};\n\nexport const onFetchAdminInvoices = (start, end, userid) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_ADMIN_INVOICES());\n    return api\n      .adminInvoices(csrf, start, end, userid)\n      .then((response) => dispatch(act.RECEIVE_ADMIN_INVOICES(response)))\n      .catch((error) => {\n        dispatch(act.RECEIVE_ADMIN_INVOICES(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchUserCodeStats = (userid, start, end) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_CODE_STATS());\n    return api\n      .codeStats(csrf, userid, start, end)\n      .then((response) =>\n        dispatch(\n          act.RECEIVE_CODE_STATS({\n            userid,\n            codestats: response.repostats,\n            start,\n            end\n          })\n        )\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_CODE_STATS(null, error));\n      });\n  });\n\nexport const onFetchAdminInvoicesWithoutState = (start, end, userid) =>\n  withCsrf(async (_, __, csrf) => {\n    const res = await api.adminInvoices(csrf, start, end, userid);\n    return res.invoices;\n  });\n\nexport const onFetchProposalBilling = (token) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_PROPOSAL_BILLING());\n    return api\n      .proposalBilling(csrf, token)\n      .then((response) =>\n        dispatch(act.RECEIVE_PROPOSAL_BILLING({ token, response }))\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_PROPOSAL_BILLING(null, error));\n      });\n  });\n\n// state should be the state of requested proposals\nexport const onFetchProposalsBatchWithoutState = (\n  tokens,\n  state,\n  fetchProposals = true,\n  fetchVoteSummary = true,\n  fetchProposalSummary = true\n) =>\n  withCsrf(async (_, __, csrf) => {\n    const requests = tokens?.map((token) => ({\n      token,\n      filenames: [PROPOSAL_METADATA_FILENAME, VOTE_METADATA_FILENAME]\n    }));\n    const [proposalsRes, voteSummariesRes, proposalSummariesRes] =\n      await Promise.all([\n        fetchProposals &&\n          api.proposalsBatch(csrf, {\n            requests,\n            state,\n            includefiles: true\n          }),\n        fetchVoteSummary && api.proposalsBatchVoteSummary(csrf, tokens),\n        fetchProposalSummary && api.batchProposalSummary(csrf, tokens)\n      ]);\n    const proposals = fetchProposals && proposalsRes && proposalsRes.records;\n    const parsedProposals = proposals && parseReceivedProposalsMap(proposals);\n    const voteSummaries =\n      fetchVoteSummary && voteSummariesRes && voteSummariesRes.summaries;\n    const proposalSummaries =\n      fetchProposalSummary &&\n      proposalSummariesRes &&\n      proposalSummariesRes.summaries;\n    return [parsedProposals, voteSummaries, proposalSummaries];\n  });\n\nexport const onFetchProposalDetailsWithoutState =\n  (token, version) => async () => {\n    const res = await api.proposalDetails({ token, version });\n    return res.record;\n  };\n\n// state should be the state of requested proposals\nexport const onFetchProposalsBatch = ({\n  tokens,\n  fetchVoteSummary = true,\n  fetchProposalSummary = true,\n  userid,\n  fetchCommentCounts = true\n}) =>\n  withCsrf(async (dispatch, _, csrf) => {\n    dispatch(act.REQUEST_PROPOSALS_BATCH(tokens));\n    const requests = tokens?.map((token) => ({\n      token,\n      filenames: [PROPOSAL_METADATA_FILENAME, VOTE_METADATA_FILENAME]\n    }));\n    try {\n      const response = await Promise.all([\n        api.proposalsBatch(csrf, {\n          requests\n        }),\n        fetchVoteSummary && dispatch(onFetchProposalsBatchVoteSummary(tokens)),\n        fetchProposalSummary && dispatch(onFetchBatchProposalSummary(tokens)),\n        fetchCommentCounts && api.commentsCount(tokens)\n      ]);\n      const proposals = response.find((res) => res && res.records).records;\n      const summaries =\n        fetchVoteSummary &&\n        response.find((res) => res && res.summaries).summaries;\n      const proposalSummaries =\n        fetchProposalSummary &&\n        response.find((res) => res && res.proposalSummaries).proposalSummaries;\n      const commentsCount =\n        fetchCommentCounts && response.find((res) => res && res.counts).counts;\n\n      const proposalsWithCommentCounts = Object.keys(proposals).reduce(\n        (acc, curr) => ({\n          ...acc,\n          [curr]: {\n            ...proposals[curr],\n            commentsCount: commentsCount[curr]\n          }\n        }),\n        {}\n      );\n      dispatch(\n        act.RECEIVE_PROPOSALS_BATCH({\n          proposals: proposalsWithCommentCounts,\n          userid\n        })\n      );\n      return [\n        parseRawProposalsBatch(proposalsWithCommentCounts),\n        summaries,\n        proposalSummaries\n      ];\n    } catch (e) {\n      dispatch(act.RECEIVE_PROPOSALS_BATCH(null, e));\n      throw e;\n    }\n  });\n\nexport const onFetchProposalDetails = (token, version) => async (dispatch) => {\n  dispatch(act.REQUEST_PROPOSALS_BATCH(token));\n  try {\n    const response = await Promise.all([\n      api.proposalDetails({ token, version }),\n      api.commentsCount([token])\n    ]);\n    const record = response.find((res) => res && res.record).record;\n    const commentsCount = response.find((res) => res && res.counts).counts;\n    const { linkby } = parseRawProposal(record);\n    if (linkby) {\n      const { submissions } = await api.proposalSubmissions(token);\n      dispatch(\n        act.RECEIVE_PROPOSALS_BATCH({\n          proposals: {\n            [token]: {\n              ...record,\n              linkedfrom: submissions,\n              commentsCount: commentsCount[token]\n            }\n          }\n        })\n      );\n      return {\n        ...record,\n        linkedfrom: submissions,\n        commentsCount: commentsCount[token]\n      };\n    } else {\n      dispatch(\n        act.RECEIVE_PROPOSALS_BATCH({\n          proposals: {\n            [token]: {\n              ...record,\n              commentsCount: commentsCount[token]\n            }\n          }\n        })\n      );\n      return {\n        ...record,\n        commentsCount: commentsCount[token]\n      };\n    }\n  } catch (e) {\n    act.RECEIVE_PROPOSALS_BATCH(null, e);\n    throw e;\n  }\n};\n\nexport const onFetchTokenInventory =\n  (state, status, page = 0, isVoteStatus) =>\n  async (dispatch) => {\n    dispatch(act.REQUEST_TOKEN_INVENTORY());\n    try {\n      return await Promise.all([\n        !isVoteStatus && api.proposalsInventory(state, status, page),\n        isVoteStatus &&\n          state !== PROPOSAL_STATE_UNVETTED &&\n          api.votesInventory(status, page)\n      ]).then(([proposals, votes]) => {\n        const byRecords = !isVoteStatus && {\n          [UNREVIEWED]:\n            (proposals &&\n              proposals.unvetted &&\n              proposals.unvetted.unreviewed) ||\n            [],\n          [CENSORED]: [\n            ...((proposals && proposals.vetted && proposals.vetted.censored) ||\n              []),\n            ...((proposals &&\n              proposals.unvetted &&\n              proposals.unvetted.censored) ||\n              [])\n          ],\n          [ARCHIVED]: [\n            ...((proposals && proposals.vetted && proposals.vetted.archived) ||\n              []),\n            ...((proposals &&\n              proposals.unvetted &&\n              proposals.unvetted.archived) ||\n              [])\n          ]\n        };\n        const byVotes = isVoteStatus && {\n          [AUTHORIZED]:\n            (votes && votes.vetted && votes.vetted.authorized) || [],\n          [UNAUTHORIZED]:\n            (votes && votes.vetted && votes.vetted.unauthorized) || [],\n          [ACTIVE_VOTE]: (votes && votes.vetted && votes.vetted.started) || [],\n          [APPROVED]: (votes && votes.vetted && votes.vetted.approved) || [],\n          [REJECTED]: (votes && votes.vetted && votes.vetted.rejected) || [],\n          [INELIGIBLE]: (votes && votes.vetted && votes.vetted.ineligible) || []\n        };\n        !isVoteStatus && dispatch(act.RECEIVE_RECORDS_INVENTORY(byRecords));\n        isVoteStatus && dispatch(act.RECEIVE_VOTES_INVENTORY(byVotes));\n\n        return { records: byRecords, votes: byVotes };\n      });\n    } catch (error) {\n      dispatch(act.RECEIVE_VOTES_INVENTORY(null, error));\n      throw error;\n    }\n  };\n\nexport const onFetchInvoice =\n  (token, version = null) =>\n  (dispatch) => {\n    dispatch(act.REQUEST_INVOICE(token));\n    return api\n      .invoice(token, version)\n      .then((response) => {\n        response && response.invoice && Object.keys(response.invoice).length > 0\n          ? dispatch(act.RECEIVE_INVOICE(response))\n          : dispatch(\n              act.RECEIVE_INVOICE(\n                null,\n                new Error(\"The requested invoice does not exist.\")\n              )\n            );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_INVOICE(null, error));\n        throw error;\n      });\n  };\n\nexport const onFetchUser = (userId) => (dispatch, getState) => {\n  dispatch(act.REQUEST_USER(userId));\n  const regexp =\n    /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n  const valid = regexp.test(userId);\n  if (!valid) {\n    const error = new Error(\"This is not a valid user ID.\");\n    dispatch(act.RECEIVE_USER(null, error));\n    throw error;\n  }\n  const isCMS = sel.isCMS(getState());\n  return api\n    .user(userId)\n    .then((response) =>\n      dispatch(\n        act.RECEIVE_USER({\n          user: {\n            ...response.user,\n            userid: userId,\n            isCMS // used to identify whether user details request is for cms or pi\n          }\n        })\n      )\n    )\n    .catch((error) => {\n      dispatch(act.RECEIVE_USER(null, error));\n      throw error;\n    });\n};\n\nexport const onFetchProposalComments = (token) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_RECORD_COMMENTS(token));\n    return api\n      .proposalComments(csrf, token)\n      .then((response) =>\n        dispatch(act.RECEIVE_RECORD_COMMENTS({ ...response, token }))\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_RECORD_COMMENTS(null, error));\n      });\n  });\n\nexport const onFetchLikedComments = (token, userid) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_LIKED_COMMENTS(token));\n    return api\n      .likedComments(csrf, token, userid)\n      .then((response) =>\n        dispatch(act.RECEIVE_LIKED_COMMENTS({ ...response, token }))\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_LIKED_COMMENTS(null, error));\n      });\n  });\n\nexport const onEditUser = (preferences) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_EDIT_USER(preferences));\n    return api\n      .editUser(csrf, preferences)\n      .then((response) => {\n        dispatch(act.RECEIVE_EDIT_USER({ ...response, preferences }));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_EDIT_USER(null, error));\n      });\n  });\n\nconst filterFalsy = (obj) =>\n  Object.entries(obj).reduce(\n    (acc, [key, value]) => (value ? ((acc[key] = value), acc) : acc),\n    {}\n  );\n\nexport const onEditCmsUser = (cmsUserInfo) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_EDIT_CMS_USER(cmsUserInfo));\n    return api\n      .editUser(csrf, cmsUserInfo)\n      .then((response) => {\n        dispatch(\n          act.RECEIVE_EDIT_CMS_USER({\n            ...response,\n            ...filterFalsy(cmsUserInfo)\n          })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_EDIT_CMS_USER(null, error));\n      });\n  });\n\nexport const onManageCmsUser = (\n  userID,\n  domain,\n  type,\n  supervisorIDs,\n  proposalsOwned\n) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_MANAGE_CMS_USER());\n    return api\n      .manageCmsUser(csrf, userID, domain, type, supervisorIDs, proposalsOwned)\n      .then((response) =>\n        dispatch(\n          act.RECEIVE_MANAGE_CMS_USER({\n            ...response,\n            userID,\n            domain,\n            type,\n            supervisorIDs,\n            proposalsOwned\n          })\n        )\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_MANAGE_CMS_USER(null, error));\n        throw error;\n      });\n  });\n\nexport const onManageUser = (userId, action, reason) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_MANAGE_USER({ userId, action, reason }));\n    return api\n      .manageUser(csrf, userId, action, reason)\n      .then((response) => {\n        dispatch(act.RECEIVE_MANAGE_USER(response));\n        // Fetches new user information to update cache\n        dispatch(onFetchUser(userId));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_MANAGE_USER(null, error));\n      });\n  });\n\nexport const onSubmitInvoice = (\n  userid,\n  username,\n  month,\n  year,\n  exchangerate,\n  name,\n  location,\n  contact,\n  rate,\n  address,\n  lineItems,\n  files\n) =>\n  withCsrf((dispatch, getState, csrf) => {\n    dispatch(\n      act.REQUEST_NEW_INVOICE({\n        month,\n        year,\n        exchangerate,\n        name,\n        location,\n        contact,\n        rate,\n        address,\n        lineItems,\n        files\n      })\n    );\n    return Promise.resolve(\n      api.makeInvoice(\n        month,\n        year,\n        exchangerate,\n        name,\n        location,\n        contact,\n        rate,\n        address,\n        lineItems,\n        files\n      )\n    )\n      .then((invoice) => api.signRegister(userid, invoice))\n      .then((invoice) => api.newInvoice(csrf, invoice))\n      .then((invoice) => {\n        const policy = sel.policy(getState());\n        dispatch(\n          act.RECEIVE_NEW_INVOICE({\n            ...invoice,\n            numcomments: 0,\n            userid,\n            username\n          })\n        );\n        resetNewInvoiceData(policy);\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_NEW_INVOICE(null, error));\n        resetNewProposalData();\n        throw error;\n      });\n  });\n\nexport const onSubmitProposal = (\n  userid,\n  username,\n  name,\n  amount,\n  startDate,\n  endDate,\n  domain,\n  description,\n  rfpDeadline,\n  type,\n  rfpLink,\n  files\n) =>\n  withCsrf((dispatch, _, csrf) => {\n    amount = Number(amount);\n    dispatch(\n      act.REQUEST_NEW_PROPOSAL({\n        name,\n        description,\n        rfpDeadline,\n        type,\n        rfpLink,\n        files,\n        amount,\n        startDate,\n        endDate,\n        domain\n      })\n    );\n    return Promise.resolve(\n      api.makeProposal({\n        name,\n        amount,\n        startdate: startDate,\n        enddate: endDate,\n        domain,\n        markdown: description,\n        linkby: rfpDeadline,\n        linkto: rfpLink,\n        attachments: files\n      })\n    )\n      .then((proposal) => api.signRegister(userid, proposal))\n      .then((proposal) => api.newProposal(csrf, proposal))\n      .then(({ record }) => {\n        dispatch(\n          act.RECEIVE_NEW_PROPOSAL({\n            ...record,\n            comments: 0,\n            userid,\n            username,\n            name,\n            description,\n            type,\n            amount,\n            startDate,\n            endDate,\n            domain\n          })\n        );\n        resetNewProposalData();\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_NEW_PROPOSAL(null, error));\n        resetNewProposalData();\n        throw error;\n      });\n  });\n\nexport const onSubmitEditedProposal = (\n  userid,\n  name,\n  amount, // Amount in USD.\n  startDate,\n  endDate,\n  domain,\n  description,\n  rfpDeadline,\n  type,\n  rfpLink,\n  files,\n  token\n) =>\n  withCsrf((dispatch, _, csrf) => {\n    amount = Math.round(Number(amount) * 100); // Backend expects value in cents\n    dispatch(\n      act.REQUEST_EDIT_PROPOSAL({\n        name,\n        amount,\n        startDate,\n        endDate,\n        domain,\n        description,\n        files,\n        rfpDeadline,\n        rfpLink,\n        type\n      })\n    );\n    return Promise.resolve(\n      api.makeProposal({\n        name,\n        amount,\n        startdate: startDate,\n        enddate: endDate,\n        domain,\n        markdown: description,\n        linkby: rfpDeadline,\n        linkto: rfpLink,\n        attachments: files\n      })\n    )\n      .then((proposal) => api.signRegister(userid, proposal))\n      .then((proposal) => api.editProposal(csrf, { ...proposal, token }))\n      .then(({ record }) => {\n        dispatch(act.RECEIVE_EDIT_PROPOSAL({ proposal: record }));\n        resetNewProposalData();\n        return record?.censorshiprecord?.token;\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_EDIT_PROPOSAL(null, error));\n        resetNewProposalData();\n        throw error;\n      });\n  });\n\nexport const onSubmitEditedInvoice = (\n  userid,\n  username,\n  month,\n  year,\n  exchangerate,\n  name,\n  location,\n  contact,\n  rate,\n  address,\n  lineItems,\n  files,\n  token\n) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const policy = sel.policy(getState());\n    dispatch(\n      act.REQUEST_EDIT_INVOICE({\n        month,\n        year,\n        exchangerate,\n        name,\n        location,\n        contact,\n        rate,\n        address,\n        lineItems,\n        files\n      })\n    );\n    return Promise.resolve(\n      api.makeInvoice(\n        month,\n        year,\n        exchangerate,\n        name,\n        location,\n        contact,\n        rate,\n        address,\n        lineItems,\n        files\n      )\n    )\n      .then((invoice) => api.signRegister(userid, invoice))\n      .then((invoice) => api.editInvoice(csrf, { ...invoice, token }))\n      .then((invoice) => {\n        dispatch(\n          act.RECEIVE_EDIT_INVOICE({\n            ...invoice,\n            numcomments: 0,\n            userid,\n            username\n          })\n        );\n        resetNewInvoiceData(policy);\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_EDIT_INVOICE(null, error));\n        resetNewInvoiceData(policy);\n        throw error;\n      });\n  });\n\nexport const onCommentVote = (\n  currentUserID,\n  token,\n  commentid,\n  vote,\n  state,\n  sectionId\n) =>\n  withCsrf((dispatch, _, csrf) => {\n    if (!currentUserID) {\n      return;\n    }\n    dispatch(act.REQUEST_LIKE_COMMENT({ commentid, token, vote, sectionId }));\n    return Promise.resolve(api.makeCommentVote(state, token, vote, commentid))\n      .then((comment) => api.signCommentVote(currentUserID, comment))\n      .then((comment) => api.commentVote(csrf, comment))\n      .then(() => {\n        dispatch(\n          act.RECEIVE_LIKE_COMMENT_SUCCESS({\n            token,\n            commentid,\n            vote,\n            sectionId\n          })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_LIKE_COMMENT(null, error));\n        throw error;\n      });\n  });\n\nexport const onCensorComment = (\n  userid,\n  token,\n  commentid,\n  state,\n  sectionId,\n  reason\n) =>\n  withCsrf((dispatch, _, csrf) => {\n    let publickey;\n    dispatch(\n      act.REQUEST_CENSOR_COMMENT({ commentid, token, state, sectionId })\n    );\n    return Promise.resolve(\n      api.makeCensoredComment(state, token, reason, commentid)\n    )\n      .then((comment) => api.signCensorComment(userid, comment))\n      .then((comment) => {\n        publickey = comment.publickey;\n        return api.censorComment(csrf, comment);\n      })\n      .then(({ comment: { receipt, commentid, token } }) => {\n        if (receipt) {\n          dispatch(\n            act.RECEIVE_CENSOR_COMMENT({\n              commentid,\n              token,\n              sectionId,\n              reason,\n              publickey\n            })\n          );\n        }\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_CENSOR_COMMENT(null, error));\n        throw error;\n      });\n  });\n\nexport const onSubmitComment = (\n  currentUserID,\n  token,\n  commentText,\n  parentid,\n  state,\n  extraData,\n  extraDataHint,\n  sectionId\n) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const comment = api.makeComment(\n      token,\n      commentText,\n      parentid,\n      state,\n      extraData,\n      extraDataHint\n    );\n    dispatch(act.REQUEST_NEW_COMMENT(comment));\n    return Promise.resolve(api.signComment(currentUserID, comment))\n      .then((comment) => {\n        // make sure this is not a duplicate comment by comparing to the\n        // existent comments signatures.\n        const shortToken = shortRecordToken(token);\n        const { comments: commentsMap } =\n          sel.commentsInfoByToken(getState())[shortToken] || {};\n        // Flatten all comments in one array.\n        const comments = commentsMap && Object.values(commentsMap).flat();\n        const signatureFound =\n          comments && comments.find((cm) => cm.signature === comment.signature);\n        if (signatureFound) {\n          throw new Error(\"That is a duplicate comment.\");\n        }\n        return comment;\n      })\n      .then((comment) => api.newComment(csrf, comment))\n      .then((response) => {\n        const responsecomment = response.comment || {};\n        const { commentid } = responsecomment;\n        const isAuthorUpdate = extraDataHint === PROPOSAL_UPDATE_HINT;\n        return dispatch(\n          act.RECEIVE_NEW_COMMENT({\n            ...responsecomment,\n            sectionId: sectionId\n              ? sectionId\n              : isAuthorUpdate\n              ? commentid\n              : PROPOSAL_MAIN_THREAD_KEY\n          })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_NEW_COMMENT(null, error));\n        throw error;\n      });\n  });\n\nexport const onEditComment = ({\n  userid,\n  token,\n  commentID,\n  comment,\n  parentID,\n  state,\n  extraData,\n  extraDataHint,\n  sectionId\n}) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const commentEdit = api.makeCommentEdit({\n      userid,\n      token,\n      comment,\n      parentid: parentID || 0,\n      state,\n      commentid: commentID,\n      extradata: extraData,\n      extradatahint: extraDataHint || \"\"\n    });\n    dispatch(act.REQUEST_EDIT_COMMENT(commentEdit));\n    return Promise.resolve(api.signCommentEdit(commentEdit))\n      .then((commentEdit) => api.editComment(csrf, commentEdit))\n      .then((response) => {\n        const responsecomment = response.comment || {};\n        return dispatch(\n          act.RECEIVE_EDIT_COMMENT({\n            ...responsecomment,\n            sectionId\n          })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_EDIT_COMMENT(null, error));\n        throw error;\n      });\n  });\n\nexport const onUpdateUserKey = (currentUserID) =>\n  withCsrf((dispatch, getState, csrf) => {\n    dispatch(act.REQUEST_UPDATED_KEY());\n    return pki\n      .generateKeys()\n      .then((keys) =>\n        api\n          .updateKeyRequest(csrf, pki.toHex(keys.publicKey))\n          .then((response) => {\n            const { verificationtoken } = response;\n            if (verificationtoken) {\n              const isTestnet = sel.isTestNet(getState());\n              if (isTestnet) {\n                dispatch(act.SHOULD_AUTO_VERIFY_KEY(true));\n              }\n            }\n            return dispatch(\n              act.RECEIVE_UPDATED_KEY({ ...response, success: true })\n            );\n          })\n          .then(() => pki.loadKeys(currentUserID, keys))\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_UPDATED_KEY(null, error));\n        throw error;\n      });\n  });\n\nexport const onVerifyUserKey = (currentUserID, verificationtoken) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_VERIFIED_KEY({ verificationtoken }));\n    return api\n      .verifyKeyRequest(csrf, currentUserID, verificationtoken)\n      .then((response) =>\n        pki.myPubKeyHex(currentUserID).then((pubkey) => {\n          dispatch(\n            act.RECEIVE_VERIFIED_KEY({\n              ...response,\n              success: true,\n              publickey: pubkey\n            })\n          );\n          dispatch(act.SHOULD_AUTO_VERIFY_KEY(false));\n        })\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_VERIFIED_KEY(null, error));\n      });\n  });\n\nexport const onSetInvoiceStatus = (token, status, version, reason = \"\") =>\n  withCsrf((dispatch, getState, csrf) => {\n    const userid = sel.currentUserID(getState());\n    dispatch(\n      act.REQUEST_SETSTATUS_INVOICE({ status, token, reason, version, userid })\n    );\n    return api\n      .invoiceSetStatus(userid, csrf, token, version, status, reason)\n      .then(({ invoice }) => {\n        dispatch(act.RECEIVE_SETSTATUS_INVOICE(invoice));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_SETSTATUS_INVOICE(null, error));\n        throw error;\n      });\n  });\n\nexport const onSetProposalStatus = ({\n  token,\n  status,\n  linkto,\n  version,\n  reason = \"\",\n  oldStatus\n}) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const userid = sel.currentUserID(getState());\n    dispatch(act.REQUEST_SETSTATUS_PROPOSAL({ status, token }));\n    return api\n      .proposalSetStatus(userid, csrf, token, status, version, reason)\n      .then(({ record: proposal }) => {\n        dispatch(\n          act.RECEIVE_SETSTATUS_PROPOSAL({\n            proposal,\n            oldStatus\n          })\n        );\n        dispatch(onFetchBatchProposalSummary([token]));\n        if (status === PROPOSAL_STATUS_PUBLIC) {\n          dispatch(onFetchProposalsBatchVoteSummary([token]));\n          if (linkto) {\n            dispatch(onFetchProposalsBatch([linkto]));\n          }\n        }\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_SETSTATUS_PROPOSAL(null, error));\n        throw error;\n      });\n  });\n\nexport const onSetBillingStatus = (token, billingStatus, reason) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const userid = sel.currentUserID(getState());\n    dispatch(act.REQUEST_SET_BILLING_STATUS({ token, billingStatus, reason }));\n    return api\n      .proposalSetBillingStatus(userid, csrf, token, billingStatus, reason)\n      .then(({ receipt, timestamp, publickey }) => {\n        dispatch(\n          act.RECEIVE_SET_BILLING_STATUS({\n            receipt,\n            timestamp,\n            token,\n            billingStatus,\n            reason,\n            publickey\n          })\n        );\n      })\n      .catch((error) => {\n        act.RECEIVE_SET_BILLING_STATUS(null, error);\n        throw error;\n      });\n  });\n\nexport const onFetchBillingStatusChanges = (tokens) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_BILLING_STATUS_CHANGES({ tokens }));\n    return api\n      .billingStatusChanges(csrf, tokens)\n      .then(({ billingstatuschanges }) =>\n        dispatch(\n          act.RECEIVE_BILLING_STATUS_CHANGES({\n            billingstatuschanges,\n            success: true\n          })\n        )\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_BILLING_STATUS_CHANGES(null, error));\n        throw error;\n      });\n  });\n\nexport const onResetPassword = ({ username, email }) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_RESET_PASSWORD({ username, email }));\n    return api\n      .resetPassword(csrf, username, email)\n      .then((response) => {\n        dispatch(act.RECEIVE_RESET_PASSWORD(response));\n        return response;\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_RESET_PASSWORD(null, error));\n        throw error;\n      });\n  });\n\nexport const onVerifyResetPassword = ({\n  username,\n  verificationtoken,\n  newpassword\n}) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_RESET_PASSWORD({ username }));\n    return api\n      .verifyResetPassword(csrf, username, verificationtoken, newpassword)\n      .then((response) => dispatch(act.RECEIVE_VERIFY_RESET_PASSWORD(response)))\n      .catch((error) => {\n        dispatch(act.RECEIVE_VERIFY_RESET_PASSWORD(null, error));\n        throw error;\n      });\n  });\n\nexport const onResendVerificationEmailConfirm = ({ username, email }) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_RESEND_VERIFICATION_EMAIL({ email }));\n    return api\n      .resendVerificationEmailRequest(csrf, email, username)\n      .then((response) => {\n        dispatch(act.RECEIVE_RESEND_VERIFICATION_EMAIL(response));\n        return response;\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_RESEND_VERIFICATION_EMAIL(null, error));\n        throw error;\n      });\n  });\n\nexport const resetResendVerificationEmail = () => (dispatch) =>\n  dispatch(act.RESET_RESEND_VERIFICATION_EMAIL());\n\nexport const onStartVote = (userid, voteParams) =>\n  withCsrf((dispatch, _, csrf) => {\n    if (!voteParams || voteParams.length < 1) {\n      throw Error(\"Invalid vote params\");\n    }\n    const tokens = voteParams.map(({ token }) => token);\n    const type = voteParams[0].type;\n    dispatch(act.REQUEST_START_VOTE({ tokens, type }));\n    return api\n      .startVote(csrf, userid, voteParams)\n      .then((response) => {\n        dispatch(onFetchProposalsBatchVoteSummary(tokens));\n        dispatch(\n          act.RECEIVE_START_VOTE({ ...response, type, tokens, success: true })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_START_VOTE(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchProposalPaywallDetails = () => (dispatch, getState) => {\n  dispatch(act.REQUEST_PROPOSAL_PAYWALL_DETAILS());\n  const userid = sel.currentUserID(getState());\n  return api\n    .proposalPaywallDetails()\n    .then((response) =>\n      dispatch(act.RECEIVE_PROPOSAL_PAYWALL_DETAILS({ ...response, userid }))\n    )\n    .catch((error) => {\n      dispatch(act.RECEIVE_PROPOSAL_PAYWALL_DETAILS(null, error));\n    });\n};\n\nexport const onUserProposalCredits = () => (dispatch, getState) => {\n  dispatch(act.REQUEST_USER_PROPOSAL_CREDITS());\n  const userid = sel.currentUserID(getState());\n  return api\n    .userProposalCredits()\n    .then((response) =>\n      dispatch(act.RECEIVE_USER_PROPOSAL_CREDITS({ ...response, userid }))\n    )\n    .catch((error) => {\n      dispatch(act.RECEIVE_USER_PROPOSAL_CREDITS(null, error));\n    });\n};\n\nexport const onFetchUserProposals = (userid) =>\n  withCsrf(async (dispatch, _, csrf) => {\n    dispatch(act.REQUEST_USER_INVENTORY({ userid }));\n    try {\n      const response = await api.userProposals(csrf, userid);\n      const tokensLength = response.vetted.length + response.unvetted.length;\n      dispatch(\n        act.RECEIVE_USER_INVENTORY({\n          proposals: { ...response },\n          userid,\n          numofproposals: tokensLength\n        })\n      );\n      return response;\n    } catch (e) {\n      dispatch(act.RECEIVE_USER_INVENTORY(null, e));\n      throw e;\n    }\n  });\n\nexport const onFetchProposalsBatchVoteSummary = (tokens) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_PROPOSALS_VOTE_SUMMARY({ tokens }));\n    return api\n      .proposalsBatchVoteSummary(csrf, tokens)\n      .then((response) => {\n        dispatch(\n          act.RECEIVE_PROPOSALS_VOTE_SUMMARY({ ...response, success: true })\n        );\n        return response;\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_PROPOSALS_VOTE_SUMMARY(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchBatchProposalSummary = (tokens) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_BATCH_PROPOSAL_SUMMARY({ tokens }));\n    return api\n      .batchProposalSummary(csrf, tokens)\n      .then(({ summaries }) => {\n        dispatch(\n          act.RECEIVE_BATCH_PROPOSAL_SUMMARY({ summaries, success: true })\n        );\n        return { proposalSummaries: summaries };\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_BATCH_PROPOSAL_SUMMARY(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchProposalVoteResults = (token) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_PROPOSAL_VOTE_RESULTS({ token }));\n    return api\n      .proposalVoteResults(csrf, token)\n      .then((response) =>\n        dispatch(\n          act.RECEIVE_PROPOSAL_VOTE_RESULTS({\n            ...response,\n            token,\n            success: true\n          })\n        )\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_PROPOSAL_VOTE_RESULTS(null, error));\n        throw error;\n      });\n  });\n\nexport const onAuthorizeVote = (userid, token, version) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_AUTHORIZE_VOTE({ token }));\n    return api\n      .proposalAuthorizeOrRevokeVote(csrf, \"authorize\", token, userid, version)\n      .then((response) => {\n        dispatch(\n          act.RECEIVE_AUTHORIZE_VOTE({ ...response, token, success: true })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_AUTHORIZE_VOTE(null, error));\n        throw error;\n      });\n  });\n\nexport const onRevokeVote = (userid, token, version) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_REVOKE_AUTH_VOTE({ token }));\n    return api\n      .proposalAuthorizeOrRevokeVote(csrf, \"revoke\", token, userid, version)\n      .then((response) =>\n        dispatch(\n          act.RECEIVE_REVOKE_AUTH_VOTE({ ...response, token, success: true })\n        )\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_REVOKE_AUTH_VOTE(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchProposalPaywallPayment = () => (dispatch, getState) => {\n  const userid = sel.currentUserID(getState());\n  dispatch(act.REQUEST_PROPOSAL_PAYWALL_PAYMENT());\n  return api\n    .proposalPaywallPayment()\n    .then((response) =>\n      dispatch(act.RECEIVE_PROPOSAL_PAYWALL_PAYMENT({ ...response, userid }))\n    )\n    .catch((error) => {\n      dispatch(act.RECEIVE_PROPOSAL_PAYWALL_PAYMENT(null, error));\n      throw error;\n    });\n};\n\nconst maxRequestLimit = 6;\nlet numOfRequests = 0;\n\nlet globalProposalPaymentPollingPointer = null;\n\nexport const clearProposalPaymentPollingPointer = () => {\n  if (globalProposalPaymentPollingPointer) {\n    clearTimeout(globalProposalPaymentPollingPointer);\n  }\n};\n\nexport const setProposalPaymentPollingPointer = (proposalPaymentPolling) =>\n  (globalProposalPaymentPollingPointer = proposalPaymentPolling);\n\nexport const onPollProposalPaywallPayment =\n  (isLimited) => (dispatch, getState) => {\n    const userid = sel.currentUserID(getState());\n    const proposalPaymentReceived = sel.proposalPaymentReceived(getState());\n    if (proposalPaymentReceived) {\n      clearProposalPaymentPollingPointer();\n      dispatch(act.TOGGLE_CREDITS_PAYMENT_POLLING(false));\n      return;\n    }\n    dispatch(act.REQUEST_PROPOSAL_PAYWALL_PAYMENT());\n    return api\n      .proposalPaywallPayment()\n      .then((response) => {\n        if (isLimited && !response.txid) {\n          numOfRequests++;\n        }\n        if (!isLimited || numOfRequests < maxRequestLimit) {\n          const paymentpolling = setTimeout(\n            () => dispatch(onPollProposalPaywallPayment(isLimited)),\n            POLL_INTERVAL\n          );\n          setProposalPaymentPollingPointer(paymentpolling);\n        } else if (isLimited && numOfRequests === maxRequestLimit) {\n          dispatch(act.TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT(true));\n          dispatch(act.TOGGLE_CREDITS_PAYMENT_POLLING(false));\n        }\n        return response;\n      })\n      .then((response) =>\n        dispatch(act.RECEIVE_PROPOSAL_PAYWALL_PAYMENT({ ...response, userid }))\n      )\n      .catch((error) => {\n        dispatch(act.RECEIVE_PROPOSAL_PAYWALL_PAYMENT(null, error));\n        throw error;\n      });\n  };\n\nexport const onRescanUserPayments = (userid) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_RESCAN_USER_PAYMENTS(userid));\n    return api\n      .rescanUserPayments(csrf, userid)\n      .then((response) => {\n        dispatch(act.RECEIVE_RESCAN_USER_PAYMENTS({ ...response, userid }));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_RESCAN_USER_PAYMENTS(null, error));\n        throw error;\n      });\n  });\n\nexport const onGeneratePayouts = () =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_GENERATE_PAYOUTS({}));\n    return api\n      .generatePayouts(csrf)\n      .then((response) => {\n        dispatch(act.RECEIVE_GENERATE_PAYOUTS(response));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_GENERATE_PAYOUTS(null, error));\n        throw error;\n      });\n  });\n\nexport const onInvoicePayouts = (start, end) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_INVOICE_PAYOUTS({}));\n    return api\n      .invoicePayouts(csrf, start, end)\n      .then((response) => {\n        dispatch(act.RECEIVE_INVOICE_PAYOUTS(response));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_INVOICE_PAYOUTS(null, error));\n        throw error;\n      });\n  });\n\nexport const onPayApprovedInvoices = () => (dispatch) => {\n  dispatch(act.REQUEST_PAY_APPROVED({}));\n  return api\n    .payApprovedInvoices()\n    .then((response) => {\n      dispatch(act.RECEIVE_PAY_APPROVED(response));\n    })\n    .catch((error) => {\n      dispatch(act.RECEIVE_PAY_APPROVED(null, error));\n      throw error;\n    });\n};\n\nexport const onGetSpendingSummary = () => (dispatch) => {\n  dispatch(act.REQUEST_SPENDING_SUMMARY({}));\n  return api\n    .getSpendingSummary()\n    .then((response) => {\n      dispatch(act.RECEIVE_SPENDING_SUMMARY(response));\n    })\n    .catch((error) => {\n      dispatch(act.RECEIVE_SPENDING_SUMMARY(null, error));\n      throw error;\n    });\n};\n\nexport const onFetchSpendingDetails = (token) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_SPENDING_DETAILS({ token }));\n    return api\n      .getSpendingDetails(csrf, token)\n      .then((response) => {\n        dispatch(act.RECEIVE_SPENDING_DETAILS({ ...response }));\n        return response;\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_SPENDING_DETAILS(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchExchangeRate = (month, year) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_EXCHANGE_RATE({ month, year }));\n    return api\n      .exchangeRate(csrf, +month, +year)\n      .then((response) => {\n        dispatch(act.RECEIVE_EXCHANGE_RATE({ ...response, month, year }));\n        return response;\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_EXCHANGE_RATE(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchUserSubcontractors = () =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_USER_SUBCONTRACTORS({}));\n    return api\n      .userSubcontractors(csrf)\n      .then((response) => {\n        dispatch(act.RECEIVE_USER_SUBCONTRACTORS(response));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_USER_SUBCONTRACTORS(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchCmsUsers = () =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_CMS_USERS({}));\n    return api\n      .cmsUsers(csrf)\n      .then((response) => {\n        dispatch(act.RECEIVE_CMS_USERS(response));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_CMS_USERS(null, error));\n        throw error;\n      });\n  });\n\n// DCC actions\n\nexport const onSubmitNewDcc = (\n  currentUserID,\n  username,\n  type,\n  nomineeuserid,\n  statement,\n  domain,\n  contractortype\n) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_NEW_DCC({}));\n    return Promise.resolve(\n      api.makeDCC(type, nomineeuserid, statement, domain, contractortype)\n    )\n      .then((dcc) => api.signDcc(currentUserID, dcc))\n      .then((dcc) => api.newDcc(csrf, dcc))\n      .then((dcc) => {\n        dispatch(\n          act.RECEIVE_NEW_DCC({\n            ...dcc,\n            numcomments: 0,\n            currentUserID,\n            username\n          })\n        );\n        resetNewDccData();\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_NEW_DCC(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchDccsByStatus = (status) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_DCCS({}));\n    return api\n      .dccsByStatus(csrf, { status })\n      .then((response) => {\n        dispatch(act.RECEIVE_DCCS({ ...response, status }));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_DCCS(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchDcc = (token) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_DCC({}));\n    return api\n      .dccDetails(csrf, token)\n      .then((response) => {\n        dispatch(act.RECEIVE_DCC(response));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_DCC(null, error));\n        throw error;\n      });\n  });\n\nexport const onFetchDccComments = (token) => (dispatch) => {\n  dispatch(act.REQUEST_RECORD_COMMENTS());\n  return api\n    .dccComments(token)\n    .then((response) => {\n      dispatch(act.RECEIVE_RECORD_COMMENTS({ ...response, token }));\n    })\n    .catch((error) => {\n      dispatch(act.RECEIVE_RECORD_COMMENTS(null, error));\n    });\n};\n\nexport const onSupportOpposeDcc = (token, vote) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const { username, userid } = sel.currentUser(getState());\n    dispatch(act.REQUEST_SUPPORT_OPPOSE_DCC({}));\n    return Promise.resolve(api.makeDCCVote(token, vote))\n      .then((dccvote) => api.signDccVote(userid, dccvote))\n      .then((dccvote) => api.supportOpposeDCC(csrf, dccvote))\n      .then((response) => {\n        dispatch(\n          act.RECEIVE_SUPPORT_OPPOSE_DCC({\n            ...response,\n            token,\n            username,\n            userid,\n            isSupport: vote === DCC_SUPPORT_VOTE\n          })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_SUPPORT_OPPOSE_DCC(null, error));\n        throw error;\n      });\n  });\n\nexport const onSetDccStatus = (token, status, reason) =>\n  withCsrf((dispatch, getState, csrf) => {\n    const userid = sel.currentUserID(getState());\n    if (!userid) {\n      return;\n    }\n    dispatch(act.REQUEST_SET_DCC_STATUS({}));\n    return api\n      .setDCCStatus(csrf, userid, token, status, reason)\n      .then((response) => {\n        dispatch(\n          act.RECEIVE_SET_DCC_STATUS({ ...response, status, reason, token })\n        );\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_SET_DCC_STATUS(null, error));\n        throw error;\n      });\n  });\n\nexport const onSubmitDccComment = (currentUserID, token, comment, parentid) =>\n  withCsrf((dispatch, getState, csrf) => {\n    dispatch(act.REQUEST_NEW_COMMENT({ token, comment, parentid }));\n    return Promise.resolve(api.makeDccComment(token, comment, parentid))\n      .then((comment) => api.signDccComment(currentUserID, comment))\n      .then((comment) => {\n        // make sure this is not a duplicate comment by comparing to the\n        // existent comments signatures.\n        const comments = sel.commentsInfoByToken(getState())[token].comments;\n        const signatureFound =\n          comments && comments.find((cm) => cm.signature === comment.signature);\n        if (signatureFound) {\n          throw new Error(\"That is a duplicate comment.\");\n        }\n        return comment;\n      })\n      .then((comment) => api.newDccComment(csrf, comment))\n      .then((response) => {\n        const responsecomment = response.comment;\n        dispatch(act.RECEIVE_NEW_COMMENT(responsecomment));\n      })\n      .catch((error) => {\n        dispatch(act.RECEIVE_NEW_COMMENT(null, error));\n        throw error;\n      });\n  });\n\nexport const onSetTotp = (code = \"\", type = TOTP_DEFAULT_TYPE) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_SET_TOTP({}));\n    return api\n      .setTotp(csrf, type, code)\n      .then((response) => {\n        dispatch(act.RECEIVE_SET_TOTP(response));\n      })\n      .catch((e) => {\n        dispatch(act.RECEIVE_SET_TOTP(null, e));\n        throw e;\n      });\n  });\n\nexport const onVerifyTotp = (code) =>\n  withCsrf((dispatch, _, csrf) => {\n    dispatch(act.REQUEST_VERIFY_TOTP({}));\n    return api\n      .verifyTotp(csrf, code)\n      .then((response) => {\n        dispatch(act.RECEIVE_VERIFY_TOTP(response));\n      })\n      .catch((e) => {\n        dispatch(act.RECEIVE_VERIFY_TOTP(null, e));\n        throw e;\n      });\n  });\n// Records Actions\nexport const onFetchRecordTimestamps = (token, version) =>\n  withCsrf((__, _, csrf) => api.recordsTimestamp(csrf, token, version));\n\n// Comments Actions\nexport const onFetchCommentsTimestamps = (token, commentsids) =>\n  withCsrf((__, _, csrf) => api.commentsTimestamps(csrf, token, commentsids));\n\n// Ticket Vote actions\nexport const onFetchTicketVoteTimestamps = (token, votespage) =>\n  withCsrf((__, _, csrf) => api.ticketVoteTimestamps(csrf, token, votespage));\n\n// Votes Bundle\nexport const onFetchVotesBundle = (token, serverpublickey) =>\n  withCsrf(async (dispatch, _, csrf) => {\n    dispatch(act.REQUEST_VOTES_BUNDLE());\n    try {\n      return await Promise.all([\n        api.proposalVoteDetails(csrf, token),\n        api.proposalVoteResults(csrf, token)\n      ]).then(([{ auths, vote }, { votes }]) => {\n        const response = { auths, details: vote, votes, serverpublickey };\n        dispatch(act.RECEIVE_VOTES_BUNDLE(response));\n        return response;\n      });\n    } catch (error) {\n      dispatch(act.RECEIVE_VOTES_BUNDLE(null, error));\n      throw error;\n    }\n  });\n","import {\n  onSubmitProposal,\n  onChangeUsername,\n  onChangePassword,\n  onSubmitEditedProposal,\n  onSubmitInvoice,\n  onSubmitEditedInvoice,\n  onUserProposalCredits,\n  onSubmitNewDcc\n} from \"./api\";\nimport {\n  onEditComment as onEditCommentApi,\n  onSubmitComment as onSubmitCommentApi,\n  onSubmitDccComment as onSubmitDccCommentApi\n} from \"./api\";\nimport {\n  resetNewProposalData,\n  resetNewInvoiceData,\n  resetNewDccData\n} from \"../lib/editors_content_backup\";\nimport * as sel from \"../selectors\";\nimport act from \"./methods\";\nimport { onEditUser } from \"./api\";\nimport { loadStateLocalStorage } from \"../lib/local_storage\";\nimport { fromUSDUnitsToUSDCents, uniqueID } from \"../helpers\";\n\nexport const onSaveNewInvoice =\n  ({\n    month,\n    year,\n    name,\n    location,\n    contact,\n    rate,\n    address,\n    lineitems,\n    exchangerate,\n    files\n  }) =>\n  (dispatch, getState) => {\n    const { userid: id, username } = sel.currentUser(getState());\n    return dispatch(\n      onSubmitInvoice(\n        id,\n        username,\n        +month,\n        +year,\n        exchangerate,\n        name,\n        location,\n        contact,\n        fromUSDUnitsToUSDCents(+rate),\n        address,\n        lineitems,\n        files\n      )\n    ).then(() => sel.newInvoiceToken(getState()));\n  };\n\nexport const onSaveNewProposal =\n  ({\n    name,\n    amount,\n    startDate,\n    endDate,\n    domain,\n    description,\n    files,\n    rfpDeadline,\n    rfpLink,\n    type\n  }) =>\n  (dispatch, getState) => {\n    const { userid, username } = sel.currentUser(getState());\n    return dispatch(\n      onSubmitProposal(\n        userid,\n        username,\n        name.trim(),\n        amount * 100, // Backend expects value in cents\n        startDate,\n        endDate,\n        domain,\n        description,\n        rfpDeadline,\n        type,\n        rfpLink,\n        files\n      )\n    )\n      .then(() => dispatch(onUserProposalCredits()))\n      .then(() => sel.newProposalToken(getState()));\n  };\n\nexport const onSaveNewDcc =\n  ({ type, nomineeid, statement, domain, contractortype }) =>\n  (dispatch, getState) => {\n    const { userid, username } = sel.currentUser(getState());\n    return dispatch(\n      onSubmitNewDcc(\n        userid,\n        username,\n        type,\n        nomineeid,\n        statement,\n        domain,\n        contractortype\n      )\n    ).then(() => sel.newDccToken(getState()));\n  };\n\nexport const onEditProposal =\n  ({\n    token,\n    name,\n    amount,\n    startDate,\n    endDate,\n    domain,\n    description,\n    files,\n    rfpDeadline,\n    type,\n    rfpLink\n  }) =>\n  (dispatch, getState) => {\n    const userid = sel.currentUserID(getState());\n    return dispatch(\n      onSubmitEditedProposal(\n        userid,\n        name,\n        amount,\n        startDate,\n        endDate,\n        domain,\n        description,\n        rfpDeadline,\n        type,\n        rfpLink,\n        files,\n        token\n      )\n    );\n  };\n\nexport const onEditComment =\n  ({\n    commentID,\n    comment,\n    token,\n    parentID,\n    state,\n    extraData,\n    extraDataHint,\n    sectionId\n  }) =>\n  (dispatch, getState) => {\n    const userid = sel.currentUserID(getState());\n    return dispatch(\n      onEditCommentApi({\n        userid,\n        token,\n        commentID,\n        comment,\n        parentID,\n        state,\n        extraData,\n        extraDataHint,\n        sectionId\n      })\n    );\n  };\n\nexport const onSaveNewComment =\n  ({ comment, token, parentID, state, extraData, extraDataHint, sectionId }) =>\n  (dispatch, getState) => {\n    const userid = sel.currentUserID(getState());\n    return dispatch(\n      onSubmitCommentApi(\n        userid,\n        token,\n        comment,\n        parentID,\n        state,\n        extraData,\n        extraDataHint,\n        sectionId\n      )\n    );\n  };\n\nexport const onEditInvoice =\n  ({\n    token,\n    month,\n    year,\n    name,\n    location,\n    contact,\n    rate,\n    address,\n    lineitems,\n    exchangerate,\n    files\n  }) =>\n  (dispatch, getState) => {\n    const { userid, username } = sel.currentUser(getState());\n    return dispatch(\n      onSubmitEditedInvoice(\n        userid,\n        username,\n        +month,\n        +year,\n        exchangerate,\n        name,\n        location,\n        contact,\n        fromUSDUnitsToUSDCents(+rate),\n        address,\n        lineitems,\n        files,\n        token\n      )\n    );\n  };\n\nexport const onSaveDraftProposal =\n  ({\n    name,\n    description,\n    rfpDeadline,\n    type,\n    rfpLink,\n    files,\n    draftId,\n    startDate,\n    endDate,\n    amount,\n    domain\n  }) =>\n  (dispatch) => {\n    resetNewProposalData();\n    const id = draftId || uniqueID(\"draft\");\n    dispatch(\n      act.SAVE_DRAFT_PROPOSAL({\n        name: name ? name.trim() : \"\",\n        description,\n        files,\n        rfpDeadline,\n        type,\n        rfpLink,\n        timestamp: Math.floor(Date.now() / 1000),\n        id,\n        startDate,\n        endDate,\n        amount,\n        domain\n      })\n    );\n    return id;\n  };\n\nexport const onLoadDraftProposals = (uuid) => (dispatch, getState) => {\n  const key = uuid || sel.currentUserID(getState());\n  const stateFromLS = loadStateLocalStorage(key);\n  const drafts = sel.draftProposals(stateFromLS) || null;\n  dispatch(act.LOAD_DRAFT_PROPOSALS(drafts));\n};\n\nexport const onDeleteDraftProposal = (draftId) =>\n  act.DELETE_DRAFT_PROPOSAL(draftId);\n\nexport const onSaveDraftInvoice =\n  ({ draftId, ...rest }) =>\n  (dispatch, getState) => {\n    const policy = sel.policy(getState());\n    resetNewInvoiceData(policy);\n    const id = draftId || uniqueID(\"draft\");\n    dispatch(\n      act.SAVE_DRAFT_INVOICE({\n        id,\n        timestamp: Date.now() / 1000,\n        ...rest\n      })\n    );\n    return id;\n  };\n\nexport const onLoadDraftInvoices = (uuid) => (dispatch, getState) => {\n  const key = uuid || sel.currentUserID(getState());\n  const stateFromLS = loadStateLocalStorage(key);\n  const drafts = sel.draftInvoices(stateFromLS) || null;\n  dispatch(act.LOAD_DRAFT_INVOICES(drafts));\n};\n\nexport const onDeleteDraftInvoice = (draftId) => {\n  return act.DELETE_DRAFT_INVOICE(draftId);\n};\n\nexport const onSaveChangeUsername =\n  ({ password, newUsername }) =>\n  (dispatch) =>\n    dispatch(onChangeUsername(password, newUsername));\n\nexport const onSaveChangePassword =\n  ({ existingPassword, newPassword }) =>\n  (dispatch) =>\n    dispatch(onChangePassword(existingPassword, newPassword));\n\nexport const onIdentityImported = (successMsg, errorMsg = \"\") =>\n  act.IDENTITY_IMPORTED({ errorMsg, successMsg });\n\nexport const keyMismatch = (payload) => (dispatch) =>\n  dispatch(act.KEY_MISMATCH(payload));\n\nexport const toggleCreditsPaymentPolling = (bool) =>\n  act.TOGGLE_CREDITS_PAYMENT_POLLING(bool);\n\nexport const toggleProposalPaymentReceived = (bool) =>\n  act.TOGGLE_PROPOSAL_PAYMENT_RECEIVED(bool);\n\nexport const onEditUserPreferences = (preferences) => (dispatch) =>\n  dispatch(onEditUser(sel.resolveEditUserValues(preferences)));\n\nexport const onSaveNewDccComment =\n  ({ comment, token, parentID }) =>\n  (dispatch, getState) => {\n    const userid = sel.currentUserID(getState());\n    return dispatch(onSubmitDccCommentApi(userid, token, comment, parentID));\n  };\n\nexport const onSaveDraftDcc =\n  ({\n    type,\n    nomineeid,\n    statement,\n    domain,\n    contractortype,\n    id: draftId,\n    nomineeusername\n  }) =>\n  (dispatch) => {\n    resetNewDccData();\n    const id = draftId || uniqueID(\"draft\");\n    dispatch(\n      act.SAVE_DRAFT_DCC({\n        type,\n        nomineeid,\n        statement,\n        domain,\n        contractortype,\n        id,\n        nomineeusername,\n        timestamp: Date.now() / 1000\n      })\n    );\n    return id;\n  };\n\nexport const onLoadDraftDccs = (uuid) => (dispatch, getState) => {\n  const key = uuid || sel.currentUserID(getState());\n  const stateFromLS = loadStateLocalStorage(key);\n  const drafts = sel.draftDccs(stateFromLS) || null;\n  dispatch(act.LOAD_DRAFT_DCCS(drafts));\n};\n\nexport const onDeleteDraftDcc = (draftId) => {\n  return act.DELETE_DRAFT_DCC(draftId);\n};\n","import { TESTNET, EXPLORER } from \"../constants\";\n\nconst getSubdomainForDcrdata = (isTestnet) => (isTestnet ? TESTNET : EXPLORER);\n\nconst dcrdataURL = (isTestnet) =>\n  `https://${getSubdomainForDcrdata(isTestnet)}.decred.org/api`;\n\nexport const dcrddataBlockHeightURL = (isTestnet) =>\n  `${dcrdataURL(isTestnet)}/block/best/height`;\n\nconst dcrdataAddressURL = (isTestnet, address) =>\n  `${dcrdataURL(isTestnet)}/address/${address}/raw`;\nconst FAUCET_URL = \"https://faucet.decred.org/requestfaucet\";\n\nconst POST = (path, params, method = \"POST\") => {\n  let formBody = [];\n  for (const key in params) {\n    const encodedKey = encodeURIComponent(key);\n    const encodedValue = encodeURIComponent(params[key]);\n    formBody.push(encodedKey + \"=\" + encodedValue);\n  }\n  formBody = formBody.join(\"&\");\n\n  return fetch(path, {\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n    },\n    method,\n    body: formBody\n  }).then(function (response) {\n    if (response.status >= 400) {\n      throw new Error(\"Bad response from server\");\n    }\n    return response.json();\n  });\n};\n\nconst getRawTransactions = (url) => {\n  return fetch(url).then((r) => {\n    // work around when transactions are not paid and dcrdata api returns Unprocessable Entity\n    if (r.statusText === \"Unprocessable Entity\") {\n      return null;\n    }\n    return r.json();\n  });\n};\n\nconst addressFromTestnet = (addr) => addr[0] === \"T\";\n\nexport const getHeightByDcrdata = (isTestnet) =>\n  getRawTransactions(dcrddataBlockHeightURL(isTestnet));\n\nexport const getPaymentsByAddressDcrdata = (address) => {\n  const isTestnet = addressFromTestnet(address);\n  return getRawTransactions(dcrdataAddressURL(isTestnet, address));\n};\n\nexport const getCmsApprovedProposalsTokens = (isTestnet) => {\n  const url = `https://${\n    isTestnet ? \"test-proposals\" : \"proposals\"\n  }.decred.org/api/v1/proposals/tokeninventory`;\n  return fetch(url).then((res) => res.json());\n};\n\nexport const payWithFaucet = (address, amount) => {\n  const data = {\n    address,\n    amount,\n    json: true\n  };\n\n  return POST(FAUCET_URL, data);\n};\n","import * as external_api from \"../lib/external_api\";\nimport act from \"./methods\";\n\nexport const payWithFaucet = (address, amount, userid) => (dispatch) => {\n  dispatch(act.REQUEST_PAYWALL_PAYMENT_WITH_FAUCET());\n  return external_api\n    .payWithFaucet(address, amount)\n    .then((json) => {\n      if (json.error) {\n        const error = new Error(json.error);\n        dispatch(act.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET(null, error));\n        throw error;\n      }\n      return dispatch(\n        act.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET({ ...json, userid })\n      );\n    })\n    .catch((error) => {\n      dispatch(act.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET(null, error));\n      throw error;\n    });\n};\n\nexport const resetPaywallPaymentWithFaucet = () =>\n  act.RESET_PAYWALL_PAYMENT_WITH_FAUCET();\n","var map = {\n\t\"./cms/config.json\": [\n\t\t1211,\n\t\t13\n\t],\n\t\"./politeia/config.json\": [\n\t\t437\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 1007;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./cms-logo-dark.svg\": 1009,\n\t\"./cms-logo-light.svg\": 1010,\n\t\"./pi-logo-dark.svg\": 1011,\n\t\"./pi-logo-light.svg\": 1012,\n\t\"./rfp-tag.svg\": 439,\n\t\"./search-small.svg\": 1013\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1008;","module.exports = __webpack_public_path__ + \"static/media/cms-logo-dark.1cd9b7cc.svg\";","module.exports = __webpack_public_path__ + \"static/media/cms-logo-light.792abe53.svg\";","module.exports = __webpack_public_path__ + \"static/media/pi-logo-dark.82ae787b.svg\";","module.exports = __webpack_public_path__ + \"static/media/pi-logo-light.60670e11.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-small.020840ed.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"ProposalsList_title__1jcoK\",\"statusBarTooltip\":\"ProposalsList_statusBarTooltip__3Y6ya\",\"statusTag\":\"ProposalsList_statusTag__30vfQ\",\"statusWrapper\":\"ProposalsList_statusWrapper__3J5vz\",\"status\":\"ProposalsList_status__2jHSd\",\"itemTitle\":\"ProposalsList_itemTitle__2e2MM\",\"commentsLink\":\"ProposalsList_commentsLink__3Ewcs\",\"itemWrapper\":\"ProposalsList_itemWrapper__XBOgO\",\"statusBarWrapper\":\"ProposalsList_statusBarWrapper__akoFL\",\"timeLeftPassed\":\"ProposalsList_timeLeftPassed__3k4pe\",\"voteEvent\":\"ProposalsList_voteEvent__1Ph3Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statusTag\":\"DCC_statusTag__11Xc9\",\"topDetails\":\"DCC_topDetails__1lsuC\",\"field\":\"DCC_field__14v7i\",\"fieldLabel\":\"DCC_fieldLabel__MPxWc\",\"statement\":\"DCC_statement__212K9\",\"supportOpposeButtons\":\"DCC_supportOpposeButtons__2rMco\",\"supportOpposeBar\":\"DCC_supportOpposeBar__3w4TX\",\"dccActions\":\"DCC_dccActions__2PL9C\"};","import { useEffect, useState, useMemo } from \"react\";\nimport useProposalsBatch from \"./useProposalsBatch\";\nimport { difference, keys } from \"lodash\";\n\nexport default function useApprovedProposals(proposalPageSize, initialTokens) {\n  const [remainingTokens, setRemainingTokens] = useState(initialTokens);\n  const { proposals, proposalsTokens, loading, verifying } = useProposalsBatch(\n    remainingTokens,\n    {\n      fetchRfpLinks: true,\n      fetchVoteSummaries: false\n    }\n  );\n\n  const isLoading = loading || verifying;\n\n  useEffect(() => {\n    if (!isLoading) {\n      const tokens =\n        proposalsTokens.approved &&\n        difference(proposalsTokens.approved, keys(proposals)).splice(\n          0,\n          proposalPageSize\n        );\n      setRemainingTokens(tokens);\n    }\n  }, [proposals, proposalsTokens.approved, isLoading, proposalPageSize]);\n\n  const proposalsNotRFP = useMemo(\n    () => proposals && Object.values(proposals).filter((p) => !p.linkby),\n    [proposals]\n  );\n\n  return {\n    proposals: Object.values(proposals),\n    proposalsByToken: proposals,\n    proposalsNotRFP,\n    isLoading,\n    remainingTokens\n  };\n}\n","import { useMemo } from \"react\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport * as sel from \"src/selectors\";\nimport useThrowError from \"../utils/useThrowError\";\n\nexport default function useUserDetail(userID) {\n  const isCMS = useSelector(sel.isCMS);\n  const currentUserID = useSelector(sel.currentUserID);\n  const isPublicCms = isCMS && !currentUserID;\n  const uid = !isPublicCms ? userID || currentUserID : undefined;\n  const userSelector = useMemo(() => sel.makeGetUserByID(uid), [uid]);\n  const user = useSelector(userSelector);\n  const isAdmin = useSelector(sel.currentUserIsAdmin);\n  const onFetchUser = useAction(act.onFetchUser);\n  const isRequestingUser = useSelector(sel.isApiRequestingUser);\n  const userMissingData = !user || (user && !user.identities);\n  const needsFetch = !!uid && userMissingData && !isRequestingUser;\n  const args = [uid];\n  const [loading, error] = useAPIAction(onFetchUser, args, needsFetch);\n\n  useThrowError(error);\n\n  return { user, isAdmin, loading, currentUserID, isCMS };\n}\n","import * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport * as sel from \"src/selectors\";\n\nexport default function useUserIdentity() {\n  const userPubkey = useSelector(sel.currentUserPublicKey);\n  const currentUserID = useSelector(sel.currentUserID);\n  const currentUserUsername = useSelector(sel.currentUserUsername);\n  const currentUserEmail = useSelector(sel.currentUserEmail);\n  const identityImportSuccess = useSelector(sel.identityImportSuccess);\n  const keyMismatch = useSelector(sel.keyMismatch);\n  const updateUserKeyToken = useSelector(sel.currentUserKeyVerificationToken);\n  const updateUserKeyError = useSelector(sel.updateUserKeyError);\n  const shouldAutoVerifyKey = useSelector(sel.shouldAutoVerifyKey);\n\n  const keyMismatchAction = useAction(act.keyMismatch);\n  const onIdentityImported = useAction(act.onIdentityImported);\n  const onUpdateUserKey = useAction(act.onUpdateUserKey);\n\n  return {\n    userPubkey,\n    currentUserID,\n    currentUserUsername,\n    currentUserEmail,\n    identityImportSuccess,\n    keyMismatch,\n    updateUserKeyToken,\n    updateUserKeyError,\n    shouldAutoVerifyKey,\n    keyMismatchAction,\n    onIdentityImported,\n    onUpdateUserKey\n  };\n}\n","var map = {\n\t\"./about-politeia.md\": [\n\t\t1212,\n\t\t7\n\t],\n\t\"./onboard-cms.md\": [\n\t\t1213,\n\t\t8\n\t],\n\t\"./onboard-pi.md\": [\n\t\t1214,\n\t\t9\n\t],\n\t\"./paywall-politeia.md\": [\n\t\t1215,\n\t\t10\n\t],\n\t\"./privacy-policy-cms.md\": [\n\t\t1216,\n\t\t11\n\t],\n\t\"./privacy-policy.md\": [\n\t\t1217,\n\t\t12\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 1132;\nmodule.exports = webpackAsyncContext;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statusTag\":\"Invoice_statusTag__3Xjbc\",\"topDetails\":\"Invoice_topDetails__1Pwp0\",\"field\":\"Invoice_field__33WNF\",\"fieldLabel\":\"Invoice_fieldLabel__3Dfxh\"};","import React from \"react\";\nimport { useDocumentTitle } from \"src/hooks/utils/useDocumentTitle\";\nimport { Route as ReactRoute } from \"react-router-dom\";\nimport { useSelector } from \"src/redux\";\n\nconst useTitleFromState = (selector) => {\n  const title = useSelector(selector || (() => \"\"));\n  return title;\n};\n\nconst Route = ({ title, titleSelector, ...props }) => {\n  const titleFromState = useTitleFromState(titleSelector);\n  useDocumentTitle(titleFromState || title);\n  return <ReactRoute {...props} />;\n};\n\nexport default Route;\n","import React, { useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Route from \"./Route\";\nimport { useLoaderContext } from \"src/containers/Loader\";\n\nconst AdminAuthenticatedRoute = ({ history, ...props }) => {\n  const { initDone, currentUser } = useLoaderContext();\n  useEffect(() => {\n    if (initDone && (!currentUser || !currentUser.isadmin)) {\n      // there is not user logged in or user is not an admin\n      history.push(\"/\");\n    }\n  }, [initDone, currentUser, history]);\n  return initDone && !!currentUser && <Route {...props} />;\n};\n\nexport default withRouter(AdminAuthenticatedRoute);\n","import React, { useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Route from \"./Route\";\nimport { useLoaderContext } from \"src/containers/Loader\";\n\nconst AuthenticatedRoute = ({ history, ...props }) => {\n  const { initDone, currentUser } = useLoaderContext();\n  useEffect(() => {\n    if (initDone && !currentUser) {\n      // there is not user logged in\n      history.push(\"/\");\n    }\n  }, [initDone, currentUser, history]);\n  return <Route {...props} />;\n};\n\nexport default withRouter(AuthenticatedRoute);\n","import React, { useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport Route from \"./Route\";\n\nconst NotAuthenticatedRoute = ({ history, ...props }) => {\n  const { initDone, currentUser } = useLoaderContext();\n  useEffect(() => {\n    if (initDone && currentUser) {\n      // user is logged in so he must not be in this route\n      history.push(\"/\");\n    }\n  }, [initDone, currentUser, history]);\n  return <Route {...props} />;\n};\n\nexport default withRouter(NotAuthenticatedRoute);\n","import React from \"react\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport LoginForm from \"src/containers/User/Login/Form\";\n\nconst PageUserLogin = () => (\n  <SingleContentPage>\n    <LoginForm />\n  </SingleContentPage>\n);\n\nexport default PageUserLogin;\n","import React from \"react\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport StaticMarkdown from \"src/components/StaticMarkdown\";\nimport { useConfig } from \"src/containers/Config\";\n\nconst PageUserPrivacyPolicy = () => {\n  const { privacyPolicyContent } = useConfig();\n  return (\n    <SingleContentPage contentWidth=\"widen\">\n      <StaticMarkdown contentName={privacyPolicyContent} />\n    </SingleContentPage>\n  );\n};\n\nexport default PageUserPrivacyPolicy;\n","import React from \"react\";\n\nconst DevelopmentOnlyContent = ({ children, show, style }) =>\n  process.env.NODE_ENV !== \"production\" && show ? (\n    <div\n      style={{\n        position: \"relative\",\n        padding: \"4px\",\n        border: \"1px solid #e47a0d\",\n        ...style\n      }}\n    >\n      <span\n        style={{\n          position: \"absolute\",\n          right: \"1px\",\n          top: \"-2px\",\n          fontSize: \"1rem\"\n        }}\n      >\n        [dev]\n      </span>\n      {children}\n    </div>\n  ) : null;\n\nexport default DevelopmentOnlyContent;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { H2, P, Link } from \"pi-ui\";\n\nconst EmailSentMessage = ({\n  email = \"example@gmail.com\",\n  title,\n  bulletPoints\n}) => (\n  <>\n    <H2>{title}</H2>\n    <P style={{ marginTop: \"2rem\", marginBottom: 0 }}>\n      Note that, for privacy reasons, Politeia does not disclose whether an\n      email address has already been registered. If you don’t receive an email:\n    </P>\n    <ul style={{ padding: \"1rem 0\" }}>\n      <li>{`Check that ${email} is the correct address.`}</li>\n      <li>Check your spam folder!</li>\n      {bulletPoints.map((bp, idx) => (\n        <li key={`bp-${idx}`}>{bp}</li>\n      ))}\n    </ul>\n    <P>\n      If you're sure you should have received an email, join the\n      #support:decred.org channel on{\" \"}\n      <Link href=\"https://chat.decred.org\">Matrix</Link> to get assistance from\n      Politeia administrators.\n    </P>\n  </>\n);\n\nEmailSentMessage.propTypes = {\n  email: PropTypes.string,\n  title: PropTypes.string,\n  bulletPoints: PropTypes.array\n};\n\nEmailSentMessage.defaultProps = {\n  email: \"email@example.com\",\n  title: \"Please check your email inbox\",\n  bulletPoints: []\n};\n\nexport default EmailSentMessage;\n","import { useEffect, useState } from \"react\";\nimport * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\nimport {\n  requestResendEmailValidationSchema,\n  urlParamsValidationSchema\n} from \"./validation\";\nimport { getQueryStringValues } from \"src/lib/queryString\";\n\nexport function useRequestResendVerificationEmail() {\n  const onResendVerificationEmail = useAction(\n    act.onResendVerificationEmailConfirm\n  );\n  const resetResendVerificationEmail = useAction(\n    act.resetResendVerificationEmail\n  );\n\n  const validationSchema = requestResendEmailValidationSchema();\n  useEffect(() => {\n    return function cleanUp() {\n      resetResendVerificationEmail();\n    };\n  }, [resetResendVerificationEmail]);\n  return {\n    validationSchema,\n    onResendVerificationEmail\n  };\n}\n\nexport function useVerifyUserEmail() {\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(false);\n  const onVerify = useAction(act.onVerifyNewUser);\n\n  // validate url parameters for email and verification token and verify user\n  useEffect(() => {\n    const schema = urlParamsValidationSchema();\n\n    async function validateUrlParamsAndVerifyUser() {\n      try {\n        setLoading(true);\n        const { email, verificationtoken, username } = getQueryStringValues();\n        const valid = await schema.isValid({\n          username,\n          email,\n          verificationtoken\n        });\n        if (!valid) {\n          throw new Error(\"Invalid email or verification token\");\n        }\n        await onVerify(email, verificationtoken, username);\n        setLoading(false);\n        setSuccess(true);\n      } catch (error) {\n        setLoading(false);\n        setError(error);\n      }\n    }\n\n    validateUrlParamsAndVerifyUser();\n  }, [onVerify]);\n\n  return {\n    success,\n    loading,\n    error\n  };\n}\n","import * as Yup from \"yup\";\n\nexport const requestResendEmailValidationSchema = () =>\n  Yup.object().shape({\n    email: Yup.string().email(\"Invalid email\").required(\"Required\")\n  });\n\nexport const urlParamsValidationSchema = () =>\n  Yup.object().shape({\n    username: Yup.string().required(\"Username is required\"),\n    email: Yup.string().email(\"Invalid email\").required(\"Email is required\"),\n    verificationtoken: Yup.string().required(\"Verification token is required\")\n  });\n","import React, { useState, useCallback } from \"react\";\nimport { Button, TextInput } from \"pi-ui\";\nimport { Link } from \"react-router-dom\";\nimport DevelopmentOnlyContent from \"src/components/DevelopmentOnlyContent\";\nimport EmailSentMessage from \"src/components/EmailSentMessage\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport { useRequestResendVerificationEmail } from \"./hooks\";\n\nconst RequestVerificationEmailForm = () => {\n  const { validationSchema, onResendVerificationEmail } =\n    useRequestResendVerificationEmail();\n\n  const [email, setEmail] = useState();\n  const [devToken, setDevToken] = useState();\n\n  const handleSubmitAction = useCallback(\n    async (values, { setSubmitting, resetForm, setFieldError }) => {\n      try {\n        const response = await onResendVerificationEmail(values);\n        setSubmitting(false);\n        setEmail(values.email);\n        setDevToken(response && response.verificationtoken);\n        resetForm();\n      } catch (error) {\n        setFieldError(\"global\", error);\n      }\n    },\n    [setEmail, onResendVerificationEmail]\n  );\n\n  const success = !!email;\n\n  return (\n    <>\n      <FormWrapper\n        initialValues={{\n          username: \"\",\n          email: \"\"\n        }}\n        validationSchema={validationSchema}\n        onSubmit={handleSubmitAction}\n      >\n        {({\n          Form,\n          Title,\n          Actions,\n          values,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          errors,\n          touched\n        }) =>\n          !success ? (\n            <Form onSubmit={handleSubmit}>\n              <Title>Resend Verification Email</Title>\n              <TextInput\n                label=\"Username\"\n                id=\"username\"\n                autoComplete=\"username\"\n                value={values.username}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.username && errors.username}\n              />\n              <TextInput\n                label=\"Email\"\n                id=\"email\"\n                autoComplete=\"email\"\n                value={values.email}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.email && errors.email}\n              />\n              <Actions>\n                <Button type=\"submit\">Resend</Button>\n              </Actions>\n            </Form>\n          ) : (\n            <EmailSentMessage\n              title=\"Please check your inbox for your verification email\"\n              email={email}\n            />\n          )\n        }\n      </FormWrapper>\n      <DevelopmentOnlyContent show={devToken}>\n        <Link to={`/user/verify?email=${email}&verificationtoken=${devToken}`}>\n          Verify email\n        </Link>\n      </DevelopmentOnlyContent>\n    </>\n  );\n};\n\nexport default RequestVerificationEmailForm;\n","import React from \"react\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport RequestForm from \"src/containers/User/VerifyEmail/RequestForm\";\n\nconst PageUserRequestResendVerificationEmail = () => (\n  <SingleContentPage>\n    <RequestForm />\n  </SingleContentPage>\n);\n\nexport default PageUserRequestResendVerificationEmail;\n","import * as Yup from \"yup\";\nimport {\n  maxLengthMessage,\n  minLengthMessage,\n  yupFieldMatcher\n} from \"src/utils/validation\";\n\nconst usernameValidator = ({\n  minusernamelength,\n  maxusernamelength,\n  usernamesupportedchars\n}) =>\n  Yup.string()\n    .matches(...yupFieldMatcher(\"username\", usernamesupportedchars))\n    .min(minusernamelength, minLengthMessage(\"username\", minusernamelength))\n    .max(maxusernamelength, maxLengthMessage(\"username\", maxusernamelength))\n    .required(\"Required\");\n\nexport const requestResetValidationSchema = (policy) =>\n  Yup.object().shape({\n    username: usernameValidator(policy),\n    email: Yup.string().email(\"Invalid email\").required(\"Required\")\n  });\n\nexport const resetValidationSchema = ({ minpasswordlength }) =>\n  Yup.object().shape({\n    newpassword: Yup.string().min(minpasswordlength).required(\"Required\"),\n    verify_password: Yup.string()\n      .oneOf([Yup.ref(\"newpassword\")], \"Passwords must match\")\n      .required(\"Required\")\n  });\n\nexport const urlParamsValidationSchema = (policy) =>\n  Yup.object().shape({\n    username: usernameValidator(policy),\n    verificationtoken: Yup.string().required(\"Verification token is required\")\n  });\n","import { useEffect, useState } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\nimport { useSelector, useAction } from \"src/redux\";\nimport {\n  resetValidationSchema,\n  requestResetValidationSchema,\n  urlParamsValidationSchema\n} from \"./validation\";\nimport { getQueryStringValues } from \"src/lib/queryString\";\n\nfunction useValidationSchemaFromPolicy(schemaFn) {\n  const [validationSchema, setValidationSchema] = useState(null);\n  const { policy } = usePolicy();\n\n  // Set the validation shcema once the policy has been fetched\n  useEffect(() => {\n    if (policy) {\n      const schema = schemaFn(policy);\n      setValidationSchema(schema);\n    }\n  }, [policy, schemaFn]);\n\n  return validationSchema;\n}\n\nexport function useResetPassword() {\n  const requestResetResponse = useSelector(sel.currentUserResetPassword);\n  const onResetPassword = useAction(act.onResetPassword);\n  const validationSchema = useValidationSchemaFromPolicy(\n    requestResetValidationSchema\n  );\n\n  return { onResetPassword, validationSchema, requestResetResponse };\n}\n\nexport function useVerifyResetPassword() {\n  const [initialValues, setInitialValues] = useState({});\n  const [invalidParamsError, setInvalidParamsError] = useState(false);\n\n  const onVerifyResetPassword = useAction(act.onVerifyResetPassword);\n\n  const resetPasswordValidationSchema = useValidationSchemaFromPolicy(\n    resetValidationSchema\n  );\n  const urlValidationSchema = useValidationSchemaFromPolicy(\n    urlParamsValidationSchema\n  );\n\n  // validate url parameters for email and verification token\n  useEffect(() => {\n    async function validateUrlParams(schema) {\n      const { username, verificationtoken } = getQueryStringValues();\n      const valid = await schema.isValid({\n        username,\n        verificationtoken\n      });\n      if (!valid) {\n        setInvalidParamsError(\"Invalid email, username or verification token\");\n        return;\n      }\n      const initialValues = {\n        username: username || \"\",\n        verificationtoken: verificationtoken || \"\",\n        newpassword: \"\",\n        verify_password: \"\"\n      };\n      setInitialValues(initialValues);\n    }\n\n    if (urlValidationSchema) {\n      validateUrlParams(urlValidationSchema);\n    }\n  }, [urlValidationSchema]);\n\n  return {\n    onVerifyResetPassword,\n    validationSchema: resetPasswordValidationSchema,\n    initialValues,\n    invalidParamsError\n  };\n}\n","import React, { useState, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { TextInput, Button } from \"pi-ui\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport EmailSentMessage from \"src/components/EmailSentMessage\";\nimport { useResetPassword } from \"./hooks\";\nimport DevelopmentOnlyContent from \"src/components/DevelopmentOnlyContent\";\n\nconst RequestForm = () => {\n  const { validationSchema, onResetPassword } = useResetPassword();\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [verificationToken, setVerificationToken] = useState();\n  const success = !!username && !!email;\n  const onSubmit = useCallback(\n    async (values, { setSubmitting, setFieldError }) => {\n      try {\n        const response = await onResetPassword(values);\n        setSubmitting(false);\n        setUsername(values.username);\n        setEmail(values.email);\n        setVerificationToken(response.verificationtoken);\n      } catch (e) {\n        setSubmitting(false);\n        setFieldError(\"global\", e);\n      }\n    },\n    [onResetPassword]\n  );\n  return (\n    <>\n      <FormWrapper\n        initialValues={{\n          username: \"\",\n          email: \"\"\n        }}\n        validationSchema={validationSchema}\n        onSubmit={onSubmit}\n      >\n        {({\n          Form,\n          Title,\n          Actions,\n          ErrorMessage,\n          values,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          errors,\n          touched,\n          isSubmitting\n        }) =>\n          !success ? (\n            <Form onSubmit={handleSubmit}>\n              <Title>Reset Password</Title>\n              {errors && errors.global && (\n                <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n              )}\n              <TextInput\n                label=\"Username\"\n                id=\"username\"\n                value={values.username}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.username && errors.username}\n              />\n              <TextInput\n                label=\"Email\"\n                id=\"email\"\n                value={values.email}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.email && errors.email}\n              />\n              <Actions>\n                <Button loading={isSubmitting} type=\"submit\">\n                  Reset Password\n                </Button>\n              </Actions>\n            </Form>\n          ) : (\n            <EmailSentMessage\n              email={email}\n              title={\"Please check your mailbox to reset your password\"}\n            />\n          )\n        }\n      </FormWrapper>\n      <DevelopmentOnlyContent show={verificationToken}>\n        <Link\n          to={`/user/password/reset?username=${username}&verificationtoken=${verificationToken}`}\n        >\n          Reset password\n        </Link>\n      </DevelopmentOnlyContent>\n    </>\n  );\n};\n\nexport default RequestForm;\n","import React from \"react\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport RequestForm from \"src/containers/User/ResetPassword/RequestForm\";\n\nconst PageUserRequestResetPassword = () => (\n  <SingleContentPage>\n    <RequestForm />\n  </SingleContentPage>\n);\n\nexport default PageUserRequestResetPassword;\n","import { Button, H2, P, TextInput } from \"pi-ui\";\nimport React, { useState } from \"react\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport { useVerifyResetPassword } from \"./hooks\";\n\nconst SuccessContent = () => (\n  <>\n    <H2>Password reset completed</H2>\n    <P style={{ marginTop: \"2rem\", marginBottom: 0 }}>\n      Your password has been changed. You can now login with your new password.\n    </P>\n  </>\n);\n\nconst ResetForm = () => {\n  const [success, setSuccess] = useState(false);\n  const {\n    onVerifyResetPassword,\n    validationSchema,\n    initialValues,\n    invalidParamsError\n  } = useVerifyResetPassword();\n\n  if (invalidParamsError) {\n    throw invalidParamsError;\n  }\n\n  async function onSubmit(values, { setSubmitting, setFieldError, resetForm }) {\n    try {\n      await onVerifyResetPassword(values);\n      setSubmitting(false);\n      setSuccess(true);\n      resetForm();\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n    }\n  }\n\n  return (\n    <FormWrapper\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      loading={!validationSchema}\n      onSubmit={onSubmit}\n      enableReinitialize\n    >\n      {({\n        Form,\n        Title,\n        Actions,\n        ErrorMessage,\n        values,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        errors,\n        touched,\n        isSubmitting\n      }) =>\n        !success ? (\n          <Form onSubmit={handleSubmit}>\n            <Title>Reset Password</Title>\n            {errors && errors.global && (\n              <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n            )}\n            <TextInput\n              id=\"newpassword\"\n              label=\"Password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              value={values.newpassword}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              error={touched.newpassword && errors.newpassword}\n            />\n            <TextInput\n              id=\"verify_password\"\n              label=\"Confirm Password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              value={values.verify_password}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              error={touched.verify_password && errors.verify_password}\n            />\n            <Actions>\n              <Button loading={isSubmitting} type=\"submit\">\n                Reset Password\n              </Button>\n            </Actions>\n          </Form>\n        ) : (\n          <SuccessContent />\n        )\n      }\n    </FormWrapper>\n  );\n};\n\nexport default ResetForm;\n","import React from \"react\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport ResetForm from \"src/containers/User/ResetPassword/ResetForm\";\n\nconst PageUserResetPassword = () => (\n  <SingleContentPage>\n    <ResetForm />\n  </SingleContentPage>\n);\n\nexport default PageUserResetPassword;\n","import get from \"lodash/get\";\nimport includes from \"lodash/includes\";\nimport find from \"lodash/find\";\n\nexport const typeOptions = [\n  \"No type defined\",\n  \"Direct\",\n  \"Supervisor\",\n  \"Sub Contractor\",\n  \"Nominee\",\n  \"Revoked\",\n  \"Temp. Contractor\",\n  \"Revoked Temp.\",\n  \"Proposal Approved\"\n];\n\nexport const selectTypeOptions = typeOptions.map((op, idx) => ({\n  value: idx,\n  label: op\n}));\n\nexport const getOwnedProposals = (owned, proposalsByToken) =>\n  owned ? owned.map((token) => get(proposalsByToken, [token, \"name\"])) : [];\n\nexport const getInitialAndOptionsProposals = (proposals, proposalsowned) => {\n  const proposalsOptions = [];\n  const initialOwnedProposals = [];\n\n  for (const {\n    name,\n    censorshiprecord: { token }\n  } of proposals) {\n    const value = { label: name, value: token };\n    if (includes(proposalsowned, token)) {\n      initialOwnedProposals.push(value);\n    } else {\n      proposalsOptions.push(value);\n    }\n  }\n\n  return {\n    proposalsOptions,\n    initialOwnedProposals\n  };\n};\n\nexport const getInitialAndOptionsSupervisors = (\n  supervisors,\n  userSupervisors\n) => {\n  const supervisorsOptions = [];\n  const initialSupervisorOptions = [];\n\n  for (const { username, id } of supervisors) {\n    const value = { label: username, value: id };\n    if (includes(userSupervisors, id)) {\n      initialSupervisorOptions.push(value);\n    } else {\n      supervisorsOptions.push(value);\n    }\n  }\n\n  return {\n    supervisorsOptions,\n    initialSupervisorOptions\n  };\n};\n\nexport const getSupervisorsNames = (supervisors, userSupervisors) =>\n  userSupervisors.flatMap((id) => {\n    const user = find(supervisors, { id });\n    return user ? user.username : [];\n  });\n","import React from \"react\";\nimport { Text, classNames, useTheme, DEFAULT_DARK_THEME_NAME } from \"pi-ui\";\nimport styles from \"./HelpMessage.module.css\";\n\nconst HelpMessage = ({ className, children }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <div\n      className={classNames(\"justify-center\", styles.container)}\n      data-testid=\"help-message\"\n    >\n      <Text\n        textAlign=\"center\"\n        className={classNames(\n          className,\n          styles.helpMessage,\n          isDarkTheme && styles.dark\n        )}\n      >\n        {children}\n      </Text>\n    </div>\n  );\n};\n\nexport default HelpMessage;\n","import * as Yup from \"yup\";\n\nexport const searchSchema = Yup.object().shape({\n  searchBy: Yup.string()\n    .required(\"required\")\n    .oneOf([\"email\", \"username\", \"domain\", \"contractortype\"]),\n  searchTerm: Yup.string().when(\"searchBy\", (searchBy, schema) =>\n    searchBy === \"email\" || searchBy === \"username\"\n      ? schema.required(\"required\")\n      : schema\n  ),\n  domain: Yup.object().when(\"searchBy\", (searchBy, schema) =>\n    searchBy === \"domain\" ? schema.required(\"required\") : schema\n  ),\n  contractortype: Yup.object().when(\"searchBy\", (searchBy, schema) =>\n    searchBy === \"contractortype\" ? schema.required(\"required\") : schema\n  )\n});\n","import { useMemo } from \"react\";\nimport { Formik } from \"formik\";\nimport {\n  BoxTextInput,\n  Button,\n  Card,\n  classNames,\n  Message,\n  RadioButtonGroup,\n  Table\n} from \"pi-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  selectTypeOptions,\n  typeOptions\n} from \"src/containers/User/Detail/ManageContractor/helpers\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport SelectField from \"src/components/Select/SelectField\";\nimport { useSearchUser } from \"./hooks\";\nimport styles from \"./Search.module.css\";\nimport Link from \"src/components/Link\";\nimport { usePolicy } from \"src/hooks\";\nimport { searchSchema } from \"./validation\";\nimport { getContractorDomains, getDomainName } from \"src/helpers\";\nimport get from \"lodash/get\";\n\nconst getFormattedSearchResults = (users = [], isCMS, supporteddomains) =>\n  users.map((u) =>\n    !isCMS\n      ? {\n          Username: u.username,\n          Email: u.email,\n          ID: <Link to={`/user/${u.id}`}>{u.id}</Link>\n        }\n      : {\n          Username: <Link to={`/user/${u.id}`}>{u.username}</Link>,\n          Domain: getDomainName(\n            getContractorDomains(supporteddomains),\n            u.domain\n          ),\n          Type: typeOptions[u.contractortype]\n        }\n  );\n\nconst filterUserResult = (result, filterValue) =>\n  !filterValue\n    ? result\n    : result &&\n      result.filter((u) => u && u.username && u.username.includes(filterValue));\n\nconst UserSearch = ({ TopBanner, PageDetails, Main, Title }) => {\n  const { onSearchUser, searchResult, isCMS } = useSearchUser();\n  const [searchError, setSearchError] = useState(null);\n  const [foundUsers, setFoundUsers] = useState([]);\n  const [filterValue, setFilterValue] = useState(); // filters on the client-side\n  const supportedDomains = get(usePolicy(), [\"policyPi\", \"domains\"]);\n  const contractorDomains = isCMS ? getContractorDomains(supportedDomains) : [];\n  const searchOptions = useMemo(() => {\n    if (isCMS) {\n      return [\n        { value: \"domain\", label: \"Domain\" },\n        { value: \"contractortype\", label: \"Contractor type\" },\n        { value: \"username\", label: \"Username\" }\n      ];\n    }\n    return [\n      { value: \"email\", label: \"Email\" },\n      { value: \"username\", label: \"Username\" }\n    ];\n  }, [isCMS]);\n\n  async function onSubmit(values, { setSubmitting }) {\n    try {\n      setSearchError(null);\n      const isByDomain = values.searchBy === \"domain\";\n      const isByType = values.searchBy === \"contractortype\";\n      const isByEmail = values.searchBy === \"email\";\n      const isByUsername = values.searchBy === \"username\";\n      const isCmsSearchByUsername = isCMS && isByUsername;\n\n      const hasFetched = filterValue && !isByDomain && !isByType;\n\n      // cache requests\n      if (!hasFetched) {\n        await onSearchUser(\n          !isCmsSearchByUsername\n            ? {\n                [values.searchBy]:\n                  isByUsername || isByEmail\n                    ? values.searchTerm\n                    : isByType\n                    ? values.contractortype.value\n                    : isByDomain\n                    ? values.domain.value\n                    : \"\"\n              }\n            : {}, // no params are passed since we need to fetch all users\n          isCMS\n        );\n      }\n      setFilterValue(isCmsSearchByUsername ? values.searchTerm : null);\n      setSubmitting(false);\n    } catch (e) {\n      setSubmitting(false);\n      setSearchError(e);\n    }\n  }\n\n  useEffect(\n    function updateFoundUsers() {\n      const filteredResult = filterUserResult(searchResult, filterValue);\n      if (filteredResult) {\n        setFoundUsers(\n          getFormattedSearchResults(filteredResult, isCMS, supportedDomains)\n        );\n      }\n    },\n    [searchResult, isCMS, filterValue, supportedDomains]\n  );\n\n  return (\n    <>\n      <TopBanner>\n        <PageDetails\n          actionsContent={null}\n          title={<Title className=\"margin-right-m\">Search</Title>}\n        >\n          <Formik\n            initialValues={{\n              searchTerm: \"\",\n              searchBy: !isCMS ? \"email\" : \"domain\",\n              contractortype: undefined,\n              domain: undefined\n            }}\n            onSubmit={onSubmit}\n            validationSchema={searchSchema}\n          >\n            {({\n              values,\n              handleChange,\n              handleSubmit,\n              isSubmitting,\n              setFieldValue,\n              isValid\n            }) => {\n              const handleChangeSearchBy = (v) =>\n                setFieldValue(\"searchBy\", v.value);\n              const handleChangeSelectField = (field) => (v) =>\n                setFieldValue(field, v);\n              const isByDomain = values.searchBy === \"domain\";\n              const isByType = values.searchBy === \"contractortype\";\n              const isByEmail = values.searchBy === \"email\";\n              return (\n                <form>\n                  <RadioButtonGroup\n                    className={styles.searchByRadioGroup}\n                    optionClassName={styles.searchByRadioButton}\n                    label=\"\"\n                    options={searchOptions}\n                    value={values.searchBy}\n                    onChange={handleChangeSearchBy}\n                  />\n                  <div className=\"justify-left margin-top-m\">\n                    {!isByType && !isByDomain && (\n                      <BoxTextInput\n                        data-testid=\"search-user\"\n                        name=\"searchTerm\"\n                        className={styles.searchBox}\n                        value={values.searchTerm}\n                        onChange={handleChange}\n                        placeholder={isByEmail ? \"User email\" : \"Username\"}\n                      />\n                    )}\n                    {isByType && (\n                      <SelectField\n                        name=\"contractortype\"\n                        className={styles.select}\n                        options={selectTypeOptions}\n                        value={values.contractortype}\n                        onChange={handleChangeSelectField(\"contractortype\")}\n                        placeholder=\"Choose contractor type\"\n                      />\n                    )}\n                    {isByDomain && (\n                      <SelectField\n                        name=\"domain\"\n                        className={styles.select}\n                        options={contractorDomains}\n                        value={values.domain}\n                        onChange={handleChangeSelectField(\"domain\")}\n                        placeholder=\"Choose a domain\"\n                      />\n                    )}\n                    <Button\n                      className={styles.searchButton}\n                      onClick={handleSubmit}\n                      type=\"submit\"\n                      loading={isSubmitting}\n                      kind={isValid ? \"primary\" : \"disabled\"}\n                    >\n                      Search\n                    </Button>\n                  </div>\n                </form>\n              );\n            }}\n          </Formik>\n        </PageDetails>\n      </TopBanner>\n      <Main fillScreen>\n        {searchError ? (\n          <Message kind=\"error\">{searchError.toString()}</Message>\n        ) : foundUsers && !!foundUsers.length ? (\n          <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n            <Table\n              data-testid=\"results-table\"\n              data={foundUsers}\n              headers={\n                !isCMS\n                  ? [\"Username\", \"Email\", \"ID\"]\n                  : [\"Username\", \"Domain\", \"Type\"]\n              }\n            />\n          </Card>\n        ) : (\n          <HelpMessage>No users to show</HelpMessage>\n        )}\n      </Main>\n    </>\n  );\n};\n\nexport default UserSearch;\n","import { useMemo, useEffect, useState } from \"react\";\nimport unionBy from \"lodash/unionBy\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport * as sel from \"src/selectors\";\n\nconst ERROR_MESSAGE = \"unable to fetch users\";\n\nexport function useReactiveSearchUser(email, username) {\n  const onSearchUser = useAction(act.onSearchUser);\n  const [error, setError] = useState();\n  const resultForEmailSelector = useMemo(\n    () => sel.makeGetSearchResultsByEmail(email),\n    [email]\n  );\n  const resultForUsernameSelector = useMemo(\n    () => sel.makeGetSearchResultsByUsername(username),\n    [username]\n  );\n  const resultsForEmail = useSelector(resultForEmailSelector);\n  const resultsForUsername = useSelector(resultForUsernameSelector);\n\n  useEffect(() => {\n    if (!!email && !resultsForEmail) {\n      onSearchUser({ email }).catch(() => {\n        setError(new Error(ERROR_MESSAGE));\n      });\n    }\n  }, [email, resultsForEmail, onSearchUser]);\n\n  useEffect(() => {\n    if (!!username && !resultsForUsername) {\n      onSearchUser({ username }).catch(() => {\n        setError(new Error(ERROR_MESSAGE));\n      });\n    }\n  }, [username, resultsForUsername, onSearchUser]);\n\n  return { error, results: unionBy(resultsForUsername, resultsForEmail, \"id\") };\n}\n\nexport function useSearchUser() {\n  const searchResult = useSelector(sel.searchResults);\n  const onSearchUser = useAction(act.onSearchUser);\n  const isCMS = useSelector(sel.isCMS);\n\n  return { searchResult, onSearchUser, isCMS };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport Search from \"src/containers/User/Search\";\n\nconst PageUserSearch = () => {\n  return (\n    <MultipleContentPage topBannerHeight={220}>\n      {(props) => <Search {...props} />}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageUserSearch;\n","import * as Yup from \"yup\";\nimport {\n  maxLengthMessage,\n  minLengthMessage,\n  yupFieldMatcher\n} from \"src/utils/validation\";\n\nexport const signupValidationSchema = (\n  {\n    minpasswordlength,\n    minusernamelength,\n    maxusernamelength,\n    usernamesupportedchars\n  },\n  withVerificationToken\n) =>\n  Yup.object().shape({\n    email: Yup.string().email(\"Invalid email\").required(\"Required\"),\n    username: Yup.string()\n      .matches(...yupFieldMatcher(\"username\", usernamesupportedchars))\n      .min(minusernamelength, minLengthMessage(\"username\", minusernamelength))\n      .max(maxusernamelength, maxLengthMessage(\"username\", maxusernamelength))\n      .required(\"Required\"),\n    password: Yup.string()\n      .min(minpasswordlength, minLengthMessage(\"password\", minpasswordlength))\n      .required(\"Required\"),\n    verify_password: Yup.string()\n      .oneOf([Yup.ref(\"password\")], \"Passwords must match\")\n      .required(\"Required\"),\n    verificationtoken: withVerificationToken\n      ? Yup.string().required(\"Required\")\n      : Yup.string()\n  });\n","import { Button, Modal, P } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nconst ModalIdentityWarning = ({\n  title,\n  onClose,\n  show,\n  onConfirm,\n  confirmMessage,\n  isCms\n}) => (\n  <Modal\n    style={{ maxWidth: \"70rem\" }}\n    show={show}\n    title={title}\n    onClose={onClose}\n    iconType=\"info\"\n    iconSize=\"lg\"\n  >\n    {!isCms ? (\n      <P>\n        Politeia will send you a link to verify your email address. You must\n        open this link in the same browser. After verifying your email, Politeia\n        will create your Politeia “identity”, which consists of a public/private\n        cryptographic key pair and browser cookie. This is necessary to verify\n        your identity and allow submission of proposals, commenting, voting, and\n        other Politeia functions. After completing the signup process, you can\n        export your identity (public/private keys) to another browser at any\n        time.\n      </P>\n    ) : (\n      <P>\n        CMS will create your CMS “identity”, which consists of a public/private\n        cryptographic key pair and browser cookie. This is necessary to verify\n        your identity and allow submission of invoices, DCCs, commenting, and\n        other CMS functions. After completing the signup process, you can export\n        your identity (public/private keys) to another browser at any time.\n      </P>\n    )}\n    <Button\n      style={{\n        float: \"right\",\n        marginTop: \"3rem\"\n      }}\n      onClick={onConfirm}\n    >\n      {confirmMessage}\n    </Button>\n  </Modal>\n);\n\nModalIdentityWarning.propTypes = {\n  title: PropTypes.string,\n  onClose: PropTypes.func.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  confirmMessage: PropTypes.string,\n  isCms: PropTypes.bool\n};\n\nModalIdentityWarning.defaultProps = {\n  title: \"Before you continue\",\n  confirmMessage: \"I understand, continue\"\n};\n\nexport default ModalIdentityWarning;\n","import { useState } from \"react\";\nimport useModelContext from \"src/hooks/utils/useModalContext\";\nimport ModalIdentityWarning from \"src/components/ModalIdentityWarning\";\n\nexport default function useIdentityWarningModal({ asyncSubmit, isCms }) {\n  const [handleOpenModal, handleCloseModal] = useModelContext();\n  const [email, setEmail] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n\n  const onConfirm =\n    (values, { setSubmitting, resetForm, setFieldError }) =>\n    async () => {\n      handleCloseModal();\n      try {\n        await asyncSubmit(values);\n        setSubmitting(false);\n        setEmail(values.email);\n        setUsername(values.username);\n        resetForm();\n      } catch (e) {\n        setSubmitting(false);\n        setFieldError(\"global\", e);\n      }\n    };\n\n  const onCancel =\n    (_, { setSubmitting }) =>\n    () => {\n      setSubmitting(false);\n      handleCloseModal();\n    };\n\n  const onSubmit = (...args) => {\n    handleOpenModal(ModalIdentityWarning, {\n      title: \"Before you sign up\",\n      confirmMessage: \"I understand, sign me up\",\n      onClose: onCancel(...args),\n      onConfirm: onConfirm(...args),\n      isCms\n    });\n  };\n\n  return {\n    handleSubmitAction: onSubmit,\n    email,\n    username\n  };\n}\n","import { Button, Text, TextInput, H2, P } from \"pi-ui\";\nimport React from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport DevelopmentOnlyContent from \"src/components/DevelopmentOnlyContent\";\nimport EmailSentMessage from \"src/components/EmailSentMessage\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport { useSignup } from \"./hooks\";\nimport useIdentityWarningModal from \"../hooks/useIdentityWarningModal\";\n\nconst SignupForm = () => {\n  const {\n    onSignup,\n    initialValues,\n    signupResponse,\n    validationSchema,\n    enableAdminInvite,\n    isCms\n  } = useSignup();\n\n  const { handleSubmitAction, email, username } = useIdentityWarningModal({\n    asyncSubmit: onSignup,\n    isCms: isCms\n  });\n\n  const signupSuccess = !!email;\n\n  return (\n    <>\n      <FormWrapper\n        initialValues={initialValues}\n        loading={!validationSchema}\n        validationSchema={validationSchema}\n        onSubmit={handleSubmitAction}\n      >\n        {({\n          Form,\n          Title,\n          Actions,\n          Footer,\n          Link,\n          ErrorMessage,\n          values,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          errors,\n          touched,\n          isSubmitting\n        }) =>\n          !signupSuccess ? (\n            <Form onSubmit={handleSubmit}>\n              <Title>Create a new account</Title>\n              {errors && errors.global && (\n                <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n              )}\n              <TextInput\n                label=\"Email\"\n                id=\"signupemail\"\n                name=\"email\"\n                autoComplete=\"email\"\n                value={values.email}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.email && errors.email}\n              />\n              <TextInput\n                label=\"Username\"\n                id=\"username\"\n                name=\"username\"\n                autoComplete=\"username\"\n                value={values.username}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.username && errors.username}\n              />\n\n              <TextInput\n                id=\"signuppassword\"\n                label=\"Password\"\n                type=\"password\"\n                name=\"password\"\n                autoComplete=\"new-password\"\n                value={values.password}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.password && errors.password}\n              />\n              <TextInput\n                id=\"verify_password\"\n                label=\"Verify Password\"\n                type=\"password\"\n                name=\"verify_password\"\n                autoComplete=\"new-password\"\n                value={values.verify_password}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.verify_password && errors.verify_password}\n              />\n              {enableAdminInvite && (\n                <TextInput\n                  label=\"Verification Token\"\n                  id=\"verificationtoken\"\n                  name=\"verificationtoken\"\n                  value={values.verificationtoken}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.verificationtoken && errors.verificationtoken}\n                />\n              )}\n              <Actions>\n                <Link to=\"/user/resend-verification-email\">\n                  Resend verification email\n                </Link>\n                <Button type=\"submit\" loading={isSubmitting}>\n                  Sign up\n                </Button>\n              </Actions>\n              <Footer className=\"justify-right\">\n                <Text>\n                  Already have an account? <Link to=\"/user/login\">Log in!</Link>\n                </Text>\n              </Footer>\n            </Form>\n          ) : !enableAdminInvite ? (\n            <EmailSentMessage\n              title=\"Please check your inbox to verify your registration\"\n              email={email}\n              bulletPoints={[\n                \"The verification link needs to be opened with the same browser that you used to sign up.\",\n                <>\n                  Make sure you don’t already have an account on Politeia with\n                  this email address. If you do, you should{\" \"}\n                  <Link to=\"/user/request-reset-password\">\n                    reset your password\n                  </Link>{\" \"}\n                  instead.\n                </>\n              ]}\n            />\n          ) : (\n            <>\n              <H2>Account created successfully</H2>\n              <P style={{ marginTop: \"2rem\" }}>\n                You may <Link to=\"/user/login\">login</Link> to your account now.\n              </P>\n            </>\n          )\n        }\n      </FormWrapper>\n      <DevelopmentOnlyContent\n        show={signupResponse && signupResponse.verificationtoken}\n      >\n        <RouterLink\n          to={`/user/verify?email=${email}&verificationtoken=${\n            signupResponse && signupResponse.verificationtoken\n          }&username=${username}\n          `}\n        >\n          Verify email\n        </RouterLink>\n      </DevelopmentOnlyContent>\n    </>\n  );\n};\n\nexport default SignupForm;\n","import { useEffect, useState } from \"react\";\nimport * as act from \"src/actions\";\nimport { useConfig } from \"src/containers/Config\";\nimport { getQueryStringValues } from \"src/lib/queryString\";\nimport { useSelector, useAction } from \"src/redux\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\nimport * as sel from \"src/selectors\";\nimport { signupValidationSchema } from \"./validation\";\n\nexport function useSignup() {\n  const signupResponse = useSelector(sel.newUser);\n  const onCreateNewUser = useAction(act.onCreateNewUser);\n  const onCreateNewUseFromAdminInvitation = useAction(act.onCreateNewUserCMS);\n  const onResetSignup = useAction(act.onResetNewUser);\n  const { enableAdminInvite, recordType, constants } = useConfig();\n  const { policy } = usePolicy();\n  const [validationSchema, setValidationSchema] = useState(\n    policy ? signupValidationSchema(policy, enableAdminInvite) : null\n  );\n\n  useEffect(\n    function handleSetValidationSchemaFromPolicy() {\n      if (!!policy && !validationSchema) {\n        setValidationSchema(signupValidationSchema(policy, enableAdminInvite));\n      }\n    },\n    [policy, enableAdminInvite, validationSchema]\n  );\n\n  // Switch between signup methods accordingly to the config 'enableAdminInvite'\n  const onSignup = enableAdminInvite\n    ? onCreateNewUseFromAdminInvitation\n    : onCreateNewUser;\n\n  const isCms = recordType !== constants.RECORD_TYPE_PROPOSAL;\n\n  useEffect(() => {\n    return function resetSignup() {\n      onResetSignup();\n    };\n  }, [onResetSignup]);\n\n  // Set intial values\n  const { email, verificationtoken } = getQueryStringValues();\n  const initialValues = {\n    email: email || \"\",\n    verificationtoken: verificationtoken || \"\",\n    password: \"\",\n    username: \"\",\n    verify_password: \"\"\n  };\n\n  return {\n    signupResponse,\n    validationSchema,\n    onSignup,\n    enableAdminInvite,\n    initialValues,\n    isCms\n  };\n}\n","import React from \"react\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport SignupForm from \"src/containers/User/Signup/Form\";\n\nconst PageUserSignup = () => (\n  <SingleContentPage>\n    <SignupForm />\n  </SingleContentPage>\n);\n\nexport default PageUserSignup;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Spinner } from \"pi-ui\";\nimport styles from \"./LoadingWithMessage.module.css\";\n\nconst LoadingWithMessage = ({ message, spinnerProps, ...props }) => (\n  <div className={styles.wrapper} {...props}>\n    <Spinner {...spinnerProps} />\n    <span className={styles.text}>{message}</span>\n  </div>\n);\n\nLoadingWithMessage.propTypes = {\n  message: PropTypes.string.isRequired,\n  spinnerProps: PropTypes.object\n};\n\nexport default LoadingWithMessage;\n","import React from \"react\";\nimport { useVerifyUserEmail } from \"./hooks\";\nimport { H2, P } from \"pi-ui\";\nimport LoadingWithMessage from \"src/components/LoadingWithMessage\";\n\nconst VerifyEmail = () => {\n  const { success, loading, error } = useVerifyUserEmail();\n\n  //   we let the error boundary catch the error\n  if (error) throw error;\n\n  return loading || !success ? (\n    <LoadingWithMessage\n      message={\"Verifying email...\"}\n      spinnerProps={{ invert: true }}\n    />\n  ) : (\n    <>\n      <H2>Your email has been successfully verified</H2>\n      <P style={{ marginTop: \"2rem\" }}>\n        To complete your registration and to be able to submit proposals and\n        comments, you must pay a small fee in DCR, which is used to help deter\n        spam in Politeia.\n      </P>\n      <P>\n        Please log in to find instructions on how to pay the registration fee.\n      </P>\n    </>\n  );\n};\n\nexport default VerifyEmail;\n","import React from \"react\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport { VerifyEmail } from \"src/containers/User/VerifyEmail\";\n\nconst PageUserVerifyEmail = () => (\n  <SingleContentPage>\n    <VerifyEmail />\n  </SingleContentPage>\n);\n\nexport default PageUserVerifyEmail;\n","import { Button, classNames, Icon, Text } from \"pi-ui\";\nimport qs from \"query-string\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport { verifyUserPubkey } from \"src/helpers\";\nimport useVerifyKey from \"src/hooks/api/useVerifyKey\";\nimport styles from \"./VerifyKey.module.css\";\n\nconst VerifyKey = ({ location, history }) => {\n  const {\n    currentUserID,\n    userPubkey,\n    keyMismatchAction,\n    verifyUserKey,\n    verifyUserKeyError,\n    onVerifyUserKey,\n    isCMS\n  } = useVerifyKey();\n\n  const [keyUpdated, setKeyUpdated] = useState(false);\n\n  const verifyAndUpdateLocalKey = useCallback(async () => {\n    try {\n      const { verificationtoken } = qs.parse(location.search);\n      if (verificationtoken && currentUserID) {\n        await onVerifyUserKey(currentUserID, verificationtoken);\n        verifyUserPubkey(currentUserID, userPubkey, keyMismatchAction);\n        setKeyUpdated(true);\n      }\n    } catch (e) {\n      setKeyUpdated(true);\n      throw e;\n    }\n  }, [currentUserID, userPubkey, keyMismatchAction, onVerifyUserKey, location]);\n\n  useEffect(() => {\n    if (!keyUpdated && !verifyUserKey) {\n      verifyAndUpdateLocalKey();\n    }\n  }, [verifyAndUpdateLocalKey, keyUpdated, verifyUserKey]);\n\n  const loading = !verifyUserKey && !verifyUserKeyError;\n  const success = verifyUserKey && verifyUserKey.success;\n  const error = verifyUserKeyError;\n  const pushToHome = useCallback(() => history.push(\"/\"), [history]);\n  const successButtonText = isCMS\n    ? \"Ok, go to invoices\"\n    : \"Ok, go to proposals\";\n\n  return (\n    <SingleContentPage>\n      <div>\n        {loading && \"Loading ...\"}\n        {error && (\n          <div className={styles.container}>\n            <div className={styles.iconAndTextWrapper}>\n              <div className={styles.iconWrapper}>\n                <Icon\n                  type=\"alert\"\n                  size=\"xlg\"\n                  backgroundColor=\"#ed6d47\"\n                  iconColor=\"white\"\n                />\n              </div>\n              <Text className=\"margin-left-s\">{error.message}</Text>\n            </div>\n            <Button\n              className={classNames(\"margin-top-l\", styles.btn)}\n              onClick={pushToHome}\n              type=\"button\"\n            >\n              Ok, go to home\n            </Button>\n          </div>\n        )}\n        {success && (\n          <div className={styles.container}>\n            <div className={styles.iconAndTextWrapper}>\n              <Icon\n                type=\"checkmark\"\n                size=\"xlg\"\n                backgroundColor=\"#41bf53\"\n                iconColor=\"white\"\n              />\n              <Text className=\"margin-left-s\">\n                You have verified and activated your new identity.\n              </Text>\n            </div>\n            <Button\n              className={classNames(\"margin-top-l\", styles.btn)}\n              onClick={pushToHome}\n              type=\"button\"\n            >\n              {successButtonText}\n            </Button>\n          </div>\n        )}\n      </div>\n    </SingleContentPage>\n  );\n};\n\nexport default withRouter(VerifyKey);\n","import VerifyKey from \"./VerifyKey.jsx\";\n\nexport default VerifyKey;\n","import React from \"react\";\nimport {\n  AdminAuthenticatedRoute,\n  AuthenticatedRoute,\n  NotAuthenticatedRoute\n} from \"src/containers/Routes\";\n\nimport PageUserLogin from \"./User/Login\";\nimport PageUserPrivacyPolicy from \"./User/PrivacyPolicy\";\nimport PageUserRequestResendVerificationEmail from \"./User/RequestResendVerificationEmail\";\nimport PageUserRequestResetPassword from \"./User/RequestResetPassword\";\nimport PageUserResetPassword from \"./User/ResetPassword\";\nimport PageUserSearch from \"./User/Search\";\nimport PageUserSignup from \"./User/Signup\";\nimport PageUserVerifyEmail from \"./User/VerifyEmail\";\nimport PageUserVerifyKey from \"./User/VerifyKey\";\n\nconst commonRoutes = [\n  <NotAuthenticatedRoute\n    path=\"/user/login\"\n    title=\"Login\"\n    key=\"user-login-route\"\n    exact\n    component={PageUserLogin}\n  />,\n  <NotAuthenticatedRoute\n    path=\"/user/signup\"\n    title=\"Sign Up\"\n    key=\"sign-up-route\"\n    exact\n    component={PageUserSignup}\n  />,\n  <NotAuthenticatedRoute\n    path=\"/user/request-reset-password\"\n    title=\"Reset Password\"\n    exact\n    key=\"request-reset-password-route\"\n    component={PageUserRequestResetPassword}\n  />,\n  <NotAuthenticatedRoute\n    path=\"/user/password/reset\"\n    exact\n    key=\"reset-password-route\"\n    component={PageUserResetPassword}\n  />,\n  <AuthenticatedRoute\n    path=\"/user/key/verify\"\n    exact\n    key=\"user-key-verify-route\"\n    component={PageUserVerifyKey}\n  />,\n  <NotAuthenticatedRoute\n    path=\"/user/resend-verification-email\"\n    title=\"Verification Email\"\n    exact\n    key=\"resend-verification-email-route\"\n    component={PageUserRequestResendVerificationEmail}\n  />,\n  <NotAuthenticatedRoute\n    path=\"/user/privacy-policy\"\n    title=\"Privacy Policy\"\n    exact\n    key=\"privacy-policy-route\"\n    component={PageUserPrivacyPolicy}\n  />,\n  <NotAuthenticatedRoute\n    path=\"/user/verify\"\n    exact\n    key=\"user-verify-route\"\n    component={PageUserVerifyEmail}\n  />,\n  <AdminAuthenticatedRoute\n    path=\"/user/search\"\n    title=\"Search User\"\n    exact\n    key=\"search-user-route\"\n    component={PageUserSearch}\n  />\n  // user detail page was removed because cms requires\n  // authentication to fetch users info\n];\n\nexport default commonRoutes;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport SingleContentPage from \"src/components/layout/SingleContentPage\";\nimport { H1, Button } from \"pi-ui\";\nimport notFoundImage from \"./notFound.svg\";\nimport styles from \"./NotFound.module.css\";\n\nconst PageNotFound = ({ history }) => {\n  const goToHomePage = () => history.push(\"/\");\n  return (\n    <SingleContentPage noCardWrap>\n      <div className={styles.contentWrapper}>\n        <H1>Page not found</H1>\n        <img\n          alt=\"Not Found\"\n          className={styles.notFoundImg}\n          src={notFoundImage}\n        />\n        <Button className={styles.returnHomeBtn} onClick={goToHomePage}>\n          Return home\n        </Button>\n      </div>\n    </SingleContentPage>\n  );\n};\n\nexport default withRouter(PageNotFound);\n","import * as Yup from \"yup\";\nimport { minLengthMessage } from \"src/utils/validation\";\n\nconst TOKEN_MIN_LENGTH = 64;\n\nconst validationSchema = Yup.object().shape({\n  search: Yup.string()\n    .min(TOKEN_MIN_LENGTH, minLengthMessage(\"Ticket token\", TOKEN_MIN_LENGTH))\n    .required(\"Required\")\n});\n\nexport default validationSchema;\n","import React, { useState, useEffect } from \"react\";\nimport { Modal, BoxTextInput, Spinner, Message, Table } from \"pi-ui\";\nimport { Formik } from \"formik\";\nimport { useSearchVotes } from \"./hooks\";\nimport styles from \"./ModalSearchVotes.module.css\";\nimport validationSchema from \"./validation\";\n\nfunction findTicket(ticketToken, votes) {\n  return votes.find((v) => v && v.ticket === ticketToken);\n}\n\nconst ModalSearchVotes = ({ show, onClose, proposal }) => {\n  const [ticketFound, setTicketFound] = useState(null);\n  const {\n    votes,\n    loading,\n    error: apiError\n  } = useSearchVotes(proposal.censorshiprecord.token, show);\n  function updateFoundTicket(ticket) {\n    setTicketFound({\n      Ticket: ticket.ticket,\n      Option: ticket.votebit === \"2\" ? \"Yes\" : \"No\"\n    });\n  }\n  function handleSubmit(values, { resetForm, setSubmitting, setFieldError }) {\n    const foundTicket = findTicket(values.search, votes);\n    setTicketFound(null);\n    if (!foundTicket) {\n      setFieldError(\"global\", \"Ticket not found\");\n      setSubmitting(false);\n      return;\n    }\n    resetForm();\n    updateFoundTicket(foundTicket);\n  }\n  useEffect(\n    function clearState() {\n      setTicketFound(null);\n    },\n    [show]\n  );\n\n  const resultsTableHeaders = [\"Ticket\", \"Option\"];\n  return (\n    <Modal\n      show={show}\n      onClose={onClose}\n      title={`Search votes - ${proposal.name}`}\n      className={styles.searchVotesModal}\n    >\n      <Formik\n        initialValues={{\n          search: \"\"\n        }}\n        onSubmit={handleSubmit}\n        validationSchema={validationSchema}\n      >\n        {(props) => {\n          const {\n            values,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            touched,\n            errors\n          } = props;\n          const globalError = (errors && errors.global) || apiError;\n          return (\n            <div className={styles.contentWrapper}>\n              {globalError && (\n                <Message kind=\"error\">{globalError.toString()}</Message>\n              )}\n              {loading ? (\n                <div className={styles.loadingWrapper}>\n                  <Spinner invert />\n                  <span>Fetching proposal votes...</span>\n                </div>\n              ) : (\n                <BoxTextInput\n                  searchInput={true}\n                  name=\"search\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  value={values.search}\n                  placeholder=\"Search vote by Ticket Token\"\n                  onSubmit={handleSubmit}\n                  error={touched.search && errors.search}\n                />\n              )}\n            </div>\n          );\n        }}\n      </Formik>\n      {ticketFound && (\n        <>\n          <Table\n            data={[ticketFound]}\n            headers={resultsTableHeaders}\n            disablePagination\n          />\n        </>\n      )}\n    </Modal>\n  );\n};\n\nexport default ModalSearchVotes;\n","import { useEffect, useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\n\nexport const useSearchVotes = (proposalToken, modalOpen) => {\n  const loading = useSelector(sel.isApiRequestingPropVoteResults);\n  const error = useSelector(sel.propVoteResultsError);\n  const onFetchProposalVoteResults = useAction(act.onFetchProposalVoteResults);\n  const proposalVoteResultsSelector = useMemo(\n    () => sel.makeGetProposalVoteResults(proposalToken),\n    [proposalToken]\n  );\n  const proposalVoteResults = useSelector(proposalVoteResultsSelector);\n\n  useEffect(\n    function fetchVotes() {\n      if (modalOpen) {\n        onFetchProposalVoteResults(proposalToken);\n      }\n    },\n    [proposalToken, modalOpen, onFetchProposalVoteResults]\n  );\n\n  return {\n    votes: proposalVoteResults ? proposalVoteResults.castvotes : [],\n    loading,\n    error\n  };\n};\n","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport distance from \"date-fns/distance_in_words\";\nimport { Tooltip, classNames, useTheme, DEFAULT_DARK_THEME_NAME } from \"pi-ui\";\nimport styles from \"./DateTooltip.module.css\";\nimport { formatUnixTimestamp } from \"src/utils\";\n\nconst getTimeAgo = (timestamp) =>\n  distance(new Date(), new Date(timestamp * 1000), { addSuffix: true });\n\nconst DateTooltip = ({\n  timestamp,\n  placement,\n  className,\n  additionInfo,\n  children\n}) => {\n  const timeAgo = useMemo(() => getTimeAgo(timestamp), [timestamp]);\n\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n\n  return (\n    <Tooltip\n      className={classNames(\n        className,\n        styles.dateTooltip,\n        isDarkTheme && styles.darkDateTooltip\n      )}\n      content={\n        <>\n          {formatUnixTimestamp(timestamp)}\n          {additionInfo && <p>{additionInfo}</p>}\n        </>\n      }\n      placement={placement}\n    >\n      {children({ timeAgo })}\n    </Tooltip>\n  );\n};\n\nDateTooltip.propTypes = {\n  timestamp: PropTypes.number.isRequired,\n  placement: PropTypes.string,\n  className: PropTypes.string\n};\n\nexport default DateTooltip;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport fileDownload from \"js-file-download\";\nimport { Link, Spinner } from \"pi-ui\";\n\nconst isPromise = (obj) => obj && typeof obj.then === \"function\";\n\nconst validateBeforeDownloadProp = function (props, beforeDownload) {\n  if (\n    props[\"isAsync\"] === true &&\n    props[beforeDownload] === undefined &&\n    !isPromise(props[beforeDownload])\n  ) {\n    throw new Error(\"beforeDownload prop must be a Promise\");\n  }\n};\n\nconst DownloadJSON = ({\n  content,\n  fileName,\n  label,\n  customComponent,\n  isAsync,\n  beforeDownload,\n  ...props\n}) => {\n  const [asyncLoading, setAsyncLoading] = useState(false);\n  function onDownload() {\n    const data = JSON.stringify(content, null, 2);\n    fileDownload(data, `${fileName}.json`);\n  }\n\n  function handleDownload() {\n    setAsyncLoading(true);\n    beforeDownload().then((response) => {\n      setAsyncLoading(false);\n      const data = JSON.stringify(response, null, 2);\n      fileDownload(data, `${fileName}.json`);\n    });\n  }\n\n  return customComponent ? (\n    customComponent({ onDownload })\n  ) : (\n    <Link\n      {...props}\n      customComponent={(props) =>\n        isAsync && asyncLoading ? (\n          <Spinner invert />\n        ) : (\n          <span\n            style={{ cursor: \"pointer\" }}\n            {...props}\n            onClick={!isAsync ? onDownload : handleDownload}\n          >\n            {label}\n          </span>\n        )\n      }\n    />\n  );\n};\n\nDownloadJSON.propTypes = {\n  content: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  beforeDownload: validateBeforeDownloadProp\n};\n\nexport default DownloadJSON;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { classNames } from \"pi-ui\";\nimport styles from \"./Join.module.css\";\n\nconst DefaultSeparator = () => (\n  <span className=\"text-secondary-color margin-left-s margin-right-s\">•</span>\n);\n\nexport const Join = ({ children, SeparatorComponent, className }) => {\n  const childrenArray = React.Children.toArray(children).filter((c) => !!c);\n  return (\n    <div className={classNames(styles.join, className)}>\n      {childrenArray.map((child, idx) => (\n        <React.Fragment key={`join-${idx}`}>\n          {React.cloneElement(child)}\n          {childrenArray[idx + 1] ? <SeparatorComponent /> : \"\"}\n        </React.Fragment>\n      ))}\n    </div>\n  );\n};\n\nJoin.propType = {\n  children: PropTypes.node,\n  SeparatorComponent: PropTypes.node\n};\n\nJoin.defaultProps = {\n  SeparatorComponent: DefaultSeparator\n};\n\nexport default Join;\n","import React, { useState } from \"react\";\nimport { Tooltip, useTheme, classNames, DEFAULT_DARK_THEME_NAME } from \"pi-ui\";\nimport styles from \"./CopyToClipboard.module.css\";\n\nconst copyToClipboard = (str) => {\n  const el = document.createElement(\"textarea\");\n  el.value = str;\n  document.body.appendChild(el);\n  el.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(el);\n};\n\nconst CopyToClipboard = ({ children, value, tooltipText, className }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n\n  const [feedbackActive, setFeedbackActive] = useState(false);\n  const onCopyToClipboard = () => {\n    copyToClipboard(value);\n    setFeedbackActive(true);\n    setTimeout(() => {\n      setFeedbackActive(false);\n    }, 600);\n  };\n  return (\n    <Tooltip\n      className={classNames(\n        styles.copyTooltip,\n        isDarkTheme && styles.darkCopyTooltip,\n        className\n      )}\n      placement=\"bottom\"\n      content={feedbackActive ? \"Copied!\" : tooltipText}\n    >\n      {children({ onCopyToClipboard })}\n    </Tooltip>\n  );\n};\n\nexport default CopyToClipboard;\n","import React from \"react\";\nimport { ButtonIcon } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport CopyToClipboard from \"src/components/CopyToClipboard\";\n\nconst CopyLink = ({ url, className }) => {\n  return (\n    <CopyToClipboard value={url} tooltipText=\"Copy link\" className={className}>\n      {({ onCopyToClipboard }) => (\n        <ButtonIcon type=\"link\" onClick={onCopyToClipboard} />\n      )}\n    </CopyToClipboard>\n  );\n};\n\nCopyLink.propTypes = {\n  url: PropTypes.string\n};\n\nexport default CopyLink;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./RecordWrapper.module.css\";\nimport DateTooltip from \"../DateTooltip\";\nimport DownloadJSON from \"../DownloadJSON\";\nimport {\n  Card,\n  H2,\n  Link as UILink,\n  Icon,\n  Text,\n  classNames,\n  useTheme,\n  Tooltip,\n  CopyableText,\n  useMediaQuery,\n  DEFAULT_DARK_THEME_NAME,\n  Dropdown,\n  ButtonIcon,\n  DropdownItem\n} from \"pi-ui\";\nimport { Row } from \"../layout\";\nimport Link from \"../Link\";\nimport { useLoader } from \"src/containers/Loader\";\nimport Join from \"../Join\";\nimport CopyLink from \"../CopyLink\";\nimport rfpTag from \"src/assets/images/rfp-tag.svg\";\nimport useTimestamps from \"src/hooks/api/useTimestamps\";\nimport { formatUnixTimestampToObj } from \"src/utils\";\nimport { formatDateToInternationalString } from \"src/helpers\";\n\nexport const Author = ({ username, url }) => <Link to={url}>{username}</Link>;\n\nexport const Event = ({ event, timestamp, className, size, additionInfo }) => (\n  <DateTooltip\n    timestamp={timestamp}\n    placement=\"bottom\"\n    additionInfo={additionInfo}\n  >\n    {({ timeAgo }) => (\n      <Text\n        id={`event-${event}-${timestamp}`}\n        className={classNames(styles.eventTooltip, className)}\n        truncate\n        size={size}\n      >\n        {`${event} ${timeAgo}`}\n      </Text>\n    )}\n  </DateTooltip>\n);\n\nexport const RecordToken = ({ token, isCopyable }) => {\n  const shouldPlaceTooltipLeft = useMediaQuery(\"(max-width: 560px)\");\n  return (\n    <div className={styles.recordToken}>\n      {isCopyable && (\n        <CopyableText\n          id={`proposal-token-${token}`}\n          data-testid=\"record-token\"\n          truncate\n          tooltipPlacement={shouldPlaceTooltipLeft ? \"left\" : \"bottom\"}\n        >\n          {token}\n        </CopyableText>\n      )}\n      {!isCopyable && (\n        <>\n          <Icon type=\"sign\" className=\"margin-right-xs\" />\n          <Text id={`proposal-token-${token}`} truncate>\n            {token}\n          </Text>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport const Title = ({ children, url, ...props }) => {\n  const SimpleWrapper = (props) => <div {...props} />;\n  const Wrapper = url ? Link : SimpleWrapper;\n  return (\n    <Wrapper\n      to={url}\n      className={classNames(styles.baseTitle, url && styles.underlineTitle)}\n    >\n      <H2 {...props} data-testid=\"record-title\">\n        {children}\n      </H2>\n    </Wrapper>\n  );\n};\n\nexport const Subtitle = ({ children, separatorSymbol = \"•\" }) => (\n  <Join\n    className={classNames(\"margin-top-s\", styles.subtitleWrapper)}\n    SeparatorComponent={() => (\n      <span className={styles.subtitleSeparator}>{separatorSymbol}</span>\n    )}\n  >\n    {children}\n  </Join>\n);\n\nexport const JoinTitle = ({ children, className, separatorSymbol = \"•\" }) => (\n  <Join\n    className={classNames(className, styles.flexWrap)}\n    SeparatorComponent={() => (\n      <span className={styles.subtitleSeparator}>{separatorSymbol}</span>\n    )}\n  >\n    {children}\n  </Join>\n);\n\nexport const Edit = ({ url, tabIndex, disabled }) => (\n  <Link\n    to={url || \"\"}\n    tabIndex={tabIndex}\n    data-testid=\"record-edit-button\"\n    className={styles.editButton}\n  >\n    <ButtonIcon type=\"edit\" disabled={disabled} />\n  </Link>\n);\n\nexport const Status = ({ children, disableMobileView, className }) => (\n  <div\n    className={classNames(\n      styles.status,\n      disableMobileView && styles.disableMobileView,\n      className\n    )}\n  >\n    {children}\n  </div>\n);\n\nconst MobileHeader = ({ title, status, edit, isRfp }) => (\n  <div className={styles.titleWrapper}>\n    <div className={styles.titleEditWrapper}>\n      {isRfp && <RfpTag className={styles.mobileRfpTag} />}\n      {title}\n    </div>\n    <div className={styles.titleStatusWrapper}>\n      {status}\n      {edit}\n    </div>\n  </div>\n);\n\nexport const RfpTag = React.memo(({ className }) => (\n  <img\n    alt=\"rfp\"\n    className={classNames(\"margin-right-s\", styles.rfptag, className)}\n    src={rfpTag}\n  />\n));\n\nexport const Header = React.memo(function Header({\n  title,\n  subtitle,\n  status,\n  edit,\n  mobile,\n  disableMobileView = false,\n  isRfp,\n  isRfpSubmission,\n  rfpProposalLink\n}) {\n  return (\n    <div className={styles.header} data-testid=\"record-header\">\n      {!mobile || disableMobileView ? (\n        <div className={styles.titleWrapper}>\n          <div\n            className={classNames(\n              styles.titleEditWrapper,\n              isRfp && styles.rfpTitleWrapper\n            )}\n          >\n            {isRfp && <RfpTag />}\n            {title}\n            {edit}\n          </div>\n          <div className={styles.titleStatusWrapper}>{status}</div>\n        </div>\n      ) : (\n        <MobileHeader title={title} isRfp={isRfp} status={status} edit={edit} />\n      )}\n      {isRfpSubmission && rfpProposalLink}\n      {subtitle}\n    </div>\n  );\n});\n\nexport const ChartsLink = ({ token, legacytoken }) => {\n  const { apiInfo } = useLoader();\n  const { themeName } = useTheme();\n  const hostName = apiInfo.testnet\n    ? \"testnet.decred.org\"\n    : \"dcrdata.decred.org\";\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n\n  return (\n    <Tooltip\n      className={classNames(\n        styles.actionsTooltip,\n        isDarkTheme && styles.darkActionsTooltip\n      )}\n      placement=\"bottom\"\n      content=\"Voting Charts\"\n    >\n      <UILink\n        target=\"_blank\"\n        rel=\"nofollow noopener noreferrer\"\n        href={`https://${hostName}/proposal/${legacytoken || token}`}\n      >\n        <ButtonIcon type=\"chart\" />\n      </UILink>\n    </Tooltip>\n  );\n};\n\nexport const SearchVotes = ({ onClick }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <Tooltip\n      className={classNames(\n        styles.actionsTooltip,\n        isDarkTheme && styles.darkActionsTooltip\n      )}\n      placement=\"bottom\"\n      content={\"Search for proposals votes\"}\n    >\n      <ButtonIcon type=\"search\" onClick={onClick} />\n    </Tooltip>\n  );\n};\n\nexport const MarkdownLink = ({ to, active = false, onClick }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <Tooltip\n      className={classNames(\n        styles.actionsTooltip,\n        isDarkTheme && styles.darkActionsTooltip\n      )}\n      placement=\"bottom\"\n      content={active ? \"See rendered markdown\" : \"See raw markdown\"}\n    >\n      <UILink\n        target=\"_blank\"\n        rel=\"nofollow noopener noreferrer\"\n        href={to}\n        onClick={onClick}\n      >\n        <ButtonIcon type=\"markdown\" viewBox=\"0 0 208 128\" />\n      </UILink>\n    </Tooltip>\n  );\n};\n\nexport const CommentsLink = ({\n  numOfComments,\n  url,\n  showIcon = true,\n  className\n}) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <Link\n      to={url}\n      gray={!isDarkTheme}\n      dark={isDarkTheme}\n      className={classNames(styles.commentsLink, className)}\n    >\n      {showIcon && <Icon type=\"discuss\" className=\"margin-right-s\" />}\n      <span\n        className={classNames(\n          styles.commentsNumber,\n          isDarkTheme && styles.darkCommentsNumber\n        )}\n      >\n        {numOfComments}\n      </span>\n      Comments\n    </Link>\n  );\n};\n\nexport const RfpProposalLink = ({ url, rfpTitle }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <div className={styles.rfpLink}>\n      <span\n        className={classNames(\n          !isDarkTheme && styles.proposedFor,\n          isDarkTheme && styles.darkProposedFor\n        )}\n      >\n        Proposed for{\" \"}\n      </span>\n      <Link to={url}>{rfpTitle}</Link>\n    </div>\n  );\n};\n\nexport const DownloadRecord = ({\n  content,\n  fileName,\n  label,\n  serverpublickey\n}) => {\n  const bundle = {\n    record: {\n      state: content.state,\n      status: content.status,\n      version: content.version,\n      timestamp: content.timestamp,\n      username: content.username,\n      metadata: content.metadata,\n      files: content.files,\n      censorshiprecord: content.censorshiprecord\n    },\n    serverpublickey\n  };\n  return <DownloadJSON fileName={fileName} label={label} content={bundle} />;\n};\n\nexport const DownloadTimestamps = ({ token, version, label }) => {\n  const { onFetchRecordTimestamps } = useTimestamps();\n  return (\n    <DownloadJSON\n      label={label}\n      fileName={`${token}-v${version}-timestamps`}\n      isAsync={true}\n      content={[]}\n      beforeDownload={() => onFetchRecordTimestamps(token, version)}\n    />\n  );\n};\n\nexport const DownloadVotes = ({ label, fileName, serverpublickey, token }) => {\n  const { onFetchVotesBundle } = useTimestamps();\n  return (\n    <DownloadJSON\n      label={label}\n      fileName={fileName}\n      isAsync={true}\n      content={[]}\n      beforeDownload={() => onFetchVotesBundle(token, serverpublickey)}\n    />\n  );\n};\n\nexport const LinkSection = ({ children, className, title }) => (\n  <Dropdown\n    className={className}\n    title={title}\n    closeOnItemClick={false}\n    data-testid=\"record-links\"\n  >\n    {React.Children.toArray(children).map((link, i) => (\n      <DropdownItem key={i}>{link}</DropdownItem>\n    ))}\n  </Dropdown>\n);\n\nconst MetadataLabel = ({ label }) => (\n  <div className={styles.metadataLabel}>{label}:</div>\n);\n\nconst MetadataValue = ({ value }) => (\n  <div className=\"margin-left-s\">{value}</div>\n);\n\nexport const Metadata = ({ amount, domain, startDate, endDate, isRFP }) => {\n  const startDateView = formatDateToInternationalString(\n    (startDate && formatUnixTimestampToObj(startDate)) || {}\n  );\n  const endDateView = formatDateToInternationalString(\n    (endDate && formatUnixTimestampToObj(endDate)) || {}\n  );\n\n  const metadataAvailable = !!amount || !!domain || !!startDate || !!endDate;\n\n  return (\n    metadataAvailable && (\n      <div className=\"flex-column\" data-testid=\"record-metadata\">\n        <Row>\n          <MetadataLabel label=\"Domain\" />\n          <MetadataValue value={domain} />\n        </Row>\n        {!isRFP && (\n          <>\n            <Row>\n              <MetadataLabel label=\"Amount\" />\n              <MetadataValue value={amount} />\n            </Row>\n            <Row>\n              <MetadataLabel label=\"Start Date\" />\n              <MetadataValue value={startDateView} />\n            </Row>\n            <Row>\n              <MetadataLabel label=\"End Date\" />\n              <MetadataValue value={endDateView} />\n            </Row>\n          </>\n        )}\n      </div>\n    )\n  );\n};\n\nconst RecordWrapper = ({ children, className }) => (\n  <Card className={classNames(\"container margin-bottom-m\", className)}>\n    {children({\n      Author,\n      Event,\n      Row,\n      Title,\n      RfpProposalLink,\n      CommentsLink,\n      Link,\n      ChartsLink,\n      SearchVotes,\n      MarkdownLink,\n      CopyLink,\n      DownloadRecord,\n      DownloadTimestamps,\n      DownloadVotes,\n      LinkSection,\n      Header,\n      Subtitle,\n      Edit,\n      Status,\n      RecordToken,\n      Metadata\n    })}\n  </Card>\n);\n\nRecordWrapper.propTypes = {\n  children: PropTypes.func.isRequired,\n  className: PropTypes.string\n};\n\nAuthor.propTypes = {\n  username: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired\n};\n\nEvent.propTypes = {\n  event: PropTypes.string,\n  timestamp: PropTypes.number,\n  show: PropTypes.bool\n};\n\nEvent.defaultProps = {\n  show: true\n};\n\nRecordToken.propTypes = {\n  token: PropTypes.string.isRequired,\n  isCopyable: PropTypes.bool\n};\nRecordToken.defaultProps = {\n  isCopyable: false\n};\n\nexport default RecordWrapper;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { classNames, Icon } from \"pi-ui\";\nimport styles from \"./IconButton.module.css\";\n\nconst IconButton = React.forwardRef(({ onClick, className, ...props }, ref) => {\n  return (\n    <button\n      ref={ref}\n      onClick={onClick}\n      className={classNames(styles.iconButton, className)}\n    >\n      <Icon {...props} />\n    </button>\n  );\n});\n\nIconButton.propTypes = {\n  onClick: PropTypes.func,\n  className: PropTypes.string\n};\n\nexport default IconButton;\n","import {\n  PROPOSAL_SUMMARY_STATUS_UNVETTED,\n  PROPOSAL_SUMMARY_STATUS_UNVETTED_ABANDONED,\n  PROPOSAL_SUMMARY_STATUS_ABANDONED,\n  PROPOSAL_SUMMARY_STATUS_UNVETTED_CENSORED,\n  PROPOSAL_SUMMARY_STATUS_CENSORED,\n  PROPOSAL_SUMMARY_STATUS_VOTE_STARTED,\n  PROPOSAL_SUMMARY_STATUS_UNDER_REVIEW,\n  PROPOSAL_SUMMARY_STATUS_VOTE_AUTHORIZED,\n  PROPOSAL_SUMMARY_STATUS_REJECTED,\n  PROPOSAL_SUMMARY_STATUS_ACTIVE,\n  PROPOSAL_SUMMARY_STATUS_CLOSED,\n  PROPOSAL_SUMMARY_STATUS_APPROVED,\n  PROPOSAL_SUMMARY_STATUS_COMPLETED\n} from \"src/constants\";\n\n/**\n * Converts the api data for vote status into an array of data\n * that can be used to render the StatusBar\n * @param {Object} voteSummary\n * @returns {Array} status bar data\n */\nexport const getStatusBarData = (voteSummary) =>\n  voteSummary.results\n    .map((op) => ({\n      label: op.id,\n      amount: op.votes,\n      color: op.id === \"yes\" ? \"#41BE53\" : \"#ED6D47\"\n    }))\n    .sort((a) => (a.label === \"yes\" ? -1 : 1));\n\nexport const getProposalStatusTagProps = (\n  proposal,\n  proposalSummary,\n  isDarkTheme\n) => {\n  const isRfpSubmission = !!proposal.linkto;\n  if (proposalSummary) {\n    switch (proposalSummary.status) {\n      case PROPOSAL_SUMMARY_STATUS_UNVETTED:\n        return {\n          type: \"yellowTime\",\n          text: \"Unvetted\"\n        };\n      case PROPOSAL_SUMMARY_STATUS_UNVETTED_ABANDONED:\n      case PROPOSAL_SUMMARY_STATUS_ABANDONED:\n        return {\n          type: isDarkTheme ? \"blueNegative\" : \"grayNegative\",\n          text: \"Abandoned\"\n        };\n\n      case PROPOSAL_SUMMARY_STATUS_UNVETTED_CENSORED:\n      case PROPOSAL_SUMMARY_STATUS_CENSORED:\n        return {\n          type: \"orangeNegativeCircled\",\n          text: \"Censored\"\n        };\n\n      case PROPOSAL_SUMMARY_STATUS_UNDER_REVIEW:\n        return {\n          type: isDarkTheme ? \"blueTime\" : \"blackTime\",\n          text: isRfpSubmission\n            ? \"Waiting for runoff vote to start\"\n            : \"Waiting for author to authorize voting\"\n        };\n\n      case PROPOSAL_SUMMARY_STATUS_VOTE_AUTHORIZED:\n        return {\n          type: \"yellowTime\",\n          text: \"Waiting for admin to start voting\"\n        };\n\n      case PROPOSAL_SUMMARY_STATUS_VOTE_STARTED:\n        return { type: \"bluePending\", text: \"Voting\" };\n\n      case PROPOSAL_SUMMARY_STATUS_REJECTED:\n        return {\n          type: \"orangeNegativeCircled\",\n          text: \"Rejected\"\n        };\n\n      case PROPOSAL_SUMMARY_STATUS_ACTIVE:\n        return { type: \"bluePending\", text: \"Active\" };\n\n      case PROPOSAL_SUMMARY_STATUS_CLOSED:\n        return { type: \"grayNegative\", text: \"Closed\" };\n\n      case PROPOSAL_SUMMARY_STATUS_COMPLETED:\n        return { type: \"greenCheck\", text: \"Completed\" };\n\n      case PROPOSAL_SUMMARY_STATUS_APPROVED:\n        return { type: \"greenCheck\", text: \"Approved\" };\n\n      default:\n        break;\n    }\n  }\n\n  return { type: \"grayNegative\", text: \"missing\" };\n};\n","import * as sel from \"src/selectors\";\nimport { useSelector } from \"src/redux\";\nimport { getVoteBlocksLeft, getVoteEndTimestamp } from \"../helpers\";\n\nexport default function useProposalVoteTimeInfo(voteSummary) {\n  const apiInfo = useSelector(sel.init);\n  const bestBlock = voteSummary ? voteSummary.bestblock : 0;\n  const voteEndTimestamp = getVoteEndTimestamp(\n    voteSummary,\n    bestBlock,\n    apiInfo.testnet\n  );\n  const voteBlocksLeft = getVoteBlocksLeft(voteSummary, bestBlock);\n\n  return {\n    voteBlocksLeft,\n    voteEndTimestamp\n  };\n}\n","import { useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport { useSelector } from \"src/redux\";\nimport { isVoteActiveProposal } from \"../helpers\";\nimport useProposalVoteTimeInfo from \"./useProposalVoteTimeInfo\";\n\nexport default function useProposalVote(token) {\n  const voteSummarySelector = useMemo(\n    () => sel.makeGetProposalVoteSummary(token),\n    [token]\n  );\n  const proposalSummarySelector = useMemo(\n    () => sel.makeGetProposalSummaryByToken(token),\n    [token]\n  );\n  const billingStatusChangeMetadataSelector = useMemo(\n    () => sel.makeGetBillingStatusChangeMetadata(token),\n    [token]\n  );\n  const billingStatusChangeMetadata = useSelector(\n    billingStatusChangeMetadataSelector\n  );\n  const voteSummary = useSelector(voteSummarySelector);\n  const proposalSummary = useSelector(proposalSummarySelector);\n  const voteActive = isVoteActiveProposal(voteSummary);\n  const { voteEndTimestamp, voteBlocksLeft } =\n    useProposalVoteTimeInfo(voteSummary);\n  return {\n    voteSummary,\n    proposalSummary,\n    billingStatusChangeMetadata,\n    voteBlocksLeft,\n    voteActive,\n    voteEndTimestamp\n  };\n}\n","import { useMemo } from \"react\";\nimport { useConfig } from \"src/containers/Config\";\nimport { getProposalUrl, getCommentsUrl, getAuthorUrl } from \"../helpers\";\nimport { PROPOSAL_STATE_VETTED } from \"src/constants\";\n\nexport default function useProposalURLs(\n  proposalToken,\n  userid,\n  isRfpSubmission,\n  linkto\n) {\n  const { javascriptEnabled } = useConfig();\n  const proposalURL = getProposalUrl(proposalToken, javascriptEnabled);\n  const commentsURL = useMemo(\n    () => getCommentsUrl(proposalToken, javascriptEnabled),\n    [javascriptEnabled, proposalToken]\n  );\n  const authorURL = useMemo(\n    () => getAuthorUrl(userid, javascriptEnabled),\n    [userid, javascriptEnabled]\n  );\n  const rfpProposalURL = useMemo(() => {\n    return (\n      isRfpSubmission &&\n      linkto &&\n      getProposalUrl(linkto, javascriptEnabled, PROPOSAL_STATE_VETTED)\n    );\n  }, [isRfpSubmission, javascriptEnabled, linkto]);\n\n  return {\n    proposalURL,\n    authorURL,\n    commentsURL,\n    rfpProposalURL\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  StatusBar,\n  StatusTag,\n  classNames,\n  Icon,\n  useMediaQuery,\n  useTheme,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport { Row } from \"../layout\";\nimport {\n  getQuorumInVotes,\n  goToFullProposal\n} from \"src/containers/Proposal/helpers\";\nimport {\n  getProposalStatusTagProps,\n  getStatusBarData\n} from \"../Proposal/helpers\";\nimport {\n  isVoteActiveProposal,\n  isPublicProposal,\n  isAbandonedProposal,\n  isVotingFinishedProposal\n} from \"src/containers/Proposal/helpers\";\nimport styles from \"./ProposalsList.module.css\";\nimport { Status, Event, CommentsLink } from \"../RecordWrapper\";\nimport Link from \"../Link\";\nimport { useProposalVoteTimeInfo } from \"src/containers/Proposal/hooks\";\nimport { useProposalURLs } from \"src/containers/Proposal/hooks\";\nimport { useRouter } from \"src/components/Router\";\n\nconst ProposalItem = ({\n  proposal,\n  proposal: { commentsCount, name, censorshiprecord },\n  voteSummary,\n  proposalSummary\n}) => {\n  const { history } = useRouter();\n  const isVoteActive = isVoteActiveProposal(voteSummary);\n  const hasvoteSummary = !!voteSummary && !!voteSummary.endblockheight;\n  const isAbandoned = isAbandonedProposal(proposalSummary);\n  const isPublic = isPublicProposal(proposal);\n  const isVotingFinished = isVotingFinishedProposal(voteSummary);\n  const proposalToken = censorshiprecord && censorshiprecord.token;\n  const { commentsURL, proposalURL } = useProposalURLs(\n    proposalToken,\n    proposal.userid,\n    !!proposal.linkto,\n    proposal.linkto,\n    proposal.state\n  );\n\n  const { voteEndTimestamp } = useProposalVoteTimeInfo(voteSummary);\n\n  const mdScreen = useMediaQuery(\"(max-width: 1024px)\");\n  const smallMobile = useMediaQuery(\"(max-width: 768px)\");\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n\n  return (\n    proposal &&\n    voteSummary && (\n      <Row\n        className={styles.itemWrapper}\n        justify=\"space-between\"\n        align={smallMobile ? \"flex-start\" : \"center\"}\n        onClick={goToFullProposal(history, proposalURL)}\n        noMargin\n      >\n        <div className={classNames(styles.itemTitle, \"flex-column\")}>\n          <Link dark to={proposalURL}>\n            {name}\n          </Link>\n          <CommentsLink\n            showIcon={false}\n            numOfComments={commentsCount}\n            url={commentsURL}\n            className={styles.commentsLink}\n          />\n        </div>\n        {hasvoteSummary && (\n          <Row\n            className={styles.statusBarWrapper}\n            justify=\"center\"\n            align=\"center\"\n            noMargin\n          >\n            <StatusBar\n              max={getQuorumInVotes(voteSummary)}\n              status={getStatusBarData(voteSummary)}\n              markerPosition={`${voteSummary.passpercentage}%`}\n              markerTooltipText={`${voteSummary.passpercentage}% Yes votes required for approval`}\n              markerTooltipClassName={styles.statusBarTooltip}\n            />\n          </Row>\n        )}\n        {(isVoteActive || isVotingFinished) && !mdScreen && (\n          <Row\n            className={styles.timeLeftPassed}\n            justify=\"center\"\n            align=\"center\"\n            noMargin\n          >\n            <Event\n              event={`vote end${isVoteActive ? \"s\" : \"ed\"}`}\n              timestamp={voteEndTimestamp}\n              className={styles.voteEvent}\n              size=\"small\"\n            />\n          </Row>\n        )}\n        {(isPublic || isAbandoned) && (\n          <Row\n            className={styles.statusWrapper}\n            justify=\"center\"\n            align=\"center\"\n            noMargin\n          >\n            <Status className={styles.status}>\n              <StatusTag\n                className={styles.statusTag}\n                {...getProposalStatusTagProps(\n                  proposal,\n                  proposalSummary,\n                  isDarkTheme\n                )}\n              />\n            </Status>\n            <div className=\"margin-left-s\">\n              <Icon\n                type=\"clickArrow\"\n                viewBox=\"0 0 5 10\"\n                width={5}\n                height={10}\n              />\n            </div>\n          </Row>\n        )}\n      </Row>\n    )\n  );\n};\n\nProposalItem.propTypes = {\n  proposal: PropTypes.object.isRequired,\n  voteSummary: PropTypes.object.isRequired\n};\n\nexport default ProposalItem;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst LoadingPlaceholders = ({ numberOfItems, placeholder }) => {\n  const Item = placeholder;\n  const placeholders = [];\n  for (let i = 0; i < numberOfItems; i++) {\n    placeholders.push(<Item key={`placeholder-${i}`} />);\n  }\n  return <>{placeholders}</>;\n};\n\nLoadingPlaceholders.propTypes = {\n  numberOfItems: PropTypes.number,\n  placeholder: PropTypes.oneOfType([PropTypes.func, PropTypes.node])\n};\n\nexport default LoadingPlaceholders;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Text, classNames, useTheme, getThemeProperty } from \"pi-ui\";\nimport styles from \"./ProposalsList.module.css\";\nimport { shortRecordToken } from \"src/helpers\";\nimport ProposalItem from \"./ProposalItem\";\nimport LoadingPlaceholders from \"src/components/LoadingPlaceholders\";\nimport ContentLoader from \"react-content-loader\";\n\nconst Placeholder = () => {\n  const { theme } = useTheme();\n  const primaryColor = getThemeProperty(theme, \"card-background\");\n  const secondaryColor = getThemeProperty(theme, \"dimmed-card-background\");\n  return (\n    <ContentLoader\n      height={220}\n      width={800}\n      speed={2}\n      primaryColor={primaryColor}\n      secondaryColor={secondaryColor}\n    >\n      <rect x=\"0\" y=\"30\" width=\"800\" height=\"200\" />\n    </ContentLoader>\n  );\n};\n\nconst ProposalsList = ({\n  data: { proposals, voteSummaries, proposalSummaries }\n}) => {\n  const hasSubmissions = proposals.length > 0;\n  return (\n    <div className=\"margin-top-l\">\n      <Text\n        className={classNames(styles.title, \"margin-bottom-m\")}\n        color=\"primaryDark\"\n        weight=\"semibold\"\n      >\n        Submitted Proposals\n      </Text>\n      {hasSubmissions ? (\n        proposals\n          .sort((a, b) => a.status - b.status)\n          .map((proposal, index) => (\n            <ProposalItem\n              key={index}\n              proposal={proposal}\n              voteSummary={\n                voteSummaries[\n                  shortRecordToken(proposals[index]?.censorshiprecord.token)\n                ]\n              }\n              proposalSummary={\n                proposalSummaries[\n                  shortRecordToken(proposals[index]?.censorshiprecord.token)\n                ]\n              }\n            />\n          ))\n      ) : (\n        <LoadingPlaceholders numberOfItems={1} placeholder={Placeholder} />\n      )}\n    </div>\n  );\n};\n\nProposalsList.propTypes = {\n  data: PropTypes.object.isRequired\n};\n\nexport default ProposalsList;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Text, classNames, Tooltip } from \"pi-ui\";\nimport styles from \"./Proposal.module.css\";\n\nconst VotesCount = ({\n  eligibleVotes,\n  quorumVotes,\n  quorumPercentage,\n  votesReceived\n}) => {\n  const votesLeft = quorumVotes - votesReceived;\n  return (\n    <div className={styles.voteCount}>\n      <div className={styles.quorumAndVotes}>\n        <div>\n          <Text\n            className={classNames(styles.votesLeft, styles.quorumReached)}\n            size=\"small\"\n          >\n            {votesLeft > 0 ? (\n              `${votesLeft} votes until quorum`\n            ) : (\n              <Tooltip\n                placement=\"bottom\"\n                content={`quorum of ${quorumPercentage}% (${quorumVotes} votes) has been reached!`}\n              >\n                quorum reached!\n              </Tooltip>\n            )}\n          </Text>\n        </div>\n        <div>\n          <Text className={styles.votesReceived} size=\"small\">\n            {votesReceived}\n          </Text>\n          <Text className={styles.votesQuorum} size=\"small\">\n            /{`${eligibleVotes} votes`}\n          </Text>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nVotesCount.propTypes = {\n  quorumVotes: PropTypes.number,\n  votesReceived: PropTypes.number,\n  onSearchVotes: PropTypes.func\n};\n\nexport default VotesCount;\n","import {\n  createContext,\n  useContext,\n  useMemo,\n  useState,\n  useEffect,\n  useCallback\n} from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport useTimestamps from \"src/hooks/api/useTimestamps\";\nimport take from \"lodash/fp/take\";\nimport takeRight from \"lodash/fp/takeRight\";\nimport useFetchMachine from \"src/hooks/utils/useFetchMachine\";\nimport fileDownload from \"js-file-download\";\nimport {\n  handleSaveCommentsTimetamps,\n  loadCommentsTimestamps\n} from \"src/lib/local_storage\";\n\nexport const CommentContext = createContext();\nexport const useComment = () => useContext(CommentContext);\n\nexport function useDownloadComments(token) {\n  const commentsSelector = useMemo(\n    () => sel.makeGetRecordComments(token),\n    [token]\n  );\n  const allCommentsBySection = useSelector(commentsSelector);\n  const comments =\n    allCommentsBySection && Object.values(allCommentsBySection).flat();\n  const { onFetchCommentsTimestamps } = useTimestamps();\n\n  return { comments, onFetchCommentsTimestamps };\n}\n\nexport function useDownloadCommentsTimestamps(recordToken, timestampsPageSize) {\n  const [timestamps, setTimestamps] = useState(null);\n  const [remaining, setRemaining] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const commentsSelector = useMemo(\n    () => sel.makeGetRecordComments(recordToken),\n    [recordToken]\n  );\n  const allCommentsBySection = useSelector(commentsSelector);\n  const comments = useMemo(\n    () => Object.values(allCommentsBySection).flat(),\n    [allCommentsBySection]\n  );\n  const commentsLength = comments?.length || 0;\n  const multiPage = commentsLength > timestampsPageSize;\n  const onFetchCommentsTimestamps = useAction(act.onFetchCommentsTimestamps);\n\n  useEffect(() => {\n    const ids = comments && comments.map((c) => c.commentid);\n    setRemaining(ids);\n  }, [comments]);\n\n  const getCommentIdsForPagination = (commentIds) => [\n    take(timestampsPageSize)(commentIds),\n    takeRight(commentIds.length - timestampsPageSize)(commentIds)\n  ];\n\n  const getProgressPercentage = useCallback(\n    (timestamps) =>\n      timestamps\n        ? ((Object.keys(timestamps).length * 100) / commentsLength).toFixed(0)\n        : 0,\n    [commentsLength]\n  );\n\n  const makeTimestampsBundle = (timestamps) =>\n    JSON.stringify(\n      {\n        comments: timestamps.comments\n      },\n      null,\n      2\n    );\n\n  useEffect(() => {\n    setProgress(getProgressPercentage(timestamps?.comments));\n  }, [getProgressPercentage, timestamps]);\n\n  const [state, send, { START, VERIFY, FETCH, RESOLVE, REJECT }] =\n    useFetchMachine({\n      actions: {\n        initial: () => {\n          const ts = loadCommentsTimestamps(recordToken);\n          const loaded =\n            ts && Object.keys(ts.comments).length === commentsLength;\n          if (loaded) {\n            return send(RESOLVE, { timestamps: ts });\n          }\n          if (recordToken && !timestamps) {\n            return send(START);\n          }\n          return;\n        },\n        start: () => {\n          // fetch first page of comments timestamps\n          const [fetch, next] = getCommentIdsForPagination(remaining || []);\n          onFetchCommentsTimestamps(recordToken, fetch)\n            .then(({ comments }) => {\n              setTimestamps({ comments });\n              setRemaining(next);\n              return send(VERIFY);\n            })\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        },\n        verify: () => {\n          if (remaining.length === 0) {\n            // all timestamps loaded, resolve\n            handleSaveCommentsTimetamps(recordToken, timestamps);\n            setProgress(100);\n            fileDownload(\n              makeTimestampsBundle(timestamps),\n              `${recordToken}-comments-timestamps.json`\n            );\n            return send(RESOLVE, { timestamps });\n          } else {\n            // fetch remaining timestamps\n            const [fetch, next] = getCommentIdsForPagination(remaining);\n            onFetchCommentsTimestamps(recordToken, fetch)\n              .then((resp) => {\n                setTimestamps({\n                  comments: {\n                    ...timestamps.comments,\n                    ...resp.comments\n                  }\n                });\n                setRemaining(next);\n                return send(VERIFY);\n              })\n              .catch((e) => send(REJECT, e));\n            return send(FETCH);\n          }\n        }\n      },\n      initialValues: {\n        status: \"idle\",\n        loading: false,\n        timestamps: null,\n        progress: 0\n      }\n    });\n\n  return {\n    loading: state.loading || state.verifying,\n    error: state.error,\n    progress: progress,\n    timestamps: {\n      comments: state.timestamps?.comments\n    },\n    multiPage: multiPage\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DownloadJSON from \"src/components/DownloadJSON\";\nimport { useDownloadComments } from \"./hooks\";\nimport { useLoader } from \"src/containers/Loader\";\n\nconst DownloadComments = ({ recordToken, className, label }) => {\n  const { comments } = useDownloadComments(recordToken);\n  const { apiInfo } = useLoader();\n\n  return !!comments && !!comments.length ? (\n    <DownloadJSON\n      label={label}\n      fileName={`${recordToken}-comments`}\n      content={{\n        comments: comments.sort((a, b) => a.commentid - b.commentid),\n        serverpublickey: apiInfo.pubkey\n      }}\n      className={className}\n    />\n  ) : null;\n};\n\nDownloadComments.propTypes = {\n  recordToken: PropTypes.string,\n  className: PropTypes.string,\n  isTimestamp: PropTypes.bool\n};\nDownloadComments.defaultProps = {\n  isTimestamp: false,\n  state: 0,\n  label: \"Download Comments Bundle\"\n};\n\nexport default DownloadComments;\n","import React, { useState } from \"react\";\nimport DownloadJSON from \"src/components/DownloadJSON\";\nimport { useDownloadCommentsTimestamps } from \"./hooks\";\nimport { Spinner, Link } from \"pi-ui\";\nimport { loadCommentsTimestamps } from \"src/lib/local_storage\";\nimport { usePolicy } from \"src/hooks\";\n\nconst DownloadCommentsTimestampsWrapper = ({\n  label,\n  recordToken,\n  commentsCount\n}) => {\n  const [start, setStart] = useState(false);\n\n  const ts = loadCommentsTimestamps(recordToken);\n  const hasLoadedTimestamps =\n    ts && Object.keys(ts.comments).length === commentsCount;\n\n  return start || hasLoadedTimestamps ? (\n    <DownloadCommentsTimestamps recordToken={recordToken} />\n  ) : (\n    <Link onClick={() => setStart(true)}>{label}</Link>\n  );\n};\n\nconst DownloadCommentsTimestamps = ({ recordToken }) => {\n  const {\n    policyComments: { timestampspagesize: timestampsPageSize }\n  } = usePolicy();\n  const { loading, progress, timestamps, multiPage } =\n    useDownloadCommentsTimestamps(recordToken, timestampsPageSize);\n\n  return loading ? (\n    <>\n      {multiPage && <span style={{ marginRight: 10 }}>{progress}%</span>}\n      <Spinner invert />\n    </>\n  ) : timestamps ? (\n    <DownloadJSON\n      label={\"Comments Timestamps\"}\n      fileName={`${recordToken}-comments-timestamps`}\n      content={timestamps}\n    />\n  ) : null;\n};\n\nexport default DownloadCommentsTimestampsWrapper;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DownloadJSON from \"src/components/DownloadJSON\";\nimport { useDownloadVoteTimestamps } from \"./hooks\";\nimport { Spinner, Link } from \"pi-ui\";\nimport { loadVotesTimestamps } from \"src/lib/local_storage\";\nimport { usePolicy } from \"src/hooks\";\n\nconst DownloadVotesTimestampsWrapper = ({ label, recordToken, votesCount }) => {\n  const [start, setStart] = useState(false);\n\n  const ts = loadVotesTimestamps(recordToken);\n  const hasProofs = ts?.votes?.reduce(\n    (acc, v) => acc && v.proofs.length > 0,\n    true\n  );\n  const hasLoadedTimestamps = ts?.votes?.length === votesCount && hasProofs;\n\n  return start || hasLoadedTimestamps ? (\n    <DownloadVotesTimestamps\n      recordToken={recordToken}\n      votesCount={votesCount}\n    />\n  ) : (\n    <Link onClick={() => setStart(true)}>{label}</Link>\n  );\n};\n\nconst DownloadVotesTimestamps = ({ recordToken, votesCount }) => {\n  const {\n    policyTicketVote: { timestampspagesize: timestampsPageSize }\n  } = usePolicy();\n  const { timestamps, progress, loading, error, multiPage } =\n    useDownloadVoteTimestamps(recordToken, votesCount, timestampsPageSize);\n\n  return loading ? (\n    <>\n      {multiPage && <span style={{ marginRight: 10 }}>{progress}%</span>}\n      <Spinner invert />\n    </>\n  ) : timestamps ? (\n    <DownloadJSON\n      label={\"Votes Timestamps\"}\n      fileName={`${recordToken}-votes-timestamps`}\n      content={timestamps}\n    />\n  ) : error ? (\n    <div>error: {error}</div>\n  ) : null;\n};\n\nDownloadVotesTimestamps.propTypes = {\n  recordToken: PropTypes.string\n};\n\nexport default DownloadVotesTimestampsWrapper;\n","import { useState, useEffect, useCallback } from \"react\";\nimport * as act from \"src/actions\";\nimport fileDownload from \"js-file-download\";\nimport { useAction } from \"src/redux\";\nimport useFetchMachine from \"src/hooks/utils/useFetchMachine\";\nimport {\n  handleSaveVotesTimetamps,\n  loadVotesTimestamps\n} from \"src/lib/local_storage\";\n\nexport function useDownloadVoteTimestamps(\n  token,\n  votesCount,\n  timestampsPageSize\n) {\n  const [votes, setVotes] = useState(null);\n  const [auths, setAuths] = useState(null);\n  const [details, setDetails] = useState(null);\n  const [page, setPage] = useState(1);\n  const [progress, setProgress] = useState(0);\n  const multiPage = votesCount > timestampsPageSize;\n  const onFetchTicketVoteTimestamps = useAction(\n    act.onFetchTicketVoteTimestamps\n  );\n\n  const getProgressPercentage = useCallback(\n    (total) =>\n      total ? ((total * timestampsPageSize) / votesCount).toFixed(0) : 0,\n    [votesCount, timestampsPageSize]\n  );\n\n  useEffect(() => {\n    setProgress(getProgressPercentage(votes?.length));\n  }, [getProgressPercentage, votes]);\n\n  const [state, send, { START, VERIFY, FETCH, RESOLVE, REJECT }] =\n    useFetchMachine({\n      actions: {\n        initial: () => {\n          const ts = loadVotesTimestamps(token);\n          const hasProofs = ts?.votes?.reduce(\n            (acc, v) => acc && v.proofs.length > 0,\n            true\n          );\n          if (ts?.votes?.length === votesCount && hasProofs) {\n            return send(RESOLVE, ts);\n          }\n          if (token && !votes) {\n            return send(START);\n          }\n          return;\n        },\n        start: () => {\n          // fetch unpaginated data from vote timestamps\n          onFetchTicketVoteTimestamps(token)\n            .then((resp) => {\n              setAuths([...resp.auths]);\n              setDetails({ ...resp.details });\n              // fetch first page of vote timestamps\n              onFetchTicketVoteTimestamps(token, page)\n                .then((resp) => {\n                  setVotes([...resp.votes]);\n                  setPage(page + 1);\n                  return send(VERIFY);\n                })\n                .catch((e) => send(REJECT, e));\n            })\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        },\n        verify: () => {\n          if (votes?.length === votesCount) {\n            // all timestamps loaded, resolve\n            handleSaveVotesTimetamps(token, { auths, details, votes });\n            fileDownload(\n              JSON.stringify({ auths, details, votes }, null, 2),\n              `${token}-votes-timestamps.json`\n            );\n            return send(RESOLVE, { auths, details, votes });\n          } else {\n            // more timestamps remaining, fetch next page\n            onFetchTicketVoteTimestamps(token, page)\n              .then((resp) => {\n                setVotes([...votes, ...resp.votes]);\n                setPage(page + 1);\n                return send(VERIFY);\n              })\n              .catch((e) => {\n                send(REJECT, e);\n              });\n            return send(FETCH);\n          }\n        }\n      },\n      initialValues: {\n        status: \"idle\",\n        loading: false,\n        auths: null,\n        details: null,\n        votes: null,\n        progress: 0\n      }\n    });\n\n  return {\n    loading: state.loading || state.verifying,\n    error: state.error,\n    progress: progress,\n    timestamps: {\n      auths: state.auths,\n      details: state.details,\n      votes: state.votes\n    },\n    multiPage: multiPage\n  };\n}\n","export const fullVoteParamObject = ({\n  type,\n  version,\n  duration,\n  quorumpercentage,\n  passpercentage,\n  token,\n  parent\n}) => ({\n  token,\n  version: +version,\n  type,\n  mask: 3,\n  duration,\n  quorumpercentage,\n  passpercentage,\n  options: [\n    {\n      id: \"no\",\n      description: \"Don't approve proposal\",\n      bit: 1\n    },\n    {\n      id: \"yes\",\n      description: \"Approve proposal\",\n      bit: 2\n    }\n  ],\n  parent\n});\n","import { createContext, useContext, useCallback } from \"react\";\nimport {\n  PROPOSAL_STATUS_CENSORED,\n  PROPOSAL_STATUS_PUBLIC,\n  PROPOSAL_STATUS_ARCHIVED\n} from \"src/constants\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport { fullVoteParamObject } from \"./helpers\";\n\nexport const PublicProposalsActionsContext = createContext();\nexport const UnvettedProposalsActionsContext = createContext();\n\nexport const usePublicProposalActions = () =>\n  useContext(PublicProposalsActionsContext);\nexport const useUnvettedProposalActions = () =>\n  useContext(UnvettedProposalsActionsContext);\n\nexport function useUnvettedActions() {\n  const onSetProposalStatus = useAction(act.onSetProposalStatus);\n\n  const onCensorProposal = useCallback(\n    ({ censorshiprecord: { token }, version, state, status }) =>\n      (reason) =>\n        onSetProposalStatus({\n          token,\n          status: PROPOSAL_STATUS_CENSORED,\n          oldStatus: status,\n          reason,\n          version,\n          state\n        }),\n    [onSetProposalStatus]\n  );\n\n  const onApproveProposal = useCallback(\n    ({ censorshiprecord: { token }, version, linkto, state, status }) =>\n      () =>\n        onSetProposalStatus({\n          token,\n          status: PROPOSAL_STATUS_PUBLIC,\n          oldStatus: status,\n          linkto,\n          version,\n          state\n        }),\n    [onSetProposalStatus]\n  );\n\n  return {\n    onCensorProposal,\n    onApproveProposal\n  };\n}\n\nexport function usePublicActions() {\n  const onSetProposalStatus = useAction(act.onSetProposalStatus);\n  const onStart = useAction(act.onStartVote);\n  const onAuthorize = useAction(act.onAuthorizeVote);\n  const onRevoke = useAction(act.onRevokeVote);\n  const onSetBillingStatusAction = useAction(act.onSetBillingStatus);\n  const onFetchProposalsBatchWithoutState = useAction(\n    act.onFetchProposalsBatchWithoutState\n  );\n\n  const currentUserID = useSelector(sel.currentUserID);\n\n  const onCensorProposal = useCallback(\n    ({ censorshiprecord: { token }, version, state, status }) =>\n      (reason) =>\n        onSetProposalStatus({\n          token,\n          status: PROPOSAL_STATUS_CENSORED,\n          oldStatus: status,\n          reason,\n          version,\n          state\n        }),\n    [onSetProposalStatus]\n  );\n\n  const onAbandonProposal = useCallback(\n    ({ censorshiprecord: { token }, version, state, status }) =>\n      (reason) =>\n        onSetProposalStatus({\n          token,\n          status: PROPOSAL_STATUS_ARCHIVED,\n          oldStatus: status,\n          reason,\n          version,\n          state\n        }),\n    [onSetProposalStatus]\n  );\n\n  const onAuthorizeVote = useCallback(\n    (proposal) => () =>\n      onAuthorize(\n        currentUserID,\n        proposal.censorshiprecord.token,\n        proposal.version\n      ),\n    [onAuthorize, currentUserID]\n  );\n\n  const onRevokeVote = useCallback(\n    (proposal) => () =>\n      onRevoke(\n        currentUserID,\n        proposal.censorshiprecord.token,\n        proposal.version\n      ),\n    [onRevoke, currentUserID]\n  );\n\n  // votes param is an array of object : [{ token, version, parent }] - where\n  // parent is RFP propsoals in case of runoff vote\n  const onStartVote = useCallback(\n    (votes, type, cb) =>\n      async ({ duration, quorumPercentage, passPercentage }) => {\n        await onStart(\n          currentUserID,\n          votes.map(({ token, version, parent }) =>\n            fullVoteParamObject({\n              type,\n              version,\n              duration,\n              quorumpercentage: quorumPercentage,\n              passpercentage: passPercentage,\n              token,\n              parent\n            })\n          )\n        );\n        cb && cb();\n      },\n    [onStart, currentUserID]\n  );\n\n  const onSetBillingStatus = useCallback(\n    (proposal) =>\n      ({ billingStatus, reason }) =>\n        onSetBillingStatusAction(\n          proposal.censorshiprecord.token,\n          billingStatus,\n          reason\n        ),\n    [onSetBillingStatusAction]\n  );\n\n  return {\n    onCensorProposal,\n    onAbandonProposal,\n    onAuthorizeVote,\n    onRevokeVote,\n    onStartVote,\n    onSetBillingStatus,\n    onFetchProposalsBatchWithoutState\n  };\n}\n","import React, { useState, useEffect } from \"react\";\nimport * as Yup from \"yup\";\nimport {\n  P,\n  Button,\n  Modal,\n  TextInput,\n  Icon,\n  getThemeProperty,\n  useTheme\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport { useCrash, useModalContext } from \"src/hooks\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport { isIdentityError } from \"src/utils\";\n\nconst ModalConfirmWithReason = ({\n  show,\n  onClose,\n  onSubmit,\n  subject,\n  title,\n  reasonLabel,\n  successMessage,\n  successTitle,\n  onCloseSuccess\n}) => {\n  const [, handleCloseModal] = useModalContext();\n  const crash = useCrash();\n  const [success, setSuccess] = useState(false);\n\n  const onSubmitReason = async (\n    values,\n    { resetForm, setFieldError, setSubmitting }\n  ) => {\n    try {\n      await onSubmit(values.reason);\n      resetForm();\n      setSuccess(true);\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n      if (isIdentityError(e)) {\n        crash(e);\n        handleCloseModal();\n      }\n    }\n  };\n  useEffect(() => {\n    if (!show) {\n      setTimeout(() => setSuccess(false), 500);\n    }\n  }, [show]);\n\n  const { theme } = useTheme();\n  const successIconBgColor = getThemeProperty(\n    theme,\n    \"success-icon-background-color\"\n  );\n  const iconCheckmarkColor = getThemeProperty(\n    theme,\n    \"success-icon-checkmark-color\"\n  );\n\n  return (\n    <Modal\n      style={{ width: \"600px\" }}\n      title={(success && successTitle) || title}\n      show={show}\n      onClose={success && onCloseSuccess ? onCloseSuccess : onClose}\n      iconComponent={\n        !success ? (\n          <Icon type=\"info\" size={26} />\n        ) : (\n          <Icon\n            type=\"checkmark\"\n            size={26}\n            iconColor={iconCheckmarkColor}\n            backgroundColor={successIconBgColor}\n          />\n        )\n      }\n    >\n      {!success && (\n        <P style={{ marginBottom: \"20px\" }}>\n          Please, provide a reason for this action.\n        </P>\n      )}\n      {!success && (\n        <FormWrapper\n          initialValues={{\n            reason: \"\"\n          }}\n          validationSchema={Yup.object().shape({\n            reason: Yup.string().required(\"Required\")\n          })}\n          onSubmit={onSubmitReason}\n        >\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            values,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            errors,\n            touched,\n            isSubmitting\n          }) => (\n            <Form onSubmit={handleSubmit}>\n              {errors && errors.global && (\n                <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n              )}\n              <TextInput\n                data-testid=\"reason\"\n                label={reasonLabel}\n                name=\"reason\"\n                id={`reason-for-${subject}`}\n                type=\"text\"\n                value={values.reason}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.reason && errors.reason}\n              />\n              <Actions className=\"no-padding-bottom\">\n                <Button\n                  data-testid=\"reason-confirm\"\n                  loading={isSubmitting}\n                  type=\"submit\"\n                >\n                  Confirm\n                </Button>\n              </Actions>\n            </Form>\n          )}\n        </FormWrapper>\n      )}\n      {success && (\n        <>\n          {successMessage}\n          <div className=\"justify-right margin-top-m\">\n            <Button\n              data-testid=\"reason-confirm-success\"\n              onClick={onCloseSuccess || onClose}\n            >\n              Ok\n            </Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalConfirmWithReason.propTypes = {\n  title: PropTypes.string,\n  reasonLabel: PropTypes.string,\n  subject: PropTypes.string.isRequired,\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  onSubmit: PropTypes.func,\n  successTitle: PropTypes.string,\n  successMessage: PropTypes.node\n};\n\nModalConfirmWithReason.defaultProps = {\n  title: \"Confirm Action\",\n  reasonLabel: \"Reason\"\n};\n\nexport default React.memo(ModalConfirmWithReason);\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { useUnvettedActions, UnvettedProposalsActionsContext } from \"./hooks\";\nimport { Text } from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport { shortRecordToken } from \"src/helpers\";\n\nconst UnvettedActionsProvider = ({ children, history }) => {\n  const { onCensorProposal, onApproveProposal } = useUnvettedActions();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenCensorModal = (proposal) => {\n    const handleCloseSuccess = () => {\n      handleCloseModal();\n      history.push(\n        `/record/${shortRecordToken(proposal.censorshiprecord.token)}`\n      );\n    };\n    handleOpenModal(ModalConfirmWithReason, {\n      title: `Censor proposal - ${proposal.name}`,\n      reasonLabel: \"Censor reason\",\n      subject: \"censorProposal\",\n      onSubmit: onCensorProposal(proposal),\n      successTitle: \"Proposal censored\",\n      successMessage: (\n        <Text>\n          The proposal has been successfully censored! Now it will appear under\n          under <Link to=\"/admin/records?tab=censored\">Censored</Link> tab among\n          Admin Proposals.\n        </Text>\n      ),\n      onClose: handleCloseModal,\n      onCloseSuccess: handleCloseSuccess\n    });\n  };\n\n  const handleOpenApproveModal = (proposal) => {\n    const handleCloseSuccess = () => {\n      handleCloseModal();\n      history.push(\n        `/record/${shortRecordToken(proposal.censorshiprecord.token)}`\n      );\n    };\n    handleOpenModal(ModalConfirm, {\n      title: `Approve proposal - ${proposal.name}`,\n      message: \"Are you sure you want to approve this proposal?\",\n      onSubmit: onApproveProposal(proposal),\n      successTitle: \"Proposal approved\",\n      successMessage: (\n        <Text>\n          The proposal has been successfully approved! Now it will appear in{\" \"}\n          <Link to=\"/?tab=under%20review\">Under review</Link> tab among Public\n          Proposals.\n        </Text>\n      ),\n      onClose: handleCloseModal,\n      onCloseSuccess: handleCloseSuccess\n    });\n  };\n\n  return (\n    <UnvettedProposalsActionsContext.Provider\n      value={{\n        onCensor: handleOpenCensorModal,\n        onApprove: handleOpenApproveModal\n      }}\n    >\n      {children}\n    </UnvettedProposalsActionsContext.Provider>\n  );\n};\n\nexport default withRouter(UnvettedActionsProvider);\n","import * as Yup from \"yup\";\nimport { minAmountMessage, maxAmountMessage } from \"src/utils/validation\";\n\nconst MAINNET_MIN_QUORUM_PERCENTAGE = 20;\nconst MAINNET_MIN_PASS_PERCENTAGE = 60;\nconst TESTNET_MIN_QUORUM_PERCENTAGE = 0;\nconst TESTNET_MIN_PASS_PERCENTAGE = 0;\nconst MAX_QUORUM_PERCENTAGE = 100;\nconst MAX_PASS_PERCENTAGE = 100;\n\nconst getMinQuorumPercentage = (isTestnet) =>\n  isTestnet ? TESTNET_MIN_QUORUM_PERCENTAGE : MAINNET_MIN_QUORUM_PERCENTAGE;\n\nconst getMinPassPercentage = (isTestnet) =>\n  isTestnet ? TESTNET_MIN_PASS_PERCENTAGE : MAINNET_MIN_PASS_PERCENTAGE;\n\nexport const validationSchema = (isTestnet) =>\n  Yup.object().shape({\n    quorumPercentage: Yup.number()\n      .required(\"required\")\n      .min(\n        getMinQuorumPercentage(isTestnet),\n        minAmountMessage(\"quorum percentage\", getMinQuorumPercentage(isTestnet))\n      )\n      .max(\n        MAX_QUORUM_PERCENTAGE,\n        maxAmountMessage(\"quorum percentage\", MAX_QUORUM_PERCENTAGE)\n      ),\n    passPercentage: Yup.number()\n      .required(\"required\")\n      .min(\n        getMinPassPercentage(isTestnet),\n        minAmountMessage(\"pass percentage\", getMinPassPercentage(isTestnet))\n      )\n      .max(\n        MAX_PASS_PERCENTAGE,\n        maxAmountMessage(\"pass percentage\", MAX_PASS_PERCENTAGE)\n      )\n  });\n","import React, { useState, useEffect } from \"react\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport {\n  Button,\n  Modal,\n  TextInput,\n  RadioButtonGroup,\n  Icon,\n  useTheme,\n  getThemeProperty\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport { validationSchema } from \"./validation\";\nimport { useCrash, useModalContext, usePolicy } from \"src/hooks\";\nimport { isRfpReadyToVote } from \"src/containers/Proposal/helpers\";\nimport { VOTE_TYPE_STANDARD, VOTE_TYPE_RUNOFF } from \"src/constants\";\nimport { isIdentityError } from \"src/utils\";\n\nconst getRoundedAverage = (a, b) => Math.round((a + b) / 2);\n\nconst getBlockDurationArray = (min, max) => [\n  min,\n  getRoundedAverage(min, max),\n  max\n];\n\nconst getDurationOptions = (isTesnet, min, max) => {\n  const blockDuration = isTesnet ? 2 : 5;\n  return getBlockDurationArray(min, max).map((nb) => {\n    const durationInDays = Math.round((nb * blockDuration) / 60 / 24);\n    return {\n      value: nb,\n      label: `${\n        durationInDays === 0 ? \"less than a day\" : `${durationInDays} days`\n      } (${nb} blocks)`\n    };\n  });\n};\n\nconst ModalStartVote = ({\n  show,\n  onClose,\n  onSubmit,\n  title,\n  successMessage,\n  successTitle,\n  proposal,\n  voteType\n}) => {\n  const [, handleCloseModal] = useModalContext();\n  const crash = useCrash();\n  const [success, setSuccess] = useState(false);\n  const { apiInfo } = useLoaderContext();\n  const { theme } = useTheme();\n  const {\n    policyTicketVote: { linkbyperiodmin, votedurationmin, votedurationmax }\n  } = usePolicy();\n  const successIconBgColor = getThemeProperty(\n    theme,\n    \"success-icon-background-color\"\n  );\n  const iconCheckmarkColor = getThemeProperty(\n    theme,\n    \"success-icon-checkmark-color\"\n  );\n  const onSubmitStartVote = async (\n    values,\n    { resetForm, setFieldError, setSubmitting }\n  ) => {\n    try {\n      const { linkby } = proposal;\n      const isRfp = !!linkby;\n      if (\n        isRfp &&\n        voteType === VOTE_TYPE_STANDARD &&\n        !isRfpReadyToVote(linkby, linkbyperiodmin)\n      ) {\n        const days = linkbyperiodmin / (24 * 3600);\n        throw Error(\n          `RFP deadline should meet the minimum period to start voting which is about ${days} days from when the vote starts`\n        );\n      }\n      await onSubmit(values);\n      resetForm();\n      setSuccess(true);\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n      if (isIdentityError(e)) {\n        crash(e);\n        handleCloseModal();\n      }\n    }\n  };\n  useEffect(\n    function clearOnClose() {\n      if (!show) {\n        setTimeout(() => setSuccess(false), 500);\n      }\n    },\n    [show]\n  );\n\n  const initialValues = {\n    duration: getBlockDurationArray(votedurationmin, votedurationmax)[0],\n    quorumPercentage: 20,\n    passPercentage: 60\n  };\n  const isInitialValid = validationSchema(apiInfo.tesnet).isValidSync(\n    initialValues\n  );\n\n  return (\n    <Modal\n      style={{ width: \"600px\" }}\n      title={(success && successTitle) || title}\n      show={show}\n      onClose={onClose}\n      iconComponent={\n        !success ? (\n          <Icon type=\"info\" size={26} />\n        ) : (\n          <Icon\n            type=\"checkmark\"\n            iconColor={iconCheckmarkColor}\n            backgroundColor={successIconBgColor}\n            size={26}\n          />\n        )\n      }\n    >\n      {!success ? (\n        <FormWrapper\n          initialValues={initialValues}\n          validationSchema={validationSchema(apiInfo.testnet)}\n          isInitialValid={isInitialValid}\n          onSubmit={onSubmitStartVote}\n        >\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            values,\n            isValid,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n            errors,\n            isSubmitting,\n            touched\n          }) => {\n            const handleChangeDuration = (v) =>\n              setFieldValue(\"duration\", v.value);\n\n            return (\n              <Form onSubmit={handleSubmit}>\n                {errors && errors.global && (\n                  <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n                )}\n                <TextInput\n                  label=\"Quorum Percentage\"\n                  id=\"quorumPercentage\"\n                  type=\"number\"\n                  value={values.quorumPercentage}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.quorumPercentage && errors.quorumPercentage}\n                />\n                <TextInput\n                  label=\"Pass Percentage\"\n                  id=\"passPercentage\"\n                  type=\"number\"\n                  value={values.passPercentage}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.passPercentage && errors.passPercentage}\n                />\n                <RadioButtonGroup\n                  label=\"Duration\"\n                  name=\"duration\"\n                  vertical\n                  options={getDurationOptions(\n                    apiInfo.testnet,\n                    votedurationmin,\n                    votedurationmax\n                  )}\n                  value={values.duration}\n                  onChange={handleChangeDuration}\n                />\n                <Actions className=\"no-padding-bottom\">\n                  <Button\n                    loading={isSubmitting}\n                    kind={isValid ? \"primary\" : \"disabled\"}\n                    type=\"submit\"\n                  >\n                    Start Vote\n                  </Button>\n                </Actions>\n              </Form>\n            );\n          }}\n        </FormWrapper>\n      ) : (\n        <>\n          {successMessage}\n          <div className=\"justify-right margin-top-m\">\n            <Button onClick={onClose}>Ok</Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalStartVote.propTypes = {\n  title: PropTypes.string,\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  onSubmit: PropTypes.func,\n  successTitle: PropTypes.string,\n  successMessage: PropTypes.node,\n  voteType: PropTypes.oneOf([VOTE_TYPE_STANDARD, VOTE_TYPE_RUNOFF]).isRequired\n};\n\nModalStartVote.defaultProps = {\n  title: \"Start Proposal Vote\"\n};\n\nexport default ModalStartVote;\n","import * as Yup from \"yup\";\nimport { PROPOSAL_BILLING_STATUS_CLOSED } from \"src/constants\";\n\nconst billingStatusRequiresReason = (billingStatus, schema) =>\n  billingStatus === PROPOSAL_BILLING_STATUS_CLOSED\n    ? schema.required(\"required\")\n    : schema;\n\nexport const validationSchema = Yup.object().shape({\n  billingStatus: Yup.number().required(\"Required\"),\n  reason: Yup.string().when(\"billingStatus\", billingStatusRequiresReason)\n});\n","import {\n  PROPOSAL_BILLING_STATUS_ACTIVE,\n  PROPOSAL_BILLING_STATUS_COMPLETED,\n  PROPOSAL_BILLING_STATUS_CLOSED\n} from \"src/constants\";\n\nconst billingStatusLabels = {\n  [PROPOSAL_BILLING_STATUS_ACTIVE]: \"Active\",\n  [PROPOSAL_BILLING_STATUS_COMPLETED]: \"Completed\",\n  [PROPOSAL_BILLING_STATUS_CLOSED]: \"Closed\"\n};\n\n/**\n * Returns the proposal billing status select options.\n * @returns {Array}\n */\nexport const getProposalBillingStatusOptionsForSelect = () =>\n  [\n    PROPOSAL_BILLING_STATUS_ACTIVE,\n    PROPOSAL_BILLING_STATUS_COMPLETED,\n    PROPOSAL_BILLING_STATUS_CLOSED\n  ].map((value) => ({\n    label: billingStatusLabels[value],\n    value\n  }));\n","import React, { useState, useMemo } from \"react\";\nimport {\n  Modal,\n  Button,\n  TextInput,\n  Icon,\n  useTheme,\n  getThemeProperty\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport { validationSchema } from \"./validation\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport SelectField from \"src/components/Select/SelectField\";\nimport { getProposalBillingStatusOptionsForSelect } from \"./helpers\";\nimport { PROPOSAL_BILLING_STATUS_CLOSED } from \"src/constants\";\nimport styles from \"./ModalSetBillingStatus.module.css\";\nimport { useCrash, useModalContext } from \"src/hooks\";\nimport { isIdentityError } from \"src/utils\";\n\nconst StatusesExplanation = () => (\n  <div>\n    <div className=\"margin-y-m\">\n      <span className={styles.status}>Active</span> - the proposal is actively\n      being billed against.\n    </div>\n    <div className=\"margin-y-m\">\n      <span className={styles.status}>Completed</span> - the deliverables have\n      been completed and the proposal is no longer being billed against or the\n      budget has been exausted and the proposal owner must request additional\n      funds.\n    </div>\n    <div className=\"margin-y-m\">\n      <span className={styles.status}>Closed</span> - the proposal owner failed\n      to deliver a finished work product and the ability to bill against the\n      proposal is being closed.\n    </div>\n  </div>\n);\n\nconst ModalSetBillingStatus = ({\n  onClose,\n  onSubmit,\n  title,\n  show,\n  successMessage,\n  successTitle\n}) => {\n  const [success, setSuccess] = useState(false);\n  const [, handleCloseModal] = useModalContext();\n  const crash = useCrash();\n\n  const billingStatusOptions = useMemo(\n    () => getProposalBillingStatusOptionsForSelect(),\n    []\n  );\n\n  const initialValues = {\n    billingStatus: null,\n    reason: \"\"\n  };\n\n  const onSubmitSetBillingStatus = async (\n    values,\n    { resetForm, setFieldError, setSubmitting }\n  ) => {\n    try {\n      await onSubmit(values);\n      resetForm();\n      setSuccess(true);\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n      if (isIdentityError(e)) {\n        crash(e);\n        handleCloseModal();\n      }\n    }\n  };\n\n  const { theme } = useTheme();\n  const successIconBgColor = getThemeProperty(\n    theme,\n    \"success-icon-background-color\"\n  );\n  const iconCheckmarkColor = getThemeProperty(\n    theme,\n    \"success-icon-checkmark-color\"\n  );\n\n  return (\n    <Modal\n      style={{ width: \"600px\" }}\n      title={success ? successTitle : title}\n      show={show}\n      onClose={onClose}\n      iconComponent={\n        !success ? (\n          <Icon type=\"info\" size={26} />\n        ) : (\n          <Icon\n            type=\"checkmark\"\n            iconColor={iconCheckmarkColor}\n            backgroundColor={successIconBgColor}\n            size={26}\n          />\n        )\n      }\n    >\n      {!success ? (\n        <FormWrapper\n          initialValues={initialValues}\n          validationSchema={validationSchema}\n          onSubmit={onSubmitSetBillingStatus}\n        >\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            values,\n            isValid,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n            setFieldTouched,\n            errors,\n            isSubmitting,\n            touched\n          }) => {\n            const handleSelectFiledChange = (fieldName) => (option) => {\n              setFieldTouched(fieldName, true);\n              setFieldValue(fieldName, option.value);\n            };\n\n            const { billingStatus } = values;\n            const isBillingStatusClosed =\n              billingStatus === PROPOSAL_BILLING_STATUS_CLOSED;\n\n            return (\n              <Form onSubmit={handleSubmit}>\n                {errors && errors.global && (\n                  <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n                )}\n                <SelectField\n                  name=\"billingStatus\"\n                  placeholder=\"Billing Status\"\n                  className={styles.statusSelectWrapper}\n                  onChange={handleSelectFiledChange(\"billingStatus\")}\n                  options={billingStatusOptions}\n                  id=\"select-billing-status\"\n                />\n                {isBillingStatusClosed && (\n                  <TextInput\n                    name=\"reason\"\n                    id=\"billing-status-reason\"\n                    label=\"Reason\"\n                    type=\"text\"\n                    value={values.reason}\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    error={touched.reason && errors.reason}\n                  />\n                )}\n                <StatusesExplanation />\n                <Actions className=\"no-padding-bottom\">\n                  <Button\n                    data-testid=\"set-billing-status\"\n                    loading={isSubmitting}\n                    kind={isValid ? \"primary\" : \"disabled\"}\n                    type=\"submit\"\n                  >\n                    Set Billing Status\n                  </Button>\n                </Actions>\n              </Form>\n            );\n          }}\n        </FormWrapper>\n      ) : (\n        <>\n          {successMessage}\n          <div className=\"justify-right margin-top-m\">\n            <Button onClick={onClose}>Ok</Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalSetBillingStatus.propTypes = {\n  title: PropTypes.string,\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  onSubmit: PropTypes.func,\n  successTitle: PropTypes.string,\n  successMessage: PropTypes.node\n};\n\nModalSetBillingStatus.defaultProps = {\n  title: \"Set Billing Status\"\n};\n\nexport default ModalSetBillingStatus;\n","import React, { useCallback } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Text } from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport { PublicProposalsActionsContext, usePublicActions } from \"./hooks\";\nimport {\n  isAbandonedProposal,\n  getProposalToken\n} from \"src/containers/Proposal/helpers\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport ModalStartVote from \"src/components/ModalStartVote\";\nimport ModalSetBillingStatus from \"src/components/ModalSetBillingStatus\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport values from \"lodash/fp/values\";\nimport { shortRecordToken } from \"src/helpers\";\nimport {\n  VOTE_TYPE_STANDARD,\n  VOTE_TYPE_RUNOFF,\n  PROPOSAL_STATE_VETTED\n} from \"src/constants\";\n\nconst PublicActionsProvider = ({ children, history }) => {\n  const {\n    onCensorProposal,\n    onAbandonProposal,\n    onAuthorizeVote,\n    onRevokeVote,\n    onStartVote,\n    onSetBillingStatus,\n    onFetchProposalsBatchWithoutState\n  } = usePublicActions();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenAbandonModal = useCallback(\n    (proposal) => {\n      const handleCloseSuccess = () => {\n        handleCloseModal();\n        history.push(\n          `/record/${shortRecordToken(proposal.censorshiprecord.token)}`\n        );\n      };\n      handleOpenModal(ModalConfirmWithReason, {\n        title: `Abandon - ${proposal.name}`,\n        reasonLabel: \"Abandon reason\",\n        subject: \"abandonProposal\",\n        onSubmit: onAbandonProposal(proposal),\n        successTitle: \"Proposal abandoned\",\n        successMessage: (\n          <Text>\n            The proposal has been successfully abandoned! Now it will appear\n            under the <Link to=\"/?tab=abandoned\">Abandoned</Link> tab.\n          </Text>\n        ),\n        onClose: handleCloseModal,\n        onCloseSuccess: handleCloseSuccess\n      });\n    },\n    [handleCloseModal, handleOpenModal, onAbandonProposal, history]\n  );\n\n  const handleOpenAuthorizeVoteModal = useCallback(\n    (proposal) => {\n      handleOpenModal(ModalConfirm, {\n        title: `Authorize vote - ${proposal.name}`,\n        message: \"Are you sure you want to authorize the vote start?\",\n        onSubmit: onAuthorizeVote(proposal),\n        successTitle: \"Proposal vote authorized\",\n        successMessage: (\n          <Text>\n            The proposal vote has been successfully authorized! Wait for an\n            admin to start the vote for this proposal.\n          </Text>\n        ),\n        onClose: handleCloseModal\n      });\n    },\n    [handleOpenModal, handleCloseModal, onAuthorizeVote]\n  );\n\n  const handleOpenRevokeVoteModal = useCallback(\n    (proposal) => {\n      handleOpenModal(ModalConfirm, {\n        title: `Revoke vote - ${proposal.name}`,\n        message: \"Are you sure you want to revoke the vote start?\",\n        onSubmit: onRevokeVote(proposal),\n        successTitle: \"Proposal vote revoked\",\n        successMessage: (\n          <Text>\n            The proposal vote has been successfully revoked! Now the admins\n            cannot start the vote for this proposal until you authorize it\n            again.\n          </Text>\n        ),\n        onClose: handleCloseModal\n      });\n    },\n    [handleCloseModal, handleOpenModal, onRevokeVote]\n  );\n\n  const handleSetBillingStatusModal = useCallback(\n    (proposal) =>\n      handleOpenModal(ModalSetBillingStatus, {\n        title: `Set Billing Status - ${proposal.name}`,\n        onSubmit: onSetBillingStatus(proposal),\n        successTitle: \"Billing Status Set\",\n        successMessage: (\n          <Text>The proposal billing status has been successfully set!</Text>\n        ),\n        onClose: handleCloseModal,\n        proposal\n      }),\n    [handleCloseModal, handleOpenModal, onSetBillingStatus]\n  );\n\n  const handleStartVoteModal = useCallback(\n    (proposal) => {\n      const token = getProposalToken(proposal);\n      const version = proposal && proposal.version;\n      handleOpenModal(ModalStartVote, {\n        title: `Start vote - ${proposal.name}`,\n        voteType: VOTE_TYPE_STANDARD,\n        onSubmit: onStartVote([{ token, version }], VOTE_TYPE_STANDARD),\n        successTitle: \"Proposal vote started\",\n        successMessage: (\n          <Text>The proposal vote has been successfully started!</Text>\n        ),\n        onClose: handleCloseModal,\n        proposal\n      });\n    },\n    [handleOpenModal, handleCloseModal, onStartVote]\n  );\n\n  const handleStartRunoffVoteModal = useCallback(\n    async (proposal, cb) => {\n      const submissionsTokens = proposal.linkedfrom;\n      if (!submissionsTokens || !submissionsTokens.length) {\n        throw Error(\"No RFP submissions available\");\n      }\n      const [submissions, , submissionsProposalSummaries] =\n        await onFetchProposalsBatchWithoutState(\n          submissionsTokens,\n          PROPOSAL_STATE_VETTED\n        );\n      const submissionVotes = values(submissions).flatMap((prop) =>\n        isAbandonedProposal(\n          submissionsProposalSummaries[prop.censorshiprecord.token]\n        )\n          ? []\n          : [\n              {\n                token: getProposalToken(prop),\n                version: prop.version,\n                parent: getProposalToken(proposal)\n              }\n            ]\n      );\n      handleOpenModal(ModalStartVote, {\n        title: `Start runoff vote - ${proposal.name}`,\n        voteType: VOTE_TYPE_RUNOFF,\n        onSubmit: onStartVote(submissionVotes, VOTE_TYPE_RUNOFF, cb),\n        successTitle: \"Proposal runoff vote started\",\n        message: \"Are you sure you want to start runoff vote?\",\n        successMessage: (\n          <Text>\n            RFP runoff vote has been successfully started! Now RFP's submissions\n            will appear under the <Link to=\"/?tab=voting\">Voting</Link> tab.\n          </Text>\n        ),\n        onClose: handleCloseModal,\n        proposal\n      });\n    },\n    [\n      onStartVote,\n      handleCloseModal,\n      handleOpenModal,\n      onFetchProposalsBatchWithoutState\n    ]\n  );\n\n  const handleOpenCensorModal = (proposal) => {\n    handleOpenModal(ModalConfirmWithReason, {\n      title: `Censor proposal - ${proposal.name}`,\n      reasonLabel: \"Censor reason\",\n      subject: \"censorProposal\",\n      onSubmit: onCensorProposal(proposal),\n      successTitle: \"Proposal censored\",\n      successMessage: (\n        <Text>\n          The proposal has been successfully censored! Now it will appear under\n          under <Link to=\"/admin/records?tab=censored\">Censored</Link> tab among\n          Admin Proposals.\n        </Text>\n      ),\n      onClose: handleCloseModal\n    });\n  };\n\n  return (\n    <PublicProposalsActionsContext.Provider\n      value={{\n        onAbandon: handleOpenAbandonModal,\n        onAuthorizeVote: handleOpenAuthorizeVoteModal,\n        onRevokeVote: handleOpenRevokeVoteModal,\n        onStartVote: handleStartVoteModal,\n        onCensor: handleOpenCensorModal,\n        onStartRunoffVote: handleStartRunoffVoteModal,\n        onSetBillingStatus: handleSetBillingStatusModal\n      }}\n    >\n      {children}\n    </PublicProposalsActionsContext.Provider>\n  );\n};\n\nexport default withRouter(PublicActionsProvider);\n","import { useLoaderContext } from \"src/containers/Loader\";\nimport PropTypes from \"prop-types\";\n\nconst AdminContent = ({ children, fallback }) => {\n  const { initDone, currentUser } = useLoaderContext();\n  const userIsAdmin = initDone && currentUser && currentUser.isadmin;\n  return userIsAdmin ? children : fallback;\n};\n\nAdminContent.propTypes = {\n  children: PropTypes.node,\n  fallback: PropTypes.node\n};\n\nAdminContent.defaultProps = {\n  fallback: null\n};\n\nexport default AdminContent;\n","import React from \"react\";\nimport { Button, classNames } from \"pi-ui\";\nimport {\n  isUnreviewedProposal,\n  isVotingNotAuthorizedProposal,\n  isUnderDiscussionProposal,\n  isRfpReadyToRunoff,\n  isApprovedProposal\n} from \"src/containers/Proposal/helpers\";\nimport {\n  useUnvettedProposalActions,\n  usePublicProposalActions\n} from \"src/containers/Proposal/Actions\";\nimport { usePolicy } from \"src/hooks\";\nimport AdminContent from \"src/components/AdminContent\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport styles from \"./ProposalActions.module.css\";\nimport { PROPOSAL_STATE_UNVETTED } from \"../../constants\";\n\nconst UnvettedActions = ({ proposal }) => {\n  if (!useUnvettedProposalActions()) {\n    throw Error(\n      \"UnvettedActions requires an UnvettedActionsProvider on a higher level of the component tree. \"\n    );\n  }\n\n  const { onCensor, onApprove } = useUnvettedProposalActions();\n\n  const withProposal = (fn) => () => {\n    fn(proposal);\n  };\n\n  return (\n    isUnreviewedProposal(proposal) && (\n      <AdminContent>\n        <div className=\"justify-right margin-top-m\">\n          <Button\n            onClick={withProposal(onCensor)}\n            className={classNames(\"margin-right-s\", styles.reportButton)}\n            noBorder\n            kind=\"secondary\"\n          >\n            Report as spam\n          </Button>\n          <Button onClick={withProposal(onApprove)}>Approve</Button>\n        </div>\n      </AdminContent>\n    )\n  );\n};\n\nconst PublicActions = ({\n  proposal,\n  voteSummary,\n  billingStatusChangeMetadata,\n  rfpSubmissionsVoteSummaries,\n  resetRfpSubmissionsData\n}) => {\n  if (!usePublicProposalActions()) {\n    throw Error(\n      \"PublicActions requires an PublicActionsProvider on a higher level of the component tree. \"\n    );\n  }\n\n  const { currentUser } = useLoaderContext();\n  const {\n    policyPi: { billingstatuschangesmax }\n  } = usePolicy();\n  const {\n    onAuthorizeVote,\n    onRevokeVote,\n    onAbandon,\n    onStartVote,\n    onStartRunoffVote,\n    onCensor,\n    onSetBillingStatus\n  } = usePublicProposalActions();\n  const isProposalOwner =\n    currentUser && proposal && currentUser.username === proposal.username;\n  const isRfpSubmission = !!proposal.linkto;\n  const isRfp = !!proposal.linkby;\n  const isVotingStartAuthorized = !isVotingNotAuthorizedProposal(voteSummary);\n  const isReadyToRunoff = isRfpReadyToRunoff(\n    proposal,\n    voteSummary,\n    rfpSubmissionsVoteSummaries\n  );\n  const isUnderDiscussion = isUnderDiscussionProposal(proposal, voteSummary);\n  const isApproved = isApprovedProposal(proposal, voteSummary);\n  const { numbillingstatuschanges } = billingStatusChangeMetadata || {};\n  const needsBillingStatus = !isRfp && isApproved && currentUser?.isadmin;\n  const isSetBillingStatusAllowed =\n    needsBillingStatus && numbillingstatuschanges < billingstatuschangesmax;\n\n  const withProposal = (fn, cb) => () => {\n    fn(proposal, cb);\n  };\n\n  return (\n    <>\n      {isUnderDiscussion && (\n        <div className=\"justify-right margin-top-m\">\n          <AdminContent>\n            <Button\n              onClick={withProposal(onCensor)}\n              className={classNames(\"margin-right-s\", styles.reportButton)}\n              noBorder\n              kind=\"secondary\"\n            >\n              Report as spam\n            </Button>\n          </AdminContent>\n          {isProposalOwner &&\n            !isRfpSubmission &&\n            (!isVotingStartAuthorized ? (\n              <Button onClick={withProposal(onAuthorizeVote)}>\n                Authorize voting\n              </Button>\n            ) : (\n              <Button onClick={withProposal(onRevokeVote)}>\n                Revoke voting authorization\n              </Button>\n            ))}\n          <AdminContent>\n            {!isVotingStartAuthorized ? (\n              <Button onClick={withProposal(onAbandon)}>Abandon</Button>\n            ) : (\n              <Button onClick={withProposal(onStartVote)}>Start Vote</Button>\n            )}\n          </AdminContent>\n        </div>\n      )}\n      {isSetBillingStatusAllowed && (\n        <AdminContent>\n          <div\n            className=\"justify-right margin-top-m\"\n            data-testid=\"proposal-set-billing-button\"\n          >\n            <Button onClick={withProposal(onSetBillingStatus)}>\n              Set Billing Status\n            </Button>\n          </div>\n        </AdminContent>\n      )}\n      {isReadyToRunoff && (\n        <AdminContent>\n          <div className=\"justify-right margin-top-m\">\n            <Button\n              onClick={withProposal(onStartRunoffVote, resetRfpSubmissionsData)}\n            >\n              Start Runoff Vote\n            </Button>\n          </div>\n        </AdminContent>\n      )}\n    </>\n  );\n};\n\nconst ProposalActions = ({ proposal, ...props }) => {\n  return proposal.state === PROPOSAL_STATE_UNVETTED ? (\n    <UnvettedActions proposal={proposal} />\n  ) : (\n    <PublicActions {...{ ...props, proposal }} />\n  );\n};\n\nexport default ProposalActions;\n","import isEqual from \"lodash/fp/isEqual\";\n\nconst markLineAsAdded = (elem) => ({\n  value: elem.value,\n  lineIndex: elem.index,\n  removed: false,\n  added: true\n});\n\nconst markLineAsRemoved = (elem) => ({\n  lineIndex: elem.index,\n  removed: elem.value,\n  added: false\n});\n\nconst markLineAsUnchanged = (elem) => ({\n  value: elem.value,\n  lineIndex: elem.index,\n  removed: false,\n  added: false\n});\n\nexport const arrayDiff = (newCommentBody, oldCommentBody, lineDiffFunc) => [\n  ...newCommentBody.filter(lineDiffFunc(oldCommentBody)).map(markLineAsAdded),\n  ...oldCommentBody.filter(lineDiffFunc(newCommentBody)).map(markLineAsRemoved),\n  ...newCommentBody.filter(lineEqFunc(oldCommentBody)).map(markLineAsUnchanged)\n];\n\nexport const lineDiffFunc = (arr) => (elem) =>\n  !arr.some((arrelem) => arrelem.value === elem.value);\n\nexport const lineEqFunc = (arr) => (elem) => !lineDiffFunc(arr)(elem);\n\nexport const getLineArray = (string) =>\n  string && string.length\n    ? string.split(\"\\n\\n\").map((line, index) => ({ value: line, index: index }))\n    : [];\n\nconst markAsAdded = (elem) => ({ ...elem, added: true });\nconst markAsRemoved = (elem) => ({ ...elem, removed: true });\n\nconst filesDiffFunc = (arr) => (elem) =>\n  !arr.some(\n    (arrelem) => arrelem.name === elem.name && arrelem.payload === elem.payload\n  );\nconst filesEqFunc = (arr) => (elem) => !filesDiffFunc(arr)(elem);\n\nexport const getFilesDiff = (newFiles, oldFiles) => [\n  ...newFiles.filter(filesDiffFunc(oldFiles)).map(markAsAdded),\n  ...oldFiles.filter(filesDiffFunc(newFiles)).map(markAsRemoved),\n  ...newFiles.filter(filesEqFunc(oldFiles)) // for unchanged files\n];\n\nconst itemsDiffFunc = (arr) => (elem) => !arr.some(isEqual(elem));\nconst itemsEqFunc = (arr) => (elem) => !itemsDiffFunc(arr)(elem);\n\nexport const getLineitemsDiff = (newItems = [], oldItems = []) =>\n  [\n    ...newItems.filter(itemsDiffFunc(oldItems)).map(markAsAdded),\n    ...oldItems.filter(itemsDiffFunc(newItems)).map(markAsRemoved),\n    ...newItems.filter(itemsEqFunc(oldItems))\n  ].sort((a, b) => a.index - b.index);\n\nexport const setLineitemParams = (lineItems = [], params = {}) =>\n  lineItems.map((line, index) => ({ ...params, ...line, index }));\n","import React from \"react\";\nimport { classNames } from \"pi-ui\";\nimport styles from \"./Diff.module.css\";\nimport Markdown from \"src/components/Markdown\";\nimport PropTypes from \"prop-types\";\n\nconst DiffLine = ({ added = false, removed = false, content = \"\" }) => {\n  const line = content && content.length > 0 ? content.join(\"\") : content;\n  return (\n    <tr\n      className={classNames(\n        added && styles.lineAdded,\n        removed && styles.lineRemoved\n      )}\n    >\n      <td className={styles.lineContent}>\n        <Markdown body={line} />\n      </td>\n    </tr>\n  );\n};\n\nDiffLine.propTypes = {\n  added: PropTypes.bool,\n  removed: PropTypes.bool,\n  content: PropTypes.oneOfType([PropTypes.array, PropTypes.string])\n};\n\nexport default DiffLine;\n","import React, { useCallback } from \"react\";\nimport { classNames } from \"pi-ui\";\nimport styles from \"./CellRenderer.module.css\";\n\nconst CellRenderer = ({\n  cell: { error, readOnly },\n  onDoubleClick,\n  onMouseOver,\n  onMouseDown,\n  onContextMenu,\n  editing,\n  className,\n  children\n}) => {\n  const handleOnMouseOver = useCallback(\n    (e) => {\n      onMouseOver(e);\n    },\n    [onMouseOver]\n  );\n\n  const handleOnMouseDown = useCallback(\n    (e) => {\n      if (!editing) {\n        onMouseDown(e);\n      }\n    },\n    [onMouseDown, editing]\n  );\n\n  return (\n    <td\n      className={classNames(\n        className,\n        !readOnly && error && styles.erroredCell\n      )}\n      onMouseDown={handleOnMouseDown}\n      onMouseOver={handleOnMouseOver}\n      onDoubleClick={onDoubleClick}\n      onContextMenu={onContextMenu}\n    >\n      {children}\n    </td>\n  );\n};\n\nexport default CellRenderer;\n","import React from \"react\";\nimport { Link, classNames } from \"pi-ui\";\nimport styles from \"./TableButton.module.css\";\n\nconst TableButton = ({ onClick, disabled, children }) => {\n  return (\n    <Link\n      customComponent={(props) => (\n        <span\n          {...props}\n          className={classNames(\n            props.className,\n            styles.tableButton,\n            disabled && styles.tableButtonDisabled\n          )}\n          onClick={!disabled ? onClick : () => null}\n        >\n          {children}\n        </span>\n      )}\n    />\n  );\n};\n\nexport default TableButton;\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { classNames, H2, P } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport ReactDataSheet from \"react-datasheet\";\nimport dropRight from \"lodash/dropRight\";\nimport flowRight from \"lodash/flowRight\";\nimport uniq from \"lodash/uniq\";\nimport \"react-datasheet/lib/react-datasheet.css\";\nimport styles from \"./InvoiceDatasheet.module.css\";\nimport CellRenderer from \"./components/CellRenderer\";\nimport TableButton from \"./components/TableButton\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\nimport useSubContractors from \"src/hooks/api/useSubContractors\";\n\nimport {\n  processCellsChange,\n  convertLineItemsToGrid,\n  convertGridToLineItems,\n  generateBlankLineItem,\n  createTableHeaders,\n  SUBTOTAL_COL\n} from \"./helpers\";\n\nconst noop = () => {};\n\nexport const SheetRenderer = ({ headers, ...props }) => (\n  <table className={classNames(props.className, styles.table)}>\n    <thead>\n      <tr className={styles.tableHead}>\n        {headers.map((col, idx) => (\n          <th\n            key={`header-${idx}`}\n            className={styles.tableHeadCell}\n            style={{ minWidth: col.width, width: col.width }}\n          >\n            {col.value}\n          </th>\n        ))}\n      </tr>\n    </thead>\n    <tbody>{props.children}</tbody>\n  </table>\n);\n\nexport const TableRow = ({ children, className }) => (\n  <tr className={classNames(styles.tableRow, className)}>{children}</tr>\n);\n\nconst InvoiceDatasheet = React.memo(function InvoiceDatasheet({\n  value,\n  onChange,\n  readOnly,\n  userRate,\n  errors,\n  proposals,\n  proposalsError,\n  isMobile\n}) {\n  const { policy } = usePolicy();\n  const { subContractors, error: subContractorsError } = useSubContractors();\n  const [grid, setGrid] = useState([]);\n  const [currentRate, setCurrentRate] = useState(userRate || 0);\n\n  const handleCellsChange = useCallback(\n    (changes) => {\n      const { grid: newGrid } = processCellsChange(grid, changes, userRate);\n      const lineItems = convertGridToLineItems(newGrid);\n      onChange && onChange(lineItems);\n    },\n    [userRate, onChange, grid]\n  );\n\n  useEffect(\n    function updateSubTotalOnUserRateChange() {\n      if (!!userRate && userRate !== currentRate) {\n        setCurrentRate(userRate);\n        handleCellsChange([{ col: SUBTOTAL_COL }]);\n      }\n    },\n    [userRate, handleCellsChange, currentRate, setCurrentRate]\n  );\n\n  const handleAddNewRow = useCallback(\n    (e) => {\n      e && e.preventDefault();\n      const newValue = value.concat([generateBlankLineItem(policy)]);\n      onChange(newValue);\n    },\n    [onChange, value, policy]\n  );\n\n  useEffect(\n    function updateGridOnValueChange() {\n      const grid = convertLineItemsToGrid(\n        value,\n        readOnly,\n        errors,\n        currentRate,\n        policy,\n        proposals,\n        subContractors,\n        proposalsError,\n        subContractorsError\n      );\n      setGrid(grid);\n    },\n    [\n      value,\n      readOnly,\n      errors,\n      currentRate,\n      policy,\n      subContractors,\n      proposalsError,\n      subContractorsError,\n      proposals\n    ]\n  );\n\n  const copyTextToClipboard = (e, text) => {\n    if (window.clipboardData && window.clipboardData.setData) {\n      window.clipboardData.setData(\"Text\", text);\n    } else {\n      e.clipboardData.setData(\"text/plain\", text);\n    }\n  };\n\n  const handleCopy = ({\n    range,\n    start,\n    end,\n    event,\n    data,\n    dataRenderer,\n    valueRenderer\n  }) => {\n    const selection = document.getSelection();\n    const text = selection.toString();\n    if (start.i === end.i && start.j === end.j && text) {\n      copyTextToClipboard(event, text);\n    } else {\n      const text = range(start.i, end.i)\n        .map((i) =>\n          range(start.j, end.j)\n            .map((j) => {\n              const cell = data[i][j];\n              const value = dataRenderer ? dataRenderer(cell, i, j) : null;\n              if (\n                value === \"\" ||\n                value === null ||\n                typeof value === \"undefined\"\n              ) {\n                return valueRenderer(cell, i, j);\n              }\n              return value;\n            })\n            .join(\"\\t\")\n        )\n        .join(\"\\n\");\n      copyTextToClipboard(event, text);\n    }\n  };\n\n  const handlePaste = (str) => {\n    // Track number of lines pasted\n    let rowCount = 0;\n\n    // Parse pasted comma-separated values\n    const grid = str.split(/\\r\\n|\\n|\\r/).map(function (row) {\n      rowCount++;\n      return row.split(\"\\t\");\n    });\n\n    // Add new rows programtically in case the user wants to paste more lines than the number currently available\n    let newValue = value;\n    for (let i = value.length; i < rowCount; i++) {\n      newValue = newValue.concat([generateBlankLineItem(policy)]);\n    }\n    // Update state\n    onChange(newValue);\n\n    return grid;\n  };\n\n  const handleRemoveLastRow = useCallback(\n    (e) => {\n      e.preventDefault();\n      if (grid.length > 2) {\n        onChange(dropRight(value, 1));\n      }\n    },\n    [onChange, value, grid.length]\n  );\n\n  const headers = useMemo(() => createTableHeaders(isMobile), [isMobile]);\n\n  const onContextMenu = useCallback(\n    (e, cell) => (cell.readOnly ? e.preventDefault() : null),\n    []\n  );\n\n  const valueRenderer = useCallback((cell) => cell.value, []);\n\n  const sheetRenderer = useCallback(\n    (props) => <SheetRenderer {...props} headers={headers} />,\n    [headers]\n  );\n\n  const rowRenderer = useCallback(\n    (props) => <TableRow>{props.children}</TableRow>,\n    []\n  );\n\n  const removeRowsIsDisabled = grid && grid.length <= 2;\n\n  const renderErrors = () => {\n    // Get all unique normalized errors\n    const uniqueErrArr = flowRight([\n      uniq,\n      () => errors && errors.flatMap((error) => Object.values(error))\n    ])();\n    return uniqueErrArr && uniqueErrArr.length ? (\n      <div>\n        <H2 className={styles.invoiceError}>Errors</H2>\n        {uniqueErrArr.map((err, i) => (\n          <P key={i} className={styles.invoiceError}>\n            {err.charAt(0).toUpperCase() + err.slice(1)}\n          </P>\n        ))}\n      </div>\n    ) : null;\n  };\n  return (\n    <div className={styles.wrapper}>\n      {proposalsError && (\n        <div className=\"margin-bottom-s margin-top-s\">\n          <H2 className={styles.invoiceError}>{proposalsError.toString()}</H2>\n          <P className={styles.invoiceError}>Unable to fetch proposals</P>\n        </div>\n      )}\n      {renderErrors()}\n      {!readOnly && (\n        <div className=\"justify-right margin-top-s margin-bottom-s\">\n          <TableButton onClick={handleAddNewRow}>Add item</TableButton>\n          <TableButton\n            disabled={removeRowsIsDisabled}\n            onClick={handleRemoveLastRow}\n          >\n            Remove item\n          </TableButton>\n        </div>\n      )}\n      <div className={styles.datasheetWrapper}>\n        <ReactDataSheet\n          data={grid}\n          handleCopy={handleCopy}\n          parsePaste={handlePaste}\n          valueRenderer={valueRenderer}\n          onContextMenu={onContextMenu}\n          onCellsChanged={!readOnly ? handleCellsChange : noop}\n          sheetRenderer={sheetRenderer}\n          rowRenderer={rowRenderer}\n          cellRenderer={CellRenderer}\n        />\n      </div>\n    </div>\n  );\n});\n\nInvoiceDatasheet.propTypes = {\n  value: PropTypes.array.isRequired,\n  readOnly: PropTypes.bool.isRequired,\n  onChange: PropTypes.func,\n  proposals: PropTypes.array.isRequired,\n  isMobile: PropTypes.bool\n};\n\nInvoiceDatasheet.defaultProps = {\n  readOnly: false\n};\n\nexport default InvoiceDatasheet;\n","import React, { useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { classNames, useTheme, DEFAULT_DARK_THEME_NAME } from \"pi-ui\";\nimport { fromUSDCentsToUSDUnits, fromMinutesToHours } from \"src/helpers\";\nimport styles from \"./Diff.module.css\";\nimport { TableRow } from \"src/components/InvoiceDatasheet/InvoiceDatasheet\";\nimport { getTotalsLine } from \"src/components/InvoiceDatasheet/helpers\";\nimport get from \"lodash/get\";\n\nconst renderGrid = (lineItems) =>\n  lineItems.reduce(\n    (acc, line) => {\n      const {\n        type,\n        index,\n        domain,\n        subdomain,\n        description,\n        proposalname,\n        subuserid,\n        subrate,\n        labor,\n        expenses,\n        rate,\n        ...others\n      } = line;\n\n      const laborHours = +fromMinutesToHours(labor);\n      const subRate = +fromUSDCentsToUSDUnits(subrate);\n      const lineExpenses = +fromUSDCentsToUSDUnits(expenses);\n\n      const subTotal =\n        type !== 4 ? laborHours * rate + expenses : laborHours * subRate;\n      const lineSubTotal = +fromUSDCentsToUSDUnits(subTotal);\n      const newLine = [\n        { value: index + 1 },\n        { value: type },\n        { value: domain },\n        { value: subdomain },\n        {\n          value: description,\n          multiline: true\n        },\n        { value: proposalname },\n        { value: subuserid },\n        { value: subRate },\n        { value: laborHours },\n        { value: lineExpenses },\n        { value: lineSubTotal }\n      ];\n      return {\n        grid: acc.grid.concat({ items: newLine, ...others }),\n        expenseTotal: acc.expenseTotal + (line.removed ? 0 : line.expenses),\n        laborTotal: acc.laborTotal + (line.removed ? 0 : line.labor),\n        total: acc.total + (line.removed ? 0 : lineSubTotal)\n      };\n    },\n    { grid: [], expenseTotal: 0, laborTotal: 0, total: 0 }\n  );\n\nconst DiffLineitems = ({ lineItems, proposals }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n\n  const getProposalName = useCallback(\n    (token) => get(proposals, [token, \"name\"]),\n    [proposals]\n  );\n\n  const { grid, expenseTotal, laborTotal, total } = useMemo(() => {\n    const newLineItems = lineItems.map((item) => ({\n      ...item,\n      proposalname: getProposalName(item.proposaltoken)\n    }));\n    return renderGrid(newLineItems);\n  }, [lineItems, getProposalName]);\n\n  const numberOfCols = grid.length && grid[0] && grid[0].items.length;\n\n  const newTotals = [\n    { value: \"Total\" },\n    { value: +fromMinutesToHours(laborTotal) },\n    { value: expenseTotal },\n    { value: total }\n  ];\n  const lastLine = getTotalsLine(numberOfCols, newTotals);\n\n  const dataSheet = grid.concat({ items: lastLine });\n\n  return (\n    <>\n      {dataSheet.map((line, index) => (\n        <TableRow\n          key={index}\n          className={classNames(\n            line.added && isDarkTheme && styles.lineitemsAddedDark,\n            line.added && !isDarkTheme && styles.lineitemsAdded,\n            line.removed && isDarkTheme && styles.lineitemsRemovedDark,\n            line.removed && !isDarkTheme && styles.lineitemsRemoved\n          )}\n        >\n          {line.items.map((item, idx) => (\n            <td\n              key={idx}\n              className={classNames(\"cell\", item.multiline && styles.multiline)}\n            >\n              {item.value}\n            </td>\n          ))}\n        </TableRow>\n      ))}\n    </>\n  );\n};\n\nDiffLineitems.propTypes = {\n  lineItems: PropTypes.array.isRequired\n};\n\nexport default DiffLineitems;\n","import InvoiceDatasheet from \"./InvoiceDatasheet\";\nexport * from \"./helpers\";\n\nexport default InvoiceDatasheet;\n","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { classNames } from \"pi-ui\";\nimport { diffWordsWithSpace } from \"diff\";\nimport {\n  arrayDiff,\n  lineDiffFunc,\n  getLineArray,\n  getFilesDiff,\n  getLineitemsDiff,\n  setLineitemParams\n} from \"./helpers\";\nimport DiffLine from \"./DiffLine\";\nimport styles from \"./Diff.module.css\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport { ImageThumbnail, TextThumbnail } from \"src/components/Files\";\nimport ModalFullImage from \"src/components/ModalFullImage\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport DiffLineitemsDatasheet from \"./DiffLineitems\";\nimport { SheetRenderer } from \"src/components/InvoiceDatasheet/InvoiceDatasheet\";\nimport { createTableHeaders } from \"src/components/InvoiceDatasheet\";\n\nconst handleDiffLine = (\n  line,\n  index,\n  oldTextLineCounter,\n  newTextLineCounter\n) => {\n  const { removed, value, added } = line;\n  const diffLine = [];\n  const dw = diffWordsWithSpace(removed ? removed : \"\", value ? value : \"\");\n  const diffStrings = dw.map(({ value }) => value);\n  diffLine.push(\n    <DiffLine\n      key={index}\n      removed={!!removed}\n      added={added}\n      content={diffStrings}\n      removedIndex={added ? newTextLineCounter : oldTextLineCounter}\n    />\n  );\n\n  return diffLine;\n};\n\nexport const DiffHTML = ({ oldTextBody, newTextBody }) => {\n  const linesDiff = useMemo(() => {\n    const oldComLines = getLineArray(oldTextBody);\n    const newComLines = getLineArray(newTextBody);\n    let newTextLineCounter = 0,\n      oldTextLineCounter = 0;\n    return arrayDiff(newComLines, oldComLines, lineDiffFunc)\n      .sort((a, b) => a.lineIndex - b.lineIndex)\n      .map((line, index) => {\n        if (line.value !== \"\" || line.removed) {\n          if (line.added) {\n            newTextLineCounter += 1;\n          } else if (line.removed) {\n            oldTextLineCounter += 1;\n          } else {\n            newTextLineCounter += 1;\n            oldTextLineCounter += 1;\n          }\n          return handleDiffLine(\n            line,\n            index,\n            oldTextLineCounter,\n            newTextLineCounter\n          );\n        } else {\n          newTextLineCounter += 1;\n          oldTextLineCounter += 1;\n          return (\n            <DiffLine\n              addedIndex={newTextLineCounter}\n              removedIndex={oldTextLineCounter}\n              key={index}\n            />\n          );\n        }\n      });\n  }, [newTextBody, oldTextBody]);\n  return (\n    <table className={styles.diffTable} cellSpacing=\"0\" cellPadding=\"0\">\n      <tbody>{linesDiff}</tbody>\n    </table>\n  );\n};\n\nconst FileWrapper = ({ file, className }) => {\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n  const openFullImageModal = (file) => {\n    handleOpenModal(ModalFullImage, {\n      images: [file],\n      onClose: handleCloseModal\n    });\n  };\n\n  return file.mime.includes(\"image\") ? (\n    <>\n      <ImageThumbnail\n        className={className}\n        file={file}\n        viewOnly={true}\n        onClick={openFullImageModal}\n      />\n    </>\n  ) : (\n    <TextThumbnail file={file} viewOnly />\n  );\n};\n\nexport const FilesDiff = ({ oldFiles, newFiles }) => {\n  const files = getFilesDiff(newFiles, oldFiles);\n  return (\n    <table className={classNames(styles.diffTable)}>\n      <tbody>\n        <tr className={styles.files}>\n          {files.length > 0 ? (\n            files.map((file, key) => {\n              return file.added ? (\n                <td key={key}>\n                  <FileWrapper file={file} className={styles.fileAdded} />\n                </td>\n              ) : file.removed ? (\n                <td key={key}>\n                  <FileWrapper file={file} className={styles.fileRemoved} />\n                </td>\n              ) : (\n                <td key={key}>\n                  <FileWrapper file={file} className={styles.fileUnchanged} />\n                </td>\n              );\n            })\n          ) : (\n            <td className={styles.noFiles}>\n              <HelpMessage>There are no attachment changes</HelpMessage>\n            </td>\n          )}\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n\nexport const DiffText = ({ newText, oldText }) => {\n  const diff = diffWordsWithSpace(oldText, newText);\n  return diff.map((elem, index) => (\n    <span\n      key={index}\n      className={classNames(\n        elem.added && styles.lineAdded,\n        elem.removed && styles.lineRemoved\n      )}\n    >\n      {elem.value}\n    </span>\n  ));\n};\n\nexport const DiffInvoices = ({ oldData, newData, className, proposals }) => {\n  const newLineitems = setLineitemParams(newData.lineitems, {\n    rate: newData.contractorrate\n  });\n  const oldLineitems = setLineitemParams(oldData.lineitems, {\n    rate: oldData.contractorrate\n  });\n\n  const lineitemsDiff = getLineitemsDiff(newLineitems, oldLineitems);\n\n  return (\n    <SheetRenderer headers={createTableHeaders()} className={className}>\n      <DiffLineitemsDatasheet lineItems={lineitemsDiff} proposals={proposals} />\n    </SheetRenderer>\n  );\n};\n\nDiffText.propTypes = {\n  newText: PropTypes.string.isRequired,\n  oldText: PropTypes.string\n};\n","import React, { useMemo } from \"react\";\nimport {\n  DEFAULT_DARK_THEME_NAME,\n  Dropdown,\n  DropdownItem,\n  getThemeProperty,\n  useTheme\n} from \"pi-ui\";\nimport styles from \"./ModalDiff.module.css\";\nimport IconButton from \"../IconButton\";\nimport PropTypes from \"prop-types\";\nimport { COMPARE, BASE, ZERO_VERSION_ALIAS } from \"./constants\";\nimport rangeRight from \"lodash/rangeRight\";\n\nconst CompareVersionSelector = ({\n  onChange,\n  className,\n  latest,\n  base,\n  compare\n}) => {\n  const { theme, themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  const darkIconColor = getThemeProperty(theme, \"text-color\");\n  const iconColor = isDarkTheme ? darkIconColor : undefined;\n  const versionsOptions = useMemo(() => rangeRight(latest + 1), [latest]);\n\n  return (\n    <div className={styles.versionSelectorContainer}>\n      <Dropdown\n        title={base ? `version ${base}` : ZERO_VERSION_ALIAS}\n        className={styles.versionSelectorWrapper}\n        itemsListClassName={className}\n      >\n        {versionsOptions.map(\n          (v) =>\n            compare > v && (\n              <DropdownItem\n                key={v}\n                onClick={() => {\n                  onChange(BASE, v);\n                }}\n              >\n                {v ? `version ${v}` : ZERO_VERSION_ALIAS}\n              </DropdownItem>\n            )\n        )}\n      </Dropdown>\n      <IconButton\n        className={styles.versionCompareIcon}\n        iconColor={iconColor}\n        type=\"compare\"\n      />\n      <Dropdown\n        title={`version ${compare}`}\n        className={styles.versionSelectorWrapper}\n        itemsListClassName={className}\n      >\n        {versionsOptions.map((v) => {\n          return (\n            base < v && (\n              <DropdownItem key={v} onClick={() => onChange(COMPARE, v)}>\n                version {v}\n              </DropdownItem>\n            )\n          );\n        })}\n      </Dropdown>\n    </div>\n  );\n};\nCompareVersionSelector.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  latest: PropTypes.number.isRequired,\n  base: PropTypes.number.isRequired,\n  compare: PropTypes.number.isRequired,\n  baseLoading: PropTypes.bool,\n  compareLoading: PropTypes.bool\n};\n\nexport default CompareVersionSelector;\n","export const COMPARE = \"compare\";\nexport const BASE = \"base\";\nexport const ZERO_VERSION_ALIAS = \"----------\";\n","import { Event, JoinTitle } from \"../RecordWrapper\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst TimestampTitle = ({ proposal }) => {\n  return (\n    <JoinTitle>\n      {proposal.timestamp !== proposal.publishedat &&\n        proposal.timestamp !== proposal.abandonedat && (\n          <Event\n            className=\"margin-left-s margin-right-s\"\n            event=\"edited\"\n            timestamp={proposal.timestamp}\n          />\n        )}\n      {proposal.abandonedat && (\n        <Event\n          className=\"margin-left-s margin-right-s\"\n          event=\"abandoned\"\n          timestamp={proposal.abandonedat}\n        />\n      )}\n    </JoinTitle>\n  );\n};\nTimestampTitle.propTypes = {\n  proposal: PropTypes.object.isRequired\n};\n\nexport default TimestampTitle;\n","import { useState, useMemo } from \"react\";\nimport { COMPARE, BASE } from \"./constants\";\nimport * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\nimport drop from \"lodash/drop\";\nimport { getAttachmentsFiles, parseRawProposal } from \"src/helpers\";\nimport useFetchMachine, {\n  FETCH,\n  REJECT,\n  RESOLVE,\n  START\n} from \"src/hooks/utils/useFetchMachine\";\n\nconst parseProposal = (proposal) => {\n  if (!proposal) {\n    // Return empty data for case: proposal = undefined.\n    return {\n      details: {},\n      files: [],\n      text: \"\",\n      title: \"\"\n    };\n  }\n  // Parse current version.\n  const { description, name } = parseRawProposal(proposal);\n  return {\n    details: proposal,\n    files: getAttachmentsFiles(proposal.files),\n    text: description,\n    title: name\n  };\n};\n\nexport function useCompareVersionSelector(initVersion, token) {\n  const [versionsQueue, setVersionsQueue] = useState([\n    initVersion,\n    initVersion - 1\n  ]);\n  const [fetchedProposals, setFetchedProposals] = useState({});\n  const [baseVersion, setBaseVersion] = useState(initVersion - 1);\n  const [compareVersion, setCompareVersion] = useState(initVersion);\n  const baseProposal = useMemo(() => {\n    const proposal = fetchedProposals[baseVersion];\n    return parseProposal(proposal);\n  }, [baseVersion, fetchedProposals]);\n  const compareProposal = useMemo(() => {\n    const proposal = fetchedProposals[compareVersion];\n    return parseProposal(proposal);\n  }, [compareVersion, fetchedProposals]);\n  const onFetchProposalDetailsWithoutState = useAction(\n    act.onFetchProposalDetailsWithoutState\n  );\n\n  const [state, send] = useFetchMachine({\n    actions: {\n      initial: () => {\n        if (versionsQueue.length) {\n          return send(START);\n        }\n        return send(RESOLVE);\n      },\n      start: () => {\n        if (!versionsQueue.length) {\n          return send(RESOLVE);\n        }\n        const version = versionsQueue[0];\n        if (version <= 0) {\n          setVersionsQueue(drop(versionsQueue));\n          return send(START);\n        }\n        onFetchProposalDetailsWithoutState(token, version)\n          .then((proposal) => {\n            setFetchedProposals({\n              ...fetchedProposals,\n              [version]: proposal\n            });\n            setVersionsQueue(drop(versionsQueue));\n            if (setVersionsQueue.length) {\n              return send(START);\n            }\n            return send(RESOLVE);\n          })\n          .catch((e) => send(REJECT, e));\n\n        return send(FETCH);\n      },\n      done: () => {}\n    },\n    initialValues: {\n      status: \"idle\",\n      loading: true,\n      verifying: true\n    }\n  });\n\n  const changedVersion = (versionType, v) => {\n    if (versionType === COMPARE) {\n      setCompareVersion(v);\n    }\n    if (versionType === BASE) {\n      setBaseVersion(v);\n    }\n    if (!fetchedProposals[v]) {\n      setVersionsQueue([v, ...versionsQueue]);\n      send(START);\n    }\n  };\n  const fetchingNotDone = state.loading || state.status !== \"success\";\n\n  return {\n    baseVersion,\n    compareVersion,\n    changedVersion,\n    baseProposal,\n    compareProposal,\n    loading: fetchingNotDone\n  };\n}\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport { Spinner, Tab, Tabs } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport { DiffHTML, FilesDiff, DiffText } from \"src/components/Diff/Diff\";\nimport CompareVersionSelector from \"./CompareVersionSelector\";\nimport TimestampTitle from \"./TimestampTitle\";\nimport {\n  Header,\n  Title,\n  Author,\n  JoinTitle,\n  DownloadTimestamps\n} from \"src/components/RecordWrapper\";\nimport styles from \"./ModalDiff.module.css\";\nimport { useCompareVersionSelector } from \"./hooks\";\n\nconst DiffProposal = ({ latest, initVersion, token, ...props }) => {\n  const {\n    baseVersion,\n    compareVersion,\n    changedVersion,\n    baseProposal,\n    compareProposal,\n    loading\n  } = useCompareVersionSelector(initVersion, token);\n\n  const isDiffAvailable = useMemo(() => {\n    return !!baseProposal.details && !!compareProposal.details && !loading;\n  }, [baseProposal, compareProposal, loading]);\n\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\n  useEffect(() => {\n    setActiveTabIndex(0);\n  }, [props.show]);\n\n  return (\n    <>\n      <Header\n        title={<Title>Compare changes</Title>}\n        subtitle={\n          <p className={styles.headerSubtitle}>\n            Compare changes across different versions of the record.\n          </p>\n        }\n      />\n      <CompareVersionSelector\n        latest={latest}\n        onChange={changedVersion}\n        base={baseVersion}\n        compare={compareVersion}\n      />\n      {isDiffAvailable ? (\n        <>\n          <Header\n            title={\n              <p className={styles.titleDiff}>\n                <DiffText\n                  oldText={baseProposal.title}\n                  newText={compareProposal.title}\n                />\n              </p>\n            }\n            subtitle={\n              <JoinTitle className=\"margin-top-s\" separatorSymbol=\":\">\n                <Author\n                  username={compareProposal.details.username}\n                  url={`/user/${compareProposal.details.userid}`}\n                />\n                <JoinTitle separatorSymbol=\"-\">\n                  {baseVersion > 0 && (\n                    <TimestampTitle proposal={baseProposal.details} />\n                  )}\n                  <TimestampTitle proposal={compareProposal.details} />\n                </JoinTitle>\n              </JoinTitle>\n            }\n          />\n          <span>\n            Download the timestamps for &nbsp;\n            {baseVersion > 0 && (\n              <>\n                <DownloadTimestamps\n                  label={`version ${baseProposal.details.version}`}\n                  version={baseProposal.details.version}\n                  token={token}\n                />\n                &nbsp; or &nbsp;\n              </>\n            )}\n            <DownloadTimestamps\n              label={`version ${compareProposal.details.version}`}\n              version={compareProposal.details.version}\n              token={token}\n            />\n          </span>\n          <Tabs\n            onSelectTab={setActiveTabIndex}\n            activeTabIndex={activeTabIndex}\n            className={styles.diffTabs}\n            contentClassName={styles.diffTabContent}\n          >\n            <Tab label=\"Text Changes\">\n              <div className={styles.diffWrapper}>\n                <DiffHTML\n                  oldTextBody={baseProposal.text}\n                  newTextBody={compareProposal.text}\n                />\n              </div>\n            </Tab>\n            <Tab label=\"Attachments Changes\">\n              <FilesDiff\n                oldFiles={baseProposal.files}\n                newFiles={compareProposal.files}\n              />\n            </Tab>\n          </Tabs>\n        </>\n      ) : (\n        <div className={styles.versionSpinnerContainer}>\n          <Spinner width=\"5rem\" height=\"5rem\" invert />\n        </div>\n      )}\n    </>\n  );\n};\nDiffProposal.propTypes = {\n  latest: PropTypes.number.isRequired,\n  initVersion: PropTypes.number.isRequired,\n  token: PropTypes.string.isRequired\n};\n\nexport default DiffProposal;\n","import React from \"react\";\nimport { Modal } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport DiffProposal from \"./DiffProposal\";\nimport styles from \"./ModalDiff.module.css\";\n\nconst ModalDiffProposal = ({\n  onClose,\n  latest,\n  initVersion,\n  token,\n  ...props\n}) => {\n  return (\n    <Modal onClose={onClose} contentClassName={styles.modalContent} {...props}>\n      <DiffProposal\n        latest={latest}\n        initVersion={initVersion}\n        token={token}\n        {...props}\n      />\n    </Modal>\n  );\n};\nModalDiffProposal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  latest: PropTypes.number.isRequired,\n  initVersion: PropTypes.number.isRequired,\n  token: PropTypes.string.isRequired\n};\n\nexport default ModalDiffProposal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Text, classNames } from \"pi-ui\";\nimport styles from \"./Invoice.module.css\";\n\nconst Field = ({ label, value, renderValue }) => {\n  return (\n    <div className={styles.field}>\n      <Text className={styles.fieldLabel}>{label}</Text>\n      {renderValue ? (\n        renderValue(value)\n      ) : (\n        <Text\n          size=\"large\"\n          className={classNames(\"margin-top-xs margin-bottom-xs\")}\n        >\n          {value}\n        </Text>\n      )}\n    </div>\n  );\n};\n\nField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.any,\n  renderValue: PropTypes.func\n};\n\nexport default Field;\n","import {\n  getCurrentMonth,\n  getCurrentYear,\n  getCurrentDateValue\n} from \"src/helpers\";\nimport { INVOICE_STATUS_NEW, INVOICE_STATUS_UPDATED } from \"./constants\";\nimport flow from \"lodash/fp/flow\";\nimport map from \"lodash/fp/map\";\nimport filter from \"lodash/fp/filter\";\nimport uniq from \"lodash/fp/uniq\";\n\n/**\n * Returns the initial month and year to be applied to a blank invoice form\n * @returns {Object} { year, month}\n */\nexport const getInitialDateValue = () => {\n  const year = getCurrentYear();\n  const month = getCurrentMonth();\n\n  // case is december\n  if (month === 1) {\n    return {\n      year: year - 1,\n      month: 12\n    };\n  }\n\n  return {\n    year,\n    month: month - 1\n  };\n};\n\n/**\n * Returns the range of years and months allowed for payouts\n * @returns {Object} { min, max }\n */\nexport const getPayoutsMinMaxYearAndMonth = () => {\n  const min = { year: 2018, month: 1 };\n  return {\n    min,\n    max: getCurrentDateValue()\n  };\n};\n\n/**\n * Returns the range of years and months allowed for invoice\n * @returns {Object} { min, max }\n */\nexport const getInvoiceMinMaxYearAndMonth = () => {\n  const min = { year: 2018, month: 1 };\n  return {\n    min,\n    max: getInitialDateValue()\n  };\n};\n\n/**\n * Returns a presentational name for a given invoice based on the contractor\n * name, month and year\n * @param {Object} invoice\n */\nexport const presentationalInvoiceName = (invoice) =>\n  invoice && invoice.input\n    ? `${invoice.input.contractorname || invoice.username} - ${\n        invoice.input.month\n      }/${invoice.input.year}`\n    : \"\";\n\n/**\n * Returns a presentational name for a draft invoice\n * @param {Object} invoice\n */\nexport const presentationalDraftInvoiceName = (draft) =>\n  draft ? `${draft.name} - ${draft.date.month}/${draft.date.year}` : \"\";\n\n/**\n * Returns true if the given invoice wasn't reviewed by an admin yet\n * @param {Object} invoice\n */\nexport const isUnreviewedInvoice = (invoice) =>\n  invoice.status === INVOICE_STATUS_NEW ||\n  invoice.status === INVOICE_STATUS_UPDATED;\n\nexport const getInvoiceTotalHours = (invoice) => {\n  if (!invoice) return 0;\n  return invoice.input.lineitems.reduce((total, item) => {\n    return (total += item.labor / 60);\n  }, 0);\n};\n\nexport const hasDecimalPlaces = (num) => num % 1 !== 0;\n\nexport const getInvoiceTotalExpenses = (invoice) => {\n  if (!invoice) return 0;\n  return invoice.input.lineitems.reduce(\n    (total, item) => (total += item.expenses / 100),\n    0\n  );\n};\n\nexport const getInvoiceTotalAmount = (invoice) => {\n  if (!invoice) return 0;\n  const totalHours = getInvoiceTotalHours(invoice);\n  const totalExpenses = getInvoiceTotalExpenses(invoice);\n  const rate = invoice.input.contractorrate / 100;\n  return rate * totalHours + totalExpenses;\n};\n\n/**\n * Returns min, max of a date range as array of two items.\n * the first item is the beginning and second is current date obj\n * @param {Number} range - number of months included in range\n */\nexport const getPreviousMonthsRange = (range) => {\n  const minDate = new Date();\n  let minMonth = minDate.getMonth() + 1;\n  let minYear = minDate.getFullYear();\n  if (minMonth > range) {\n    minMonth = minMonth - range;\n  } else {\n    minMonth = 12 - (range - minMonth);\n    minYear = minYear - 1;\n  }\n  return [\n    {\n      month: minMonth,\n      year: minYear\n    },\n    getInitialDateValue()\n  ];\n};\n\nexport const getProposalsTokensFromInvoice = (invoice) =>\n  invoice &&\n  invoice.input &&\n  invoice.input.lineitems &&\n  flow(\n    map(({ proposaltoken }) => proposaltoken),\n    uniq,\n    filter((t) => t !== \"\")\n  )(invoice.input.lineitems);\n","export const INVOICE_STATUS_INVALID = 0; // Invalid status XXX?\nexport const INVOICE_STATUS_NOTFOUND = 1; // Invoice not found XXX?\n\nexport const INVOICE_STATUS_NEW = 2; // Invoice has not been reviewed\nexport const INVOICE_STATUS_UPDATED = 3; // Invoice has unreviewed changes\nexport const INVOICE_STATUS_DISPUTED = 4; // Invoice has been disputed for some reason\nexport const INVOICE_STATUS_REJECTED = 5; // Invoice needs to be revised\nexport const INVOICE_STATUS_APPROVED = 6; // Invoice has been approved\nexport const INVOICE_STATUS_PAID = 7; // Invoice has been paid\n\nexport const SUB_HOURS_LINE_ITEM = 4;\n","import React, { useMemo } from \"react\";\nimport { Text, Modal, CopyableText, Message } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport { DiffInvoices } from \"src/components/Diff/Diff\";\nimport {\n  Author,\n  Event,\n  Title,\n  Header,\n  Subtitle,\n  RecordToken\n} from \"src/components/RecordWrapper\";\nimport Field from \"src/components/Invoice/Field\";\nimport { Row } from \"src/components/layout\";\nimport styles from \"./ModalDiff.module.css\";\nimport { presentationalInvoiceName } from \"src/containers/Invoice/helpers\";\nimport uniq from \"lodash/uniq\";\nimport useApprovedProposals from \"src/hooks/api/useApprovedProposals\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst ModalDiffInvoice = ({ onClose, invoice, prevInvoice, ...props }) => {\n  const prevInput = prevInvoice && prevInvoice.input ? prevInvoice.input : [];\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n  const proposalsTokens = useMemo(() => {\n    const prevTokens = prevInput.lineitems\n      ? prevInput.lineitems.map(({ proposaltoken }) => proposaltoken)\n      : [];\n    const tokens = invoice.input.lineitems.map(\n      ({ proposaltoken }) => proposaltoken\n    );\n    return uniq([...prevTokens, ...tokens]).filter((t) => t !== \"\");\n  }, [invoice.input.lineitems, prevInput]);\n\n  const { proposalsByToken, error } = useApprovedProposals(\n    proposalPageSize,\n    proposalsTokens\n  );\n\n  return (\n    <Modal\n      onClose={onClose}\n      {...props}\n      contentStyle={{ width: \"100%\", minHeight: \"40rem\" }}\n    >\n      {error && <Message kind=\"error\">{error.toString()}</Message>}\n      <Header\n        title={\n          <Title id={\"proposal-title-gfsag\"} truncate linesBeforeTruncate={2}>\n            {presentationalInvoiceName(invoice)}\n          </Title>\n        }\n        subtitle={\n          <Subtitle>\n            <Author\n              username={invoice.username}\n              url={`/user/${invoice.userid}`}\n            />\n            {invoice.timestamp !== invoice.publishedat &&\n              invoice.timestamp !== invoice.abandonedat && (\n                <Event event=\"edited\" timestamp={invoice.timestamp} />\n              )}\n            {invoice.abandonedat && (\n              <Event event={\"abandoned\"} timestamp={invoice.abandonedat} />\n            )}\n            {invoice.version && (\n              <Text\n                id={`proposal-${invoice.proposalToken}-version`}\n                className={styles.version}\n              >{`version ${invoice.version}`}</Text>\n            )}\n          </Subtitle>\n        }\n      />\n      <Row topMarginSize=\"s\">\n        <RecordToken token={invoice.censorshiprecord.token} />\n      </Row>\n      <Row justify=\"space-between\" className={styles.topDetails}>\n        <div className={styles.field}>\n          <Text weight=\"semibold\">{invoice.input.contractorname}</Text>\n          <Text>{invoice.input.contractorlocation}</Text>\n          <Text>{invoice.input.contractorcontact}</Text>\n        </div>\n        <Field\n          label={\"Pay to Address:\"}\n          value={invoice.input.paymentaddress}\n          renderValue={(addr) => (\n            <CopyableText\n              id=\"invoice-diff-payment-address\"\n              truncate\n              tooltipPlacement={\"bottom\"}\n            >\n              {addr}\n            </CopyableText>\n          )}\n        />\n      </Row>\n      <div className={styles.lineitemsWrapper}>\n        <DiffInvoices\n          newData={invoice.input}\n          oldData={prevInput}\n          proposals={proposalsByToken}\n          className=\"margin-top-m\"\n        />\n      </div>\n    </Modal>\n  );\n};\nModalDiffInvoice.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  oldText: PropTypes.string,\n  newText: PropTypes.string,\n  oldFiles: PropTypes.array,\n  newFiles: PropTypes.array,\n  proposalDetails: PropTypes.object\n};\n\nexport default ModalDiffInvoice;\n","import { useState, useCallback } from \"react\";\nimport { invoice as onFetchInvoice } from \"src/lib/api.js\";\nimport { ModalDiffProposal, ModalDiffInvoice } from \"src/components/ModalDiff\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport { useConfig } from \"src/containers/Config\";\n\nexport function useVersionPicker(version, token) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedVersion, setSelectedVersion] = useState(version);\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n  const { recordType, constants } = useConfig();\n  const [error, setError] = useState();\n\n  async function fetchInvoiceVersions(token, version) {\n    let prevInvoice = null;\n    const { invoice } = await onFetchInvoice(token, version);\n    if (invoice.version > 1) {\n      const { invoice: prevInvoiceResponse } = await onFetchInvoice(\n        token,\n        version - 1\n      );\n      prevInvoice = prevInvoiceResponse;\n    }\n    return {\n      invoice,\n      prevInvoice\n    };\n  }\n\n  const onChangeVersion = useCallback(\n    async (v, latest) => {\n      setSelectedVersion(v);\n      try {\n        if (recordType === constants.RECORD_TYPE_PROPOSAL) {\n          handleOpenModal(ModalDiffProposal, {\n            onClose: handleCloseModal,\n            latest: latest,\n            initVersion: v,\n            token: token\n          });\n        }\n        if (recordType === constants.RECORD_TYPE_INVOICE) {\n          const { invoice, prevInvoice } = await fetchInvoiceVersions(token, v);\n          setIsLoading(false);\n          handleOpenModal(ModalDiffInvoice, {\n            onClose: handleCloseModal,\n            invoice,\n            prevInvoice\n          });\n        }\n      } catch (err) {\n        setIsLoading(false);\n        setError(err);\n      }\n    },\n    [\n      recordType,\n      constants.RECORD_TYPE_PROPOSAL,\n      constants.RECORD_TYPE_INVOICE,\n      token,\n      handleOpenModal,\n      handleCloseModal\n    ]\n  );\n\n  const disablePicker = version === 1;\n\n  return {\n    disablePicker,\n    selectedVersion,\n    onChangeVersion,\n    error,\n    isLoading\n  };\n}\n","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Dropdown, DropdownItem, Spinner } from \"pi-ui\";\nimport { useVersionPicker } from \"./hooks\";\n\nconst VersionPicker = ({ version, token, className, proposalState }) => {\n  const { disablePicker, onChangeVersion, isLoading } = useVersionPicker(\n    version,\n    token,\n    proposalState\n  );\n\n  const versionsOptions = useMemo(() => {\n    const versions = [];\n    for (let index = version; index >= 1; index--) {\n      versions.push(index);\n    }\n    return versions;\n  }, [version]);\n\n  return (\n    !disablePicker &&\n    (!isLoading ? (\n      <Dropdown\n        title={`version ${version}`}\n        className={className}\n        itemsListClassName={className}\n      >\n        {versionsOptions.map((v) => (\n          <DropdownItem\n            key={v}\n            onClick={() => {\n              onChangeVersion(v, version);\n            }}\n          >\n            version {v}\n          </DropdownItem>\n        ))}\n      </Dropdown>\n    ) : (\n      <div style={{ padding: \"2px\" }}>\n        <Spinner invert />\n      </div>\n    ))\n  );\n};\n\nVersionPicker.propTypes = {\n  version: PropTypes.number.isRequired,\n  token: PropTypes.string.isRequired,\n  className: PropTypes.string\n};\n\nexport default VersionPicker;\n","import {\n  classNames,\n  StatusBar,\n  StatusTag,\n  Text,\n  Message,\n  useMediaQuery,\n  useTheme,\n  Tooltip,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport React, { useMemo } from \"react\";\nimport Markdown from \"../Markdown\";\nimport ModalSearchVotes from \"../ModalSearchVotes\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport IconButton from \"src/components/IconButton\";\nimport { getProposalStatusTagProps, getStatusBarData } from \"./helpers\";\nimport {\n  PROPOSAL_TYPE_RFP,\n  PROPOSAL_TYPE_RFP_SUBMISSION,\n  PROPOSAL_STATE_VETTED\n} from \"src/constants\";\nimport {\n  getMarkdownContent,\n  getVotesReceived,\n  isAbandonedProposal,\n  isCensoredProposal,\n  isPublicProposal,\n  isClosedProposal,\n  isActiveRfp,\n  isEditableProposal,\n  getQuorumInVotes,\n  getEligibleTickets,\n  isVoteActiveProposal,\n  isVotingFinishedProposal,\n  getProposalToken,\n  isVotingAuthorizedProposal,\n  goToFullProposal\n} from \"src/containers/Proposal/helpers\";\nimport {\n  useProposalVote,\n  useProposalURLs\n} from \"src/containers/Proposal/hooks\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport { useLoader } from \"src/containers/Loader\";\nimport styles from \"./Proposal.module.css\";\nimport LoggedInContent from \"src/components/LoggedInContent\";\nimport ProposalsList from \"../ProposalsList/ProposalsList\";\nimport VotesCount from \"./VotesCount\";\nimport DownloadComments from \"src/containers/Comments/Download\";\nimport DownloadCommentsTimestamps from \"src/containers/Comments/Download/DownloadCommentsTimestamps\";\nimport DownloadVotesTimestamps from \"src/containers/Proposal/Download/DownloadVotesTimestamps\";\nimport ProposalActions from \"./ProposalActions\";\nimport ThumbnailGrid from \"src/components/Files\";\nimport VersionPicker from \"src/components/VersionPicker\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport { useRouter } from \"src/components/Router\";\nimport { shortRecordToken, isEmpty, getKeyByValue } from \"src/helpers\";\nimport { usdFormatter } from \"src/utils\";\nimport * as sel from \"src/selectors\";\nimport { useSelector } from \"../../redux\";\n\n/**\n * replaceImgDigestWithPayload uses a regex to parse images\n * @param {String} text the markdown description\n * @param {Map} files a files array\n * @returns {object} { text, markdownFiles }\n */\nfunction replaceImgDigestWithPayload(text, files) {\n  const imageRegexParser =\n    /!\\[[^\\]]*\\]\\((?<digest>.*?)(?=\"|\\))(?<optionalpart>\".*\")?\\)/g;\n  const imgs = text.matchAll(imageRegexParser);\n  let newText = text;\n  const markdownFiles = [];\n  /**\n   * This for loop will update the newText replacing images digest by their\n   * base64 payload and push the img object to an array of markdownFiles.\n   * */\n  for (const img of imgs) {\n    const { digest } = img.groups;\n    const obj = getKeyByValue(files, digest);\n    if (obj) {\n      markdownFiles.push(obj);\n      newText = newText.replace(\n        digest,\n        `data:${obj.mime};base64,${obj.payload}`\n      );\n    }\n  }\n  return { text: newText, markdownFiles };\n}\n\nconst ProposalWrapper = (props) => {\n  const shortToken = shortRecordToken(getProposalToken(props.proposal));\n  const {\n    voteSummary,\n    proposalSummary,\n    voteBlocksLeft,\n    voteEndTimestamp,\n    billingStatusChangeMetadata\n  } = useProposalVote(shortToken);\n  const { currentUser } = useLoaderContext();\n  const { history } = useRouter();\n  return (\n    <Proposal\n      {...{\n        ...props,\n        voteSummary,\n        proposalSummary,\n        billingStatusChangeMetadata,\n        voteBlocksLeft,\n        voteEndTimestamp,\n        currentUser,\n        history\n      }}\n    />\n  );\n};\n\nconst Proposal = React.memo(function Proposal({\n  proposal,\n  extended,\n  collapseBodyContent,\n  voteSummary,\n  proposalSummary,\n  billingStatusChangeMetadata,\n  billingStatusChangeUsername,\n  voteEndTimestamp,\n  voteBlocksLeft,\n  currentUser,\n  history\n}) {\n  const {\n    censorshiprecord,\n    files,\n    name,\n    publishedat,\n    abandonedat,\n    censoredat,\n    timestamp,\n    userid,\n    username,\n    version,\n    linkby,\n    linkto,\n    legacytoken,\n    proposedFor,\n    type,\n    rfpSubmissions,\n    state,\n    commentsCount,\n    statuschangemsg,\n    statuschangeusername,\n    amount,\n    domain,\n    startDate,\n    endDate\n  } = proposal;\n  const { startblockheight, endblockheight } = voteSummary || {};\n  const isAdmin = useSelector(sel.currentUserIsAdmin);\n  const isVetted = state === PROPOSAL_STATE_VETTED;\n  const isRfp = !!linkby || type === PROPOSAL_TYPE_RFP;\n  const isRfpSubmission = !!linkto || type === PROPOSAL_TYPE_RFP_SUBMISSION;\n  const isRfpActive = isRfp && isActiveRfp(linkby);\n  const isNotExtendedRfpOrSubmission = (isRfp || isRfpSubmission) && !extended;\n  const hasVoteSummary = !!voteSummary && !!voteSummary.endblockheight;\n  const shortToken = shortRecordToken(\n    censorshiprecord && censorshiprecord.token\n  );\n  const fullToken = censorshiprecord && censorshiprecord.token;\n  const votesCount = !!voteSummary && getVotesReceived(voteSummary);\n  const { proposalURL, authorURL, commentsURL, rfpProposalURL } =\n    useProposalURLs(shortToken, userid, isRfpSubmission, linkto);\n  const isPublic = isPublicProposal(proposal);\n  const isVotingFinished = isVotingFinishedProposal(voteSummary);\n  const isVoteActive = isVoteActiveProposal(voteSummary);\n  const isAbandoned = isAbandonedProposal(proposalSummary);\n  const isCensored = isCensoredProposal(proposal);\n  const isClosed = isClosedProposal(proposalSummary);\n  const proposalStatusReason =\n    isCensored || isAbandoned\n      ? statuschangemsg\n      : isClosed\n      ? billingStatusChangeMetadata?.reason\n      : \"\";\n  const proposalStatusUsername =\n    isCensored || isAbandoned\n      ? statuschangeusername\n      : isClosed\n      ? billingStatusChangeUsername\n      : \"\";\n  const isPublicAccessible = isPublic || isAbandoned || isCensored;\n  const isAuthor = currentUser && currentUser.username === username;\n  const isVotingAuthorized = isVotingAuthorizedProposal(voteSummary);\n  const isEditable = isAuthor && isEditableProposal(proposal, voteSummary);\n  const { apiInfo } = useLoader();\n  const mobile = useMediaQuery(\"(max-width: 560px)\");\n  const showEditedDate = version > 1 && timestamp !== publishedat;\n  const showExtendedVersionPicker =\n    extended && version > 1 && !isCensored && (isVetted || isAuthor || isAdmin);\n  const showVersionAsText = !extended && !mobile;\n  const showVoteEnd =\n    (isVoteActive || isVotingFinished) && !isAbandoned && !isCensored;\n  const showRfpSubmissions =\n    extended &&\n    !!rfpSubmissions &&\n    !isEmpty(rfpSubmissions.proposals) &&\n    !isEmpty(rfpSubmissions.voteSummaries) &&\n    !isEmpty(rfpSubmissions.proposalSummaries);\n  const showEditIcon =\n    isAuthor &&\n    isVotingAuthorized &&\n    !isVotingFinished &&\n    !isVoteActive &&\n    isPublic;\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const openSearchVotesModal = () => {\n    handleOpenModal(ModalSearchVotes, {\n      onClose: handleCloseModal,\n      proposal\n    });\n  };\n\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n\n  const rawMarkdown = getMarkdownContent(files);\n  const { text, markdownFiles } = useMemo(\n    () => replaceImgDigestWithPayload(rawMarkdown, files),\n    [files, rawMarkdown]\n  );\n\n  const statusTagProps = getProposalStatusTagProps(\n    proposal,\n    proposalSummary,\n    isDarkTheme\n  );\n\n  const { text: proposalStatusLabel } = statusTagProps || {};\n  const hasProposalStatusInformation =\n    proposalStatusReason && proposalStatusLabel && proposalStatusUsername;\n\n  return (\n    <>\n      <RecordWrapper\n        id={shortToken}\n        className={classNames(\n          (isAbandoned || isCensored) && styles.abandonedProposal,\n          isNotExtendedRfpOrSubmission && styles.rfpProposal\n        )}\n      >\n        {({\n          Author,\n          Event,\n          Row,\n          Title,\n          RfpProposalLink,\n          CommentsLink,\n          ChartsLink,\n          SearchVotes,\n          CopyLink,\n          MarkdownLink,\n          DownloadRecord,\n          DownloadTimestamps,\n          DownloadVotes,\n          LinkSection,\n          Header,\n          Subtitle,\n          Edit,\n          Status,\n          RecordToken,\n          Metadata\n        }) => (\n          <>\n            {extended && hasProposalStatusInformation && !collapseBodyContent && (\n              <Message kind=\"warning\" className=\"margin-bottom-m\">\n                <>\n                  <div>{`This proposal has been ${proposalStatusLabel.toLowerCase()} by ${proposalStatusUsername}.`}</div>\n                  <div>{`Reason: ${proposalStatusReason}`}</div>\n                </>\n              </Message>\n            )}\n            <Header\n              title={\n                <Title id={`proposal-title-${shortToken}`} url={proposalURL}>\n                  {name || shortToken}\n                </Title>\n              }\n              /**\n               * if the proposal is editable: show Edit icon\n               * if the proposal is not editable and the voting is\n               * authorized: show Edit icon wrapped by tooltip\n               * otherwise: do not show Edit icon\n               * */\n              edit={\n                isEditable ? (\n                  <Edit url={`/record/${shortToken}/edit`} />\n                ) : showEditIcon ? (\n                  <Tooltip\n                    placement={mobile ? \"left\" : \"right\"}\n                    content=\"You have to revoke the voting authorization to edit the proposal\"\n                    className={styles.disabled}\n                    contentClassName={styles.authorizeTooltip}\n                  >\n                    <Edit tabIndex={-1} />\n                  </Tooltip>\n                ) : null\n              }\n              isRfp={isRfp}\n              isRfpSubmission={isRfpSubmission}\n              rfpProposalLink={\n                <RfpProposalLink url={rfpProposalURL} rfpTitle={proposedFor} />\n              }\n              subtitle={\n                <Subtitle>\n                  <Author username={username} url={authorURL} />\n                  {isRfp && linkby && (\n                    <Event\n                      event={`${isRfpActive ? \"expires\" : \"expired\"}`}\n                      timestamp={linkby}\n                    />\n                  )}\n                  {isVetted ? (\n                    <span data-testid=\"proposal-published-timestamp\">\n                      <Event event=\"published\" timestamp={publishedat} />\n                    </span>\n                  ) : (\n                    !showEditedDate && (\n                      <span data-testid=\"proposal-published-timestamp\">\n                        <Event event=\"submitted\" timestamp={timestamp} />\n                      </span>\n                    )\n                  )}\n                  {showEditedDate && (\n                    <span data-testid=\"proposal-edited-timestamp\">\n                      <Event event=\"edited\" timestamp={timestamp} />\n                    </span>\n                  )}\n                  {showVersionAsText && (\n                    <Text\n                      id={`proposal-${shortToken}-version`}\n                      className={styles.version}\n                      truncate\n                    >{`version ${version}`}</Text>\n                  )}\n                  {showExtendedVersionPicker && (\n                    <VersionPicker\n                      className={classNames(\n                        styles.versionPicker,\n                        isDarkTheme && styles.darkVersionPicker\n                      )}\n                      version={version}\n                      token={shortToken}\n                      proposalState={state}\n                    />\n                  )}\n                </Subtitle>\n              }\n              status={\n                <Status>\n                  <StatusTag className={styles.statusTag} {...statusTagProps} />\n                  {showVoteEnd && (\n                    <Event\n                      event={`vote end${isVoteActive ? \"s\" : \"ed\"}`}\n                      timestamp={voteEndTimestamp}\n                      className={styles.subtitleStatusTag}\n                      size=\"small\"\n                      additionInfo={\n                        isVotingFinished &&\n                        `block ${startblockheight} to ${endblockheight}`\n                      }\n                    />\n                  )}\n                  {isAbandoned && (\n                    <Event\n                      event=\"abandoned\"\n                      timestamp={abandonedat}\n                      className={styles.subtitleStatusTag}\n                      size=\"small\"\n                    />\n                  )}\n                  {isCensored && (\n                    <Event\n                      event=\"censored\"\n                      timestamp={censoredat}\n                      className={styles.subtitleStatusTag}\n                      size=\"small\"\n                    />\n                  )}\n                  {isVoteActive && (\n                    <Tooltip\n                      placement=\"bottom\"\n                      content={`block ${startblockheight} to ${endblockheight}`}\n                      contentClassName={styles.quorumTooltip}\n                    >\n                      <Text\n                        className={classNames(\n                          \"hide-on-mobile\",\n                          styles.blocksLeft\n                        )}\n                        size=\"small\"\n                      >\n                        {`${voteBlocksLeft} block${\n                          voteBlocksLeft > 1 ? \"s\" : \"\"\n                        } left`}\n                      </Text>\n                    </Tooltip>\n                  )}\n                </Status>\n              }\n              mobile={mobile}\n            />\n            {extended && (\n              <Row topMarginSize=\"s\">\n                <RecordToken token={fullToken} isCopyable />\n              </Row>\n            )}\n            {hasVoteSummary && (\n              <Row>\n                <StatusBar\n                  max={getQuorumInVotes(voteSummary)}\n                  status={getStatusBarData(voteSummary)}\n                  markerPosition={`${voteSummary.passpercentage}%`}\n                  markerTooltipText={`${voteSummary.passpercentage}% Yes votes required for approval`}\n                  markerTooltipClassName={styles.statusBarTooltip}\n                  renderStatusInfoComponent={\n                    <VotesCount\n                      eligibleVotes={getEligibleTickets(voteSummary)}\n                      quorumPercentage={voteSummary.quorumpercentage}\n                      quorumVotes={getQuorumInVotes(voteSummary)}\n                      votesReceived={getVotesReceived(voteSummary)}\n                    />\n                  }\n                />\n              </Row>\n            )}\n            {showRfpSubmissions && <ProposalsList data={rfpSubmissions} />}\n            {extended && (\n              <Metadata\n                amount={amount && usdFormatter.format(amount)}\n                startDate={startDate}\n                endDate={endDate}\n                domain={domain}\n                isRFP={isRfp}\n              />\n            )}\n            {extended && files && !!files.length && !collapseBodyContent && (\n              <div data-testid=\"proposal-body\">\n                <Markdown\n                  className={classNames(\n                    styles.markdownContainer,\n                    isDarkTheme && \"dark\",\n                    showRfpSubmissions && styles.rfpMarkdownContainer\n                  )}\n                  body={text}\n                />\n              </div>\n            )}\n            {collapseBodyContent && (\n              <IconButton\n                type=\"expand\"\n                className=\"margin-top-m\"\n                size=\"xlg\"\n                onClick={goToFullProposal(history, proposalURL)}\n              />\n            )}\n            {isPublicAccessible && !extended && (\n              <Row justify=\"space-between\">\n                <CommentsLink numOfComments={commentsCount} url={commentsURL} />\n                <div>\n                  {(isVoteActive || isVotingFinished) && !legacytoken && (\n                    <ChartsLink token={fullToken} />\n                  )}\n                </div>\n              </Row>\n            )}\n            {extended && files.length > 1 && (\n              <Row className={styles.filesRow} justify=\"left\" topMarginSize=\"s\">\n                <ThumbnailGrid\n                  value={files.filter((file) => !markdownFiles.includes(file))}\n                  viewOnly={true}\n                />\n              </Row>\n            )}\n            {extended && (\n              <Row className={styles.lastRow} justify=\"space-between\">\n                <LinkSection\n                  className={styles.downloadLinksWrapper}\n                  title=\"Available Downloads\"\n                >\n                  <DownloadRecord\n                    fileName={`${shortToken}-v${version}`}\n                    content={proposal}\n                    serverpublickey={apiInfo.pubkey}\n                    label=\"Proposal Bundle\"\n                  />\n                  <DownloadTimestamps\n                    label=\"Proposal Timestamps\"\n                    token={shortToken}\n                    version={version}\n                    state={state}\n                  />\n                  {isPublic && commentsCount > 0 && (\n                    <DownloadComments\n                      label=\"Comments Bundle\"\n                      recordToken={shortToken}\n                    />\n                  )}\n                  {isPublic && commentsCount > 0 && (\n                    <DownloadCommentsTimestamps\n                      label=\"Comments Timestamps\"\n                      recordToken={shortToken}\n                      commentsCount={commentsCount}\n                    />\n                  )}\n                  {votesCount > 0 && (\n                    <DownloadVotes\n                      label=\"Votes Bundle\"\n                      fileName={`${shortToken}-votes`}\n                      serverpublickey={apiInfo.pubkey}\n                      token={shortToken}\n                    />\n                  )}\n                  {votesCount > 0 && (\n                    <DownloadVotesTimestamps\n                      label=\"Votes Timestamps\"\n                      votesCount={votesCount}\n                      recordToken={shortToken}\n                    />\n                  )}\n                </LinkSection>\n                <Row className={styles.proposalActions}>\n                  <CopyLink\n                    className={classNames(\n                      isPublicAccessible && styles.copyLink\n                    )}\n                    url={window.location.origin + proposalURL}\n                  />\n                  {(isVoteActive || isVotingFinished) && !legacytoken && (\n                    <ChartsLink token={fullToken} />\n                  )}\n                  {(isVoteActive || isVotingFinished) &&\n                    getVotesReceived(voteSummary) > 0 && (\n                      <SearchVotes onClick={openSearchVotesModal} />\n                    )}\n                  {!isCensored && (isVetted || isAuthor || isAdmin) && (\n                    <MarkdownLink to={`/record/${shortToken}/raw`} />\n                  )}\n                </Row>\n              </Row>\n            )}\n            <LoggedInContent>\n              <ProposalActions\n                proposal={proposal}\n                voteSummary={voteSummary}\n                billingStatusChangeMetadata={billingStatusChangeMetadata}\n                rfpSubmissionsVoteSummaries={\n                  isRfp && rfpSubmissions && rfpSubmissions.voteSummaries\n                }\n              />\n            </LoggedInContent>\n          </>\n        )}\n      </RecordWrapper>\n    </>\n  );\n});\n\nexport default ProposalWrapper;\n","import { useMemo, useState, useCallback } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport {\n  getProposalRfpLinks,\n  getProposalToken,\n  getTokensForProposalsPagination,\n  isAbandonedProposal,\n  isCensoredProposal,\n  isClosedProposal,\n  isApprovedProposal\n} from \"../helpers\";\nimport { useUserByPublicKey } from \"src/hooks\";\nimport { getDetailsFile } from \"./helpers\";\nimport { shortRecordToken, parseRawProposal } from \"src/helpers\";\nimport { PROPOSAL_STATE_VETTED } from \"src/constants\";\nimport useFetchMachine from \"src/hooks/utils/useFetchMachine\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport { useComments } from \"src/hooks\";\nimport isEmpty from \"lodash/fp/isEmpty\";\nimport keys from \"lodash/fp/keys\";\nimport difference from \"lodash/fp/difference\";\nimport isEqual from \"lodash/fp/isEqual\";\nimport values from \"lodash/fp/values\";\nimport pick from \"lodash/pick\";\nimport concat from \"lodash/fp/concat\";\n\nconst getUnfetchedVoteSummaries = (proposal, voteSummaries, isSubmission) => {\n  if (!proposal) return [];\n  // no need to fetch vote summary if its submission\n  const rfpLinks = isSubmission ? [] : getProposalRfpLinksTokens(proposal);\n  const proposalToken = getProposalToken(proposal);\n  const tokens = concat(rfpLinks || [])(proposalToken);\n  // compare tokens by short form\n  return tokens.filter(\n    (t) =>\n      !keys(voteSummaries).some(\n        (vs) => shortRecordToken(vs) === shortRecordToken(t)\n      )\n  );\n};\n\nconst getProposalRfpLinksTokens = (proposal) => {\n  if (!proposal) return null;\n  const isSubmission = !!proposal.linkto;\n  const isRfp = !!proposal.linkby;\n  const hasRfpLinks = isSubmission || isRfp;\n  if (!hasRfpLinks) return null;\n  return isSubmission ? [proposal.linkto] : proposal.linkedfrom;\n};\n\nexport function useProposal(token, proposalPageSize, threadParentID) {\n  const tokenShort = shortRecordToken(token);\n  const onFetchProposalDetails = useAction(act.onFetchProposalDetails);\n  const onFetchProposalsBatch = useAction(act.onFetchProposalsBatch);\n  const onFetchProposalsVoteSummary = useAction(\n    act.onFetchProposalsBatchVoteSummary\n  );\n  const onFetchBatchProposalSummary = useAction(\n    act.onFetchBatchProposalSummary\n  );\n  const onFetchBillingStatusChanges = useAction(\n    act.onFetchBillingStatusChanges\n  );\n  const proposalSelector = useMemo(\n    () => sel.makeGetProposalByToken(tokenShort),\n    [tokenShort]\n  );\n  const billingStatusChangeMetadataSelector = useMemo(\n    () => sel.makeGetBillingStatusChangeMetadata(token),\n    [token]\n  );\n  const proposal = useSelector(proposalSelector);\n  const proposals = useSelector(sel.proposalsByToken);\n  const voteSummaries = useSelector(sel.voteSummariesByToken);\n  const loadingVoteSummary = useSelector(sel.isApiRequestingVoteSummary);\n  const proposalSummaries = useSelector(sel.proposalSummariesByToken);\n  const loadingProposalSummary = useSelector(\n    sel.isApiRequestingBatchProposalSummary\n  );\n  const proposalSummary = proposalSummaries[tokenShort];\n  const billingStatusChangeMetadata =\n    useSelector(billingStatusChangeMetadataSelector) || {};\n  const loadingBillingStatusChanges = useSelector(\n    sel.isApiRequestingBillingStatusChanges\n  );\n  const rfpLinks = getProposalRfpLinksTokens(proposal);\n  const isRfp = proposal && !!proposal.linkby;\n  const isSubmission = proposal && !!proposal.linkto;\n  const { currentUser } = useLoaderContext();\n  const isCurrentUserProposalAuthor =\n    currentUser && proposal && currentUser.userid === proposal.userid;\n\n  const unfetchedProposalTokens =\n    rfpLinks &&\n    difference(\n      rfpLinks.map((r) => shortRecordToken(r)),\n      keys(proposals)\n    );\n\n  const unfetchedSummariesTokens = getUnfetchedVoteSummaries(\n    proposal,\n    voteSummaries,\n    isSubmission\n  );\n\n  const rfpSubmissions = rfpLinks &&\n    proposal.linkby && {\n      proposals: values(\n        pick(\n          proposals,\n          rfpLinks.map((l) => shortRecordToken(l))\n        )\n      ),\n      voteSummaries: pick(\n        voteSummaries,\n        rfpLinks.map((l) => shortRecordToken(l))\n      ),\n      proposalSummaries: pick(\n        proposalSummaries,\n        rfpLinks.map((l) => shortRecordToken(l))\n      )\n    };\n\n  const isMissingDetails = !(proposal && getDetailsFile(proposal.files));\n  const voteSummary = voteSummaries[tokenShort];\n  const isMissingVoteSummary = !voteSummary;\n  const isMissingProposalSummary = !proposalSummary;\n  const isAdmin = currentUser?.isadmin;\n  const isApproved = isApprovedProposal(proposal, voteSummary);\n  const isMissingBillingStatusChangeMetadata =\n    isAdmin && isApproved && isEmpty(billingStatusChangeMetadata) && !isRfp;\n  const needsInitialFetch = token && isMissingDetails;\n  const isCensored = isCensoredProposal(proposal);\n  const isAbandoned = isAbandonedProposal(proposalSummary);\n  const isClosed = isClosedProposal(proposalSummary);\n\n  const [remainingTokens, setRemainingTokens] = useState(\n    unfetchedProposalTokens\n  );\n  const hasRemainingTokens = !isEmpty(remainingTokens);\n\n  const initialValues = {\n    status: \"idle\"\n  };\n\n  // Fetch status change user name.\n  const { statuschangepk } = proposal || {};\n  const { username: statuschangeusername } = useUserByPublicKey({\n    userPubKey: (isCensored || isAbandoned) && statuschangepk\n  });\n\n  // Fetch billing status change user name.\n  const { publickey: billingStatusAdminPubKey } = billingStatusChangeMetadata;\n  const { username: billingStatusChangeUsername } = useUserByPublicKey({\n    userPubKey: billingStatusAdminPubKey,\n    fetch: isClosed\n  });\n\n  const [state, send, { FETCH, RESOLVE, VERIFY, REJECT }] = useFetchMachine({\n    actions: {\n      initial: () => {\n        if (needsInitialFetch) {\n          onFetchProposalDetails(token)\n            .then((res) => {\n              const hasToFetchRfpLinks = getProposalRfpLinksTokens(\n                parseRawProposal(res)\n              );\n              setRemainingTokens(hasToFetchRfpLinks);\n              send(VERIFY);\n            })\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        }\n        return send(VERIFY);\n      },\n      load: () => {\n        if (\n          (token && !proposal) ||\n          !isEmpty(unfetchedSummariesTokens) ||\n          (proposal &&\n            rfpLinks &&\n            (hasRemainingTokens || !isEmpty(unfetchedSummariesTokens)))\n        ) {\n          return;\n        }\n        return send(VERIFY);\n      },\n      verify: () => {\n        if (hasRemainingTokens) {\n          const [tokensBatch, next] = getTokensForProposalsPagination(\n            remainingTokens,\n            proposalPageSize\n          );\n          // Fetch vote & proposal summaries only if the proposal is a RFP.\n          // If it is a submission, just grab the records info.\n          onFetchProposalsBatch({\n            tokens: tokensBatch,\n            fetchVoteSummary: isRfp,\n            fetchProposalSummary: isRfp,\n            fetchCommentCounts: !isSubmission\n          })\n            .then(() => {\n              setRemainingTokens(next);\n              return send(VERIFY);\n            })\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        }\n        if (\n          (!isEmpty(unfetchedSummariesTokens) || isMissingVoteSummary) &&\n          proposal?.state === PROPOSAL_STATE_VETTED &&\n          !loadingVoteSummary\n        ) {\n          onFetchProposalsVoteSummary(unfetchedSummariesTokens)\n            .then(() => send(VERIFY))\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        }\n        if (isMissingProposalSummary && !loadingProposalSummary) {\n          onFetchBatchProposalSummary([tokenShort])\n            .then(() => send(VERIFY))\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        }\n        if (\n          isMissingBillingStatusChangeMetadata &&\n          !loadingBillingStatusChanges\n        ) {\n          onFetchBillingStatusChanges([tokenShort])\n            .then(() => send(VERIFY))\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        }\n        if (rfpLinks && rfpSubmissions) {\n          // is a RFP\n          return send(RESOLVE, { proposal, rfpSubmissions });\n        }\n        return send(RESOLVE, { proposal });\n      },\n      done: () => {\n        // verify proposal on proposal changes\n        // TODO: improve this in the future so we don't need to verify once\n        // it should be done.\n        const needsVerification =\n          !isEqual(state.proposal, proposal) ||\n          isMissingBillingStatusChangeMetadata;\n\n        if (needsVerification) {\n          return send(VERIFY);\n        }\n      }\n    },\n    initialValues\n  });\n\n  const proposalWithLinks = getProposalRfpLinks(\n    state.proposal,\n    state.rfpSubmissions,\n    proposals\n  );\n\n  const onReloadProposalDetails = useCallback(\n    () => send(\"RETRY\", { status: \"idle\" }),\n    [send]\n  );\n\n  const proposalToken = getProposalToken(proposalWithLinks);\n  const proposalState = proposalWithLinks?.state;\n\n  const {\n    onSubmitComment,\n    commentSectionIds,\n    hasAuthorUpdates,\n    singleThreadRootId,\n    error: commentsError,\n    loading: commentsLoading,\n    finishedCommentsFetch\n  } = useComments(\n    proposalToken,\n    proposalState,\n    null,\n    threadParentID,\n    isCurrentUserProposalAuthor\n  );\n\n  return {\n    proposal: proposalWithLinks && {\n      ...proposalWithLinks,\n      statuschangeusername\n    },\n    billingStatusChangeUsername,\n    error: state.error,\n    loading:\n      state.status !== \"success\" || !!isMissingBillingStatusChangeMetadata,\n    threadParentID,\n    isCurrentUserProposalAuthor,\n    commentSectionIds,\n    hasAuthorUpdates,\n    singleThreadRootId,\n    onSubmitComment,\n    commentsError,\n    currentUser,\n    commentsLoading,\n    commentsFinishedLoading: finishedCommentsFetch,\n    onReloadProposalDetails\n  };\n}\n","import {\n  isAbandonedProposal,\n  isRejectedProposal,\n  isClosedProposal,\n  isCompletedProposal,\n  isCensoredProposalSummary\n} from \"../helpers\";\n\nexport const getCommentBlockedReason = (proposalSummary) => {\n  if (isAbandonedProposal(proposalSummary)) {\n    return \"This proposal has been abandoned. No additional changes are allowed.\";\n  }\n\n  if (isRejectedProposal(proposalSummary)) {\n    return \"Voting has finished for this proposal. No additional changes are allowed.\";\n  }\n\n  if (isCensoredProposalSummary(proposalSummary)) {\n    return \"This proposal has been censored. No additional changes are allowed.\";\n  }\n\n  if (isClosedProposal(proposalSummary)) {\n    return \"Proposal is closed. No additional changes are allowed.\";\n  }\n\n  if (isCompletedProposal(proposalSummary)) {\n    return \"Proposal is completed. No additional changes are allowed.\";\n  }\n\n  return \"\";\n};\n\nexport const getDetailsFile = (files = []) =>\n  files.find((f) => f.name === \"index.md\");\n","import { createContext, useContext } from \"react\";\n\nexport const CommentContext = createContext();\nexport const useComment = () => useContext(CommentContext);\n","import React from \"react\";\nimport ContentLoader from \"react-content-loader\";\nimport { useTheme, getThemeProperty } from \"pi-ui\";\n\nconst ProposalFormLoader = () => {\n  const { theme } = useTheme();\n  const primaryColor = getThemeProperty(theme, \"card-background\");\n  const secondaryColor = getThemeProperty(theme, \"dimmed-card-background\");\n  return (\n    <ContentLoader\n      height={420}\n      width={800}\n      speed={2}\n      primaryColor={primaryColor}\n      secondaryColor={secondaryColor}\n    >\n      <rect x=\"0\" y=\"30\" width=\"800\" height=\"200\" />\n      <rect x=\"630\" y=\"250\" width=\"170\" height=\"50\" />\n    </ContentLoader>\n  );\n};\n\nexport default ProposalFormLoader;\n","import React, { lazy, Suspense } from \"react\";\nimport CommentFormLoader from \"./CommentFormLoader\";\n\nconst CommentForm = lazy(() =>\n  import(/* webpackChunkName: \"CommentForm\" */ \"./CommentForm\")\n);\n\nconst CommentFormLazy = (props) => (\n  <Suspense fallback={<CommentFormLoader />}>\n    <CommentForm {...props} />\n  </Suspense>\n);\n\nexport default CommentFormLazy;\n","import orderBy from \"lodash/fp/orderBy\";\n\nexport const NUMBER_OF_LIST_PLACEHOLDERS = 3;\n\nexport const commentSortOptions = {\n  SORT_BY_TOP: \"Top\",\n  SORT_BY_OLD: \"Old\",\n  SORT_BY_NEW: \"New\"\n};\n\n/**\n * isInCommentTree returns whether the leafID is part of the provided comment\n * tree. A leaf is considered to be part of the tree if the leaf is a child of\n * the root or the leaf references the root itself.\n * @param {Int} rootId root node id.\n * @param {Int} leafId leaf node id.\n * @param {Map} comments array of comments.\n */\nexport const isInCommentTree = (rootId, leafId, comments) => {\n  if (leafId === rootId) {\n    return true;\n  }\n\n  // Convert comment array to a map\n  const commentsMap = comments.reduce((map, comment) => {\n    map[comment.commentid] = comment;\n    return map;\n  }, {});\n\n  // Start with the provided comment leaf and traverse the comment tree up\n  // until either the provided root ID is found or we reach the tree head. The\n  // tree head will have a comment ID of 0.\n  let current = commentsMap[leafId];\n  while (current && current.parentid !== 0) {\n    // Check if next parent in the tree is the rootID.\n    if (current.parentid === rootId) {\n      return true;\n    }\n    const newLeafId = current.parentid;\n    current = commentsMap[newLeafId];\n  }\n\n  return false;\n};\n\n/**\n * Creates a select option from a string sort option.\n * @param {String} sortOption\n * @returns {Object} selectOption\n */\nexport const createSelectOptionFromSortOption = (sortOption) => ({\n  label: sortOption,\n  value: sortOption\n});\n\n/**\n * Return the sort select options.\n * @returns {Array} sortSelectOptions\n */\nexport const getSortOptionsForSelect = () =>\n  Object.keys(commentSortOptions).map((key) =>\n    createSelectOptionFromSortOption(commentSortOptions[key])\n  );\n\n/**\n * Returns a sort function accordingly to the sort option provided\n * @param {String} sortOption\n * @returns {Function} sorterFunction\n */\nexport const getSort = (sortOption) => {\n  const mapOptionToSort = {\n    [commentSortOptions.SORT_BY_NEW]: orderBy([\"timestamp\"], [\"desc\"]),\n    [commentSortOptions.SORT_BY_OLD]: orderBy([\"timestamp\"], [\"asc\"]),\n    [commentSortOptions.SORT_BY_TOP]: orderBy(\n      [\"resultvotes\", \"timestamp\"],\n      [\"desc\", \"asc\"]\n    )\n  };\n\n  return (\n    mapOptionToSort[sortOption] ||\n    mapOptionToSort[commentSortOptions.SORT_BY_TOP]\n  );\n};\n\nexport const sortComments = (sortOption, comments) => {\n  const sorter = getSort(sortOption);\n  return sorter(\n    comments.map((comment) => ({\n      ...comment,\n      resultvotes: comment.upvotes - comment.downvotes\n    }))\n  );\n};\n\n/**\n * This function use currying to efficiently handle comment censoring\n * @param {Function} cb\n * @param {Args} args callback args\n */\nexport function handleCommentCensoringInfo(cb, ...args) {\n  return function handleSubmitReason(reason) {\n    return cb(...args, reason);\n  };\n}\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { debounce } from \"lodash\";\nimport { Icon, useTheme, Text, getThemeProperty, classNames } from \"pi-ui\";\nimport styles from \"./Likes.module.css\";\n\nexport const isLiked = (action) => action === 1 || action === \"1\";\nexport const isDisliked = (action) => action === -1 || action === \"-1\";\n\nconst Likes = ({ upLikes, downLikes, onLike, onDislike, option, disabled }) => {\n  const { theme } = useTheme();\n  const defaultColor = getThemeProperty(theme, \"comment-like-color\");\n  const activeColor = getThemeProperty(theme, \"comment-like-color-active\");\n  const liked = isLiked(option);\n  const disliked = isDisliked(option);\n  const likeColor = liked ? activeColor : defaultColor;\n  const dislikeColor = disliked ? activeColor : defaultColor;\n\n  async function handleLike() {\n    await onLike();\n  }\n\n  async function handleDislike() {\n    await onDislike();\n  }\n\n  // Avoid multi-clicking actions\n  const handleDebounceVote = (voteFn) =>\n    debounce(() => {\n      if (disabled) return;\n      voteFn();\n    }, 300);\n\n  const renderCount = useCallback(\n    (count, isLike) => (\n      <Text\n        data-testid={`score-${isLike ? \"like\" : \"dislike\"}`}\n        size=\"small\"\n        className={classNames(styles.likesResult, \"unselectable\")}\n      >\n        {count}\n      </Text>\n    ),\n    []\n  );\n\n  return (\n    <div className={\"align-center\"}>\n      <div className={styles.leftLikeBox}>\n        <button\n          className={classNames(\n            styles.likeBtn,\n            disabled && styles.likeDisabled\n          )}\n          data-testid=\"like-btn\"\n          onClick={handleDebounceVote(handleLike)}\n        >\n          <Icon iconColor={likeColor} backgroundColor={likeColor} type=\"like\" />\n        </button>\n        {renderCount(upLikes, true)}\n      </div>\n      <div className={styles.rightLikeBox}>\n        <button\n          className={classNames(\n            styles.likeBtn,\n            disabled && styles.likeDisabled\n          )}\n          data-testid=\"dislike-btn\"\n          onClick={handleDebounceVote(handleDislike)}\n        >\n          <Icon\n            iconColor={dislikeColor}\n            backgroundColor={dislikeColor}\n            type=\"dislike\"\n          />\n        </button>\n        {renderCount(downLikes)}\n      </div>\n    </div>\n  );\n};\n\nLikes.propTypes = {\n  upLikes: PropTypes.number,\n  downLikes: PropTypes.number,\n  option: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  onLike: PropTypes.func,\n  onDislike: PropTypes.func\n};\n\nLikes.defaultProps = {\n  active: false,\n  upLikes: 0,\n  downLikes: 0\n};\n\nexport default Likes;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Text,\n  Icon,\n  classNames,\n  useMediaQuery,\n  useTheme,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport DateTooltip from \"src/components/DateTooltip\";\nimport Markdown from \"src/components/Markdown\";\nimport Join from \"src/components/Join\";\nimport Link from \"src/components/Link\";\nimport LoggedInContent from \"src/components/LoggedInContent\";\nimport Likes from \"src/components/Likes\";\nimport CopyLink from \"src/components/CopyLink\";\nimport { useConfig } from \"src/containers/Config\";\nimport { NOJS_ROUTE_PREFIX, PROPOSAL_UPDATE_HINT } from \"src/constants\";\nimport { usePolicy } from \"src/hooks\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport CommentForm from \"src/components/CommentForm/CommentFormLazy\";\nimport { useUserByPublicKey } from \"src/hooks\";\nimport styles from \"./Comment.module.css\";\n\nconst forbiddenCommentsMdElements = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\n\nconst Comment = ({\n  className,\n  permalink,\n  commentID,\n  parentID,\n  createdAt,\n  timestamp,\n  version,\n  token,\n  state,\n  author,\n  authorID,\n  authorUpdateTitle,\n  censored,\n  censoredBy,\n  reason,\n  sectionId,\n  highlightAuthor,\n  likesUpCount,\n  likesDownCount,\n  likeOption,\n  disableLikes,\n  disableLikesClick,\n  onLike,\n  onDislike,\n  commentBody,\n  showReplies,\n  disableReply,\n  onClickCensor,\n  onClickReply,\n  onClickShowReplies,\n  onEditComment,\n  editCommentID,\n  setEditCommentID,\n  numOfReplies,\n  numOfNewHiddenReplies,\n  highlightAsNew,\n  censorable,\n  isFlatMode,\n  seeInContextLink,\n  ...props\n}) => {\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  const { javascriptEnabled } = useConfig();\n\n  // Get policy settings & current user id to determine whether the comment\n  // is editable.\n  const {\n    policyComments: { editperiod, allowedits }\n  } = usePolicy();\n  const { currentUser } = useLoaderContext();\n  const { userid } = currentUser || {};\n\n  const currentTimeSec = new Date().getTime() / 1000;\n  const isEditable =\n    authorID === userid &&\n    !disableReply &&\n    allowedits &&\n    currentTimeSec < createdAt + editperiod;\n  const remaining = createdAt + editperiod - currentTimeSec;\n  const [isEditableState, setIsEditableState] = useState(false);\n  useEffect(() => {\n    // If comment is editable, calculate the remaning time to hide the edit icon\n    // when the comment is not edited anymore.\n    if (isEditable) {\n      setIsEditableState(true);\n      const t = setTimeout(() => {\n        setIsEditableState(false);\n      }, Math.round(remaining * 1000));\n\n      // Cleanup timeout on unmount\n      return () => clearTimeout(t);\n    }\n  }, [isEditable, remaining]);\n\n  const censorButton = !censored && censorable && (\n    <Text\n      weight=\"semibold\"\n      className={styles.censor}\n      data-testid=\"comment-censor\"\n      onClick={onClickCensor}\n    >\n      Censor\n    </Text>\n  );\n\n  const { username: censoredByUsername } = useUserByPublicKey({\n    userPubKey: censored && censoredBy\n  });\n\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  const showNewReplies =\n    numOfNewHiddenReplies > 0 && !showReplies && !isFlatMode;\n  const isThread = numOfReplies > 0 && !isFlatMode;\n\n  const authorURL = javascriptEnabled\n    ? `/user/${authorID}`\n    : `${NOJS_ROUTE_PREFIX}/user/${authorID}`;\n\n  const handleEditComment = useCallback(\n    async ({ comment, title }) => {\n      // If title is provided then we are dealing with an author\n      // update.\n      let extraData = \"\",\n        extraDataHint = \"\";\n      if (title) {\n        extraDataHint = PROPOSAL_UPDATE_HINT;\n        extraData = JSON.stringify({ title });\n      }\n\n      await onEditComment({\n        commentID,\n        comment,\n        token,\n        parentID,\n        state,\n        extraData,\n        extraDataHint,\n        sectionId\n      });\n\n      setEditCommentID(null);\n    },\n    [\n      onEditComment,\n      commentID,\n      parentID,\n      state,\n      token,\n      sectionId,\n      setEditCommentID\n    ]\n  );\n\n  return editCommentID !== commentID ? (\n    <div\n      className={classNames(\n        styles.comment,\n        highlightAsNew && styles.highlightAsNew,\n        className\n      )}\n      {...props}\n    >\n      <div className={classNames(\"justify-space-between\", styles.info)}>\n        <Join>\n          <Link\n            className={classNames(\n              styles.commentAuthor,\n              highlightAuthor && styles.recordAuthor\n            )}\n            to={authorURL}\n          >\n            {author}\n          </Link>\n          <DateTooltip timestamp={timestamp} placement=\"bottom\">\n            {({ timeAgo }) => (\n              <Link className={styles.timeAgo} to={`${permalink}`}>\n                {version > 1 && <span>edited </span>}\n                {timeAgo}\n              </Link>\n            )}\n          </DateTooltip>\n          {highlightAsNew && !extraSmall && <Text color=\"gray\">new</Text>}\n          {!extraSmall && censorButton}\n          {!extraSmall && seeInContextLink}\n          {isEditableState && (\n            <Icon\n              className={styles.editIcon}\n              onClick={() => setEditCommentID(commentID)}\n              type=\"edit\"\n              data-testid={`edit-comment-${commentID}`}\n            />\n          )}\n        </Join>\n        {!disableLikes && !censored && (\n          <div className={styles.likesWrapper}>\n            <Likes\n              disabled={disableLikesClick}\n              upLikes={likesUpCount}\n              downLikes={likesDownCount}\n              option={likeOption}\n              onLike={onLike}\n              onDislike={onDislike}\n            />\n          </div>\n        )}\n      </div>\n      {extraSmall && censorButton}\n      {extraSmall && seeInContextLink}\n      {!censored ? (\n        <Markdown\n          renderImages={false}\n          className={classNames(isDarkTheme && \"dark\", \"margin-top-s\")}\n          body={commentBody}\n          disallowedElements={forbiddenCommentsMdElements}\n        />\n      ) : (\n        <Markdown\n          renderImages={false}\n          className={styles.censored}\n          body={`Censored by ${censoredByUsername}. Reason: ${reason}`}\n        />\n      )}\n      <div className=\"justify-space-between margin-top-s\">\n        <div className=\"justify-left\">\n          {!disableReply && (\n            <LoggedInContent>\n              <Text\n                weight=\"semibold\"\n                className={styles.reply}\n                onClick={onClickReply}\n              >\n                Reply\n              </Text>\n            </LoggedInContent>\n          )}\n          {isThread && (\n            <span className={styles.showReplies} onClick={onClickShowReplies}>\n              {showReplies ? \"-\" : `+${numOfReplies}`}\n            </span>\n          )}\n          {showNewReplies && (\n            <Text color=\"green\">{`${numOfNewHiddenReplies} new`}</Text>\n          )}\n        </div>\n        <CopyLink url={window.location.origin + permalink} />\n      </div>\n    </div>\n  ) : (\n    <CommentForm\n      persistKey={`editing-comment-${commentID}-${token}`}\n      className={styles.editForm}\n      onSubmit={handleEditComment}\n      onCancel={() => setEditCommentID(null)}\n      isAuthorUpdate={!!authorUpdateTitle}\n      values={{\n        comment: commentBody,\n        title: authorUpdateTitle\n      }}\n    />\n  );\n};\n\nComment.propTypes = {\n  className: PropTypes.string,\n  permalink: PropTypes.string,\n  commentID: PropTypes.number,\n  parentID: PropTypes.number,\n  createdAt: PropTypes.number,\n  timestamp: PropTypes.number,\n  version: PropTypes.number,\n  token: PropTypes.string,\n  state: PropTypes.number,\n  author: PropTypes.string,\n  authorID: PropTypes.string,\n  authorUpdateTitle: PropTypes.string,\n  censored: PropTypes.bool,\n  censoredBy: PropTypes.string,\n  reason: PropTypes.string,\n  sectionId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  highlightAuthor: PropTypes.bool,\n  disableLikes: PropTypes.bool,\n  likesCount: PropTypes.number,\n  likesUpCount: PropTypes.number,\n  likesDownCount: PropTypes.number,\n  likeOption: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  disableLikesClick: PropTypes.bool,\n  onLike: PropTypes.func,\n  onDislike: PropTypes.func,\n  commentBody: PropTypes.string,\n  showReplies: PropTypes.bool,\n  disableReply: PropTypes.bool,\n  onClickReply: PropTypes.func,\n  onClickShowReplies: PropTypes.func,\n  onEditComment: PropTypes.func,\n  editCommentID: PropTypes.number,\n  setEditCommentID: PropTypes.func,\n  numOfReplies: PropTypes.number,\n  numOfNewHiddenReplies: PropTypes.number,\n  censorable: PropTypes.bool\n};\n\nexport default React.memo(Comment);\n","import React, { useState, useCallback, useMemo } from \"react\";\nimport styles from \"./Comment.module.css\";\nimport CommentForm from \"src/components/CommentForm/CommentFormLazy\";\nimport Link from \"src/components/Link\";\nimport { useComment } from \"../hooks\";\nimport { isInCommentTree } from \"../helpers\";\nimport Comment from \"./Comment\";\nimport {\n  PROPOSAL_STATE_UNVETTED,\n  PROPOSAL_COMMENT_UPVOTE,\n  PROPOSAL_COMMENT_DOWNVOTE,\n  PROPOSAL_UPDATE_HINT\n} from \"src/constants\";\n\nconst ContextLink = React.memo(({ parentid, recordToken }) => (\n  <Link\n    className={styles.contextLink}\n    to={`/record/${recordToken}/comments/${parentid}`}\n  >\n    see in context\n  </Link>\n));\n\nconst Replies = React.memo(({ children }) => (\n  <div className={styles.childrenContainer}>{children}</div>\n));\n\nconst CommentContent = React.memo(\n  ({\n    showReplyForm,\n    commentid,\n    token,\n    handleSubmitComment,\n    handleToggleReplyForm,\n    handleCommentSubmitted,\n    isThread,\n    children\n  }) => {\n    const commentForm = useMemo(\n      () => (\n        <CommentForm\n          className={styles.replyForm}\n          persistKey={`replying-to-${commentid}-from-${token}`}\n          onSubmit={handleSubmitComment}\n          onCancel={handleToggleReplyForm}\n          onCommentSubmitted={handleCommentSubmitted}\n        />\n      ),\n      [\n        commentid,\n        handleSubmitComment,\n        token,\n        handleCommentSubmitted,\n        handleToggleReplyForm\n      ]\n    );\n\n    return (\n      <>\n        {showReplyForm && commentForm}\n        {isThread && children}\n      </>\n    );\n  }\n);\n\nconst CommentWrapper = ({\n  comment,\n  children,\n  numOfReplies,\n  isFlatMode,\n  proposalState,\n  recordBaseLink,\n  ...props\n}) => {\n  const {\n    onSubmitComment,\n    onEditComment,\n    editCommentID,\n    setEditCommentID,\n    onCommentVote,\n    getCommentLikeOption,\n    enableCommentVote,\n    recordAuthorID,\n    recordAuthorUsername,\n    loadingLikes,\n    userLoggedIn,\n    recordToken,\n    readOnly,\n    identityError,\n    paywallMissing,\n    openCensorModal,\n    openLoginModal,\n    isAdmin,\n    currentUser,\n    getCommentVotes,\n    latestAuthorUpdateId,\n    areAuthorUpdatesAllowed,\n    comments,\n    sectionId\n  } = useComment();\n  const {\n    comment: commentText,\n    token,\n    state,\n    commentid,\n    deleted: censored,\n    publickey: censoredBy,\n    timestamp,\n    createdat,\n    version,\n    username,\n    userid,\n    isNew,\n    sumOfNewDescendants,\n    parentid,\n    extradatahint,\n    extradata,\n    reason\n  } = comment;\n\n  const isAuthorUpdate = extradatahint === PROPOSAL_UPDATE_HINT;\n  const authorUpdateTitle = isAuthorUpdate ? JSON.parse(extradata).title : \"\";\n  const isInLatestUpdateCommentTree =\n    comments && isInCommentTree(latestAuthorUpdateId, commentid, comments);\n  const notInLatestAuthorUpdateThread =\n    areAuthorUpdatesAllowed && !isInLatestUpdateCommentTree;\n  const isRecordAuthor =\n    recordAuthorID === userid || recordAuthorUsername === username;\n  const censorable = isAdmin && !readOnly;\n\n  const [showReplyForm, setShowReplyForm] = useState(false);\n  const [showReplies, setShowReplies] = useState(true);\n  // get comment's votes from cache. If they don't exist, get it from comment\n  const { upvotes, downvotes } = useMemo(\n    () => getCommentVotes(comment.commentid) || comment,\n    [getCommentVotes, comment]\n  );\n\n  const hasChildrenComments = useMemo(\n    () =>\n      !!React.Children.toArray(children).filter(\n        (child) =>\n          child.props && child.props.comments && !!child.props.comments.length\n      ).length,\n    [children]\n  );\n  const isThread = showReplies && hasChildrenComments && !isFlatMode;\n  const isFlatReply = isFlatMode && parentid > 0;\n\n  const handleToggleReplyForm = useCallback(() => {\n    setShowReplyForm(!showReplyForm);\n  }, [showReplyForm]);\n\n  const handleToggleReplies = useCallback(() => {\n    setShowReplies(!showReplies);\n  }, [showReplies]);\n\n  const handleSubmitComment = useCallback(\n    ({ comment }) =>\n      onSubmitComment({\n        comment,\n        token,\n        parentID: commentid,\n        state: proposalState,\n        sectionId\n      }),\n    [onSubmitComment, token, commentid, proposalState, sectionId]\n  );\n\n  const handleCommentSubmitted = useCallback(() => {\n    setShowReplyForm(false);\n    setShowReplies(true);\n  }, []);\n\n  const handleLikeComment = useCallback(() => {\n    if (!userLoggedIn) {\n      openLoginModal();\n      return;\n    }\n    return onCommentVote(commentid, PROPOSAL_COMMENT_UPVOTE);\n  }, [openLoginModal, userLoggedIn, onCommentVote, commentid]);\n\n  const handleDislikeComment = useCallback(() => {\n    if (!userLoggedIn) {\n      openLoginModal();\n      return;\n    }\n    return onCommentVote(commentid, PROPOSAL_COMMENT_DOWNVOTE);\n  }, [openLoginModal, onCommentVote, userLoggedIn, commentid]);\n\n  const handleClickCensor = useCallback(() => {\n    return openCensorModal(commentid);\n  }, [commentid, openCensorModal]);\n\n  const contextLink = isFlatReply && (\n    <ContextLink parentid={parentid} recordToken={recordToken} />\n  );\n\n  const isLikeCommentDisabled =\n    loadingLikes ||\n    readOnly ||\n    (userLoggedIn &&\n      (identityError || paywallMissing || currentUser.username === username)) ||\n    notInLatestAuthorUpdateThread;\n\n  return (\n    <>\n      <Comment\n        permalink={`${recordBaseLink}/comments/${commentid}`}\n        commentID={commentid}\n        parentID={parentid}\n        token={token}\n        state={state}\n        seeInContextLink={contextLink}\n        censorable={censorable}\n        author={username}\n        authorID={userid}\n        authorUpdateTitle={authorUpdateTitle}\n        createdAt={createdat}\n        timestamp={timestamp}\n        version={version}\n        censored={censored}\n        sectionId={sectionId}\n        censoredBy={censoredBy}\n        reason={reason}\n        highlightAuthor={isRecordAuthor}\n        highlightAsNew={isNew}\n        disableLikes={\n          !enableCommentVote || proposalState === PROPOSAL_STATE_UNVETTED\n        }\n        disableLikesClick={isLikeCommentDisabled}\n        disableReply={\n          readOnly ||\n          !!identityError ||\n          paywallMissing ||\n          notInLatestAuthorUpdateThread\n        }\n        likesUpCount={upvotes}\n        likesDownCount={downvotes}\n        likeOption={getCommentLikeOption(commentid)}\n        onLike={handleLikeComment}\n        onDislike={handleDislikeComment}\n        showReplies={showReplies}\n        isFlatMode={isFlatMode}\n        onClickCensor={handleClickCensor}\n        onClickReply={handleToggleReplyForm}\n        onClickShowReplies={handleToggleReplies}\n        onEditComment={onEditComment}\n        editCommentID={editCommentID}\n        setEditCommentID={setEditCommentID}\n        numOfReplies={numOfReplies}\n        numOfNewHiddenReplies={sumOfNewDescendants}\n        commentBody={commentText}\n        {...props}\n      />\n      <CommentContent\n        showReplyForm={showReplyForm}\n        commentid={commentid}\n        token={token}\n        handleSubmitComment={handleSubmitComment}\n        handleToggleReplyForm={handleToggleReplyForm}\n        handleCommentSubmitted={handleCommentSubmitted}\n        isThread={isThread}\n      >\n        <Replies>{children}</Replies>\n      </CommentContent>\n    </>\n  );\n};\n\nexport default CommentWrapper;\n","import React from \"react\";\nimport CommentWrapper from \"../Comment/CommentWrapper\";\n\nconst CommentsList = ({\n  comments,\n  isFlatMode,\n  proposalState,\n  recordBaseLink\n}) =>\n  comments.map((comment) => (\n    <CommentWrapper\n      key={`comment-${comment.commentid}`}\n      comment={comment}\n      numOfReplies={(comment.children && comment.children.length) || 0}\n      isFlatMode={isFlatMode}\n      recordBaseLink={recordBaseLink}\n      proposalState={proposalState}\n    >\n      <CommentsList\n        comments={comment.children}\n        proposalState={proposalState}\n        recordBaseLink={recordBaseLink}\n      />\n    </CommentWrapper>\n  ));\n\nexport default CommentsList;\n","import React, { useState, useEffect } from \"react\";\nimport CommentsList from \"./CommentsList\";\n\nconst getChildren = (comments, commentId, lastTimeAccessed, currentUserID) =>\n  comments\n    .filter((comment) => +comment.parentid === +commentId)\n    .map((comment) =>\n      createComputedComment(comment, comments, lastTimeAccessed, currentUserID)\n    );\n\nconst createComputedComment = (\n  comment,\n  comments,\n  lastTimeAccessed,\n  currentUserID\n) => {\n  const children = getChildren(\n    comments,\n    comment.commentid,\n    lastTimeAccessed,\n    currentUserID\n  );\n\n  // set as true if this comment was created after the lastTimeAccessed\n  // and the author is not the current user\n  const isNew =\n    lastTimeAccessed &&\n    currentUserID !== comment.userid &&\n    comment.timestamp > lastTimeAccessed;\n\n  // count how many of the childrens are new comments\n  const numOfNewChildren = children.filter((c) => c.isNew).length;\n\n  // sum of all new descendants, including childrens\n  const sumOfNewDescendants = children.reduce(\n    (sum, c) => sum + c.sumOfNewDescendants,\n    numOfNewChildren\n  );\n\n  return {\n    ...comment,\n    isNew,\n    numOfNewChildren,\n    sumOfNewDescendants,\n    children\n  };\n};\n\nconst CommentsListWrapper = ({\n  comments,\n  threadParentID,\n  lastTimeAccessed,\n  currentUserID,\n  isFlatMode,\n  proposalState,\n  recordsBaseLink\n}) => {\n  const [nestedComments, setNestedComments] = useState([]);\n  // single thread mode: find the childrens of the thread parent comment\n  const isSingleThread = threadParentID && !!comments.length;\n  useEffect(\n    function generateNestedComments() {\n      // flat mode: keep comments array flat\n      if (isFlatMode && !isSingleThread) {\n        setNestedComments(\n          comments.map((c) =>\n            createComputedComment(c, comments, lastTimeAccessed, currentUserID)\n          )\n        );\n        return;\n      }\n      if (isSingleThread) {\n        const singleThreadParent = comments.find(\n          (c) => +c.commentid === +threadParentID\n        );\n        setNestedComments([\n          createComputedComment(\n            singleThreadParent,\n            comments,\n            lastTimeAccessed,\n            currentUserID\n          )\n        ]);\n        return;\n      }\n      const result = getChildren(comments, 0, lastTimeAccessed, currentUserID);\n      setNestedComments(result);\n    },\n    [\n      comments,\n      threadParentID,\n      currentUserID,\n      isFlatMode,\n      lastTimeAccessed,\n      isSingleThread\n    ]\n  );\n  return (\n    <CommentsList\n      comments={nestedComments}\n      isFlatMode={isSingleThread ? false : isFlatMode}\n      proposalState={proposalState}\n      recordBaseLink={recordsBaseLink}\n    />\n  );\n};\n\nexport default React.memo(CommentsListWrapper);\n","import React from \"react\";\nimport { useMediaQuery, useTheme, getThemeProperty } from \"pi-ui\";\nimport ContentLoader from \"react-content-loader\";\n\nconst CommentLoader = () => {\n  const { theme } = useTheme();\n\n  const primaryColor = getThemeProperty(theme, \"card-background\");\n  const secondaryColor = getThemeProperty(theme, \"dimmed-card-background\");\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  return (\n    <ContentLoader\n      height={100}\n      width={extraSmall ? 400 : 600}\n      speed={2}\n      primaryColor={primaryColor}\n      secondaryColor={secondaryColor}\n    >\n      <rect\n        x=\"0\"\n        y=\"10\"\n        rx=\"3\"\n        ry=\"3\"\n        width={extraSmall ? \"300\" : \"100\"}\n        height=\"16\"\n      />\n      <rect\n        x=\"0\"\n        y=\"36\"\n        rx=\"4\"\n        ry=\"4\"\n        width={extraSmall ? \"400\" : \"600\"}\n        height=\"12\"\n      />\n      <rect\n        x=\"0\"\n        y=\"52\"\n        rx=\"4\"\n        ry=\"4\"\n        width={extraSmall ? \"400\" : \"600\"}\n        height=\"12\"\n      />\n      <rect\n        x=\"0\"\n        y=\"74\"\n        rx=\"3\"\n        ry=\"3\"\n        width={extraSmall ? \"120\" : \"76\"}\n        height=\"16\"\n      />\n    </ContentLoader>\n  );\n};\n\nexport default CommentLoader;\n","import { sortComments } from \"./helpers\";\nimport isEqual from \"lodash/isEqual\";\nimport maxBy from \"lodash/maxBy\";\n\nexport const initialState = { comments: [], sortOption: undefined };\n\nexport const actions = {\n  SORT: \"sort\",\n  UPDATE: \"update\"\n};\n\nexport const commentsReducer = (state, action) => {\n  switch (action.type) {\n    case actions.SORT:\n      return {\n        ...state,\n        comments: sortComments(action.sortOption, state.comments),\n        sortOption: action.sortOption\n      };\n\n    case actions.UPDATE: {\n      // Sort option changed: simply add the sorted comments into the state\n      if (action.sortOption !== state.sortOption) {\n        return {\n          ...state,\n          sortOption: action.sortOption,\n          comments: sortComments(action.sortOption, action.comments)\n        };\n      }\n\n      // New comment added: find the new comment and add it to the state\n      if (action.comments.length > state.comments.length) {\n        const addedComment = maxBy(action.comments, (c) => +c.commentid);\n        return {\n          ...state,\n          comments: [addedComment].concat(state.comments)\n        };\n      }\n      // Comment updated: find and update the comments with changes\n      return {\n        ...state,\n        comments: state.comments.map((comment) => {\n          const commentFromNewComments = action.comments.find(\n            (c) => c.commentid === comment.commentid\n          );\n          if (!isEqual(comment, commentFromNewComments)) {\n            return commentFromNewComments;\n          }\n          return comment;\n        })\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n","import React, {\n  useEffect,\n  useReducer,\n  useCallback,\n  useMemo,\n  useState\n} from \"react\";\nimport {\n  Card,\n  H2,\n  Text,\n  Message,\n  classNames,\n  Select,\n  Icon,\n  Tooltip\n} from \"pi-ui\";\nimport styles from \"./Comments.module.css\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport { CommentContext } from \"./hooks\";\nimport CommentsListWrapper from \"./CommentsList/CommentsListWrapper\";\nimport CommentLoader from \"./Comment/CommentLoader\";\nimport Link from \"src/components/Link\";\nimport { useComments, useLocalStorage } from \"src/hooks\";\nimport {\n  getSortOptionsForSelect,\n  createSelectOptionFromSortOption,\n  commentSortOptions,\n  handleCommentCensoringInfo,\n  NUMBER_OF_LIST_PLACEHOLDERS\n} from \"./helpers\";\nimport { PROPOSAL_MAIN_THREAD_KEY } from \"src/constants\";\nimport { commentsReducer, initialState, actions } from \"./commentsReducer\";\nimport { debounce } from \"lodash\";\n\nconst FlatModeButton = ({ isActive, onClick }) => (\n  <>\n    <div\n      className={classNames(\n        styles.flatButtonWrapper,\n        isActive && styles.flatModeActive\n      )}\n      onClick={onClick}\n    >\n      <Text\n        className={classNames(\n          styles.flatButtonText,\n          isActive && styles.flatModeActive\n        )}\n      >\n        Flat mode\n      </Text>\n    </div>\n    <div>\n      <Tooltip\n        className={styles.flatTooltipWrapper}\n        contentClassName={styles.flatModTooltip}\n        content={\n          <>\n            <p>\n              Flat mode flattens out the comment hierarchy so that filtering\n              criteria can be applied to both top level comments and comment\n              replies equally.\n            </p>\n            <p>\n              When flat mode is turned off, filtering criteria is only applied\n              to top level comments.\n            </p>\n          </>\n        }\n      >\n        <Icon type=\"info\" />\n      </Tooltip>\n    </div>\n  </>\n);\n\nconst CommentsListAndActions = React.memo(\n  ({\n    sortOption,\n    setSortOption,\n    dispatch,\n    comments,\n    numOfComments,\n    state,\n    threadParentID,\n    isSingleThread,\n    recordTokenFull,\n    onCommentVote,\n    recordToken,\n    recordType,\n    lastVisitTimestamp,\n    commentsCtx,\n    onCensorComment,\n    currentUser,\n    userid,\n    proposalState,\n    handleOpenModal,\n    handleCloseModal,\n    loading,\n    recordAuthorID,\n    recordAuthorUsername,\n    recordBaseLink,\n    onSubmitComment,\n    onEditComment,\n    readOnly,\n    identityError,\n    paywallMissing,\n    handleOpenLoginModal,\n    latestAuthorUpdateId,\n    areAuthorUpdatesAllowed,\n    authorUpdateTitle,\n    sectionId\n  }) => {\n    const {\n      getCommentLikeOption,\n      enableCommentVote,\n      userLoggedIn,\n      userEmail,\n      loadingLikes,\n      getCommentVotes\n    } = commentsCtx;\n    const commentsCount = comments ? comments.length : 0;\n    const numOfDuplicatedComments = numOfComments - state.comments.length;\n    const hasDuplicatedComments =\n      !!state.comments.length && numOfDuplicatedComments > 0;\n    /** EDIT MODE START */\n    const [editCommentID, setEditCommentID] = useState(null);\n    const isEditing = !!editCommentID;\n    /** EDIT MODE END*/\n    /** SORT START */\n    const handleSetSortOption = useCallback(\n      (option) => {\n        setSortOption(option.value);\n        dispatch({\n          type: actions.SORT,\n          sortOption: option.value\n        });\n      },\n      [dispatch, setSortOption]\n    );\n\n    const selectOptions = useMemo(() => getSortOptionsForSelect(), []);\n    const selectValue = useMemo(\n      () => createSelectOptionFromSortOption(sortOption),\n      [sortOption]\n    );\n    /** SORT END */\n    /** FLAT MODE START */\n    const [flatModeOnLocalStorage, setflatModeOnLocalStorage] = useLocalStorage(\n      \"flatComments\",\n      false\n    );\n    const [isFlatCommentsMode, setIsFlatCommentsMode] = useState(\n      flatModeOnLocalStorage\n    );\n\n    const handleCommentsModeToggle = () => {\n      const newFlagValue = !isFlatCommentsMode;\n      setIsFlatCommentsMode(newFlagValue);\n      setflatModeOnLocalStorage(newFlagValue);\n      dispatch({\n        type: actions.SORT,\n        sortOption\n      });\n    };\n    const debouncedHandleCommentsModeToggle = debounce(\n      handleCommentsModeToggle,\n      50\n    );\n    /** FLAT MODE END */\n    /** VOTE START */\n    const handleCommentVote = useCallback(\n      (commentID, action) =>\n        recordTokenFull\n          ? onCommentVote(commentID, action, recordTokenFull)\n          : null,\n      [onCommentVote, recordTokenFull]\n    );\n    /** VOTE END */\n    /** CENSOR START */\n    const handleCensorCommentModal = useCallback(\n      function handleCensorCommentModal(id) {\n        const handleCensorComment = handleCommentCensoringInfo(\n          onCensorComment,\n          userid,\n          recordTokenFull,\n          id,\n          proposalState,\n          sectionId\n        );\n        handleOpenModal(ModalConfirmWithReason, {\n          title: \"Censor comment\",\n          reasonLabel: \"Censor reason\",\n          subject: \"censorComment\",\n          successTitle: \"Comment censored\",\n          successMessage: (\n            <Text>The comment has been successfully censored.</Text>\n          ),\n          onSubmit: handleCensorComment,\n          onClose: () => handleCloseModal()\n        });\n      },\n      [\n        onCensorComment,\n        userid,\n        recordTokenFull,\n        proposalState,\n        handleOpenModal,\n        handleCloseModal,\n        sectionId\n      ]\n    );\n    /** CENSOR END */\n    /** LOADERS START */\n    const commentLoaders = useMemo(() => {\n      if (!loading) return null;\n\n      const numOfContents =\n        numOfComments < 3 ? numOfComments : NUMBER_OF_LIST_PLACEHOLDERS;\n      const contents = [];\n      for (let i = 0; i < numOfContents; i++) {\n        contents.push(<CommentLoader key={`comment-loader-${i}`} />);\n      }\n      return contents;\n    }, [numOfComments, loading]);\n    /** LOADERS END */\n    /** SINGLE THREAD VERIFICATION START */\n    const singleThreadCommentCannotBeAccessed =\n      isSingleThread &&\n      ((comments && !comments.find((c) => c.commentid === +threadParentID)) ||\n        numOfComments === 0);\n    /** SINGLE THREAD VERIFICATION END */\n    return (\n      <>\n        {!isEditing && (\n          <div className={classNames(\"container\", styles.commentsHeader)}>\n            {!isSingleThread && (\n              <div className={styles.titleWrapper}>\n                <H2 className={styles.commentsTitle}>\n                  {authorUpdateTitle ? authorUpdateTitle : \"Comments\"}{\" \"}\n                  <span\n                    className={styles.commentsCount}\n                  >{`(${commentsCount})`}</span>\n                </H2>\n                {hasDuplicatedComments && (\n                  <Text\n                    color=\"gray\"\n                    size=\"small\"\n                  >{`(${numOfDuplicatedComments} duplicate comments omitted)`}</Text>\n                )}\n              </div>\n            )}\n            <div className={styles.sortContainer}>\n              {!!comments && !!comments.length && (\n                <>\n                  <Select\n                    value={selectValue}\n                    onChange={handleSetSortOption}\n                    options={selectOptions}\n                  />\n                  {!isSingleThread && (\n                    <FlatModeButton\n                      isActive={isFlatCommentsMode}\n                      onClick={debouncedHandleCommentsModeToggle}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n            {isSingleThread && (\n              <div className=\"justify-left margin-top-s\">\n                <Text className=\"margin-right-xs\">Single comment thread. </Text>\n                <Link to={`/record/${recordToken}?scrollToComments=true`}>\n                  View all.\n                </Link>\n              </div>\n            )}\n          </div>\n        )}\n        <div className={styles.commentsWrapper}>\n          {loading ? (\n            commentLoaders\n          ) : !singleThreadCommentCannotBeAccessed ? (\n            <CommentContext.Provider\n              value={{\n                onSubmitComment,\n                onEditComment,\n                editCommentID,\n                setEditCommentID,\n                onCommentVote: handleCommentVote,\n                recordAuthorID,\n                recordAuthorUsername,\n                recordToken,\n                threadParentID,\n                recordType,\n                proposalState,\n                readOnly,\n                identityError,\n                paywallMissing,\n                isAdmin: currentUser && currentUser.isadmin,\n                currentUser,\n                openCensorModal: handleCensorCommentModal,\n                openLoginModal: handleOpenLoginModal,\n                latestAuthorUpdateId,\n                areAuthorUpdatesAllowed,\n                comments,\n                getCommentLikeOption,\n                enableCommentVote,\n                userLoggedIn,\n                userEmail,\n                loadingLikes,\n                getCommentVotes,\n                sectionId\n              }}\n            >\n              <CommentsListWrapper\n                lastTimeAccessed={lastVisitTimestamp}\n                threadParentID={threadParentID}\n                currentUserID={userid}\n                comments={state.comments}\n                isFlatMode={isFlatCommentsMode}\n                proposalState={proposalState}\n                recordsBaseLink={recordBaseLink}\n              />\n            </CommentContext.Provider>\n          ) : null}\n          {singleThreadCommentCannotBeAccessed && (\n            <Message kind=\"error\">\n              The comment you are trying to access does not exist or it is a\n              duplicated. Return to the full thread to select a valid comment.\n            </Message>\n          )}\n        </div>\n      </>\n    );\n  }\n);\n\nconst Comments = ({\n  recordToken,\n  recordTokenFull,\n  recordAuthorID,\n  recordAuthorUsername,\n  threadParentID,\n  readOnly,\n  className,\n  proposalState,\n  recordBaseLink,\n  areAuthorUpdatesAllowed,\n  handleOpenModal,\n  handleCloseModal,\n  handleOpenLoginModal,\n  paywallMissing,\n  identityError,\n  sectionId\n}) => {\n  const isSingleThread = !!threadParentID;\n  const {\n    onSubmitComment,\n    onEditComment,\n    onCommentVote,\n    onCensorComment,\n    comments,\n    loading,\n    recordType,\n    lastVisitTimestamp,\n    currentUser,\n    getCommentLikeOption,\n    enableCommentVote,\n    userLoggedIn,\n    userEmail,\n    loadingLikes,\n    getCommentVotes,\n    latestAuthorUpdateId\n  } = useComments(recordTokenFull, proposalState, sectionId, threadParentID);\n  const { userid } = currentUser || {};\n  const numOfComments = comments?.length;\n\n  const [state, dispatch] = useReducer(commentsReducer, initialState);\n\n  const [sortOption, setSortOption] = useLocalStorage(\n    `sortComments-${recordToken}`,\n    commentSortOptions.SORT_BY_TOP\n  );\n\n  const authorUpdateTitle = useCallback(\n    (updateId) => {\n      const { extradata } = comments.find(\n        ({ commentid }) => commentid === updateId\n      );\n      const authorUpdateMetadata = JSON.parse(extradata);\n      return authorUpdateMetadata.title;\n    },\n    [comments]\n  );\n\n  useEffect(\n    function handleUpdateComments() {\n      if (!!comments && !!comments.length) {\n        dispatch({\n          type: actions.UPDATE,\n          comments,\n          sortOption\n        });\n      }\n    },\n    [comments, sortOption]\n  );\n\n  const updateTitle = useMemo(() => {\n    if (sectionId && sectionId !== PROPOSAL_MAIN_THREAD_KEY && !isSingleThread)\n      return authorUpdateTitle(sectionId);\n  }, [sectionId, authorUpdateTitle, isSingleThread]);\n\n  return (\n    <>\n      {comments && (\n        <Card\n          id=\"commentArea\"\n          className={classNames(styles.commentAreaContainer, className)}\n        >\n          <CommentsListAndActions\n            sortOption={sortOption}\n            setSortOption={setSortOption}\n            dispatch={dispatch}\n            comments={comments}\n            numOfComments={numOfComments}\n            state={state}\n            threadParentID={threadParentID}\n            isSingleThread={isSingleThread}\n            recordTokenFull={recordTokenFull}\n            onCommentVote={onCommentVote}\n            recordToken={recordToken}\n            recordType={recordType}\n            lastVisitTimestamp={lastVisitTimestamp}\n            commentsCtx={{\n              getCommentLikeOption,\n              enableCommentVote,\n              userLoggedIn,\n              userEmail,\n              loadingLikes,\n              getCommentVotes\n            }}\n            onCensorComment={onCensorComment}\n            userid={userid}\n            currentUser={currentUser}\n            proposalState={proposalState}\n            handleOpenModal={handleOpenModal}\n            handleCloseModal={handleCloseModal}\n            loading={loading}\n            recordAuthorID={recordAuthorID}\n            recordAuthorUsername={recordAuthorUsername}\n            recordBaseLink={recordBaseLink}\n            onSubmitComment={onSubmitComment}\n            onEditComment={onEditComment}\n            readOnly={readOnly}\n            identityError={identityError}\n            paywallMissing={paywallMissing}\n            handleOpenLoginModal={handleOpenLoginModal}\n            latestAuthorUpdateId={latestAuthorUpdateId}\n            areAuthorUpdatesAllowed={areAuthorUpdatesAllowed}\n            authorUpdateTitle={updateTitle}\n            sectionId={sectionId}\n          />\n        </Card>\n      )}\n    </>\n  );\n};\n\nexport default React.memo(Comments);\n","import React from \"react\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport { useMediaQuery, useTheme, getThemeProperty } from \"pi-ui\";\n\nimport ContentLoader from \"react-content-loader\";\n\nconst ExtraSmallLoader = ({\n  primaryColor,\n  secondaryColor,\n  extended,\n  yOffset\n}) => (\n  <ContentLoader\n    height={extended ? 300 : 170}\n    width={400}\n    speed={2}\n    primaryColor={primaryColor}\n    secondaryColor={secondaryColor}\n  >\n    <rect x=\"0\" y=\"0\" width=\"180\" height=\"10\" />\n    <rect x=\"0\" y=\"20\" width=\"360\" height=\"20\" />\n    <rect x=\"0\" y=\"60\" width=\"80\" height=\"20\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"100\" width=\"20\" height=\"14\" />\n        <rect x=\"30\" y=\"100\" width=\"400\" height=\"14\" />\n        <rect x=\"0\" y=\"134\" width=\"400\" height=\"1\" />\n        <rect x=\"0\" y=\"154\" width=\"200\" height=\"12\" />\n        <rect x=\"0\" y=\"180\" width=\"400\" height=\"12\" />\n        <rect x=\"0\" y=\"212\" width=\"400\" height=\"1\" />\n      </>\n    )}\n    <rect x=\"0\" y={`${156 + yOffset}`} width=\"130\" height=\"14\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"220\" width=\"140\" height=\"20\" />\n        <rect x=\"150\" y=\"220\" width=\"140\" height=\"20\" />\n      </>\n    )}\n  </ContentLoader>\n);\n\nconst RegularLoader = ({ primaryColor, secondaryColor, extended, yOffset }) => (\n  <ContentLoader\n    height={extended ? 240 : 100}\n    width={800}\n    speed={2}\n    primaryColor={primaryColor}\n    secondaryColor={secondaryColor}\n  >\n    <rect x=\"0\" y=\"0\" width=\"600\" height=\"20\" />\n    <rect x=\"700\" y=\"0\" width=\"100\" height=\"20\" />\n    <rect x=\"0\" y=\"40\" width=\"100\" height=\"10\" />\n    <rect x=\"110\" y=\"40\" width=\"200\" height=\"10\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"60\" width=\"20\" height=\"14\" />\n        <rect x=\"30\" y=\"60\" width=\"500\" height=\"14\" />\n        <rect x=\"0\" y=\"100\" width=\"800\" height=\"1\" />\n        <rect x=\"0\" y=\"120\" width=\"600\" height=\"12\" />\n        <rect x=\"0\" y=\"136\" width=\"800\" height=\"12\" />\n        <rect x=\"0\" y=\"164\" width=\"800\" height=\"1\" />\n      </>\n    )}\n    <rect x=\"0\" y={`${80 + yOffset}`} width=\"130\" height=\"14\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"220\" width=\"140\" height=\"20\" />\n        <rect x=\"150\" y=\"220\" width=\"140\" height=\"20\" />\n      </>\n    )}\n  </ContentLoader>\n);\n\nconst ProposalLoader = ({ extended }) => {\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  const yOffset = extended ? 100 : 0;\n  const { theme } = useTheme();\n  const primaryColor = getThemeProperty(theme, \"card-background\");\n  const secondaryColor = getThemeProperty(theme, \"dimmed-card-background\");\n  return (\n    <RecordWrapper>\n      {() =>\n        extraSmall ? (\n          <ExtraSmallLoader\n            {...{ primaryColor, secondaryColor, extended, yOffset }}\n          />\n        ) : (\n          <RegularLoader\n            {...{ primaryColor, secondaryColor, extended, yOffset }}\n          />\n        )\n      }\n    </RecordWrapper>\n  );\n};\n\nexport default ProposalLoader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const Or = ({ children }) => {\n  const firstTruthyChild = React.Children.toArray(children).filter(\n    (c) => !!c\n  )[0];\n  return firstTruthyChild || null;\n};\n\nOr.propType = {\n  children: PropTypes.node\n};\n\nexport default Or;\n","import React from \"react\";\nimport {\n  Text,\n  Button,\n  useTheme,\n  classNames,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport styles from \"./WhatAreYourThoughts.module.css\";\n\nconst WhatAreYourThoughts = ({ onLoginClick, onSignupClick }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <div className={styles.wrapper}>\n      <Text className={classNames(styles.text, isDarkTheme && styles.darkText)}>\n        What are your thoughts?\n      </Text>\n      <div className={styles.buttonsWrapper}>\n        {onLoginClick && (\n          <Button\n            kind=\"secondary\"\n            onClick={onLoginClick}\n            data-testid=\"wayt-login-button\"\n          >\n            Log in\n          </Button>\n        )}\n        {onSignupClick && <Button onClick={onSignupClick}>Sign up</Button>}\n      </div>\n    </div>\n  );\n};\n\nexport default WhatAreYourThoughts;\n","import React, { useMemo, useCallback, useEffect, useState } from \"react\";\nimport { Card, Message, P, classNames, Link as PiUiLink } from \"pi-ui\";\nimport get from \"lodash/fp/get\";\nimport { withRouter } from \"react-router-dom\";\nimport Proposal from \"src/components/Proposal\";\nimport styles from \"./Detail.module.css\";\nimport { useProposal } from \"./hooks\";\nimport {\n  usePaywall,\n  useIdentity,\n  useDocumentTitle,\n  useModalContext,\n  useScrollTo,\n  usePolicy\n} from \"src/hooks\";\nimport Comments from \"src/containers/Comments\";\nimport ProposalLoader from \"src/components/Proposal/ProposalLoader\";\nimport { getCommentBlockedReason } from \"./helpers\";\nimport {\n  isVotingFinishedProposal,\n  getProposalToken,\n  isCensoredProposal,\n  isAbandonedProposal,\n  getProposalLink,\n  isActiveProposal\n} from \"../helpers\";\nimport {\n  UnvettedActionsProvider,\n  PublicActionsProvider\n} from \"src/containers/Proposal/Actions\";\nimport { useProposalVote } from \"../hooks\";\nimport Link from \"src/components/Link\";\nimport { GoBackLink } from \"src/components/Router\";\nimport { useConfig } from \"src/containers/Config\";\nimport Or from \"src/components/Or\";\nimport LoggedInContent from \"src/components/LoggedInContent\";\nimport CommentForm from \"src/components/CommentForm/CommentFormLazy\";\nimport IdentityMessageError from \"src/components/IdentityMessageError\";\nimport WhatAreYourThoughts from \"src/components/WhatAreYourThoughts\";\nimport { PROPOSAL_UPDATE_HINT, PROPOSAL_STATE_UNVETTED } from \"src/constants\";\nimport { shortRecordToken } from \"src/helpers\";\nimport ModalLogin from \"src/components/ModalLogin\";\nimport { getQueryStringValue } from \"src/lib/queryString\";\n\nconst COMMENTS_LOGIN_MODAL_ID = \"commentsLoginModal\";\n\nconst SetPageTitle = ({ title }) => {\n  useDocumentTitle(title);\n  return null;\n};\n\nconst ProposalDetail = ({ Main, match, history }) => {\n  const tokenFromUrl = shortRecordToken(get(\"params.token\", match));\n  const threadParentCommentID = get(\"params.commentid\", match);\n  const hasScrollToQuery = !!getQueryStringValue(\"scrollToComments\");\n\n  const { policyTicketVote } = usePolicy();\n  const proposalPageSize = policyTicketVote?.summariespagesize;\n\n  const {\n    proposal,\n    loading,\n    threadParentID,\n    error,\n    isCurrentUserProposalAuthor,\n    commentSectionIds,\n    hasAuthorUpdates,\n    singleThreadRootId,\n    onSubmitComment,\n    currentUser,\n    commentsError,\n    commentsLoading,\n    onReloadProposalDetails,\n    billingStatusChangeUsername,\n    commentsFinishedLoading\n  } = useProposal(tokenFromUrl, proposalPageSize, threadParentCommentID);\n  const { userid } = currentUser || {};\n  const isSingleThread = !!threadParentID;\n  const proposalToken = getProposalToken(proposal);\n  const proposalState = proposal?.state;\n  const { voteSummary, proposalSummary } = useProposalVote(\n    proposalToken || tokenFromUrl\n  );\n  const areCommentsAllowed =\n    !isCensoredProposal(proposal) &&\n    !isVotingFinishedProposal(voteSummary) &&\n    !isAbandonedProposal(proposalSummary);\n  const areAuthorUpdatesAllowed = isActiveProposal(proposalSummary);\n  const isUnvetted = proposalState === PROPOSAL_STATE_UNVETTED;\n  const readOnly = !areCommentsAllowed && !areAuthorUpdatesAllowed;\n  const readOnlyReason = getCommentBlockedReason(proposalSummary);\n  const { javascriptEnabled } = useConfig();\n  const { isPaid, paywallEnabled } = usePaywall();\n  const paywallMissing = paywallEnabled && !isPaid;\n  const [, identityError] = useIdentity();\n\n  const [isWaitingMount, setIsWaitingMount] = useState(true);\n  const hasLoadedDetails = proposal && !isWaitingMount && !loading;\n\n  const shouldScrollToComments =\n    (hasScrollToQuery || isSingleThread) &&\n    hasLoadedDetails &&\n    commentsFinishedLoading;\n  useScrollTo(\"commentArea\", shouldScrollToComments);\n\n  const onRedirectToSignup = useCallback(\n    () => history.push(\"/user/signup\"),\n    [history]\n  );\n\n  const handleSubmitComment = useCallback(\n    ({ comment, title }) => {\n      // If title is provided then we are dealing with an author\n      // update.\n      let extraData = \"\",\n        extraDataHint = \"\";\n      if (title) {\n        extraDataHint = PROPOSAL_UPDATE_HINT;\n        extraData = JSON.stringify({ title });\n      }\n      return onSubmitComment({\n        comment,\n        token: proposalToken,\n        parentID: 0,\n        state: proposalState,\n        extraData,\n        extraDataHint\n      });\n    },\n    [onSubmitComment, proposalState, proposalToken]\n  );\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n  const handleOpenLoginModal = useCallback(() => {\n    handleOpenModal(ModalLogin, {\n      id: COMMENTS_LOGIN_MODAL_ID,\n      onLoggedIn: () => {\n        if (isUnvetted) {\n          onReloadProposalDetails();\n        }\n        handleCloseModal();\n      }\n    });\n  }, [handleOpenModal, handleCloseModal, isUnvetted, onReloadProposalDetails]);\n\n  const CommentsSection = React.memo(({ sectionId }) => (\n    <Comments\n      recordAuthorID={proposal?.userid}\n      recordAuthorUsername={proposal?.username}\n      recordToken={tokenFromUrl}\n      recordTokenFull={proposalToken}\n      threadParentID={threadParentID}\n      readOnly={readOnly}\n      areAuthorUpdatesAllowed={areAuthorUpdatesAllowed}\n      proposalState={proposalState}\n      recordBaseLink={getProposalLink(proposal, javascriptEnabled)}\n      handleOpenModal={handleOpenModal}\n      handleCloseModal={handleCloseModal}\n      handleOpenLoginModal={handleOpenLoginModal}\n      paywallMissing={paywallMissing}\n      identityError={identityError}\n      sectionId={sectionId}\n    />\n  ));\n\n  const canSubmitComments =\n    !isSingleThread &&\n    !readOnly &&\n    (!areAuthorUpdatesAllowed ||\n      (areAuthorUpdatesAllowed && isCurrentUserProposalAuthor)) &&\n    !!proposalToken;\n\n  const proposalComments = useMemo(\n    () => (\n      <>\n        {readOnly && (\n          <Message kind=\"blocked\" title=\"Comments are not allowed\">\n            {readOnlyReason}\n          </Message>\n        )}\n        {!(currentUser && isSingleThread) && !readOnly && (\n          <Card\n            className={classNames(\"container\", styles.commentsHeaderWrapper)}\n          >\n            <LoggedInContent\n              fallback={\n                <WhatAreYourThoughts\n                  onLoginClick={handleOpenLoginModal}\n                  onSignupClick={onRedirectToSignup}\n                />\n              }\n            >\n              <Or>\n                {!isPaid && paywallEnabled && currentUser && (\n                  <Message kind=\"error\">\n                    <P>\n                      You won't be able to submit comments or proposals before\n                      paying the paywall, please visit your{\" \"}\n                      <Link to={`/user/${userid}?tab=credits`}>account</Link>{\" \"}\n                      page to correct this problem.\n                    </P>\n                  </Message>\n                )}\n                {!!identityError && <IdentityMessageError />}\n                {areAuthorUpdatesAllowed && !isCurrentUserProposalAuthor && (\n                  <Message>\n                    Replies & upvotes/downvotes are allowed only on the latest\n                    author update thread.\n                  </Message>\n                )}\n              </Or>\n              {canSubmitComments && (\n                <CommentForm\n                  persistKey={`commenting-on-${tokenFromUrl}`}\n                  onSubmit={handleSubmitComment}\n                  disableSubmit={!!identityError || paywallMissing}\n                  isAuthorUpdate={\n                    areAuthorUpdatesAllowed && isCurrentUserProposalAuthor\n                  }\n                  hasAuthorUpdates={hasAuthorUpdates}\n                />\n              )}\n            </LoggedInContent>\n          </Card>\n        )}\n        {commentsError && (\n          <Message kind=\"error\" className=\"margin-top-m\">\n            {commentsError.toString()}\n          </Message>\n        )}\n        {singleThreadRootId ? (\n          <CommentsSection sectionId={singleThreadRootId} />\n        ) : (\n          <>\n            {commentSectionIds?.map((sectionId) => (\n              <CommentsSection key={sectionId} sectionId={sectionId} />\n            ))}\n          </>\n        )}\n      </>\n    ),\n    [\n      commentSectionIds,\n      singleThreadRootId,\n      areAuthorUpdatesAllowed,\n      currentUser,\n      handleOpenLoginModal,\n      handleSubmitComment,\n      identityError,\n      isCurrentUserProposalAuthor,\n      isPaid,\n      isSingleThread,\n      onRedirectToSignup,\n      paywallEnabled,\n      paywallMissing,\n      readOnly,\n      readOnlyReason,\n      tokenFromUrl,\n      userid,\n      commentsError,\n      hasAuthorUpdates,\n      canSubmitComments\n    ]\n  );\n\n  useEffect(() => {\n    const mountTimeout = setTimeout(() => {\n      setIsWaitingMount(false);\n    }, 500);\n    return () => clearTimeout(mountTimeout);\n  }, []);\n\n  return (\n    <>\n      <Main className={styles.customMain} fillScreen>\n        {proposal && <GoBackLink breakpoint=\"/record/:token\" />}\n        {proposal && <SetPageTitle title={proposal.name} />}\n        <UnvettedActionsProvider>\n          <PublicActionsProvider>\n            {error ? (\n              <Message kind=\"error\">{error.toString()}</Message>\n            ) : !hasLoadedDetails ? (\n              <ProposalLoader extended />\n            ) : (\n              <>\n                <Proposal\n                  proposal={proposal}\n                  billingStatusChangeUsername={billingStatusChangeUsername}\n                  extended\n                  collapseBodyContent={!!threadParentID}\n                />\n                {proposal?.legacytoken && (\n                  <Message className=\"margin-bottom-m\">\n                    <P>\n                      This proposal was submitted to a previous version of\n                      politeia that saved all proposal data to a git repo. The\n                      original proposal data, including all proposal signatures\n                      and timestamps, can be found{\" \"}\n                      <PiUiLink\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        href={`https://github.com/decred-proposals/mainnet/tree/master/${proposal.legacytoken}`}\n                      >\n                        here\n                      </PiUiLink>\n                      .\n                    </P>\n                  </Message>\n                )}\n                {!commentsLoading &&\n                  commentsFinishedLoading &&\n                  proposalComments}\n              </>\n            )}\n          </PublicActionsProvider>\n        </UnvettedActionsProvider>\n      </Main>\n    </>\n  );\n};\n\nexport default withRouter(ProposalDetail);\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport ProposalDetail from \"src/containers/Proposal/Detail\";\n\nconst ProposalDetailPage = () => (\n  <MultipleContentPage topBannerHeight={0}>\n    {(props) => <ProposalDetail {...props} />}\n  </MultipleContentPage>\n);\n\nexport default ProposalDetailPage;\n","import {\n  PROPOSAL_VOTING_INELIGIBLE,\n  PROPOSAL_VOTING_AUTHORIZED,\n  PROPOSAL_VOTING_NOT_AUTHORIZED,\n  PROPOSAL_VOTING_ACTIVE,\n  PROPOSAL_VOTING_APPROVED,\n  PROPOSAL_VOTING_REJECTED\n} from \"src/constants\";\n\nexport const tabValues = {\n  UNDER_REVIEW: \"Under Review\",\n  APPROVED: \"Approved\",\n  REJECTED: \"Rejected\",\n  INELIGIBLE: \"Abandoned\"\n};\n\nexport const noProposalMessage = \"No proposals available\";\n\nexport const statusByTab = {\n  [tabValues.UNDER_REVIEW]: [\n    PROPOSAL_VOTING_ACTIVE,\n    PROPOSAL_VOTING_AUTHORIZED,\n    PROPOSAL_VOTING_NOT_AUTHORIZED\n  ],\n  [tabValues.APPROVED]: [PROPOSAL_VOTING_APPROVED],\n  [tabValues.REJECTED]: [PROPOSAL_VOTING_REJECTED],\n  [tabValues.INELIGIBLE]: [PROPOSAL_VOTING_INELIGIBLE]\n};\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport InfiniteScroll from \"react-infinite-scroller\";\n\nconst DefaultLoader = () => (\n  <div className=\"loader\" key={0}>\n    Loading ...\n  </div>\n);\n\nconst DefaultEmptyList = () => <span>Empty</span>;\n\nconst LazyList = ({\n  items,\n  initialLoad,\n  isLoading,\n  loadingPlaceholder,\n  onFetchMore,\n  hasMore,\n  emptyListComponent,\n  renderItem,\n  pageStart,\n  minInitialLoading\n}) => {\n  const isEmpty = !items.length;\n  const [initialLoading, setInitialLoading] = useState(true);\n  useEffect(() => {\n    let timer;\n    if (minInitialLoading > 0 && initialLoading) {\n      timer = setTimeout(() => {\n        setInitialLoading(false);\n      }, minInitialLoading);\n    }\n    return () => {\n      // clearTimeout when the component is unmounted.\n      clearTimeout(timer);\n    };\n  }, [minInitialLoading, initialLoading]);\n\n  return initialLoading ? (\n    <div data-testid=\"lazy-list\">\n      <div data-testid=\"loading-placeholders\">{loadingPlaceholder}</div>\n    </div>\n  ) : (\n    <div data-testid=\"lazy-list\">\n      <InfiniteScroll\n        pageStart={pageStart}\n        loadMore={onFetchMore}\n        initialLoad={initialLoad}\n        hasMore={hasMore}\n      >\n        {items.map(renderItem)}\n      </InfiniteScroll>\n      {isLoading ? (\n        <div data-testid=\"loading-placeholders\">{loadingPlaceholder}</div>\n      ) : isEmpty ? (\n        emptyListComponent\n      ) : null}\n    </div>\n  );\n};\n\nLazyList.propTypes = {\n  items: PropTypes.array.isRequired,\n  renderItem: PropTypes.func.isRequired,\n  onFetchMore: PropTypes.func.isRequired,\n  initialLoad: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  loadingPlaceholder: PropTypes.node,\n  hasMore: PropTypes.bool,\n  pageStart: PropTypes.number,\n  minInitialLoading: PropTypes.number\n};\n\nLazyList.defaultProps = {\n  initialLoad: true,\n  emptyListComponent: <DefaultEmptyList />,\n  loadingPlaceholder: <DefaultLoader />,\n  pageStart: 0,\n  minInitialLoading: 1250\n  // 1250 allows the animation to complete one full cycle.\n};\n\nexport default LazyList;\n","import React, { useState, useMemo, useEffect } from \"react\";\nimport { Tabs, Tab } from \"pi-ui\";\nimport LazyList from \"src/components/LazyList\";\nimport { getRecordsByTabOption } from \"./helpers\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport { useConfig } from \"src/containers/Config\";\nimport { shortRecordToken } from \"src/helpers\";\nimport { NOJS_ROUTE_PREFIX, PROPOSAL_STATUS_CENSORED } from \"src/constants\";\n\nconst LoadingPlaceholders = ({ numberOfItems, placeholder }) => {\n  const Item = placeholder;\n  const placeholders = [];\n  for (let i = 0; i < numberOfItems; i++) {\n    placeholders.push(<Item key={`placeholder-${i}`} />);\n  }\n  return <>{placeholders}</>;\n};\n\nconst getFilteredRecordsAndToken = (records, tokens, tab, filterCensored) => {\n  const filteredTokens = tokens[tab].map((token) => shortRecordToken(token));\n  let filteredRecords =\n    (records &&\n      filteredTokens &&\n      getRecordsByTabOption(records, filteredTokens)) ||\n    [];\n  if (filterCensored) {\n    filteredRecords = filteredRecords.filter(\n      ({ status }) => status !== PROPOSAL_STATUS_CENSORED\n    );\n  }\n  return [filteredRecords, filteredTokens];\n};\n\nconst getDefaultEmptyMessage = () => \"No records available\";\n\nconst RecordsView = ({\n  children,\n  records,\n  tabLabels,\n  recordTokensByTab,\n  renderRecord,\n  placeholder,\n  getEmptyMessage = getDefaultEmptyMessage,\n  onFetchMoreProposals,\n  onTabChange,\n  isLoading,\n  index,\n  onSetIndex,\n  hasMore,\n  filterCensored,\n  pageSize,\n  sort\n}) => {\n  const [loadingItems, setLoadingItems] = useState(pageSize);\n  const { javascriptEnabled } = useConfig();\n\n  useEffect(\n    function onTabIndexChange() {\n      onTabChange && onTabChange(index);\n    },\n    [index, onTabChange]\n  );\n  const tabOption = tabLabels[index];\n  const [filteredRecords, filteredTokens] = useMemo(\n    () =>\n      getFilteredRecordsAndToken(\n        records,\n        recordTokensByTab,\n        tabOption,\n        filterCensored,\n        sort\n      ),\n    [recordTokensByTab, records, tabOption, filterCensored, sort]\n  );\n\n  const handleFetchMoreRecords = () => {\n    if (!filteredTokens || isLoading) return;\n    onFetchMoreProposals && onFetchMoreProposals();\n    setLoadingItems(pageSize);\n  };\n\n  const tabs = useMemo(\n    () => tabLabels.map((label) => <Tab key={`tab-${label}`} label={label} />),\n    [tabLabels]\n  );\n\n  const nojsTabs = useMemo(\n    () =>\n      tabLabels.map((label) => (\n        <Tab\n          key={`tab2-${label}`}\n          label={\n            <a href={`${NOJS_ROUTE_PREFIX}/?tab=${label.toLowerCase()}`}>\n              {label}\n            </a>\n          }\n        />\n      )),\n    [tabLabels]\n  );\n\n  const loadingPlaceholders = useMemo(\n    () => (\n      <LoadingPlaceholders\n        numberOfItems={loadingItems}\n        placeholder={placeholder}\n      />\n    ),\n    [loadingItems, placeholder]\n  );\n\n  return children({\n    tabs: (\n      <Tabs onSelectTab={onSetIndex} activeTabIndex={index} mode=\"horizontal\">\n        {javascriptEnabled ? tabs : nojsTabs}\n      </Tabs>\n    ),\n    content: (\n      <LazyList\n        items={filteredRecords}\n        renderItem={renderRecord}\n        onFetchMore={handleFetchMoreRecords}\n        hasMore={!!hasMore}\n        emptyListComponent={\n          <HelpMessage>{getEmptyMessage(tabOption)}</HelpMessage>\n        }\n        isLoading={isLoading}\n        loadingPlaceholder={loadingPlaceholders}\n      />\n    )\n  });\n};\n\nexport default RecordsView;\n","/**\n * Filter the records from an array of tokens and object of records by token\n * @param {Array} records\n * @param {Object} recordsTokens\n * @returns {Array} records\n */\nexport const getRecordsByTabOption = (records, tokens) =>\n  tokens.map((token) => records[token]).filter(Boolean);\n\n/**\n * Returns the censorsihp token of a given record\n * @param {Object} record\n * @returns {String} recordToken\n */\nexport const getRecordToken = (record) =>\n  record && record.censorshiprecord && record.censorshiprecord.token;\n","import React, { useCallback, useMemo } from \"react\";\nimport get from \"lodash/get\";\nimport styles from \"./VettedProposals.module.css\";\nimport { tabValues, statusByTab } from \"./helpers\";\nimport { mapProposalsTokensByTab } from \"src/containers/Proposal/helpers\";\nimport { useProposalsBatch, useQueryStringWithIndexValue } from \"src/hooks\";\nimport Proposal from \"src/components/Proposal\";\nimport ProposalLoader from \"src/components/Proposal/ProposalLoader\";\nimport { PublicActionsProvider } from \"src/containers/Proposal/Actions\";\nimport RecordsView from \"src/components/RecordsView\";\nimport { LIST_HEADER_VETTED } from \"src/constants\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst renderProposal = (record) =>\n  record?.forceLoad ? (\n    <ProposalLoader />\n  ) : (\n    <Proposal key={record.censorshiprecord.token} proposal={record} />\n  );\n\nconst tabLabels = [\n  tabValues.UNDER_REVIEW,\n  tabValues.APPROVED,\n  tabValues.REJECTED,\n  tabValues.INELIGIBLE\n];\n\nconst VettedProposals = ({ TopBanner, PageDetails, Sidebar, Main }) => {\n  const [index, onSetIndex] = useQueryStringWithIndexValue(\"tab\", 0, tabLabels);\n  const statuses = statusByTab[tabLabels[index]];\n  const policy = usePolicy();\n  const proposalPageSize = get(policy, [\n    \"policyTicketVote\",\n    \"summariespagesize\"\n  ]);\n  const inventoryPageSize = get(policy, [\n    \"policyTicketVote\",\n    \"inventorypagesize\"\n  ]);\n\n  const {\n    proposals,\n    proposalsTokens,\n    loading,\n    verifying,\n    onRestartMachine,\n    hasMoreProposals,\n    onFetchMoreProposals\n  } = useProposalsBatch({\n    fetchRfpLinks: true,\n    fetchVoteSummaries: true,\n    statuses: statuses,\n    proposalPageSize: proposalPageSize,\n    inventoryPageSize: inventoryPageSize,\n    fetchVoteSummary: true,\n    fetchProposalSummary: true\n  });\n\n  const getEmptyMessage = useCallback((tab) => {\n    const mapTabToMessage = {\n      [tabValues.UNDER_REVIEW]: \"No proposals under review\",\n      [tabValues.APPROVED]: \"No proposals approved\",\n      [tabValues.REJECTED]: \"No proposals rejected\",\n      [tabValues.INELIGIBLE]: \"No proposals archived or censored\"\n    };\n    return mapTabToMessage[tab];\n  }, []);\n\n  const recordTokensByTab = useMemo(\n    () => mapProposalsTokensByTab(statusByTab, proposalsTokens),\n    [proposalsTokens]\n  );\n\n  const content = useCallback(\n    ({ tabs, content }) => (\n      <>\n        <TopBanner>\n          <PageDetails title={LIST_HEADER_VETTED}>{tabs}</PageDetails>\n        </TopBanner>\n        <Sidebar />\n        <Main className={styles.customMain}>\n          <PublicActionsProvider>\n            {proposalsTokens && content}\n          </PublicActionsProvider>\n        </Main>\n      </>\n    ),\n    [proposalsTokens]\n  );\n\n  const handleSetIndex = (newIndex) => {\n    onSetIndex(newIndex);\n    onRestartMachine(statusByTab[tabLabels[newIndex]]);\n  };\n\n  return (\n    <RecordsView\n      records={proposals}\n      tabLabels={tabLabels}\n      recordTokensByTab={recordTokensByTab}\n      renderRecord={renderProposal}\n      displayTabCount={!!proposalsTokens}\n      placeholder={ProposalLoader}\n      getEmptyMessage={getEmptyMessage}\n      index={index}\n      onSetIndex={handleSetIndex}\n      onFetchMoreProposals={onFetchMoreProposals}\n      dropdownTabsForMobile\n      hasMore={hasMoreProposals}\n      pageSize={proposalPageSize}\n      isLoading={loading || verifying}\n    >\n      {content}\n    </RecordsView>\n  );\n};\n\nexport default VettedProposals;\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport VettedProposals from \"src/containers/Proposal/Vetted\";\n\nconst VettedList = () => (\n  <MultipleContentPage disableScrollToTop>\n    {(props) => <VettedProposals {...props} />}\n  </MultipleContentPage>\n);\n\nexport default VettedList;\n","import {\n  PROPOSAL_STATUS_UNREVIEWED,\n  PROPOSAL_STATUS_CENSORED\n} from \"src/constants\";\n\nexport const tabValues = {\n  UNREVIEWED: \"Unreviewed\",\n  CENSORED: \"Censored\"\n};\n\nexport const statusByTab = {\n  [tabValues.UNREVIEWED]: [PROPOSAL_STATUS_UNREVIEWED],\n  [tabValues.CENSORED]: [PROPOSAL_STATUS_CENSORED]\n};\n","import React, { useCallback } from \"react\";\nimport useProposalsBatch from \"src/hooks/api/useProposalsBatch\";\nimport Proposal from \"src/components/Proposal\";\nimport ProposalLoader from \"src/components/Proposal/ProposalLoader\";\nimport useQueryStringWithIndexValue from \"src/hooks/utils/useQueryStringWithIndexValue\";\nimport { tabValues, statusByTab } from \"./helpers\";\nimport { mapProposalsTokensByTab } from \"src/containers/Proposal/helpers\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\nimport {\n  UnvettedActionsProvider,\n  PublicActionsProvider\n} from \"src/containers/Proposal/Actions\";\nimport RecordsView from \"src/components/RecordsView\";\nimport { LIST_HEADER_ADMIN } from \"src/constants\";\n\nconst renderProposal = (prop) => (\n  <Proposal key={prop.censorshiprecord.token} proposal={prop} />\n);\n\nconst tabLabels = [tabValues.UNREVIEWED, tabValues.CENSORED];\n\nconst AdminProposals = ({ TopBanner, PageDetails, Main }) => {\n  const [tabIndex, setTabIndex] = useQueryStringWithIndexValue(\n    \"tab\",\n    0,\n    tabLabels\n  );\n  const {\n    policyTicketVote: {\n      summariespagesize: proposalPageSize,\n      inventorypagesize: inventoryPageSize\n    }\n  } = usePolicy();\n  const {\n    proposals,\n    proposalsTokens,\n    loading,\n    verifying,\n    onRestartMachine,\n    hasMoreProposals,\n    onFetchMoreProposals\n  } = useProposalsBatch({\n    fetchRfpLinks: true,\n    fetchVoteSummary: false,\n    fetchProposalSummary: true,\n    unvetted: true,\n    proposalStatus: statusByTab[tabLabels[tabIndex]],\n    proposalPageSize: proposalPageSize,\n    inventoryPageSize: inventoryPageSize\n  });\n\n  const getEmptyMessage = useCallback((tab) => {\n    const mapTabToMessage = {\n      [tabValues.UNREVIEWED]: \"No proposals unreviewed\",\n      [tabValues.CENSORED]: \"No proposals censored\"\n    };\n    return mapTabToMessage[tab];\n  }, []);\n\n  const handleSetIndex = (newIndex) => {\n    setTabIndex(newIndex);\n    onRestartMachine(statusByTab[tabLabels[newIndex]]);\n  };\n\n  return (\n    <RecordsView\n      records={proposals}\n      tabLabels={tabLabels}\n      recordTokensByTab={mapProposalsTokensByTab(\n        statusByTab,\n        proposalsTokens,\n        true\n      )}\n      renderRecord={renderProposal}\n      displayTabCount={!!proposalsTokens}\n      placeholder={ProposalLoader}\n      index={tabIndex}\n      onSetIndex={handleSetIndex}\n      onFetchMoreProposals={onFetchMoreProposals}\n      dropdownTabsForMobile={true}\n      hasMore={hasMoreProposals}\n      pageSize={proposalPageSize}\n      isLoading={loading || verifying}\n      getEmptyMessage={getEmptyMessage}\n    >\n      {({ tabs, content }) => (\n        <>\n          <TopBanner>\n            <PageDetails title={LIST_HEADER_ADMIN}>{tabs}</PageDetails>\n          </TopBanner>\n          <Main fillScreen>\n            <PublicActionsProvider>\n              <UnvettedActionsProvider>\n                {proposalsTokens && content}\n              </UnvettedActionsProvider>\n            </PublicActionsProvider>\n          </Main>\n        </>\n      )}\n    </RecordsView>\n  );\n};\n\nexport default AdminProposals;\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport AdminProposals from \"src/containers/Proposal/Admin\";\n\nconst AdminList = () => {\n  return (\n    <MultipleContentPage disableScrollToTop>\n      {(props) => <AdminProposals {...props} />}\n    </MultipleContentPage>\n  );\n};\n\nexport default AdminList;\n","import React from \"react\";\nimport ContentLoader from \"react-content-loader\";\nimport { useTheme, getThemeProperty } from \"pi-ui\";\n\nconst ProposalFormLoader = () => {\n  const { theme } = useTheme();\n  const primaryColor = getThemeProperty(theme, \"card-background\");\n  const secondaryColor = getThemeProperty(theme, \"dimmed-card-background\");\n  return (\n    <ContentLoader\n      height={420}\n      width={800}\n      speed={2}\n      primaryColor={primaryColor}\n      secondaryColor={secondaryColor}\n    >\n      <rect x=\"0\" y=\"10\" width=\"800\" height=\"40\" />\n\n      <rect x=\"0\" y=\"75\" width=\"800\" height=\"1\" />\n\n      <rect x=\"0\" y=\"100\" width=\"800\" height=\"150\" />\n\n      <rect x=\"0\" y=\"280\" width=\"800\" height=\"1\" />\n      <rect x=\"0\" y=\"310\" width=\"130\" height=\"14\" />\n      <rect x=\"150\" y=\"310\" width=\"130\" height=\"14\" />\n      <rect x=\"500\" y=\"360\" width=\"140\" height=\"40\" />\n      <rect x=\"650\" y=\"360\" width=\"140\" height=\"40\" />\n    </ContentLoader>\n  );\n};\n\nexport default ProposalFormLoader;\n","import React, { lazy, Suspense } from \"react\";\nimport ProposalFormLoader from \"./ProposalFormLoader\";\n\nconst ProposalForm = lazy(() =>\n  import(/* webpackChunkName: \"ProposalForm\" */ \"./ProposalForm\")\n);\n\nconst ProposalFormLazy = (props) => (\n  <Suspense fallback={<ProposalFormLoader />}>\n    <ProposalForm {...props} />\n  </Suspense>\n);\n\nexport default ProposalFormLazy;\n","import { Message, Card, P } from \"pi-ui\";\nimport React from \"react\";\nimport ProposalForm from \"src/components/ProposalForm/ProposalFormLazy\";\nimport IdentityMessageError from \"src/components/IdentityMessageError\";\nimport Or from \"src/components/Or\";\nimport Link from \"src/components/Link\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport useIdentity from \"src/hooks/api/useIdentity\";\nimport { useNewProposal } from \"./hooks\";\n\nconst NewProposal = () => {\n  const { onSubmitProposal, currentUser } = useNewProposal();\n  const { userid } = currentUser || {};\n  const { isPaid, paywallEnabled } = usePaywall();\n  const [, identityError] = useIdentity();\n\n  return (\n    <Card className=\"container\">\n      <Or>\n        {!isPaid && paywallEnabled && (\n          <Message kind=\"error\">\n            <P>\n              You won't be able to submit comments or proposals before paying\n              the paywall, please visit your{\" \"}\n              <Link to={`/user/${userid}?tab=credits`}>account</Link> page to\n              correct this problem.\n            </P>\n          </Message>\n        )}\n        {!!identityError && <IdentityMessageError />}\n      </Or>\n      <ProposalForm\n        disableSubmit={(paywallEnabled && !isPaid) || !!identityError}\n        onSubmit={onSubmitProposal}\n      />\n    </Card>\n  );\n};\n\nexport default NewProposal;\n","import * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\nimport { useLoaderContext } from \"src/containers/Loader\";\n\nexport function useNewProposal() {\n  const onSubmitProposal = useAction(act.onSaveNewProposal);\n  const { currentUser } = useLoaderContext();\n  return { onSubmitProposal, currentUser };\n}\n","import React from \"react\";\nimport { Modal, H3, Card } from \"pi-ui\";\nimport { Event, Title, RfpTag } from \"../RecordWrapper/RecordWrapper\";\nimport styles from \"./ModalDrafts.module.css\";\nimport { withRouter } from \"react-router-dom\";\nimport { PROPOSAL_TYPE_RFP } from \"src/constants\";\n\nconst ModalDrafts = ({ show, onClose, drafts, history }) => {\n  const handleClick = (draftId) => () => {\n    onClose();\n    history.push(`/record/new?draft=${draftId}`);\n  };\n  return (\n    <Modal show={show} onClose={onClose} style={{ width: \"600px\" }}>\n      <H3 className={styles.modalTitle}>My Drafts</H3>\n      <div className=\"margin-bottom-m margin-top-m\">\n        {drafts.map((draft) => (\n          <Card\n            className={styles.draftWrapper}\n            onClick={handleClick(draft.draftId)}\n          >\n            {draft.type === PROPOSAL_TYPE_RFP ? (\n              <Title>\n                <RfpTag />\n                <span className={styles.draftTitleRfp}>{draft.name}</span>\n              </Title>\n            ) : (\n              <Title>{draft.name}</Title>\n            )}\n            <Event event=\"\" timestamp={draft.timestamp} />\n          </Card>\n        ))}\n      </div>\n    </Modal>\n  );\n};\nexport default withRouter(ModalDrafts);\n","import React, { useCallback, useMemo } from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport ProposalNewForm from \"src/containers/Proposal/New\";\nimport { Button } from \"pi-ui\";\nimport { useModalContext } from \"src/hooks\";\nimport { useDraftProposals } from \"src/containers/Proposal/User/hooks\";\nimport ModalDrafts from \"src/components/ModalDrafts\";\n\nconst DraftsButton = () => {\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n  const { draftProposals } = useDraftProposals();\n\n  const drafts = useMemo(\n    () =>\n      draftProposals\n        ? Object.values(draftProposals).filter((draft) => !!draft.draftId)\n        : [],\n    [draftProposals]\n  );\n\n  const openDraftsModal = useCallback(() => {\n    handleOpenModal(ModalDrafts, { onClose: handleCloseModal, drafts });\n  }, [handleOpenModal, handleCloseModal, drafts]);\n\n  return (\n    drafts.length > 0 && (\n      <Button\n        kind=\"secondary\"\n        onClick={openDraftsModal}\n        data-testid=\"proposal-new-draft-button\"\n      >\n        Drafts\n      </Button>\n    )\n  );\n};\n\nconst PageProposalsNew = () => {\n  return (\n    <MultipleContentPage topBannerHeight={90}>\n      {({ TopBanner, PageDetails, Main }) => (\n        <>\n          <TopBanner>\n            <PageDetails\n              title=\"Create Proposal\"\n              actionsContent={<DraftsButton />}\n            />\n          </TopBanner>\n          <Main fillScreen>\n            <ProposalNewForm />\n          </Main>\n        </>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageProposalsNew;\n","import React from \"react\";\nimport get from \"lodash/fp/get\";\nimport { Card, Message, P } from \"pi-ui\";\nimport { useProposal } from \"../Detail/hooks\";\nimport { withRouter } from \"react-router-dom\";\nimport { useEditProposal } from \"./hooks\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport useIdentity from \"src/hooks/api/useIdentity\";\nimport Or from \"src/components/Or\";\nimport IdentityMessageError from \"src/components/IdentityMessageError\";\nimport ProposalForm from \"src/components/ProposalForm/ProposalFormLazy\";\nimport Link from \"src/components/Link\";\nimport ProposalFormLoader from \"src/components/ProposalForm/ProposalFormLoader\";\nimport {\n  PROPOSAL_TYPE_REGULAR,\n  PROPOSAL_TYPE_RFP,\n  PROPOSAL_TYPE_RFP_SUBMISSION\n} from \"src/constants\";\nimport { getMarkdownContent, isPublicProposal } from \"../helpers\";\nimport { formatUnixTimestampToObj } from \"src/utils\";\nimport { getAttachmentsFiles } from \"src/helpers\";\nimport { usdFormatter } from \"src/utils\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst EditProposal = ({ match }) => {\n  const tokenFromUrl = get(\"params.token\", match);\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n  const { proposal, loading } = useProposal(tokenFromUrl, proposalPageSize);\n  const isPublic = isPublicProposal(proposal);\n  const { onEditProposal, currentUser } = useEditProposal();\n  const { userid } = currentUser || {};\n  const { isPaid, paywallEnabled } = usePaywall();\n  const [, identityError] = useIdentity();\n  const hasDetails =\n    proposal?.files.filter((f) => f.name === \"index.md\").length > 0;\n\n  const initialValues = proposal\n    ? {\n        token: proposal.censorshiprecord.token,\n        name: proposal.name,\n        type:\n          proposal && proposal.linkby\n            ? PROPOSAL_TYPE_RFP\n            : proposal.linkto\n            ? PROPOSAL_TYPE_RFP_SUBMISSION\n            : PROPOSAL_TYPE_REGULAR,\n        rfpDeadline:\n          proposal.linkby && formatUnixTimestampToObj(proposal.linkby),\n        rfpLink: proposal.linkto,\n        description: getMarkdownContent(proposal.files),\n        files: getAttachmentsFiles(proposal.files),\n        amount: proposal.amount\n          ? `${usdFormatter.format(proposal.amount)}`\n          : undefined,\n        startDate:\n          proposal.startDate && formatUnixTimestampToObj(proposal.startDate),\n        endDate: proposal.endDate && formatUnixTimestampToObj(proposal.endDate),\n        domain: proposal.domain\n      }\n    : null;\n\n  return (\n    <Card className=\"container\">\n      <Or>\n        {!isPaid && paywallEnabled && (\n          <Message kind=\"error\">\n            <P>\n              You won't be able to submit comments or proposals before paying\n              the paywall, please visit your{\" \"}\n              <Link to={`/user/${userid}?tab=credits`}>account</Link> page to\n              correct this problem.\n            </P>\n          </Message>\n        )}\n        {!!identityError && <IdentityMessageError />}\n      </Or>\n      {!loading && !!proposal && hasDetails ? (\n        <ProposalForm\n          initialValues={initialValues}\n          onSubmit={onEditProposal}\n          isPublic={isPublic}\n        />\n      ) : (\n        <ProposalFormLoader />\n      )}\n    </Card>\n  );\n};\n\nexport default withRouter(EditProposal);\n","import * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\nimport { useLoaderContext } from \"src/containers/Loader\";\n\nexport function useEditProposal() {\n  const onEditProposal = useAction(act.onEditProposal);\n  const { currentUser } = useLoaderContext();\n  return { onEditProposal, currentUser };\n}\n","import React from \"react\";\nimport { Button, useMediaQuery } from \"pi-ui\";\nimport { withRouter } from \"react-router-dom\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport ProposalEdit from \"src/containers/Proposal/Edit\";\n\nconst PageProposalEdit = ({ history, match }) => {\n  const mobile = useMediaQuery(\"(max-width: 560px)\");\n\n  const CancelButton = () => (\n    <Button\n      type=\"button\"\n      kind=\"secondary\"\n      size={mobile ? \"sm\" : \"md\"}\n      onClick={() => history.push(`/record/${match.params.token}`)}\n    >\n      Cancel\n    </Button>\n  );\n\n  return (\n    <MultipleContentPage topBannerHeight={90}>\n      {({ TopBanner, PageDetails, Main }) => (\n        <>\n          <TopBanner>\n            <PageDetails\n              title=\"Edit Proposal\"\n              actionsContent={<CancelButton />}\n            />\n          </TopBanner>\n          <Main fillScreen>\n            <ProposalEdit />\n          </Main>\n        </>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default withRouter(PageProposalEdit);\n","import React from \"react\";\nimport get from \"lodash/fp/get\";\nimport { classNames } from \"pi-ui\";\nimport { getMarkdownContent } from \"src/containers/Proposal/helpers\";\nimport { useProposal } from \"src/containers/Proposal/Detail/hooks\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\nimport styles from \"./Proposal.module.css\";\n\nconst RawProposal = ({ match }) => {\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n  const tokenFromUrl = get(\"params.token\", match);\n  const { proposal, loading, error } = useProposal(\n    tokenFromUrl,\n    proposalPageSize\n  );\n  const rawMarkdown = proposal ? getMarkdownContent(proposal.files) : null;\n  return !loading && !error ? (\n    <div>\n      <pre className={classNames(\"markdown-body\", styles.rawMarkdownPre)}>\n        {rawMarkdown}\n      </pre>\n    </div>\n  ) : null;\n};\n\nexport default RawProposal;\n","import React from \"react\";\nimport RawProposal from \"src/components/Proposal/RawProposal\";\nimport { withRouter } from \"react-router-dom\";\n\n/** The raw markdown proposal page was created to match the behavior of\n * \"view raw\" from github where the raw markdown is opened in a new tab.\n * We considered the option to render it in place with a toggle but decided to\n * go with the former because people are already used to it and we believe it\n * will translate to better UX.\n */\nconst RawProposalPage = (props) => <RawProposal {...props} />;\n\nexport default withRouter(RawProposalPage);\n","import {\n  Button,\n  Modal,\n  TextInput,\n  Icon,\n  useTheme,\n  getThemeProperty\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState, useEffect } from \"react\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport { isEmpty } from \"src/helpers\";\n\nconst ModalChangeUsername = ({\n  show,\n  onClose,\n  validationSchema,\n  onChangeUsername\n}) => {\n  const [newUsername, setNewUsername] = useState(\"\");\n  const success = !!newUsername;\n  const onSubmitChangeUsername = async (\n    values,\n    { resetForm, setSubmitting, setFieldError }\n  ) => {\n    try {\n      await onChangeUsername(values);\n      resetForm();\n      setSubmitting(false);\n      setNewUsername(values.newUsername);\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n    }\n  };\n\n  useEffect(() => {\n    setNewUsername(\"\");\n  }, [show]);\n\n  const { theme } = useTheme();\n  const successIconBgColor = getThemeProperty(\n    theme,\n    \"success-icon-background-color\"\n  );\n  const iconCheckmarkColor = getThemeProperty(\n    theme,\n    \"success-icon-checkmark-color\"\n  );\n\n  return (\n    <Modal\n      title={success ? \"Username successfully changed\" : \"Change Username\"}\n      iconComponent={\n        success && (\n          <Icon\n            type={\"checkmark\"}\n            size={26}\n            iconColor={iconCheckmarkColor}\n            backgroundColor={successIconBgColor}\n          />\n        )\n      }\n      show={show}\n      onClose={onClose}\n    >\n      {!success && (\n        <FormWrapper\n          initialValues={{\n            newUsername: \"\",\n            password: \"\"\n          }}\n          onSubmit={onSubmitChangeUsername}\n          loading={!validationSchema}\n          validationSchema={validationSchema}\n        >\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            values,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            isSubmitting,\n            errors,\n            touched\n          }) => {\n            const canSubmit =\n              values.newUsername && values.password && isEmpty(errors);\n            return (\n              <Form onSubmit={handleSubmit}>\n                {errors && errors.global && (\n                  <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n                )}\n                <TextInput\n                  label=\"New Username\"\n                  id=\"newUsername\"\n                  type=\"text\"\n                  autoComplete=\"username\"\n                  value={values.newUsername}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.newUsername && errors.newUsername}\n                />\n                <TextInput\n                  label=\"Password\"\n                  id=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  value={values.password}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.password && errors.password}\n                />\n                <Actions className=\"no-padding-bottom\">\n                  <Button\n                    loading={isSubmitting}\n                    kind={canSubmit ? \"primary\" : \"disabled\"}\n                    type=\"submit\"\n                  >\n                    Change Username\n                  </Button>\n                </Actions>\n              </Form>\n            );\n          }}\n        </FormWrapper>\n      )}\n      {success && (\n        <>\n          {`Your username was successfully changed! Now your username is \"${newUsername}\". `}\n          <div className=\"justify-right margin-top-m\">\n            <Button onClick={onClose}>Ok</Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalChangeUsername.propTypes = {\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  handleSubmit: PropTypes.func,\n  validationSchema: PropTypes.object\n};\n\nexport default ModalChangeUsername;\n","import React from \"react\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport styles from \"./DraftProposal.module.css\";\nimport { PROPOSAL_TYPE_RFP } from \"src/constants\";\n\nconst DraftProposal = ({ draft, onDelete }) => {\n  const { name, draftId, timestamp, type } = draft;\n  function handleDeleteDraft() {\n    onDelete(draftId);\n  }\n  return (\n    <>\n      <RecordWrapper>\n        {({ Event, Title, Header, Subtitle, Edit, Status }) => (\n          <>\n            <Header\n              disableMobileView\n              title={\n                <Title\n                  id={`proposal-title-${draftId}`}\n                  truncate\n                  linesBeforeTruncate={2}\n                  url={`/record/new?draft=${draftId}`}\n                >\n                  {name}\n                </Title>\n              }\n              status={\n                <Status disableMobileView>\n                  <button\n                    onClick={handleDeleteDraft}\n                    className={styles.deleteDraft}\n                  >\n                    &times;\n                  </button>\n                </Status>\n              }\n              isRfp={type === PROPOSAL_TYPE_RFP}\n              edit={<Edit url={`/record/new?draft=${draftId}`} />}\n              subtitle={\n                <Subtitle>\n                  <Event keepOnMobile event=\"edited\" timestamp={timestamp} />\n                </Subtitle>\n              }\n            />\n          </>\n        )}\n      </RecordWrapper>\n    </>\n  );\n};\n\nexport default React.memo(DraftProposal);\n","import React from \"react\";\nimport { Text } from \"pi-ui\";\nimport { useDraftProposals } from \"./hooks\";\nimport DraftProposal from \"src/components/Proposal/DraftProposal\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst Drafts = () => {\n  const { draftProposals, onDeleteDraftProposal } = useDraftProposals();\n\n  const handleDeleteDraft = (draftID) => () => {\n    onDeleteDraftProposal(draftID);\n  };\n\n  const drafts = draftProposals\n    ? Object.values(draftProposals).filter((draft) => !!draft.draftId)\n    : [];\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenDeleteDraftModal = (draftId) => () => {\n    handleOpenModal(ModalConfirm, {\n      title: \"Delete draft proposal\",\n      message: \"Are you sure you want to delete this draft?\",\n      successTitle: \"Draft proposal deleted\",\n      successMessage: (\n        <Text>The draft proposal has been successfully deleted!</Text>\n      ),\n      onClose: handleCloseModal,\n      onSubmit: handleDeleteDraft(draftId)\n    });\n  };\n\n  return (\n    <>\n      {drafts.length ? (\n        drafts.map((draft) => (\n          <DraftProposal\n            key={`draft-${draft.draftId}`}\n            onDelete={handleOpenDeleteDraftModal(draft.draftId)}\n            draft={draft}\n          />\n        ))\n      ) : (\n        <HelpMessage>No drafts available</HelpMessage>\n      )}\n    </>\n  );\n};\n\nexport default Drafts;\n","import React, { useState, useEffect } from \"react\";\nimport { useUserProposals } from \"./hooks\";\nimport Proposal from \"src/components/Proposal\";\nimport ProposalLoader from \"src/components/Proposal/ProposalLoader\";\nimport {\n  UnvettedActionsProvider,\n  PublicActionsProvider\n} from \"src/containers/Proposal/Actions\";\nimport LazyList from \"src/components/LazyList\";\nimport LoadingPlaceholders from \"src/components/LoadingPlaceholders\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst Proposals = (props) => {\n  const renderProposal = (record) => {\n    return <Proposal key={record.censorshiprecord.token} proposal={record} />;\n  };\n\n  const [hasMoreToLoad, setHasMore] = useState(false);\n\n  const { userID } = props;\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n  const { proposals, loading, numOfUserProposals, onFetchMoreProposals } =\n    useUserProposals({ proposalPageSize, userID });\n\n  const amountOfProposalsFetched = proposals ? proposals.length : 0;\n\n  async function handleFetchMoreProposals() {\n    try {\n      const lastProposal =\n        proposals && !!proposals.length && proposals[proposals.length - 1];\n      const lastProposalToken =\n        lastProposal && lastProposal.censorshiprecord.token;\n      setHasMore(false);\n      if (lastProposalToken) {\n        await onFetchMoreProposals();\n      }\n    } catch (e) {\n      console.error(e);\n      throw e;\n    }\n  }\n\n  const numOfProposalsLoaded = proposals.length;\n  const initialFetchDone = numOfProposalsLoaded === numOfUserProposals;\n\n  useEffect(() => {\n    const hasMoreRecordsToLoad =\n      !initialFetchDone || numOfProposalsLoaded < numOfUserProposals;\n    setHasMore(hasMoreRecordsToLoad);\n  }, [numOfProposalsLoaded, numOfUserProposals, initialFetchDone]);\n\n  const amountOfMissingProposals =\n    numOfUserProposals - amountOfProposalsFetched;\n  const itemsToBeLoaded =\n    amountOfMissingProposals > proposalPageSize\n      ? proposalPageSize\n      : amountOfMissingProposals;\n\n  return (\n    <UnvettedActionsProvider>\n      <PublicActionsProvider>\n        <LazyList\n          items={proposals || []}\n          renderItem={renderProposal}\n          onFetchMore={handleFetchMoreProposals}\n          hasMore={hasMoreToLoad}\n          isLoading={loading}\n          emptyListComponent={<HelpMessage>No proposals available</HelpMessage>}\n          loadingPlaceholder={\n            <LoadingPlaceholders\n              placeholder={ProposalLoader}\n              numberOfItems={itemsToBeLoaded || 3}\n            />\n          }\n        />\n      </PublicActionsProvider>\n    </UnvettedActionsProvider>\n  );\n};\n\nexport default Proposals;\n","import { createContext, useContext, useCallback, useMemo } from \"react\";\nimport * as act from \"src/actions\";\nimport * as sel from \"src/selectors\";\nimport { useAction, useSelector } from \"src/redux\";\nimport {\n  INVOICE_STATUS_REJECTED,\n  INVOICE_STATUS_APPROVED,\n  INVOICE_STATUS_DISPUTED,\n  INVOICE_STATUS_NEW,\n  INVOICE_STATUS_UPDATED\n} from \"src/containers/Invoice/constants\";\nimport { or } from \"src/lib/fp\";\nimport isEqual from \"lodash/fp/isEqual\";\n\nexport const adminInvoicesActionsContext = createContext();\nexport const useAdminInvoiceActions = () =>\n  useContext(adminInvoicesActionsContext);\n\nexport const useAdminActions = () => {\n  const onSetInvoiceStatus = useAction(act.onSetInvoiceStatus);\n  const onPayApprovedInvoices = useAction(act.onPayApprovedInvoices);\n  const invoices = useSelector(sel.allInvoices);\n  const nextInvoice = useMemo(\n    () =>\n      invoices &&\n      invoices.find((invoice) =>\n        or(\n          isEqual(INVOICE_STATUS_NEW),\n          isEqual(INVOICE_STATUS_UPDATED)\n        )(invoice.status)\n      ),\n    [invoices]\n  );\n\n  const onRejectInvoice = useCallback(\n    (invoice) => (reason) =>\n      onSetInvoiceStatus(\n        invoice.censorshiprecord.token,\n        INVOICE_STATUS_REJECTED,\n        invoice.version,\n        reason\n      ),\n    [onSetInvoiceStatus]\n  );\n\n  const onApproveInvoice = useCallback(\n    (invoice) => () =>\n      onSetInvoiceStatus(\n        invoice.censorshiprecord.token,\n        INVOICE_STATUS_APPROVED,\n        invoice.version\n      ),\n    [onSetInvoiceStatus]\n  );\n\n  const onDisputeInvoice = useCallback(\n    (invoice) => () =>\n      onSetInvoiceStatus(\n        invoice.censorshiprecord.token,\n        INVOICE_STATUS_DISPUTED,\n        invoice.version\n      ),\n    [onSetInvoiceStatus]\n  );\n\n  return {\n    onRejectInvoice,\n    onApproveInvoice,\n    onDisputeInvoice,\n    onPayApprovedInvoices,\n    nextInvoice\n  };\n};\n","import React from \"react\";\nimport { useAdminActions, adminInvoicesActionsContext } from \"./hooks\";\nimport { Text } from \"pi-ui\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport { presentationalInvoiceName } from \"src/containers/Invoice/helpers\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst AdminActionsProvider = ({ children }) => {\n  const {\n    onRejectInvoice,\n    onApproveInvoice,\n    onDisputeInvoice,\n    onPayApprovedInvoices,\n    nextInvoice\n  } = useAdminActions();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const hanleOpenRejectModal = (invoice) => {\n    handleOpenModal(ModalConfirmWithReason, {\n      title: `Reject ${presentationalInvoiceName(invoice)}`,\n      reasonLabel: \"Reject reason\",\n      subject: \"rejectInvoice\",\n      onSubmit: onRejectInvoice(invoice),\n      successTitle: \"Invoice censored\",\n      successMessage: <Text>The invoice has been successfully rejected!</Text>,\n      onClose: handleCloseModal\n    });\n  };\n\n  const hanleOpenApproveModal = (invoice) => {\n    handleOpenModal(ModalConfirm, {\n      title: `Approve ${presentationalInvoiceName(invoice)}`,\n      message: \"Are you sure you want to approve this invoice?\",\n      onSubmit: onApproveInvoice(invoice),\n      successTitle: \"Invoice approved\",\n      successMessage: <Text>The invoice has been successfully approved!</Text>,\n      onClose: handleCloseModal\n    });\n  };\n\n  const hanleOpenDisputeModal = (invoice) => {\n    handleOpenModal(ModalConfirm, {\n      title: `Dispute ${presentationalInvoiceName(invoice)}`,\n      message: \"Are you sure you want to dispute this invoice?\",\n      onSubmit: onDisputeInvoice(invoice),\n      successTitle: \"Invoice on dispute\",\n      successMessage: <Text>The invoice has been successfully disputed!</Text>,\n      onClose: handleCloseModal\n    });\n  };\n\n  const hanleOpenPayModal = () => {\n    handleOpenModal(ModalConfirm, {\n      title: \"Pay approved invoices\",\n      message:\n        \"Are you sure you want to set all of these approved invoices to paid?\",\n      onSubmit: onPayApprovedInvoices,\n      successTitle: \"Inovices paid\",\n      successMessage: <Text>The invoices have been successfully updated!</Text>,\n      onClose: handleCloseModal\n    });\n  };\n\n  return (\n    <adminInvoicesActionsContext.Provider\n      value={{\n        onReject: hanleOpenRejectModal,\n        onApprove: hanleOpenApproveModal,\n        onDispute: hanleOpenDisputeModal,\n        onPay: hanleOpenPayModal,\n        nextInvoice\n      }}\n    >\n      {children}\n    </adminInvoicesActionsContext.Provider>\n  );\n};\n\nexport default AdminActionsProvider;\n","import React, { useCallback } from \"react\";\nimport {\n  Button,\n  classNames,\n  useMediaQuery,\n  Dropdown,\n  DropdownItem\n} from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport { useAdminInvoiceActions } from \"./hooks\";\nimport AdminContent from \"src/components/AdminContent\";\nimport { isUnreviewedInvoice, presentationalInvoiceName } from \"../helpers\";\n\nconst InvoiceActions = ({ invoice, extended }) => {\n  if (!useAdminInvoiceActions()) {\n    throw Error(\n      \"Admin invoices actions requires an 'AdminActionsProvider' on a higher level of the component tree. \"\n    );\n  }\n  const mobile = useMediaQuery(\"(max-width: 560px)\");\n  const { onApprove, onReject, onDispute, nextInvoice } =\n    useAdminInvoiceActions();\n  const withInvoice = useCallback(\n    (fn) => () => {\n      fn(invoice);\n    },\n    [invoice]\n  );\n\n  const approveButton = (\n    <Button onClick={withInvoice(onApprove)}>Approve</Button>\n  );\n  const rejectButton = (\n    <Button\n      onClick={withInvoice(onReject)}\n      className={classNames(\"margin-right-s\")}\n      noBorder\n      kind=\"secondary\"\n    >\n      Reject\n    </Button>\n  );\n  const disputeButton = (\n    <Button\n      onClick={withInvoice(onDispute)}\n      className={classNames(\"margin-right-s\")}\n      noBorder\n      kind=\"secondary\"\n    >\n      Dispute\n    </Button>\n  );\n  return isUnreviewedInvoice(invoice) ? (\n    <AdminContent>\n      <div className=\"justify-right margin-top-m\">\n        {!mobile ? (\n          <>\n            {rejectButton}\n            {disputeButton}\n            {approveButton}\n          </>\n        ) : (\n          <Dropdown title=\"Actions\" className=\"margin-right-l\">\n            <DropdownItem>{approveButton}</DropdownItem>\n            <DropdownItem>{rejectButton}</DropdownItem>\n            <DropdownItem>{disputeButton}</DropdownItem>\n          </Dropdown>\n        )}\n      </div>\n    </AdminContent>\n  ) : extended && nextInvoice ? (\n    <AdminContent>\n      <Link to={nextInvoice.censorshiprecord.token}>\n        Go to next invoice: {presentationalInvoiceName(nextInvoice)}\n      </Link>\n    </AdminContent>\n  ) : null;\n};\n\nexport default InvoiceActions;\n","import {\n  INVOICE_STATUS_NEW,\n  INVOICE_STATUS_UPDATED,\n  INVOICE_STATUS_DISPUTED,\n  INVOICE_STATUS_REJECTED,\n  INVOICE_STATUS_APPROVED,\n  INVOICE_STATUS_PAID\n} from \"src/containers/Invoice\";\n\nexport const getInvoiceStatusTagProps = (invoice) => {\n  switch (invoice.status) {\n    case INVOICE_STATUS_NEW:\n    case INVOICE_STATUS_UPDATED:\n      return {\n        type: \"blackTime\",\n        text: \"Waiting for review\"\n      };\n    case INVOICE_STATUS_DISPUTED:\n      return { type: \"bluePending\", text: \"On dispute\" };\n    case INVOICE_STATUS_REJECTED:\n      return { type: \"grayNegative\", text: \"Rejected\" };\n    case INVOICE_STATUS_APPROVED:\n      return { type: \"yellowTime\", text: \"Waiting payment\" };\n    case INVOICE_STATUS_PAID:\n      return { type: \"greenCheck\", text: \"Paid\" };\n    default:\n      break;\n  }\n};\n\nexport const isEditableInvoice = (status) =>\n  status === INVOICE_STATUS_NEW ||\n  status === INVOICE_STATUS_UPDATED ||\n  status === INVOICE_STATUS_DISPUTED;\n","import {\n  classNames,\n  StatusTag,\n  Text,\n  useMediaQuery,\n  CopyableText,\n  useTheme,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport { getInvoiceStatusTagProps, isEditableInvoice } from \"./helpers\";\nimport styles from \"./Invoice.module.css\";\nimport { InvoiceActions } from \"src/containers/Invoice/Actions\";\nimport {\n  presentationalInvoiceName,\n  getInvoiceTotalHours,\n  hasDecimalPlaces\n} from \"src/containers/Invoice/helpers\";\nimport Field from \"./Field\";\nimport InvoiceDatasheet from \"../InvoiceDatasheet\";\nimport { convertAtomsToDcr, usdFormatter } from \"src/utils\";\nimport ThumbnailGrid from \"src/components/Files\";\nimport VersionPicker from \"src/components/VersionPicker\";\n\nconst Invoice = ({\n  invoice,\n  isAuthor,\n  isPublicMode,\n  extended,\n  approvedProposalsError,\n  approvedProposals\n}) => {\n  const {\n    censorshiprecord,\n    file,\n    input,\n    status,\n    timestamp,\n    userid,\n    username,\n    version,\n    payout\n  } = invoice;\n  const mobile = useMediaQuery(\"(max-width: 560px)\");\n  const { themeName } = useTheme();\n  const isEditable = isAuthor && isEditableInvoice(status);\n  const invoiceToken = censorshiprecord && censorshiprecord.token;\n  const invoiceURL = `/invoices/${invoiceToken}`;\n  const invContractorName = input && input.contractorname;\n  const invContractorLocation = input && input.contractorlocation;\n  const invContractorRate = input && input.contractorrate;\n  const invContractorContact = input && input.contractorcontact;\n  const paymentAddress = input && input.paymentaddress;\n  const exchangeRate = input && input.exchangerate;\n  const totalHours = getInvoiceTotalHours(invoice);\n  const totalExpenses = payout && payout.expensetotal / 100;\n  const totalAmount = payout && payout.total / 100;\n  const totalDcrAmount = payout && convertAtomsToDcr(payout.dcrtotal);\n  const showExtendedVersionPicker = extended && version > 1;\n  const showVersionAsText = version > 1 && !extended && !mobile;\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n\n  // record attchments without the invoice file\n  const invoiceAttachments = useMemo(\n    () => (file || []).filter((f) => !f.mime.includes(\"text/\")),\n    [file]\n  );\n\n  return (\n    <RecordWrapper>\n      {({\n        Author,\n        Event,\n        Row,\n        Title,\n        Header,\n        Subtitle,\n        Status,\n        Edit,\n        RecordToken\n      }) => {\n        return (\n          <>\n            <Header\n              title={\n                <Title\n                  id={`invoice-title-${invoiceToken}`}\n                  truncate\n                  linesBeforeTruncate={2}\n                  url={extended ? \"\" : invoiceURL}\n                >\n                  {presentationalInvoiceName(invoice)}\n                </Title>\n              }\n              subtitle={\n                <Subtitle>\n                  <Author\n                    username={username}\n                    url={`/user/${userid}`}\n                    id={userid}\n                  />\n                  <Event event=\"edited\" timestamp={timestamp} />\n                  {showVersionAsText && (\n                    <Text\n                      id={`invoice-${invoiceToken}-version`}\n                      className={classNames(styles.version)}\n                      color=\"gray\"\n                      truncate\n                    >{`version ${version}`}</Text>\n                  )}\n                  {showExtendedVersionPicker && (\n                    <VersionPicker\n                      className={classNames(\n                        styles.versionPicker,\n                        isDarkTheme && styles.darkVersionPicker\n                      )}\n                      version={version}\n                      token={invoiceToken}\n                      proposals={approvedProposals}\n                    />\n                  )}\n                </Subtitle>\n              }\n              status={\n                <Status>\n                  <StatusTag\n                    className={styles.statusTag}\n                    {...getInvoiceStatusTagProps(invoice)}\n                  />\n                </Status>\n              }\n              edit={\n                isEditable && <Edit url={`/invoices/${invoiceToken}/edit`} />\n              }\n            />\n            {extended && (\n              <>\n                <Row topMarginSize=\"s\">\n                  <RecordToken token={invoiceToken} />\n                </Row>\n                <Row justify=\"space-between\" className={styles.topDetails}>\n                  <div className={styles.field}>\n                    <Text weight=\"semibold\">{invContractorName}</Text>\n                    <Text>{invContractorLocation}</Text>\n                    <Text>{invContractorContact}</Text>\n                  </div>\n                  {!isPublicMode && (\n                    <Field\n                      label={\"Pay to Address:\"}\n                      value={paymentAddress}\n                      renderValue={(addr) => (\n                        <CopyableText\n                          id=\"invoice-payment-address\"\n                          truncate\n                          tooltipPlacement={\"bottom\"}\n                        >\n                          {addr}\n                        </CopyableText>\n                      )}\n                    />\n                  )}\n                </Row>\n                {!isPublicMode && (\n                  <Row justify=\"space-between\" className={styles.topDetails}>\n                    <Field\n                      label=\"Total hours:\"\n                      value={`${\n                        // verify if has decimal places\n                        hasDecimalPlaces(totalHours)\n                          ? totalHours.toFixed(2)\n                          : totalHours\n                      }h`}\n                    />\n                    <Field\n                      label=\"Contractor Rate:\"\n                      value={usdFormatter.format(invContractorRate / 100)}\n                    />\n                    <Field\n                      label=\"Total expenses:\"\n                      value={usdFormatter.format(totalExpenses)}\n                    />\n                    <Field\n                      label=\"Exchange rate:\"\n                      value={usdFormatter.format(exchangeRate / 100)}\n                    />\n                    <Field\n                      label=\"Amount:\"\n                      value={usdFormatter.format(totalAmount)}\n                    />\n                    <Field label=\"Amount (dcr):\" value={totalDcrAmount} />\n                  </Row>\n                )}\n                {extended && !!invoiceAttachments.length && (\n                  <Row\n                    className={styles.filesRow}\n                    justify=\"left\"\n                    topMarginSize=\"s\"\n                  >\n                    <ThumbnailGrid\n                      value={invoiceAttachments}\n                      onClick={() => null}\n                      viewOnly={true}\n                    />\n                  </Row>\n                )}\n                <InvoiceDatasheet\n                  value={\n                    invoice &&\n                    invoice.input.lineitems &&\n                    invoice.input.lineitems.map((li) => {\n                      const proposal = approvedProposals.find(\n                        (el) => el.censorshiprecord.token === li.proposaltoken\n                      );\n                      return {\n                        ...li,\n                        proposaltoken: proposal ? proposal.name : \"\"\n                      };\n                    })\n                  }\n                  readOnly\n                  isMobile={mobile}\n                  userRate={invContractorRate / 100}\n                  proposals={approvedProposals || []}\n                  proposalsError={approvedProposalsError}\n                />\n              </>\n            )}\n            <InvoiceActions invoice={invoice} extended={extended} />\n          </>\n        );\n      }}\n    </RecordWrapper>\n  );\n};\n\nInvoice.propTypes = {\n  invoice: PropTypes.object.isRequired,\n  approvedProposals: PropTypes.array\n};\n\nexport default Invoice;\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport useThrowError from \"src/hooks/utils/useThrowError\";\n\nexport default function useAdminInvoices() {\n  const invoices = useSelector(sel.allInvoices);\n  const onFetchAdminInvoices = useAction(act.onFetchAdminInvoices);\n\n  const [loading, error] = useAPIAction(onFetchAdminInvoices);\n\n  useThrowError(error);\n\n  return { loading, invoices };\n}\n","import React, { useCallback } from \"react\";\nimport { Spinner } from \"pi-ui\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\nimport Invoice from \"src/components/Invoice\";\nimport useAdminInvoices from \"src/hooks/api/useAdminInvoices\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport styles from \"./ListWrapper.module.css\";\n\nconst InvoicesAdmin = ({ userID }) => {\n  const { loading, invoices } = useAdminInvoices();\n  const userInovices = invoices.filter((inv) => inv.userid === userID);\n  const renderInvoice = useCallback(\n    (invoice) => (\n      <Invoice\n        key={`invoice-${invoice.censorshiprecord.token}`}\n        invoice={invoice}\n      />\n    ),\n    []\n  );\n  const renderInvoices = useCallback(\n    (invoices) => invoices.map(renderInvoice),\n    [renderInvoice]\n  );\n  const renderEmptyMessage = useCallback(\n    (invoices) =>\n      !invoices.length && (\n        // XXX: improve this message\n        <HelpMessage>\n          {\"There are no invoices submitted by this user.\"}\n        </HelpMessage>\n      ),\n    []\n  );\n  return (\n    <AdminInvoiceActionsProvider>\n      {loading && (\n        <div className={styles.spinnerWrapper}>\n          <Spinner invert />\n        </div>\n      )}\n      {!loading && (\n        <>\n          {renderEmptyMessage(userInovices)}\n          {renderInvoices(userInovices)}\n        </>\n      )}\n    </AdminInvoiceActionsProvider>\n  );\n};\n\nexport default InvoicesAdmin;\n","import { useEffect, useState, useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector, useStoreSubscribe } from \"src/redux\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport useThrowError from \"src/hooks/utils/useThrowError\";\nimport { handleSaveAppDraftInvoices } from \"src/lib/local_storage\";\n\nexport function useUserInvoices(userid) {\n  const currentUserID = useSelector(sel.currentUserID);\n  const userID = userid || currentUserID;\n  const invoicesSelector = useMemo(\n    () => sel.makeGetInvoicesByUserID(userID),\n    [userID]\n  );\n  const invoices = useSelector(invoicesSelector);\n  const onFetchUserInvoices = useAction(act.onFetchUserInvoices);\n\n  const [loading, error] = useAPIAction(onFetchUserInvoices);\n\n  useThrowError(error);\n\n  return { loading, invoices };\n}\n\nexport function useDraftInvoices() {\n  const onLoadDraftInvoices = useAction(act.onLoadDraftInvoices);\n  const onSaveDraftInvoice = useAction(act.onSaveDraftInvoice);\n  const onDeleteDraftInvoice = useAction(act.onDeleteDraftInvoice);\n\n  const draftInvoices = useSelector(sel.draftInvoices);\n\n  const [unsubscribe] = useState(useStoreSubscribe(handleSaveAppDraftInvoices));\n\n  useEffect(() => {\n    if (!draftInvoices) {\n      onLoadDraftInvoices();\n    }\n  }, [onLoadDraftInvoices, draftInvoices]);\n\n  useEffect(\n    function unsubscribeToStore() {\n      return unsubscribe;\n    },\n    [unsubscribe]\n  );\n\n  return {\n    onLoadDraftInvoices,\n    draftInvoices,\n    onSaveDraftInvoice,\n    onDeleteDraftInvoice\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"pi-ui\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport { presentationalDraftInvoiceName } from \"src/containers/Invoice/helpers\";\nimport styles from \"./DraftInvoice.module.css\";\n\nconst DraftInvoice = ({ draft, onDelete }) => {\n  const { draftId, timestamp } = draft;\n  function handleDeleteDraft() {\n    onDelete(draftId);\n  }\n  return (\n    <>\n      <RecordWrapper>\n        {({ Event, Title, Header, Subtitle, Edit, Status }) => (\n          <>\n            <Header\n              disableMobileView\n              title={\n                <Title\n                  id={`invoice-${draftId}`}\n                  truncate\n                  linesBeforeTruncate={2}\n                  url={`/invoices/new?draft=${draftId}`}\n                >\n                  {presentationalDraftInvoiceName(draft)}\n                </Title>\n              }\n              status={\n                <Status>\n                  <Button\n                    kind=\"secondary\"\n                    size=\"sm\"\n                    className={styles.deleteDraft}\n                    onClick={handleDeleteDraft}\n                  >\n                    Delete\n                  </Button>\n                </Status>\n              }\n              edit={<Edit url={`/invoices/new?draft=${draftId}`} />}\n              subtitle={\n                <Subtitle>\n                  <Event keepOnMobile event=\"edited\" timestamp={timestamp} />\n                </Subtitle>\n              }\n            />\n          </>\n        )}\n      </RecordWrapper>\n    </>\n  );\n};\n\nDraftInvoice.propTypes = {\n  draft: PropTypes.object,\n  onDelete: PropTypes.func\n};\n\nexport default React.memo(DraftInvoice);\n","import React from \"react\";\nimport { Text } from \"pi-ui\";\nimport { useDraftInvoices } from \"./hooks\";\nimport DraftInvoice from \"src/components/Invoice/DraftInvoice\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst Drafts = () => {\n  const { draftInvoices, onDeleteDraftInvoice } = useDraftInvoices();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenDeleteDraftModal = (draftId) => () => {\n    handleOpenModal(ModalConfirm, {\n      title: \"Delete draft invoice\",\n      message: \"Are you sure you want to delete this draft?\",\n      successTitle: \"Draft invoice deleted\",\n      successMessage: (\n        <Text>The draft invoice has been successfully deleted!</Text>\n      ),\n      onClose: handleCloseModal,\n      onSubmit: handleDeleteDraft(draftId)\n    });\n  };\n\n  const handleDeleteDraft = (draftId) => () => {\n    onDeleteDraftInvoice(draftId);\n  };\n\n  const drafts = draftInvoices\n    ? Object.values(draftInvoices)\n        .filter((draft) => !!draft.draftId)\n        .sort((a, b) => b.timestamp - a.timestamp)\n    : [];\n\n  return (\n    <div className=\"margin-top-m\">\n      {drafts.length ? (\n        drafts.map((draft) => (\n          <DraftInvoice\n            key={`draft-${draft.draftId}`}\n            onDelete={handleOpenDeleteDraftModal(draft.draftId)}\n            draft={draft}\n          />\n        ))\n      ) : (\n        <HelpMessage>No drafts available</HelpMessage>\n      )}\n    </div>\n  );\n};\n\nexport default Drafts;\n","import { useState, useEffect } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector, useStoreSubscribe } from \"src/redux\";\nimport { handleSaveAppDraftDccs } from \"src/lib/local_storage\";\n\nexport function useDraftDccs() {\n  const onLoadDraftDccs = useAction(act.onLoadDraftDccs);\n  const onSaveDraftDcc = useAction(act.onSaveDraftDcc);\n  const onDeleteDraftDcc = useAction(act.onDeleteDraftDcc);\n\n  const draftDccs = useSelector(sel.draftDccs);\n\n  const [unsubscribe] = useState(useStoreSubscribe(handleSaveAppDraftDccs));\n\n  useEffect(() => {\n    onLoadDraftDccs();\n  }, [onLoadDraftDccs]);\n\n  useEffect(\n    function unsubscribeFromStore() {\n      return unsubscribe;\n    },\n    [unsubscribe]\n  );\n\n  return {\n    onLoadDraftDccs,\n    draftDccs,\n    onSaveDraftDcc,\n    onDeleteDraftDcc\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Text } from \"pi-ui\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport {\n  presentationalDraftDccName,\n  presentationalStatement\n} from \"src/containers/DCC/helpers\";\nimport styles from \"./DraftDcc.module.css\";\nimport { usePolicy } from \"src/hooks\";\nimport { getContractorDomains, getDomainName } from \"src/helpers\";\n\nconst DraftDcc = ({ draft, onDelete }) => {\n  const {\n    policy: { supporteddomains }\n  } = usePolicy();\n  const contractorDomains = getContractorDomains(supporteddomains);\n  const { id, timestamp, statement, domain } = draft;\n  const domainName = getDomainName(contractorDomains, domain);\n\n  function handleDeleteDraft() {\n    onDelete(id);\n  }\n  return (\n    <>\n      <RecordWrapper>\n        {({ Event, Title, Header, Subtitle, Edit, Status }) => (\n          <>\n            <Header\n              disableMobileView\n              title={\n                <Title\n                  id={`dcc-${id}`}\n                  truncate\n                  linesBeforeTruncate={2}\n                  url={`/dccs/new?draft=${id}`}\n                >\n                  {presentationalDraftDccName(draft)}\n                </Title>\n              }\n              status={\n                <Status>\n                  <Button\n                    kind=\"secondary\"\n                    size=\"sm\"\n                    className={styles.deleteDraft}\n                    onClick={handleDeleteDraft}\n                  >\n                    Delete\n                  </Button>\n                </Status>\n              }\n              edit={<Edit url={`/dccs/new?draft=${id}`} />}\n              subtitle={\n                <Subtitle>\n                  <Event keepOnMobile event=\"edited\" timestamp={timestamp} />\n                  {domain && <Text id=\"draft-domain\">{domainName}</Text>}\n                  {statement && (\n                    <Text truncate={true} id=\"draft-statement\">\n                      {presentationalStatement(statement)}\n                    </Text>\n                  )}\n                </Subtitle>\n              }\n            />\n          </>\n        )}\n      </RecordWrapper>\n    </>\n  );\n};\n\nDraftDcc.propTypes = {\n  draft: PropTypes.object,\n  onDelete: PropTypes.func\n};\n\nexport default React.memo(DraftDcc);\n","import React from \"react\";\nimport { Text } from \"pi-ui\";\nimport { useDraftDccs } from \"./hooks\";\nimport DraftDcc from \"src/components/DCC/DraftDcc\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport { handleDeleteDraft } from \"../helpers\";\n\nconst Drafts = () => {\n  const { draftDccs, onDeleteDraftDcc } = useDraftDccs();\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenDeleteDraftModal = (draftID) => () => {\n    handleOpenModal(ModalConfirm, {\n      title: \"Delete draft DCC\",\n      message: \"Are you sure you want to delete this draft?\",\n      successTitle: \"Draft DCC deleted\",\n      successMessage: <Text>The draft DCC has been successfully deleted!</Text>,\n      onClose: handleCloseModal,\n      onSubmit: handleDeleteDraft(draftID, onDeleteDraftDcc)\n    });\n  };\n\n  const drafts = draftDccs\n    ? Object.values(draftDccs)\n        .filter((draft) => !!draft.id)\n        .sort((a, b) => b.timestamp - a.timestamp)\n    : [];\n\n  return (\n    <div className=\"margin-top-m\">\n      {drafts.length ? (\n        drafts.map((draft) => (\n          <DraftDcc\n            key={`draft-${draft.id}`}\n            onDelete={handleOpenDeleteDraftModal(draft.id)}\n            draft={draft}\n          />\n        ))\n      ) : (\n        <HelpMessage>No drafts available</HelpMessage>\n      )}\n    </div>\n  );\n};\n\nexport default Drafts;\n","import React, { useState } from \"react\";\nimport { Tab, Tabs } from \"pi-ui\";\nimport UserDraftInvoices from \"src/containers/Invoice/User/Drafts\";\nimport UserDraftDccs from \"src/containers/DCC/User/Drafts\";\n\nconst Drafts = () => {\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\n  return (\n    <Tabs\n      mode=\"dropdown\"\n      onSelectTab={setActiveTabIndex}\n      activeTabIndex={activeTabIndex}\n    >\n      <Tab label=\"Invoices\">\n        <UserDraftInvoices />\n      </Tab>\n      <Tab label=\"DCCs\">\n        <UserDraftDccs />\n      </Tab>\n    </Tabs>\n  );\n};\n\nexport default Drafts;\n","import React from \"react\";\n\n/* This component is important for accessibility porposes. More info: https://www.chromium.org/developers/design-documents/create-amazing-password-forms */\nexport default function HiddenUsernameField() {\n  return (\n    <input\n      type=\"text\"\n      autoComplete=\"username\"\n      style={{ visibility: \"hidden\" }}\n    />\n  );\n}\n","import {\n  Button,\n  Modal,\n  TextInput,\n  Icon,\n  getThemeProperty,\n  useTheme\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useState, useEffect } from \"react\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport HiddenUsernameField from \"src/components/HiddenUsernameField\";\nimport { isEmpty } from \"src/helpers\";\n\nconst ModalChangePassword = ({\n  show,\n  onClose,\n  validationSchema,\n  onChangePassword\n}) => {\n  const [success, setSuccess] = useState(false);\n  const onSubmitChangePassword = async (\n    values,\n    { resetForm, setSubmitting, setFieldError }\n  ) => {\n    try {\n      await onChangePassword(values);\n      resetForm();\n      setSubmitting(false);\n      setSuccess(true);\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n    }\n  };\n\n  useEffect(() => {\n    setSuccess(false);\n  }, [show]);\n\n  const { theme } = useTheme();\n  const successIconBgColor = getThemeProperty(\n    theme,\n    \"success-icon-background-color\"\n  );\n  const iconCheckmarkColor = getThemeProperty(\n    theme,\n    \"success-icon-checkmark-color\"\n  );\n\n  return (\n    <Modal\n      title={success ? \"Password successfully changed\" : \"Change Password\"}\n      iconComponent={\n        success && (\n          <Icon\n            type={\"checkmark\"}\n            size={26}\n            iconColor={iconCheckmarkColor}\n            backgroundColor={successIconBgColor}\n          />\n        )\n      }\n      show={show}\n      onClose={onClose}\n    >\n      {!success && (\n        <FormWrapper\n          initialValues={{\n            existingPassword: \"\",\n            newPassword: \"\",\n            newPasswordVerify: \"\"\n          }}\n          onSubmit={onSubmitChangePassword}\n          loading={!validationSchema}\n          validationSchema={validationSchema}\n        >\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            values,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            isSubmitting,\n            errors,\n            touched\n          }) => {\n            const canSubmit =\n              values.existingPassword &&\n              values.newPassword &&\n              values.newPasswordVerify &&\n              isEmpty(errors);\n            return (\n              <Form onSubmit={handleSubmit}>\n                {errors && errors.global && (\n                  <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n                )}\n                <HiddenUsernameField />\n                <TextInput\n                  label=\"Current Password\"\n                  id=\"existingPassword\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  value={values.existingPassword}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.existingPassword && errors.existingPassword}\n                />\n                <TextInput\n                  label=\"New Password\"\n                  id=\"newPassword\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  value={values.newPassword}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.newPassword && errors.newPassword}\n                />\n                <TextInput\n                  label=\"Verify Password\"\n                  id=\"newPasswordVerify\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  value={values.newPasswordVerify}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  error={touched.newPasswordVerify && errors.newPasswordVerify}\n                />\n                <Actions className=\"no-padding-bottom\">\n                  <Button\n                    loading={isSubmitting}\n                    kind={canSubmit ? \"primary\" : \"disabled\"}\n                    type=\"submit\"\n                  >\n                    Change Password\n                  </Button>\n                </Actions>\n              </Form>\n            );\n          }}\n        </FormWrapper>\n      )}\n      {success && (\n        <>\n          {\"Your password was successfully changed!\"}\n          <div className=\"justify-right margin-top-m\">\n            <Button onClick={onClose}>Ok</Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalChangePassword.propTypes = {\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  onChangePassword: PropTypes.func,\n  validationSchema: PropTypes.object\n};\n\nexport default ModalChangePassword;\n","import * as Yup from \"yup\";\nimport { maxLengthMessage, minLengthMessage } from \"src/utils/validation\";\n\nexport const reasonValidationSchema = () =>\n  Yup.object().shape({\n    reason: Yup.string().required(\"Required\")\n  });\n\nexport const changePasswordValidationSchema = ({ minpasswordlength }) =>\n  Yup.object().shape({\n    newPassword: Yup.string()\n      .min(minpasswordlength, minLengthMessage(\"password\", minpasswordlength))\n      .required(\"Required\"),\n    newPasswordVerify: Yup.string()\n      .oneOf([Yup.ref(\"newPassword\")], \"Passwords must match\")\n      .required(\"Required\"),\n    existingPassword: Yup.string()\n      .min(minpasswordlength, minLengthMessage(\"password\", minpasswordlength))\n      .required(\"Required\")\n  });\n\nconst buildUsernameRegex = (supportedChars) => {\n  let regex = supportedChars.reduce((str, v) => str + v, \"^[\");\n  regex += \"]*$\";\n  return new RegExp(regex);\n};\nexport const changeUsernameValidationSchema = ({\n  minusernamelength,\n  usernamesupportedchars,\n  maxusernamelength,\n  minpasswordlength\n}) =>\n  Yup.object().shape({\n    newUsername: Yup.string()\n      .matches(\n        buildUsernameRegex(usernamesupportedchars),\n        {\n          excludeEmptyString: true\n        },\n        { message: \"Invalid username\" }\n      )\n      .min(minusernamelength, minLengthMessage(\"username\", minusernamelength))\n      .max(maxusernamelength, maxLengthMessage(\"username\", maxusernamelength))\n      .required(\"Required\"),\n    password: Yup.string()\n      .min(minpasswordlength, minLengthMessage(\"password\", minpasswordlength))\n      .required(\"Required\")\n  });\n","export const tabValues = {\n  IDENTITY: \"Identity\",\n  ACCOUNT: \"Account\",\n  PREFERENCES: \"Preferences\",\n  CREDITS: \"Credits\",\n  SUBMITTED_PROPOSALS: \"Submitted Proposals\",\n  DRAFT_PROPOSALS: \"Draft Proposals\",\n  INVOICES: \"Invoices\",\n  DRAFTS: \"Drafts\",\n  MANAGE_DCC: \"Manage Contractor\",\n  PROPOSALS_OWNED: \"Proposals Owned\",\n  TOTP: \"Two-Factor Authentication\"\n};\n\n/**\n * Return the user active pubkey\n *\n * @param {array} ids - Array of user identities\n * @return {string} User's active pubkey\n */\nexport const getUserActivePublicKey = (ids) =>\n  ids.filter((id) => id.isactive)[0].pubkey;\n\n/**\n * Verifies if user email is verified\n *\n * @param {*} newuserverificationtoken\n * @return {string} yes/no string saying if email is verified\n */\nexport const isUserEmailVerified = (newuserverificationtoken) =>\n  !newuserverificationtoken;\n\n/**\n * Verifies if the user has paid the paywall\n *\n * @param {string} newuserpaywalltx\n * @return {string} yes/no string saying if paywall was paid\n */\nexport const hasUserPaid = (\n  newuserpaywalltx,\n  newuserpaywallamount,\n  fromPaywall\n) => fromPaywall || newuserpaywalltx || newuserpaywallamount === 0;\n\n/**\n * Verifies if the user is locked\n *\n * @param {bool} islocked\n * @return {string} yes/no string saying if the user is locked\n */\nexport const isUserLocked = (islocked) => islocked;\n\n/**\n * Verifies if the user is admin\n *\n * @param {bool} isAdmin\n * @return {string} yes/no string saying if the user is Admin\n */\nexport const isUserAdmin = (isAdmin) => isAdmin;\n\n/**\n * Verifies if the user is deactivated\n *\n * @param {bool} isDeactivated\n * @return {string} yes/no string saying if the user is deactivated\n */\nexport const isUserDeactivated = (isDeactivated) => isDeactivated;\n\n/**\n * Given the unix time, verifies if it is expired\n *\n * @param {number} expiryTime\n * @return {bool} true/false if timestamp is expired\n */\nexport const isExpired = (expiryTime) =>\n  new Date().getTime() > expiryTime * 1000;\n","import { useCallback, useMemo } from \"react\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport * as sel from \"src/selectors\";\n\nexport default function useManageUser(manageUserAction, userID) {\n  const onManageUser = useAction(act.onManageUser);\n  const loadingSelector = useMemo(\n    () => sel.makeIsApiRequestingManageUserByAction(manageUserAction),\n    [manageUserAction]\n  );\n  const loading = useSelector(loadingSelector);\n\n  const onManage = useCallback(\n    (reason) => {\n      onManageUser(userID, manageUserAction, reason);\n    },\n    [userID, manageUserAction, onManageUser]\n  );\n\n  return [onManage, loading];\n}\n","import * as act from \"src/actions\";\nimport useValidationSchema from \"src/hooks/api/useValidationSchema\";\nimport { useAction } from \"src/redux\";\nimport { changePasswordValidationSchema } from \"../validation\";\n\nexport default function useChangePassword() {\n  const onChangePassword = useAction(act.onSaveChangePassword);\n  const validationSchema = useValidationSchema(changePasswordValidationSchema);\n\n  return { onChangePassword, validationSchema };\n}\n","import {\n  classNames,\n  useTheme,\n  P,\n  DEFAULT_DARK_THEME_NAME,\n  Spinner\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport styles from \"./InfoSection.module.css\";\nimport isEmpty from \"lodash/isEmpty\";\n\nconst InfoSection = ({\n  label,\n  info,\n  alignLabelCenter,\n  className,\n  noMargin,\n  error,\n  isLoading\n}) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <div\n      className={classNames(\n        styles.sectionWrapper,\n        \"margin-bottom-s\",\n        className,\n        noMargin && \"no-margin-bottom\"\n      )}\n    >\n      <span\n        className={classNames(styles.label, isDarkTheme && styles.darkLabel)}\n        style={alignLabelCenter && { alignSelf: \"center\" }}\n      >\n        {label}:\n      </span>\n      {isLoading ? (\n        <Spinner invert />\n      ) : error ? (\n        <P className={styles.infoError}>{error.toString()}</P>\n      ) : !isEmpty(info) ? (\n        <span className={styles.info}>{info}</span>\n      ) : (\n        <span className={styles.noInfo}>No information provided</span>\n      )}\n    </div>\n  );\n};\n\nInfoSection.propTypes = {\n  label: PropTypes.string,\n  info: PropTypes.node,\n  className: PropTypes.string,\n  noMargin: PropTypes.bool\n};\n\nexport default InfoSection;\n","import React from \"react\";\nimport { isUserAdmin } from \"../../helpers\";\nimport InfoSection from \"../../InfoSection.jsx\";\n\nexport default ({ isadmin }) => (\n  <InfoSection\n    className=\"no-margin-top\"\n    label=\"Admin\"\n    info={isUserAdmin(isadmin) ? \"Yes\" : \"No\"}\n  />\n);\n","import React from \"react\";\nimport InfoSection from \"../../InfoSection.jsx\";\n\nexport default ({ address }) => (\n  <InfoSection\n    label=\"Address\"\n    info={<span style={{ wordBreak: \"break-word\" }}>{address}</span>}\n  />\n);\n","import React from \"react\";\nimport { isUserEmailVerified } from \"../../helpers\";\nimport InfoSection from \"../../InfoSection.jsx\";\n\nexport default ({ token }) => (\n  <InfoSection\n    label=\"Verified email\"\n    info={isUserEmailVerified(token) ? \"Yes\" : \"No\"}\n  />\n);\n","import React from \"react\";\nimport InfoSection from \"../../InfoSection.jsx\";\nimport { Button } from \"pi-ui\";\n\nexport default ({ onClick }) => (\n  <InfoSection\n    label=\"Password\"\n    alignLabelCenter\n    info={\n      <Button size=\"sm\" onClick={onClick}>\n        Change Password\n      </Button>\n    }\n  />\n);\n","import React from \"react\";\nimport { convertAtomsToDcr, formatUnixTimestamp } from \"src/utils\";\nimport InfoSection from \"../../InfoSection.jsx\";\n\nexport default ({ amount, timestamp }) => (\n  <>\n    <InfoSection label=\"Amount\" info={`${convertAtomsToDcr(amount)} DCR`} />\n    <InfoSection label=\"Pay after\" info={formatUnixTimestamp(timestamp)} />\n  </>\n);\n","import React from \"react\";\nimport { Button, Text } from \"pi-ui\";\nimport useNavigation from \"src/hooks/api/useNavigation\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport InfoSection from \"../../InfoSection.jsx\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nexport default () => {\n  const { onLogout, isCMS } = useNavigation();\n  const handlePermanentLogoutClick = () => onLogout(isCMS, true);\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenModalConfirm = () => {\n    handleOpenModal(ModalConfirm, {\n      onClose: handleCloseModal,\n      onSubmit: handlePermanentLogoutClick,\n      title: \"Clear user data\"\n    });\n  };\n\n  return (\n    <>\n      <InfoSection\n        label=\"Personal data\"\n        info={\n          <>\n            <Text color=\"gray\">\n              You can clear all of your user data stored in the browser,\n              including your identity and draft records. Make a backup copy of\n              your identity key if you are choosing to do so. You will be logged\n              out after doing this.\n            </Text>\n            <Button\n              size=\"sm\"\n              className=\"margin-top-s margin-bottom-m\"\n              onClick={handleOpenModalConfirm}\n            >\n              Clear data\n            </Button>\n          </>\n        }\n      />\n    </>\n  );\n};\n","import { Button, Card, Text, classNames } from \"pi-ui\";\nimport React from \"react\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport ModalChangePassword from \"src/components/ModalChangePassword\";\nimport { reasonValidationSchema } from \"../validation\";\nimport {\n  MANAGE_USER_DEACTIVATE,\n  MANAGE_USER_EXPIRE_NEW_USER_VERIFICATION,\n  MANAGE_USER_EXPIRE_RESET_PASSWORD_VERIFICATION,\n  MANAGE_USER_EXPIRE_UPDATE_KEY_VERIFICATION,\n  MANAGE_USER_REACTIVATE\n} from \"src/constants\";\nimport { formatUnixTimestamp } from \"src/utils\";\nimport { isExpired, isUserDeactivated, isUserLocked } from \"../helpers\";\nimport useManageUser from \"../hooks/useManageUser\";\nimport useChangePassword from \"../hooks/useChangePassword\";\nimport InfoSection from \"../InfoSection.jsx\";\nimport styles from \"./Account.module.css\";\nimport AdminSection from \"./components/AdminSection\";\nimport AddressSection from \"./components/AddressSection\";\nimport EmailSection from \"./components/EmailSection\";\nimport PasswordSection from \"./components/PasswordSection\";\nimport PaywallSection from \"./components/PaywallSection\";\nimport UserDataSection from \"./components/UserDataSection\";\nimport { useConfig } from \"src/containers/Config\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst AdminAccount = ({\n  userid,\n  newuserverificationtoken,\n  newuserverificationexpiry,\n  newuserpaywalladdress,\n  newuserpaywallamount,\n  newuserpaywalltxnotbefore,\n  failedloginattempts,\n  resetpasswordverificationtoken,\n  resetpasswordverificationexpiry,\n  updatekeyverificationtoken,\n  updatekeyverificationexpiry,\n  islocked,\n  isdeactivated,\n  isadmin, // from the user API return\n  isUserPageOwner\n}) => {\n  const { enablePaywall } = useConfig();\n  const [deactivateUser, isApiRequestingDeactivateUser] = useManageUser(\n    MANAGE_USER_DEACTIVATE,\n    userid\n  );\n  const [reactivateUser, isApiRequestingReactivateUser] = useManageUser(\n    MANAGE_USER_REACTIVATE,\n    userid\n  );\n  const [markVerificationTokenAsExpired, isApiRequestingMarkNewUserAsExpired] =\n    useManageUser(MANAGE_USER_EXPIRE_NEW_USER_VERIFICATION, userid);\n  const [\n    markResetPasswordTokenAsExpired,\n    isApiRequestingMarkResetPasswordAsExpired\n  ] = useManageUser(MANAGE_USER_EXPIRE_RESET_PASSWORD_VERIFICATION, userid);\n  const [markUpdateKeyAsExpired, isApiRequestingMarkUpdateKeyAsExpired] =\n    useManageUser(MANAGE_USER_EXPIRE_UPDATE_KEY_VERIFICATION, userid);\n\n  const isActivationLoading =\n    isApiRequestingDeactivateUser || isApiRequestingReactivateUser;\n\n  const { onChangePassword, validationSchema: changePasswordValidationSchema } =\n    useChangePassword();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenPasswordExpireModal = () => {\n    handleOpenModal(ModalConfirmWithReason, {\n      subject: \"expireResetPasswordToken\",\n      onSubmit: markResetPasswordTokenAsExpired,\n      validationSchema: reasonValidationSchema,\n      onClose: handleCloseModal,\n      successTitle: \"Reset password token marked as expired\",\n      successMessage: (\n        <Text>\n          The reset password token has been successfully marked as expired.\n        </Text>\n      )\n    });\n  };\n\n  const handleOpenVerificationTokenExpireModal = () => {\n    handleOpenModal(ModalConfirmWithReason, {\n      subject: \"expireVerificationToken\",\n      onSubmit: markVerificationTokenAsExpired,\n      validationSchema: reasonValidationSchema,\n      onClose: handleCloseModal,\n      successTitle: \"Verification token marked as expired\",\n      successMessage: (\n        <Text>\n          The verification token has been successfully marked as expired.\n        </Text>\n      )\n    });\n  };\n\n  const handleOpenUpdateKeyExpireModal = () => {\n    handleOpenModal(ModalConfirmWithReason, {\n      subject: \"expireUpdateKey\",\n      onSubmit: markUpdateKeyAsExpired,\n      validationSchema: reasonValidationSchema,\n      onClose: handleCloseModal,\n      successTitle: \"Update key token marked as expired\",\n      successMessage: (\n        <Text>\n          The update key token has been successfully marked as expired.\n        </Text>\n      )\n    });\n  };\n\n  const handleOpenDeactivateReactivateUserModal = () => {\n    handleOpenModal(ModalConfirmWithReason, {\n      subject: \"deactivateOrReactivateUser\",\n      onSubmit: isdeactivated ? reactivateUser : deactivateUser,\n      validationSchema: reasonValidationSchema,\n      onClose: handleCloseModal,\n      successTitle: isdeactivated ? \"User activated\" : \"User deactivated\",\n      successMessage: (\n        <Text>\n          The user has been successfully{\" \"}\n          {isdeactivated ? \"activated\" : \"deactivated\"}.\n        </Text>\n      )\n    });\n  };\n\n  const handleOpenChangePasswordModal = () => {\n    handleOpenModal(ModalChangePassword, {\n      onChangePassword: onChangePassword,\n      validationSchema: changePasswordValidationSchema,\n      onClose: handleCloseModal\n    });\n  };\n\n  return (\n    <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n      <AdminSection isadmin={isadmin} />\n      <EmailSection token={newuserverificationtoken} />\n      {isUserPageOwner && (\n        <>\n          <PasswordSection onClick={handleOpenChangePasswordModal} />\n          <UserDataSection />\n        </>\n      )}\n      {enablePaywall && (\n        <>\n          <AddressSection address={newuserpaywalladdress} />\n          <PaywallSection\n            amount={newuserpaywallamount}\n            timestamp={newuserpaywalltxnotbefore}\n          />\n        </>\n      )}\n      <Text weight=\"semibold\" className={styles.subtitle}>\n        Security\n      </Text>\n      <InfoSection label=\"Failed login attempts\" info={failedloginattempts} />\n      <InfoSection\n        noMargin\n        label=\"Locked\"\n        info={isUserLocked(islocked) ? \"Yes\" : \"No\"}\n      />\n      {!isUserDeactivated(isdeactivated) ? (\n        <Button\n          data-testid=\"user-deactivate\"\n          className=\"margin-top-s\"\n          loading={isActivationLoading}\n          size=\"sm\"\n          onClick={handleOpenDeactivateReactivateUserModal}\n        >\n          Deactivate\n        </Button>\n      ) : (\n        <Button\n          data-testid=\"user-activate\"\n          className=\"margin-top-s\"\n          loading={isActivationLoading}\n          size=\"sm\"\n          onClick={handleOpenDeactivateReactivateUserModal}\n        >\n          Reactivate\n        </Button>\n      )}\n      {resetpasswordverificationtoken && (\n        <>\n          <Text color=\"grayDark\" weight=\"semibold\" className={styles.subtitle}>\n            Password\n          </Text>\n          <InfoSection\n            label=\"Reset password token\"\n            info={resetpasswordverificationtoken}\n          />\n          <InfoSection\n            noMargin\n            label=\"Expires\"\n            info={\n              isExpired(resetpasswordverificationexpiry) ? (\n                <span>Expired</span>\n              ) : (\n                formatUnixTimestamp(resetpasswordverificationexpiry)\n              )\n            }\n          />\n          {!isExpired(resetpasswordverificationexpiry) && (\n            <Button\n              loading={isApiRequestingMarkResetPasswordAsExpired}\n              size=\"sm\"\n              className=\"margin-top-s\"\n              onClick={handleOpenPasswordExpireModal}\n            >\n              Mark as expired\n            </Button>\n          )}\n        </>\n      )}\n      {newuserverificationtoken && (\n        <>\n          <Text color=\"grayDark\" weight=\"semibold\" className={styles.subtitle}>\n            Verification token\n          </Text>\n          <InfoSection\n            label=\"Verification token\"\n            info={newuserverificationtoken}\n          />\n          <InfoSection\n            noMargin\n            label=\"Expires\"\n            info={\n              isExpired(newuserverificationexpiry) ? (\n                <span>Expired</span>\n              ) : (\n                formatUnixTimestamp(newuserverificationexpiry)\n              )\n            }\n          />\n          {!isExpired(newuserverificationexpiry) && (\n            <Button\n              loading={isApiRequestingMarkNewUserAsExpired}\n              className=\"margin-top-s\"\n              size=\"sm\"\n              onClick={handleOpenVerificationTokenExpireModal}\n            >\n              Mark as expired\n            </Button>\n          )}\n        </>\n      )}\n      {updatekeyverificationtoken && (\n        <>\n          <Text color=\"grayDark\" weight=\"semibold\" className={styles.subtitle}>\n            Update key\n          </Text>\n          <InfoSection\n            label=\"Update key token\"\n            info={updatekeyverificationtoken}\n          />\n          <InfoSection\n            noMargin\n            label=\"Expires\"\n            info={\n              isExpired(updatekeyverificationexpiry) ? (\n                <span>Expired</span>\n              ) : (\n                formatUnixTimestamp(updatekeyverificationexpiry)\n              )\n            }\n          />\n          {!isExpired(updatekeyverificationexpiry) && (\n            <Button\n              loading={isApiRequestingMarkUpdateKeyAsExpired}\n              className=\"margin-top-s\"\n              size=\"sm\"\n              onClick={handleOpenUpdateKeyExpireModal}\n            >\n              Mark as expired\n            </Button>\n          )}\n        </>\n      )}\n    </Card>\n  );\n};\n\nexport default AdminAccount;\n","import { Card, classNames } from \"pi-ui\";\nimport React from \"react\";\nimport useChangePassword from \"../hooks/useChangePassword\";\nimport ModalChangePassword from \"src/components/ModalChangePassword\";\nimport AdminSection from \"./components/AdminSection\";\nimport AddressSection from \"./components/AddressSection\";\nimport EmailSection from \"./components/EmailSection\";\nimport PasswordSection from \"./components/PasswordSection\";\nimport PaywallSection from \"./components/PaywallSection\";\nimport UserDataSection from \"./components/UserDataSection\";\nimport { useConfig } from \"src/containers/Config\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst UserAccount = ({\n  newuserverificationtoken,\n  newuserpaywalladdress,\n  newuserpaywallamount,\n  newuserpaywalltxnotbefore,\n  isadmin // from the user API return\n}) => {\n  const { enablePaywall } = useConfig();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const { onChangePassword, validationSchema: changePasswordValidationSchema } =\n    useChangePassword();\n\n  const handleChangePasswordModal = () => {\n    handleOpenModal(ModalChangePassword, {\n      onChangePassword: onChangePassword,\n      validationSchema: changePasswordValidationSchema,\n      onClose: handleCloseModal\n    });\n  };\n\n  return (\n    <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n      <AdminSection isadmin={isadmin} />\n      <EmailSection token={newuserverificationtoken} />\n      <PasswordSection onClick={handleChangePasswordModal} />\n      <UserDataSection />\n      {enablePaywall && (\n        <>\n          <AddressSection address={newuserpaywalladdress} />\n          <PaywallSection\n            amount={newuserpaywallamount}\n            timestamp={newuserpaywalltxnotbefore}\n          />\n        </>\n      )}\n    </Card>\n  );\n};\n\nexport default UserAccount;\n","import { Card, classNames } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport InfoSection from \"../InfoSection.jsx\";\nimport { isUserAdmin } from \"../helpers\";\n\nconst OtherAccount = ({\n  isadmin // from the user API return\n}) => (\n  <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n    <InfoSection\n      className=\"no-margin-top\"\n      label=\"Admin\"\n      info={isUserAdmin(isadmin) ? \"Yes\" : \"No\"}\n    />\n  </Card>\n);\n\nOtherAccount.propTypes = {\n  isadmin: PropTypes.bool\n};\n\nexport default OtherAccount;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport AdminAccount from \"./AdminAccount\";\nimport UserAccount from \"./UserAccount\";\nimport OtherAccount from \"./OtherAccount\";\n\nconst Account = ({\n  isAdmin, // from the logged in user\n  isUserPageOwner,\n  ...props\n}) =>\n  isAdmin ? (\n    <AdminAccount isUserPageOwner={isUserPageOwner} {...props} />\n  ) : !isAdmin && isUserPageOwner ? (\n    <UserAccount {...props} />\n  ) : (\n    <OtherAccount isadmin={props.isadmin} />\n  );\n\nAccount.propTypes = {\n  newuserpaywalladdress: PropTypes.string,\n  newuserpaywallamount: PropTypes.number,\n  newuserpaywalltxnotbefore: PropTypes.number,\n  failedloginattempts: PropTypes.number,\n  newuserverificationtoken: PropTypes.any,\n  newuserverificationexpiry: PropTypes.number,\n  updatekeyverificationtoken: PropTypes.any,\n  updatekeyverificationexpiry: PropTypes.number,\n  resetpasswordverificationexpiry: PropTypes.number,\n  resetpasswordverificationtoken: PropTypes.any,\n  islocked: PropTypes.bool,\n  id: PropTypes.string,\n  isadmin: PropTypes.bool,\n  isdeactivated: PropTypes.bool,\n  isAdmin: PropTypes.bool,\n  isUserPageOwner: PropTypes.bool\n};\n\nexport default Account;\n","import React from \"react\";\nimport styles from \"../Credits.module.css\";\nimport {\n  Text,\n  P,\n  Button,\n  classNames,\n  useTheme,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\n\nexport default ({\n  isPaid,\n  isUser,\n  isAdmin,\n  openPaywallModal,\n  isApiRequestingMarkAsPaid,\n  openMarkAsPaidModal\n}) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <div className={styles.block}>\n      <div className={styles.blockDetails}>\n        <Text\n          className={classNames(styles.title, isDarkTheme && styles.darkTitle)}\n        >\n          Registration fee\n        </Text>\n        <Text\n          size=\"large\"\n          className={classNames(\n            styles.status,\n            \"margin-top-xs margin-bottom-xs\"\n          )}\n        >\n          {isPaid ? \"Paid\" : \"Not paid\"}\n        </Text>\n        {!isPaid && isUser && (\n          <Button className=\"margin-top-s\" size=\"sm\" onClick={openPaywallModal}>\n            Pay registration fee\n          </Button>\n        )}\n        {!isPaid && isAdmin && (\n          <Button\n            data-testid=\"mark-paid\"\n            className=\"margin-top-s\"\n            loading={isApiRequestingMarkAsPaid}\n            size=\"sm\"\n            onClick={openMarkAsPaidModal}\n          >\n            Mark as paid\n          </Button>\n        )}\n      </div>\n      <div className={styles.description}>\n        <P\n          className={classNames(\n            styles.descriptionParagraph,\n            isDarkTheme && styles.darkDescriptionParagraph\n          )}\n        >\n          <b>Registration Fee:</b> In order to participate on proposals and to\n          submit your own, Politeia requires a small registration fee of\n          <b> exactly 0.1 DCR.</b>\n        </P>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"../Credits.module.css\";\nimport { Text, P, classNames, useTheme, DEFAULT_DARK_THEME_NAME } from \"pi-ui\";\n\nexport default ({ proposalCredits, proposalCreditPrice }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <div className={classNames(styles.block, \"margin-top-l\")}>\n      <div className={styles.blockDetails}>\n        <Text\n          className={classNames(styles.title, isDarkTheme && styles.darkTitle)}\n        >\n          Proposal Credits\n        </Text>\n        <Text\n          size=\"large\"\n          className={classNames(\n            styles.status,\n            \"margin-top-xs margin-bottom-xs\"\n          )}\n        >\n          {proposalCredits}\n        </Text>\n      </div>\n      <div className={styles.description}>\n        <P\n          className={classNames(\n            styles.descriptionParagraph,\n            isDarkTheme && styles.darkDescriptionParagraph\n          )}\n        >\n          <b>Proposal credits:</b> each proposal submission requires{\" \"}\n          <b>1 proposal</b> credit which costs{\" \"}\n          <b>exactly {proposalCreditPrice || 0.1} DCR</b>.\n        </P>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Message } from \"pi-ui\";\n\nexport default ({ amountOfCreditsAddedOnRescan, errorRescan }) => (\n  <>\n    {amountOfCreditsAddedOnRescan !== null && (\n      <Message className=\"margin-top-s\" kind=\"success\">\n        User credits are up to date. {amountOfCreditsAddedOnRescan} proposal\n        credits were found by the rescan and added to the user account.\n      </Message>\n    )}\n    {errorRescan && (\n      <Message className=\"margin-top-s\" kind=\"error\">\n        {errorRescan.toString()}\n      </Message>\n    )}\n  </>\n);\n","import { Button, Card, classNames } from \"pi-ui\";\nimport React from \"react\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport { MANAGE_USER_CLEAR_USER_PAYWALL } from \"src/constants\";\nimport useManageUser from \"../hooks/useManageUser\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport { useCredits, useRescanUserCredits } from \"./hooks.js\";\nimport RegistrationFeeSection from \"./components/RegistrationFeeSection\";\nimport ProposalCreditsSection from \"./components/ProposalCreditsSection\";\nimport RescanSection from \"./components/RescanSection.jsx\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst Credits = ({ user }) => {\n  const userID = user && user.userid;\n  const [markAsPaid, isApiRequestingMarkAsPaid] = useManageUser(\n    MANAGE_USER_CLEAR_USER_PAYWALL,\n    userID\n  );\n  const { isPaid } = usePaywall(userID);\n  const { proposalCredits, proposalCreditPrice } = useCredits(userID);\n  const {\n    onRescanUserCredits,\n    errorRescan,\n    isLoadingRescan,\n    amountOfCreditsAddedOnRescan\n  } = useRescanUserCredits(userID);\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenMarkAsPaid = () => {\n    handleOpenModal(ModalConfirmWithReason, {\n      subject: \"markUserPaywallAsPaid\",\n      onSubmit: markAsPaid,\n      title: \"Mark user paywall as paid\",\n      successTitle: \"Paywall marked as paid\",\n      successMessage: \"The user paywall was successfully marked as paid!\",\n      onClose: handleCloseModal\n    });\n  };\n\n  return (\n    <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n      <RegistrationFeeSection\n        isPaid={isPaid}\n        isAdmin\n        isUser={false}\n        isApiRequestingMarkAsPaid={isApiRequestingMarkAsPaid}\n        openMarkAsPaidModal={handleOpenMarkAsPaid}\n      />\n      <ProposalCreditsSection\n        proposalCredits={proposalCredits}\n        proposalCreditPrice={proposalCreditPrice}\n      />\n      <Button\n        data-testid=\"rescan-credits\"\n        onClick={onRescanUserCredits}\n        loading={isLoadingRescan}\n        className=\"margin-top-s\"\n        size=\"sm\"\n      >\n        Rescan\n      </Button>\n      <RescanSection\n        amountOfCreditsAddedOnRescan={amountOfCreditsAddedOnRescan}\n        errorRescan={errorRescan}\n      />\n    </Card>\n  );\n};\n\nexport default Credits;\n","import React from \"react\";\nimport { Link } from \"pi-ui\";\nimport { useLoaderContext } from \"src/containers/Loader\";\n\nconst DcrTransactionLink = ({ txID }) => {\n  const { apiInfo } = useLoaderContext();\n  const hostName = apiInfo.testnet\n    ? \"testnet.decred.org\"\n    : \"dcrdata.decred.org\";\n  return (\n    <Link\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"use-ellipsis\"\n      href={`https://${hostName}/tx/${txID}`}\n    >\n      {txID}\n    </Link>\n  );\n};\n\nexport default DcrTransactionLink;\n","import orderBy from \"lodash/fp/orderBy\";\nimport { StatusTag } from \"pi-ui\";\nimport React from \"react\";\nimport DcrTransactionLink from \"src/components/DcrTransactionLink\";\nimport {\n  PAYWALL_STATUS_LACKING_CONFIRMATIONS,\n  PAYWALL_STATUS_PAID,\n  PAYWALL_STATUS_WAITING\n} from \"src/constants\";\nimport { formatShortUnixTimestamp, formatUnixTimestamp } from \"src/utils\";\n\nexport const tableHeaders = [\n  \"Type\",\n  \"Amount\",\n  \"DCRs Paid\",\n  \"Transaction\",\n  \"Status\",\n  \"Date\"\n];\n\nconst manuallyCleared = [\"created_by_dbutil\", \"cleared_by_admin\"];\n\nconst getRowDataForPurchase = (purchase) => ({\n  Type: purchase.type === \"fee\" ? \"Registration Fee\" : \"Credits\",\n  Amount: purchase.numberPurchased,\n  \"DCRs Paid\": purchase.price\n    ? (purchase.price * purchase.numberPurchased).toFixed(1)\n    : 0,\n  Transaction: manuallyCleared.includes(purchase.txId) ? (\n    purchase.txId\n  ) : (\n    <DcrTransactionLink txID={purchase.txId} />\n  ),\n  Status: purchase.confirming ? (\n    <StatusTag\n      type=\"bluePending\"\n      text={`Pending (${purchase.confirmations}/${purchase.paywallConfirmations} confirmations)`}\n    />\n  ) : (\n    <StatusTag type=\"greenCheck\" text=\"Confirmed\" />\n  ),\n  Date:\n    purchase.datePurchased === \"just now\"\n      ? purchase.datePurchased\n      : formatShortUnixTimestamp(purchase.datePurchased),\n  timestamp:\n    purchase.datePurchased === \"just now\" ? 99999999999 : purchase.datePurchased\n});\n\nexport const getTableContentFromPurchases = (\n  purchases,\n  pendingTransaction,\n  creditPrice\n) =>\n  orderBy(\n    [\"timestamp\"],\n    [\"desc\"]\n  )(\n    purchases.map(getRowDataForPurchase).concat(\n      pendingTransaction && pendingTransaction.txID\n        ? [\n            getRowDataForPurchase({\n              numberPurchased: Math.round(\n                (pendingTransaction.amount * 1) / (creditPrice * 100000000)\n              ),\n              price: creditPrice,\n              txId: pendingTransaction.txID,\n              confirming: true,\n              confirmations: pendingTransaction.confirmations,\n              paywallConfirmations: pendingTransaction.paywallConfirmations,\n              datePurchased: \"just now\"\n            })\n          ]\n        : []\n    )\n  ).map((item) => {\n    delete item.timestamp;\n    return item;\n  });\n\nexport const getCsvData = (data) =>\n  data\n    .filter((d) => !d.confirming)\n    .map((d) => ({\n      ...d,\n      datePurchased: d.datePurchased\n        ? formatUnixTimestamp(d.datePurchased)\n        : \"\",\n      price: d.price,\n      type: d.type === \"fee\" ? \"registration fee\" : \"credits\"\n    }));\n\nexport const getProposalCreditsPaymentStatus = (numOfConfirmations, txid) => {\n  if (!txid) {\n    return PAYWALL_STATUS_WAITING;\n  }\n  if (numOfConfirmations < 2) {\n    return PAYWALL_STATUS_LACKING_CONFIRMATIONS;\n  }\n  return PAYWALL_STATUS_PAID;\n};\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport const exportToCsv = (data, fields, filename) => {\n  const csvContent = data.reduce((acc, info) => {\n    let row = \"\";\n    fields.forEach((f) => (row += `\"${info[f]}\",`));\n    return acc + row + \"\\n\";\n  }, \"\");\n  const titles = fields.reduce((acc, f) => acc + `\"${f}\",`, \"\");\n  const csv = \"data:text/csv;charset=utf-8,\" + titles + \"\\n\" + csvContent;\n  const content = encodeURI(csv);\n  const link = document.createElement(\"a\");\n  link.setAttribute(\"href\", content);\n  link.setAttribute(\"download\", filename);\n  document.getElementById(\"csv-hidden-div\").appendChild(link);\n  link.click();\n};\n\nconst ExportToCsv = ({ children, data, fields, filename, className }) => {\n  const handleExportToCsv = () => {\n    exportToCsv(data, fields, filename);\n  };\n  return (\n    <>\n      <span className={className} onClick={handleExportToCsv}>\n        {children}\n      </span>\n      <div id=\"csv-hidden-div\" style={{ display: \"none\" }} />\n    </>\n  );\n};\n\nExportToCsv.propTypes = {\n  children: PropTypes.node.isRequired,\n  data: PropTypes.array.isRequired,\n  filename: PropTypes.string.isRequired,\n  className: PropTypes.string\n};\n\nexport default ExportToCsv;\n","import React from \"react\";\nimport {\n  getCsvData,\n  getTableContentFromPurchases,\n  tableHeaders\n} from \"../helpers.js\";\nimport { PAYWALL_STATUS_PAID } from \"src/constants\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport { useCredits } from \"../hooks.js\";\nimport { Table, Text, Link, useMediaQuery } from \"pi-ui\";\nimport ExportToCsv from \"src/components/ExportToCsv.jsx\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nexport default ({ proposalCreditPrice, user }) => {\n  const userID = user && user.userid;\n  const {\n    proposalCreditsPurchases,\n    proposalPaywallPaymentConfirmations,\n    proposalPaywallPaymentTxid,\n    proposalPaywallPaymentAmount\n  } = useCredits(userID);\n  const { paywallTxNotBefore, paywallAmount, paywallTxId, userPaywallStatus } =\n    usePaywall(userID);\n  const paywallPayment = {\n    datePurchased: paywallTxNotBefore,\n    numberPurchased: 1,\n    price: paywallAmount,\n    txId: paywallTxId,\n    type: \"fee\"\n  };\n  const allPurchases =\n    PAYWALL_STATUS_PAID === userPaywallStatus\n      ? [...proposalCreditsPurchases, paywallPayment]\n      : proposalCreditsPurchases;\n  const { policy } = usePolicy();\n  const data = getTableContentFromPurchases(\n    allPurchases,\n    {\n      confirmations: proposalPaywallPaymentConfirmations,\n      paywallConfirmations: policy.paywallconfirmations,\n      txID: proposalPaywallPaymentTxid,\n      amount: proposalPaywallPaymentAmount\n    },\n    proposalCreditPrice\n  );\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n\n  return data && !!data.length ? (\n    <div\n      className=\"margin-top-l\"\n      style={!extraSmall ? { overflowX: \"scroll\" } : {}}\n    >\n      <Text className=\"margin-right-xs\">Credit History</Text>\n      <ExportToCsv\n        data={getCsvData(allPurchases)}\n        fields={[\"numberPurchased\", \"price\", \"txId\", \"datePurchased\", \"type\"]}\n        filename=\"payment_history\"\n      >\n        <Link style={{ cursor: \"pointer\" }}>Export to csv</Link>\n      </ExportToCsv>\n      <div className=\"margin-top-s\">\n        <Table data={data} headers={tableHeaders} />\n      </div>\n    </div>\n  ) : null;\n};\n","import { Button, Card, classNames, Spinner } from \"pi-ui\";\nimport React, { useEffect } from \"react\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport { MANAGE_USER_CLEAR_USER_PAYWALL } from \"src/constants\";\nimport useManageUser from \"../hooks/useManageUser\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport styles from \"./Credits.module.css\";\nimport { useCredits, useRescanUserCredits } from \"./hooks.js\";\nimport RegistrationFeeSection from \"./components/RegistrationFeeSection\";\nimport ProposalCreditsSection from \"./components/ProposalCreditsSection\";\nimport RescanSection from \"./components/RescanSection.jsx\";\nimport CreditHistorySection from \"./components/CreditHistorySection.jsx\";\nimport { useUserPaymentModals } from \"./hooks\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst Credits = ({ user }) => {\n  const userID = user && user.userid;\n  const [markAsPaid, isApiRequestingMarkAsPaid] = useManageUser(\n    MANAGE_USER_CLEAR_USER_PAYWALL,\n    userID\n  );\n  const { isPaid, paywallEnabled } = usePaywall(userID);\n  const {\n    proposalCreditPrice,\n    isApiRequestingUserProposalCredits,\n    proposalCredits,\n    toggleCreditsPaymentPolling,\n    proposalPaymentReceived,\n    toggleProposalPaymentReceived,\n    onPollProposalPaywallPayment,\n    shouldPollPaywallPayment\n  } = useCredits(userID);\n\n  const {\n    onRescanUserCredits,\n    errorRescan,\n    isLoadingRescan,\n    amountOfCreditsAddedOnRescan\n  } = useRescanUserCredits(userID);\n\n  useEffect(() => {\n    if (shouldPollPaywallPayment) {\n      toggleCreditsPaymentPolling(true);\n      toggleProposalPaymentReceived(false);\n      onPollProposalPaywallPayment(false);\n    }\n  }, [\n    shouldPollPaywallPayment,\n    onPollProposalPaywallPayment,\n    toggleCreditsPaymentPolling,\n    toggleProposalPaymentReceived\n  ]);\n\n  const { handleOpenPaywallModal, handleOpenBuyCreditsModal } =\n    useUserPaymentModals(user);\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenMarkAsPaidModal = () => {\n    handleOpenModal(ModalConfirmWithReason, {\n      subject: \"markUserPaywallAsPaid\",\n      onSubmit: markAsPaid,\n      title: \"Mark user paywall as paid\",\n      successTitle: \"Paywall marked as paid\",\n      successMessage: \"The user paywall was successfully marked as paid!\",\n      onClose: handleCloseModal\n    });\n  };\n\n  useEffect(() => {\n    if (proposalPaymentReceived) {\n      toggleCreditsPaymentPolling(false);\n      toggleProposalPaymentReceived(false);\n      handleCloseModal();\n    }\n  }, [\n    proposalPaymentReceived,\n    toggleCreditsPaymentPolling,\n    toggleProposalPaymentReceived,\n    handleCloseModal\n  ]);\n\n  return isApiRequestingUserProposalCredits ? (\n    <div className={styles.spinnerWrapper}>\n      <Spinner invert />\n    </div>\n  ) : (\n    <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n      <RegistrationFeeSection\n        isPaid={isPaid}\n        isAdmin\n        isUser\n        openPaywallModal={handleOpenPaywallModal}\n        isApiRequestingMarkAsPaid={isApiRequestingMarkAsPaid}\n        openMarkAsPaidModal={handleOpenMarkAsPaidModal}\n      />\n      <ProposalCreditsSection\n        proposalCredits={proposalCredits}\n        proposalCreditPrice={proposalCreditPrice}\n      />\n      <div className={styles.buttonsWrapper}>\n        {isPaid && paywallEnabled && (\n          <>\n            <Button\n              className=\"margin-top-s\"\n              size=\"sm\"\n              onClick={handleOpenBuyCreditsModal}\n            >\n              Purchase more\n            </Button>\n            <Button\n              onClick={onRescanUserCredits}\n              loading={isLoadingRescan}\n              className=\"margin-top-s\"\n              size=\"sm\"\n            >\n              Rescan\n            </Button>\n          </>\n        )}\n      </div>\n      <RescanSection\n        amountOfCreditsAddedOnRescan={amountOfCreditsAddedOnRescan}\n        errorRescan={errorRescan}\n      />\n      <CreditHistorySection\n        user={user}\n        proposalCreditPrice={proposalCreditPrice}\n      />\n    </Card>\n  );\n};\n\nexport default Credits;\n","import { Button, Card, classNames, Spinner } from \"pi-ui\";\nimport React, { useEffect } from \"react\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport styles from \"./Credits.module.css\";\nimport { useCredits } from \"./hooks.js\";\nimport RegistrationFeeSection from \"./components/RegistrationFeeSection\";\nimport ProposalCreditsSection from \"./components/ProposalCreditsSection\";\nimport CreditHistorySection from \"./components/CreditHistorySection.jsx\";\nimport { useUserPaymentModals } from \"./hooks\";\n\nconst Credits = ({ user }) => {\n  const userID = user && user.userid;\n  const { isPaid, paywallEnabled } = usePaywall(userID);\n  const {\n    proposalCreditPrice,\n    isApiRequestingUserProposalCredits,\n    proposalCredits,\n    toggleCreditsPaymentPolling,\n    toggleProposalPaymentReceived,\n    proposalPaymentReceived,\n    onPollProposalPaywallPayment,\n    shouldPollPaywallPayment\n  } = useCredits(userID);\n\n  const {\n    handleOpenPaywallModal,\n    handleOpenBuyCreditsModal,\n    handleCloseModal\n  } = useUserPaymentModals(user);\n\n  useEffect(() => {\n    if (shouldPollPaywallPayment) {\n      toggleCreditsPaymentPolling(true);\n      toggleProposalPaymentReceived(false);\n      onPollProposalPaywallPayment(false);\n    }\n  }, [\n    shouldPollPaywallPayment,\n    onPollProposalPaywallPayment,\n    toggleCreditsPaymentPolling,\n    toggleProposalPaymentReceived\n  ]);\n\n  useEffect(() => {\n    if (proposalPaymentReceived) {\n      toggleCreditsPaymentPolling(false);\n      handleCloseModal();\n    }\n  }, [proposalPaymentReceived, toggleCreditsPaymentPolling, handleCloseModal]);\n\n  return isApiRequestingUserProposalCredits ? (\n    <div className={styles.spinnerWrapper}>\n      <Spinner invert />\n    </div>\n  ) : (\n    <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n      <RegistrationFeeSection\n        isPaid={isPaid}\n        isAdmin={false}\n        isUser\n        openPaywallModal={handleOpenPaywallModal}\n      />\n      <ProposalCreditsSection\n        proposalCredits={proposalCredits}\n        proposalCreditPrice={proposalCreditPrice}\n      />\n      {isPaid && paywallEnabled && (\n        <Button\n          className=\"margin-top-s\"\n          size=\"sm\"\n          onClick={handleOpenBuyCreditsModal}\n        >\n          Purchase more\n        </Button>\n      )}\n      <CreditHistorySection\n        user={user}\n        proposalCreditPrice={proposalCreditPrice}\n      />\n    </Card>\n  );\n};\n\nexport default Credits;\n","import { Message } from \"pi-ui\";\nimport React from \"react\";\nimport { useCredits } from \"./hooks.js\";\nimport AdminCredits from \"./AdminCredits\";\nimport AdminUserCredits from \"./AdminUserCredits\";\nimport UserCredits from \"./UserCredits\";\n\nconst Credits = ({ user }) => {\n  const userID = user && user.userid;\n  const { currentUserID, isAdmin } = useCredits(userID);\n\n  const isUserPageOwner = user && currentUserID === user.userid;\n\n  const isAdminOrTheUser = user && (isAdmin || currentUserID === user.userid);\n\n  return !isAdminOrTheUser ? (\n    <Message kind=\"error\">\n      Only admins or the user himself can access this route.\n    </Message>\n  ) : isAdmin && !isUserPageOwner ? (\n    <AdminCredits user={user} />\n  ) : !isAdmin && isUserPageOwner ? (\n    <UserCredits user={user} />\n  ) : (\n    <AdminUserCredits user={user} />\n  );\n};\n\nexport default Credits;\n","import React from \"react\";\nimport { P, Text } from \"pi-ui\";\n\nexport default ({ pubkey }) =>\n  pubkey ? (\n    <P className=\"margin-top-s margin-bottom-s\">\n      <Text backgroundColor=\"blueLighter\" monospace>\n        {pubkey}\n      </Text>\n    </P>\n  ) : (\n    <P className=\"margin-top-s\">There isn't an active public key</P>\n  );\n","import { classNames, Text } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { memo } from \"react\";\nimport styles from \"../Identity.module.css\";\n\nconst IdentityList = memo(({ identities }) => {\n  return (\n    <ol className={classNames(styles.identityList, \"margin-bottom-s\")}>\n      {identities.map((identity) => (\n        <li className=\"margin-top-l\" key={identity.pubkey}>\n          <Text backgroundColor=\"blueLighter\" monospace>\n            {identity.pubkey}\n          </Text>\n        </li>\n      ))}\n    </ol>\n  );\n});\n\nIdentityList.propTypes = {\n  identities: PropTypes.array\n};\n\nexport default IdentityList;\n","import React from \"react\";\nimport { classNames, Text, Button, P, Modal } from \"pi-ui\";\nimport styles from \"../Identity.module.css\";\nimport IdentityList from \"./IdentityList\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nfunction KeysModal({ pastIdentities, ...props }) {\n  return (\n    <Modal {...props}>\n      <IdentityList full identities={pastIdentities} />\n    </Modal>\n  );\n}\n\nexport default ({ pastIdentities }) => {\n  const [handleOpenModal, handleCloseModal] = useModalContext(false);\n\n  const handleOpenKeysModal = () => {\n    handleOpenModal(KeysModal, {\n      onClose: handleCloseModal,\n      title: \"Past public keys\",\n      pastIdentities\n    });\n  };\n\n  return pastIdentities ? (\n    <>\n      <Text\n        weight=\"semibold\"\n        className={classNames(\n          styles.block,\n          styles.fieldHeading,\n          \"margin-bottom-s\",\n          \"margin-top-l\"\n        )}\n      >\n        Past public keys\n      </Text>\n      <P>\n        {pastIdentities.length !== 0\n          ? \"List of inactive public keys your account has had in the past.\"\n          : \"This account only had one active public key until now.\"}\n      </P>\n      {pastIdentities.length !== 0 && (\n        <Button size=\"sm\" kind=\"primary\" onClick={handleOpenKeysModal}>\n          Show all\n        </Button>\n      )}\n    </>\n  ) : null;\n};\n","import React from \"react\";\nimport { classNames, Text, P, Link } from \"pi-ui\";\nimport styles from \"../Identity.module.css\";\n\nexport default ({ id }) => (\n  <>\n    <Text\n      weight=\"semibold\"\n      className={classNames(\n        styles.block,\n        styles.fieldHeading,\n        \"margin-bottom-s\",\n        \"margin-top-l\"\n      )}\n    >\n      User ID\n    </Text>\n    <P className=\"margin-bottom-s\">\n      Unique 16-byte UUID, as defined in{\" \"}\n      <Link\n        href=\"https://tools.ietf.org/html/rfc4122\"\n        target=\"_blank\"\n        rel=\"nofollow noopener noreferrer\"\n      >\n        RFC 4122\n      </Link>\n      , used to identify your user.\n    </P>\n    <Text backgroundColor=\"blueLighter\" monospace>\n      {id}\n    </Text>\n  </>\n);\n","import { Card, Spinner, Text, classNames } from \"pi-ui\";\nimport React, { useEffect } from \"react\";\nimport { PUB_KEY_STATUS_LOADING } from \"src/constants\";\nimport { verifyUserPubkey } from \"src/helpers\";\nimport useUserIdentity from \"src/hooks/api/useUserIdentity\";\nimport styles from \"./Identity.module.css\";\nimport PublicKeyText from \"./components/PublicKeyText\";\nimport PastKeysSection from \"./components/PastKeysSection\";\nimport UserIdSection from \"./components/UserIdSection\";\n\nconst OtherIdentity = ({ loadingKey, user }) => {\n  const { userid: userID, identities } = user;\n  const { currentUserID, userPubkey, keyMismatchAction } = useUserIdentity();\n\n  useEffect(() => {\n    verifyUserPubkey(currentUserID, userPubkey, keyMismatchAction);\n  }, [currentUserID, userPubkey, keyMismatchAction]);\n\n  const activeIdentity = identities && identities.filter((i) => i.isactive)[0];\n  const pubkey = activeIdentity && activeIdentity.pubkey;\n\n  const pastIdentities = identities && identities.filter((i) => !i.isactive);\n\n  return loadingKey === PUB_KEY_STATUS_LOADING ? (\n    <div className={styles.spinnerWrapper}>\n      <Spinner invert />\n    </div>\n  ) : (\n    <Card className=\"margin-bottom-m\" paddingSize=\"small\">\n      <Text\n        color=\"grayDark\"\n        weight=\"semibold\"\n        className={classNames(styles.fieldHeading, styles.block)}\n      >\n        Public key\n      </Text>\n      <PublicKeyText pubkey={pubkey} />\n      <PastKeysSection pastIdentities={pastIdentities} />\n      <UserIdSection id={userID} />\n    </Card>\n  );\n};\n\nexport default OtherIdentity;\n","import {\n  Button,\n  getThemeProperty,\n  Icon,\n  Modal,\n  Text,\n  TextInput,\n  useTheme\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useEffect, useState } from \"react\";\nimport ReactFileReader from \"react-file-reader\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport {\n  INVALID_FILE,\n  INVALID_KEY_PAIR,\n  LOAD_KEY_FAILED,\n  PUBLIC_KEY_MISMATCH\n} from \"src/constants\";\nimport { getJsonData, isEmpty } from \"src/helpers\";\nimport useUserIdentity from \"src/hooks/api/useUserIdentity\";\nimport * as pki from \"src/lib/pki\";\n\nconst auditIdentity = (keys, userPubkey, setFileError) => {\n  // check that the pubkey matches with the server one\n  if (keys.publicKey !== userPubkey) {\n    throw new Error(PUBLIC_KEY_MISMATCH);\n  }\n\n  // check that the key pair is valid\n  if (!pki.verifyKeyPair(keys)) {\n    throw new Error(INVALID_KEY_PAIR);\n  }\n\n  setFileError(null);\n};\n\nconst onSelectFiles =\n  (setFileError, setFieldValue) =>\n  ({ base64 }) => {\n    try {\n      const json = getJsonData(base64);\n      if (!json || !json.publicKey || !json.secretKey)\n        throw new Error(INVALID_FILE);\n      setFieldValue(\"publicKey\", json.publicKey);\n      setFieldValue(\"secretKey\", json.secretKey);\n      setFileError(null);\n    } catch (e) {\n      console.error(e.stack);\n      setFileError(e);\n    }\n  };\n\nconst ModalImportIdentity = ({\n  show,\n  onClose,\n  validationSchema,\n  successMessage,\n  successTitle\n}) => {\n  const { onIdentityImported, userPubkey, currentUserID, keyMismatchAction } =\n    useUserIdentity();\n  const [fileError, setFileError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  const onSubmitNewIdentity = async (\n    values,\n    { resetForm, setSubmitting, setFieldError }\n  ) => {\n    try {\n      await auditIdentity(values, userPubkey, setFileError);\n      await pki.importKeys(currentUserID, values).catch(() => {\n        throw new Error(LOAD_KEY_FAILED);\n      });\n      resetForm();\n      setSuccess(true);\n      keyMismatchAction(false);\n      setSubmitting(false);\n      onIdentityImported(\"Successfully imported identity\");\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n    }\n  };\n\n  useEffect(\n    function clearOnClose() {\n      if (!show) {\n        setTimeout(() => setSuccess(false), 500);\n      }\n    },\n    [show]\n  );\n\n  const { theme } = useTheme();\n  const successIconBgColor = getThemeProperty(\n    theme,\n    \"success-icon-background-color\"\n  );\n  const iconCheckmarkColor = getThemeProperty(\n    theme,\n    \"success-icon-checkmark-color\"\n  );\n\n  return (\n    <Modal\n      title={success ? successTitle : \"Import Identity\"}\n      show={show}\n      onClose={onClose}\n      style={{ width: \"600px\" }}\n      iconComponent={\n        success && (\n          <Icon\n            type={\"checkmark\"}\n            size={26}\n            iconColor={iconCheckmarkColor}\n            backgroundColor={successIconBgColor}\n          />\n        )\n      }\n    >\n      {!success ? (\n        <FormWrapper\n          initialValues={{\n            publicKey: \"\",\n            secretKey: \"\"\n          }}\n          onSubmit={onSubmitNewIdentity}\n          validationSchema={validationSchema}\n        >\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            values,\n            handleChange,\n            handleBlur,\n            setFieldValue,\n            handleSubmit,\n            isSubmitting,\n            errors\n          }) => {\n            const canSubmit =\n              values.publicKey &&\n              values.secretKey &&\n              isEmpty(errors) &&\n              !fileError;\n            return (\n              <Form onSubmit={handleSubmit}>\n                {errors && errors.global && (\n                  <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n                )}\n                {fileError && (\n                  <ErrorMessage>{fileError.toString()}</ErrorMessage>\n                )}\n                <div\n                  style={{\n                    width: \"100%\",\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\"\n                  }}\n                >\n                  <ReactFileReader\n                    base64\n                    handleFiles={onSelectFiles(setFileError, setFieldValue)}\n                    multipleFiles={false}\n                    fileTypes=\"json\"\n                  >\n                    <Button type=\"button\">Upload json identity file</Button>\n                  </ReactFileReader>\n                  <Text\n                    className=\"margin-top-l margin-bottom-m\"\n                    color=\"grayDark\"\n                  >\n                    Or paste in your own\n                  </Text>\n                </div>\n                <TextInput\n                  id=\"publicKey\"\n                  label=\"Public key\"\n                  name=\"publicKey\"\n                  value={values.publicKey}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                />\n                <TextInput\n                  id=\"secretKey\"\n                  label=\"Private key\"\n                  name=\"secretKey\"\n                  value={values.secretKey}\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                />\n                <Actions className=\"no-padding-bottom\">\n                  <Button\n                    loading={isSubmitting}\n                    kind={canSubmit ? \"primary\" : \"disabled\"}\n                    type=\"submit\"\n                  >\n                    Update Identity\n                  </Button>\n                </Actions>\n              </Form>\n            );\n          }}\n        </FormWrapper>\n      ) : (\n        <>\n          {successMessage}\n          <div className=\"justify-right margin-top-m\">\n            <Button onClick={onClose}>Ok</Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalImportIdentity.propTypes = {\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  handleSubmit: PropTypes.func,\n  validationSchema: PropTypes.object,\n  successTitle: PropTypes.string,\n  successMessage: PropTypes.node\n};\n\nModalImportIdentity.defaultProps = {\n  successTitle: \"Identity imported successfully\",\n  successMessage: \"Your keys were imported successfully\"\n};\n\nexport default ModalImportIdentity;\n","import React from \"react\";\n\nconst FileDownloadLink = ({\n  children,\n  style,\n  filename = \"download.txt\",\n  mime = \"text/plain;charset=utf-8\",\n  data\n}) => (\n  <a\n    style={style}\n    className=\"download-link\"\n    href={`data:${mime},${encodeURIComponent(data)}`}\n    download={filename}\n  >\n    {children}\n  </a>\n);\n\nexport default FileDownloadLink;\n","import { Button } from \"pi-ui\";\nimport React from \"react\";\nimport FileDownloadLink from \"./FileDownloadLink\";\n\nconst PrivateKeyDownloadManager = ({ keyData }) => {\n  return (\n    <>\n      <FileDownloadLink\n        style={{ marginRight: \"1.7rem\" }}\n        filename=\"politeia-pki.json\"\n        mime=\"application/json;charset=utf-8\"\n        data={keyData}\n      >\n        <Button size=\"sm\">Download Identity</Button>\n      </FileDownloadLink>\n    </>\n  );\n};\n\nexport default PrivateKeyDownloadManager;\n","import { Button, Card, classNames, Message, P, Spinner, Text } from \"pi-ui\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport DevelopmentOnlyContent from \"src/components/DevelopmentOnlyContent\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport ModalImportIdentity from \"src/components/ModalImportIdentity\";\nimport PrivateKeyDownloadManager from \"src/components/PrivateKeyDownloadManager\";\nimport { PUB_KEY_STATUS_LOADING } from \"src/constants\";\nimport { verifyUserPubkey } from \"src/helpers\";\nimport useUserIdentity from \"src/hooks/api/useUserIdentity\";\nimport * as pki from \"src/lib/pki\";\nimport styles from \"./Identity.module.css\";\nimport PublicKeyText from \"./components/PublicKeyText\";\nimport PastKeysSection from \"./components/PastKeysSection\";\nimport UserIdSection from \"./components/UserIdSection\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst fetchKeys = (currentUserID) =>\n  pki.getKeys(currentUserID).then((keys) => JSON.stringify(keys, null, 2));\n\nconst Identity = ({ history, loadingKey, user }) => {\n  const { userid: userID, identities } = user;\n  const {\n    currentUserEmail,\n    currentUserID,\n    userPubkey,\n    identityImportSuccess,\n    onUpdateUserKey,\n    updateUserKeyToken,\n    keyMismatch,\n    keyMismatchAction,\n    shouldAutoVerifyKey\n  } = useUserIdentity();\n\n  useEffect(() => {\n    verifyUserPubkey(currentUserID, userPubkey, keyMismatchAction);\n  }, [currentUserID, userPubkey, keyMismatchAction]);\n\n  const activeIdentity = identities && identities.filter((i) => i.isactive)[0];\n  const pubkey = activeIdentity && activeIdentity.pubkey;\n\n  const pastIdentities = identities && identities.filter((i) => !i.isactive);\n\n  const updateKey = useCallback(async () => {\n    await onUpdateUserKey(currentUserID);\n  }, [onUpdateUserKey, currentUserID]);\n\n  const [keyData, setKeyData] = useState();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenCreateNewIdentityModal = () => {\n    handleOpenModal(ModalConfirm, {\n      title: \"Create new identity\",\n      message: \"Are you sure you want to generate a new identity?\",\n      onClose: handleCloseModal,\n      onSubmit: updateKey,\n      successTitle: \"Create new identity\",\n      successMessage: `Your new identity has been requested, please check your email at ${currentUserEmail} to verify and activate it.\n\n      The verification link needs to be open with the same browser that you used to generate this new identity.`\n    });\n  };\n\n  const handleOpenImportIdentityModal = () => {\n    handleOpenModal(ModalImportIdentity, {\n      onClose: handleCloseModal\n    });\n  };\n\n  useEffect(() => {\n    let isSubscribed = true;\n    fetchKeys(currentUserID).then((keyData) => {\n      if (isSubscribed) setKeyData(keyData);\n    });\n    return () => (isSubscribed = false);\n  }, [currentUserID]);\n\n  return loadingKey === PUB_KEY_STATUS_LOADING ? (\n    <div className={styles.spinnerWrapper}>\n      <Spinner invert />\n    </div>\n  ) : (\n    <Card className=\"margin-bottom-m\" paddingSize=\"small\">\n      <Text\n        weight=\"semibold\"\n        className={classNames(styles.fieldHeading, styles.block)}\n      >\n        Public key\n      </Text>\n      {shouldAutoVerifyKey && updateUserKeyToken ? (\n        <DevelopmentOnlyContent style={{ margin: \"1rem 0 1rem 0\" }} show>\n          <Button\n            type=\"button\"\n            onClick={() =>\n              history.push(\n                `/user/key/verify?verificationtoken=${updateUserKeyToken}`\n              )\n            }\n          >\n            Auto verify key\n          </Button>\n        </DevelopmentOnlyContent>\n      ) : keyMismatch && !identityImportSuccess ? (\n        <>\n          <Message className=\"margin-top-s\" kind=\"error\">\n            Your key is invalid or inexistent. Please create/import one.\n          </Message>\n          <P className=\"margin-top-s\">\n            The public key on the Politeia server differs from the key on your\n            browser. This is usually caused from the local data on your browser\n            being cleared or by using a different browser.\n          </P>\n          <P className=\"margin-bottom-s\">\n            You can fix this by importing your old identity, logging in with the\n            proper browser, or by creating a new identity (destroying your old\n            identity)\n          </P>\n        </>\n      ) : (\n        <div\n          className={classNames(\n            styles.block,\n            \"margin-bottom-s\",\n            \"margin-top-s\"\n          )}\n        >\n          <P>\n            Your public and private keys constitute your identity. The private\n            key is used to sign your proposals, comments and any up/down votes\n            on Politeia. You can have only one identity active at a time. Your\n            keys are stored in your browser by default, so if you use Politeia\n            on multiple machines you will need to import your keys before you\n            can participate.\n          </P>\n          <PublicKeyText pubkey={pubkey} />\n        </div>\n      )}\n      <div className={styles.buttonsWrapper}>\n        <Button size=\"sm\" onClick={handleOpenCreateNewIdentityModal}>\n          Create new identity\n        </Button>\n        <Button size=\"sm\" onClick={handleOpenImportIdentityModal}>\n          Import identity\n        </Button>\n        <PrivateKeyDownloadManager keyData={keyData} />\n      </div>\n      <PastKeysSection pastIdentities={pastIdentities} />\n      <UserIdSection id={userID} />\n    </Card>\n  );\n};\n\nexport default withRouter(Identity);\n","import React from \"react\";\nimport useUserIdentity from \"src/hooks/api/useUserIdentity\";\nimport OtherIdentity from \"./OtherIdentity\";\nimport UserIdentity from \"./UserIdentity\";\n\nconst Identity = ({ user, ...props }) => {\n  const { currentUserID } = useUserIdentity();\n  const isUserPageOwner = user && currentUserID === user.userid;\n  return isUserPageOwner ? (\n    <UserIdentity user={user} {...props} />\n  ) : (\n    <OtherIdentity user={user} {...props} />\n  );\n};\n\nexport default Identity;\n","import { Field, Formik } from \"formik\";\nimport { Button, Card, Checkbox, classNames, H2, Icon, Message } from \"pi-ui\";\nimport React, { useState } from \"react\";\nimport { useUserPreferences } from \"./hooks.js\";\nimport styles from \"./Preferences.module.css\";\n\nconst Preferences = ({ user }) => {\n  const {\n    currentUserID,\n    editUserError,\n    editUserResponse,\n    isAdmin,\n    isApiRequestingEditUser,\n    initialValues,\n    onEditUser\n  } = useUserPreferences();\n  const [showConfirm, setShowConfirm] = useState(false);\n  const isUserPageOwner = user && currentUserID === user.userid;\n  const handlePreferencesSubmit = (...args) => {\n    setShowConfirm(true);\n    onEditUser(...args);\n  };\n  return isUserPageOwner ? (\n    <Formik\n      initialValues={initialValues}\n      onSubmit={handlePreferencesSubmit}\n      enableReinitialize={true}\n    >\n      {(formikProps) => {\n        const { handleSubmit, setFieldValue, values } = formikProps;\n        const customSetFieldValue = (...props) => {\n          setShowConfirm(false);\n          setFieldValue(...props);\n        };\n        return (\n          <form onSubmit={handleSubmit}>\n            <div>\n              <Message className={styles.marginHorizontal1} kind=\"info\">\n                Currently, only one attempt is made to send each notification\n                email. Politeia will not try to resend an email if, for whatever\n                reason, it cannot be delivered.\n              </Message>\n              <Card className=\"container margin-top-s\">\n                <H2>Email notifications for my proposals</H2>\n                <Field\n                  component={Checkbox}\n                  checked={values[\"myproposalnotifications-statuschange\"]}\n                  onChange={(event) =>\n                    customSetFieldValue(\n                      \"myproposalnotifications-statuschange\",\n                      event.target.checked\n                    )\n                  }\n                  className=\"margin-top-m\"\n                  id=\"1\"\n                  name=\"myproposalnotifications-statuschange\"\n                  label=\"Proposal approved or censored\"\n                />\n                <Field\n                  component={Checkbox}\n                  checked={values[\"myproposalnotifications-votestarted\"]}\n                  onChange={(event) =>\n                    customSetFieldValue(\n                      \"myproposalnotifications-votestarted\",\n                      event.target.checked\n                    )\n                  }\n                  className=\"margin-top-m\"\n                  id=\"2\"\n                  name=\"myproposalnotifications-votestarted\"\n                  label=\"Voting started for proposal\"\n                />\n              </Card>\n              <Card className=\"container margin-top-s\">\n                <H2>Email notifications for other's proposals</H2>\n                <Field\n                  component={Checkbox}\n                  checked={values[\"regularproposalnotifications-vetted\"]}\n                  onChange={(event) =>\n                    customSetFieldValue(\n                      \"regularproposalnotifications-vetted\",\n                      event.target.checked\n                    )\n                  }\n                  className=\"margin-top-m\"\n                  id=\"3\"\n                  name=\"regularproposalnotifications-vetted\"\n                  label=\"New proposal published\"\n                />\n                <Field\n                  component={Checkbox}\n                  checked={values[\"regularproposalnotifications-edited\"]}\n                  onChange={(event) =>\n                    customSetFieldValue(\n                      \"regularproposalnotifications-edited\",\n                      event.target.checked\n                    )\n                  }\n                  className=\"margin-top-m\"\n                  id=\"4\"\n                  name=\"regularproposalnotifications-edited\"\n                  label=\"Proposal edited\"\n                />\n                <Field\n                  component={Checkbox}\n                  checked={values[\"regularproposalnotifications-votestarted\"]}\n                  onChange={(event) =>\n                    customSetFieldValue(\n                      \"regularproposalnotifications-votestarted\",\n                      event.target.checked\n                    )\n                  }\n                  className=\"margin-top-m\"\n                  id=\"5\"\n                  name=\"regularproposalnotifications-votestarted\"\n                  label=\"Voting started for proposal\"\n                />\n              </Card>\n              {isAdmin && isUserPageOwner && (\n                <Card className=\"container margin-top-s\">\n                  <H2>Admin email notifications</H2>\n                  <Field\n                    component={Checkbox}\n                    checked={values[\"adminproposalnotifications-new\"]}\n                    onChange={(event) =>\n                      customSetFieldValue(\n                        \"adminproposalnotifications-new\",\n                        event.target.checked\n                      )\n                    }\n                    className=\"margin-top-m\"\n                    id=\"6\"\n                    name=\"adminproposalnotifications-new\"\n                    label=\"New proposal submitted\"\n                  />\n                  <Field\n                    component={Checkbox}\n                    checked={\n                      values[\"adminproposalnotifications-voteauthorized\"]\n                    }\n                    onChange={(event) =>\n                      customSetFieldValue(\n                        \"adminproposalnotifications-voteauthorized\",\n                        event.target.checked\n                      )\n                    }\n                    className=\"margin-top-m\"\n                    id=\"7\"\n                    name=\"adminproposalnotifications-voteauthorized\"\n                    label=\"Voting authorized for proposal\"\n                  />\n                </Card>\n              )}\n              <Card className=\"container margin-top-s\">\n                <H2>Comment email notifications</H2>\n                <Field\n                  component={Checkbox}\n                  checked={values[\"commentnotifications-proposal\"]}\n                  onChange={(event) =>\n                    customSetFieldValue(\n                      \"commentnotifications-proposal\",\n                      event.target.checked\n                    )\n                  }\n                  className=\"margin-top-m\"\n                  id=\"8\"\n                  name=\"commentnotifications-proposal\"\n                  label=\"New comment on your proposal\"\n                />\n                <Field\n                  component={Checkbox}\n                  checked={values[\"commentnotifications-comment\"]}\n                  onChange={(event) =>\n                    customSetFieldValue(\n                      \"commentnotifications-comment\",\n                      event.target.checked\n                    )\n                  }\n                  className=\"margin-top-m\"\n                  id=\"9\"\n                  name=\"commentnotifications-comment\"\n                  label=\"New comment reply to your comment\"\n                />\n              </Card>\n              <Button\n                width={195}\n                type=\"submit\"\n                loading={isApiRequestingEditUser}\n                kind={showConfirm ? \"disabled\" : \"primary\"}\n                className={classNames(styles.submitButton, \"margin-bottom-m\")}\n              >\n                {showConfirm && editUserResponse ? (\n                  <div className={styles.savedIcon}>\n                    Saved\n                    <Icon\n                      type=\"checkmark\"\n                      backgroundColor=\"#e6eaed\"\n                      size=\"lg\"\n                      iconColor=\"#8997a5\"\n                    />\n                  </div>\n                ) : (\n                  \"Save preferences\"\n                )}\n              </Button>\n              {showConfirm && editUserError && (\n                <Message className={styles.confirmMessage} kind=\"error\">\n                  {editUserError}\n                </Message>\n              )}\n            </div>\n          </form>\n        );\n      }}\n    </Formik>\n  ) : (\n    <Message kind=\"error\">\n      Only admins or the user himself can access this route.\n    </Message>\n  );\n};\n\nexport default Preferences;\n","import * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport * as sel from \"src/selectors\";\n\nexport function useUserPreferences() {\n  const isAdmin = useSelector(sel.currentUserIsAdmin);\n  const isApiRequestingEditUser = useSelector(sel.isApiRequestingEditUser);\n  const currentUserID = useSelector(sel.currentUserID);\n  const editUserResponse = useSelector(sel.currentUserEdited);\n  const editUserError = useSelector(sel.editUserError);\n  const initialValues = useSelector(sel.currentUserPreferences);\n\n  const onEditUser = useAction(act.onEditUserPreferences);\n\n  return {\n    isAdmin,\n    isApiRequestingEditUser,\n    currentUserID,\n    editUserResponse,\n    editUserError,\n    initialValues,\n    onEditUser\n  };\n}\n","import { Button, Message, H2, Select } from \"pi-ui\";\nimport SelectField from \"src/components/Select/SelectField\";\nimport React, { useCallback, useState } from \"react\";\nimport InfoSection from \"../InfoSection.jsx\";\nimport {\n  selectTypeOptions,\n  getInitialAndOptionsProposals,\n  getInitialAndOptionsSupervisors\n} from \"./helpers\";\nimport { Formik } from \"formik\";\nimport styles from \"./ManageContractor.module.css\";\nimport useSupervisors from \"src/hooks/api/useSupervisors\";\nimport useApprovedProposals from \"src/hooks/api/useApprovedProposals\";\nimport { usePolicy } from \"src/hooks\";\nimport { getContractorDomains } from \"src/helpers\";\n\nconst selectStyles = {\n  container: (provided) => ({\n    ...provided,\n    width: \"200px\",\n    minWidth: \"200px\"\n  })\n};\n\nconst multipleSelectStyles = {\n  container: (provided) => ({\n    ...provided,\n    width: \"100%\",\n    minWidth: \"200px\"\n  })\n};\n\nconst ManageDccForm = ({ onUpdate, user }) => {\n  const {\n    domain,\n    contractortype,\n    userid,\n    supervisoruserids = [],\n    proposalsowned = []\n  } = user;\n  const {\n    policy: { supporteddomains },\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n\n  const contractorDomains = getContractorDomains(supporteddomains);\n  const [updated, setUpdated] = useState(false);\n\n  // Parse supervisors initial values and options\n  const {\n    loading: loadingSupervisors,\n    supervisors,\n    error: supervisorsError\n  } = useSupervisors();\n  const { supervisorsOptions, initialSupervisorOptions } =\n    getInitialAndOptionsSupervisors(supervisors, supervisoruserids);\n\n  // Parse owned proposals initial values and options\n  const {\n    proposals,\n    isLoading: loadingOwnedProposals,\n    error: approvedProposalsError\n  } = useApprovedProposals(proposalPageSize);\n  const { proposalsOptions, initialOwnedProposals } =\n    getInitialAndOptionsProposals(proposals, proposalsowned);\n\n  const handleSubmitForm = useCallback(\n    async (values, { setSubmitting, setFieldError, resetForm }) => {\n      try {\n        await onUpdate(\n          userid,\n          values.domain,\n          values.type,\n          values.users.map((user) => user.value),\n          values.proposals.map((prop) => prop.value)\n        );\n        setSubmitting(false);\n        setUpdated(true);\n        resetForm();\n      } catch (e) {\n        setFieldError(\"global\", e);\n        setSubmitting(false);\n      }\n    },\n    [onUpdate, userid]\n  );\n\n  return (\n    <Formik\n      onSubmit={handleSubmitForm}\n      enableReinitialize={true}\n      initialValues={{\n        domain,\n        type: contractortype,\n        users: initialSupervisorOptions,\n        proposals: initialOwnedProposals\n      }}\n    >\n      {({\n        values,\n        setFieldValue,\n        handleSubmit,\n        isSubmitting,\n        dirty,\n        errors\n      }) => {\n        const handleChangeUserSelector = (options) => {\n          setFieldValue(\"users\", options);\n        };\n        const handleChangeOwnedProposals = (options) => {\n          setFieldValue(\"proposals\", options);\n        };\n        const submitEnabled =\n          dirty && !loadingSupervisors && !loadingOwnedProposals;\n        return (\n          <>\n            <form onSubmit={handleSubmit}>\n              {errors && errors.global && (\n                <Message className={styles.errorMessage} kind=\"error\">\n                  {errors.global.toString()}\n                </Message>\n              )}\n              <H2>Edit DCC Info</H2>\n              <div className=\"margin-bottom-m margin-top-m\">\n                <InfoSection\n                  className=\"no-margin-top\"\n                  label=\"Contractor Type\"\n                  info={\n                    <SelectField\n                      name=\"type\"\n                      options={selectTypeOptions}\n                      styles={selectStyles}\n                    />\n                  }\n                />\n                <InfoSection\n                  label=\"Domain\"\n                  info={\n                    <SelectField\n                      name=\"domain\"\n                      options={contractorDomains}\n                      styles={selectStyles}\n                    />\n                  }\n                />\n                <InfoSection\n                  label=\"Supervisors\"\n                  isLoading={loadingSupervisors}\n                  info={\n                    <Select\n                      placeholder=\"Select Supervisor\"\n                      value={values.users}\n                      onChange={handleChangeUserSelector}\n                      isMulti\n                      options={supervisorsOptions}\n                      styles={multipleSelectStyles}\n                    />\n                  }\n                  error={supervisorsError}\n                />\n                <InfoSection\n                  label=\"Owned Proposals\"\n                  error={approvedProposalsError}\n                  isLoading={loadingOwnedProposals}\n                  info={\n                    <Select\n                      placeholder=\"Select Proposals\"\n                      value={values.proposals}\n                      onChange={handleChangeOwnedProposals}\n                      isMulti\n                      options={proposalsOptions}\n                      styles={multipleSelectStyles}\n                    />\n                  }\n                />\n              </div>\n              <Button\n                kind={submitEnabled ? \"primary\" : \"disabled\"}\n                loading={isSubmitting}\n                type=\"submit\"\n              >\n                {updated && !submitEnabled\n                  ? \"DCC Info Updated ✓\"\n                  : \"Update DCC Info\"}\n              </Button>\n            </form>\n          </>\n        );\n      }}\n    </Formik>\n  );\n};\n\nexport default ManageDccForm;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { H2, Message, Button, Spinner } from \"pi-ui\";\nimport InfoSection from \"../InfoSection.jsx\";\nimport { typeOptions, getOwnedProposals, getSupervisorsNames } from \"./helpers\";\nimport { useApprovedProposals, useSupervisors, usePolicy } from \"src/hooks\";\nimport { getContractorDomains, getDomainName } from \"src/helpers\";\n\nconst UserDccInfo = ({\n  contractorType,\n  domain,\n  userSupervisors,\n  proposalsOwned,\n  showEdit,\n  onToggleDccEdit,\n  supervisorsError\n}) => {\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n  const {\n    proposalsByToken,\n    isLoading,\n    error: proposalsError\n  } = useApprovedProposals(proposalsOwned, proposalPageSize);\n\n  const ownedProposals = getOwnedProposals(proposalsOwned, proposalsByToken);\n\n  const supervisors = userSupervisors.length\n    ? userSupervisors.join(\", \")\n    : \"No supervisors\";\n  const proposals = ownedProposals.length\n    ? ownedProposals.join(\", \")\n    : \"No owned proposals\";\n  return (\n    <>\n      <H2>DCC Info</H2>\n      <div className=\"margin-top-s margin-bottom-s\">\n        <InfoSection label=\"Contractor Type\" info={contractorType} />\n        <InfoSection label=\"Domain\" info={domain} />\n        <InfoSection\n          label=\"Supervisors\"\n          info={supervisors}\n          error={supervisorsError}\n        />\n        <InfoSection\n          label=\"Owned Proposals\"\n          error={proposalsError}\n          isLoading={isLoading}\n          info={proposals}\n        />\n      </div>\n      {showEdit && (\n        <Button\n          className=\"margin-bottom-m\"\n          onClick={onToggleDccEdit}\n          kind={isLoading ? \"disabled\" : \"primary\"}\n        >\n          {isLoading ? <Spinner invert /> : \"Edit\"}\n        </Button>\n      )}\n    </>\n  );\n};\n\nconst UserContractorInfo = ({\n  githubname,\n  matrixname,\n  contractorcontact,\n  contractorname,\n  contractorlocation,\n  showGitHubName,\n  showEdit,\n  onToggleContractorInfoEdit\n}) => (\n  <>\n    <H2>Contractor Info</H2>\n    <div className=\"margin-top-s\">\n      <InfoSection label=\"Name\" info={contractorname} />\n      {showGitHubName && (\n        <InfoSection label=\"GitHub Username\" info={githubname} />\n      )}\n      <InfoSection label=\"Matrix Name\" info={matrixname} />\n      <InfoSection label=\"Location\" info={contractorlocation} />\n      <InfoSection label=\"Contact\" info={contractorcontact} />\n      {showEdit && <Button onClick={onToggleContractorInfoEdit}>Edit</Button>}\n    </div>\n  </>\n);\n\nconst ManageContractorUserView = ({\n  user,\n  showGitHubName,\n  requireGitHubName,\n  hideDccInfo,\n  hideContractorInfo,\n  showDccForm,\n  showContractorInfoForm,\n  onToggleDccEdit,\n  onToggleContractorInfoEdit\n}) => {\n  const { domain, contractortype, supervisoruserids = [] } = user;\n\n  const { supervisors, error: supervisorsError } = useSupervisors();\n  const {\n    policy: { supporteddomains }\n  } = usePolicy();\n  const contractorDomains = getContractorDomains(supporteddomains);\n\n  return (\n    <>\n      {requireGitHubName && (\n        <Message kind=\"warning\" className=\"margin-bottom-s\">\n          Update your GitHub Username information\n        </Message>\n      )}\n      {!hideDccInfo && (\n        <UserDccInfo\n          contractorType={typeOptions[contractortype]}\n          domain={getDomainName(contractorDomains, domain)}\n          proposalsOwned={user.proposalsowned}\n          userSupervisors={getSupervisorsNames(supervisors, supervisoruserids)}\n          supervisorsError={supervisorsError}\n          showEdit={showDccForm}\n          onToggleDccEdit={onToggleDccEdit}\n        />\n      )}\n      {!hideContractorInfo && (\n        <UserContractorInfo\n          {...{\n            ...user,\n            showGitHubName,\n            showEdit: showContractorInfoForm,\n            onToggleContractorInfoEdit\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nManageContractorUserView.propTypes = {\n  user: PropTypes.object.isRequired,\n  showGitHubName: PropTypes.bool,\n  hideContractorInfo: PropTypes.bool,\n  hideDccInfo: PropTypes.bool\n};\n\nManageContractorUserView.defaultProps = {\n  showGitHubName: false,\n  hideDccInfo: false,\n  hideContractorInfo: false\n};\n\nexport default ManageContractorUserView;\n","import React from \"react\";\nimport { Formik } from \"formik\";\nimport { TextInput, Button, H2 } from \"pi-ui\";\nimport styles from \"./ManageContractor.module.css\";\n\nexport default function EditContractorForm({ onEdit, user, onClose }) {\n  const {\n    matrixname,\n    githubname,\n    contractorname,\n    contractorlocation,\n    contractorcontact\n  } = user;\n\n  const initialValues = {\n    matrixname,\n    githubname,\n    contractorname,\n    contractorlocation,\n    contractorcontact\n  };\n\n  const handleEditContractor = async (\n    values,\n    { resetForm, setSubmitting, setFieldError }\n  ) => {\n    try {\n      await onEdit(values);\n      setSubmitting(false);\n      resetForm();\n      onClose();\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n    }\n  };\n\n  return (\n    <Formik onSubmit={handleEditContractor} initialValues={initialValues}>\n      {({ values, errors, handleChange, handleSubmit, isSubmitting }) => {\n        return (\n          <form onSubmit={handleSubmit}>\n            <H2>Edit Contractor Info</H2>\n            <div className={styles.editContractor}>\n              <TextInput\n                label=\"Contractor Name\"\n                name=\"contractorname\"\n                id=\"contractorname\"\n                value={values.contractorname}\n                error={errors.contractorname}\n                onChange={handleChange}\n              />\n              <TextInput\n                label=\"GitHub Username\"\n                name=\"githubname\"\n                id=\"githubname\"\n                value={values.githubname}\n                error={errors.githubname}\n                onChange={handleChange}\n              />\n              <TextInput\n                label=\"Matrix Name\"\n                name=\"matrixname\"\n                id=\"matrixname\"\n                value={values.matrixname}\n                error={errors.matrixname}\n                onChange={handleChange}\n              />\n              <TextInput\n                label=\"Contractor Location\"\n                name=\"contractorlocation\"\n                id=\"contractorlocation\"\n                value={values.contractorlocation}\n                error={errors.contractorlocation}\n                onChange={handleChange}\n              />\n              <TextInput\n                label=\"Contractor Contact\"\n                name=\"contractorcontact\"\n                id=\"contractorcontact\"\n                value={values.contractorcontact}\n                error={errors.contractorcontact}\n                onChange={handleChange}\n              />\n            </div>\n            <Button type=\"submit\" loading={isSubmitting}>\n              Update Contractor Info\n            </Button>\n          </form>\n        );\n      }}\n    </Formik>\n  );\n}\n","import * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\nimport useUserDetail from \"src/hooks/api/useUserDetail\";\nimport { isUserDeveloper } from \"src/containers/DCC\";\nimport isEmpty from \"lodash/isEmpty\";\n\nexport default function useContractor(userID) {\n  const onUpdateDccInfo = useAction(act.onManageCmsUser);\n  const onUpdateContractorInfo = useAction(act.onEditCmsUser);\n  const { user, isAdmin, loading } = useUserDetail(userID);\n  const isDeveloper = isUserDeveloper(user);\n  const requireGitHubName = isUserDeveloper(user) && isEmpty(user.githubname);\n\n  return {\n    onUpdateDccInfo,\n    onUpdateContractorInfo,\n    user,\n    isAdmin,\n    isDeveloper,\n    requireGitHubName,\n    loading\n  };\n}\n","import React, { useState } from \"react\";\nimport { classNames, Card } from \"pi-ui\";\nimport ManageDccForm from \"./ManageDccForm\";\nimport UserView from \"./UserView\";\nimport EditContractorForm from \"./EditContractorForm\";\nimport useContractor from \"../hooks/useContractor\";\nimport isEmpty from \"lodash/isEmpty\";\n\nconst ManageContractor = ({ userID, isUserPageOwner }) => {\n  const [showContractorInfoForm, setShowContractorInfoForm] = useState(true);\n\n  const {\n    user,\n    isAdmin,\n    onUpdateDccInfo,\n    isDeveloper,\n    onUpdateContractorInfo,\n    requireGitHubName,\n    loading\n  } = useContractor(userID);\n\n  const [showDccForm, setShowDccForm] = useState(isAdmin);\n\n  const onToggleDccEdit = () => setShowDccForm(isAdmin && !showDccForm);\n  const onToggleContractorInfoEdit = () =>\n    setShowContractorInfoForm(!showContractorInfoForm);\n\n  const enableEditMode = isUserPageOwner || isAdmin;\n  const canEditDccInfo = isAdmin && !showDccForm;\n  const canSeeContractorInfo = isUserPageOwner && !showContractorInfoForm;\n\n  return (\n    <Card className={classNames(\"container\", \"margin-bottom-m\")}>\n      {canEditDccInfo && (\n        <div className=\"margin-bottom-m\">\n          <ManageDccForm user={user} onUpdate={onUpdateDccInfo} />\n        </div>\n      )}\n      {!loading && user.isCMS && (\n        <UserView\n          user={user}\n          showGitHubName={isDeveloper || !isEmpty(user.githubname)}\n          requireGitHubName={requireGitHubName && isUserPageOwner}\n          hideDccInfo={canEditDccInfo}\n          hideContractorInfo={canSeeContractorInfo}\n          showDccForm={isAdmin}\n          showContractorInfoForm={isUserPageOwner && showContractorInfoForm}\n          onToggleDccEdit={onToggleDccEdit}\n          onToggleContractorInfoEdit={onToggleContractorInfoEdit}\n          enableEditMode={enableEditMode}\n        />\n      )}\n      {canSeeContractorInfo && (\n        <EditContractorForm\n          onEdit={onUpdateContractorInfo}\n          user={user}\n          onClose={onToggleContractorInfoEdit}\n        />\n      )}\n    </Card>\n  );\n};\n\nexport default ManageContractor;\n","import React, { useState } from \"react\";\nimport {\n  Card,\n  Table,\n  Text,\n  Spinner,\n  H3,\n  Link as PiLink,\n  classNames\n} from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport ExportToCsv from \"src/components/ExportToCsv\";\nimport { useProposalsOwnedBilling } from \"./hooks\";\nimport styles from \"./ProposalsOwned.module.css\";\nimport { usdFormatter } from \"src/utils\";\nimport { MONTHS_LABELS } from \"src/constants\";\nimport groupBy from \"lodash/fp/groupBy\";\n\nconst headers = [\n  \"Username\",\n  \"Date\",\n  \"Domain\",\n  \"Subdomain\",\n  \"Description\",\n  \"Labor\",\n  \"Expenses\",\n  \"Sub Total\"\n];\n\nconst totalReducer = (acc, { lineitem: { expenses, labor }, contractorrate }) =>\n  acc + expenses / 100 + ((labor / 60) * contractorrate) / 100;\n\nconst formatData = ({\n  userid,\n  month,\n  year,\n  username,\n  lineitem: { description, domain, subdomain, labor, expenses },\n  contractorrate\n}) => {\n  expenses = expenses / 100;\n  labor = ((labor / 60) * contractorrate) / 100;\n  return {\n    Username: <Link to={`/user/${userid}`}>{username}</Link>,\n    Date: `${month}/${year}`,\n    Domain: domain,\n    Subdomain: subdomain,\n    Description: description,\n    Labor: usdFormatter.format(labor),\n    Expenses: usdFormatter.format(expenses),\n    Total: usdFormatter.format(labor + expenses)\n  };\n};\n\nconst MonthItems = ({ monthItems }) => {\n  const data = monthItems.map(formatData);\n  const total = monthItems.reduce(totalReducer, 0);\n  return (\n    <>\n      <Table headers={headers} data={data} linesPerPage={50} />\n      <H3 className={styles.totalText}>Total: {usdFormatter.format(total)}</H3>\n    </>\n  );\n};\n\nconst YearItems = ({ year, yearItems }) => {\n  const groupedByMonth = groupBy((el) => el.month, yearItems);\n  const months = Object.keys(groupedByMonth);\n  return months.reverse().map((month) => (\n    <>\n      <H3>\n        {MONTHS_LABELS[month - 1]} {year}\n      </H3>\n      <MonthItems monthItems={groupedByMonth[month]} />\n    </>\n  ));\n};\n\nconst AllItems = ({ groupedByYearItems }) => {\n  const years = Object.keys(groupedByYearItems);\n  return years\n    .reverse()\n    .map((year) => (\n      <YearItems year={year} yearItems={groupedByYearItems[year]} />\n    ));\n};\n\nconst BillingInfo = ({ lineItems }) => {\n  if (lineItems.length === 0)\n    return <H3 className=\"margin-top-m\">No billings for this proposal yet</H3>;\n  const groupedByYear = groupBy((el) => el.year, lineItems);\n  const data = lineItems.map(formatData);\n  const total = lineItems.reduce(totalReducer, 0);\n  return (\n    <div className=\"margin-top-m\">\n      <AllItems groupedByYearItems={groupedByYear} />\n      <ExportToCsv\n        data={data.map(\n          ({\n            Username,\n            Date,\n            Domain,\n            Subdomain,\n            Description,\n            Labor,\n            Expenses,\n            Total\n          }) => ({\n            Username: Username.props.children,\n            Date,\n            Domain,\n            Subdomain,\n            Description,\n            Labor,\n            Expenses,\n            Total\n          })\n        )}\n        fields={[\n          \"Username\",\n          \"Date\",\n          \"Domain\",\n          \"Subdomain\",\n          \"Description\",\n          \"Labor\",\n          \"Expenses\",\n          \"Total\"\n        ]}\n        filename=\"proposal_details.csv\"\n      >\n        <PiLink className=\"cursor-pointer\">Export All To Csv</PiLink>\n      </ExportToCsv>\n      <H3 className={classNames(styles.totalText, \"margin-top-l\")}>\n        Total for this proposal: {usdFormatter.format(total)}\n      </H3>\n    </div>\n  );\n};\n\nconst ProposalTitle = ({ title, onClick }) => (\n  <Text\n    weight=\"bold\"\n    size=\"large\"\n    onClick={onClick}\n    className={styles.proposalTitle}\n  >\n    {title}\n  </Text>\n);\n\nconst ProposalBilling = ({ token, title }) => {\n  const { billingInfo, getProposalBillingInfo } =\n    useProposalsOwnedBilling(token);\n  const [showInfo, setShowInfo] = useState(false);\n  const handleProposalClick = () => {\n    if (!billingInfo) getProposalBillingInfo(token);\n    setShowInfo(!showInfo);\n  };\n  const showBillingInfo = showInfo && billingInfo;\n  const showLoading = showInfo && !billingInfo;\n  return (\n    <Card paddingSize=\"small\" className=\"margin-bottom-m\">\n      <ProposalTitle title={title} onClick={handleProposalClick} />\n      {showBillingInfo && <BillingInfo lineItems={billingInfo.lineitems} />}\n      {showLoading && (\n        <div className=\"margin-top-m\">\n          <Spinner invert />\n        </div>\n      )}\n    </Card>\n  );\n};\n\nexport default ProposalBilling;\n","import * as act from \"src/actions\";\nimport * as sel from \"src/selectors\";\nimport { useSelector, useAction } from \"src/redux\";\nimport { useMemo } from \"react\";\n\nexport function useProposalsOwnedBilling(token) {\n  const billingInfoSelector = useMemo(\n    () => sel.makeGetBillingInfoByToken(token),\n    [token]\n  );\n\n  const billingInfo = useSelector(billingInfoSelector);\n\n  const isLoading = useSelector(sel.isApiRequestingProposalOwnerBilling);\n\n  const getProposalBillingInfo = useAction(act.onFetchProposalBilling);\n\n  return {\n    billingInfo,\n    isLoading,\n    getProposalBillingInfo\n  };\n}\n","import React from \"react\";\nimport ProposalBilling from \"./ProposalBilling\";\nimport useApprovedProposals from \"src/hooks/api/useApprovedProposals\";\nimport { Spinner, H3, Message } from \"pi-ui\";\nimport isEmpty from \"lodash/fp/isEmpty\";\nimport styles from \"./ProposalsOwned.module.css\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst ProposalsOwned = ({ proposalsOwned }) => {\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n  const { proposalsByToken, isLoading, error } = useApprovedProposals(\n    proposalsOwned,\n    proposalPageSize\n  );\n  const loading = (isLoading || isEmpty(proposalsByToken)) && !error;\n\n  return loading ? (\n    <div className={styles.spinnerWrapper}>\n      <Spinner invert />\n    </div>\n  ) : error ? (\n    <Message kind=\"error\">{error.toString()}</Message>\n  ) : (\n    <>\n      {proposalsOwned ? (\n        proposalsOwned.map((p) => {\n          return (\n            <ProposalBilling\n              key={p}\n              token={p}\n              title={proposalsByToken[p.trim()].name}\n            />\n          );\n        })\n      ) : (\n        <H3>No proposals owned</H3>\n      )}\n    </>\n  );\n};\n\nexport default ProposalsOwned;\n","import * as act from \"src/actions\";\nimport * as sel from \"src/selectors\";\nimport { useAction, useSelector } from \"src/redux\";\nimport useFetchMachine from \"src/hooks/utils/useFetchMachine\";\nimport isEqual from \"lodash/isEqual\";\n\nconst ERROR_CODE_INVALID_PARAMS = 77;\n\nconst isInvalidParamsError = (error) =>\n  error?.errorcode === ERROR_CODE_INVALID_PARAMS;\n\nexport function useUserTotpVerified() {\n  const hasTotp = useSelector(sel.userTotpVerified);\n  const onSetHasTotp = useAction(act.onSetHasTotp);\n  return { hasTotp, onSetHasTotp };\n}\n\nexport default function useTotp() {\n  const onSetTotp = useAction(act.onSetTotp);\n  const onVerifyTotp = useAction(act.onVerifyTotp);\n  const userTotp = useSelector(sel.userTotp);\n  const { hasTotp } = useUserTotpVerified();\n\n  const [state, send, { VERIFY, REJECT, RESOLVE, FETCH }] = useFetchMachine({\n    actions: {\n      initial: () => {\n        if (hasTotp) {\n          send(RESOLVE, { alreadySet: true, error: null });\n        } else if (!userTotp) {\n          onSetTotp()\n            .then(() => send(VERIFY))\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        }\n        return send(RESOLVE, { totp: userTotp });\n      },\n      load: () => {\n        if (!userTotp) {\n          return;\n        }\n        return send(RESOLVE, { totp: userTotp });\n      },\n      error: (err) => {\n        if (isInvalidParamsError(err) && !state.alreadySet) {\n          return send(RESOLVE, { alreadySet: true, error: null });\n        }\n        return;\n      },\n      done: () => {\n        if (!isEqual(userTotp, state.totp)) {\n          return send(RESOLVE, { totp: userTotp });\n        }\n        return;\n      }\n    },\n    initialValues: {\n      status: \"idle\",\n      loading: true,\n      alreadySet: false,\n      verifying: true\n    }\n  });\n\n  return {\n    ...state,\n    onSetTotp,\n    onVerifyTotp,\n    loading: state.loading || state.verifying\n  };\n}\n","import React from \"react\";\nimport styles from \"./Totp.module.css\";\nimport { H2, P, CopyableText } from \"pi-ui\";\n\nconst SetTotp = ({ totp = {}, isAlreadySet }) =>\n  !isAlreadySet ? (\n    <div className=\"margin-bottom-m\" data-testid=\"totp-set-wrapper\">\n      <H2>Set Two-Factor Authentication</H2>\n      <div className={styles.setContainer}>\n        <div className={styles.qrcode}>\n          {totp.image && (\n            <img src={`data:image/png;base64, ${totp.image}`} alt={totp.key} />\n          )}\n        </div>\n        <div className={styles.instructions}>\n          <P>\n            You can activate 2FA on your account by following the instructions\n            below. Once you activate 2FA on your account,{\" \"}\n            <b>you'll be required to enter your code every time you login.</b>\n          </P>\n          <P>\n            You will be able to deactivate the 2FA after you setup the keys.\n          </P>\n          <P>\n            1 - <b>Save the backup key below</b>. If you did not write down or\n            copy this backup key during 2FA setup, there's no way for you to\n            view it later.\n          </P>\n          <div className={styles.copyableKey}>\n            {totp.key && <CopyableText id=\"totp-key\">{totp.key}</CopyableText>}\n          </div>\n          <P>\n            2 - Scan the QR Code with a TOTP Authenticator{\" \"}\n            <span className={styles.totpAuthenticators}>\n              (Authy, Google Authenticator, FreeOTP, YubiKey, etc)\n            </span>\n          </P>\n          <P>\n            3 - Verify the 6-numbers code given by the authenticator using the\n            input below to activate the 2FA\n          </P>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <div className=\"margin-bottom-m\">\n      <H2>Two-Factor Authentication</H2>\n      <P>You have enabled the Two-Factor Authentication in your account.</P>\n    </div>\n  );\n\nexport default SetTotp;\n","import React from \"react\";\nimport { Card, Spinner, P } from \"pi-ui\";\nimport useTotp, { useUserTotpVerified } from \"../hooks/useTotp\";\nimport VerifyTotp from \"./Verify\";\nimport SetTotp from \"./Set\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\n\nconst Totp = () => {\n  const { loading, totp, onVerifyTotp, onSetTotp } = useTotp();\n  const { hasTotp, onSetHasTotp } = useUserTotpVerified();\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleResetTotp = (code, cb) => () =>\n    onSetTotp(code).then(() => {\n      onSetHasTotp(false);\n      cb();\n    });\n\n  const handleVerifyTotp = (code, cb) => () =>\n    onVerifyTotp(code).then(() => {\n      onSetHasTotp(true);\n      cb();\n    });\n\n  const handleOpenTOTPModal =\n    (shouldShowResetInstructions = true) =>\n    (code, cb) => {\n      // if TOTP is NOT set on the account, show the instructions to SET\n      const verifyProps = {\n        title: \"Verify TOTP\",\n        message: (\n          <P>\n            You are about to activate the 2FA on your account.{\" \"}\n            <b>\n              Please remember to save the backup key. This key will be used in\n              case you lose access to your TOTP authenticator.{\" \"}\n            </b>\n            The backup key should be treated the same way you treat a password\n            and should not be stored digitally!\n          </P>\n        ),\n        successTitle: \"2FA activated\",\n        successMessage: (\n          <P>\n            <b>Your account now has the 2FA enabled.</b> You'll be required to\n            inform the code generated by the authenticator app everytime you\n            want to perform a login action.\n          </P>\n        ),\n        onClose: handleCloseModal,\n        onSubmit: handleVerifyTotp(code, cb)\n      };\n      // if TOTP is set on the account, show the instructions to RESET\n      const resetProps = {\n        title: \"Reset TOTP\",\n        message:\n          \"You are about to delete the 2FA on your account. Please keep in mind that you will not be required to type the code anymore.\",\n        successTitle: \"Reset 2FA\",\n        successMessage: <b>You have disabled the 2FA on your account.</b>,\n        onClose: handleCloseModal,\n        onSubmit: handleResetTotp(code, cb)\n      };\n\n      handleOpenModal(\n        ModalConfirm,\n        shouldShowResetInstructions ? resetProps : verifyProps\n      );\n    };\n\n  return loading && !hasTotp ? (\n    <div className=\"justify-center\">\n      <Spinner invert />\n    </div>\n  ) : (\n    <Card paddingSize=\"small\">\n      <SetTotp totp={totp} isAlreadySet={hasTotp} />\n      <VerifyTotp\n        onVerify={handleOpenTOTPModal(hasTotp)}\n        title={hasTotp ? \"Reset 2FA\" : \"Verify Code\"}\n        buttonLabel={hasTotp ? \"Reset\" : \"Verify\"}\n      />\n    </Card>\n  );\n};\n\nexport default Totp;\n","import { Link, useMediaQuery } from \"pi-ui\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport ModalChangeUsername from \"src/components/ModalChangeUsername\";\nimport { PUB_KEY_STATUS_LOADED, PUB_KEY_STATUS_LOADING } from \"src/constants\";\nimport DraftProposals from \"src/containers/Proposal/User/Drafts\";\nimport SubmittedProposals from \"src/containers/Proposal/User/Submitted\";\nimport AllInvoices from \"src/containers/Invoice/List\";\nimport useUserIdentity from \"src/hooks/api/useUserIdentity\";\nimport useQueryStringWithIndexValue from \"src/hooks/utils/useQueryStringWithIndexValue\";\nimport useUserDetail from \"src/hooks/api/useUserDetail\";\nimport { useConfig } from \"src/containers/Config\";\nimport { existing, myPubKeyHex } from \"src/lib/pki\";\nimport Drafts from \"./Drafts\";\nimport Account from \"./Account\";\nimport Credits from \"./Credits\";\nimport styles from \"./Detail.module.css\";\nimport { tabValues } from \"./helpers\";\nimport useChangeUsername from \"./hooks/useChangeUsername\";\nimport Identity from \"./Identity\";\nimport Preferences from \"./Preferences\";\nimport ManageContractor from \"./ManageContractor\";\nimport ProposalsOwned from \"./ProposalsOwned\";\nimport Totp from \"../Totp\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst getTabComponents = ({ user, ...rest }) => {\n  const mapTabValueToComponent = {\n    [tabValues.IDENTITY]: <Identity key=\"tab-identity\" user={user} {...rest} />,\n    [tabValues.ACCOUNT]: <Account key=\"tab-account\" {...user} {...rest} />,\n    [tabValues.PREFERENCES]: (\n      <Preferences user={user} key=\"tab-preferences\" {...rest} />\n    ),\n    [tabValues.CREDITS]: <Credits key=\"tab-credits\" user={user} {...rest} />,\n    [tabValues.SUBMITTED_PROPOSALS]: (\n      <SubmittedProposals key=\"tab-submitted-proposals\" userID={user.userid} />\n    ),\n    [tabValues.DRAFT_PROPOSALS]: <DraftProposals key=\"tab-draft-proposals\" />,\n    [tabValues.INVOICES]: <AllInvoices userID={user.userid} />,\n    [tabValues.DRAFTS]: <Drafts key=\"tab-invoices\" />,\n    [tabValues.MANAGE_DCC]: <ManageContractor userID={user.userid} {...rest} />,\n    [tabValues.PROPOSALS_OWNED]: (\n      <ProposalsOwned proposalsOwned={user.proposalsowned} />\n    ),\n    [tabValues.TOTP]: <Totp />\n  };\n  return mapTabValueToComponent;\n};\n\nconst UserDetail = ({\n  TopBanner,\n  PageDetails,\n  Main,\n  Title,\n  Tabs,\n  Tab,\n  match\n}) => {\n  const userID = match.params.userid;\n  const { userPubkey, identityImportSuccess } = useUserIdentity();\n  const { user, isAdmin, currentUserID } = useUserDetail(userID);\n\n  const {\n    recordType,\n    enablePaywall,\n    constants: { RECORD_TYPE_INVOICE, RECORD_TYPE_PROPOSAL }\n  } = useConfig();\n\n  const isUserPageOwner = user && currentUserID === user.userid;\n  const isAdminOrTheUser = user && (isAdmin || currentUserID === user.userid);\n  const proposalsOwned = user && user.proposalsowned;\n  const ownsProposals = proposalsOwned && proposalsOwned.length > 0;\n\n  const tabLabels = useMemo(() => {\n    const isTabDisabled = (tabLabel) => {\n      if (tabLabel === tabValues.PREFERENCES && !isUserPageOwner) return true;\n      if (\n        tabLabel === tabValues.CREDITS &&\n        (!isAdminOrTheUser || !enablePaywall)\n      )\n        return true;\n      if (tabLabel === tabValues.MANAGE_DCC && !isAdminOrTheUser) return true;\n      if (tabLabel === tabValues.INVOICES && !isAdmin) return true;\n      if (tabLabel === tabValues.DRAFT_PROPOSALS && !isUserPageOwner)\n        return true;\n      if (tabLabel === tabValues.DRAFTS && !isUserPageOwner) return true;\n      if (\n        tabLabel === tabValues.PROPOSALS_OWNED &&\n        (!isUserPageOwner || !ownsProposals)\n      )\n        return true;\n      if (tabLabel === tabValues.TOTP && !isUserPageOwner) return true;\n      return false;\n    };\n    const filterByRecordType = (tabLabel) => {\n      if (recordType === RECORD_TYPE_INVOICE) {\n        return (\n          tabLabel !== tabValues.SUBMITTED_PROPOSALS &&\n          tabLabel !== tabValues.DRAFT_PROPOSALS &&\n          tabLabel !== tabValues.PREFERENCES &&\n          tabLabel !== tabValues.CREDITS\n        );\n      }\n      if (recordType === RECORD_TYPE_PROPOSAL) {\n        return (\n          tabLabel !== tabValues.MANAGE_DCC &&\n          tabLabel !== tabValues.DRAFTS &&\n          tabLabel !== tabValues.INVOICES &&\n          tabLabel !== tabValues.PROPOSALS_OWNED\n        );\n      }\n      return true;\n    };\n    return [\n      tabValues.IDENTITY,\n      tabValues.ACCOUNT,\n      tabValues.PREFERENCES,\n      tabValues.CREDITS,\n      tabValues.SUBMITTED_PROPOSALS,\n      tabValues.DRAFT_PROPOSALS,\n      tabValues.INVOICES,\n      tabValues.DRAFTS,\n      tabValues.MANAGE_DCC,\n      tabValues.PROPOSALS_OWNED,\n      tabValues.TOTP\n    ].filter((tab) => !isTabDisabled(tab) && filterByRecordType(tab));\n  }, [\n    isUserPageOwner,\n    isAdminOrTheUser,\n    enablePaywall,\n    isAdmin,\n    ownsProposals,\n    recordType,\n    RECORD_TYPE_INVOICE,\n    RECORD_TYPE_PROPOSAL\n  ]);\n\n  const [index, onSetIndex] = useQueryStringWithIndexValue(\"tab\", 0, tabLabels);\n\n  const { username, onChangeUsername, validationSchema } = useChangeUsername();\n\n  const [loadingKey, setKeyAsLoaded] = useState(PUB_KEY_STATUS_LOADING);\n\n  const [pubkey, setPubkey] = useState(\"\");\n  const refreshPubKey = useCallback(\n    (isSubscribed) =>\n      existing(currentUserID).then(() => {\n        myPubKeyHex(currentUserID)\n          .then((pubkey) => {\n            if (isSubscribed) {\n              setPubkey(pubkey);\n              setKeyAsLoaded(PUB_KEY_STATUS_LOADED);\n            }\n          })\n          .catch(() => {\n            if (isSubscribed) {\n              setKeyAsLoaded(PUB_KEY_STATUS_LOADED);\n            }\n          });\n      }),\n    [currentUserID, setPubkey]\n  );\n  useEffect(() => {\n    let isSubscribed = true;\n    if (userPubkey !== pubkey || identityImportSuccess)\n      refreshPubKey(isSubscribed);\n    return () => (isSubscribed = false);\n  }, [refreshPubKey, userPubkey, pubkey, identityImportSuccess]);\n\n  const isMobileScreen = useMediaQuery(\"(max-width:560px)\");\n\n  const currentTabComponent =\n    user &&\n    getTabComponents({\n      user,\n      isAdminOrTheUser,\n      isUserPageOwner,\n      isAdmin,\n      loadingKey,\n      pubkey\n    })[tabLabels[index]];\n\n  const tabs = useMemo(\n    () => (\n      <Tabs\n        onSelectTab={onSetIndex}\n        className={isMobileScreen ? \"padding-bottom-s\" : \"\"}\n        activeTabIndex={index}\n        mode={isMobileScreen ? \"dropdown\" : \"horizontal\"}\n      >\n        {tabLabels.map((label) => (\n          <Tab key={`tab-${label}`} label={label} />\n        ))}\n      </Tabs>\n    ),\n    [tabLabels, onSetIndex, isMobileScreen, index]\n  );\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenChangeUsernameModal = (e) => {\n    e.preventDefault();\n    handleOpenModal(ModalChangeUsername, {\n      validationSchema: validationSchema,\n      onChangeUsername: onChangeUsername,\n      onClose: handleCloseModal\n    });\n  };\n\n  return user ? (\n    <>\n      <TopBanner>\n        <PageDetails\n          title={\n            <div className={styles.titleWrapper}>\n              <Title>\n                {isUserPageOwner ? username || user.username : user.username}\n              </Title>\n              {isUserPageOwner && (\n                <Link\n                  href=\"#\"\n                  onClick={handleOpenChangeUsernameModal}\n                  className={styles.titleLink}\n                >\n                  Change Username\n                </Link>\n              )}\n            </div>\n          }\n          subtitle={user.email}\n          actionsContent={null}\n        >\n          {tabs}\n        </PageDetails>\n      </TopBanner>\n      <Main fillScreen className=\"main\">\n        {currentTabComponent}\n      </Main>\n    </>\n  ) : null;\n};\n\nexport default withRouter(UserDetail);\n","import * as act from \"src/actions\";\nimport useValidationSchema from \"src/hooks/api/useValidationSchema\";\nimport { useAction, useSelector } from \"src/redux\";\nimport * as sel from \"src/selectors\";\nimport { changeUsernameValidationSchema } from \"../validation\";\n\nexport default function useChangeUsername() {\n  const username = useSelector(sel.currentUserUsername);\n  const onChangeUsername = useAction(act.onSaveChangeUsername);\n  const validationSchema = useValidationSchema(changeUsernameValidationSchema);\n\n  return {\n    username,\n    onChangeUsername,\n    validationSchema\n  };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport UserDetail from \"src/containers/User/Detail\";\n\nconst PageUserDetail = () => {\n  return (\n    <MultipleContentPage>\n      {(props) => <UserDetail {...props} />}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageUserDetail;\n","import React from \"react\";\nimport { Switch, withRouter } from \"react-router-dom\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport {\n  Route,\n  AdminAuthenticatedRoute,\n  AuthenticatedRoute\n} from \"src/containers/Routes\";\nimport commonRoutes from \"./commonRoutes\";\nimport PageNotFound from \"./NotFound\";\nimport PageProposalDetail from \"./Proposals/Detail\";\nimport PageProposalsVettedList from \"./Proposals/VettedList\";\nimport PageProposalsAdmin from \"./Proposals/AdminList\";\nimport PageProposalNew from \"./Proposals/New\";\nimport PageProposalEdit from \"./Proposals/Edit\";\nimport PageProposalRaw from \"./Proposals/Raw\";\nimport useOnboardModal from \"src/hooks/utils/useOnboardModal\";\nimport PageUserDetail from \"./User/Detail\";\nimport { LIST_HEADER_ADMIN, LIST_HEADER_VETTED } from \"src/constants\";\n\nconst Routes = ({ location }) => {\n  useOnboardModal();\n  return (\n    <TransitionGroup>\n      <CSSTransition key={location.key} classNames=\"fade\" timeout={300}>\n        <Switch location={location}>\n          <Route\n            path=\"/\"\n            title={LIST_HEADER_VETTED}\n            exact\n            component={PageProposalsVettedList}\n          />\n          {commonRoutes}\n          {/* User Route */}\n          <Route\n            path=\"/user/:userid\"\n            title=\"User Detail\"\n            exact\n            key=\"user-detail-route\"\n            component={PageUserDetail}\n          />\n          {/* Record routes */}\n          <AdminAuthenticatedRoute\n            path=\"/admin/records\"\n            title={LIST_HEADER_ADMIN}\n            exact\n            component={PageProposalsAdmin}\n          />\n          <AuthenticatedRoute\n            path=\"/record/new\"\n            title=\"New Proposal\"\n            exact\n            render={PageProposalNew}\n          />\n          <Route\n            path=\"/record/:token\"\n            title=\"Proposal Detail\"\n            exact\n            component={PageProposalDetail}\n          />\n          <Route\n            path=\"/record/:token/raw\"\n            title=\"Proposal Detail\"\n            exact\n            component={PageProposalRaw}\n          />\n          <Route\n            path=\"/record/:token/comments/:commentid\"\n            title=\"Proposal Detail\"\n            exact\n            component={PageProposalDetail}\n          />\n          <AuthenticatedRoute\n            path=\"/record/:token/edit\"\n            title=\"Edit Proposal\"\n            exact\n            render={PageProposalEdit}\n          />\n          <Route title=\"Page Not Found\" path=\"*\" component={PageNotFound} />\n        </Switch>\n      </CSSTransition>\n    </TransitionGroup>\n  );\n};\n\nexport default withRouter(Routes);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Checkbox } from \"pi-ui\";\nimport get from \"lodash/get\";\nimport { FormikConsumer, Field } from \"formik\";\n\nconst CheckboxField = ({ name, label }) => {\n  return (\n    <FormikConsumer>\n      {({ values, setFieldValue }) => {\n        const handleCheckboxChange = (event) => {\n          setFieldValue(name, event.target.checked);\n        };\n        return (\n          <Field\n            component={Checkbox}\n            checked={get(values, name)}\n            onChange={handleCheckboxChange}\n            id={`check-${name}`}\n            name={name}\n            label={label}\n          />\n        );\n      }}\n    </FormikConsumer>\n  );\n};\n\nCheckboxField.propTypes = {\n  name: PropTypes.string,\n  label: PropTypes.string\n};\n\nexport default CheckboxField;\n","import React, { useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Dropdown, DropdownItem, useMediaQuery } from \"pi-ui\";\nimport CheckboxField from \"../CheckboxField\";\nimport styles from \"./CheckboxGroupField.module.css\";\n\nconst CheckboxGroupField = ({ groupName, options }) => {\n  const mobile = useMediaQuery(\"(max-width: 760px)\");\n\n  const fields = useMemo(() => {\n    const getCheckBoxName = (name) => `${groupName}.${name}`;\n    return options.map((op, idx) => (\n      <CheckboxField\n        key={`check-${idx}`}\n        name={getCheckBoxName(op.name)}\n        label={op.label}\n      />\n    ));\n  }, [options, groupName]);\n\n  const renderList = useCallback((elements) => {\n    return (\n      <ul className={styles.groupList}>\n        {elements.map((el, idx) => (\n          <li key={`list-item-${idx}`} className={styles.groupListItem}>\n            {el}\n          </li>\n        ))}\n      </ul>\n    );\n  }, []);\n\n  const renderDropdown = useCallback((elements) => {\n    return (\n      <Dropdown\n        closeOnItemClick={false}\n        title=\"Filter by status\"\n        className={styles.groupDropdown}\n      >\n        {elements.map((el, idx) => (\n          <DropdownItem\n            key={`checkbox-${idx}`}\n            className={styles.groupDropdownItem}\n          >\n            {el}\n          </DropdownItem>\n        ))}\n      </Dropdown>\n    );\n  }, []);\n\n  return mobile ? renderDropdown(fields) : renderList(fields);\n};\n\nCheckboxGroupField.propTypes = {\n  groupName: PropTypes.string.isRequired,\n  options: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default CheckboxGroupField;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Text, classNames, Checkbox, DatePicker } from \"pi-ui\";\nimport { FormikConsumer } from \"formik\";\nimport styles from \"./MonthPickerField.module.css\";\nimport useBooleanState from \"src/hooks/utils/useBooleanState\";\nimport { MONTHS_LABELS } from \"src/constants\";\n\nconst isSecondSelection = (index) => index === 1;\nconst isRange = (values) => values instanceof Array;\n\nconst makeText = (m) => {\n  if (m && m.year && m.month) {\n    return `${MONTHS_LABELS[m.month - 1]} ${m.year}`;\n  }\n  if (isRange(m)) {\n    const firstDateLabel = m[0]\n      ? `${MONTHS_LABELS[m[0].month - 1]} ${m[0].year}`\n      : \"\";\n    const secondDateLabel = m[1]\n      ? `${MONTHS_LABELS[m[1].month - 1]} ${m[1].year}`\n      : \"\";\n    return firstDateLabel === secondDateLabel\n      ? firstDateLabel\n      : `${firstDateLabel} - ${secondDateLabel}`;\n  }\n  return \"?\";\n};\n\nconst Arrow = ({ isOpen }) => {\n  return (\n    <div className={isOpen ? styles.arrowAnchorOpen : styles.arrowAnchor} />\n  );\n};\n\nconst MonthPickerField = ({\n  name,\n  label,\n  years,\n  readOnly,\n  toggleable,\n  className,\n  multiChoice\n}) => {\n  const [isDisabled, setDisabled] = useState(false);\n  const [isOpen, openPicker, closePicker] = useBooleanState(false);\n  const togglePicker = () => {\n    if (!isOpen) {\n      openPicker();\n    } else {\n      closePicker();\n    }\n  };\n\n  return (\n    <FormikConsumer>\n      {({ setFieldValue, values, initialValues }) => {\n        const onChange = (year, month, idx) => {\n          const selectedDate = { year, month };\n          if (!year || !month) {\n            closePicker();\n            return;\n          }\n          if (!multiChoice) {\n            setFieldValue(name, { year, month });\n            closePicker();\n            return;\n          }\n          if (values[name].length) {\n            const newValues = [...values[name]];\n            newValues[idx] = { year, month };\n            setFieldValue(name, newValues);\n            return;\n          } else {\n            setFieldValue(name, [selectedDate, selectedDate]);\n          }\n          if (isSecondSelection(idx)) {\n            closePicker();\n            return;\n          }\n        };\n\n        const handleToggle = () => {\n          const newValue = !isDisabled;\n          setDisabled(newValue);\n          if (newValue) {\n            setFieldValue(name, { year: \"\", month: \"\" });\n          } else {\n            setFieldValue(name, initialValues[name]);\n          }\n        };\n\n        return (\n          <div className={className}>\n            <div style={{ display: \"flex\" }}>\n              {toggleable && (\n                <Checkbox\n                  id=\"checkMonth\"\n                  checked={!isDisabled}\n                  onChange={handleToggle}\n                />\n              )}\n              <Text color=\"gray\">{label}</Text>\n            </div>\n            {isDisabled ? (\n              <span className=\"cursor-not-allowed\">Any</span>\n            ) : (\n              <DatePicker\n                show={isOpen && !readOnly}\n                isMonthsMode={true}\n                isRange={multiChoice}\n                years={years}\n                value={values[name]}\n                lang={MONTHS_LABELS}\n                onChange={onChange}\n              >\n                <span\n                  className={classNames(\n                    styles.valueWrapper,\n                    readOnly && \"cursor-not-allowed\"\n                  )}\n                  onClick={togglePicker}\n                >\n                  {makeText(values[name])}\n                  {!readOnly && <Arrow isOpen={isOpen} />}\n                </span>\n              </DatePicker>\n            )}\n          </div>\n        );\n      }}\n    </FormikConsumer>\n  );\n};\n\nMonthPickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  year: PropTypes.object,\n  readOnly: PropTypes.bool,\n  className: PropTypes.string\n};\n\nMonthPickerField.defaultProps = {\n  readOnly: false\n};\n\nexport default MonthPickerField;\n","import React, { useState } from \"react\";\nimport { classNames, Select } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport { useReactiveSearchUser } from \"./hooks\";\nimport styles from \"./SearchSelector.module.css\";\n\nconst SearchSelector = ({ onChange, value, className, styles: extStyles }) => {\n  const [inputValue, setInputValue] = useState(\"\");\n  const { results } = useReactiveSearchUser(inputValue, inputValue);\n  const options = results.map((result) => ({\n    value: result.id,\n    label: `${result.username} | ${result.email}`\n  }));\n  return (\n    <Select\n      placeholder=\"Search by User\"\n      className={classNames(styles.select, className)}\n      value={value}\n      onInputChange={(newV) => setInputValue(newV)}\n      onChange={onChange}\n      isMulti\n      options={options}\n      styles={extStyles}\n      isSearchable\n      noOptionsMessage={() =>\n        inputValue === \"\"\n          ? \"Insert a username or email\"\n          : \"No options available\"\n      }\n      escapeClearsValue\n    />\n  );\n};\n\nSearchSelector.propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.array,\n  className: PropTypes.string,\n  styles: PropTypes.object\n};\n\nexport default SearchSelector;\n","import React, { useEffect } from \"react\";\nimport { Formik, Form } from \"formik\";\nimport CheckboxGroupField from \"src/components/CheckboxGroupField\";\nimport MonthPickerField from \"src/components/MonthPickerField\";\nimport {\n  getInvoiceMinMaxYearAndMonth,\n  getPreviousMonthsRange\n} from \"src/containers/Invoice\";\nimport styles from \"./InvoiceFilterForm.module.css\";\nimport UserSearchSelect from \"src/containers/User/Search/SearchSelector\";\nimport { Link } from \"pi-ui\";\n\nconst defaultInitialValues = () => ({\n  date: getPreviousMonthsRange(6),\n  users: [],\n  filters: {\n    all: true,\n    unreviewed: false,\n    disputed: false,\n    approved: false,\n    rejected: false,\n    paid: false\n  }\n});\n\nconst InvoiceFilterForm = ({\n  onChange,\n  children,\n  disableUserFilter,\n  isAdminPage,\n  onSubmit = () => {}\n}) => (\n  <Formik initialValues={defaultInitialValues()} onSubmit={onSubmit}>\n    {(formikProps) => {\n      const { values, setFieldValue } = formikProps;\n      const handleChangeUserSelector = (options) => {\n        setFieldValue(\"users\", options);\n      };\n      const handleLastMonths = (length) => (e) => {\n        e && e.preventDefault();\n        setFieldValue(\"date\", getPreviousMonthsRange(length));\n      };\n      const filterOptions = [\n        { name: \"all\", label: \"All\" },\n        { name: \"unreviewed\", label: \"Unreviewed\" },\n        { name: \"disputed\", label: \"Disputed\" },\n        { name: \"approved\", label: \"Approved\" },\n        { name: \"rejected\", label: \"Rejected\" },\n        { name: \"paid\", label: \"Paid\" }\n      ];\n      const adminFilterOptions = [...filterOptions];\n      // Push 'all' options to last position of the array\n      adminFilterOptions.push(adminFilterOptions.shift());\n      return (\n        <>\n          <Form className={styles.form}>\n            <div className={styles.topFilters}>\n              <MonthPickerField\n                years={getInvoiceMinMaxYearAndMonth()}\n                name=\"date\"\n                label=\"By Date\"\n                toggleable\n                multiChoice\n                className={styles.monthPicker}\n              />\n              <div className={styles.checkboxesWrapper}>\n                <CheckboxGroupField\n                  groupName=\"filters\"\n                  options={isAdminPage ? adminFilterOptions : filterOptions}\n                />\n              </div>\n            </div>\n            <div className={styles.presetDates}>\n              Last:\n              <Link onClick={handleLastMonths(3)} href=\"\">\n                3 months\n              </Link>\n              <Link onClick={handleLastMonths(6)} href=\"\">\n                6 months\n              </Link>\n              <Link onClick={handleLastMonths(12)} href=\"\">\n                12 months\n              </Link>\n            </div>\n            {!disableUserFilter && (\n              <UserSearchSelect\n                onChange={handleChangeUserSelector}\n                className={styles.selector}\n                value={values.users}\n              />\n            )}\n            <HookOnFormChange formikProps={formikProps} onChange={onChange} />\n            <OnChangeFiltersModifier formikProps={formikProps} />\n          </Form>\n          {children && children(values)}\n        </>\n      );\n    }}\n  </Formik>\n);\n\nconst HookOnFormChange = ({ formikProps, onChange }) => {\n  useEffect(() => {\n    onChange(formikProps.values);\n  }, [formikProps.values, onChange]);\n  return null;\n};\n\nconst OnChangeFiltersModifier = ({ formikProps }) => {\n  const {\n    values: { filters },\n    setFieldValue\n  } = formikProps;\n  const { all, unreviewed, disputed, approved, rejected, paid } = filters;\n  useEffect(() => {\n    if (unreviewed || disputed || approved || rejected || paid) {\n      setFieldValue(\"filters.all\", false);\n    }\n  }, [unreviewed, disputed, approved, rejected, paid, setFieldValue]);\n\n  useEffect(() => {\n    if (all) {\n      setFieldValue(\"filters\", defaultInitialValues().filters);\n    }\n  }, [all, setFieldValue]);\n  return null;\n};\n\nexport default InvoiceFilterForm;\n","import { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  INVOICE_STATUS_NEW,\n  INVOICE_STATUS_UPDATED,\n  INVOICE_STATUS_DISPUTED,\n  INVOICE_STATUS_REJECTED,\n  INVOICE_STATUS_APPROVED,\n  INVOICE_STATUS_PAID\n} from \"src/containers/Invoice\";\nimport flow from \"lodash/fp/flow\";\nimport filter from \"lodash/fp/filter\";\n\nconst FilterInvoices = ({ invoices, children, filterValues }) => {\n  const { date, filters, users } = filterValues;\n  const filterByDate = useCallback(\n    filter((invoice) => {\n      if (!date || !date.month || !date.year) return invoice;\n      if (date.month === \"all\") return invoice.input.year === date.year;\n      return (\n        invoice.input.month === date.month && invoice.input.year === date.year\n      );\n    }),\n    [date]\n  );\n\n  const filterByRange = useCallback(\n    filter((invoice) => {\n      if (!date) return invoice;\n      if (!(date.length && date.length > 1)) return invoice;\n      const [firstDateSelected, secondDateSelected] = date;\n      if (!firstDateSelected || !secondDateSelected) return invoices;\n      const first = new Date(\n        firstDateSelected.year,\n        firstDateSelected.month\n      ).getTime();\n      const second = new Date(\n        secondDateSelected.year,\n        secondDateSelected.month\n      ).getTime();\n      const invoiceDate = new Date(\n        invoice.input.year,\n        invoice.input.month\n      ).getTime();\n\n      return invoiceDate >= first && invoiceDate <= second;\n    }),\n    [date]\n  );\n\n  const filterByUserID = useCallback(\n    filter((invoice) =>\n      !users || !users.length\n        ? invoice\n        : users.find((user) => user.value === invoice.userid)\n    ),\n    [users]\n  );\n\n  const filterByStatus = useCallback(\n    filter((invoice) => {\n      if (!filters || filters.all) return true;\n\n      switch (invoice.status) {\n        case INVOICE_STATUS_NEW:\n        case INVOICE_STATUS_UPDATED:\n          return filters.unreviewed;\n        case INVOICE_STATUS_DISPUTED:\n          return filters.disputed;\n        case INVOICE_STATUS_APPROVED:\n          return filters.approved;\n        case INVOICE_STATUS_REJECTED:\n          return filters.rejected;\n        case INVOICE_STATUS_PAID:\n          return filters.paid;\n        default:\n          return false;\n      }\n    }),\n    [filters]\n  );\n\n  const filteredInvoices = flow(\n    filterByStatus,\n    filterByDate,\n    filterByRange,\n    filterByUserID\n  )(invoices);\n\n  return children && children(filteredInvoices);\n};\n\nFilterInvoices.propTypes = {\n  invoices: PropTypes.array,\n  children: PropTypes.func.isRequired,\n  filterValues: PropTypes.object.isRequired\n};\n\nFilterInvoices.defaultProps = {\n  invoices: []\n};\n\nexport default FilterInvoices;\n","import React, { useCallback, useState } from \"react\";\nimport { useUserInvoices } from \"./hooks\";\nimport { Spinner, Message } from \"pi-ui\";\nimport Invoice from \"src/components/Invoice\";\nimport Link from \"src/components/Link\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\nimport {\n  InvoiceFilterForm,\n  FilterInvoices\n} from \"src/components/InvoiceFilters\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport useContractor from \"src/containers/User/Detail/hooks/useContractor\";\nimport styles from \"./List.module.css\";\n\nconst ListUserInvoices = ({\n  TopBanner,\n  PageDetails,\n  Main,\n  DefaultNewButton\n}) => {\n  const { loading, invoices } = useUserInvoices();\n  const { requireGitHubName, user } = useContractor();\n  const [filters, setFilters] = useState({});\n\n  const renderInvoice = useCallback(\n    (invoice) => (\n      <Invoice\n        key={`invoice-${invoice.censorshiprecord.token}`}\n        invoice={invoice}\n      />\n    ),\n    []\n  );\n\n  const handleFiltersChange = useCallback(\n    (values) => {\n      setFilters(values);\n    },\n    [setFilters]\n  );\n\n  const renderEmptyMessage = useCallback(\n    (filteredInvoices) => {\n      return (\n        !filteredInvoices.length && (\n          <HelpMessage>\n            {invoices.length\n              ? \"There are no invoices matching the selected filters\"\n              : \"You don't have any invoices yet\"}\n          </HelpMessage>\n        )\n      );\n    },\n    [invoices]\n  );\n\n  const renderInvoices = useCallback(\n    (invoices) => invoices.map(renderInvoice),\n    [renderInvoice]\n  );\n\n  return (\n    <AdminInvoiceActionsProvider>\n      <TopBanner>\n        <PageDetails\n          title=\"My Invoices\"\n          actionsContent={\n            <>\n              {user && user.proposalsowned && user.proposalsowned.length > 0 && (\n                <Link\n                  className=\"cursor-pointer\"\n                  to={`/user/${user.userid}?tab=proposals owned`}\n                >\n                  Proposals owned\n                </Link>\n              )}\n              <DefaultNewButton />\n            </>\n          }\n        >\n          <InvoiceFilterForm onChange={handleFiltersChange} disableUserFilter />\n        </PageDetails>\n      </TopBanner>\n      <Main fillScreen>\n        {requireGitHubName && (\n          <Message kind=\"warning\" className=\"margin-bottom-m\">\n            Update your GitHub Username information on Account > Manage\n            Contractor\n          </Message>\n        )}\n        {loading && (\n          <div className={styles.spinnerWrapper}>\n            <Spinner invert />\n          </div>\n        )}\n        {!loading && filters && (\n          <FilterInvoices invoices={invoices} filterValues={filters}>\n            {(filteredInvoices) => (\n              <>\n                {renderInvoices(filteredInvoices)}\n                {renderEmptyMessage(filteredInvoices)}\n              </>\n            )}\n          </FilterInvoices>\n        )}\n      </Main>\n    </AdminInvoiceActionsProvider>\n  );\n};\n\nexport default ListUserInvoices;\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport ListUserInvoices from \"src/containers/Invoice/User/List\";\n\nconst PageListUserInvoices = () => {\n  return (\n    <MultipleContentPage disableScrollToTop>\n      {(props) => <ListUserInvoices {...props} />}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageListUserInvoices;\n","import * as Yup from \"yup\";\nimport {\n  yupFieldMatcher,\n  maxFileSizeMessage,\n  maxFilesExceededMessage,\n  validMimeTypesMessage\n} from \"src/utils/validation\";\n\nexport const invoiceValidationSchema = (\n  {\n    cmscontactsupportedchars,\n    cmsnamelocationsupportedchars,\n    maxlocationlength,\n    minlocationlength,\n    mincontactlength,\n    maxcontactlength,\n    minnamelength,\n    maxnamelength,\n    minlineitemcollength,\n    maxlineitemcollength,\n    invoicefieldsupportedchars\n  },\n  approvedProposals\n) =>\n  Yup.object().shape({\n    name: Yup.string()\n      .required(\"required\")\n      .min(minnamelength)\n      .max(maxnamelength)\n      .matches(...yupFieldMatcher(\"Name\", cmsnamelocationsupportedchars)),\n    location: Yup.string()\n      .min(minlocationlength)\n      .max(maxlocationlength)\n      .matches(...yupFieldMatcher(\"Location\", cmsnamelocationsupportedchars)),\n    contact: Yup.string()\n      .required(\"required\")\n      .min(mincontactlength)\n      .max(maxcontactlength)\n      .matches(...yupFieldMatcher(\"Contact\", cmscontactsupportedchars)),\n    rate: Yup.number()\n      .required(\"required\")\n      .min(5)\n      .max(500)\n      .typeError(\"rate must be a number\"),\n    address: Yup.string().required(\"required\"),\n    lineitems: Yup.array()\n      .of(\n        Yup.object().shape({\n          type: Yup.number().required(\"required\").oneOf([1, 2, 3, 4]),\n          domain: Yup.string()\n            .required(\"required\")\n            .min(minlineitemcollength)\n            .max(maxlineitemcollength)\n            .matches(...yupFieldMatcher(\"Domain\", invoicefieldsupportedchars)),\n          subdomain: Yup.string()\n            .required(\"required\")\n            .min(minlineitemcollength)\n            .max(maxlineitemcollength)\n            .matches(\n              ...yupFieldMatcher(\"Sub domain\", invoicefieldsupportedchars)\n            ),\n          description: Yup.string()\n            .min(minlineitemcollength)\n            .max(maxlineitemcollength)\n            .matches(\n              ...yupFieldMatcher(\"Description\", invoicefieldsupportedchars)\n            ),\n          proposaltoken: Yup.string()\n            .optional()\n            .oneOf(approvedProposals, \"Proposal token invalid\"),\n          labor: Yup.number().min(0),\n          subuserid: Yup.string().when(\"type\", (type, schema) =>\n            type === 4 ? schema.required(\"required\") : schema\n          ),\n          subrate: Yup.number().when(\"type\", (type, schema) =>\n            type === 4\n              ? schema\n                  .required(\"required\")\n                  .min(500, \"must be greater or equal to 5\")\n                  .max(50000, \"must be less or equal to 500\")\n              : schema\n          ),\n          expenses: Yup.number().min(0)\n        })\n      )\n      .min(1),\n    files: Yup.array()\n  });\n\nexport const generateFilesValidatorByPolicy =\n  ({ validmimetypes, maximagesize, maximages }) =>\n  (files) => {\n    const validMimeTypes = validmimetypes.filter((m) => m.startsWith(\"image/\"));\n    const validatedFiles = [];\n    const errors = {\n      files: []\n    };\n\n    for (const file of files) {\n      if (validatedFiles.length > maximages - 1 || files > maximages - 1) {\n        errors.files.push(maxFilesExceededMessage(maximages));\n      } else if (!validMimeTypes.includes(file.mime)) {\n        errors.files.push(validMimeTypesMessage(validMimeTypes));\n      } else if (file.mime.startsWith(\"image/\") && file.size > maximagesize) {\n        errors.files.push(maxFileSizeMessage());\n      } else {\n        validatedFiles.push(file);\n      }\n    }\n\n    if (errors.files.length === 0) delete errors.files;\n    return errors;\n  };\n\n/** Captures a value such as 'lineitems[0].description' */\nconst lineItemPathRegex = /[A-z]*\\[[0-9]*\\]\\.[A-z]*/gm;\n\n/**\n * Converts an array of raw line item error messages to a more human\n * readable version.\n * For example: \"lineitems[0].description must have at least 3 characters\"\n * becomes: \"description must have at least 3 characters\"\n * @param {Array} errors\n * @returns {Array} improvedErrors\n */\nexport const improveLineItemErrors = (errors = []) => {\n  return errors.map((err = {}) => {\n    return Object.keys(err).reduce((res, field) => {\n      const errMsg = err[field];\n      return { ...res, [field]: errMsg.replace(lineItemPathRegex, field) };\n    }, {});\n  });\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Button } from \"pi-ui\";\nimport { FormikConsumer } from \"formik\";\nimport { useDraftInvoices } from \"src/containers/Invoice/User/hooks\";\nimport { getQueryStringValue, setQueryStringValue } from \"src/lib/queryString\";\nimport omit from \"lodash/omit\";\n\nconst DraftSaver = ({ values, setValues, submitSuccess }) => {\n  const [draftId, setDraftId] = useState(getQueryStringValue(\"draft\"));\n  const {\n    draftInvoices,\n    onDeleteDraftInvoice: onDelete,\n    onSaveDraftInvoice: onSave\n  } = useDraftInvoices();\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n\n  const canSaveDraft = values && !!values.name && !saved;\n\n  const executeFakeLoading = () => {\n    setSaving(true);\n    setTimeout(() => {\n      setSaved(true);\n      setSaving(false);\n    }, 300);\n  };\n\n  const handleSave = () => {\n    const id = onSave({ draftId, ...values });\n    // first time saving this draft\n    if (!draftId) {\n      setDraftId(id);\n    }\n    executeFakeLoading();\n  };\n\n  useEffect(\n    function updateURLForDraftID() {\n      if (draftId) {\n        setQueryStringValue(\"draft\", draftId);\n      }\n    },\n    [draftId]\n  );\n\n  useEffect(\n    function resetSaved() {\n      setSaved(false);\n    },\n    [values, setSaved]\n  );\n\n  useEffect(\n    function handleSubmitSuccess() {\n      if (submitSuccess && !!draftId) {\n        onDelete(draftId);\n      }\n    },\n    [submitSuccess, draftId, onDelete]\n  );\n\n  useEffect(\n    function handleInitializeFormFromDraft() {\n      const foundDraftInvoice =\n        !!draftInvoices && draftId && draftInvoices[draftId];\n      if (foundDraftInvoice) {\n        const values = foundDraftInvoice;\n        setValues(omit(values, \"timestamp\"));\n      }\n    },\n    [draftInvoices, draftId, setValues]\n  );\n  return (\n    <Button\n      type=\"button\"\n      kind={saving || !canSaveDraft ? \"disabled\" : \"secondary\"}\n      loading={saving}\n      onClick={handleSave}\n    >\n      {saved ? \"Saved ✓\" : \"Save Draft\"}\n    </Button>\n  );\n};\n\nconst Wrapper = (props) => {\n  return (\n    <FormikConsumer>\n      {(formikProps) => {\n        return <DraftSaver {...{ ...props, ...formikProps }} />;\n      }}\n    </FormikConsumer>\n  );\n};\n\nexport default Wrapper;\n","import React, { useCallback, useEffect } from \"react\";\nimport { Text, Spinner } from \"pi-ui\";\nimport { FormikConsumer } from \"formik\";\nimport { usdFormatter } from \"src/utils\";\n\nimport useExchangeRate from \"src/hooks/api/useExchangeRate\";\n\nexport const ExchangeRateField = ({ month, year, onChange, name }) => {\n  const [rate, loading, error] = useExchangeRate(month, year);\n  const handleChange = useCallback(\n    (rate) => {\n      onChange(name, rate);\n    },\n    [onChange, name]\n  );\n  useEffect(() => {\n    handleChange(rate);\n  }, [rate, handleChange]);\n  return (\n    <div style={{ display: \"grid\" }}>\n      <Text color=\"gray\">Exchange rate</Text>\n      {error ? (\n        <Text>{error.toString()}</Text>\n      ) : loading ? (\n        <Spinner invert />\n      ) : (\n        <Text>{usdFormatter.format(rate / 100)}</Text>\n      )}\n    </div>\n  );\n};\n\nconst Wrapper = ({ name }) => {\n  return (\n    <FormikConsumer>\n      {({ setFieldValue, values }) => {\n        const {\n          date: { month, year }\n        } = values;\n        return (\n          <ExchangeRateField\n            month={month}\n            year={year}\n            name={name}\n            onChange={setFieldValue}\n          />\n        );\n      }}\n    </FormikConsumer>\n  );\n};\n\nexport default Wrapper;\n","import React, { useMemo, useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { BoxTextInput, Button, Message, Spinner } from \"pi-ui\";\nimport { Formik } from \"formik\";\nimport { withRouter } from \"react-router-dom\";\nimport InvoiceDatasheet, {\n  generateBlankLineItem\n} from \"src/components/InvoiceDatasheet\";\nimport MonthPickerField from \"../MonthPickerField\";\nimport AttachFileInput from \"src/components/AttachFileInput\";\nimport {\n  getInitialDateValue,\n  getInvoiceMinMaxYearAndMonth\n} from \"src/containers/Invoice\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\nimport {\n  invoiceValidationSchema,\n  improveLineItemErrors,\n  generateFilesValidatorByPolicy\n} from \"./validation\";\nimport useContractor from \"src/containers/User/Detail/hooks/useContractor\";\nimport DraftSaver from \"./DraftSaver\";\nimport ThumbnailGrid from \"src/components/Files\";\nimport ExchangeRateField from \"./ExchangeRateField\";\nimport useSessionStorage from \"src/hooks/utils/useSessionStorage\";\nimport useScrollFormOnError from \"src/hooks/utils/useScrollFormOnError\";\nimport styles from \"./InvoiceForm.module.css\";\n\nconst InvoiceForm = React.memo(function InvoiceForm({\n  values,\n  handleChange,\n  handleSubmit,\n  isSubmitting,\n  setFieldValue,\n  setFieldTouched,\n  setFieldError,\n  errors,\n  touched,\n  isValid: isFormValid,\n  submitSuccess,\n  setSessionStorageInvoice,\n  approvedProposals,\n  approvedProposalsError,\n  validateFiles,\n  requireGitHubName,\n  isEditing\n}) {\n  const files = values.files;\n  useScrollFormOnError(errors && errors.global);\n  const isValid = isFormValid && !requireGitHubName;\n  const SubmitButton = () => (\n    <Button\n      type=\"submit\"\n      kind={!isValid ? \"disabled\" : \"primary\"}\n      loading={isSubmitting}\n    >\n      Submit\n    </Button>\n  );\n\n  const handleChangeInvoiceDatasheet = useCallback(\n    (value) => {\n      setFieldValue(\"lineitems\", value);\n      !isEditing &&\n        setSessionStorageInvoice({\n          ...values,\n          lineitems: value\n        });\n    },\n    [setFieldValue, values, setSessionStorageInvoice, isEditing]\n  );\n\n  const handleFilesChange = useCallback(\n    (v) => {\n      const fs = files.concat(v);\n      const errors = validateFiles(fs);\n      if (errors && errors.files) {\n        setFieldError(\"global\", errors.files.join(\" \"));\n      }\n      setFieldValue(\"files\", fs, false);\n    },\n    [setFieldValue, files, validateFiles, setFieldError]\n  );\n\n  const lineItemErrors = useMemo(\n    () => improveLineItemErrors(errors.lineitems),\n    [errors.lineitems]\n  );\n\n  const handleFileRemoval = useCallback(\n    (v) => {\n      const fs = files.filter((f) => f.payload !== v.payload);\n      setFieldValue(\"files\", fs);\n    },\n    [setFieldValue, files]\n  );\n\n  const handleChangeWithTouched = (field) => (e) => {\n    setFieldTouched(field, true);\n    !isEditing &&\n      setSessionStorageInvoice({\n        ...values,\n        [field]: e.target.value\n      });\n    handleChange(e);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {errors && errors.global && (\n        <Message kind=\"error\" className=\"margin-bottom-m\">\n          {errors.global.toString()}\n        </Message>\n      )}\n      {requireGitHubName && (\n        <Message kind=\"warning\" className=\"margin-bottom-m\">\n          Update your GitHub Username information on Account {\">\"} Manage\n          Contractor to submit an Invoice\n        </Message>\n      )}\n      <div className=\"justify-space-between\">\n        <MonthPickerField\n          years={getInvoiceMinMaxYearAndMonth()}\n          name=\"date\"\n          label=\"Reference month\"\n        />\n        <ExchangeRateField name=\"exchangerate\" />\n      </div>\n      <BoxTextInput\n        placeholder=\"Contractor name\"\n        name=\"name\"\n        tabIndex={1}\n        value={values.name}\n        error={touched.name && errors.name}\n        onChange={handleChangeWithTouched(\"name\")}\n      />\n      <BoxTextInput\n        placeholder=\"Contractor location\"\n        name=\"location\"\n        tabIndex={1}\n        value={values.location}\n        error={touched.location && errors.location}\n        onChange={handleChangeWithTouched(\"location\")}\n      />\n      <BoxTextInput\n        placeholder=\"Contractor contact\"\n        name=\"contact\"\n        tabIndex={1}\n        value={values.contact}\n        error={touched.contact && errors.contact}\n        onChange={handleChangeWithTouched(\"contact\")}\n      />\n      <BoxTextInput\n        placeholder=\"Payment address\"\n        name=\"address\"\n        tabIndex={1}\n        value={values.address}\n        error={touched.address && errors.address}\n        onChange={handleChangeWithTouched(\"address\")}\n      />\n      <BoxTextInput\n        placeholder=\"Contractor rate\"\n        name=\"rate\"\n        type=\"number\"\n        tabIndex={1}\n        value={values.rate}\n        error={touched.rate && errors.rate}\n        onChange={handleChangeWithTouched(\"rate\")}\n      />\n      <AttachFileInput\n        label=\"Attach files\"\n        type=\"button\"\n        onChange={handleFilesChange}\n      />\n      <ThumbnailGrid\n        value={files}\n        onClick={() => null}\n        onRemove={handleFileRemoval}\n        errorsPerFile={errors.files}\n      />\n      <InvoiceDatasheet\n        value={values.lineitems}\n        userRate={values.rate}\n        errors={lineItemErrors}\n        onChange={handleChangeInvoiceDatasheet}\n        proposals={approvedProposals}\n        proposalsError={approvedProposalsError}\n      />\n      <div className=\"justify-right\">\n        <DraftSaver submitSuccess={submitSuccess} />\n        <SubmitButton />\n      </div>\n    </form>\n  );\n});\n\nconst InvoiceFormWrapper = ({\n  initialValues,\n  onSubmit,\n  history,\n  approvedProposals,\n  approvedProposalsError,\n  editMode\n}) => {\n  const { policy } = usePolicy();\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n  const { user, loading, requireGitHubName, onUpdateContractorInfo } =\n    useContractor();\n\n  const invoiceFormValidation = useMemo(\n    () =>\n      invoiceValidationSchema(policy, [\n        ...approvedProposals.map((prop) => prop.censorshiprecord.token),\n        \"\"\n      ]),\n    [policy, approvedProposals]\n  );\n  const validateFiles = useMemo(\n    () => generateFilesValidatorByPolicy(policy),\n    [policy]\n  );\n  const FORM_INITIAL_VALUES = {\n    name: user ? user.contractorname : \"\",\n    location: user ? user.contractorlocation : \"\",\n    contact: user ? user.contractorcontact : \"\",\n    address: \"\",\n    exchangerate: \"\",\n    rate: \"\",\n    date: getInitialDateValue(),\n    lineitems: [generateBlankLineItem(policy)],\n    files: []\n  };\n  let formInitialValues = initialValues\n    ? { ...FORM_INITIAL_VALUES, ...initialValues }\n    : FORM_INITIAL_VALUES;\n  const [sessionStorageInvoice, setSessionStorageInvoice] = useSessionStorage(\n    \"invoice\",\n    null\n  );\n  if (sessionStorageInvoice !== null) {\n    formInitialValues = { ...FORM_INITIAL_VALUES, ...sessionStorageInvoice };\n  }\n  const isInitialValid = invoiceFormValidation.isValidSync(formInitialValues);\n\n  const handleSubmit = useCallback(\n    async (values, { resetForm, setSubmitting, setFieldError }) => {\n      try {\n        const {\n          date: { month, year },\n          ...others\n        } = values;\n        const token = await onSubmit({\n          ...others,\n          month,\n          year\n        });\n\n        // Token from new invoice or from edit invoice\n        const invoiceToken = token || values.token;\n        setSubmitting(false);\n        setSubmitSuccess(true);\n        const userDetails = {\n          githubname: user.githubname,\n          matrixname: user.matrixname,\n          contractorname: others.name,\n          contractorlocation: others.location,\n          contractorcontact: others.contact\n        };\n        onUpdateContractorInfo(userDetails);\n        history.push(`/invoices/${invoiceToken}`);\n        setSessionStorageInvoice(null);\n        resetForm();\n      } catch (e) {\n        setSubmitting(false);\n        setFieldError(\"global\", e);\n      }\n    },\n    [history, onSubmit, setSessionStorageInvoice, onUpdateContractorInfo, user]\n  );\n  return loading ? (\n    <div className={styles.spinnerWrapper}>\n      <Spinner invert />\n    </div>\n  ) : (\n    <Formik\n      onSubmit={handleSubmit}\n      initialValues={formInitialValues}\n      isInitialValid={isInitialValid}\n      validationSchema={invoiceFormValidation}\n    >\n      {(props) => (\n        <InvoiceForm\n          {...{\n            ...props,\n            submitSuccess,\n            setSessionStorageInvoice,\n            approvedProposals,\n            approvedProposalsError,\n            validateFiles,\n            requireGitHubName,\n            isEditing: editMode\n          }}\n        />\n      )}\n    </Formik>\n  );\n};\n\nInvoiceFormWrapper.propTypes = {\n  approvedProposals: PropTypes.array.isRequired,\n  initialValues: PropTypes.object,\n  onSubmit: PropTypes.func,\n  setSessionStorageInvoice: PropTypes.func,\n  history: PropTypes.object,\n  editMode: PropTypes.bool\n};\n\nexport default withRouter(InvoiceFormWrapper);\n","import React from \"react\";\nimport { Card } from \"pi-ui\";\nimport InvoiceForm from \"src/components/InvoiceForm\";\nimport { useNewInvoice } from \"./hooks\";\nimport useApprovedProposals from \"src/hooks/api/useApprovedProposals\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst NewInvoice = () => {\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n  const { onSubmitInvoice } = useNewInvoice();\n  const { proposalsNotRFP: proposals, error } =\n    useApprovedProposals(proposalPageSize);\n\n  return (\n    <Card className=\"container margin-bottom-l\">\n      <InvoiceForm\n        onSubmit={onSubmitInvoice}\n        approvedProposals={proposals}\n        proposalsError={error}\n      />\n    </Card>\n  );\n};\n\nexport default NewInvoice;\n","import * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\n\nexport function useNewInvoice() {\n  return {\n    onSubmitInvoice: useAction(act.onSaveNewInvoice)\n  };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport InvoiceNewForm from \"src/containers/Invoice/New\";\n\nconst PageInvoicesNew = () => {\n  return (\n    <MultipleContentPage topBannerHeight={90}>\n      {({ TopBanner, PageDetails, Main }) => (\n        <>\n          <TopBanner>\n            <PageDetails title=\"Create Invoice\" actionsContent={null} />\n          </TopBanner>\n          <Main fillScreen>\n            <InvoiceNewForm />\n          </Main>\n        </>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageInvoicesNew;\n","import { useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport useFetchMachine from \"src/hooks/utils/useFetchMachine\";\nimport { getProposalsTokensFromInvoice } from \"../helpers\";\nimport isEmpty from \"lodash/fp/isEmpty\";\nimport isEqual from \"lodash/fp/isEqual\";\nimport values from \"lodash/fp/values\";\nimport keys from \"lodash/fp/keys\";\nimport difference from \"lodash/fp/difference\";\n\nexport function useInvoice(invoiceToken) {\n  const invoiceSelector = useMemo(\n    () => sel.makeGetInvoiceByToken(invoiceToken),\n    [invoiceToken]\n  );\n  const invoice = useSelector(invoiceSelector);\n  const currentUser = useSelector(sel.currentUser);\n  const proposalsByToken = useSelector(sel.proposalsByToken);\n  const onFetchInvoice = useAction(act.onFetchInvoice);\n  const onFetchProposalsBatch = useAction(act.onFetchProposalsBatch);\n\n  const unfetchedProposalsTokens = difference(\n    getProposalsTokensFromInvoice(invoice)\n  )(keys(proposalsByToken));\n\n  const hasUnfetchedProposalsTokens = !isEmpty(unfetchedProposalsTokens);\n\n  const initialValues = {\n    status: \"idle\",\n    loading: true\n  };\n\n  const [state, send, { FETCH, VERIFY, REJECT, RESOLVE, RETRY }] =\n    useFetchMachine({\n      actions: {\n        initial: () => {\n          if (!invoice || (invoice && !invoice.payout)) {\n            onFetchInvoice(invoiceToken)\n              .then(() => send(VERIFY))\n              .catch((e) => send(REJECT, e));\n            return send(FETCH);\n          }\n          return send(VERIFY);\n        },\n        load: () => {\n          if (!invoice || hasUnfetchedProposalsTokens) {\n            return;\n          }\n          return send(VERIFY);\n        },\n        verify: function verifyRemainingProposalsTokens() {\n          if (invoice && hasUnfetchedProposalsTokens) {\n            onFetchProposalsBatch({\n              tokens: unfetchedProposalsTokens,\n              fetchVoteSummary: false,\n              fetchProposalSummary: false\n            })\n              .then(() => send(VERIFY))\n              .catch((e) => send(REJECT, e));\n          }\n          return send(RESOLVE, {\n            invoice,\n            proposals: values(proposalsByToken)\n          });\n        },\n        done: () => {\n          if (!isEqual(state.invoice, invoice)) {\n            return send(RETRY, initialValues);\n          }\n        }\n      },\n      initialValues\n    });\n\n  return {\n    invoice: state.invoice,\n    loading: state.loading || state.verifying,\n    proposals: state.proposals,\n    proposalsError: state.error,\n    currentUser\n  };\n}\n\nexport function useInvoices(currentInvoice, userid, start, end) {\n  const invoices = useSelector(sel.allInvoices);\n  const filteredInvoices =\n    invoices && invoices.length > 0\n      ? invoices.filter((inv) => {\n          const invTimestamp =\n            new Date(inv.input.year, inv.input.month).getTime() / 1000;\n          return (\n            inv.censorshiprecord.token !== currentInvoice &&\n            inv.userid === userid &&\n            invTimestamp >= start &&\n            invTimestamp <= end\n          );\n        })\n      : null;\n  return {\n    invoices: filteredInvoices\n  };\n}\n\nexport function useFetchCodeStats(id, start, end) {\n  const onFetchUserCodeStats = useAction(act.onFetchUserCodeStats);\n\n  const [loading, error] = useAPIAction(onFetchUserCodeStats, [id, start, end]);\n\n  return { loading, error };\n}\n\nexport function useCodeStats(id, start, end) {\n  const codeStatsSelector = useMemo(\n    () => sel.makeGetCodeStatsByUserID(id, start, end),\n    [id, start, end]\n  );\n  const codestats = useSelector(codeStatsSelector);\n\n  return { codestats };\n}\n","import React from \"react\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport { useMediaQuery, useTheme, getThemeProperty } from \"pi-ui\";\n\nimport ContentLoader from \"react-content-loader\";\n\nconst ExtraSmallLoader = ({\n  primaryColor,\n  secondaryColor,\n  yOffset,\n  extended\n}) => (\n  <ContentLoader\n    height={extended ? 300 : 170}\n    width={400}\n    speed={2}\n    primaryColor={primaryColor}\n    secondaryColor={secondaryColor}\n  >\n    <rect x=\"0\" y=\"0\" width=\"180\" height=\"10\" />\n    <rect x=\"0\" y=\"20\" width=\"360\" height=\"20\" />\n    <rect x=\"0\" y=\"60\" width=\"80\" height=\"20\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"100\" width=\"20\" height=\"14\" />\n        <rect x=\"30\" y=\"100\" width=\"400\" height=\"14\" />\n        <rect x=\"0\" y=\"134\" width=\"400\" height=\"1\" />\n        <rect x=\"0\" y=\"154\" width=\"200\" height=\"12\" />\n        <rect x=\"0\" y=\"180\" width=\"400\" height=\"12\" />\n        <rect x=\"0\" y=\"212\" width=\"400\" height=\"1\" />\n      </>\n    )}\n    <rect x=\"0\" y={`${156 + yOffset}`} width=\"130\" height=\"14\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"220\" width=\"140\" height=\"20\" />\n        <rect x=\"150\" y=\"220\" width=\"140\" height=\"20\" />\n      </>\n    )}\n  </ContentLoader>\n);\n\nconst RegularLoader = ({ extended, primaryColor, secondaryColor, yOffset }) => (\n  <ContentLoader\n    height={extended ? 240 : 100}\n    width={800}\n    speed={2}\n    primaryColor={primaryColor}\n    secondaryColor={secondaryColor}\n  >\n    <rect x=\"0\" y=\"0\" width=\"600\" height=\"20\" />\n    <rect x=\"700\" y=\"0\" width=\"100\" height=\"20\" />\n    <rect x=\"0\" y=\"40\" width=\"100\" height=\"10\" />\n    <rect x=\"110\" y=\"40\" width=\"200\" height=\"10\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"60\" width=\"20\" height=\"14\" />\n        <rect x=\"30\" y=\"60\" width=\"500\" height=\"14\" />\n        <rect x=\"0\" y=\"100\" width=\"800\" height=\"1\" />\n        <rect x=\"0\" y=\"120\" width=\"600\" height=\"12\" />\n        <rect x=\"0\" y=\"136\" width=\"800\" height=\"12\" />\n        <rect x=\"0\" y=\"164\" width=\"800\" height=\"1\" />\n      </>\n    )}\n    <rect x=\"0\" y={`${80 + yOffset}`} width=\"130\" height=\"14\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"220\" width=\"140\" height=\"20\" />\n        <rect x=\"150\" y=\"220\" width=\"140\" height=\"20\" />\n      </>\n    )}\n  </ContentLoader>\n);\n\nconst InvoiceLoader = ({ extended }) => {\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  const { theme } = useTheme();\n\n  const primaryColor = getThemeProperty(theme, \"card-background\");\n  const secondaryColor = getThemeProperty(theme, \"dimmed-card-background\");\n  const yOffset = extended ? 100 : 0;\n  return (\n    <RecordWrapper>\n      {() =>\n        extraSmall ? (\n          <ExtraSmallLoader\n            {...{ primaryColor, secondaryColor, yOffset, extended }}\n          />\n        ) : (\n          <RegularLoader\n            {...{ primaryColor, secondaryColor, yOffset, extended }}\n          />\n        )\n      }\n    </RecordWrapper>\n  );\n};\n\nexport default InvoiceLoader;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport get from \"lodash/fp/get\";\nimport { withRouter } from \"react-router-dom\";\nimport { Card, Message } from \"pi-ui\";\nimport { useInvoice } from \"../Detail/hooks\";\nimport useApprovedProposals from \"src/hooks/api/useApprovedProposals\";\nimport { useEditInvoice } from \"./hooks\";\nimport { fromUSDCentsToUSDUnits } from \"src/helpers\";\nimport InvoiceLoader from \"src/components/Invoice/InvoiceLoader\";\nimport InvoiceForm from \"src/components/InvoiceForm\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst EditInvoice = ({ match }) => {\n  const tokenFromUrl = get(\"params.token\", match);\n  const { onEditInvoice } = useEditInvoice();\n  const { invoice, loading, error } = useInvoice(tokenFromUrl);\n  const {\n    policyTicketVote: { summariespagesize: proposalPageSize }\n  } = usePolicy();\n\n  const isInvoiceLoaded = !loading && !!invoice;\n\n  const initialValues = invoice\n    ? {\n        token: tokenFromUrl,\n        name: invoice.input.contractorname,\n        location: invoice.input.contractorlocation,\n        contact: invoice.input.contractorcontact,\n        address: invoice.input.paymentaddress,\n        rate: fromUSDCentsToUSDUnits(invoice.input.contractorrate),\n        date: {\n          month: invoice.input.month,\n          year: invoice.input.year\n        },\n        files: invoice.file\n          ? invoice.file.filter((p) => p.name !== \"invoice.json\")\n          : [],\n        lineitems: invoice.input.lineitems\n      }\n    : null;\n\n  const { proposalsNotRFP: proposals, error: proposalsError } =\n    useApprovedProposals(proposalPageSize);\n  return (\n    <Card className=\"container margin-bottom-l\">\n      {error ? (\n        <Message kind=\"error\">{error.toString()}</Message>\n      ) : isInvoiceLoaded ? (\n        <InvoiceForm\n          initialValues={initialValues}\n          onSubmit={onEditInvoice}\n          approvedProposals={proposals}\n          approvedProposalsError={proposalsError}\n          editMode\n        />\n      ) : (\n        <InvoiceLoader extended />\n      )}\n    </Card>\n  );\n};\n\nEditInvoice.propTypes = {\n  match: PropTypes.object\n};\n\nexport default withRouter(EditInvoice);\n","import * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\n\nexport function useEditInvoice() {\n  const onEditInvoice = useAction(act.onEditInvoice);\n  return { onEditInvoice };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, useMediaQuery } from \"pi-ui\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport EditInvoice from \"src/containers/Invoice/Edit\";\n\nconst PageInvoiceEdit = ({ history, match }) => {\n  const mobile = useMediaQuery(\"(max-width: 560px)\");\n\n  const CancelButton = () => (\n    <Button\n      type=\"button\"\n      kind=\"secondary\"\n      size={mobile ? \"sm\" : \"md\"}\n      onClick={() => history.push(`/invoices/${match.params.token}`)}\n    >\n      Cancel\n    </Button>\n  );\n\n  return (\n    <MultipleContentPage topBannerHeight={90}>\n      {({ TopBanner, PageDetails, Main }) => (\n        <>\n          <TopBanner>\n            <PageDetails\n              title=\"Edit Invoice\"\n              actionsContent={<CancelButton />}\n            />\n          </TopBanner>\n          <Main fillScreen>\n            <EditInvoice />\n          </Main>\n        </>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nPageInvoiceEdit.propTypes = {\n  history: PropTypes.object,\n  match: PropTypes.object\n};\n\nexport default PageInvoiceEdit;\n","import React, { Fragment, useState, memo } from \"react\";\nimport { H4, H5, Text, Spinner, classNames } from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport useUserDetail from \"src/hooks/api/useUserDetail\";\nimport { useCodeStats, useFetchCodeStats } from \"./hooks\";\nimport styles from \"./Detail.module.css\";\n\nconst headers = [\"Date\", \"Repo\", \"Commits\", \"Merged\", \"Updates\", \"Reviews\"];\n\nconst Headers = () => (\n  <div className={classNames(styles.statsHeader, styles.collapse)}>\n    {headers.map((h, i) => (\n      <span key={i}>{h}</span>\n    ))}\n  </div>\n);\n\n/**\n * PRs\n * URL: https://github.com/decred/politeiagui/pull/2024\n * Pathname: /decred/politeiagui/pull/2024\n * Split: [\"\", \"decred\", \"politeiagui\", \"pull\", \"2024\"]\n * Commits\n * URL: https://api.github.com/repos/decred/politeiagui/commits/1688505e91dc86e5f2251cdd72fdcb53fa5bfd99\n * Pathname: repos/decred/politeiagui/commits/1688505e91dc86e5f2251cdd72fdcb53fa5bfd99\n * Split: [\"\", \"repos\", \"decred\", \"politeiagui\", \"commits\", \"1688505e91dc86e5f2251cdd72fdcb53fa5bfd99\"]\n */\nconst getUrlEnd =\n  (lastIndex, numberPos = 4) =>\n  (prUrl, i) => {\n    const url = new URL(prUrl);\n    const prNumber = url.pathname.split(\"/\")[numberPos];\n    return (\n      <Fragment key={i}>\n        <Link to={{ pathname: prUrl }} target=\"_blank\">\n          {prNumber.substring(0, 7)}\n        </Link>\n        {i === lastIndex ? \"\" : \", \"}\n      </Fragment>\n    );\n  };\n\nconst Statistic = ({ add, del }) => (\n  <div className={styles.singleStat}>\n    <div className={styles.addition}>+ {add}</div>\n    <div className={styles.deletion}>- {del}</div>\n  </div>\n);\n\nconst ContributionList = ({ links, label, pos = 4 }) => (\n  <div>\n    {label}:{\" \"}\n    <Text className={styles.prs}>\n      {links.length === 0\n        ? \"none\"\n        : links.map(getUrlEnd(links.length - 1, pos, true))}\n    </Text>\n  </div>\n);\n\nconst CodeStatDetails = ({\n  commitadditions,\n  commitdeletions,\n  updatedadditions,\n  updateddeletions,\n  repository,\n  mergedadditions,\n  mergeddeletions,\n  reviewadditions,\n  reviewdeletions,\n  prs,\n  reviews,\n  commits,\n  month,\n  year\n}) => {\n  const [show, setShow] = useState(false);\n  const onToggleShow = () => setShow(!show);\n  return (\n    <>\n      <div className={styles.collapse} onClick={onToggleShow}>\n        <Text textAlign=\"center\">{`${month}/${year}`}</Text>\n        <Text textAlign=\"center\">{repository}</Text>\n        <Statistic add={commitadditions} del={commitdeletions} />\n        <Statistic add={mergedadditions} del={mergeddeletions} />\n        <Statistic add={updatedadditions} del={updateddeletions} />\n        <Statistic add={reviewadditions} del={reviewdeletions} />\n      </div>\n      {show && (\n        <div className={styles.contributionDetails}>\n          <ContributionList links={prs} label=\"Pull Requests\" />\n          <ContributionList links={reviews} label=\"Reviews\" />\n          <ContributionList links={commits} pos={5} label=\"Commits\" />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport const FetchCodeStats = ({ id, start, end }) => {\n  const { loading, error } = useFetchCodeStats(id, start, end);\n  return loading ? (\n    <Spinner />\n  ) : error ? (\n    <Text>Error fetching codestats. Err: {error}</Text>\n  ) : null;\n};\n\nconst IndividualCodeStats = ({ id, start, end }) => {\n  const { user } = useUserDetail(id);\n  const { codestats } = useCodeStats(id, start, end);\n  const shouldPrintTable = codestats && codestats.length > 0;\n  const shouldPrintEmptyMessage = codestats && codestats.length === 0;\n  return (\n    <>\n      {!codestats && <FetchCodeStats id={id} start={start} end={end} />}\n      <H5 className=\"margin-top-s\">{user && user.username}</H5>\n      {shouldPrintTable ? (\n        <div className={styles.codeStats}>\n          <Headers />\n          {codestats.map((cs, i) => (\n            <CodeStatDetails {...cs} key={i} />\n          ))}\n        </div>\n      ) : (\n        shouldPrintEmptyMessage && (\n          <Text>No code stats for this user in the past 3 months</Text>\n        )\n      )}\n    </>\n  );\n};\n\nconst CodeStats = ({ ids, start, end }) => {\n  return (\n    <>\n      <div\n        className={classNames(\n          styles.titleLinkWrapper,\n          \"margin-top-m\",\n          \"margin-bottom-s\"\n        )}\n      >\n        <H4>Past 3 months code stats</H4>\n      </div>\n      {ids.map((id) => (\n        <IndividualCodeStats key={id} id={id} start={start} end={end} />\n      ))}\n    </>\n  );\n};\n\nexport default memo(CodeStats);\n","import React, { useState, memo } from \"react\";\nimport { Spinner, Text, H4, Table, Link as UiLink, classNames } from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport { shortRecordToken } from \"src/helpers\";\nimport { useInvoices } from \"./hooks\";\nimport { formatCentsToUSD } from \"src/utils\";\nimport useAdminInvoices from \"src/hooks/api/useAdminInvoices\";\nimport styles from \"./Detail.module.css\";\n\nconst headers = [\"Date\", \"Invoice\", \"Total (USD)\"];\n\nconst printInvoiceInfo = ({\n  total,\n  censorshiprecord: { token },\n  input: { month, year }\n}) => ({\n  Date: `${month}/${year}`,\n  Invoice: (\n    <Link to={`/invoices/${token}`} className={styles.invoiceLinkWrapper}>\n      <Text color=\"primary\">{shortRecordToken(token)}</Text>\n    </Link>\n  ),\n  \"Total (USD)\": formatCentsToUSD(total)\n});\n\nconst FetchInvoices = () => {\n  const { loading } = useAdminInvoices();\n  return loading ? <Spinner /> : null;\n};\n\nconst InvoiceDetails = ({ token, userid, start, end }) => {\n  const [showStats, setShowStats] = useState(false);\n  const toggleShowStats = () => setShowStats(!showStats);\n  const { invoices } = useInvoices(token, userid, start, end);\n  const shouldPrintTable = showStats && invoices && invoices.length > 0;\n  const shouldPrintEmptyMessage = invoices && invoices.length === 0;\n  return (\n    <>\n      <div className={classNames(styles.titleLinkWrapper, \"margin-bottom-s\")}>\n        <H4>Past 3 months invoices</H4>\n        {!invoices && <FetchInvoices />}\n        <UiLink className={styles.uilink} onClick={toggleShowStats}>\n          {shouldPrintEmptyMessage ? \"\" : showStats ? \"Hide\" : \"Show\"}\n        </UiLink>\n      </div>\n      {shouldPrintTable ? (\n        <Table headers={headers} data={invoices.map(printInvoiceInfo)} />\n      ) : (\n        shouldPrintEmptyMessage && (\n          <Text>No invoices for the past 3 months</Text>\n        )\n      )}\n    </>\n  );\n};\n\nexport default memo(InvoiceDetails);\n","import React, { memo } from \"react\";\nimport { Card, H2 } from \"pi-ui\";\nimport CodeStats from \"./CodeStats\";\nimport InvoiceDetails from \"./InvoiceDetails\";\nimport styles from \"./Detail.module.css\";\nimport { isUserDeveloper } from \"src/containers/DCC/helpers\";\nimport useUserDetail from \"src/hooks/api/useUserDetail\";\n\nconst Stats = ({\n  subContractors,\n  subContractorsError,\n  invoiceToken,\n  userid,\n  start,\n  end\n}) => {\n  const { user } = useUserDetail(userid);\n  const subcontractorsids = subContractors\n    ? subContractors.map((sc) => sc.id)\n    : [];\n\n  return (\n    <Card paddingSize=\"small\">\n      <H2 className={styles.statsTitle}>Stats</H2>\n      <InvoiceDetails\n        start={start}\n        end={end}\n        token={invoiceToken}\n        userid={userid}\n      />\n      {isUserDeveloper(user) && !subContractorsError && (\n        <CodeStats\n          ids={[...subcontractorsids, userid]}\n          start={start}\n          end={end}\n        />\n      )}\n      {subContractorsError && { subContractorsError }}\n    </Card>\n  );\n};\n\nexport default memo(Stats);\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Message } from \"pi-ui\";\nimport { useInvoice } from \"./hooks\";\nimport Invoice from \"src/components/Invoice\";\nimport InvoiceLoader from \"src/components/Invoice/InvoiceLoader\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\nimport Comments from \"src/containers/Comments\";\nimport { isUnreviewedInvoice } from \"../helpers\";\nimport { GoBackLink } from \"src/components/Router\";\nimport Stats from \"./Stats\";\nimport get from \"lodash/fp/get\";\nimport { useDocumentTitle } from \"src/hooks/utils/useDocumentTitle\";\nimport useSubContractors from \"src/hooks/api/useSubContractors\";\nimport { presentationalInvoiceName } from \"../helpers\";\n\nconst InvoiceDetail = ({ Main, match }) => {\n  const invoiceToken = get(\"params.token\", match);\n  const threadParentCommentID = get(\"params.commentid\", match);\n\n  const { invoice, loading, currentUser, error, proposals, proposalsError } =\n    useInvoice(invoiceToken);\n\n  const { subContractors, error: subContractorsError } = useSubContractors();\n  let subContractorsInLineItems;\n  if (invoice && subContractors) {\n    const linesSubContractors = invoice.input.lineitems.map(\n      (lineitem) => lineitem.subuserid\n    );\n    subContractorsInLineItems = subContractors.filter((sc) => {\n      return linesSubContractors.includes(sc.id);\n    });\n  }\n\n  const isAuthor =\n    currentUser && invoice && invoice.userid === currentUser.userid;\n  const isAdmin = currentUser && currentUser.isadmin;\n  const isPublicMode = !isAdmin && !isAuthor;\n\n  // set tab title\n  useDocumentTitle(presentationalInvoiceName(invoice));\n\n  let start = 0;\n  let end = 0;\n  if (invoice) {\n    const endDate = new Date(invoice.input.year, invoice.input.month);\n    const startDate = new Date(invoice.input.year, invoice.input.month);\n    startDate.setMonth(startDate.getMonth() - 3);\n    end = endDate.getTime() / 1000;\n    start = startDate.getTime() / 1000;\n  }\n\n  return (\n    <>\n      <Main fillScreen>\n        <GoBackLink />\n        <AdminInvoiceActionsProvider>\n          {error ? (\n            <Message kind=\"error\">{error.toString()}</Message>\n          ) : !!invoice && !loading ? (\n            <>\n              <Invoice\n                invoice={invoice}\n                isAuthor={isAuthor}\n                isPublicMode={isPublicMode}\n                extended\n                approvedProposals={proposals || []}\n                approvedProposalsError={proposalsError}\n              />\n              {isAdmin && (\n                <Stats\n                  subContractors={subContractorsInLineItems}\n                  subContractorsError={subContractorsError}\n                  invoiceToken={invoice.censorshiprecord.token}\n                  userid={invoice.userid}\n                  start={start}\n                  end={end}\n                />\n              )}\n            </>\n          ) : (\n            <InvoiceLoader extended />\n          )}\n          {!isPublicMode && (\n            <Comments\n              recordAuthorID={invoice && invoice.userid}\n              recordToken={invoiceToken}\n              threadParentID={threadParentCommentID}\n              readOnly={invoice && !isUnreviewedInvoice(invoice)}\n              readOnlyReason={\n                \"This invoice can no longer receive comments due its current status.\"\n              }\n              recordBaseLink={`/invoices/${invoiceToken}`}\n            />\n          )}\n        </AdminInvoiceActionsProvider>\n      </Main>\n    </>\n  );\n};\n\nexport default withRouter(InvoiceDetail);\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport InvoiceDetail from \"src/containers/Invoice/Detail\";\n\nconst InvoiceDetailPage = () => {\n  return (\n    <MultipleContentPage topBannerHeight={0}>\n      {(props) => <InvoiceDetail {...props} />}\n    </MultipleContentPage>\n  );\n};\n\nexport default InvoiceDetailPage;\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport { P, Button, Modal, TextInput, Icon } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport CheckboxField from \"src/components/CheckboxField\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport * as Yup from \"yup\";\nimport { useInviteContractor } from \"./hooks\";\n\nconst ModalInviteContractor = ({ show, onClose }) => {\n  const [success, setSuccess] = useState(false);\n  const { onInviteContractor } = useInviteContractor();\n\n  const onInvite = async (\n    values,\n    { resetForm, setFieldError, setSubmitting }\n  ) => {\n    try {\n      await onInviteContractor(values);\n      resetForm();\n      setSuccess(true);\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n    }\n  };\n  useEffect(() => {\n    if (!show) {\n      setTimeout(() => setSuccess(false), 500);\n    }\n  }, [show]);\n\n  const icon = useMemo(\n    () =>\n      !success ? (\n        <Icon type={\"mail\"} size={26} />\n      ) : (\n        <Icon type={\"mailCheck\"} size={26} />\n      ),\n    [success]\n  );\n\n  return (\n    <Modal\n      style={{ width: \"600px\" }}\n      title={success ? \"Invite sent!\" : \"Invite Contractor\"}\n      show={show}\n      onClose={onClose}\n      iconComponent={icon}\n    >\n      {!success && (\n        <P style={{ marginBottom: \"20px\" }}>\n          Please, provide the email to where to send the invitation\n        </P>\n      )}\n      {!success && (\n        <FormWrapper\n          initialValues={{\n            email: \"\",\n            isTemp: false\n          }}\n          validationSchema={Yup.object().shape({\n            email: Yup.string().email(\"Invalid email\").required(\"Required\"),\n            isTemp: Yup.boolean()\n          })}\n          onSubmit={onInvite}\n        >\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            values,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            errors,\n            isSubmitting,\n            touched\n          }) => (\n            <Form onSubmit={handleSubmit}>\n              {errors && errors.global && (\n                <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n              )}\n              <TextInput\n                label={\"Email\"}\n                name=\"email\"\n                id={\"email\"}\n                type=\"text\"\n                value={values.email}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                error={touched.email && errors.email}\n              />\n              <CheckboxField name=\"isTemp\" label=\"Temporary Invite\" />\n              <Actions className=\"no-padding-bottom\">\n                <Button loading={isSubmitting} type=\"submit\">\n                  Invite\n                </Button>\n              </Actions>\n            </Form>\n          )}\n        </FormWrapper>\n      )}\n      {success && (\n        <>\n          The invitation was sent to the provided email.\n          <div className=\"justify-right margin-top-m\">\n            <Button onClick={onClose}>Ok</Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalInviteContractor.propType = {\n  show: PropTypes.bool,\n  onClose: PropTypes.func\n};\n\nexport default React.memo(ModalInviteContractor);\n","import * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\n\nexport function useInviteContractor() {\n  return {\n    onInviteContractor: useAction(act.onInviteUserConfirm)\n  };\n}\n","import React, { useCallback, useState } from \"react\";\nimport useAdminInvoices from \"src/hooks/api/useAdminInvoices\";\nimport useUserDetail from \"src/hooks/api/useUserDetail\";\nimport {\n  Spinner,\n  Link as UILink,\n  useMediaQuery,\n  Dropdown,\n  DropdownItem\n} from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport Invoice from \"src/components/Invoice\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\nimport {\n  InvoiceFilterForm,\n  FilterInvoices\n} from \"src/components/InvoiceFilters\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport { ModalInviteContractor } from \"src/containers/User/Invite\";\nimport styles from \"./List.module.css\";\nimport { Row } from \"src/components/layout\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport AdminContent from \"src/components/AdminContent\";\n\nconst ActionsContent = ({ openInviteModal }) => {\n  const mobile = useMediaQuery(\"(max-width: 768px)\");\n\n  const inviteContractorLink = (\n    <UILink className=\"cursor-pointer\" onClick={openInviteModal}>\n      Invite contractor\n    </UILink>\n  );\n  const generatePayoutsLink = (\n    <Link className=\"cursor-pointer\" to=\"/admin/payouts\">\n      Generate payouts\n    </Link>\n  );\n  const payoutSummariesLink = (\n    <Link className=\"cursor-pointer\" to=\"/admin/invoicepayouts\">\n      Payout summaries\n    </Link>\n  );\n  const proposalBillingSummaryLink = (\n    <Link className=\"cursor-pointer\" to=\"/admin/proposalsbilling\">\n      Proposal billing\n    </Link>\n  );\n\n  return (\n    <AdminContent>\n      {!mobile ? (\n        <Row justify=\"space-between\" className={styles.actionsWrapper}>\n          {inviteContractorLink}\n          {generatePayoutsLink}\n          {payoutSummariesLink}\n          {proposalBillingSummaryLink}\n        </Row>\n      ) : (\n        <Dropdown title=\"Actions\" className={styles.actionsWrapper}>\n          <DropdownItem>{inviteContractorLink}</DropdownItem>\n          <DropdownItem>{generatePayoutsLink}</DropdownItem>\n          <DropdownItem>{payoutSummariesLink}</DropdownItem>\n          <DropdownItem>{proposalBillingSummaryLink}</DropdownItem>\n        </Dropdown>\n      )}\n    </AdminContent>\n  );\n};\n\nconst ListAdminInvoices = ({ TopBanner, PageDetails, Main }) => {\n  const { loading, invoices } = useAdminInvoices();\n  const { isAdmin } = useUserDetail();\n  const [filters, setFilters] = useState({});\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenInviteContractorModal = () => {\n    handleOpenModal(ModalInviteContractor, {\n      onClose: handleCloseModal\n    });\n  };\n  const renderInvoice = useCallback(\n    (invoice) => (\n      <Invoice\n        key={`invoice-${invoice.censorshiprecord.token}`}\n        invoice={invoice}\n      />\n    ),\n    []\n  );\n\n  const handleFiltersChange = useCallback(\n    (values) => {\n      setFilters(values);\n    },\n    [setFilters]\n  );\n\n  const renderEmptyMessage = useCallback(\n    (filteredInvoices) => {\n      return (\n        !filteredInvoices.length && (\n          <HelpMessage>\n            {invoices.length\n              ? \"There are no invoices matching the selected filters\"\n              : \"There are no invoices submitted yet\"}\n          </HelpMessage>\n        )\n      );\n    },\n    [invoices]\n  );\n\n  const renderInvoices = useCallback(\n    (invoices) => invoices.map(renderInvoice),\n    [renderInvoice]\n  );\n\n  return (\n    <AdminInvoiceActionsProvider>\n      <TopBanner>\n        <PageDetails\n          title={isAdmin ? \"All Invoices\" : \"Domain Invoices\"}\n          actionsContent={\n            <ActionsContent openInviteModal={handleOpenInviteContractorModal} />\n          }\n        >\n          <InvoiceFilterForm onChange={handleFiltersChange} isAdminPage />\n        </PageDetails>\n      </TopBanner>\n      <Main fillScreen>\n        {loading && (\n          <div className={styles.spinnerWrapper}>\n            <Spinner invert />\n          </div>\n        )}\n        {!loading && filters && (\n          <FilterInvoices invoices={invoices} filterValues={filters}>\n            {(filteredInvoices) => (\n              <>\n                {renderInvoices(filteredInvoices)}\n                {renderEmptyMessage(filteredInvoices)}\n              </>\n            )}\n          </FilterInvoices>\n        )}\n      </Main>\n    </AdminInvoiceActionsProvider>\n  );\n};\n\nexport default ListAdminInvoices;\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport ListAdminInvoices from \"src/containers/Invoice/List/List\";\n\nconst PageListAdminInvoices = () => (\n  <MultipleContentPage disableScrollToTop topBannerHeight={160}>\n    {(props) => <ListAdminInvoices {...props} />}\n  </MultipleContentPage>\n);\n\nexport default PageListAdminInvoices;\n","import React from \"react\";\nimport { Link, Button, Spinner, Table, CopyableText, classNames } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport {\n  convertAtomsToDcr,\n  formatShortUnixTimestamp,\n  formatCentsToUSD\n} from \"src/utils\";\nimport { useAdminPayouts } from \"./hooks\";\nimport ExportToCsv from \"src/components/ExportToCsv\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport { Row } from \"src/components/layout\";\nimport styles from \"./PayoutsList.module.css\";\nimport { useAdminInvoiceActions } from \"../Actions\";\n\nconst PayoutsList = ({ TopBanner, PageDetails, Main }) => {\n  const { loading, payouts } = useAdminPayouts();\n  const { onPay } = useAdminInvoiceActions();\n  const hasPayouts = !loading && payouts && payouts.length > 0;\n  const actions = hasPayouts && (\n    <Button\n      className={classNames(\"cursor-pointer\", styles.payBtn)}\n      onClick={onPay}\n    >\n      Set invoices to paid\n    </Button>\n  );\n\n  return (\n    <>\n      <TopBanner>\n        <PageDetails title=\"Payouts\" actionsContent={actions}></PageDetails>\n      </TopBanner>\n      <Main fillScreen>\n        {loading && (\n          <div className={styles.spinnerWrapper}>\n            <Spinner invert />\n          </div>\n        )}\n        {hasPayouts && (\n          <>\n            <Table\n              bodyCellClassName={styles.tableBodyCell}\n              headClassName={styles.tableHead}\n              data={payouts.map(\n                ({\n                  approvedtime,\n                  year,\n                  month,\n                  contractorname,\n                  contractorrate,\n                  labortotal,\n                  expensetotal,\n                  total,\n                  exchangerate,\n                  dcrtotal,\n                  address\n                }) => {\n                  return {\n                    approvedtime: formatShortUnixTimestamp(approvedtime),\n                    month: `${month}/${year}`,\n                    contractorname,\n                    contractorrate: formatCentsToUSD(contractorrate),\n                    labortotal: formatCentsToUSD(labortotal),\n                    expensetotal: formatCentsToUSD(expensetotal),\n                    total: formatCentsToUSD(total),\n                    exchangerate: formatCentsToUSD(exchangerate),\n                    dcrtotal: convertAtomsToDcr(dcrtotal) + \" DCR\",\n                    address: (\n                      <CopyableText\n                        truncate\n                        id={`payment-address-${approvedtime}`}\n                        className={styles.copyableText}\n                        tooltipPlacement={\"left\"}\n                      >\n                        {address}\n                      </CopyableText>\n                    )\n                  };\n                }\n              )}\n              headers={[\n                \"Approved Time\",\n                \"Date\",\n                \"Name\",\n                \"Rate(USD)\",\n                \"Labor Total(USD)\",\n                \"Expense Total(USD)\",\n                \"Combined Total(USD)\",\n                \"Exchange Rate(USD)\",\n                \"Total Payment(DCR)\",\n                \"Address\"\n              ]}\n            ></Table>\n            <Row noMargin justify=\"right\">\n              <ExportToCsv\n                data={payouts.map(\n                  ({\n                    approvedtime,\n                    year,\n                    month,\n                    contractorname,\n                    contractorrate,\n                    labortotal,\n                    expensetotal,\n                    total,\n                    exchangerate,\n                    address,\n                    dcrtotal\n                  }) => {\n                    contractorrate = contractorrate / 100;\n                    labortotal = labortotal / 100;\n                    expensetotal = expensetotal / 100;\n                    total = total / 100;\n                    exchangerate = exchangerate / 100;\n                    return {\n                      approvedtime: formatShortUnixTimestamp(approvedtime),\n                      month: `${month}/${year}`,\n                      contractorname,\n                      contractorrate: contractorrate.toFixed(2),\n                      labortotal: labortotal.toFixed(2),\n                      expensetotal: expensetotal.toFixed(2),\n                      total: total.toFixed(2),\n                      exchangerate: exchangerate.toFixed(2),\n                      address: address,\n                      dcrtotal: convertAtomsToDcr(dcrtotal)\n                    };\n                  }\n                )}\n                fields={[\n                  \"approvedtime\",\n                  \"year\",\n                  \"month\",\n                  \"contractorname\",\n                  \"contractorrate\",\n                  \"labortotal\",\n                  \"expensetotal\",\n                  \"total\",\n                  \"exchangerate\",\n                  \"address\",\n                  \"dcrtotal\"\n                ]}\n                filename=\"payouts\"\n              >\n                <Link className=\"cursor-pointer\">Export To Csv</Link>\n              </ExportToCsv>\n            </Row>\n          </>\n        )}\n        {!hasPayouts && (\n          <HelpMessage>\n            {\"There are no payouts for approved invoices\"}\n          </HelpMessage>\n        )}\n      </Main>\n    </>\n  );\n};\n\nPayoutsList.propTypes = {\n  TopBanner: PropTypes.func.isRequired,\n  PageDetails: PropTypes.func.isRequired,\n  Main: PropTypes.func.isRequired\n};\n\nexport default PayoutsList;\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport useThrowError from \"src/hooks/utils/useThrowError\";\n\nexport function useAdminPayouts() {\n  const payouts = useSelector(sel.payouts);\n  const onGeneratePayouts = useAction(act.onGeneratePayouts);\n\n  const [loading, error] = useAPIAction(onGeneratePayouts);\n\n  useThrowError(error);\n\n  return { loading, payouts };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"../../components/layout/MultipleContentPage\";\nimport PayoutsList from \"src/containers/Invoice/Payouts\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\n\nconst PageGeneratePayoutsList = () => {\n  return (\n    <MultipleContentPage disableScrollToTop topBannerHeight={90}>\n      {(props) => (\n        <AdminInvoiceActionsProvider>\n          <PayoutsList {...props} />\n        </AdminInvoiceActionsProvider>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageGeneratePayoutsList;\n","import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Formik } from \"formik\";\n\nimport MonthPickerField from \"src/components/MonthPickerField\";\nimport {\n  getPayoutsMinMaxYearAndMonth,\n  getInitialDateValue\n} from \"src/containers/Invoice\";\nimport { getCurrentDateValue } from \"src/helpers\";\nimport styles from \"./PayoutsDateRange.module.css\";\n\nconst DEFAULT_INITIAL_VALUES = {\n  sDate: getInitialDateValue(),\n  eDate: getCurrentDateValue()\n};\n\nconst datesRange = getPayoutsMinMaxYearAndMonth();\n\nconst PayoutsDateRange = ({ onChange, children }) => {\n  return (\n    <Formik initialValues={DEFAULT_INITIAL_VALUES}>\n      {(formikProps) => {\n        const { values } = formikProps;\n        return (\n          <>\n            <form className={styles.form}>\n              <MonthPickerField years={datesRange} name=\"sDate\" label=\"Start\" />\n              <MonthPickerField\n                className=\"margin-left-s\"\n                years={datesRange}\n                name=\"eDate\"\n                label=\"End\"\n              />\n              <HookOnFormChange formikProps={formikProps} onChange={onChange} />\n            </form>\n            {children && children(values)}\n          </>\n        );\n      }}\n    </Formik>\n  );\n};\n\nconst HookOnFormChange = ({ formikProps, onChange }) => {\n  useEffect(() => {\n    onChange(formikProps.values);\n  }, [formikProps.values, onChange]);\n  return null;\n};\n\nPayoutsDateRange.propTypes = {\n  onChange: PropTypes.func.isRequired\n};\n\nexport default PayoutsDateRange;\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport { Spinner, Link, Table, CopyableText, Message } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport ExportToCsv from \"src/components/ExportToCsv\";\nimport { convertAtomsToDcr } from \"src/utils\";\nimport { Row } from \"src/components/layout\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport { PayoutsDateRange } from \"src/components/PayoutsDateRange\";\nimport { useInvoicePayouts } from \"./hooks\";\nimport styles from \"./PayoutSummaries.module.css\";\n\nconst InvoicePayoutsList = ({ TopBanner, PageDetails, Main }) => {\n  const [error, setError] = useState();\n  const [dates, setDates] = useState({\n    sDate: null,\n    eDate: null\n  });\n  const { loading, lineItemPayouts, onInvoicePayouts } = useInvoicePayouts();\n  const hasLineItemPayouts =\n    !loading && lineItemPayouts && lineItemPayouts.length > 0;\n  const fetchInvoicePayouts = () => {\n    if (!dates.sDate || !dates.eDate) {\n      return;\n    }\n    const start = new Date(dates.sDate.year, dates.sDate.month);\n    const end = new Date(dates.eDate.year, dates.eDate.month);\n    onInvoicePayouts(\n      Math.round(start.valueOf() / 1000),\n      Math.round(end.valueOf() / 1000)\n    ).catch((e) => setError(e));\n  };\n  useEffect(fetchInvoicePayouts, [dates]);\n\n  const handleDatesChange = useCallback(\n    (values) => {\n      setDates(values);\n    },\n    [setDates]\n  );\n  return (\n    <>\n      <TopBanner>\n        <PageDetails title=\"Line Item Payouts\" actionsContent={null}>\n          <PayoutsDateRange onChange={handleDatesChange}></PayoutsDateRange>\n        </PageDetails>\n      </TopBanner>\n      <Main fillScreen>\n        {loading && (\n          <div className={styles.spinnerWrapper}>\n            <Spinner invert />\n          </div>\n        )}\n        {error && <Message kind=\"error\">{error.toString()}</Message>}\n        {hasLineItemPayouts && (\n          <>\n            <Table\n              bodyCellClassName={styles.tableBodyCell}\n              headClassName={styles.tableHead}\n              data={lineItemPayouts.map(\n                ({\n                  year,\n                  month,\n                  token,\n                  domain,\n                  subdomain,\n                  description,\n                  proposaltoken,\n                  expenses,\n                  labor,\n                  paiddate,\n                  amountreceived\n                }) => {\n                  return {\n                    month: `${month}/${year}`,\n                    invoicetoken: token && (\n                      <CopyableText\n                        truncate\n                        id={`invoice-token-${token}`}\n                        className={styles.copyableText}\n                        tooltipPlacement={\"left\"}\n                      >\n                        {token}\n                      </CopyableText>\n                    ),\n                    domain,\n                    subdomain,\n                    description,\n                    proposaltoken: proposaltoken && (\n                      <CopyableText\n                        truncate\n                        id={`proposal-token-${proposaltoken}`}\n                        className={styles.copyableText}\n                        tooltipPlacement={\"left\"}\n                      >\n                        {proposaltoken}\n                      </CopyableText>\n                    ),\n                    expenses,\n                    labor,\n                    total: labor + expenses,\n                    paiddate,\n                    amountreceived: convertAtomsToDcr(amountreceived)\n                  };\n                }\n              )}\n              headers={[\n                \"Date\",\n                \"Invoice Token\",\n                \"Domain\",\n                \"Sub Domain\",\n                \"Description\",\n                \"Proposal Token\",\n                \"Expense(USD)\",\n                \"Labor(USD)\",\n                \"Total(USD)\",\n                \"Paid Date\",\n                \"Amount Received(DCR)\"\n              ]}\n            ></Table>\n            <Row noMargin justify=\"right\">\n              <ExportToCsv\n                data={lineItemPayouts}\n                fields={[\n                  \"year\",\n                  \"month\",\n                  \"token\",\n                  \"domain\",\n                  \"subdomain\",\n                  \"description\",\n                  \"proposaltoken\",\n                  \"expenses\",\n                  \"labor\",\n                  \"paiddate\",\n                  \"amountreceived\"\n                ]}\n                filename=\"payouts\"\n              >\n                <Link className=\"cursor-pointer\">Export To Csv</Link>\n              </ExportToCsv>\n            </Row>\n          </>\n        )}\n        {!hasLineItemPayouts && !error && (\n          <HelpMessage>{\"No payouts in the given time range!\"}</HelpMessage>\n        )}\n      </Main>\n    </>\n  );\n};\n\nInvoicePayoutsList.propTypes = {\n  TopBanner: PropTypes.func.isRequired,\n  PageDetails: PropTypes.func.isRequired,\n  Main: PropTypes.func.isRequired\n};\n\nexport default InvoicePayoutsList;\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\n\nexport function useInvoicePayouts() {\n  const lineItemPayouts = useSelector(sel.lineItemPayouts);\n  const loading = useSelector(sel.isApiRequestingInvoicePayouts);\n  const onInvoicePayouts = useAction(act.onInvoicePayouts);\n\n  return { loading, lineItemPayouts, onInvoicePayouts };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"../../components/layout/MultipleContentPage\";\nimport PayoutSummaries from \"src/containers/Invoice/PayoutSummaries/PayoutSummaries\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\n\nconst PageInvoicePayouts = () => {\n  return (\n    <MultipleContentPage disableScrollToTop topBannerHeight={140}>\n      {(props) => (\n        <AdminInvoiceActionsProvider>\n          <PayoutSummaries {...props} />\n        </AdminInvoiceActionsProvider>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageInvoicePayouts;\n","import React, { useEffect, useState } from \"react\";\nimport { Spinner, BoxTextInput, Message, Table, Card } from \"pi-ui\";\nimport { useProposalBillingSummary } from \"./hooks\";\nimport styles from \"./ProposalBillingSummary.module.css\";\nimport { formatCentsToUSD } from \"src/utils\";\nimport Link from \"src/components/Link\";\n\nconst TABLE_HEADERS = [\"Proposal\", \"Amount\"];\n\nconst ProposalBillingSummary = ({ TopBanner, PageDetails, Main }) => {\n  const [error, setError] = useState();\n  const { getSpendingSummary, proposalsBilled, loading } =\n    useProposalBillingSummary();\n  const [proposals, setProposals] = useState(proposalsBilled);\n  useEffect(() => {\n    !proposalsBilled && getSpendingSummary().catch((e) => setError(e));\n  }, [getSpendingSummary, proposalsBilled]);\n\n  useEffect(() => {\n    setProposals(proposalsBilled);\n  }, [proposalsBilled]);\n\n  const [searchString, setSearchString] = useState(\"\");\n\n  const handleSearchChange = (e) => setSearchString(e.target.value);\n  const handleSubmit = () => {\n    const stringRegex = new RegExp(searchString, \"i\");\n    const newProposals = proposalsBilled.filter((proposal) =>\n      proposal.title.match(stringRegex)\n    );\n    setProposals(newProposals);\n  };\n  return (\n    <>\n      <TopBanner>\n        <PageDetails\n          title=\"Proposal Billing\"\n          actionsClassName={styles.searchWrapper}\n          actionsContent={\n            <div>\n              <BoxTextInput\n                searchInput={true}\n                rounded={true}\n                onChange={handleSearchChange}\n                onSubmit={handleSubmit}\n                value={searchString}\n                placeholder=\"Proposal name\"\n                name=\"search\"\n              />\n            </div>\n          }\n        />\n      </TopBanner>\n      <Main fillScreen>\n        {error ? (\n          <Message kind=\"error\">{error.toString()}</Message>\n        ) : loading || !proposals ? (\n          <div className={styles.spinnerWrapper}>\n            <Spinner invert />\n          </div>\n        ) : (\n          <Card paddingSize=\"small\" className={styles.card}>\n            <Table\n              className={styles.table}\n              data={proposals.map(({ token, title, totalbilled }) => ({\n                Proposal: (\n                  <Link\n                    to={`/admin/proposalsbilling/${token}`}\n                    className={styles.titleLink}\n                  >\n                    {title}\n                  </Link>\n                ),\n                Amount: formatCentsToUSD(totalbilled)\n              }))}\n              headers={TABLE_HEADERS}\n            />\n          </Card>\n        )}\n      </Main>\n    </>\n  );\n};\n\nexport default ProposalBillingSummary;\n","import ProposalBillingSummary from \"./ProposalBillingSummary\";\n\nexport default ProposalBillingSummary;\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\n\nexport function useProposalBillingSummary() {\n  const proposalsBilled = useSelector(sel.proposalsBilled);\n  const loading = useSelector(sel.isApiRequestingProposalBillingSummary);\n  const getSpendingSummary = useAction(act.onGetSpendingSummary);\n\n  return {\n    loading,\n    proposalsBilled,\n    getSpendingSummary\n  };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"../../components/layout/MultipleContentPage\";\nimport BillingSummary from \"src/containers/Invoice/ProposalBillingSummary\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\n\nconst ProposalsBillingSummary = () => {\n  return (\n    <MultipleContentPage disableScrollToTop topBannerHeight={140}>\n      {(props) => (\n        <AdminInvoiceActionsProvider>\n          <BillingSummary {...props} />\n        </AdminInvoiceActionsProvider>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default ProposalsBillingSummary;\n","import { SUB_HOURS_LINE_ITEM } from \"../constants\";\nimport map from \"lodash/fp/map\";\nimport flow from \"lodash/fp/flow\";\nimport sum from \"lodash/fp/sum\";\nimport filter from \"lodash/fp/filter\";\nimport head from \"lodash/fp/head\";\nimport get from \"lodash/fp/get\";\nexport { getInvoiceTotalExpenses } from \"../helpers\";\n\nexport const TABLE_HEADERS = [\n  \"Month\",\n  \"Year\",\n  \"User\",\n  \"Contractor Rate\",\n  \"Exchange Rate\",\n  \"Labor (hours)\",\n  \"Expense (USD)\",\n  \"Total (DCR)\",\n  \"Total (USD)\",\n  \"Invoice\"\n];\n\nexport const isSubContractorLineItem = (item) =>\n  item.type === SUB_HOURS_LINE_ITEM;\n\nexport const getSubContractorTotal = (lineItems) =>\n  lineItems\n    .filter(isSubContractorLineItem)\n    .reduce(\n      (acc, lineItem) => acc + (lineItem.subrate * lineItem.labor) / 60,\n      0\n    );\n\nexport const getInvoiceTotal = (rate, lineItems) => {\n  const laborInMinutes = lineItems\n    .filter((item) => !isSubContractorLineItem(item))\n    .reduce((acc, cur) => acc + cur.labor, 0);\n\n  const expensesInUsd = lineItems.reduce((acc, cur) => acc + cur.expenses, 0);\n  const laborInHours = laborInMinutes / 60;\n\n  return laborInHours * rate + expensesInUsd; // total\n};\n\nexport const getInvoiceTotalLabor = (lineItems) =>\n  flow(\n    map(({ labor }) => labor),\n    sum\n  )(lineItems);\n\nconst getSubContractorsInfo = (lineItems) =>\n  filter(isSubContractorLineItem)(lineItems);\n\nexport const getSubContractorTotalLabor = (lineItems) =>\n  flow(getSubContractorsInfo, getInvoiceTotalLabor)(lineItems);\n\nexport const getSubContractorRate = (lineItems) =>\n  flow(getSubContractorsInfo, head, get(\"subrate\"))(lineItems);\n\nexport const getSubContractor = (lineItems, subContractors = []) => {\n  const id = flow(getSubContractorsInfo, head, get(\"subuserid\"))(lineItems);\n  return subContractors.find((sc) => sc.id === id);\n};\n","import React, { useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Spinner, Card, Table, H3, Message, Link as PiLink } from \"pi-ui\";\nimport { useProposalBillingDetails } from \"./hooks\";\nimport { GoBackLink } from \"src/components/Router\";\nimport get from \"lodash/fp/get\";\nimport Link from \"src/components/Link\";\nimport ExportToCsv from \"src/components/ExportToCsv\";\nimport { usdFormatter, formatCentsToUSD } from \"src/utils\";\nimport { fromMinutesToHours } from \"src/helpers\";\nimport {\n  getInvoiceTotalLabor,\n  getInvoiceTotalExpenses,\n  getInvoiceTotal,\n  getSubContractorTotal,\n  TABLE_HEADERS,\n  getSubContractorTotalLabor,\n  getSubContractorRate,\n  getSubContractor\n} from \"./helpers\";\nimport styles from \"./ProposalBillingDetails.module.css\";\nimport { useSubContractors } from \"src/hooks\";\n\nconst SubContractorReference = ({ username = \"\", userid = \"\", value }) => {\n  const [show, setShow] = useState();\n  return (\n    <div\n      onMouseEnter={() => setShow(true)}\n      onMouseLeave={() => setShow(false)}\n      className={styles.value}\n    >\n      {value}*\n      {show && (\n        <Link className={styles.reference} to={`/user/${userid}`}>\n          <b>Sub Contractor:</b> {username}\n        </Link>\n      )}\n    </div>\n  );\n};\n\nconst getDetailsData = (invoices, subContractors) =>\n  (invoices &&\n    invoices.map(({ username, userid, censorshiprecord: { token }, input }) => {\n      const totalUsd = getInvoiceTotal(input.contractorrate, input.lineitems);\n      const totalDcr = totalUsd / input.exchangerate;\n      const totalLabor = getInvoiceTotalLabor(input.lineitems);\n      const totalExpenses = getInvoiceTotalExpenses(input ? { input } : null);\n      const subContractorTotalLabor = getSubContractorTotalLabor(\n        input.lineitems\n      );\n      let detailsData = {\n        month: input.month,\n        year: input.year,\n        user: <Link to={`/user/${userid}`}>{username}</Link>,\n        contractorrate: usdFormatter.format(input.contractorrate / 100),\n        exchangerate: usdFormatter.format(input.exchangerate / 100),\n        labor: fromMinutesToHours(totalLabor),\n        expensetotal: usdFormatter.format(totalExpenses),\n        totaldcr: totalDcr.toFixed(8),\n        totalusd: usdFormatter.format(totalUsd / 100),\n        invoice: <Link to={`/invoices/${token}`}>{token}</Link>\n      };\n      if (subContractorTotalLabor && !totalExpenses) {\n        const subContractorTotal = getSubContractorTotal(input.lineitems);\n        const subContractorTotalDcr = subContractorTotal / input.exchangerate;\n        const subContractorRate = getSubContractorRate(input.lineitems);\n        const { username, id } = getSubContractor(\n          input.lineitems,\n          subContractors\n        );\n        detailsData = {\n          ...detailsData,\n          totalusd: (\n            <SubContractorReference\n              value={usdFormatter.format(subContractorTotal / 100)}\n              username={username}\n              userid={id}\n            />\n          ),\n          totaldcr: (\n            <SubContractorReference\n              value={subContractorTotalDcr.toFixed(8)}\n              username={username}\n              userid={id}\n            />\n          ),\n          labor: (\n            <SubContractorReference\n              value={fromMinutesToHours(subContractorTotalLabor)}\n              username={username}\n              userid={id}\n            />\n          ),\n          contractorrate: (\n            <SubContractorReference\n              value={usdFormatter.format(subContractorRate / 100)}\n              username={username}\n              userid={id}\n            />\n          )\n        };\n      }\n      return detailsData;\n    })) ||\n  [];\n\nconst ProposalBillingDetails = ({ TopBanner, PageDetails, Main, match }) => {\n  const [error, setError] = useState();\n  const tokenFromUrl = get(\"params.token\", match);\n  const { getSpendingDetails, proposalBillingDetails, loading } =\n    useProposalBillingDetails(tokenFromUrl);\n\n  const {\n    subContractors,\n    loading: loadingSubContractors,\n    error: subContractorsError\n  } = useSubContractors();\n\n  useEffect(() => {\n    getSpendingDetails(tokenFromUrl).catch((e) => setError(e));\n  }, [getSpendingDetails, tokenFromUrl]);\n\n  const isTotalZero =\n    proposalBillingDetails &&\n    proposalBillingDetails.totalbilled === 0 &&\n    proposalBillingDetails.invoices.length === 0;\n  const isDetailsLoaded =\n    proposalBillingDetails && !loading && !loadingSubContractors;\n\n  const anyError = subContractorsError || error;\n\n  const proposalDetailsData =\n    isDetailsLoaded &&\n    getDetailsData(proposalBillingDetails.invoices, subContractors).sort(\n      (a, b) => b.year - a.year || b.month - a.month\n    );\n\n  return (\n    <>\n      <TopBanner>\n        <PageDetails\n          title={`Proposal Billing Details: ${\n            isDetailsLoaded ? proposalBillingDetails.title : \"\"\n          }`}\n          subtitle={isDetailsLoaded ? proposalBillingDetails.token : \"\"}\n          actionsContent={null}\n        />\n      </TopBanner>\n      <Main fillScreen>\n        <GoBackLink />\n        {anyError ? (\n          <Message kind=\"error\">{anyError.toString()}</Message>\n        ) : !isDetailsLoaded ? (\n          <div className={styles.spinnerWrapper}>\n            <Spinner invert />\n          </div>\n        ) : isTotalZero ? (\n          <Card paddingSize=\"small\">\n            There are no billings for this proposal yet\n          </Card>\n        ) : (\n          <Card paddingSize=\"small\" className={styles.tableWrapper}>\n            <Table\n              className={styles.table}\n              data={proposalDetailsData}\n              headers={TABLE_HEADERS}\n              linesPerPage={50}\n            />\n            <ExportToCsv\n              data={proposalDetailsData.map(\n                ({\n                  month,\n                  year,\n                  user,\n                  contractorrate,\n                  exchangerate,\n                  labor,\n                  expensetotal,\n                  totaldcr,\n                  totalusd,\n                  invoice\n                }) => ({\n                  month: `${month}/${year}`,\n                  username: user.props.children,\n                  contractorrate,\n                  exchangerate,\n                  labor,\n                  expensetotal,\n                  totaldcr,\n                  totalusd,\n                  invoice: invoice.props.children\n                })\n              )}\n              fields={[\n                \"month\",\n                \"username\",\n                \"contractorrate\",\n                \"exchangerate\",\n                \"labor\",\n                \"expensetotal\",\n                \"totaldcr\",\n                \"totalusd\",\n                \"invoice\"\n              ]}\n              filename=\"proposal_details.csv\"\n            >\n              <PiLink className=\"cursor-pointer\">Export To Csv</PiLink>\n            </ExportToCsv>\n            <H3 className={styles.totalText}>\n              Total: {formatCentsToUSD(proposalBillingDetails.totalbilled)}\n            </H3>\n          </Card>\n        )}\n      </Main>\n    </>\n  );\n};\n\nexport default withRouter(ProposalBillingDetails);\n","import ProposalBillingDetails from \"./ProposalBillingDetails\";\n\nexport default ProposalBillingDetails;\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\n\nexport function useProposalBillingDetails() {\n  const proposalBillingDetails = useSelector(sel.proposalBillingDetails);\n  const loading = useSelector(sel.isApiRequestingProposalBillingDetails);\n  const getSpendingDetails = useAction(act.onFetchSpendingDetails);\n\n  return {\n    loading,\n    proposalBillingDetails,\n    getSpendingDetails\n  };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"../../components/layout/MultipleContentPage\";\nimport ProposalBillingDetails from \"src/containers/Invoice/ProposalBillingDetails\";\nimport { AdminInvoiceActionsProvider } from \"src/containers/Invoice/Actions\";\n\nconst ProposalsBilling = () => {\n  return (\n    <MultipleContentPage disableScrollToTop topBannerHeight={140}>\n      {(props) => (\n        <AdminInvoiceActionsProvider>\n          <ProposalBillingDetails {...props} />\n        </AdminInvoiceActionsProvider>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default ProposalsBilling;\n","import useFetchMachine, { FETCH, RESOLVE, REJECT } from \"./useFetchMachine\";\n\nconst DEFAULT_ARGS = [];\n\n/**\n * useFetchOnce hook uses the fetch machine to control loading and error states for\n * given action(args) if enabled.\n * @param {function} action\n * @param {array} args\n * @param {boolean} enabled\n */\nfunction useFetchOnce(action, args = DEFAULT_ARGS, enabled = true) {\n  const [state, send] = useFetchMachine({\n    actions: {\n      initial: () => {\n        if (!enabled) return;\n        action(...(args || []))\n          .then(() => send(RESOLVE))\n          .catch((e) => send(REJECT, { error: e }));\n        return send(FETCH);\n      }\n    }\n  });\n  return [state.loading, state.error];\n}\n\nexport default useFetchOnce;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Text } from \"pi-ui\";\nimport styles from \"./DCC.module.css\";\n\nconst Field = ({ label, value, renderValue }) => {\n  return (\n    <div className={styles.field}>\n      <Text size=\"small\">{label}</Text>\n      {renderValue ? renderValue(value) : <Text size=\"large\">{value}</Text>}\n    </div>\n  );\n};\n\nField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.any,\n  renderValue: PropTypes.func\n};\n\nexport default Field;\n","import { useMemo } from \"react\";\nimport { useAction, useSelector } from \"src/redux\";\nimport { createContext, useContext, useCallback } from \"react\";\nimport * as act from \"src/actions\";\nimport * as sel from \"src/selectors\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport { isUserValidContractor } from \"../helpers\";\nimport {\n  DCC_OPPOSE_ACTION,\n  DCC_SUPPORT_ACTION,\n  DCC_STATUS_APPROVED,\n  DCC_STATUS_REJECTED\n} from \"../constants\";\n\nexport const adminDccsActionsContext = createContext();\nexport const useAdminDccActions = () => useContext(adminDccsActionsContext);\n\nexport const useDccActions = (dccToken) => {\n  const onSupportOpposeDcc = useAction(act.onSupportOpposeDcc);\n\n  const onFetchUsers = useAction(act.onFetchCmsUsers);\n  const user = useSelector(sel.currentCmsUser);\n  const userID = useSelector(sel.currentUserID);\n  const [loading, error] = useAPIAction(onFetchUsers, null, !user);\n\n  const onSupportDcc = () => onSupportOpposeDcc(dccToken, DCC_SUPPORT_ACTION);\n  const onOpposeDcc = () => onSupportOpposeDcc(dccToken, DCC_OPPOSE_ACTION);\n\n  const isContractor = useMemo(\n    () => user && isUserValidContractor(user),\n    [user]\n  );\n\n  return {\n    onSupportDcc,\n    onOpposeDcc,\n    loading,\n    userID,\n    error,\n    isContractor\n  };\n};\n\nexport const useAdminActions = () => {\n  const onSetDccStatus = useAction(act.onSetDccStatus);\n\n  const onApproveDcc = useCallback(\n    (dcc) => (reason) =>\n      onSetDccStatus(dcc.censorshiprecord.token, DCC_STATUS_APPROVED, reason),\n    [onSetDccStatus]\n  );\n\n  const onRejectDcc = useCallback(\n    (dcc) => (reason) =>\n      onSetDccStatus(dcc.censorshiprecord.token, DCC_STATUS_REJECTED, reason),\n    [onSetDccStatus]\n  );\n\n  return {\n    onApproveDcc,\n    onRejectDcc\n  };\n};\n","import React from \"react\";\nimport { useAdminActions, adminDccsActionsContext } from \"./hooks\";\nimport { Text } from \"pi-ui\";\nimport ModalConfirmWithReason from \"src/components/ModalConfirmWithReason\";\nimport { presentationalDccName } from \"src/containers/DCC/helpers\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst AdminActionsProvider = ({ children }) => {\n  const { onRejectDcc, onApproveDcc } = useAdminActions();\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenRejectModal = (dcc) => {\n    handleOpenModal(ModalConfirmWithReason, {\n      title: `Reject ${presentationalDccName(dcc)}`,\n      reasonLabel: \"Reject reason\",\n      subject: \"rejectDcc\",\n      onSubmit: onRejectDcc(dcc),\n      successTitle: \"DCC rejected\",\n      successMessage: <Text>The dcc has been successfully rejected!</Text>,\n      onClose: handleCloseModal\n    });\n  };\n\n  const handleOpenApproveModal = (dcc) => {\n    handleOpenModal(ModalConfirmWithReason, {\n      title: `Approve ${presentationalDccName(dcc)}`,\n      reasonLabe: \"Approve reason\",\n      subject: \"approveDcc\",\n      onSubmit: onApproveDcc(dcc),\n      successTitle: \"DCC approved\",\n      successMessage: <Text>The dcc has been successfully approved!</Text>,\n      onClose: handleCloseModal\n    });\n  };\n\n  return (\n    <adminDccsActionsContext.Provider\n      value={{\n        onReject: handleOpenRejectModal,\n        onApprove: handleOpenApproveModal\n      }}\n    >\n      {children}\n    </adminDccsActionsContext.Provider>\n  );\n};\n\nexport default AdminActionsProvider;\n","import React, { useCallback } from \"react\";\nimport { Dropdown, DropdownItem } from \"pi-ui\";\nimport { useAdminDccActions } from \"./hooks\";\nimport AdminContent from \"src/components/AdminContent\";\nimport { isDccActive } from \"../helpers\";\n\nconst DccActions = ({ dcc, className }) => {\n  if (!useAdminDccActions()) {\n    throw Error(\n      \"Admin dccs actions requires an 'AdminActionsProvider' on a higher level of the component tree. \"\n    );\n  }\n  const { onApprove, onReject } = useAdminDccActions();\n\n  const withDcc = useCallback(\n    (fn) => () => {\n      fn(dcc);\n    },\n    [dcc]\n  );\n\n  return isDccActive(dcc) ? (\n    <AdminContent>\n      <div className={className}>\n        <Dropdown title=\"Approve/Reject DCC\" itemsListClassName=\"full-width\">\n          <DropdownItem onClick={withDcc(onApprove)}>Approve</DropdownItem>\n          <DropdownItem onClick={withDcc(onReject)}>Reject</DropdownItem>\n        </Dropdown>\n      </div>\n    </AdminContent>\n  ) : null;\n};\n\nexport default DccActions;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, Tabs, Tab, Card } from \"pi-ui\";\nimport Link from \"src/components/Link\";\nimport styles from \"./ModalVotesList.module.css\";\n\nconst VotesList = ({ options, currentID }) => (\n  <div className={styles.list}>\n    {options.length ? (\n      options.map((op) => (\n        <Card\n          key={op.value}\n          marker={op.value === currentID}\n          className={styles.card}\n        >\n          <Link to={`/user/${op.value}`}>{op.label}</Link>\n        </Card>\n      ))\n    ) : (\n      <Card>No votes yet</Card>\n    )}\n  </div>\n);\n\nconst ModalVotesList = ({\n  supportList,\n  againstList,\n  neutralList,\n  show,\n  onClose,\n  currentID\n}) => {\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\n  return (\n    <Modal onClose={onClose} show={show}>\n      <Tabs onSelectTab={setActiveTabIndex} activeTabIndex={activeTabIndex}>\n        <Tab label=\"support\" count={supportList.length}>\n          <VotesList options={supportList} currentID={currentID} />\n        </Tab>\n        <Tab label=\"against\" count={againstList.length}>\n          <VotesList options={againstList} currentID={currentID} />\n        </Tab>\n        {neutralList && (\n          <Tab label=\"neutral\" count={neutralList.length}>\n            <VotesList options={neutralList} currentID={currentID} />\n          </Tab>\n        )}\n      </Tabs>\n    </Modal>\n  );\n};\n\nconst elementListShape = PropTypes.shape({\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired\n});\n\nModalVotesList.propTypes = {\n  supportList: PropTypes.arrayOf(elementListShape),\n  opposeList: PropTypes.arrayOf(elementListShape),\n  neutralList: PropTypes.arrayOf(elementListShape),\n  show: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  currentID: PropTypes.string\n};\n\nexport default ModalVotesList;\n","import React, { useMemo, useCallback } from \"react\";\nimport {\n  Button,\n  Dropdown,\n  DropdownItem,\n  StatusBar,\n  useMediaQuery,\n  Link,\n  Message,\n  classNames\n} from \"pi-ui\";\nimport {\n  dccSupportOpposeStatus,\n  dccSupportOpposeList,\n  isDccSupportOpposeAvailable\n} from \"../helpers\";\nimport { useDccActions } from \"./hooks\";\nimport ModalVotesList from \"src/components/ModalVotesList\";\nimport ModalConfirm from \"src/components/ModalConfirm\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst SupportOpposeActions = ({ dcc, token, className, buttonsClassName }) => {\n  const { onSupportDcc, onOpposeDcc, userID, isContractor, loading, error } =\n    useDccActions(token);\n\n  const mobile = useMediaQuery(\"(max-width: 560px)\");\n\n  const { supportuserids, supportusernames, againstuserids, againstusernames } =\n    dcc;\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const handleOpenVotesList = () => {\n    handleOpenModal(ModalVotesList, {\n      supportList: dccSupportOpposeList(supportuserids, supportusernames),\n      againstList: dccSupportOpposeList(againstuserids, againstusernames),\n      onClose: handleCloseModal,\n      currentID: userID\n    });\n  };\n\n  const handleOpenModalConfirm = useCallback(\n    (action) => {\n      handleOpenModal(ModalConfirm, {\n        onClose: handleCloseModal,\n        onSubmit: action,\n        title: \"Support/Oppose DCC\"\n      });\n    },\n    [handleCloseModal, handleOpenModal]\n  );\n\n  const handleSupportDcc = useCallback(() => {\n    handleOpenModalConfirm(onSupportDcc);\n  }, [handleOpenModalConfirm, onSupportDcc]);\n\n  const handleOpposeDcc = useCallback(() => {\n    handleOpenModalConfirm(onOpposeDcc);\n  }, [handleOpenModalConfirm, onOpposeDcc]);\n\n  const isVotingAvailable = useMemo(\n    () => isDccSupportOpposeAvailable(userID, dcc) && isContractor,\n    [dcc, userID, isContractor]\n  );\n\n  const supportButton = <Button onClick={handleSupportDcc}>Support</Button>;\n\n  const opposeButton = (\n    <Button kind=\"secondary\" onClick={handleOpposeDcc}>\n      Oppose\n    </Button>\n  );\n\n  return error ? (\n    <Message kind=\"error\">\n      Could not fetch user list. {error.toString()}\n    </Message>\n  ) : (\n    !loading && (\n      <>\n        {}\n        <div className={className}>\n          <StatusBar\n            status={dccSupportOpposeStatus(supportuserids, againstuserids)}\n            showMarker={false}\n            renderStatusInfoComponent={\n              <Link href=\"#\" onClick={handleOpenVotesList}>\n                Votes\n              </Link>\n            }\n          />\n        </div>\n        {isVotingAvailable && !mobile && (\n          <div\n            className={classNames(\n              \"margin-top-s justify-right\",\n              buttonsClassName\n            )}\n          >\n            {supportButton}\n            {opposeButton}\n          </div>\n        )}\n        {isVotingAvailable && mobile && (\n          <Dropdown title=\"Support/Oppose\">\n            <DropdownItem>{supportButton}</DropdownItem>\n            <DropdownItem>{opposeButton}</DropdownItem>\n          </Dropdown>\n        )}\n      </>\n    )\n  );\n};\n\nexport default SupportOpposeActions;\n","import { StatusTag, Text, classNames } from \"pi-ui\";\nimport React from \"react\";\nimport RecordWrapper from \"src/components/RecordWrapper\";\nimport Field from \"./Field\";\nimport styles from \"./DCC.module.css\";\nimport {\n  presentationalDccName,\n  getDccStatusTagProps,\n  presentationalDccType,\n  presentationalDccContractorType,\n  presentationalStatement,\n  isRevocationDcc,\n  isDccActive,\n  isDccApproved\n} from \"src/containers/DCC/helpers\";\nimport { SupportOppose, DccActions } from \"src/containers/DCC/Actions\";\nimport { usePolicy } from \"src/hooks\";\nimport { getContractorDomains, getDomainName } from \"src/helpers\";\n\nconst Dcc = ({ dcc, extended }) => {\n  const {\n    censorshiprecord,\n    dccpayload,\n    timesubmitted,\n    sponsoruserid,\n    nomineeusername,\n    sponsorusername,\n    statuschangereason,\n    timereviewed\n  } = dcc;\n\n  const {\n    policy: { supporteddomains }\n  } = usePolicy();\n  const contractorDomains = getContractorDomains(supporteddomains);\n  const isActive = isDccActive(dcc);\n  const dccToken = censorshiprecord && censorshiprecord.token;\n  const dccURL = `/dccs/${dccToken}`;\n  const dccDomain = dccpayload && dccpayload.domain;\n  const dccContractorType = dccpayload && dccpayload.contractortype;\n  const dccStatement = dccpayload && dccpayload.statement;\n  const domainName = getDomainName(contractorDomains, dccDomain);\n\n  return (\n    <RecordWrapper>\n      {({\n        Author,\n        Event,\n        Row,\n        Title,\n        Header,\n        Subtitle,\n        Status,\n        RecordToken\n      }) => {\n        return (\n          <>\n            <Header\n              title={\n                <Title\n                  id={`dcc-title-${dccToken}`}\n                  truncate\n                  linesBeforeTruncate={2}\n                  url={extended ? \"\" : dccURL}\n                >\n                  {presentationalDccName(dcc)}\n                </Title>\n              }\n              subtitle={\n                <Subtitle>\n                  <Author\n                    username={sponsorusername}\n                    url={`/user/${sponsoruserid}`}\n                  />\n                  {!extended && !isRevocationDcc(dcc) && (\n                    <Text>\n                      {presentationalDccContractorType(dccContractorType)}\n                    </Text>\n                  )}\n                  {!extended && <Text>{domainName}</Text>}\n                  <Event event=\"submitted\" timestamp={timesubmitted} />\n                  {timereviewed && (\n                    <Event\n                      event={isDccApproved(dcc) ? \"approved\" : \"rejected\"}\n                      timestamp={timereviewed}\n                    />\n                  )}\n                  {!isActive && !extended && <Text>{statuschangereason}</Text>}\n                </Subtitle>\n              }\n              status={\n                <Status>\n                  <StatusTag\n                    className={styles.statusTag}\n                    {...getDccStatusTagProps(dcc)}\n                  />\n                </Status>\n              }\n            />\n            {extended && (\n              <>\n                <Row topMarginSize=\"s\">\n                  <RecordToken token={dccToken} />\n                </Row>\n                <Row\n                  justify=\"space-between\"\n                  bottomMarginSize=\"m\"\n                  className={styles.topDetails}\n                >\n                  <Field label=\"Type\" value={presentationalDccType(dcc)} />\n                  <Field label=\"Nominee\" value={nomineeusername} />\n                  <Field label=\"Domain\" value={domainName} />\n                  {!isRevocationDcc(dcc) && (\n                    <Field\n                      label=\"Contractor Type\"\n                      value={presentationalDccContractorType(dccContractorType)}\n                    />\n                  )}\n                </Row>\n                <Row justify=\"space-between\" className={styles.topDetails}>\n                  <div className={styles.field}>\n                    <Text size=\"small\">Statement</Text>\n                    <Text className={styles.statement}>\n                      {presentationalStatement(dccStatement)}\n                    </Text>\n                  </div>\n                </Row>\n                {!isActive && (\n                  <Row justify=\"space-between\" className={styles.topDetails}>\n                    <div className={styles.field}>\n                      <Text size=\"small\">Status change reason</Text>\n                      <Text>{statuschangereason}</Text>\n                    </div>\n                  </Row>\n                )}\n                <SupportOppose\n                  className={styles.supportOpposeBar}\n                  buttonsClassName={styles.supportOpposeButtons}\n                  dcc={dcc}\n                  token={dccToken}\n                />\n              </>\n            )}\n            <DccActions\n              dcc={dcc}\n              className={classNames(\n                !extended && \"justify-right margin-bottom-xs\",\n                styles.dccActions\n              )}\n            />\n          </>\n        );\n      }}\n    </RecordWrapper>\n  );\n};\n\nexport default React.memo(Dcc);\n","import React from \"react\";\nimport RecordWrapper from \"../RecordWrapper\";\nimport { useMediaQuery, getThemeProperty, useTheme } from \"pi-ui\";\nimport ContentLoader from \"react-content-loader\";\n\nconst ExtraSmallContentLoader = ({\n  extended,\n  yOffset,\n  primaryColor,\n  secondaryColor\n}) => (\n  <ContentLoader\n    height={extended ? 300 : 170}\n    width={400}\n    speed={2}\n    primaryColor={primaryColor}\n    secondaryColor={secondaryColor}\n  >\n    <rect x=\"0\" y=\"0\" width=\"180\" height=\"10\" />\n    <rect x=\"0\" y=\"20\" width=\"360\" height=\"20\" />\n    <rect x=\"0\" y=\"60\" width=\"80\" height=\"20\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"100\" width=\"20\" height=\"14\" />\n        <rect x=\"30\" y=\"100\" width=\"400\" height=\"14\" />\n        <rect x=\"0\" y=\"134\" width=\"400\" height=\"1\" />\n        <rect x=\"0\" y=\"154\" width=\"200\" height=\"12\" />\n        <rect x=\"0\" y=\"180\" width=\"400\" height=\"12\" />\n        <rect x=\"0\" y=\"212\" width=\"400\" height=\"1\" />\n      </>\n    )}\n    <rect x=\"0\" y={`${156 + yOffset}`} width=\"130\" height=\"14\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"220\" width=\"140\" height=\"20\" />\n        <rect x=\"150\" y=\"220\" width=\"140\" height=\"20\" />\n      </>\n    )}\n  </ContentLoader>\n);\n\nconst RegularContentLoader = ({\n  extended,\n  yOffset,\n  primaryColor,\n  secondaryColor\n}) => (\n  <ContentLoader\n    height={extended ? 240 : 100}\n    width={800}\n    speed={2}\n    primaryColor={primaryColor}\n    secondaryColor={secondaryColor}\n  >\n    <rect x=\"0\" y=\"0\" width=\"600\" height=\"20\" />\n    <rect x=\"700\" y=\"0\" width=\"100\" height=\"20\" />\n    <rect x=\"0\" y=\"40\" width=\"100\" height=\"10\" />\n    <rect x=\"110\" y=\"40\" width=\"200\" height=\"10\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"60\" width=\"20\" height=\"14\" />\n        <rect x=\"30\" y=\"60\" width=\"500\" height=\"14\" />\n        <rect x=\"0\" y=\"100\" width=\"800\" height=\"1\" />\n        <rect x=\"0\" y=\"120\" width=\"600\" height=\"12\" />\n        <rect x=\"0\" y=\"136\" width=\"800\" height=\"12\" />\n        <rect x=\"0\" y=\"164\" width=\"800\" height=\"1\" />\n      </>\n    )}\n    <rect x=\"0\" y={`${80 + yOffset}`} width=\"130\" height=\"14\" />\n    {extended && (\n      <>\n        <rect x=\"0\" y=\"220\" width=\"140\" height=\"20\" />\n        <rect x=\"150\" y=\"220\" width=\"140\" height=\"20\" />\n      </>\n    )}\n  </ContentLoader>\n);\n\nconst DccLoader = ({ extended }) => {\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  const yOffset = extended ? 100 : 0;\n  const { theme } = useTheme();\n  const primaryColor = getThemeProperty(theme, \"card-background\");\n  const secondaryColor = getThemeProperty(theme, \"dimmed-card-background\");\n  return (\n    <RecordWrapper>\n      {() =>\n        extraSmall ? (\n          <ExtraSmallContentLoader\n            {...{ extended, yOffset, primaryColor, secondaryColor }}\n          />\n        ) : (\n          <RegularContentLoader\n            {...{ extended, yOffset, primaryColor, secondaryColor }}\n          />\n        )\n      }\n    </RecordWrapper>\n  );\n};\n\nexport default DccLoader;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Message } from \"pi-ui\";\nimport get from \"lodash/fp/get\";\nimport { useDcc } from \"./hooks\";\nimport Dcc from \"src/components/DCC\";\nimport DccLoader from \"src/components/DCC/DccLoader\";\nimport Comments from \"src/containers/Comments\";\nimport { AdminDccActionsProvider } from \"src/containers/DCC/Actions\";\nimport { isDccActive } from \"../helpers\";\nimport { GoBackLink } from \"src/components/Router\";\n\nconst DccDetail = ({ Main, match }) => {\n  const dccToken = get(\"params.token\", match);\n  const threadParentCommentID = get(\"params.commentid\", match);\n  const { dcc, loading, error } = useDcc(dccToken);\n  const dccLink = `/dccs/${dccToken}`;\n  return (\n    <>\n      <Main fillScreen>\n        <AdminDccActionsProvider>\n          <GoBackLink />\n          {error ? (\n            <Message kind=\"error\">{error.toString()}</Message>\n          ) : dcc && !loading ? (\n            <Dcc dcc={dcc} extended />\n          ) : (\n            <DccLoader extended />\n          )}\n          <Comments\n            recordAuthorID={dcc && dcc.sponsoruserid}\n            recordToken={dccToken}\n            threadParentID={threadParentCommentID}\n            readOnly={dcc && !isDccActive(dcc)}\n            readOnlyReason={\n              \"This DCC can no longer receive comments due its current status.\"\n            }\n            recordBaseLink={dccLink}\n          />\n        </AdminDccActionsProvider>\n      </Main>\n    </>\n  );\n};\n\nexport default withRouter(DccDetail);\n","import { useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport useFetchOnce from \"src/hooks/utils/useFetchOnce\";\n\nexport function useDcc(dccToken) {\n  const dccSelector = useMemo(\n    () => sel.makeGetDccByToken(dccToken),\n    [dccToken]\n  );\n  const dcc = useSelector(dccSelector);\n  const onFetchDcc = useAction(act.onFetchDcc);\n\n  const [loading, error] = useFetchOnce(onFetchDcc, [dccToken], !dcc);\n\n  return { dcc, loading, error };\n}\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport DccDetail from \"src/containers/DCC/Detail\";\n\nconst DccDetailPage = () => {\n  return (\n    <MultipleContentPage topBannerHeight={0}>\n      {(props) => {\n        return <DccDetail {...props} />;\n      }}\n    </MultipleContentPage>\n  );\n};\n\nexport default DccDetailPage;\n","import React from \"react\";\nimport { useDccs } from \"./hooks\";\nimport { Spinner, Tabs, Tab } from \"pi-ui\";\nimport Dcc from \"src/components/DCC\";\nimport HelpMessage from \"src/components/HelpMessage\";\nimport styles from \"./List.module.css\";\nimport { AdminDccActionsProvider } from \"src/containers/DCC/Actions\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { presentationalStatus } from \"../helpers\";\n\nconst ListDccs = ({ TopBanner, PageDetails, Main }) => {\n  const { loading, dccs, handleTabChange, status } = useDccs();\n\n  const renderDccs = (dccs) =>\n    dccs &&\n    dccs.map((dcc) => (\n      <Dcc key={`dcc-${dcc.censorshiprecord.token}`} dcc={dcc} />\n    ));\n\n  return (\n    <>\n      <TopBanner>\n        <PageDetails title=\"DCCs\">\n          <Tabs onSelectTab={handleTabChange} activeTabIndex={status - 1}>\n            <Tab label=\"Active\" />\n            <Tab label=\"Approved\" />\n            <Tab label=\"Rejected\" />\n          </Tabs>\n        </PageDetails>\n      </TopBanner>\n      <Main fillScreen>\n        {loading && (\n          <div className={styles.spinnerWrapper}>\n            <Spinner invert />\n          </div>\n        )}\n        {!loading && dccs && (\n          <AdminDccActionsProvider>{renderDccs(dccs)}</AdminDccActionsProvider>\n        )}\n        {!loading && isEmpty(dccs) && (\n          <HelpMessage>\n            There are no {presentationalStatus(status)} DCCs\n          </HelpMessage>\n        )}\n      </Main>\n    </>\n  );\n};\n\nexport default ListDccs;\n","import { useState, useCallback, useMemo, useEffect } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector, useStoreSubscribe } from \"src/redux\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport useThrowError from \"src/hooks/utils/useThrowError\";\nimport { DCC_STATUS_ACTIVE, sortDccsByTimestamp } from \"src/containers/DCC\";\nimport { handleSaveAppDraftDccs } from \"src/lib/local_storage\";\n\nexport function useDccs() {\n  const [status, setStatus] = useState(DCC_STATUS_ACTIVE);\n\n  const dccsByStatus = useSelector(sel.dccsByStatus);\n  const onFetchDccs = useAction(act.onFetchDccsByStatus);\n\n  const [loading, error] = useAPIAction(onFetchDccs);\n\n  const dccs = useMemo(() => {\n    const unorderedDccs = dccsByStatus && dccsByStatus[status];\n    const sortedDccs = sortDccsByTimestamp(unorderedDccs);\n    return sortedDccs;\n  }, [dccsByStatus, status]);\n\n  const handleTabChange = useCallback(\n    (tabIndex) => {\n      setStatus(tabIndex + 1);\n    },\n    [setStatus]\n  );\n\n  useThrowError(error);\n\n  return { dccs: dccs || [], loading, status, handleTabChange };\n}\n\nexport function useDraftDccs() {\n  const onLoadDraftDccs = useAction(act.onLoadDraftDccs);\n  const onSaveDraftDcc = useAction(act.onSaveDraftDcc);\n  const onDeleteDraftDcc = useAction(act.onDeleteDraftDcc);\n\n  const draftDccs = useSelector(sel.draftDccs);\n\n  const [unsubscribe] = useState(useStoreSubscribe(handleSaveAppDraftDccs));\n\n  useEffect(() => {\n    if (!draftDccs) {\n      onLoadDraftDccs();\n    }\n  }, [onLoadDraftDccs, draftDccs]);\n\n  useEffect(\n    function unsubscribeFromStore() {\n      return unsubscribe;\n    },\n    [unsubscribe]\n  );\n\n  return {\n    onLoadDraftDccs,\n    draftDccs,\n    onSaveDraftDcc,\n    onDeleteDraftDcc\n  };\n}\n","import React from \"react\";\n\nimport { useMediaQuery } from \"pi-ui\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport ListDccs from \"src/containers/DCC/List\";\n\nconst DccList = () => {\n  const mobile = useMediaQuery(\"(max-width: 760px)\");\n  return (\n    <MultipleContentPage\n      disableScrollToTop\n      topBannerHeight={mobile ? 160 : 140}\n    >\n      {(props) => <ListDccs {...props} />}\n    </MultipleContentPage>\n  );\n};\n\nexport default DccList;\n","import * as Yup from \"yup\";\nimport { DCC_TYPE_ISSUANCE } from \"src/containers/DCC\";\nimport { yupFieldMatcher } from \"src/utils/validation\";\n\nexport const dccValidationSchema = ({ cmsstatementsupportedchars }) =>\n  Yup.object().shape({\n    nomineeid: Yup.string().required(\"required\"),\n    type: Yup.number().required(\"required\").min(1).max(2),\n    statement: Yup.string()\n      .required(\"required\")\n      .max(5000)\n      .matches(...yupFieldMatcher(\"Statement\", cmsstatementsupportedchars)),\n    domain: Yup.number().when(\"type\", issuanceFieldValidator).max(6),\n    contractortype: Yup.number().when(\"type\", issuanceFieldValidator).max(5)\n  });\n\nconst issuanceFieldValidator = (type, schema) =>\n  type === DCC_TYPE_ISSUANCE ? schema.min(1, \"required\") : schema.min(0);\n","import React, { useEffect, useState } from \"react\";\nimport { Button } from \"pi-ui\";\nimport { FormikConsumer } from \"formik\";\nimport { useDraftDccs } from \"src/containers/DCC/User/hooks\";\nimport useQueryString from \"src/hooks/utils/useQueryString\";\nimport delay from \"lodash/delay\";\n\nconst DraftSaver = ({ values, setValues, submitSuccess }) => {\n  const [draftId, setDraftId] = useQueryString(\"draft\");\n  const {\n    draftDccs,\n    onDeleteDraftDcc: onDelete,\n    onSaveDraftDcc: onSave\n  } = useDraftDccs();\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n\n  const canSaveDraft = values && !!values.type && !!values.nomineeid && !saved;\n\n  const executeFakeLoading = () => {\n    setSaving(true);\n    delay(() => {\n      setSaved(true);\n      setSaving(false);\n    }, 300);\n  };\n\n  const handleSave = () => {\n    const id = onSave({ id: draftId, ...values });\n    // first time saving this draft\n    if (!draftId) {\n      setDraftId(id);\n    }\n    executeFakeLoading();\n  };\n\n  useEffect(\n    function resetSaved() {\n      setSaved(false);\n    },\n    [values, setSaved]\n  );\n\n  useEffect(\n    function handleSubmitSuccess() {\n      if (submitSuccess && draftId) {\n        onDelete(draftId);\n      }\n    },\n    [submitSuccess, draftId, onDelete]\n  );\n\n  useEffect(\n    function handleInitializeFormFromDraft() {\n      const foundDraftDcc = draftDccs && draftId && draftDccs[draftId];\n      if (foundDraftDcc) {\n        setValues(foundDraftDcc);\n      }\n    },\n    [draftDccs, draftId, setValues]\n  );\n  return (\n    <Button\n      type=\"button\"\n      kind={saving || !canSaveDraft ? \"disabled\" : \"secondary\"}\n      loading={saving}\n      onClick={handleSave}\n    >\n      {saved ? \"Saved ✓\" : \"Save Draft\"}\n    </Button>\n  );\n};\n\nconst Wrapper = (props) => {\n  return (\n    <FormikConsumer>\n      {(formikProps) => {\n        return <DraftSaver {...{ ...props, ...formikProps }} />;\n      }}\n    </FormikConsumer>\n  );\n};\n\nexport default Wrapper;\n","import React, { useMemo, useState, useCallback, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Message, RadioButtonGroup, classNames, TextArea } from \"pi-ui\";\nimport { Formik, Field } from \"formik\";\nimport SelectField from \"src/components/Select/SelectField\";\nimport { withRouter } from \"react-router-dom\";\nimport { dccValidationSchema } from \"./validation\";\nimport DraftSaver from \"./DraftSaver\";\nimport styles from \"./DccForm.module.css\";\nimport {\n  getContractorTypeOptions,\n  getDccTypeOptions,\n  getNomineeOptions,\n  DCC_TYPE_ISSUANCE,\n  DCC_TYPE_REVOCATION,\n  CONTRACTOR_TYPE_REVOKED,\n  CONTRACTOR_TYPE_SUPERVISOR\n} from \"src/containers/DCC\";\nimport {\n  usePolicy,\n  useUserDetail,\n  useSessionStorage,\n  useScrollFormOnError\n} from \"src/hooks\";\nimport { getContractorDomains } from \"src/helpers\";\n\nconst Select = ({ error, ...props }) => (\n  <div\n    className={classNames(styles.formSelect, error && styles.formSelectError)}\n  >\n    <SelectField {...props} />\n    {error && <p className={styles.errorMsg}>{error}</p>}\n  </div>\n);\n\nconst DccForm = React.memo(function DccForm({\n  values,\n  handleSubmit,\n  isSubmitting,\n  setFieldValue,\n  setFieldTouched,\n  errors,\n  touched,\n  isValid,\n  cmsUsers,\n  setSessionStorageDcc,\n  submitSuccess,\n  isUserValid,\n  isSupervisor\n}) {\n  const {\n    policy: { supporteddomains }\n  } = usePolicy();\n  const contractorDomains = getContractorDomains(supporteddomains);\n  const [isIssuance, setIsIssuance] = useState();\n  useScrollFormOnError(errors && errors.global);\n\n  useEffect(() => {\n    if (values.type === DCC_TYPE_ISSUANCE) {\n      setIsIssuance(true);\n    } else if (values.type === DCC_TYPE_REVOCATION) {\n      setFieldValue(\"contractortype\", CONTRACTOR_TYPE_REVOKED);\n      setIsIssuance(false);\n    }\n  }, [values.type, setFieldValue]);\n\n  const SubmitButton = useCallback(\n    () => (\n      <Button\n        type=\"submit\"\n        kind={!isValid || !isUserValid ? \"disabled\" : \"primary\"}\n        loading={isSubmitting}\n      >\n        Submit\n      </Button>\n    ),\n    [isValid, isSubmitting, isUserValid]\n  );\n\n  const handleChangeDccType = (e) => {\n    setFieldTouched(\"type\", true);\n    setSessionStorageDcc({\n      ...values,\n      type: e.value\n    });\n    setFieldValue(\"type\", e.value);\n    setFieldValue(\"nomineeid\", \"\");\n  };\n\n  const handleChangeStatement = (e) => {\n    setSessionStorageDcc({\n      ...values,\n      statement: e.target.value\n    });\n    setFieldTouched(\"statement\", true);\n    setFieldValue(\"statement\", e.target.value);\n  };\n\n  const handleChangeSelector = (field) => (e) => {\n    setFieldTouched(field, true);\n    setSessionStorageDcc({\n      ...values,\n      [field]: e.value\n    });\n    setFieldValue(field, e.value);\n  };\n\n  const handleChangeNomineeSelector = (e) => {\n    setFieldTouched(\"nomineeid\", true);\n    setFieldValue(\"nomineeid\", e.value);\n    setFieldValue(\"nomineeusername\", e.label);\n    setSessionStorageDcc({\n      ...values,\n      nomineeid: e.value,\n      nomineeusername: e.label\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {errors && errors.global && (\n        <Message kind=\"error\">{errors.global.toString()}</Message>\n      )}\n\n      {!isUserValid && (\n        <Message kind=\"error\">\n          You don't have the contractor status required to complete a DCC\n          request\n        </Message>\n      )}\n\n      {isUserValid && (\n        <Message kind=\"info\">\n          Before creating a new DCC the nominee must be invited to CMS by an\n          admin. Please contact an admin on DCR Contractors channel on matrix.\n        </Message>\n      )}\n\n      <RadioButtonGroup\n        label=\"DCC Type\"\n        name=\"type\"\n        options={getDccTypeOptions()}\n        value={values.type}\n        error={touched.type && errors.type}\n        onChange={handleChangeDccType}\n        className={styles.radioButton}\n      />\n\n      <Select\n        name=\"domain\"\n        options={contractorDomains}\n        placeholder=\"Domain\"\n        error={touched.domain && errors.domain}\n        onChange={handleChangeSelector(\"domain\")}\n      />\n      {isIssuance ? (\n        <>\n          <Select\n            name=\"nomineeid\"\n            options={getNomineeOptions(cmsUsers.nominee)}\n            placeholder=\"Nominee\"\n            error={touched.nomineeid && errors.nomineeid}\n            onChange={handleChangeNomineeSelector}\n            isDisabled={!values.type}\n          />\n          <Select\n            name=\"contractortype\"\n            options={getContractorTypeOptions(isSupervisor)}\n            placeholder=\"Contractor Type\"\n            error={touched.contractortype && errors.contractortype}\n            onChange={handleChangeSelector(\"contractortype\")}\n          />\n        </>\n      ) : (\n        <Select\n          name=\"nomineeid\"\n          options={getNomineeOptions(cmsUsers.full)}\n          placeholder=\"Nominee\"\n          error={touched.nomineeid && errors.nomineeid}\n          onChange={handleChangeNomineeSelector}\n          isDisabled={!values.type}\n        />\n      )}\n      <Field\n        component={TextArea}\n        name=\"statement\"\n        value={values.statement}\n        onChange={handleChangeStatement}\n        placeholder=\"Statement\"\n        id=\"statement\"\n        error={touched.statement && errors.statement}\n      />\n      <div className=\"justify-right\">\n        <DraftSaver {...{ submitSuccess }} />\n        <SubmitButton />\n      </div>\n    </form>\n  );\n});\n\nconst DccFormWrapper = ({\n  initialValues,\n  onSubmit,\n  history,\n  cmsUsers,\n  userDomain,\n  isUserValid\n}) => {\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n  const { policy } = usePolicy();\n  const { user } = useUserDetail();\n  const dccFormValidation = useMemo(\n    () => dccValidationSchema(policy),\n    [policy]\n  );\n\n  const FORM_INITIAL_VALUES = {\n    type: 0,\n    nomineeid: \"\",\n    statement: \"\",\n    domain: userDomain,\n    contractortype: 0\n  };\n\n  let formInitialValues = initialValues || FORM_INITIAL_VALUES;\n  const [sessionStorageDcc, setSessionStorageDcc] = useSessionStorage(\n    \"dcc\",\n    null\n  );\n\n  if (sessionStorageDcc !== null) {\n    formInitialValues = sessionStorageDcc;\n  }\n\n  const isInitialValid = dccFormValidation.isValidSync(formInitialValues);\n  const isSupervisor = user.contractortype === CONTRACTOR_TYPE_SUPERVISOR;\n\n  const handleSubmit = useCallback(\n    async (values, { resetForm, setSubmitting, setFieldError }) => {\n      try {\n        const token = await onSubmit(values);\n        // Token from new dcc or from edit dcc\n        const dccToken = token || values.token;\n        setSubmitting(false);\n        setSubmitSuccess(true);\n        history.push(`/dccs/${dccToken}`);\n        setSessionStorageDcc(null);\n        resetForm();\n      } catch (e) {\n        setSubmitting(false);\n        setFieldError(\"global\", e);\n      }\n    },\n    [history, onSubmit, setSessionStorageDcc]\n  );\n\n  return (\n    <Formik\n      onSubmit={handleSubmit}\n      initialValues={formInitialValues}\n      isInitialValid={isInitialValid}\n      validationSchema={dccFormValidation}\n    >\n      {(props) => (\n        <DccForm\n          {...{\n            ...props,\n            submitSuccess,\n            setSessionStorageDcc,\n            cmsUsers,\n            isUserValid,\n            isSupervisor\n          }}\n        />\n      )}\n    </Formik>\n  );\n};\n\nDccFormWrapper.propTypes = {\n  initialValues: PropTypes.object,\n  onSubmit: PropTypes.func,\n  setSessionStorageDcc: PropTypes.func,\n  setDccType: PropTypes.func,\n  history: PropTypes.object,\n  cmsUsers: PropTypes.object\n};\n\nexport default withRouter(DccFormWrapper);\n","import { useAction, useSelector } from \"src/redux\";\nimport * as act from \"src/actions\";\nimport * as sel from \"src/selectors\";\nimport { CONTRACTOR_TYPE_NOMINEE } from \"../constants\";\nimport { isUserValidContractor } from \"../helpers\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\nimport isEqual from \"lodash/isEqual\";\n\nconst removeCurrentUser = (users, user) =>\n  users && users.filter((u) => !isEqual(u, user));\n\nexport function useNewDcc() {\n  const onFetchUsers = useAction(act.onFetchCmsUsers);\n  const onSubmitDcc = useAction(act.onSaveNewDcc);\n\n  const [loading, error] = useAPIAction(onFetchUsers);\n\n  const user = useSelector(sel.currentCmsUser);\n\n  const nomineeUsersSelector = sel.makeGetUsersByContractorTypes(\n    CONTRACTOR_TYPE_NOMINEE\n  );\n\n  const fullUsers = useSelector(sel.usersByCurrentDomain);\n  const nomineeUsers = useSelector(nomineeUsersSelector);\n\n  const users = {\n    full: removeCurrentUser(fullUsers, user),\n    nominee: nomineeUsers\n  };\n\n  const isUserValid = isUserValidContractor(user);\n\n  return {\n    loading,\n    usersError: error,\n    onSubmitDcc,\n    users,\n    user,\n    isUserValid\n  };\n}\n","import React from \"react\";\nimport { Card, Message } from \"pi-ui\";\nimport DccForm from \"src/components/DccForm\";\nimport DccLoader from \"src/components/DCC/DccLoader\";\nimport { useNewDcc } from \"./hooks\";\n\nconst NewDcc = () => {\n  const { onSubmitDcc, users, loading, user, isUserValid, usersError } =\n    useNewDcc();\n  return (\n    <Card className=\"container margin-bottom-l\">\n      {usersError ? (\n        <Message kind=\"error\">\n          {usersError.toString()}. Users list is not available. Please, try\n          again later\n        </Message>\n      ) : users && user && !loading ? (\n        <DccForm\n          onSubmit={onSubmitDcc}\n          cmsUsers={users}\n          userDomain={user.domain}\n          isUserValid={isUserValid}\n        />\n      ) : (\n        <DccLoader extended />\n      )}\n    </Card>\n  );\n};\n\nexport default NewDcc;\n","import React from \"react\";\nimport MultipleContentPage from \"src/components/layout/MultipleContentPage\";\nimport DccNewForm from \"src/containers/DCC/New\";\n\nconst PageDccsNew = () => {\n  return (\n    <MultipleContentPage topBannerHeight={90}>\n      {({ TopBanner, PageDetails, Main }) => (\n        <>\n          <TopBanner>\n            <PageDetails title=\"Create DCC\" actionsContent={null} />\n          </TopBanner>\n          <Main fillScreen>\n            <DccNewForm />\n          </Main>\n        </>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageDccsNew;\n","import React, { useEffect } from \"react\";\nimport { Switch, withRouter } from \"react-router-dom\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport { withDcc } from \"src/containers/DCC\";\nimport {\n  Route,\n  AuthenticatedRoute,\n  AdminAuthenticatedRoute\n} from \"src/containers/Routes\";\nimport PageNotFound from \"./NotFound\";\nimport commonRoutes from \"./commonRoutes\";\n\nimport PageListUserInvoices from \"./Invoices/UserList\";\nimport PageInvoicesNew from \"./Invoices/New\";\nimport PageInvoiceEdit from \"./Invoices/Edit\";\nimport PageInvoiceDetail from \"./Invoices/Detail\";\nimport PageListAdminInvoices from \"./Invoices/AdminList\";\nimport PageGeneratePayoutsList from \"./Invoices/Payouts\";\nimport PageInvoicePayouts from \"./Invoices/InvoicePayouts\";\nimport PageProposalBillingSummary from \"./Invoices/ProposalBillingSummary\";\nimport PageProposalBillingDetails from \"./Invoices/ProposalBillingDetails\";\nimport PageDccDetail from \"./DCCs/Detail\";\nimport PageDccList from \"./DCCs/List\";\nimport PageDccNew from \"./DCCs/New\";\nimport PageUserDetail from \"./User/Detail\";\n\nconst Redirect = withRouter(({ to, history, location }) => {\n  useEffect(() => {\n    if (location.pathname !== to) {\n      history.push({ pathname: to, search: location.search });\n    }\n  }, [history, location.pathname, to, location.search]);\n  return null;\n});\n\nconst Routes = ({ location }) => {\n  const { currentUser } = useLoaderContext();\n  const loggedIn = !!currentUser;\n\n  return (\n    <TransitionGroup>\n      <CSSTransition key={location.key} classNames=\"fade\" timeout={300}>\n        <Switch location={location}>\n          <Route exact path=\"/\">\n            {loggedIn ? (\n              currentUser.isadmin ? (\n                <Redirect to=\"/invoices\" />\n              ) : (\n                <Redirect to=\"/invoices/me\" />\n              )\n            ) : (\n              <Redirect to=\"/user/login\" />\n            )}\n          </Route>\n          <Route exact path=\"/register\">\n            <Redirect to=\"/user/signup\" />\n          </Route>\n          {commonRoutes}\n\n          {/* User Route */}\n          <AuthenticatedRoute\n            path=\"/user/:userid\"\n            title=\"User Detail\"\n            exact\n            key=\"user-detail-route\"\n            component={PageUserDetail}\n          />\n\n          {/* Record routes */}\n          <AuthenticatedRoute\n            path=\"/invoices/me\"\n            title=\"My Invoices\"\n            exact\n            component={PageListUserInvoices}\n          />\n          <AuthenticatedRoute\n            path=\"/invoices/new\"\n            title=\"New Invoice\"\n            exact\n            component={PageInvoicesNew}\n          />\n          <AuthenticatedRoute\n            path=\"/invoices\"\n            title={\n              loggedIn && currentUser && currentUser.isadmin\n                ? \"All Invoices\"\n                : \"Domain Invoices\"\n            }\n            exact\n            component={PageListAdminInvoices}\n          />\n          <AuthenticatedRoute\n            path=\"/invoices/:token\"\n            title=\"Invoice Detail\"\n            exact\n            component={PageInvoiceDetail}\n          />\n          <AuthenticatedRoute\n            path=\"/invoices/:token/comments/:commentid\"\n            title=\"Invoice Detail\"\n            exact\n            component={PageInvoiceDetail}\n          />\n          <AuthenticatedRoute\n            path=\"/invoices/:token/edit\"\n            title=\"Edit Invoice\"\n            exact\n            component={PageInvoiceEdit}\n          />\n          {/* Admin routes */}\n          <AdminAuthenticatedRoute\n            path=\"/admin/payouts\"\n            title=\"Payouts\"\n            exact\n            component={PageGeneratePayoutsList}\n          />\n          <AdminAuthenticatedRoute\n            path=\"/admin/invoicepayouts\"\n            title=\"Line Item Payouts\"\n            exact\n            component={PageInvoicePayouts}\n          />\n          <AdminAuthenticatedRoute\n            path=\"/admin/proposalsbilling\"\n            title=\"Proposals Billing Summary\"\n            exact\n            component={PageProposalBillingSummary}\n          />\n          <AdminAuthenticatedRoute\n            path=\"/admin/proposalsbilling/:token\"\n            title=\"Proposal Billing Details\"\n            exact\n            component={PageProposalBillingDetails}\n          />\n          <AuthenticatedRoute\n            path=\"/dccs\"\n            title=\"DCCs\"\n            exact\n            component={withDcc(PageDccList)}\n          />\n          <AuthenticatedRoute\n            path=\"/dccs/new\"\n            title=\"New DCC\"\n            exact\n            component={withDcc(PageDccNew)}\n          />\n          <AuthenticatedRoute\n            path=\"/dccs/:token\"\n            title=\"DCC Detail\"\n            exact\n            component={withDcc(PageDccDetail)}\n          />\n          <AuthenticatedRoute\n            path=\"/dccs/:token/comments/:commentid\"\n            title=\"DCC Detail\"\n            exact\n            component={withDcc(PageDccDetail)}\n          />\n          <Route title=\"Page Not Found\" path=\"*\" component={PageNotFound} />\n        </Switch>\n      </CSSTransition>\n    </TransitionGroup>\n  );\n};\n\nexport default withRouter(Routes);\n","import React from \"react\";\nimport { useConfig } from \"src/containers/Config\";\nimport RoutesPoliteia from \"./Routes\";\nimport RoutesCMS from \"./RoutesCMS\";\n\nconst Root = () => {\n  const { recordType, constants } = useConfig();\n  const mapRecordTypeToRoutes = {\n    [constants.RECORD_TYPE_INVOICE]: <RoutesCMS />,\n    [constants.RECORD_TYPE_PROPOSAL]: <RoutesPoliteia />\n  };\n  return mapRecordTypeToRoutes[recordType];\n};\n\nexport default Root;\n","import PropTypes from \"prop-types\";\nimport { useEffect, useCallback } from \"react\";\nimport { useSessionChecker } from \"./hooks\";\nimport ModalLogin from \"src/components/ModalLogin\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst LOGIN_MODAL_ID = \"sessionExpiredModal\";\n\nconst SessionChecker = ({ children, showModal }) => {\n  const { sessionExpired, setSessionExpired, handleLogout } =\n    useSessionChecker();\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const closeModal = useCallback(() => {\n    handleLogout();\n    handleCloseModal();\n    setSessionExpired(false);\n  }, [handleCloseModal, handleLogout, setSessionExpired]);\n\n  const openModal = useCallback(() => {\n    handleOpenModal(ModalLogin, {\n      onLoggedIn: () => {\n        setSessionExpired(false);\n        handleCloseModal();\n      },\n      id: LOGIN_MODAL_ID,\n      title: \"Your session has expired. Please log in again\",\n      onClose: closeModal,\n      disableDismiss: true\n    });\n  }, [setSessionExpired, handleOpenModal, closeModal, handleCloseModal]);\n\n  useEffect(() => {\n    if (sessionExpired && showModal) {\n      openModal();\n    }\n  }, [sessionExpired, openModal, showModal]);\n\n  return children;\n};\n\nSessionChecker.propTypes = {\n  children: PropTypes.node.isRequired,\n  showModal: PropTypes.bool\n};\n\nexport default SessionChecker;\n","import { useState, useEffect, useCallback, useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\n\nexport function useSessionChecker() {\n  const currentUser = useSelector(sel.currentUser);\n  const handleLogout = useAction(act.handleLocalLogout);\n  const [sessionExpired, setSessionExpired] = useState();\n  const timeout = useMemo(() => {\n    if (!currentUser) return;\n    const { sessionmaxage, lastlogintime } = currentUser;\n    return sessionmaxage * 1000 - (Date.now() / 1000 - lastlogintime);\n  }, [currentUser]);\n\n  const checkUserSession = useCallback(() => {\n    const { sessionmaxage, lastlogintime } = currentUser;\n    const expired = sessionmaxage < Date.now() / 1000 - lastlogintime;\n    setSessionExpired(expired);\n  }, [currentUser]);\n\n  useEffect(() => {\n    let interval;\n    if (timeout) {\n      interval = setInterval(() => {\n        checkUserSession();\n      }, timeout);\n    }\n    return () => {\n      interval && clearInterval(interval);\n    };\n  }, [timeout, checkUserSession]);\n\n  return { sessionExpired, setSessionExpired, handleLogout };\n}\n","import * as Yup from \"yup\";\n\n/**\n * Add method 'maxByteSize' for files size validation\n */\nYup.addMethod(Yup.number, \"maxByteSize\", (bytesSize) => {\n  return Yup.mixed().test({\n    name: \"maxByteSize\",\n    test: (value) => value <= bytesSize,\n    message: `File size must be less or equal than ${bytesSize / 1024}kb`\n  });\n});\n\n/**\n * Add method \"files\" for validating a set of files based\n * on max size, maz number of files and valid mime types\n */\nYup.addMethod(\n  Yup.array,\n  \"files\",\n  (maxSizeInBytes, maxFiles, validMimeTypes) => {\n    return Yup.array()\n      .of(\n        Yup.object().shape({\n          name: Yup.string(),\n          mime: Yup.string().oneOf(validMimeTypes),\n          payload: Yup.string(),\n          size: Yup.number().maxByteSize(maxSizeInBytes)\n        })\n      )\n      .max(maxFiles);\n  }\n);\n","import React from \"react\";\nimport { Router } from \"src/components/Router\";\nimport Config from \"src/containers/Config\";\nimport {\n  defaultLightTheme,\n  ThemeProvider,\n  defaultDarkTheme,\n  DEFAULT_LIGHT_THEME_NAME,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport { ReduxProvider } from \"src/redux\";\nimport Loader from \"src/containers/Loader\";\nimport Routes from \"src/pages\";\nimport { UserSessionChecker } from \"src/containers/User/SessionChecker\";\nimport StaticContentProvider from \"src/containers/StaticContent\";\nimport ModalProvider from \"src/components/ModalProvider\";\nimport \"pi-ui/dist/index.css\";\nimport \"src/style/index.css\";\nimport \"src/validation/setupFormValidators\";\n\nimport SourceSansProLight from \"src/assets/fonts/source-sans-pro/SourceSansPro-Light.ttf\";\nimport SourceSansProRegular from \"src/assets/fonts/source-sans-pro/SourceSansPro-Regular.ttf\";\nimport SourceSansProSemiBold from \"src/assets/fonts/source-sans-pro/SourceSansPro-SemiBold.ttf\";\n\nconst themeCustomVariables = {\n  \"font-family-text\": \"Source Sans Pro\"\n};\n\nconst themes = {\n  [DEFAULT_LIGHT_THEME_NAME]: { ...defaultLightTheme, ...themeCustomVariables },\n  [DEFAULT_DARK_THEME_NAME]: { ...defaultDarkTheme, ...themeCustomVariables }\n};\n\nconst fonts = [\n  {\n    \"font-family\": \"Source Sans Pro\",\n    src: `url(${SourceSansProLight}) format(\"truetype\")`,\n    \"font-weight\": defaultLightTheme[\"font-weight-light\"],\n    \"font-style\": \"normal\",\n    \"font-display\": \"swap\"\n  },\n  {\n    \"font-family\": \"Source Sans Pro\",\n    src: `url(${SourceSansProRegular}) format(\"truetype\")`,\n    \"font-weight\": defaultLightTheme[\"font-weight-regular\"],\n    \"font-style\": \"normal\",\n    \"font-display\": \"swap\"\n  },\n  {\n    \"font-family\": \"Source Sans Pro\",\n    src: `url(${SourceSansProSemiBold}) format(\"truetype\")`,\n    \"font-weight\": defaultLightTheme[\"font-weight-semi-bold\"],\n    \"font-style\": \"normal\",\n    \"font-display\": \"swap\"\n  }\n];\n\nconst App = () => {\n  // This is a temporary fix to avoid an issue during the tests\n  if (process.env.NODE_ENV === \"test\") {\n    return <div></div>;\n  }\n\n  return (\n    <ThemeProvider\n      themes={themes}\n      defaultThemeName={DEFAULT_LIGHT_THEME_NAME}\n      fonts={fonts}\n    >\n      <ReduxProvider>\n        <Config>\n          <Loader>\n            <StaticContentProvider>\n              <Router>\n                <ModalProvider>\n                  <UserSessionChecker>\n                    <Routes />\n                  </UserSessionChecker>\n                </ModalProvider>\n              </Router>\n            </StaticContentProvider>\n          </Loader>\n        </Config>\n      </ReduxProvider>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\n\nconst targetElement = document.getElementById(\"root\");\n\nReactDOM.render(<App />, targetElement);\n","import { createSelector } from \"reselect\";\nimport { emailNotificationsToPreferences } from \"../helpers\";\nimport get from \"lodash/fp/get\";\nimport castArray from \"lodash/fp/castArray\";\nimport pick from \"lodash/fp/pick\";\nimport compose from \"lodash/fp/compose\";\nimport values from \"lodash/fp/values\";\nimport flatten from \"lodash/fp/flatten\";\n\nexport const userByID = get([\"users\", \"byID\"]);\nexport const searchResults = get([\"users\", \"search\", \"results\"]);\nexport const searchResultsByID = get([\"users\", \"search\", \"resultsByID\"]);\nexport const queryResultsByEmail = get([\"users\", \"search\", \"queryByEmail\"]);\nexport const queryResultsByUsername = get([\n  \"users\",\n  \"search\",\n  \"queryByUsername\"\n]);\nexport const queryResultsByPublicKey = get([\n  \"users\",\n  \"search\",\n  \"queryByPublicKey\"\n]);\nexport const cmsUsersByContractorType = get([\n  \"users\",\n  \"cms\",\n  \"byContractorType\"\n]);\nexport const cmsUsersByDomain = get([\"users\", \"cms\", \"byDomain\"]);\nexport const cmsUserByID = get([\"users\", \"cms\", \"byID\"]);\nexport const newUser = get([\"users\", \"newUser\"]);\nexport const newUserVerificationToken = get([\n  \"users\",\n  \"newUser\",\n  \"verificationtoken\"\n]);\nexport const makeGetUserByID = (userID) =>\n  createSelector(userByID, (users) => users[userID] || null);\n\nexport const currentUserID = get([\"users\", \"currentUserID\"]);\n\nexport const currentUser = createSelector(\n  userByID,\n  currentUserID,\n  (users, userID) => users[userID]\n);\n\nexport const currentCmsUser = createSelector(\n  cmsUserByID,\n  currentUserID,\n  (users, userID) => users[userID]\n);\n\nconst createUserSelectors = (keys) =>\n  keys.map((key) => createSelector(currentUser, (user) => user && user[key]));\n\nexport const [\n  currentUserEmail,\n  currentUserUsername,\n  currentUserLastLoginTime,\n  currentUserIsAdmin,\n  currentUserSessionMaxAge,\n  currentUserPublicKey,\n  currentUserPaywallAddress,\n  currentUserPaywallTxid,\n  currentUserPaywallTxNotBefore,\n  currentUserKeyVerificationToken,\n  currentUserVerifiedKey,\n  currentUserEdited,\n  currentUserResetPassword,\n  currentUserResendVerificationToken\n] = createUserSelectors([\n  \"email\",\n  \"username\",\n  \"lastlogintime\",\n  \"isadmin\",\n  \"sessionmaxage\",\n  \"publickey\",\n  \"paywalladdress\",\n  \"paywalltxid\",\n  \"paywalltxnotbefore\",\n  \"verificationtoken\",\n  \"verifiedkey\",\n  \"edited\",\n  \"resetpassword\",\n  \"resendverificationtoken\"\n]);\n\nexport const currentUserPaywallAmount = createSelector(\n  currentUser,\n  (user) => user && user.paywallamount / 100000000\n);\n\nexport const currentUserPreferences = createSelector(\n  currentUser,\n  (user) => user && emailNotificationsToPreferences(user.emailnotifications)\n);\n\nexport const makeGetSearchResultsByEmail = (email) =>\n  createSelector(\n    searchResultsByID,\n    queryResultsByEmail,\n    (allResults, idsByEmail) => {\n      const results = idsByEmail[email];\n      if (!results) return null;\n      return results.map((id) => allResults[id]);\n    }\n  );\n\nexport const makeGetSearchResultsByUsername = (username) =>\n  createSelector(\n    searchResultsByID,\n    queryResultsByUsername,\n    (allResults, idsByUsn) => {\n      const results = idsByUsn[username];\n      if (!results) return null;\n      return results.map((id) => allResults[id]);\n    }\n  );\n\nexport const makeGetSearchResultsByPublicKey = (publickey) =>\n  createSelector(\n    searchResultsByID,\n    queryResultsByPublicKey,\n    (allResults, idsByPk) => {\n      const results = idsByPk[publickey];\n      if (!results) return null;\n      return results.map((id) => allResults[id]);\n    }\n  );\n\nexport const makeGetUsersByArrayOfIDs = (userIDs) =>\n  createSelector(userByID, (users) => {\n    return userIDs.reduce((res, userID) => {\n      if (users[userID]) return { ...res, [userID]: users[userID] };\n      return res;\n    }, {});\n  });\n\nexport const makeGetUsersByContractorTypes = (contractorTypes) =>\n  createSelector(cmsUsersByContractorType, (users) => {\n    const contractorTypesArray = castArray(contractorTypes);\n    return compose(flatten, values, pick(contractorTypesArray))(users);\n  });\n\nexport const usersByCurrentDomain = createSelector(\n  cmsUsersByDomain,\n  currentCmsUser,\n  (usersByDomain, user) => {\n    const domain = user && user.domain;\n    return get(domain)(usersByDomain);\n  }\n);\n\nexport const userTotp = createSelector(\n  currentUser,\n  (user) => user && user.totp\n);\n\nexport const userTotpVerified = createSelector(\n  currentUser,\n  (user) => user && user.totpverified\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Select } from \"pi-ui\";\nimport { FormikConsumer } from \"formik\";\n\nconst getSelectValue = (formValue, options) =>\n  options.find((op) => op.value === formValue);\n\nconst SelectField = ({ name, options, disabled, ...props }) => {\n  return (\n    <FormikConsumer>\n      {({ values, setFieldValue }) => {\n        const onSelectChange = ({ value }) => {\n          setFieldValue(name, value);\n        };\n        return (\n          <Select\n            value={getSelectValue(values[name], options)}\n            onChange={onSelectChange}\n            options={options}\n            isDisabled={disabled}\n            {...props}\n          ></Select>\n        );\n      }}\n    </FormikConsumer>\n  );\n};\n\nSelectField.propTypes = {\n  name: PropTypes.string.isRequired,\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string,\n      value: PropTypes.number\n    })\n  ).isRequired\n};\n\nexport default SelectField;\n","import Promise from \"promise\";\nimport \"isomorphic-fetch\";\nimport * as pki from \"./pki\";\nimport qs from \"query-string\";\nimport get from \"lodash/fp/get\";\nimport MerkleTree from \"./merkle\";\nimport {\n  INVOICE_STATUS_UNREVIEWED,\n  DCC_STATUS_ACTIVE,\n  PROPOSAL_METADATA_FILENAME,\n  VOTE_METADATA_FILENAME\n} from \"../constants\";\nimport { APIUserError, APIPluginError } from \"./errors.js\";\nimport {\n  digestPayload,\n  digest,\n  objectToSHA256,\n  utoa,\n  objectToBuffer,\n  bufferToBase64String\n} from \"../helpers\";\n\nconst STATUS_ERR = {\n  400: \"Bad response from server\",\n  401: \"Not authorized\",\n  403: \"You must be logged in to perform this action.\",\n  404: \"Not found\"\n};\n\nexport const TOP_LEVEL_COMMENT_PARENTID = 0;\n\nconst apiBase = \"/api/\";\nconst apiRecords = `${apiBase}records/`;\nconst apiTicketVote = `${apiBase}ticketvote/`;\nconst apiComments = `${apiBase}comments/`;\nconst apiPi = `${apiBase}pi/`;\n\nconst getUrl = (path, version, api = apiBase) => {\n  if (!path && !version) return api;\n  return `${api}${version}${path}`;\n};\n\nconst GET = (path, version = \"v1\", withoutVersion, api = apiBase) =>\n  fetch(getUrl(path, !withoutVersion ? version : undefined, api), {\n    credentials: \"include\"\n  }).then(parseResponse);\n\nconst getOptions = (csrf, json, method) => ({\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json; charset=utf-8\",\n    \"X-Csrf-Token\": csrf\n  },\n  credentials: \"include\", // Include cookies\n  method,\n  body: JSON.stringify(json)\n});\n\nconst POST = (path, csrf, json, api = apiBase, version = \"v1\") =>\n  fetch(getUrl(path, version, api), getOptions(csrf, json, \"POST\")).then(\n    parseResponse\n  );\n\nconst PUT = (path, csrf, json, api = apiBase, version = \"v1\") =>\n  fetch(getUrl(path, version, api), getOptions(csrf, json, \"PUT\")).then(\n    parseResponse\n  );\n\nconst getResponse = get(\"response\");\n\nexport const convertMarkdownToFile = (markdown) => ({\n  name: \"index.md\",\n  mime: \"text/plain; charset=utf-8\",\n  payload: utoa(markdown)\n});\nexport const convertJsonToFile = (json, name) => ({\n  name,\n  mime: \"text/plain; charset=utf-8\",\n  payload: utoa(JSON.stringify(json))\n});\n\nexport const makeProposal = ({\n  name,\n  amount,\n  startdate,\n  enddate,\n  domain,\n  markdown,\n  linkby = 0,\n  linkto = \"\",\n  attachments = []\n}) => ({\n  files: [\n    convertMarkdownToFile(markdown),\n    {\n      // Proposal metadata file\n      name: PROPOSAL_METADATA_FILENAME,\n      mime: \"text/plain; charset=utf-8\",\n      digest: objectToSHA256({ name, amount, startdate, enddate, domain }),\n      payload: bufferToBase64String(\n        objectToBuffer({ name, amount, startdate, enddate, domain })\n      )\n    },\n    ...(linkby || linkto\n      ? [\n          {\n            name: VOTE_METADATA_FILENAME,\n            mime: \"text/plain; charset=utf-8\",\n            digest: objectToSHA256({ linkto, linkby }),\n            payload: bufferToBase64String(objectToBuffer({ linkto, linkby }))\n          }\n        ]\n      : []),\n    ...(attachments || [])\n  ].map(({ name, mime, payload, digest }) => ({\n    name,\n    mime,\n    payload,\n    digest: digest ? digest : digestPayload(payload)\n  }))\n});\n\nexport const makeInvoice = (\n  month,\n  year,\n  exchangerate,\n  contractorname,\n  contractorlocation,\n  contractorcontact,\n  contractorrate,\n  paymentaddress,\n  lineItems,\n  files = []\n) => {\n  const { name, mime, payload } = convertJsonToFile(\n    {\n      version: 1,\n      month,\n      year,\n      exchangerate,\n      contractorname,\n      contractorlocation,\n      contractorcontact,\n      contractorrate,\n      paymentaddress,\n      lineItems\n    },\n    \"invoice.json\"\n  );\n\n  return {\n    id: \"\",\n    month,\n    year,\n    exchangerate,\n    contractorname,\n    contractorlocation,\n    contractorcontact,\n    contractorrate,\n    paymentaddress,\n    files: [\n      {\n        name,\n        mime,\n        payload,\n        digest: digestPayload(payload)\n      },\n      ...files\n    ].map(({ name, mime, payload }) => ({\n      name,\n      mime,\n      payload,\n      digest: digestPayload(payload)\n    }))\n  };\n};\n\nexport const makeComment = (\n  token,\n  comment,\n  parentid,\n  state,\n  extradata,\n  extradatahint\n) => ({\n  token,\n  parentid: parentid || TOP_LEVEL_COMMENT_PARENTID,\n  comment,\n  state,\n  extradata,\n  extradatahint\n});\n\nexport const makeCommentEdit = ({\n  userid,\n  token,\n  commentid,\n  parentid,\n  comment,\n  state,\n  extradata,\n  extradatahint\n}) => ({\n  userid,\n  token,\n  commentid,\n  parentid,\n  comment,\n  state,\n  extradata,\n  extradatahint\n});\n\nexport const makeDccComment = (token, comment, parentid) => ({\n  token,\n  comment,\n  parentid\n});\n\nexport const makeCommentVote = (state, token, vote, commentid) => ({\n  state,\n  token,\n  commentid,\n  vote\n});\n\nexport const makeCensoredComment = (state, token, reason, commentid) => ({\n  state,\n  token,\n  commentid,\n  reason\n});\n\nexport const makeDCC = (\n  type,\n  nomineeuserid,\n  statement,\n  domain,\n  contractortype\n) => {\n  const { name, mime, payload } = convertJsonToFile(\n    {\n      type,\n      nomineeuserid,\n      statement,\n      domain,\n      contractortype\n    },\n    \"dcc.json\"\n  );\n  return {\n    name,\n    mime,\n    payload,\n    digest: digestPayload(payload)\n  };\n};\n\nexport const makeDCCVote = (token, vote) => ({ token, vote });\n\nexport const signRegister = (userid, record) => {\n  if (typeof userid !== \"string\" || typeof record !== \"object\") {\n    throw Error(\"signRegister: Invalid params\");\n  }\n  return pki.myPubKeyHex(userid).then((publickey) => {\n    const digests = record.files\n      .map((x) => Buffer.from(get(\"digest\", x), \"hex\"))\n      .sort(Buffer.compare);\n    const tree = new MerkleTree(digests);\n    const root = tree.getRoot().toString(\"hex\");\n    return pki\n      .signStringHex(userid, root)\n      .then((signature) => ({ ...record, publickey, signature }));\n  });\n};\n\nexport const signDccComment = (userid, comment) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(\n          userid,\n          [comment.token, comment.parentid, comment.comment].join(\"\")\n        )\n        .then((signature) => ({ ...comment, publickey, signature }))\n    );\n\nexport const signComment = (userid, comment) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(\n          userid,\n          [\n            comment.state,\n            comment.token,\n            comment.parentid,\n            comment.comment,\n            comment.extradata,\n            comment.extradatahint\n          ].join(\"\")\n        )\n        .then((signature) => ({ ...comment, publickey, signature }))\n    );\n\nexport const signCommentEdit = ({\n  userid,\n  token,\n  commentid,\n  parentid,\n  comment,\n  state,\n  extradata,\n  extradatahint\n}) =>\n  pki.myPubKeyHex(userid).then((publickey) =>\n    pki\n      .signStringHex(\n        userid,\n        [\n          state,\n          token,\n          parentid,\n          commentid,\n          comment,\n          extradata,\n          extradatahint\n        ].join(\"\")\n      )\n      .then((signature) => ({\n        userid,\n        token,\n        commentid,\n        parentid,\n        comment,\n        state,\n        extradata,\n        extradatahint,\n        publickey,\n        signature\n      }))\n  );\n\nexport const signDcc = (userid, dcc) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(userid, dcc.digest)\n        .then((signature) => ({ file: dcc, publickey, signature }))\n    );\n\nexport const signDccVote = (userid, dccvote) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(userid, [dccvote.token, dccvote.vote].join(\"\"))\n        .then((signature) => ({ ...dccvote, publickey, signature }))\n    );\n\nexport const signCommentVote = (userid, comment) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(\n          userid,\n          [comment.state, comment.token, comment.commentid, comment.vote].join(\n            \"\"\n          )\n        )\n        .then((signature) => ({ ...comment, publickey, signature }))\n    );\n\nexport const signCensorComment = (userid, comment) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(\n          userid,\n          [\n            comment.state,\n            comment.token,\n            comment.commentid,\n            comment.reason\n          ].join(\"\")\n        )\n        .then((signature) => ({ ...comment, publickey, signature }))\n    );\n\nconst parseResponseBody = (response) =>\n  new Promise((resolve, reject) => {\n    const contentType = response.headers.get(\"content-type\");\n    if (contentType && contentType.includes(\"application/json\"))\n      resolve(response.json());\n    const err = new Error(\n      STATUS_ERR[response.status] || \"Internal server error\"\n    );\n    err.internalError = true;\n    err.statusCode = response.status;\n    reject(err);\n  });\n\nexport const parseResponse = (response) =>\n  new Promise((resolve, reject) =>\n    parseResponseBody(response)\n      .then((json) => {\n        // in case no response body is returned but response is successful\n        if (!json && response.status === 200)\n          resolve({\n            response: {},\n            csrfToken: response.headers.get(\"X-Csrf-Token\")\n          });\n        const errorcode = json.errorcode || json.ErrorCode;\n        const errorcontext = json.errorcontext || json.ErrorContext;\n\n        if (json.pluginid) {\n          reject(new APIPluginError(json.pluginid, errorcode, errorcontext));\n        }\n\n        if (errorcode) {\n          reject(new APIUserError(response, errorcode, errorcontext));\n        }\n\n        if (STATUS_ERR[response.status]) {\n          reject(new Error(STATUS_ERR[response.status]));\n        }\n\n        resolve({\n          response: json,\n          csrfToken: response.headers.get(\"X-Csrf-Token\")\n        });\n      })\n      .catch((e) => reject(e))\n  );\n\nexport const me = () => GET(\"/user/me\").then(getResponse);\n\nexport const apiInfo = () =>\n  GET(\"\", \"\", true).then(\n    ({\n      csrfToken,\n      response: { version, route, pubkey, testnet, mode, activeusersession }\n    }) => ({\n      csrfToken,\n      version,\n      route,\n      pubkey,\n      testnet,\n      mode,\n      activeusersession\n    })\n  );\n\nexport const newUser = (csrf, email, username, password) =>\n  pki.generateKeys().then((keys) =>\n    pki.loadKeys(username, keys).then(() =>\n      pki.myPubKeyHex(username).then((publickey) =>\n        POST(\"/user/new\", csrf, {\n          email,\n          username,\n          password: digest(password),\n          publickey\n        }).then(getResponse)\n      )\n    )\n  );\n\nexport const register = (csrf, email, username, password, verificationtoken) =>\n  pki.generateKeys().then((keys) =>\n    pki.loadKeys(username, keys).then(() =>\n      pki.myPubKeyHex(username).then((publickey) =>\n        POST(\"/register\", csrf, {\n          email,\n          username,\n          password: digest(password),\n          publickey,\n          verificationtoken\n        }).then(getResponse)\n      )\n    )\n  );\n\nexport const verifyNewUser = (email, verificationToken, username) => {\n  return pki\n    .signStringHex(username, verificationToken)\n    .then((signature) =>\n      GET(\n        `/user/verify?${qs.stringify({\n          email,\n          verificationToken,\n          signature\n        })}`\n      )\n    )\n    .then(getResponse);\n};\n\nexport const likedComments = (csrf, token, userid) =>\n  POST(\"/votes\", csrf, { token, userid }, apiComments).then(getResponse);\n\nexport const editUser = (csrf, params) =>\n  POST(\"/user/edit\", csrf, params).then(getResponse);\n\nexport const manageUser = (csrf, userid, action, reason) =>\n  POST(\"/user/manage\", csrf, { userid, action, reason }).then(getResponse);\n\nexport const manageCmsUser = (\n  csrf,\n  userid,\n  domain,\n  contractortype,\n  supervisoruserids,\n  proposalsowned\n) =>\n  POST(\"/admin/managecms\", csrf, {\n    userid,\n    domain,\n    contractortype,\n    supervisoruserids,\n    proposalsowned\n  });\n\nexport const proposalBilling = (csrf, token) =>\n  POST(\"/proposals/billing\", csrf, {\n    token\n  }).then(getResponse);\n\nexport const login = (csrf, email, password, code) =>\n  POST(\"/login\", csrf, {\n    email: email.toLowerCase(),\n    password: digest(password),\n    code\n  }).then(getResponse);\n\n// XXX this route hasn't been merged into the master of the backend.\n// Pull request: https://github.com/decred/politeia/pull/940 ???\nexport const loginWithUsername = (csrf, username, password) =>\n  POST(\"/login\", csrf, { username, password: digest(password) }).then(\n    getResponse\n  );\n\nexport const commentVote = (csrf, comment) =>\n  POST(\"/vote\", csrf, comment, apiComments).then(getResponse);\n\nexport const censorComment = (csrf, comment) =>\n  POST(\"/del\", csrf, comment, apiComments).then(getResponse);\n\nexport const changeUsername = (csrf, password, newusername) =>\n  POST(\"/user/username/change\", csrf, {\n    password: digest(password),\n    newusername\n  }).then(getResponse);\n\nexport const changePassword = (csrf, currentpassword, newpassword) =>\n  POST(\"/user/password/change\", csrf, {\n    currentpassword: digest(currentpassword),\n    newpassword: digest(newpassword)\n  }).then(getResponse);\n\nexport const resetPassword = (csrf, username, email) =>\n  POST(\"/user/password/reset\", csrf, { username, email }).then(getResponse);\n\nexport const verifyResetPassword = (\n  csrf,\n  username,\n  verificationtoken,\n  newpassword\n) =>\n  POST(\"/user/password/reset/verify\", csrf, {\n    username,\n    verificationtoken,\n    newpassword: digest(newpassword)\n  }).then(getResponse);\n\nexport const resendVerificationEmailRequest = (csrf, email, username) =>\n  pki\n    .generateKeys()\n    .then((keys) => pki.loadKeys(username, keys))\n    .then(() => pki.myPubKeyHex(username))\n    .then((publickey) =>\n      POST(\"/user/new/resend\", csrf, { email, publickey }).then(getResponse)\n    );\n\nexport const updateKeyRequest = (csrf, publickey) =>\n  POST(\"/user/key\", csrf, { publickey }).then(getResponse);\n\nexport const codeStats = (csrf, userid, starttime, endtime) =>\n  POST(\"/user/codestats\", csrf, { userid, starttime, endtime }).then(\n    getResponse\n  );\n\nexport const verifyKeyRequest = (csrf, userid, verificationtoken) =>\n  pki\n    .signStringHex(userid, verificationtoken)\n    .then((signature) =>\n      POST(\"/user/key/verify\", csrf, { signature, verificationtoken }).then(\n        getResponse\n      )\n    );\n\nexport const policyWWW = () => GET(\"/policy\").then(getResponse);\n\nexport const policyTicketVote = (csrf) =>\n  POST(\"/policy\", csrf, {}, apiTicketVote).then(getResponse);\n\nexport const policyComments = (csrf) =>\n  POST(\"/policy\", csrf, {}, apiComments).then(getResponse);\n\nexport const policyPi = (csrf) =>\n  POST(\"/policy\", csrf, {}, apiPi).then(getResponse);\n\nexport const userProposals = (csrf, userid) =>\n  POST(\"/userrecords\", csrf, { userid }, apiRecords).then(getResponse);\n\nexport const searchUser = (obj) =>\n  GET(`/users?${qs.stringify(obj)}`).then(getResponse);\n\nexport const proposalsBatch = (csrf, payload) =>\n  POST(\"/records\", csrf, payload, apiRecords).then(getResponse);\n\nexport const proposalDetails = (payload) =>\n  POST(\"/details\", \"\", payload, apiRecords).then(getResponse);\n\nexport const user = (userId) => GET(`/user/${userId}`).then(getResponse);\n\nexport const proposalComments = (csrf, token) =>\n  POST(\"/comments\", csrf, { token }, apiComments).then(getResponse);\n\nexport const commentsCount = (tokens) =>\n  POST(\"/count\", \"\", { tokens }, apiComments).then(getResponse);\n\nexport const commentsTimestamps = (csrf, token, commentids) =>\n  POST(\"/timestamps\", csrf, { token, commentids }, apiComments).then(\n    getResponse\n  );\n\nexport const invoiceComments = (token) =>\n  GET(`/invoices/${token}/comments`).then(getResponse);\n\nexport const logout = (csrf) => POST(\"/logout\", csrf, {});\n\nexport const proposalSetStatus = (\n  userid,\n  csrf,\n  token,\n  status,\n  version,\n  reason\n) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(userid, token + version + status + reason)\n        .then((signature) =>\n          POST(\n            \"/setstatus\",\n            csrf,\n            {\n              status,\n              version,\n              token,\n              signature,\n              publickey,\n              reason\n            },\n            apiRecords\n          )\n        )\n    )\n    .then(getResponse);\n\nexport const proposalSetBillingStatus = (\n  userid,\n  csrf,\n  token,\n  status,\n  reason\n) => {\n  let publickey;\n  return pki\n    .myPubKeyHex(userid)\n    .then((pk) => {\n      publickey = pk;\n      return pki\n        .signStringHex(userid, token + status + reason)\n        .then((signature) =>\n          POST(\n            \"/setbillingstatus\",\n            csrf,\n            {\n              token,\n              status,\n              reason,\n              signature,\n              publickey\n            },\n            apiPi\n          )\n        );\n    })\n    .then((res) => {\n      const { timestamp, receipt } = getResponse(res);\n      return {\n        publickey,\n        timestamp,\n        receipt\n      };\n    });\n};\n\nexport const billingStatusChanges = (csrf, tokens) =>\n  POST(\"/billingstatuschanges\", csrf, { tokens }, apiPi).then(getResponse);\n\nexport const newProposal = (csrf, proposal) =>\n  POST(\"/new\", csrf, proposal, apiRecords).then(getResponse);\n\nexport const editProposal = (csrf, proposal) =>\n  POST(\"/edit\", csrf, proposal, apiRecords).then(getResponse);\n\nexport const newComment = (csrf, comment) =>\n  POST(\"/new\", csrf, comment, apiComments).then(getResponse);\n\nexport const editComment = (csrf, commentEdit) =>\n  POST(\"/edit\", csrf, commentEdit, apiComments).then(getResponse);\n\nexport const startVote = (csrf, userid, voteParams) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      Promise.all(\n        voteParams.map((params) =>\n          pki.signStringHex(userid, objectToSHA256(params))\n        )\n      ).then((signatures) =>\n        POST(\n          \"/start\",\n          csrf,\n          {\n            starts: signatures.map((signature, i) => ({\n              params: voteParams[i],\n              publickey,\n              signature\n            }))\n          },\n          apiTicketVote\n        )\n      )\n    )\n    .then(getResponse);\n\nexport const proposalsBatchVoteSummary = (csrf, tokens) =>\n  POST(\"/summaries\", csrf, { tokens }, apiTicketVote).then(getResponse);\n\nexport const batchProposalSummary = (csrf, tokens) =>\n  POST(\"/summaries\", csrf, { tokens }, apiPi).then(getResponse);\n\nexport const proposalVoteResults = (csrf, token) =>\n  POST(\"/results\", csrf, { token }, apiTicketVote).then(getResponse);\n\nexport const proposalVoteDetails = (csrf, token) =>\n  POST(\"/details\", csrf, { token }, apiTicketVote).then(getResponse);\n\nexport const proposalSubmissions = (token) =>\n  POST(\"/submissions\", \"\", { token }, apiTicketVote).then(getResponse);\n\nexport const ticketVoteTimestamps = (csrf, token, votespage) =>\n  POST(\"/timestamps\", csrf, { token, votespage }, apiTicketVote).then(\n    getResponse\n  );\n\nexport const proposalAuthorizeOrRevokeVote = (\n  csrf,\n  action,\n  token,\n  userid,\n  version\n) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(userid, `${token}${version}${action}`)\n        .then((signature) =>\n          POST(\n            \"/authorize\",\n            csrf,\n            {\n              action,\n              token,\n              version: +version,\n              signature,\n              publickey\n            },\n            apiTicketVote\n          )\n        )\n    )\n    .then(getResponse);\n\nexport const verifyUserPayment = () =>\n  GET(\"/user/payments/registration\").then(getResponse);\n\nexport const proposalPaywallDetails = () =>\n  GET(\"/user/payments/paywall\").then(getResponse);\n\nexport const proposalPaywallPayment = () =>\n  GET(\"/user/payments/paywalltx\").then(getResponse);\n\nexport const userProposalCredits = () =>\n  GET(\"/user/payments/credits\").then(getResponse);\n\nexport const rescanUserPayments = (csrf, userid) =>\n  PUT(\"/user/payments/rescan\", csrf, { userid }).then(getResponse);\n\nexport const proposalsInventory = (state, status, page) =>\n  POST(\"/inventory\", \"\", { state, status, page }, apiRecords).then(getResponse);\n\nexport const votesInventory = (status, page) =>\n  POST(\"/inventory\", \"\", { status, page }, apiTicketVote).then(getResponse);\n\nexport const recordsTimestamp = (csrf, token, version) =>\n  POST(\"/timestamps\", csrf, { token, version }, apiRecords).then(getResponse);\n\n// CMS\n\nexport const invoiceSetStatus = (\n  userid,\n  csrf,\n  token,\n  version,\n  status,\n  reason\n) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki\n        .signStringHex(userid, token + version + status + reason)\n        .then((signature) => {\n          return POST(`/invoices/${token}/status`, csrf, {\n            status,\n            token,\n            signature,\n            publickey,\n            reason\n          });\n        })\n    )\n    .then(getResponse);\n\nexport const searchCmsUsers = (obj) =>\n  GET(`/cmsusers?${qs.stringify(obj)}`).then(getResponse);\n\nexport const inviteNewUser = (csrf, payload) =>\n  POST(\"/invite\", csrf, payload).then(getResponse);\n\nexport const newInvoice = (csrf, invoice) =>\n  POST(\"/invoices/new\", csrf, invoice).then(\n    ({ response: { censorshiprecord } }) => ({\n      ...invoice,\n      censorshiprecord,\n      timestamp: Date.now() / 1000,\n      status: INVOICE_STATUS_UNREVIEWED\n    })\n  );\n\nexport const editInvoice = (csrf, invoice) =>\n  POST(\"/invoices/edit\", csrf, invoice).then(getResponse);\n\nexport const invoice = (token, version = null) =>\n  GET(`/invoices/${token}` + (version ? `?version=${version}` : \"\")).then(\n    getResponse\n  );\n\nexport const userInvoices = () => GET(\"/user/invoices\").then(getResponse);\n\nexport const adminInvoices = (csrf, starttime, endtime, userid) =>\n  POST(\"/invoices\", csrf, { starttime, endtime, userid }).then(getResponse);\n\nexport const generatePayouts = (csrf) =>\n  POST(\"/admin/generatepayouts\", csrf, {}).then(getResponse);\n\nexport const invoicePayouts = (csrf, starttime, endtime) =>\n  POST(\"/admin/invoicepayouts\", csrf, { starttime, endtime }).then(getResponse);\n\nexport const payApprovedInvoices = () =>\n  GET(\"/admin/payinvoices\").then(getResponse);\n\nexport const getSpendingSummary = () =>\n  GET(\"/proposals/spendingsummary\").then(getResponse);\n\nexport const getSpendingDetails = (csrf, token) =>\n  POST(\"/proposals/spendingdetails\", csrf, { token }).then(getResponse);\n\nexport const exchangeRate = (csrf, month, year) =>\n  POST(\"/invoices/exchangerate\", csrf, { month, year }).then(getResponse);\n\nexport const userSubcontractors = (csrf) =>\n  GET(\"/user/subcontractors\", csrf).then(getResponse);\n\nexport const newDcc = (csrf, dcc) =>\n  POST(\"/dcc/new\", csrf, dcc).then(({ response: { censorshiprecord } }) => ({\n    ...dcc,\n    censorshiprecord,\n    timestamp: Date.now() / 1000,\n    status: DCC_STATUS_ACTIVE\n  }));\n\nexport const dccsByStatus = (csrf, status) =>\n  POST(\"/dcc\", csrf, status).then(getResponse);\n\nexport const dccDetails = (csrf, token) =>\n  GET(`/dcc/${token}`, csrf).then(getResponse);\n\nexport const supportOpposeDCC = (csrf, vote) =>\n  POST(\"/dcc/supportoppose\", csrf, vote).then(getResponse);\n\nexport const setDCCStatus = (csrf, userid, token, status, reason) =>\n  pki\n    .myPubKeyHex(userid)\n    .then((publickey) =>\n      pki.signStringHex(userid, token + status + reason).then((signature) => {\n        return POST(`/dcc/${token}/status`, csrf, {\n          status,\n          token,\n          signature,\n          publickey,\n          reason\n        });\n      })\n    )\n    .then(getResponse);\n\nexport const dccComments = (token) =>\n  GET(`/dcc/${token}/comments`).then(getResponse);\n\nexport const newDccComment = (csrf, dcc) =>\n  POST(\"/dcc/newcomment\", csrf, dcc).then(getResponse);\n\nexport const cmsUsers = (csrf) => GET(\"/v1/cmsusers\", csrf).then(getResponse);\n\nexport const setTotp = (csrf, type, code) =>\n  POST(\"/user/totp\", csrf, { type, code }).then(getResponse);\n\nexport const verifyTotp = (csrf, code) =>\n  POST(\"/user/verifytotp\", csrf, { code }).then(getResponse);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./Files.module.css\";\n\nconst RemoveButton = ({ file, onRemove }) => (\n  <button\n    className={styles.removeFileIcon}\n    onClick={(e) => {\n      e.preventDefault();\n      onRemove(file);\n    }}\n  >\n    &times;\n  </button>\n);\n\nRemoveButton.propTypes = {\n  file: PropTypes.object.isRequired,\n  onRemove: PropTypes.func.isRequired\n};\n\nexport default RemoveButton;\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { classNames } from \"pi-ui\";\nimport styles from \"./Files.module.css\";\nimport RemoveButton from \"./ThumbnailRemoveButton\";\n\nexport const ImageThumbnail = ({\n  file,\n  viewOnly,\n  onClick,\n  onRemove,\n  className\n}) => {\n  const handleClick = useCallback(() => {\n    onClick(file);\n  }, [onClick, file]);\n  return (\n    <div\n      className={classNames(\n        styles.imageThumbnailWrapper,\n        viewOnly && styles.marginRight,\n        className\n      )}\n    >\n      <img\n        onClick={handleClick}\n        className={styles.imageThumbnail}\n        alt={file.name}\n        src={`data:${file.mime};base64,${file.payload}`}\n      />\n      {!viewOnly && <RemoveButton file={file} onRemove={onRemove} />}\n    </div>\n  );\n};\n\nImageThumbnail.propTypes = {\n  file: PropTypes.object.isRequired,\n  viewOnly: PropTypes.bool,\n  onClick: PropTypes.func,\n  onRemove: PropTypes.func,\n  className: PropTypes.string\n};\n\nexport default ImageThumbnail;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { classNames, P } from \"pi-ui\";\nimport styles from \"./Files.module.css\";\nimport RemoveButton from \"./ThumbnailRemoveButton\";\n\nexport const TextThumbnail = ({ file, viewOnly, onRemove }) => (\n  <div\n    className={classNames(\n      styles.fileThumbnailWrapper,\n      viewOnly && styles.marginRight\n    )}\n  >\n    <div className={styles.fileThumbnail}>\n      <P className={styles.fileThumbnailText}>.txt</P>\n    </div>\n    {!viewOnly && <RemoveButton file={file} onRemove={onRemove} />}\n  </div>\n);\n\nTextThumbnail.propTypes = {\n  file: PropTypes.object.isRequired,\n  viewOnly: PropTypes.bool,\n  onRemove: PropTypes.func,\n  className: PropTypes.string\n};\n\nexport default TextThumbnail;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./Files.module.css\";\n\nconst ThumbnailGridErrors = ({ errors }) => {\n  const fileErrors = errors.files || [];\n  const uniqueErrors = Array.isArray(fileErrors)\n    ? [...new Set(fileErrors)]\n    : [fileErrors];\n  return uniqueErrors.map(\n    (err) =>\n      err && (\n        <p key={err} className={styles.fileErrorText}>\n          {err}\n        </p>\n      )\n  );\n};\n\nThumbnailGridErrors.propTypes = {\n  errors: PropTypes.oneOfType([PropTypes.object, PropTypes.array])\n};\n\nexport default ThumbnailGridErrors;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Row } from \"../layout\";\nimport styles from \"./Files.module.css\";\nimport ImageThumbnail from \"./ImageThumbnail\";\nimport TextThumbnail from \"./TextThumbnail\";\nimport ThumbnailGridErrors from \"./ThumbnailGridErrors\";\nimport ModalFullImage from \"src/components/ModalFullImage\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport { getAttachmentsFiles } from \"src/helpers\";\n\nexport const ThumbnailGrid = ({\n  value = [],\n  onRemove,\n  errors = [],\n  viewOnly = false\n}) => {\n  const files = getAttachmentsFiles(value);\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n  const openFullImageModal = (idx) => () => {\n    handleOpenModal(ModalFullImage, {\n      images: files,\n      onClose: handleCloseModal,\n      initialIndex: idx\n    });\n  };\n\n  return (\n    <>\n      <ThumbnailGridErrors errors={errors} />\n      <Row\n        className={styles.thumbnailGrid}\n        justify=\"left\"\n        topMarginSize={errors ? \"s\" : \"m\"}\n      >\n        {files.map((f, key) =>\n          f.mime.includes(\"image\") ? (\n            <ImageThumbnail\n              key={`img-${key}`}\n              file={f}\n              viewOnly={viewOnly}\n              onClick={openFullImageModal(key)}\n              onRemove={onRemove}\n            />\n          ) : (\n            <TextThumbnail\n              key={`txt-${key}`}\n              file={f}\n              viewOnly={viewOnly}\n              onRemove={onRemove}\n            />\n          )\n        )}\n      </Row>\n    </>\n  );\n};\n\nThumbnailGrid.propTypes = {\n  value: PropTypes.array,\n  onClick: PropTypes.func,\n  onRemove: PropTypes.func,\n  errors: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\n  viewOnly: PropTypes.bool\n};\n\nexport default ThumbnailGrid;\n","/**\n * Capitalizes the first letter of a given string\n * @param {string} stringInput\n * @returns {string} stringOutput\n */\nexport const capitalize = (stringInput) => {\n  if (typeof stringInput !== \"string\") return \"\";\n  return stringInput.charAt(0).toUpperCase() + stringInput.slice(1);\n};\n","import { useState, useCallback } from \"react\";\nimport useEventListener from \"./useEventListener\";\n\nconst setLocalStorageValue = (key, value) => {\n  const serializedValue = JSON.stringify(value);\n  localStorage.setItem(key, serializedValue);\n};\n\nconst getLocalStorageValue = (key) => {\n  const serializedState = localStorage.getItem(key);\n  return JSON.parse(serializedState);\n};\n\nexport default function useLocalStorage(key, initialValue) {\n  const [error, setError] = useState(null);\n\n  // initialize the state value\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      return getLocalStorageValue(key) || initialValue;\n    } catch (e) {\n      setError(e);\n      return initialValue;\n    }\n  });\n\n  const onSetValue = useCallback(\n    (newValue) => {\n      try {\n        setLocalStorageValue(key, newValue);\n        setStoredValue(newValue);\n      } catch (e) {\n        setError(e);\n      }\n    },\n    [key, setError]\n  );\n\n  const onStorageChange = (event) => {\n    if (event.key !== key) {\n      return;\n    }\n\n    if (event.newValue !== event.oldValue) {\n      try {\n        const parsedValue = JSON.parse(event.newValue);\n        setStoredValue(parsedValue);\n      } catch (e) {\n        setError(e);\n      }\n    }\n  };\n\n  useEventListener(\"storage\", onStorageChange);\n  if (error) console.log(error);\n\n  return [storedValue, onSetValue, error];\n}\n","import { useRef, useEffect } from \"react\";\n\n// Hook grabbed from https://usehooks.com/useEventListener/\nexport default function useEventListener(eventName, handler, element = window) {\n  // Create a ref that stores handler\n  const savedHandler = useRef();\n\n  // Update ref.current value if handler changes.\n  // This allows our effect below to always get latest handler ...\n  // ... without us needing to pass it in effect deps array ...\n  // ... and potentially cause effect to re-run every render.\n  useEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n\n  useEffect(\n    () => {\n      // Make sure element supports addEventListener\n      // On\n      const isSupported = element && element.addEventListener;\n      if (!isSupported) return;\n\n      // Create event listener that calls handler function stored in ref\n      const eventListener = (event) => savedHandler.current(event);\n\n      // Add event listener\n      element.addEventListener(eventName, eventListener);\n\n      // Remove event listener on cleanup\n      return () => {\n        element.removeEventListener(eventName, eventListener);\n      };\n    },\n    [eventName, element] // Re-run if eventName or element changes\n  );\n}\n","import * as act from \"src/actions\";\nimport * as sel from \"src/selectors\";\nimport { useSelector, useAction } from \"src/redux\";\n\nexport default function useNavigation() {\n  const user = useSelector(sel.currentUser);\n  const isCMS = useSelector(sel.isCMS);\n  const username = user && user.username;\n  const onLogout = useAction(act.onLogout);\n  return { user, username, onLogout, isCMS };\n}\n","import React from \"react\";\nimport { Message, P } from \"pi-ui\";\nimport Link from \"./Link\";\nimport { useLoaderContext } from \"src/containers/Loader\";\n\nconst IdentityMessageError = () => {\n  const { currentUser } = useLoaderContext();\n  return currentUser ? (\n    <Message className=\"margin-bottom-m\" kind=\"error\">\n      <P>\n        Your identity is invalid. You cannot currently submit proposals or\n        comments, please visit your{\" \"}\n        <Link to={`/user/${currentUser.userid}`}>account</Link> page to correct\n        this problem.\n      </P>\n    </Message>\n  ) : null;\n};\n\nexport default IdentityMessageError;\n","import { useLoaderContext } from \"src/containers/Loader\";\nimport PropTypes from \"prop-types\";\n\nconst LoggedInContent = ({ children, fallback }) => {\n  const { initDone, currentUser } = useLoaderContext();\n  const userLoggedIn = initDone && currentUser;\n  return userLoggedIn ? children : fallback;\n};\n\nLoggedInContent.propTypes = {\n  children: PropTypes.node,\n  fallback: PropTypes.node\n};\n\nLoggedInContent.defaultProps = {\n  fallback: null\n};\n\nexport default LoggedInContent;\n","export { default } from \"./StaticMarkdown\";\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"setContainer\":\"Totp_setContainer__sCvoG\",\"qrcode\":\"Totp_qrcode__2ml2E\",\"instructions\":\"Totp_instructions__2bv0-\",\"copyableKey\":\"Totp_copyableKey__OaYJp\",\"resetLink\":\"Totp_resetLink__2RJep\",\"inputLabel\":\"Totp_inputLabel__3kCoL\",\"totpAuthenticators\":\"Totp_totpAuthenticators__wVzEN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"FormWrapper_title__zI0T4\",\"form\":\"FormWrapper_form__2nijH\",\"actions\":\"FormWrapper_actions__K_Xwy\",\"errorMessage\":\"FormWrapper_errorMessage__2Gx4v\",\"singleAction\":\"FormWrapper_singleAction__1Bmt2 FormWrapper_actions__K_Xwy\",\"footer\":\"FormWrapper_footer__CQLM4\",\"loader\":\"FormWrapper_loader__2Fos1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"VerifyKey_container__3tvlw\",\"iconAndTextWrapper\":\"VerifyKey_iconAndTextWrapper__1L5QD\",\"iconWrapper\":\"VerifyKey_iconWrapper__2XGjr\",\"btn\":\"VerifyKey_btn__2Eyow\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"likeBox\":\"Likes_likeBox__3r_IU\",\"leftLikeBox\":\"Likes_leftLikeBox__1MfQu Likes_likeBox__3r_IU\",\"rightLikeBox\":\"Likes_rightLikeBox__Wdxpt Likes_likeBox__3r_IU\",\"likeBoxSpinner\":\"Likes_likeBoxSpinner__SYMcr\",\"likeBtn\":\"Likes_likeBtn__1c0lh\",\"likesResult\":\"Likes_likesResult__1PStH\",\"likeDisabled\":\"Likes_likeDisabled__z3SHu\"};","import {\n  BLOCK_DURATION_MAINNET,\n  BLOCK_DURATION_TESTNET,\n  PROPOSAL_STATUS_PUBLIC,\n  PROPOSAL_VOTING_ACTIVE,\n  PROPOSAL_VOTING_NOT_AUTHORIZED,\n  PROPOSAL_VOTING_AUTHORIZED,\n  PROPOSAL_VOTING_FINISHED,\n  PROPOSAL_VOTING_APPROVED,\n  PROPOSAL_STATUS_ARCHIVED,\n  PROPOSAL_STATUS_UNREVIEWED,\n  PROPOSAL_STATUS_CENSORED,\n  PROPOSAL_STATE_VETTED,\n  PROPOSAL_STATE_UNVETTED,\n  PROPOSAL_SUMMARY_STATUS_CENSORED,\n  PROPOSAL_SUMMARY_STATUS_CLOSED,\n  PROPOSAL_SUMMARY_STATUS_COMPLETED,\n  PROPOSAL_SUMMARY_STATUS_ACTIVE,\n  PROPOSAL_SUMMARY_STATUS_UNVETTED_ABANDONED,\n  PROPOSAL_SUMMARY_STATUS_UNVETTED_CENSORED,\n  PROPOSAL_SUMMARY_STATUS_ABANDONED,\n  PROPOSAL_SUMMARY_STATUS_REJECTED,\n  AUTHORIZED,\n  ACTIVE_VOTE,\n  APPROVED,\n  REJECTED,\n  ARCHIVED,\n  UNREVIEWED,\n  PUBLIC,\n  CENSORED,\n  NOJS_ROUTE_PREFIX,\n  PROPOSAL_VOTING_REJECTED,\n  PROPOSAL_VOTING_INELIGIBLE,\n  INELIGIBLE,\n  UNAUTHORIZED\n} from \"src/constants\";\nimport { getTextFromIndexMd, shortRecordToken } from \"src/helpers\";\nimport set from \"lodash/fp/set\";\nimport values from \"lodash/fp/values\";\nimport pick from \"lodash/pick\";\nimport isEmpty from \"lodash/fp/isEmpty\";\nimport take from \"lodash/fp/take\";\nimport takeRight from \"lodash/fp/takeRight\";\nimport get from \"lodash/fp/get\";\n\n/**\n * Returns the total amount of votes received by a given proposal voteSummary\n * @param {Object} voteSummary\n */\nexport const getVotesReceived = (voteSummary) => {\n  if (!voteSummary || !voteSummary.results) {\n    return 0;\n  }\n  return voteSummary.results.reduce(\n    (totalVotes, option) => (totalVotes += option.votes),\n    0\n  );\n};\n\n/**\n * Return the votes quorum of a given proposal vote status\n * @param {Object} voteSummary\n */\nexport const getQuorumInVotes = (voteSummary) =>\n  Math.trunc(\n    (voteSummary.eligibletickets * voteSummary.quorumpercentage) / 100\n  );\n\n/**\n * Return the votes quorum of a given proposal vote status\n * @param {Object} voteSummary\n */\nexport const getEligibleTickets = (voteSummary) => voteSummary.eligibletickets;\n\n/**\n * Returns true if the given proposal is public\n * @param {Object} proposal\n * @returns {Boolean} isPublic\n */\nexport const isPublicProposal = (proposal) =>\n  !!proposal && proposal.status === PROPOSAL_STATUS_PUBLIC;\n\n/**\n * Returns true if the given proposal is an approved RFP\n * and it's deadline didn't expire yet\n * @param {Object} proposal\n * @param {Object} voteSummary\n * @returns {Boolean} isActiveApproved\n */\nexport const isActiveApprovedRfp = (proposal, voteSummary) =>\n  isApprovedProposal(proposal, voteSummary) &&\n  proposal.linkby &&\n  isActiveRfp(proposal.linkby);\n\n/**\n * Return true if RFP is still active and didn't expire\n * @param {number} linkby RFP deadline timestamp in seconds\n */\nexport const isActiveRfp = (linkby) =>\n  Math.round(new Date().getTime() / 1000) < Number(linkby);\n\n/**\n * Returns true if RFP's linkby meets the minimum period\n * @param {number} proposalLinkBy proposal linkBy as seconds unix\n * @param {number} minlinkbyperiod min possible linkby period as seconds unix\n * @returns {Boolean} isRfpReadyToVote\n */\nexport const isRfpReadyToVote = (proposalLinkBy, minlinkbyperiod) => {\n  const currentTimeSec = new Date().getTime() / 1000;\n  return Math.round(currentTimeSec + minlinkbyperiod) < proposalLinkBy;\n};\n\n/**\n * Returns true if RFP was approved, deadline already expired & RFP submissions\n * didn't vote yet, which means RFP ready to start runoff vote.\n * @param {Object} proposal\n * @param {Object} voteSummary\n * @returns {Boolean} isRfpReadyToRunoff\n */\nexport const isRfpReadyToRunoff = (\n  proposal,\n  voteSummary,\n  rfpSubmissionsVoteSummaries\n) => {\n  const isSubmissionsPreVote =\n    rfpSubmissionsVoteSummaries &&\n    !isEmpty(rfpSubmissionsVoteSummaries) &&\n    !Object.values(rfpSubmissionsVoteSummaries).some((vs) =>\n      [\n        PROPOSAL_VOTING_FINISHED,\n        PROPOSAL_VOTING_APPROVED,\n        PROPOSAL_VOTING_REJECTED,\n        PROPOSAL_VOTING_ACTIVE\n      ].includes(vs.status)\n    );\n  return (\n    isApprovedProposal(proposal, voteSummary) &&\n    isVotingFinishedProposal(voteSummary) &&\n    proposal.linkby &&\n    new Date().getTime() / 1000 > Number(proposal.linkby) &&\n    isSubmissionsPreVote\n  );\n};\n/**\n * Returns true if the given proposal is unreviewed\n * @param {Object} proposal\n * @returns {Boolean} isUnreviewed\n */\nexport const isUnreviewedProposal = (proposal) =>\n  proposal.status === PROPOSAL_STATUS_UNREVIEWED;\n/**\n * Returns true if the given proposal is censored\n * @param {Object} proposal\n * @returns {Boolean} isCensored\n */\nexport const isCensoredProposal = (proposal) =>\n  proposal?.status === PROPOSAL_STATUS_CENSORED;\n\n/**\n * Returns true if the given proposal is public, but voting\n * is not authorized yet.\n * @param {Object} voteSummary\n * @returns {Boolean} isVotingNotAuthorized\n */\nexport const isVotingNotAuthorizedProposal = (voteSummary) =>\n  !!voteSummary && voteSummary.status === PROPOSAL_VOTING_NOT_AUTHORIZED;\n\n/**\n * Returns true if the given proposal is authorized for voting.\n * @param {Object} voteSummary\n * @returns {Boolean} isVotingAuthorized\n */\nexport const isVotingAuthorizedProposal = (voteSummary) =>\n  !!voteSummary && voteSummary.status === PROPOSAL_VOTING_AUTHORIZED;\n\n/**\n * Returns true if the given proposal is public, but voting\n * has finished already\n * @param {Object} voteSummary\n * @returns {Boolean} isVotingFinished\n */\nexport const isVotingFinishedProposal = (voteSummary) =>\n  !!voteSummary &&\n  (voteSummary.status === PROPOSAL_VOTING_FINISHED ||\n    voteSummary.status === PROPOSAL_VOTING_APPROVED ||\n    voteSummary.status === PROPOSAL_VOTING_REJECTED);\n\n/**\n * Returns true if the given proposal is editable\n * @param {Object} proposal\n * @param {Object} voteSummary\n * @returns {Boolean} isEditable\n */\nexport const isEditableProposal = (proposal, voteSummary) =>\n  isUnreviewedProposal(proposal) ||\n  (isUnderDiscussionProposal(proposal, voteSummary) &&\n    isVotingNotAuthorizedProposal(voteSummary));\n\n/**\n * Returns true if the given proposal is under discussion\n * @param {Object} proposal\n * @param {Object} voteSummary\n * @returns {Boolean} isUnderDiscussion\n */\nexport const isUnderDiscussionProposal = (proposal, voteSummary) =>\n  isPublicProposal(proposal) &&\n  !isVoteActiveProposal(voteSummary) &&\n  !isVotingFinishedProposal(voteSummary);\n\n/**\n * Returns true if the given proposal is abandoned\n * @param {Object} proposalSummary\n * @returns {Boolean} isAbandoned\n */\nexport const isAbandonedProposal = (proposalSummary) =>\n  !!proposalSummary &&\n  (proposalSummary.status === PROPOSAL_SUMMARY_STATUS_ABANDONED ||\n    proposalSummary.status === PROPOSAL_SUMMARY_STATUS_UNVETTED_ABANDONED);\n\n/**\n * Returns true if the given proposal summary is censored\n * @param {Object} proposalSummary\n * @returns {Boolean} isCensored\n */\nexport const isCensoredProposalSummary = (proposalSummary) =>\n  !!proposalSummary &&\n  (proposalSummary.status === PROPOSAL_SUMMARY_STATUS_UNVETTED_CENSORED ||\n    proposalSummary.status === PROPOSAL_SUMMARY_STATUS_CENSORED);\n\n/**\n * Returns true if the given proposal is approved\n * @param {Object} proposal\n * @param {Object} voteSummary\n * @returns {Boolean} isApproved\n */\nexport const isApprovedProposal = (proposal, voteSummary) => {\n  if (!proposal || !voteSummary || !isPublicProposal(proposal)) {\n    return false;\n  }\n  return voteSummary.status === PROPOSAL_VOTING_APPROVED;\n};\n\n/**\n * Returns true if the proposal vote is active\n * @param {Object} voteSummary\n * @returns {Boolean} isVoteActiceProposal\n */\nexport const isVoteActiveProposal = (voteSummary) =>\n  !!voteSummary && voteSummary.status === PROPOSAL_VOTING_ACTIVE;\n\n/**\n * Returns true if the proposal is closed\n * @param {Object} proposalSummary\n * @returns {Boolean} isClosedProposal\n */\nexport const isClosedProposal = (proposalSummary) =>\n  !!proposalSummary &&\n  proposalSummary.status === PROPOSAL_SUMMARY_STATUS_CLOSED;\n\n/**\n * Returns true if the proposal is completed\n * @param {Object} proposalSummary\n * @returns {Boolean} isCompletedProposal\n */\nexport const isCompletedProposal = (proposalSummary) =>\n  !!proposalSummary &&\n  proposalSummary.status === PROPOSAL_SUMMARY_STATUS_COMPLETED;\n\n/**\n * Returns true if the proposal is active\n * @param {Object} proposalSummary\n * @returns {Boolean} isActiveProposal\n */\nexport const isActiveProposal = (proposalSummary) =>\n  !!proposalSummary &&\n  proposalSummary.status === PROPOSAL_SUMMARY_STATUS_ACTIVE;\n\n/**\n * Returns true if the proposal is rejected\n * @param {Object} proposalSummary\n * @returns {Boolean} isRejectedProposal\n */\nexport const isRejectedProposal = (proposalSummary) =>\n  !!proposalSummary &&\n  proposalSummary.status === PROPOSAL_SUMMARY_STATUS_REJECTED;\n\n/**\n * Return the amount of blocks left to the end of the voting period\n * @param {Object} voteSummary\n * @param {Number} chainHeight\n * @returns {Number} number of blocks left\n */\nexport const getVoteBlocksLeft = (voteSummary, chainHeight) => {\n  if (!voteSummary) return null;\n  const { endblockheight } = voteSummary;\n  return +endblockheight - chainHeight;\n};\n\n/**\n * Returns a timestamp of vote end date\n * @param {Object} voteSummary\n * @param {Number} chainHeight\n * @param {Boolean} isTestnet\n * @returns {Number}\n */\nexport const getVoteEndTimestamp = (voteSummary, chainHeight, isTestnet) => {\n  if (!voteSummary) {\n    return \"\";\n  }\n  const blocks = getVoteBlocksLeft(voteSummary, chainHeight);\n  const blockTimeMinutes = isTestnet\n    ? blocks * BLOCK_DURATION_TESTNET\n    : blocks * BLOCK_DURATION_MAINNET;\n  const mili = blockTimeMinutes * 60000;\n  const dateMs = new Date(mili + Date.now());\n  return Math.round(dateMs / 1000); // returns unix timestamp\n};\n\n/**\n * Returns the markdown content from an array of proposal files\n * @param {Array} files\n * @returns {String} markdownContent\n */\nexport const getMarkdownContent = (files) => {\n  const markdownFile = files.find((f) => f.name === \"index.md\");\n  return markdownFile ? getTextFromIndexMd(markdownFile) : \"\";\n};\n\n/**\n * Returns the proposal censorship token\n * @param {Object} proposal\n * @returns {String} censorhipToken\n */\nexport const getProposalToken = (proposal) =>\n  proposal && proposal.censorshiprecord && proposal.censorshiprecord.token;\n\n/**\n * Retruns the propsoal url using a given token\n * if full token is passed (64 chars hex) then first 7 chars used\n * @param {String} token proposal token\n * @param {boolean} isJsEnabled true if Javascript is enabled\n */\nexport const getProposalUrl = (token, isJsEnabled) =>\n  isJsEnabled\n    ? `/record/${shortRecordToken(token)}`\n    : `${NOJS_ROUTE_PREFIX}/record/${token}`;\n\n/**\n * Retruns the url proposal's comments section using a given token\n * if full token is passed (64 chars hex) then first 7 chars used\n * @param {String} token proposal token\n * @param {boolean} isJsEnabled true if Javascript is enabled\n */\nexport const getCommentsUrl = (token, isJsEnabled) =>\n  isJsEnabled\n    ? `/record/${shortRecordToken(token)}?scrollToComments=true`\n    : `${NOJS_ROUTE_PREFIX}/record/${token}?scrollToComments=true`;\n\n/**\n * Returns author's account URL\n * @param {String} userid author user id\n * @param {boolean} isJsEnabled true if Javascript is enabled\n */\nexport const getAuthorUrl = (userid, isJsEnabled) =>\n  isJsEnabled ? `/user/${userid}` : `${NOJS_ROUTE_PREFIX}/user/${userid}`;\n\nexport const goToFullProposal = (history, proposalURL) => (e) => {\n  if (!e.metaKey && !e.ctrlKey) {\n    return history.push(proposalURL);\n  }\n};\n\n/**\n * Returns the proposal list with RFP Proposal linked to RFP submissions\n * @param {object} proposalsByToken\n * @param {object} voteSumamries\n * @param {object} proposalSummaries\n */\nexport const getRfpLinkedProposals = (\n  proposalsByToken,\n  voteSummaries,\n  proposalSummaries\n) =>\n  values(proposalsByToken).reduce((acc, proposal) => {\n    const shortProposalToken = shortRecordToken(getProposalToken(proposal));\n    const isRfp = !!proposal.linkby;\n    const isSubmission = !!proposal.linkto;\n    if (!isSubmission && !isRfp) return acc;\n    if (isSubmission) {\n      const linkedProposal =\n        proposalsByToken[shortRecordToken(proposal.linkto)];\n      if (!linkedProposal) return acc;\n      return set([shortProposalToken, \"proposedFor\"], linkedProposal.name)(acc);\n    }\n    if (isRfp) {\n      const linkedFrom =\n        proposal.linkedfrom?.map((val) => shortRecordToken(val)) || [];\n      const rfpSubmissions = linkedFrom && {\n        proposals: values(pick(proposalsByToken, linkedFrom)),\n        voteSummaries: pick(voteSummaries, linkedFrom),\n        proposalSummaries: pick(proposalSummaries, linkedFrom)\n      };\n      return {\n        ...acc,\n        [shortProposalToken]: {\n          ...proposal,\n          rfpSubmissions\n        }\n      };\n    }\n    return acc;\n  }, proposalsByToken);\n\n/**\n * Returns a formatted proposal object including the rfp links for the given proposal\n * @param {object} proposal\n * @param {object} rfpSubmissions\n * @param {object} proposals\n */\nexport const getProposalRfpLinks = (proposal, rfpSubmissions, proposals) => {\n  if (!proposal) return;\n  const isRfp = !!proposal.linkby;\n  const isSubmission = !!proposal.linkto;\n\n  if (!isRfp && !isSubmission) return proposal;\n  const hasRfpSubmissions = isRfp && rfpSubmissions;\n  const isSubmissionWithProposals = isSubmission && !isEmpty(proposals);\n  return hasRfpSubmissions\n    ? { ...proposal, rfpSubmissions }\n    : isSubmissionWithProposals\n    ? {\n        ...proposal,\n        proposedFor: proposals[shortRecordToken(proposal.linkto)]?.name\n      }\n    : proposal;\n};\n\nexport const getProposalStateLabel = (proposalState) =>\n  get(proposalState)({\n    [PROPOSAL_STATE_VETTED]: \"vetted\",\n    [PROPOSAL_STATE_UNVETTED]: \"unvetted\"\n  });\n\nexport const getProposalStatusLabel = (status, isByRecordStatus) =>\n  get(status)(\n    isByRecordStatus\n      ? {\n          [PROPOSAL_STATUS_UNREVIEWED]: UNREVIEWED,\n          [PROPOSAL_STATUS_ARCHIVED]: ARCHIVED,\n          [PROPOSAL_STATUS_CENSORED]: CENSORED,\n          [PROPOSAL_STATUS_PUBLIC]: PUBLIC\n        }\n      : {\n          [PROPOSAL_VOTING_NOT_AUTHORIZED]: UNAUTHORIZED,\n          [PROPOSAL_VOTING_AUTHORIZED]: AUTHORIZED,\n          [PROPOSAL_VOTING_ACTIVE]: ACTIVE_VOTE,\n          [PROPOSAL_VOTING_APPROVED]: APPROVED,\n          [PROPOSAL_VOTING_REJECTED]: REJECTED,\n          [PROPOSAL_VOTING_INELIGIBLE]: INELIGIBLE\n        }\n  );\n\nexport const getProposalLink = (proposal, isJsEnabled) =>\n  proposal\n    ? getProposalUrl(\n        proposal.censorshiprecord?.token,\n        isJsEnabled,\n        proposal.state\n      )\n    : \"\";\n\n/**\n * Returns a [batch, rest] pair given the batch page size from tokens array\n * @param {*} tokens\n * @param {*} pageSize\n */\nexport const getTokensForProposalsPagination = (tokens, pageSize) => [\n  take(pageSize)(tokens),\n  takeRight(tokens.length - pageSize)(tokens)\n];\n\n/**\n * Returns the proposal tokens by status from an inventory of tokens\n * @param {number[]} statuses\n * @param {boolean} isByRecordStatus\n * @param {Object.<string, string[]>} inventory\n */\nexport const getRecordsTokensByStatusList = (\n  statuses = [],\n  isByRecordStatus,\n  inventory\n) =>\n  statuses.reduce((tokens, status) => {\n    const label = getProposalStatusLabel(status, isByRecordStatus);\n    return [...tokens, ...(inventory[label] || [])];\n  }, []);\n\n/**\n * Returns a map of proposals tokens with the key is tab name\n * the tokens are taken from the inventory, filtered by status\n * @param {Object.<string, number[]>} statusByTab\n * @param {Object.<string, string[]>} inventory\n * @param {boolean} isByRecordStatus\n */\nexport const mapProposalsTokensByTab = (\n  statusByTab,\n  inventory,\n  isByRecordStatus\n) =>\n  Object.entries(statusByTab).reduce((map, [tab, statuses]) => {\n    return {\n      ...map,\n      [tab]: getRecordsTokensByStatusList(statuses, isByRecordStatus, inventory)\n    };\n  }, {});\n","import * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\n\nexport default function useTimestamps() {\n  const onFetchRecordTimestamps = useAction(act.onFetchRecordTimestamps);\n  const onFetchCommentsTimestamps = useAction(act.onFetchCommentsTimestamps);\n  const onFetchTicketVoteTimestamps = useAction(\n    act.onFetchTicketVoteTimestamps\n  );\n  const onFetchVotesBundle = useAction(act.onFetchVotesBundle);\n  return {\n    onFetchRecordTimestamps,\n    onFetchCommentsTimestamps,\n    onFetchTicketVoteTimestamps,\n    onFetchVotesBundle\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, Button, P, Text, Message } from \"pi-ui\";\n// import { Row } from \"./layout\";\n\nconst ModalExternalLink = ({ show, onClose, link }) => {\n  const tmpLink = document.createElement(\"a\");\n  tmpLink.href = link;\n  function onProceed() {\n    const newWindow = window.open();\n    newWindow.opener = null;\n    newWindow.location.href = link;\n    newWindow.target = \"_blank\";\n    onClose();\n  }\n  return (\n    <Modal show={show} onClose={onClose} title=\"Warning: Leaving Politeia\">\n      <Message kind=\"warning\">\n        <P>\n          {\" \"}\n          You are about to be sent to an external website. This can result in\n          unintended consequences.\n          <strong> DO NOT</strong> enter your Politeia credentials or reveal any\n          other sensitive information.\n          <strong> DO NOT</strong> download or run any linked files on the\n          computer storing your cryptocurrencies.\n        </P>\n      </Message>\n      <div className=\"margin-top-s\">\n        <Text className=\"margin-top-s\" weight=\"bold\">\n          External link:\n        </Text>\n        <div\n          className=\"margin-top-xs\"\n          style={{\n            display: \"inline-block\",\n            border: \"1px solid #dcdcdc\",\n            padding: \".5em\",\n            borderRadius: \"6px\",\n            background: \"#dcdcdc5c\",\n            width: \"100%\"\n          }}\n        >\n          <Text>{tmpLink.protocol + \"//\"}</Text>\n          <Text color=\"orange\">{tmpLink.hostname}</Text>\n          <Text>{tmpLink.pathname + tmpLink.search + tmpLink.hash}</Text>\n        </div>\n      </div>\n      <div className=\"margin-top-m justify-center\">\n        <Text weight=\"semibold\">Are you sure you want to open this link?</Text>\n      </div>\n      <div className=\"margin-top-m justify-right\">\n        <Button className=\"margin-top-s\" onClick={onProceed}>\n          Yes, proceed\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nModalExternalLink.propTypes = {\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  link: PropTypes.string\n};\n\nexport default ModalExternalLink;\n","import React from \"react\";\nimport ModalExternalLink from \"../ModalExternalLink\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport xssFilters from \"xss-filters\";\n\nexport const traverseChildren = (el, cb) => {\n  const filterChildren = (c) =>\n    React.Children.map(c, (child) => traverseChildren(child, cb));\n  let newElement = null;\n  if (el.children) {\n    newElement = {\n      ...el,\n      children: filterChildren(el.children)\n    };\n  } else if (el.props && el.props.children) {\n    const filteredChildren = filterChildren(el.props.children);\n    newElement = {\n      ...el,\n      props: {\n        ...el.props,\n        children: filteredChildren\n      }\n    };\n  }\n  return newElement ? cb(newElement) : cb(el);\n};\n\nconst handleFilterXss = (el) => {\n  if (typeof el === \"string\") return el;\n  const props = el.props;\n  if (!props) {\n    return el;\n  }\n  const newProps = {\n    ...props\n  };\n  if (newProps.url) {\n    newProps.url = xssFilters.uriInDoubleQuotedAttr(props.url);\n  }\n  if (newProps.href) {\n    newProps.href = xssFilters.uriInDoubleQuotedAttr(props.href);\n  }\n  return {\n    ...el,\n    props: newProps\n  };\n};\n\nconst isExternalLink = (link) => {\n  // Does this to prevent xss attacks\n  const tmpLink = document.createElement(\"a\");\n  tmpLink.href = link;\n  const externalLink =\n    tmpLink.hostname && tmpLink.hostname !== window.top.location.hostname;\n\n  return externalLink;\n};\n\nconst LinkRenderer = ({ url, children }) => {\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  function onLinkClick(e) {\n    if (isExternalLink(url)) {\n      e.preventDefault();\n      handleOpenModal(ModalExternalLink, {\n        onClose: handleCloseModal,\n        link: url\n      });\n    }\n  }\n  return handleFilterXss(\n    <a href={url} onClick={onLinkClick}>\n      {children}\n    </a>\n  );\n};\n\n// Use external link renderer when images are not allowed\nconst imageHandler =\n  (renderImages) =>\n  ({ src, alt }) =>\n    renderImages ? (\n      <img src={src} alt={alt} />\n    ) : (\n      <LinkRenderer url={src}>{alt}</LinkRenderer>\n    );\n\nconst linkHandler = ({ href, children }) => {\n  return <LinkRenderer url={href}>{children}</LinkRenderer>;\n};\n\nexport const customComponents = (renderImages) => ({\n  // Root handler is no longer required due to react-markdown updates\n  img: imageHandler(renderImages),\n  a: linkHandler\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactMarkdown from \"react-markdown\";\nimport gfm from \"remark-gfm\";\nimport { customComponents } from \"./helpers\";\nimport \"./styles.css\";\n\nconst MarkdownRenderer = ({\n  body,\n  className,\n  renderImages = true,\n  disallowedElements,\n  ...props\n}) => (\n  <div className={className} {...props} data-testid=\"markdown-wrapper\">\n    <ReactMarkdown\n      className=\"markdown-body\"\n      skipHtml={true}\n      unwrapDisallowed={true}\n      remarkPlugins={[gfm]}\n      components={customComponents(renderImages)}\n      disallowedElements={disallowedElements}\n    >\n      {body}\n    </ReactMarkdown>\n  </div>\n);\n\nMarkdownRenderer.prototype = {\n  body: PropTypes.string,\n  className: PropTypes.string,\n  confirmWithModal: PropTypes.bool,\n  renderImages: PropTypes.bool,\n  displayExternalLikWarning: PropTypes.bool,\n  escapeHtml: PropTypes.bool\n};\n\nexport default React.memo(MarkdownRenderer);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleWrapper\":\"Search_titleWrapper__1wGsc\",\"searchBox\":\"Search_searchBox__3d0Cf\",\"select\":\"Search_select__3IQT2\",\"searchButton\":\"Search_searchButton__2ixLQ\",\"searchByRadioGroup\":\"Search_searchByRadioGroup__18zyc\",\"searchByRadioButton\":\"Search_searchByRadioButton__2xepw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ModalFullImage_wrapper__3hy-o\",\"content\":\"ModalFullImage_content__3c896\",\"navigator\":\"ModalFullImage_navigator__1AhjN\",\"navigatorIcon\":\"ModalFullImage_navigatorIcon__2ERqz\",\"navigatorCard\":\"ModalFullImage_navigatorCard__3COXB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"InfoSection_label__hT5YY\",\"darkLabel\":\"InfoSection_darkLabel__2tuO_\",\"sectionWrapper\":\"InfoSection_sectionWrapper__nb5kw\",\"info\":\"InfoSection_info__2Rrcv\",\"noInfo\":\"InfoSection_noInfo__3DGkE\",\"infoError\":\"InfoSection_infoError__270zC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"InvoiceFilterForm_form__2dYRn\",\"checkboxesWrapper\":\"InvoiceFilterForm_checkboxesWrapper__2g52X\",\"topFilters\":\"InvoiceFilterForm_topFilters__1uQSG\",\"monthPicker\":\"InvoiceFilterForm_monthPicker__18SK-\",\"presetDates\":\"InvoiceFilterForm_presetDates__VNzzq\",\"selector\":\"InvoiceFilterForm_selector__1zM9b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"ProposalBillingDetails_spinnerWrapper__1_EsJ\",\"totalText\":\"ProposalBillingDetails_totalText__1g4ml\",\"reference\":\"ProposalBillingDetails_reference__10tko\",\"value\":\"ProposalBillingDetails_value__O9X-U\",\"tableWrapper\":\"ProposalBillingDetails_tableWrapper__16Kxs\",\"table\":\"ProposalBillingDetails_table__yxyq6\"};","import { Modal } from \"pi-ui\";\nimport React from \"react\";\nimport LoginForm from \"src/containers/User/Login/Form\";\nimport useOnRouteChange from \"src/hooks/utils/useOnRouteChange\";\n\nconst ModalLogin = ({ title = \"Login\", onLoggedIn, onClose, ...props }) => {\n  useOnRouteChange(onClose);\n  return (\n    <Modal\n      title={title}\n      onClose={onClose}\n      iconType=\"info\"\n      data-testid=\"modal-login\"\n      iconSize=\"lg\"\n      {...props}\n      contentStyle={{ width: \"100%\" }}\n      titleStyle={{ paddingRight: \"4rem\" }}\n    >\n      <LoginForm\n        onLoggedIn={onLoggedIn}\n        hideTitle\n        redirectToPrivacyPolicyRoute\n        emailId=\"modalloginemail\"\n        passwordId=\"modalloginpassword\"\n        renderPrivacyPolicyModal={false}\n      />\n    </Modal>\n  );\n};\n\nexport default React.memo(ModalLogin);\n","import { useEffect } from \"react\";\nimport { useConfig } from \"src/containers/Config\";\n\nconst setDocumentTitle = (title) => (document.title = title);\n\nexport function useDocumentTitle(title) {\n  const { title: defaultTitle } = useConfig();\n  const newTitle = title || defaultTitle;\n\n  useEffect(() => {\n    setDocumentTitle(newTitle);\n  }, [newTitle]);\n}\n\nexport default useDocumentTitle;\n","import { useLayoutEffect } from \"react\";\n\nfunction useScrollToTop(disable = false) {\n  useLayoutEffect(() => {\n    if (!disable) {\n      window.scrollTo(0, 0);\n    }\n  }, [disable]);\n}\n\nexport default useScrollToTop;\n","import { useCallback, useMemo, useState, useEffect } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { or } from \"src/lib/fp\";\nimport { useSelector, useAction } from \"src/redux\";\nimport useThrowError from \"src/hooks/utils/useThrowError\";\nimport useFetchMachine, {\n  VERIFY,\n  FETCH,\n  REJECT,\n  RESOLVE,\n  START\n} from \"src/hooks/utils/useFetchMachine\";\nimport values from \"lodash/fp/values\";\nimport compact from \"lodash/fp/compact\";\nimport uniq from \"lodash/fp/uniq\";\nimport map from \"lodash/fp/map\";\nimport flow from \"lodash/fp/flow\";\nimport isEmpty from \"lodash/fp/isEmpty\";\nimport isUndefined from \"lodash/fp/isUndefined\";\nimport keys from \"lodash/fp/keys\";\nimport difference from \"lodash/fp/difference\";\nimport assign from \"lodash/fp/assign\";\nimport {\n  PROPOSAL_STATE_UNVETTED,\n  PROPOSAL_STATE_VETTED,\n  PROPOSAL_STATUS_UNREVIEWED,\n  APPROVED\n} from \"src/constants\";\nimport { shortRecordToken } from \"src/helpers\";\nimport {\n  getRfpLinkedProposals,\n  getProposalStatusLabel,\n  getTokensForProposalsPagination\n} from \"src/containers/Proposal/helpers\";\n\nconst getRfpLinks = (proposals) =>\n  flow(\n    values,\n    map((p) => p.linkto),\n    uniq,\n    compact\n  )(proposals);\n\nconst getUnfetchedTokens = (proposals, tokens) =>\n  difference(tokens.map((token) => shortRecordToken(token)))(\n    keys(proposals).map((token) => shortRecordToken(token))\n  );\n\nconst cacheVoteStatus = {};\n\nconst updateCacheVoteStatusMap = (voteSummaries, isRefresh) => {\n  Object.keys(voteSummaries).forEach((token) => {\n    const shortToken = shortRecordToken(token);\n    cacheVoteStatus[shortToken] =\n      isUndefined(cacheVoteStatus[shortToken]) || isRefresh\n        ? voteSummaries[token].status\n        : cacheVoteStatus[shortToken];\n  });\n};\n\nconst proposalWithCacheVotetatus = (proposals) => {\n  return Object.keys(proposals).reduce((acc, curr) => {\n    const shortToken = shortRecordToken(curr);\n    return {\n      ...acc,\n      [shortToken]: {\n        ...proposals[curr],\n        voteStatus: cacheVoteStatus[shortToken]\n      }\n    };\n  }, {});\n};\n\nconst tagProposalsToForceReload = (tokensToLoad, proposalsByToken) => {\n  tokensToLoad &&\n    tokensToLoad.forEach((token) => {\n      if (proposalsByToken[token]) {\n        proposalsByToken[token].forceLoad = true;\n      }\n    });\n  return proposalsByToken;\n};\n\nfunction getProposals(\n  proposals,\n  voteSummaries,\n  proposalSummaries,\n  missingBillingStatusChangesTokens\n) {\n  const linkedProposals = getRfpLinkedProposals(\n    proposalWithCacheVotetatus(proposals),\n    voteSummaries,\n    proposalSummaries\n  );\n  return tagProposalsToForceReload(\n    missingBillingStatusChangesTokens,\n    linkedProposals\n  );\n}\n\nexport default function useProposalsBatch({\n  fetchRfpLinks,\n  fetchVoteSummary = false,\n  fetchProposalSummary = false,\n  unvetted = false,\n  proposalStatus,\n  statuses,\n  proposalPageSize,\n  inventoryPageSize\n}) {\n  const [remainingTokens, setRemainingTokens] = useState([]);\n  const [voteStatuses, setStatuses] = useState(statuses);\n  const [initializedInventory, setInitializedInventory] = useState(false);\n  const isByRecordStatus = isUndefined(voteStatuses);\n  const isAdmin = useSelector(sel.currentUserIsAdmin);\n  const proposals = useSelector(sel.proposalsByToken);\n  const recordState = unvetted\n    ? PROPOSAL_STATE_UNVETTED\n    : PROPOSAL_STATE_VETTED;\n  const currentStatuses = isByRecordStatus\n    ? proposalStatus || [PROPOSAL_STATUS_UNREVIEWED]\n    : voteStatuses;\n  const [statusIndex, setStatusIndex] = useState(0);\n  const currentStatus = useMemo(\n    () => currentStatuses[statusIndex],\n    [currentStatuses, statusIndex]\n  );\n  const voteSummaries = useSelector(sel.voteSummariesByToken);\n  updateCacheVoteStatusMap(voteSummaries);\n  const proposalSummaries = useSelector(sel.proposalSummariesByToken);\n  const billingStatusChangesByToken = useSelector(\n    sel.billingStatusChangesByToken\n  );\n  const allByStatus = useSelector(\n    isByRecordStatus ? sel.allByRecordStatus : sel.allByVoteStatus\n  );\n\n  const status = useMemo(\n    () => getProposalStatusLabel(currentStatus, isByRecordStatus),\n    [currentStatus, isByRecordStatus]\n  );\n  const isStatusApproved = status === APPROVED;\n  const tokens = useMemo(\n    () => allByStatus[status] || [],\n    [allByStatus, status]\n  );\n  const tokensFetched = useMemo(() => {\n    return proposals ? tokens.filter((t) => !!proposals[t]) : [];\n  }, [proposals, tokens]);\n  const page = useMemo(() => {\n    return tokens ? Math.floor(+tokens.length / inventoryPageSize) : 0;\n  }, [tokens, inventoryPageSize]);\n  const errorSelector = useMemo(\n    () => or(sel.apiProposalsBatchError, sel.apiPropsVoteSummaryError),\n    []\n  );\n  const error = useSelector(errorSelector);\n  const onFetchProposalsBatch = useAction(act.onFetchProposalsBatch);\n  const onFetchTokenInventory = useAction(act.onFetchTokenInventory);\n  const onFetchBillingStatusChanges = useAction(\n    act.onFetchBillingStatusChanges\n  );\n  const hasRemainingTokens = !isEmpty(remainingTokens);\n\n  const missingBillingStatusChangesTokens = useMemo(() => {\n    if (!isAdmin || !isStatusApproved) return [];\n    const missingTokens = tokensFetched.filter((token) =>\n      isEmpty(billingStatusChangesByToken[shortRecordToken(token)])\n    );\n    return missingTokens;\n  }, [isAdmin, isStatusApproved, tokensFetched, billingStatusChangesByToken]);\n\n  const scanNextStatusTokens = (index, oldTokens) => {\n    const status = currentStatuses[index];\n    const newTokens = getUnfetchedTokens(\n      proposals,\n      uniq(allByStatus[getProposalStatusLabel(status, isByRecordStatus)] || [])\n    );\n\n    const tokens = [...oldTokens, ...newTokens];\n    if (tokens.length < proposalPageSize && index < currentStatuses.length) {\n      return scanNextStatusTokens(index + 1, tokens);\n    }\n\n    return {\n      // If no tokens of the new status added return old index as the returned\n      // tokens correspond to the old status.\n      index: newTokens?.length ? index : index - 1,\n      tokens\n    };\n  };\n\n  const [state, send] = useFetchMachine({\n    actions: {\n      initial: () => send(START),\n      start: () => {\n        if (!proposalPageSize) return send(RESOLVE);\n        if (remainingTokens.length > proposalPageSize) return send(VERIFY);\n        // If remaining tokens length is smaller than proposal page size.\n        // Find more tokens from inventory or scan from the next status\n\n        // scanNextStatus: inventory is initialized and\n        // there are no tokens to be fetched from the next page\n        const scanNextStatus =\n          initializedInventory &&\n          (!(tokens.length % inventoryPageSize === 0 && tokens.length > 0) ||\n            (remainingTokens.length === proposalPageSize &&\n              currentStatuses[statusIndex + 1]));\n        if (scanNextStatus) {\n          const { index, tokens } = scanNextStatusTokens(\n            statusIndex + 1,\n            remainingTokens\n          );\n          setStatusIndex(index);\n          setRemainingTokens(tokens);\n          if (isEmpty(tokens)) return send(RESOLVE);\n\n          return send(VERIFY);\n        }\n\n        // Fetch tokens from inventory. Fetch all statuses at the first page.\n        // Next times, fetch the next page of the current status.\n        onFetchTokenInventory(\n          recordState,\n          page && currentStatus, // first page fetches all status\n          page + 1,\n          !isByRecordStatus\n        )\n          .catch((e) => send(REJECT, e))\n          .then(({ votes, records }) => {\n            setInitializedInventory(true);\n            // prepare token batch to fetch proposal for given status\n            const proposalStatusLabel = getProposalStatusLabel(\n              currentStatus,\n              isByRecordStatus\n            );\n            const newTokensByStatus = isByRecordStatus ? records : votes;\n            const newTokens = newTokensByStatus[proposalStatusLabel];\n            const tokens = [...newTokens, ...remainingTokens];\n            setRemainingTokens(tokens);\n\n            const isPageComplete = tokens.length === proposalPageSize;\n            const hasNextStatus = statusIndex + 1 < currentStatuses.length;\n            // Means the current batch request accepts more tokens than\n            // the current amount.\n            const needsToCompletePaginationBatch =\n              tokens.length < proposalPageSize && hasNextStatus;\n\n            // can scan more tokens from next status list in order to\n            // populate the remainingTokens array and don't lose any token\n            const needsNextStatusScan =\n              (isPageComplete && hasNextStatus) ||\n              needsToCompletePaginationBatch;\n\n            if (needsNextStatusScan) {\n              const nextIndex = statusIndex + 1;\n              const nextStatus = currentStatuses[nextIndex];\n              const nextStatusTokens = getUnfetchedTokens(\n                proposals,\n                uniq(\n                  (page ? allByStatus : newTokensByStatus)[\n                    getProposalStatusLabel(nextStatus, isByRecordStatus)\n                  ] || []\n                )\n              );\n              setRemainingTokens([...tokens, ...nextStatusTokens]);\n              setStatusIndex(nextIndex);\n\n              return send(START);\n            }\n\n            return send(VERIFY);\n          });\n\n        return send(FETCH);\n      },\n      verify: () => {\n        if (!hasRemainingTokens && !missingBillingStatusChangesTokens.length)\n          return send(RESOLVE, { proposals });\n        // If proposals are loaded but there are still missing billing status\n        // changes. It happens when you have a proposal list loaded and then, as\n        // admin, navigate to approved proposals tab.\n        if (missingBillingStatusChangesTokens.length) {\n          const [billingsToFetch] = getTokensForProposalsPagination(\n            missingBillingStatusChangesTokens,\n            proposalPageSize\n          );\n          onFetchBillingStatusChanges(billingsToFetch)\n            .then(() => send(VERIFY))\n            .catch((e) => send(REJECT, e));\n          return send(FETCH);\n        }\n        const [tokensToFetch, next] = getTokensForProposalsPagination(\n          remainingTokens,\n          proposalPageSize\n        );\n        // If fetch tokens of approved proposals and current user is admin, and\n        // there are no billing status changes for the tokensToFetch, fetch the\n        // billing status changes metadata if doesn't exist in the redux store.\n        let batchBillingTokensToFetch;\n        if (isStatusApproved && isAdmin) {\n          batchBillingTokensToFetch = tokensToFetch.filter((token) =>\n            isEmpty(billingStatusChangesByToken[shortRecordToken(token)])\n          );\n        }\n        Promise.all([\n          batchBillingTokensToFetch?.length &&\n            onFetchBillingStatusChanges(batchBillingTokensToFetch),\n          onFetchProposalsBatch({\n            tokens: tokensToFetch,\n            fetchVoteSummary,\n            fetchProposalSummary\n          })\n        ])\n          .then(([, [fetchedProposals]]) => {\n            if (isEmpty(fetchedProposals)) {\n              setRemainingTokens(next);\n              return send(RESOLVE);\n            }\n            const unfetchedTokens = getUnfetchedTokens(\n              assign(proposals, fetchedProposals),\n              tokensToFetch\n            );\n            setRemainingTokens([...unfetchedTokens, ...next]);\n            if (fetchRfpLinks) {\n              const rfpLinks = getRfpLinks(fetchedProposals);\n              const unfetchedRfpLinks = getUnfetchedTokens(proposals, rfpLinks);\n              if (!isEmpty(unfetchedRfpLinks)) {\n                setRemainingTokens([\n                  ...unfetchedRfpLinks,\n                  ...unfetchedTokens,\n                  ...next\n                ]);\n                return send(VERIFY);\n              }\n            }\n\n            return send(RESOLVE);\n          })\n          .catch((e) => send(REJECT, e));\n\n        return send(FETCH);\n      },\n      done: () => {\n        if (missingBillingStatusChangesTokens.length) {\n          return send(VERIFY);\n        }\n      }\n    },\n    initialValues: {\n      status: \"idle\",\n      loading: true,\n      proposals: {},\n      proposalsTokens: {},\n      verifying: true\n    }\n  });\n\n  // onRestartMachine is called when the user clicks on a new tab\n  // The function will find out whether the status has been loading in the previous session.\n  // If no status is found, all the data is loaded in this tab. Go to the RESOLVE state.\n  const onRestartMachine = (newStatuses) => {\n    updateCacheVoteStatusMap(voteSummaries, true);\n    let unfetchedTokens = [],\n      index = 0;\n    const statuses = newStatuses || currentStatuses;\n\n    const foundPreviousSessionStatus = statuses.find((status, i) => {\n      const statusLabel = getProposalStatusLabel(status, isByRecordStatus);\n      unfetchedTokens = getUnfetchedTokens(\n        proposals,\n        uniq(allByStatus[statusLabel] || [])\n      );\n      if (unfetchedTokens.length > 0) {\n        index = i;\n        return true;\n      }\n      return false;\n    });\n\n    setRemainingTokens(unfetchedTokens);\n    if (isByRecordStatus) {\n      proposalStatus = statuses;\n    } else {\n      setStatuses(statuses);\n    }\n    // machine stop condition: inventory loaded, but no tokens to fetch\n    if (!foundPreviousSessionStatus) {\n      setStatusIndex(statuses.length - 1);\n      return send(RESOLVE);\n    }\n    setStatusIndex(index);\n    return send(START);\n  };\n\n  const isFetchDone =\n    !remainingTokens.length &&\n    state.status === \"success\" &&\n    !getUnfetchedTokens(proposals, tokens).length;\n\n  const isAnotherTokensScanningRequired =\n    tokens && tokens.length && tokens.length % inventoryPageSize === 0;\n\n  const onFetchMoreProposals = useCallback(() => {\n    if (remainingTokens.length < proposalPageSize) return send(START);\n\n    return send(VERIFY);\n  }, [send, remainingTokens, proposalPageSize]);\n\n  const anyError = error || state.error;\n  useThrowError(anyError);\n\n  // Recall fetch machine when proposalPageSize is changed. Since it is\n  // not hard code and be fetched from policy and will be undefined when\n  // the policy is not fetched yet.\n  useEffect(() => {\n    send(START);\n  }, [proposalPageSize, send]);\n\n  return {\n    proposals: getProposals(\n      proposals,\n      voteSummaries,\n      proposalSummaries,\n      missingBillingStatusChangesTokens\n    ),\n    onFetchProposalsBatch,\n    proposalsTokens: allByStatus,\n    // loading is true when fetching cycle is running and there are no\n    // proposals fetched to avoid flickering at starting.\n    loading:\n      state.loading ||\n      (!values(proposals).length && statusIndex + 1 < voteStatuses?.length),\n    verifying: state.verifying,\n    onRestartMachine,\n    onFetchMoreProposals,\n    hasMoreProposals:\n      (!!remainingTokens.length && !!values(proposals).length) ||\n      isAnotherTokensScanningRequired,\n    isProposalsBatchComplete: isFetchDone && !isAnotherTokensScanningRequired,\n    machineCurrentState: state.status\n  };\n}\n","import { useState, useEffect } from \"react\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport * as pki from \"src/lib/pki\";\n\nconst IDENTITY_NOT_FOUND =\n  \"Failed to load user identity. You need tor restore it from a backup or generate a new one.\";\nconst IDENTITY_MISMATCH =\n  \"User identity doesn't match with the server identity.\";\n\nconst useIdentity = () => {\n  const [error, setError] = useState(null);\n  const [identity, setIdentity] = useState(null);\n  const { initDone, currentUser } = useLoaderContext();\n\n  const userLoggedIn = initDone && !!currentUser;\n  const userid = !!currentUser && currentUser.userid;\n  const userActivePublicKey = !!currentUser && currentUser.publickey;\n\n  useEffect(() => {\n    async function verifyIdentity() {\n      try {\n        const keys = await pki.getKeys(userid);\n\n        if (!keys) {\n          throw new Error(IDENTITY_NOT_FOUND);\n        }\n\n        const valid = keys.publicKey === userActivePublicKey;\n        setIdentity({\n          ...keys,\n          valid\n        });\n\n        if (!valid) {\n          throw new Error(IDENTITY_MISMATCH);\n        }\n        setError(null);\n      } catch (e) {\n        setError(e);\n      }\n    }\n\n    if (userLoggedIn && userid) {\n      verifyIdentity();\n    }\n  }, [userLoggedIn, userid, userActivePublicKey]);\n\n  return [identity, error];\n};\n\nexport default useIdentity;\n","import { MONTHS_LABELS, IDENTITY_ERROR } from \"./constants\";\nimport { formatDateToInternationalString } from \"./helpers\";\n/**\n * Converts atoms to DCR\n *\n * @param {number} atoms - amount in atoms\n * @return {number} dcr - amount in dcr\n */\nexport const convertAtomsToDcr = (atoms) => atoms / 100000000;\n\n/**\n * Formats unix seconds timestamp to a UTC string date\n *\n * @param {number} unixtimestamp - unix timestamp\n * @return {string} date - date formated in UTC String\n */\nexport const formatUnixTimestamp = (unixtimestamp) =>\n  new Date(unixtimestamp * 1000).toUTCString();\n\n/**\n * Formats unix seconds timestamp to an { day, month, year} object\n * @param {number} unixtimestamp - unix seconds timestamp\n * @return {object} date - { day, month, year } object\n */\nexport const formatUnixTimestampToObj = (unixtimestamp) => {\n  const date = new Date(unixtimestamp * 1000);\n  return {\n    day: date.getDate(),\n    month: date.getMonth() + 1,\n    year: date.getFullYear()\n  };\n};\n\n/**\n * Formats unix seconds timestamp to a short UTC string date\n *\n * @param {number} unixtimestamp - unix seconds timestamp\n * @return {string} date - date formated in dd mmm yyyy\n */\nexport const formatShortUnixTimestamp = (unixtimestamp) => {\n  const currentdate = new Date(unixtimestamp * 1000);\n  return `${currentdate.getUTCDate()} ${\n    MONTHS_LABELS[currentdate.getUTCMonth()]\n  } ${currentdate.getUTCFullYear()}`;\n};\n\n/**\n * Returns a formatter to format a number to US standard currency string. Example: const f = currencyFormatter(\"USD\"); f.format(2500) // $2,500.00\n * @param {string} currency\n */\nexport const currencyFormatter = (currency) =>\n  new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: currency\n  });\n\n/** exports an usdFormatter */\nexport const usdFormatter = currencyFormatter(\"USD\");\n\n/** Exports a simple formatter that takes cents and returns in dollars and label */\nexport const formatCentsToUSD = (centsInput) => {\n  const dollars = centsInput / 100;\n  return dollars.toFixed(2) + \" USD\";\n};\n\n/*\n * Verifies whether given error is some identity error.\n */\nexport const isIdentityError = (error) => {\n  const mapPluginIdentityErrors = {\n    \"comments-user\": 3,\n    comments: 2,\n    \"records-user\": 10,\n    \"pi-user\": 2,\n    \"ticketvote-user\": 2,\n    ticketvote: 2,\n    www: 21\n  };\n  const isPluginIdentityError =\n    error &&\n    error.errorid &&\n    mapPluginIdentityErrors[error.errorid] === error.errorcode;\n  return error?.message === IDENTITY_ERROR || isPluginIdentityError;\n};\n\n/**\n * parseTimestampsFromMessage returns a human friendly message with formatted\n * timestamps.\n * @param {string} msg\n */\nexport function formatTimestampsFromMessage(msg) {\n  let newMsg = msg;\n  const timestamps = msg.match(/[0-9]+/g);\n  if (timestamps) {\n    timestamps.forEach((t) => {\n      const formattedTime = formatDateToInternationalString(\n        formatUnixTimestampToObj(t)\n      );\n      newMsg = newMsg.replace(t, formattedTime);\n    });\n  }\n  return newMsg;\n}\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport { useAPIAction } from \"src/hooks\";\n\nfunction useSubContractors() {\n  const subContractors = useSelector(sel.subContractors);\n  const onFetchUserSubcontractors = useAction(act.onFetchUserSubcontractors);\n  const [loading, error] = useAPIAction(\n    onFetchUserSubcontractors,\n    [],\n    !subContractors\n  );\n  return { subContractors, error, loading };\n}\n\nexport default useSubContractors;\n","import { useState, useEffect } from \"react\";\nimport usePolicy from \"./usePolicy\";\n\nexport default function useValidationSchema(schemaCreator) {\n  const { policy } = usePolicy();\n  const [validationSchema, setValidationSchema] = useState(\n    policy ? schemaCreator(policy) : null\n  );\n\n  useEffect(\n    function handleSetValidationSchemaFromPolicy() {\n      if (!!policy && !validationSchema) {\n        setValidationSchema(schemaCreator(policy));\n      }\n    },\n    [policy, validationSchema, schemaCreator]\n  );\n\n  return validationSchema;\n}\n","import { useState, useCallback } from \"react\";\nimport { getQueryStringValue, setQueryStringValue } from \"src/lib/queryString\";\n\nfunction useQueryString(key, initialValue) {\n  const [value, setValue] = useState(getQueryStringValue(key) || initialValue);\n  const onSetValue = useCallback(\n    (newValue) => {\n      setValue(newValue);\n      setQueryStringValue(key, newValue);\n    },\n    [key]\n  );\n\n  return [value, onSetValue];\n}\n\nexport default useQueryString;\n","import { useEffect, useMemo, useState, useCallback } from \"react\";\nimport useQueryString from \"./useQueryString\";\n\nconst findIndexValue = (value, values, initialIndex = 0) => {\n  const index = values.findIndex((v) => v === value);\n  return index >= 0 ? index : initialIndex;\n};\n\nfunction useQueryStringWithIndexValue(key, initialIndex, values) {\n  const computedValues = useMemo(\n    () => values.map((v) => v.toLowerCase()),\n    [values]\n  );\n  const [value, onSetValue] = useQueryString(key, values[initialIndex]);\n  const [index, setIndex] = useState(\n    findIndexValue(value, computedValues, initialIndex)\n  );\n\n  const onSetIndex = useCallback(\n    (index) => {\n      const newValue = computedValues[index];\n      onSetValue(newValue);\n    },\n    [computedValues, onSetValue]\n  );\n\n  useEffect(\n    function onValueChange() {\n      setIndex(findIndexValue(value, computedValues, initialIndex));\n    },\n    [value, computedValues, initialIndex]\n  );\n\n  return [index, onSetIndex];\n}\n\nexport default useQueryStringWithIndexValue;\n","import { useCallback, useMemo, useState, useEffect } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { or } from \"src/lib/fp\";\nimport { useStoreSubscribe, useSelector, useAction } from \"src/redux\";\nimport useThrowError from \"src/hooks/utils/useThrowError\";\nimport useFetchMachine, {\n  VERIFY,\n  FETCH,\n  REJECT,\n  RESOLVE,\n  START\n} from \"src/hooks/utils/useFetchMachine\";\nimport values from \"lodash/fp/values\";\nimport compact from \"lodash/fp/compact\";\nimport uniq from \"lodash/fp/uniq\";\nimport map from \"lodash/fp/map\";\nimport reduce from \"lodash/fp/reduce\";\nimport flow from \"lodash/fp/flow\";\nimport isEmpty from \"lodash/fp/isEmpty\";\nimport keys from \"lodash/fp/keys\";\nimport difference from \"lodash/fp/difference\";\nimport assign from \"lodash/fp/assign\";\nimport {\n  getRfpLinkedProposals,\n  getTokensForProposalsPagination\n} from \"src/containers/Proposal/helpers\";\nimport { handleSaveAppDraftProposals } from \"src/lib/local_storage\";\n\nexport function useDraftProposals() {\n  const draftProposals = useSelector(sel.draftProposals);\n\n  const onLoadDraftProposals = useAction(act.onLoadDraftProposals);\n  const onSaveDraftProposal = useAction(act.onSaveDraftProposal);\n  const onDeleteDraftProposal = useAction(act.onDeleteDraftProposal);\n\n  const [unsubscribe] = useState(\n    useStoreSubscribe(handleSaveAppDraftProposals)\n  );\n\n  useEffect(() => {\n    // load draft proposals from localStorage\n    if (!draftProposals) {\n      onLoadDraftProposals();\n    }\n  }, [onLoadDraftProposals, draftProposals]);\n\n  useEffect(\n    function unsubscribeToStore() {\n      return unsubscribe;\n    },\n    [unsubscribe]\n  );\n\n  return {\n    draftProposals,\n    onLoadDraftProposals,\n    onSaveDraftProposal,\n    onDeleteDraftProposal\n  };\n}\n\nconst getRfpLinks = (proposals) =>\n  flow(\n    values,\n    map((p) => p.linkto),\n    uniq,\n    compact\n  )(proposals);\n\nconst getRfpSubmissions = (proposals) =>\n  flow(\n    values,\n    reduce((acc, p) => [...acc, ...(p.linkedfrom || [])], []),\n    uniq,\n    compact\n  )(proposals);\n\nconst getUnfetchedTokens = (proposals, tokens) =>\n  difference(tokens)(keys(proposals));\n\nexport function useUserProposals({\n  proposalPageSize,\n  fetchRfpLinks = true,\n  fetchVoteSummary = true,\n  fetchProposalSummary = true,\n  userID\n}) {\n  const [remainingTokens, setRemainingTokens] = useState([]);\n  const voteSummaries = useSelector(sel.voteSummariesByToken);\n  const proposalSummaries = useSelector(sel.proposalSummariesByToken);\n  const tokensSelector = useMemo(\n    () => sel.makeGetUserProposalsTokens(userID),\n    [userID]\n  );\n  const proposalsSelector = useMemo(\n    () => sel.makeGetUserProposals(userID),\n    [userID]\n  );\n  const proposals = useSelector(proposalsSelector);\n  const tokensByStatus = useSelector(tokensSelector);\n  const tokens = tokensByStatus\n    ? [...tokensByStatus.unvetted, ...tokensByStatus.vetted]\n    : [];\n  const numOfUserProposalsSelector = useMemo(\n    () => sel.makeGetNumOfProposalsByUserId(userID),\n    [userID]\n  );\n  const numOfUserProposals = useSelector(numOfUserProposalsSelector);\n  const errorSelector = useMemo(\n    () => or(sel.apiProposalsBatchError, sel.apiPropsVoteSummaryError),\n    []\n  );\n\n  const error = useSelector(errorSelector);\n  const onFetchProposalsBatch = useAction(act.onFetchProposalsBatch);\n  const onFetchUserProposals = useAction(act.onFetchUserProposals);\n  const hasRemainingTokens = !isEmpty(remainingTokens);\n\n  const [state, send] = useFetchMachine({\n    actions: {\n      initial: () => send(START),\n      start: () => {\n        if (hasRemainingTokens) return send(VERIFY);\n        onFetchUserProposals(userID)\n          .catch((e) => send(REJECT, e))\n          .then((res) => {\n            const resTokens = [...res.unvetted, ...res.vetted];\n            if (!resTokens) return send(RESOLVE);\n            setRemainingTokens(resTokens);\n            return send(VERIFY);\n          });\n        return send(FETCH);\n      },\n      verify: () => {\n        if (!hasRemainingTokens) return send(RESOLVE, { proposals });\n        if (proposals && numOfUserProposals === proposals.length)\n          return send(RESOLVE, { proposals });\n        const [tokensToFetch, next] = getTokensForProposalsPagination(\n          remainingTokens,\n          proposalPageSize\n        );\n        onFetchProposalsBatch({\n          tokens: tokensToFetch,\n          fetchVoteSummary,\n          fetchProposalSummary,\n          userid: userID\n        })\n          .then(([fetchedProposals]) => {\n            if (isEmpty(fetchedProposals)) {\n              setRemainingTokens(next);\n              return send(RESOLVE);\n            }\n            if (fetchRfpLinks) {\n              const rfpLinks = getRfpLinks(fetchedProposals);\n              const rfpSubmissions = getRfpSubmissions(fetchedProposals);\n              const unfetchedRfpLinks = getUnfetchedTokens(proposals, [\n                ...rfpLinks,\n                ...rfpSubmissions\n              ]);\n              if (!isEmpty(unfetchedRfpLinks)) {\n                onFetchProposalsBatch({\n                  tokens: unfetchedRfpLinks,\n                  fetchVoteSummary,\n                  fetchProposalSummary,\n                  userid: userID\n                })\n                  .then(() => {\n                    const unfetchedTokens = getUnfetchedTokens(\n                      assign(proposals, fetchedProposals),\n                      tokensToFetch\n                    );\n                    setRemainingTokens([...unfetchedTokens, ...next]);\n                    return send(RESOLVE);\n                  })\n                  .catch((e) => send(REJECT, e));\n                return send(FETCH);\n              }\n            }\n            setRemainingTokens([...next]);\n            return send(RESOLVE);\n          })\n          .catch((e) => send(REJECT, e));\n        return send(FETCH);\n      },\n      done: () => {}\n    },\n    initialValues: {\n      status: \"idle\",\n      loading: true,\n      proposals: {},\n      proposalsTokens: {},\n      verifying: true\n    }\n  });\n\n  const onFetchMoreProposals = useCallback(() => {\n    if (isEmpty(remainingTokens)) return send(START);\n    return send(VERIFY);\n  }, [send, remainingTokens]);\n\n  const anyError = error || state.error;\n  useThrowError(anyError);\n\n  return {\n    proposals: proposals\n      ? Object.values(\n          getRfpLinkedProposals(proposals, voteSummaries, proposalSummaries)\n        )\n      : [],\n    onFetchProposalsBatch,\n    proposalsTokens: tokens,\n    loading: state.loading,\n    verifying: state.verifying,\n    onFetchMoreProposals,\n    hasMoreProposals: !!remainingTokens.length,\n    machineCurrentState: state.status,\n    numOfUserProposals\n  };\n}\n","import { useReducer, useEffect, useCallback } from \"react\";\nimport get from \"lodash/get\";\nimport set from \"lodash/fp/set\";\nimport compose from \"lodash/fp/compose\";\n\n// state transition actions\nexport const FETCH = \"FETCH\";\nexport const START = \"START\";\nexport const RESOLVE = \"RESOLVE\";\nexport const VERIFY = \"VERIFY\";\nexport const REJECT = \"REJECT\";\nexport const RETRY = \"RETRY\";\n// machine states\nconst LOADING = \"loading\";\nconst IDLE = \"idle\";\nconst STARTING = \"starting\";\nconst FAILURE = \"failure\";\nconst SUCCESS = \"success\";\nconst VERIFYING = \"verifying\";\n\nconst DEFAULT_STATE = {\n  status: IDLE,\n  loading: false\n};\n\nconst mapStateTransitionActions = {\n  [FETCH]: LOADING,\n  [VERIFY]: VERIFYING,\n  [REJECT]: FAILURE,\n  [RESOLVE]: SUCCESS,\n  [RETRY]: IDLE,\n  [START]: STARTING\n};\n\nconst getNextState = (action) => get(mapStateTransitionActions, action.type);\n\nconst fetchReducer = (state, action) => {\n  const nextState = getNextState(action);\n  if (!nextState) {\n    return set(\"error\", new Error(\"unhanlded state change\"))(state);\n  }\n  switch (action.type) {\n    case FETCH:\n      return compose(\n        set(\"status\", nextState),\n        set(\"loading\", true),\n        set(\"verifying\", false)\n      )(state);\n    case START:\n      return compose(\n        set(\"status\", nextState),\n        set(\"loading\", false),\n        set(\"verifying\", false)\n      )(state);\n    case RESOLVE:\n      return {\n        ...state,\n        loading: false,\n        verifying: false,\n        status: nextState,\n        ...(action.payload || {})\n      };\n    case VERIFY:\n      return compose(\n        set(\"loading\", false),\n        set(\"verifying\", true),\n        set(\"status\", nextState)\n      )(state);\n    case REJECT:\n      return compose(\n        set(\"loading\", false),\n        set(\"verifying\", false),\n        set(\"error\", action.payload),\n        set(\"status\", nextState)\n      )(state);\n    case RETRY:\n      return action.payload;\n    default:\n      return set(\"error\", new Error(\"unhanlded state machine action\"))(state);\n  }\n};\n\nexport default function useFetchMachine({ actions, initialValues }) {\n  const [currentState, dispatch] = useReducer(\n    fetchReducer,\n    initialValues || DEFAULT_STATE\n  );\n  useEffect(\n    function onStateChanges() {\n      const { status } = currentState;\n      switch (status) {\n        case IDLE:\n          return actions.initial && actions.initial();\n        case STARTING:\n          return actions.initial && actions.start();\n        case LOADING:\n          return actions.load && actions.load();\n        case VERIFYING:\n          return actions.verify && actions.verify();\n        case SUCCESS:\n          return actions.done && actions.done();\n        case FAILURE:\n          return actions.error && actions.error(currentState.error);\n        default:\n          return;\n      }\n    },\n    [currentState, actions, dispatch]\n  );\n\n  const send = useCallback(\n    (action, payload) => dispatch({ type: action, payload }),\n    [dispatch]\n  );\n\n  return [currentState, send, { FETCH, RESOLVE, VERIFY, REJECT, RETRY, START }];\n}\n","import { useEffect, useCallback, useMemo } from \"react\";\nimport { useConfig } from \"src/containers/Config\";\nimport { or } from \"src/lib/fp\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport { useLoaderContext } from \"src/containers/Loader\";\nimport { PROPOSAL_STATE_VETTED } from \"src/constants\";\nimport ModalLogin from \"src/components/ModalLogin\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nexport default function useComments(\n  recordToken,\n  proposalState,\n  sectionId,\n  threadParentID,\n  isCurrentUserProposalAuthor\n) {\n  const isSingleThread = !!threadParentID;\n  const { enableCommentVote, recordType, constants } = useConfig();\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const errorSelector = or(\n    sel.apiProposalCommentsError,\n    sel.apiInvoiceCommentsError,\n    sel.apiDccCommentsError,\n    sel.apiLikeCommentsError,\n    sel.apiCommentsLikesError\n  );\n  const error = useSelector(errorSelector);\n  const allCommentsBySectionSelector = useMemo(\n    () => sel.makeGetRecordComments(recordToken),\n    [recordToken]\n  );\n  const sectionCommentsSelector = useMemo(\n    () => sel.makeGetRecordSectionComments(recordToken, sectionId),\n    [recordToken, sectionId]\n  );\n  const sectionIdsSelector = useMemo(\n    () => sel.makeGetRecordCommentSectionIds(recordToken),\n    [recordToken]\n  );\n  const commentsLikesSelector = useMemo(\n    () => sel.makeGetRecordCommentsLikes(recordToken),\n    [recordToken]\n  );\n  const commentsVotesSelector = useMemo(\n    () => sel.makeGetRecordCommentsVotes(recordToken),\n    [recordToken]\n  );\n  const lastVisitTimestampSelector = useMemo(\n    () => sel.makeGetLastAccessTime(recordToken),\n    [recordToken]\n  );\n  const comments = useSelector(sectionCommentsSelector);\n  const allCommentsBySection = useSelector(allCommentsBySectionSelector);\n  const commentSectionIds = useSelector(sectionIdsSelector);\n  const hasAuthorUpdates = commentSectionIds && commentSectionIds.length > 1;\n  const commentsLikes = useSelector(commentsLikesSelector);\n  const commentsVotes = useSelector(commentsVotesSelector);\n  const lastVisitTimestamp = useSelector(lastVisitTimestampSelector);\n  const loading = useSelector(sel.isApiRequestingComments);\n  const loadingLikes = useSelector(sel.isApiRequestingCommentsLikes);\n  const onSubmitComment = useAction(\n    recordType === constants.RECORD_TYPE_DCC\n      ? act.onSaveNewDccComment\n      : act.onSaveNewComment\n  );\n  const onEditComment = useAction(act.onEditComment);\n  const onFetchComments = useAction(\n    recordType === constants.RECORD_TYPE_PROPOSAL\n      ? act.onFetchProposalComments\n      : recordType === constants.RECORD_TYPE_DCC\n      ? act.onFetchDccComments\n      : act.onFetchInvoiceComments\n  );\n  const onFetchLikes = useAction(act.onFetchLikedComments);\n  const onCommentVoteAction = useAction(act.onCommentVote);\n  const onCensorComment = useAction(act.onCensorComment);\n\n  const { currentUser } = useLoaderContext();\n  const userid = currentUser && currentUser.userid;\n  const email = currentUser && currentUser.email;\n  const isCurrentUserAdmin = currentUser && currentUser.isadmin;\n\n  const userLoggedIn = !!email;\n\n  // comments are not public on cms. User needs to be logged in\n  const isProposal = recordType === constants.RECORD_TYPE_PROPOSAL;\n  const hasRecordToken = !!recordToken;\n  const hasCommentsLeft = !allCommentsBySection;\n  const isRecordMissingComments = hasRecordToken && hasCommentsLeft;\n  const isVettedProposal = proposalState === PROPOSAL_STATE_VETTED;\n  const canUserViewComments =\n    isVettedProposal || isCurrentUserAdmin || isCurrentUserProposalAuthor;\n  const needsToFetchComments = isProposal\n    ? isRecordMissingComments && canUserViewComments\n    : isRecordMissingComments && userLoggedIn;\n\n  const needsToFetchCommentsLikes =\n    !!recordToken &&\n    !commentsLikes &&\n    enableCommentVote &&\n    userLoggedIn &&\n    !loadingLikes &&\n    proposalState === PROPOSAL_STATE_VETTED;\n\n  useEffect(\n    function handleFetchOfComments() {\n      if (needsToFetchComments) {\n        onFetchComments(recordToken);\n      }\n    },\n    [onFetchComments, needsToFetchComments, recordToken]\n  );\n\n  useEffect(\n    function handleFetchOfLikes() {\n      if (needsToFetchCommentsLikes) {\n        onFetchLikes(recordToken, userid);\n      }\n    },\n    [onFetchLikes, needsToFetchCommentsLikes, recordToken, userid]\n  );\n\n  const openLoginModal = useCallback(() => {\n    handleOpenModal(ModalLogin, {\n      onLoggedIn: handleCloseModal,\n      onClose: handleCloseModal,\n      title: \"Your session has expired. Please log in again\"\n    });\n  }, [handleOpenModal, handleCloseModal]);\n\n  const onCommentVote = useCallback(\n    (commentID, action, token) => {\n      onCommentVoteAction(\n        userid,\n        token,\n        commentID,\n        action,\n        proposalState,\n        sectionId\n      ).catch((e) => {\n        if (e.statusCode === 403) {\n          openLoginModal();\n        }\n      });\n    },\n    [onCommentVoteAction, userid, proposalState, sectionId, openLoginModal]\n  );\n\n  const getCommentLikeOption = useCallback(\n    (commentID) => {\n      const option = commentsLikes && commentsLikes[commentID];\n      return option ? option : 0;\n    },\n    [commentsLikes]\n  );\n\n  const getCommentVotes = useCallback(\n    (commentID) => commentsVotes && commentsVotes[commentID],\n    [commentsVotes]\n  );\n\n  // If displaying a single thread while having multiple author updates with\n  // different section, find to which tree the sub-tree we are displaying\n  // belongs to display only the relevant section.\n  let singleThreadRootId;\n  if (isSingleThread && hasAuthorUpdates) {\n    for (const [sectionId, comments] of Object.entries(allCommentsBySection)) {\n      if (\n        comments.map(({ commentid }) => commentid).includes(+threadParentID)\n      ) {\n        singleThreadRootId = sectionId;\n      }\n    }\n  }\n\n  return {\n    comments,\n    onCommentVote,\n    onCensorComment,\n    getCommentLikeOption,\n    enableCommentVote,\n    userLoggedIn,\n    userEmail: email,\n    recordType,\n    currentUser,\n    lastVisitTimestamp,\n    loading: loading,\n    loadingLikes,\n    onSubmitComment,\n    onEditComment,\n    error,\n    getCommentVotes,\n    commentSectionIds,\n    hasAuthorUpdates,\n    finishedCommentsFetch: !hasCommentsLeft,\n    latestAuthorUpdateId: hasAuthorUpdates && commentSectionIds[0],\n    singleThreadRootId\n  };\n}\n","import { useEffect } from \"react\";\nimport { useSelector, useAction } from \"src/redux\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\n\nexport default function useUserByPublicKey({ userPubKey, fetch = true }) {\n  const onSearchUser = useAction(act.onSearchUser);\n  const resultsByPk = useSelector(sel.queryResultsByPublicKey);\n  const resultsByID = useSelector(sel.searchResultsByID);\n  const userID = userPubKey && resultsByPk[userPubKey];\n  const user = userID && resultsByID[userID];\n  const { username } = user || {};\n  const isLoadingUser = useSelector(sel.isApiRequestingUserSearch);\n  const fetchUser = userPubKey && !isLoadingUser && !user && fetch;\n\n  useEffect(() => {\n    if (fetchUser) onSearchUser({ publickey: userPubKey });\n  });\n\n  return {\n    username\n  };\n}\n","import { useCallback, useState } from \"react\";\n\nexport default function useCrash() {\n  const [, setState] = useState();\n  return useCallback(\n    (err) =>\n      setState(() => {\n        throw err;\n      }),\n    []\n  );\n}\n","import { StatusTag } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport {\n  PAYWALL_STATUS_LACKING_CONFIRMATIONS,\n  PAYWALL_STATUS_PAID,\n  PAYWALL_STATUS_WAITING\n} from \"src/constants\";\nimport styles from \"./PaymentStatusTag.module.css\";\n\nconst mapPaymentToStatusTag = {\n  [PAYWALL_STATUS_WAITING]: (\n    <StatusTag\n      className={styles.statusTag}\n      type=\"yellowTime\"\n      text=\"Waiting for payment\"\n    />\n  ),\n  [PAYWALL_STATUS_LACKING_CONFIRMATIONS]: (\n    <StatusTag\n      className={styles.statusTag}\n      type=\"bluePending\"\n      text=\"Waiting for confirmations\"\n    />\n  ),\n  [PAYWALL_STATUS_PAID]: (\n    <StatusTag\n      className={styles.statusTag}\n      type=\"greenCheck\"\n      data-testid=\"paywall-status-paid\"\n      text=\"Confirmed\"\n    />\n  )\n};\n\nconst PaymentStatusTag = ({ status }) => {\n  return mapPaymentToStatusTag[status] || null;\n};\n\nPaymentStatusTag.propTypes = {\n  status: PropTypes.number\n};\n\nexport default PaymentStatusTag;\n","import { createSelectorCreator, defaultMemoize } from \"reselect\";\nimport isEqual from \"lodash/isEqual\";\nimport {\n  NOTIFICATION_EMAIL_MY_PROPOSAL_STATUS_CHANGE,\n  NOTIFICATION_EMAIL_MY_PROPOSAL_VOTE_STARTED,\n  NOTIFICATION_EMAIL_ADMIN_PROPOSAL_NEW,\n  NOTIFICATION_EMAIL_ADMIN_PROPOSAL_VOTE_AUTHORIZED,\n  NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VETTED,\n  NOTIFICATION_EMAIL_REGULAR_PROPOSAL_EDITED,\n  NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VOTE_STARTED,\n  NOTIFICATION_EMAIL_COMMENT_ON_MY_PROPOSAL,\n  NOTIFICATION_EMAIL_COMMENT_ON_MY_COMMENT\n} from \"src/constants\";\n\n// create a \"selector creator\" that uses lodash.isEqual instead of ===\nexport const createDeepEqualSelector = createSelectorCreator(\n  defaultMemoize,\n  isEqual\n);\n\n// this function maps the emailnotifications user property received from\n// the server to our UI preferences presentation\nexport const emailNotificationsToPreferences = (emailnotifications) => ({\n  \"myproposalnotifications-statuschange\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_MY_PROPOSAL_STATUS_CHANGE\n  ),\n  \"myproposalnotifications-votestarted\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_MY_PROPOSAL_VOTE_STARTED\n  ),\n  \"regularproposalnotifications-vetted\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VETTED\n  ),\n  \"regularproposalnotifications-edited\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_REGULAR_PROPOSAL_EDITED\n  ),\n  \"regularproposalnotifications-votestarted\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VOTE_STARTED\n  ),\n  \"adminproposalnotifications-new\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_ADMIN_PROPOSAL_NEW\n  ),\n  \"adminproposalnotifications-voteauthorized\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_ADMIN_PROPOSAL_VOTE_AUTHORIZED\n  ),\n  \"commentnotifications-proposal\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_COMMENT_ON_MY_PROPOSAL\n  ),\n  \"commentnotifications-comment\": !!(\n    emailnotifications & NOTIFICATION_EMAIL_COMMENT_ON_MY_COMMENT\n  )\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"proposalTitle\":\"ProposalsOwned_proposalTitle__3dgCW\",\"totalText\":\"ProposalsOwned_totalText__3kn_y\",\"spinnerWrapper\":\"ProposalsOwned_spinnerWrapper__2Mqus\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"PayoutsList_spinnerWrapper__32Y-c\",\"payBtn\":\"PayoutsList_payBtn__1Jklo\",\"tableBodyCell\":\"PayoutsList_tableBodyCell__2zMRq\",\"tableHead\":\"PayoutsList_tableHead__1qWhL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"PayoutSummaries_spinnerWrapper__u2apO\",\"tableBodyCell\":\"PayoutSummaries_tableBodyCell__1mcFF\",\"tableHead\":\"PayoutSummaries_tableHead__1nS83\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"ProposalBillingSummary_spinnerWrapper__-XNqz\",\"searchWrapper\":\"ProposalBillingSummary_searchWrapper__2qJwl\",\"card\":\"ProposalBillingSummary_card__2tDcC\",\"titleLink\":\"ProposalBillingSummary_titleLink__17dt2\",\"billed\":\"ProposalBillingSummary_billed__3g-27\",\"table\":\"ProposalBillingSummary_table__3kYFs\"};","import { useContext } from \"react\";\nimport { modalContext } from \"src/components/ModalProvider\";\n\nexport default function useModalContext() {\n  return useContext(modalContext);\n}\n","import { Link as UILink } from \"pi-ui\";\nimport React from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\n\nconst Link = ({ to, children, ...props }) => (\n  <UILink\n    {...props}\n    customComponent={(otherProps) => <RouterLink to={to} {...otherProps} />}\n  >\n    {children}\n  </UILink>\n);\n\nexport default Link;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"transactionIdLink\":\"PaymentFaucet_transactionIdLink__3zavE\",\"transactionLabel\":\"PaymentFaucet_transactionLabel__2meWx\",\"transactionIdMessage\":\"PaymentFaucet_transactionIdMessage__1HXcX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paywallInfo\":\"PaymentComponent_paywallInfo__3xL1C\",\"dark\":\"PaymentComponent_dark__1osQ_\",\"qrcodeWrapper\":\"PaymentComponent_qrcodeWrapper__11PGs\",\"infoWrapper\":\"PaymentComponent_infoWrapper__2tk5_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigationDrawer\":\"NavigationDrawer_navigationDrawer__14hnx\",\"navigationDrawerHeader\":\"NavigationDrawer_navigationDrawerHeader__3-W_I\",\"navigationDrawerFullScreen\":\"NavigationDrawer_navigationDrawerFullScreen__eJ1Sp NavigationDrawer_navigationDrawer__14hnx\",\"navigationDrawerShow\":\"NavigationDrawer_navigationDrawerShow__1-5zr NavigationDrawer_navigationDrawer__14hnx\",\"navWrapper\":\"NavigationDrawer_navWrapper__3Hu2y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statusSelectWrapper\":\"ModalSetBillingStatus_statusSelectWrapper__2Lndy\",\"status\":\"ModalSetBillingStatus_status__3oC8a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"WhatAreYourThoughts_wrapper__3TEeC\",\"text\":\"WhatAreYourThoughts_text__30ivk\",\"darkText\":\"WhatAreYourThoughts_darkText__135XT\",\"buttonsWrapper\":\"WhatAreYourThoughts_buttonsWrapper__1DKrC\"};","import Promise from \"promise\";\nimport localforage from \"localforage\";\nimport nacl from \"tweetnacl\";\nimport util from \"tweetnacl-util\";\nimport get from \"lodash/fp/get\";\nimport { STORAGE_PREFIX, IDENTITY_ERROR } from \"src/constants\";\n\nexport const toHex = (x) => Buffer.from(toUint8Array(x)).toString(\"hex\");\n\nexport const toByteArray = (str) => {\n  const bytes = new Uint8Array(Math.ceil(str.length / 2));\n  for (let i = 0; i < bytes.length; i++)\n    bytes[i] = parseInt(str.substr(i * 2, 2), 16);\n  return bytes;\n};\n\nexport const toUint8Array = (obj) =>\n  Object.prototype.toString.call(obj) !== \"[object Object]\"\n    ? obj\n    : Uint8Array.from(Object.keys(obj).map((key) => obj[key]));\n\nexport const loadKeys = (uuid, keys) =>\n  localforage.setItem(STORAGE_PREFIX + uuid, keys).then(() => keys);\nexport const removeKeys = (uuid) =>\n  localforage.removeItem(STORAGE_PREFIX + uuid);\nexport const generateKeys = () => Promise.resolve(nacl.sign.keyPair());\nexport const existing = (uuid) =>\n  localforage.getItem(STORAGE_PREFIX + uuid).catch((e) => console.warn(e));\nconst myKeyPair = (uuid) =>\n  existing(uuid).then((res) => res && res.secretKey && res);\nexport const myPublicKey = (uuid) => myKeyPair(uuid).then(get(\"publicKey\"));\nexport const myPubKeyHex = (uuid) =>\n  myPublicKey(uuid)\n    .then((keys) => toHex(keys))\n    .catch(() => {\n      throw new Error(IDENTITY_ERROR);\n    });\nexport const sign = (uuid, msg) =>\n  myKeyPair(uuid)\n    .then(({ secretKey }) =>\n      nacl.sign.detached(toUint8Array(msg), toUint8Array(secretKey))\n    )\n    .catch(() => {\n      throw new Error(IDENTITY_ERROR);\n    });\nexport const signString = (uuid, msg) => sign(uuid, util.decodeUTF8(msg));\nexport const signHex = (uuid, msg) => sign(uuid, msg).then(toHex);\nexport const signStringHex = (uuid, msg) => signString(uuid, msg).then(toHex);\nexport const verify = (msg, sig, pubKey) =>\n  nacl.sign.detached.verify(\n    toUint8Array(msg),\n    toUint8Array(sig),\n    toUint8Array(pubKey)\n  );\n\nexport const verifyKeyPair = (keys) => {\n  const msg = util.decodeUTF8(\"any\");\n  const { publicKey, secretKey } = keysFromHex(keys);\n  const signature = nacl.sign.detached(\n    toUint8Array(msg),\n    toUint8Array(secretKey)\n  );\n  return verify(msg, signature, publicKey);\n};\n\nexport const keysToHex = ({ publicKey, secretKey }) => ({\n  publicKey: toHex(publicKey),\n  secretKey: toHex(secretKey)\n});\n\nconst keysFromHex = ({ publicKey, secretKey }) => ({\n  publicKey: toByteArray(publicKey),\n  secretKey: toByteArray(secretKey)\n});\n\nexport const getKeys = (uuid) =>\n  myKeyPair(uuid).then((keys) => (keys ? keysToHex(keys) : keys));\n\nexport const importKeys = (uuid, keys) =>\n  Promise.resolve(keysFromHex(keys)).then((decodedKeys) =>\n    loadKeys(uuid, decodedKeys)\n  );\n\n// The key that we check for replacement are:\n// Email for older identities in pi.\n// Username for newly created accounts.\nexport const needStorageKeyReplace = (email, username) =>\n  localforage.keys().then((keys) => {\n    if (keys.includes(STORAGE_PREFIX + email)) {\n      return email;\n    }\n    if (keys.includes(STORAGE_PREFIX + username)) {\n      return username;\n    }\n    return null;\n  });\n\nexport const replaceStorageKey = (oldKey, newKey) =>\n  myKeyPair(oldKey).then((keys) =>\n    loadKeys(newKey, keys).then(() =>\n      localforage.removeItem(STORAGE_PREFIX + oldKey)\n    )\n  );\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"subtitle\":\"Account_subtitle__3GOii\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"submitButton\":\"Preferences_submitButton__3yPRc\",\"confirmMessage\":\"Preferences_confirmMessage__ECbAZ\",\"savedIcon\":\"Preferences_savedIcon__372Wa\",\"marginHorizontal1\":\"Preferences_marginHorizontal1__2hZNE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"groupList\":\"CheckboxGroupField_groupList__1yz3e\",\"groupListItem\":\"CheckboxGroupField_groupListItem__3mCMn\",\"groupDropdownItem\":\"CheckboxGroupField_groupDropdownItem__1smha\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ModalAttachFiles_wrapper__Pt3X-\",\"selectFileWrapper\":\"ModalAttachFiles_selectFileWrapper__2z19u\",\"greyText\":\"ModalAttachFiles_greyText__37Bz8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formSelect\":\"DccForm_formSelect__19Jh7\",\"formSelectError\":\"DccForm_formSelectError__3ypE2\",\"errorMsg\":\"DccForm_errorMsg__2w9pL\",\"radioButton\":\"DccForm_radioButton__10vuQ\",\"statement\":\"DccForm_statement__3uBsu\"};","import React, { createContext, useContext, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { constants } from \"./helpers\";\n\nexport const ConfigContext = createContext();\n\nconst CustomConfigContext = createContext();\n\nexport const ConfigConsumer = ConfigContext.Consumer;\n\nexport const useConfig = () => {\n  const defaultConfig = useContext(ConfigContext);\n  const customConfig = useContext(CustomConfigContext);\n\n  const config = useMemo(\n    () =>\n      customConfig\n        ? {\n            ...defaultConfig,\n            ...customConfig\n          }\n        : defaultConfig,\n    [customConfig, defaultConfig]\n  );\n\n  return config;\n};\n\n/**\n * This wrap around the config provider is needed to add props validation for\n * each custom option alllowed.\n */\nexport const ConfigProvider = ({ children, ...configOptions }) => (\n  <ConfigContext.Provider value={{ ...configOptions, constants }}>\n    {children}\n  </ConfigContext.Provider>\n);\n\n/**\n * This wrap around the custom config provider is needed to add props validation for\n * each custom option alllowed.\n */\nexport const CustomConfigProvider = ({ children, ...customConfigOptions }) => (\n  <CustomConfigContext.Provider value={{ ...customConfigOptions }}>\n    {children}\n  </CustomConfigContext.Provider>\n);\n\nConfigProvider.propTypes = {\n  title: PropTypes.string,\n  logoLight: PropTypes.string,\n  logoDark: PropTypes.string,\n  recordType: PropTypes.oneOf([\n    constants.RECORD_TYPE_INVOICE,\n    constants.RECORD_TYPE_PROPOSAL,\n    constants.RECORD_TYPE_DCC\n  ]),\n  aboutContent: PropTypes.string,\n  enableAdminInvite: PropTypes.bool,\n  enableCommentVote: PropTypes.bool,\n  enableCredits: PropTypes.bool,\n  enablePaywall: PropTypes.bool,\n  onBoardContent: PropTypes.string,\n  onBoardLink: PropTypes.string,\n  privacyPolicyContent: PropTypes.string,\n  navMenuPaths: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string,\n      path: PropTypes.string,\n      admin: PropTypes.bool\n    })\n  ),\n  javascriptEnabled: PropTypes.bool\n};\n\nCustomConfigProvider.propTypes = {\n  recordType: PropTypes.oneOf([\n    constants.RECORD_TYPE_INVOICE,\n    constants.RECORD_TYPE_PROPOSAL,\n    constants.RECORD_TYPE_DCC\n  ])\n};\n\nexport default ConfigProvider;\n","import dotenvParse from \"dotenv-parse-variables\";\nimport React, { useState, useEffect } from \"react\";\nimport { ConfigProvider } from \"./ConfigProvider\";\nimport politeiaConfig from \"src/apps/politeia/config.json\";\nimport { mergeAll } from \"lodash/fp\";\nimport { getQueryStringValue } from \"src/lib/queryString\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst env = dotenvParse(process.env);\nconst getEnvVariable = (key) => env[`REACT_APP_${key}`];\n\nconst defaultPreset = politeiaConfig;\n\n/**\n * runtimeConfig returns config set at runtime.\n */\nconst runtimeConfig = {\n  /**\n   * javascriptEnabled indicates if the server detected a client with\n   * disabled javascript rendering via rendertron.\n   */\n\n  javascriptEnabled: !getQueryStringValue(\"nojavascript\")\n};\n\n/**\n * loadConfig will try to import the config.json from 'src/apps/<preset_name'\n * if the preset name is not provided, it will return the default config.\n */\nconst loadConfig = async () => {\n  const presetName = getEnvVariable(\"PRESET\");\n  if (!presetName) return mergeAll([defaultPreset, runtimeConfig]);\n\n  const configModule = await import(`src/apps/${presetName}/config.json`);\n\n  return mergeAll([configModule.default, runtimeConfig]);\n};\n\n/**\n * Config will give preference to load the config options from the preset\n * if any is specified.\n */\nconst Config = ({ children }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [configOptions, setConfig] = useState(null);\n  const { policy } = usePolicy();\n\n  useEffect(() => {\n    async function initConfig() {\n      try {\n        setLoading(true);\n        const cfg = await loadConfig();\n        setLoading(false);\n        setConfig(cfg);\n      } catch (e) {\n        setLoading(false);\n        setError(e);\n      }\n    }\n    initConfig();\n  }, []);\n\n  return (\n    <ConfigProvider\n      {...{\n        ...configOptions,\n        enablePaywall: !!policy?.paywallenabled,\n        enableCredits: !!policy?.paywallenabled\n      }}\n    >\n      {!loading && !error && configOptions && children}\n      {error}\n    </ConfigProvider>\n  );\n};\n\nexport default Config;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ConfigConsumer } from \"./ConfigProvider\";\n\nconst ConfigFilter = ({ showIf, children }) => (\n  <ConfigConsumer>\n    {(config) => (showIf(config) ? children : null)}\n  </ConfigConsumer>\n);\n\nConfigFilter.propTypes = {\n  showIf: PropTypes.func.isRequired,\n  children: PropTypes.node\n};\n\nexport default ConfigFilter;\n","import Config from \"./Config\";\nexport * from \"./ConfigProvider\";\nexport { default as ConfigFilter } from \"./ConfigFilter\";\n\nexport default Config;\n","import { useState } from \"react\";\n\nfunction useAsyncState(initialValue) {\n  const [value, setValue] = useState(initialValue);\n  const setter = (x) =>\n    new Promise((resolve) => {\n      setValue(x);\n      resolve(x);\n    });\n  return [value, setter];\n}\n\nexport default useAsyncState;\n","import { Modal, P, Text, useMediaQuery } from \"pi-ui\";\nimport React from \"react\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport PaymentComponent from \"../PaymentComponent\";\nimport PaymentStatusTag from \"../PaymentStatusTag\";\nimport styles from \"./ModalPayPaywall.module.css\";\n\nconst ModalPayPaywall = ({ show, title, onClose }) => {\n  const { userPaywallStatus, paywallAmount, paywallAddress } = usePaywall();\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  return (\n    <Modal show={show} title={title} onClose={onClose}>\n      {extraSmall && <PaymentStatusTag status={userPaywallStatus} />}\n      <P className={styles.paywallDescription}>\n        To participate on proposals and to submit your own, Politeia requires\n        you to pay a small registration fee of{\" \"}\n        <Text weight=\"bold\">exactly {paywallAmount} DCR.</Text> This helps keep\n        Politeia free of things like spam and comment manipulation.\n      </P>\n      <PaymentComponent\n        address={paywallAddress}\n        amount={+paywallAmount}\n        extraSmall={extraSmall}\n        status={userPaywallStatus}\n      />\n    </Modal>\n  );\n};\n\nexport default ModalPayPaywall;\n","import React, { useEffect, useState, useMemo } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport { P, H1, H2, H3, H4, H5, H6, Link } from \"pi-ui\";\nimport styles from \"./StaticMarkdown.module.css\";\nimport { useStaticContent } from \"src/containers/StaticContent\";\n\nconst paragraphRenderer = ({ children }) => <P>{children}</P>;\n\nconst headingRenderer = ({ level, children }) => {\n  const headings = [H1, H2, H3, H4, H5, H6];\n  const Heading = headings[level - 1] || H4;\n  return (\n    <Heading\n      style={{ marginBottom: \"1.7rem\" }}\n      className={styles.markdownHeadings}\n    >\n      {children}\n    </Heading>\n  );\n};\n\nconst linkRenderer = ({ href, children }) => (\n  <Link href={href} rel=\"nofollow noopener noreferrer\" target=\"_blank\">\n    {children}\n  </Link>\n);\n\n/*\n    The StaticMarkdownRenderer is used to render trustable content in the website from\n    static markdown files included in the project.\n */\nconst StaticMarkdown = ({ contentName }) => {\n  const [source, setSource] = useState(\"\");\n  const { getContent } = useStaticContent();\n  useEffect(() => {\n    async function fetchSource() {\n      try {\n        const content = await getContent(contentName);\n        setSource(content);\n      } catch (e) {\n        console.error(e);\n        throw e;\n      }\n    }\n    if (!source) {\n      fetchSource();\n    }\n  }, [contentName, getContent, source]);\n\n  const components = useMemo(\n    () => ({\n      p: paragraphRenderer,\n      h2: headingRenderer,\n      a: linkRenderer\n    }),\n    []\n  );\n\n  return (\n    <ReactMarkdown className=\"static-md\" components={components}>\n      {source}\n    </ReactMarkdown>\n  );\n};\n\nexport default React.memo(StaticMarkdown);\n","import { useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\n\nconst getKey = (moth, year) => `${year}-${moth}`;\n\nfunction useExchangeRate(month, year) {\n  const exchangeRates = useSelector(sel.exchangeRates);\n  const onFetchExchangeRate = useAction(act.onFetchExchangeRate);\n\n  const currRate = exchangeRates[getKey(month, year)];\n  const needsFetching = !currRate;\n\n  const params = useMemo(() => [month, year], [month, year]);\n  const [loading, error] = useAPIAction(\n    onFetchExchangeRate,\n    params,\n    needsFetching\n  );\n\n  return [currRate, loading, error];\n}\n\nexport default useExchangeRate;\n","import { useEffect, useRef } from \"react\";\nimport { useRouter } from \"src/components/Router\";\n\n/**\n * Watch for route changes and triggers the callbackFn when\n * route changes.\n *\n * @param {Boolean} active - if hook is active or not\n * @param {Function} callbackFn - function that will be\n * triggered when route changes\n */\nfunction useOnRouteChange(callbackFn) {\n  const { location } = useRouter();\n  const mountedRef = useRef(false);\n\n  useEffect(() => {\n    if (mountedRef.current) {\n      callbackFn();\n    } else {\n      mountedRef.current = true;\n    }\n  }, [callbackFn, location.pathname]);\n}\n\nexport default useOnRouteChange;\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport { CONTRACTOR_TYPE_SUPERVISOR } from \"src/containers/DCC\";\nimport useAPIAction from \"src/hooks/utils/useAPIAction\";\n\nexport default function useSupervisors() {\n  const onFetchUsers = useAction(act.onFetchCmsUsers);\n  const supervisors = useSelector(\n    sel.makeGetUsersByContractorTypes(CONTRACTOR_TYPE_SUPERVISOR)\n  );\n  const [loading, error] = useAPIAction(onFetchUsers);\n\n  return { supervisors, loading, error };\n}\n","import * as act from \"src/actions\";\nimport { useAction, useSelector } from \"src/redux\";\nimport * as sel from \"src/selectors\";\n\nexport default function useVerifyKey() {\n  const userPubkey = useSelector(sel.currentUserPublicKey);\n  const currentUserEmail = useSelector(sel.currentUserEmail);\n  const currentUserID = useSelector(sel.currentUserID);\n  const keyMismatch = useSelector(sel.keyMismatch);\n  const verifyUserKey = useSelector(sel.currentUserVerifiedKey);\n  const verifyUserKeyError = useSelector(sel.verifyUserKeyError);\n\n  const onVerifyUserKey = useAction(act.onVerifyUserKey);\n  const keyMismatchAction = useAction(act.keyMismatch);\n\n  const isCMS = useSelector(sel.isCMS);\n\n  return {\n    userPubkey,\n    currentUserEmail,\n    currentUserID,\n    keyMismatch,\n    verifyUserKey,\n    verifyUserKeyError,\n    onVerifyUserKey,\n    keyMismatchAction,\n    isCMS\n  };\n}\n","import { useState, useCallback } from \"react\";\n\nexport default function (initialValue) {\n  const [value, setValue] = useState(initialValue);\n\n  const setValueFalse = useCallback((e) => {\n    if (e && e.preventDefault) e.preventDefault();\n    setValue(false);\n  }, []);\n\n  const setValueTrue = useCallback((e) => {\n    if (e && e.preventDefault) e.preventDefault();\n    setValue(true);\n  }, []);\n\n  return [value, setValueTrue, setValueFalse];\n}\n","import { useEffect } from \"react\";\n\nexport default function (globalError) {\n  useEffect(\n    function scrollToTopOnGlobalError() {\n      if (globalError) {\n        window.scrollTo(0, 0);\n      }\n    },\n    [globalError]\n  );\n}\n","import { useState, useCallback } from \"react\";\nimport useEventListener from \"./useEventListener\";\n\nconst setSessionStorageValue = (key, value) => {\n  const serializedValue = JSON.stringify(value);\n  sessionStorage.setItem(key, serializedValue);\n};\n\nconst getSessionStorageValue = (key) => {\n  const serializedState = sessionStorage.getItem(key);\n  return JSON.parse(serializedState);\n};\n\nexport default function useSessionStorage(key, initialValue) {\n  const [error, setError] = useState(null);\n\n  // initialize the state value\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      return getSessionStorageValue(key) || initialValue;\n    } catch (e) {\n      setError(e);\n      return initialValue;\n    }\n  });\n\n  const onSetValue = useCallback(\n    (newValue) => {\n      try {\n        setSessionStorageValue(key, newValue);\n        setStoredValue(newValue);\n      } catch (e) {\n        setError(e);\n      }\n    },\n    [key, setError]\n  );\n\n  const onStorageChange = (event) => {\n    if (event.key !== key) {\n      return;\n    }\n\n    if (event.newValue !== event.oldValue) {\n      try {\n        const parsedValue = JSON.parse(event.newValue);\n        setStoredValue(parsedValue);\n      } catch (e) {\n        setError(e);\n      }\n    }\n  };\n\n  useEventListener(\"session\", onStorageChange);\n  if (error) console.log(error);\n\n  return [storedValue, onSetValue, error];\n}\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport styles from \"./HamburgerMenu.module.css\";\n\nconst HamburgerMenu = ({ toggleShowMenu, showMenu }) => {\n  return (\n    <div className={styles.navButton} onClick={toggleShowMenu}>\n      <span className={showMenu ? styles.navIconClose : styles.navIcon} />\n    </div>\n  );\n};\n\nHamburgerMenu.propTypes = {\n  toggleShowMenu: PropTypes.func,\n  showMenu: PropTypes.bool\n};\n\nexport default HamburgerMenu;\n","import { Text } from \"pi-ui\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { usePollProposalCreditsPayment } from \"src/containers/User/Detail/Credits/hooks\";\nimport { useCredits } from \"src/containers/User/Detail/Credits/hooks.js\";\nimport styles from \"./ProposalCreditsIndicator.module.css\";\nimport plusIcon from \"./assets/plus.svg\";\n\nconst ProposalCreditsIndicator = ({ user, history }) => {\n  const userID = user && user.userid;\n  const { proposalCredits } = useCredits(userID);\n  usePollProposalCreditsPayment();\n  const pushToProposalCredits = () =>\n    history.push(`/user/${user.userid}?tab=credits`);\n  return (\n    <div className={styles.wrapper}>\n      <Text>\n        proposal credits:{\" \"}\n        <span data-testid=\"proposal-credits-number\">\n          {user && proposalCredits}\n        </span>\n      </Text>\n      <img\n        alt=\"purchase proposal credits\"\n        className={styles.proposalCreditsButton}\n        src={plusIcon}\n        onClick={pushToProposalCredits}\n      />\n    </div>\n  );\n};\n\nexport default withRouter(ProposalCreditsIndicator);\n","import {\n  Text,\n  Dropdown,\n  DropdownItem,\n  DarkLightToggle,\n  useTheme,\n  classNames,\n  DEFAULT_DARK_THEME_NAME,\n  DEFAULT_LIGHT_THEME_NAME\n} from \"pi-ui\";\nimport React, { useEffect, useMemo } from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport useLocalStorage from \"src/hooks/utils/useLocalStorage\";\nimport useNavigation from \"src/hooks/api/useNavigation\";\nimport { useConfig } from \"src/containers/Config\";\nimport ProposalCreditsIndicator from \"../ProposalCreditsIndicator\";\nimport { ConfigFilter } from \"src/containers/Config\";\nimport styles from \"./HeaderNav.module.css\";\nimport { isUserValidContractor } from \"src/containers/DCC\";\n\nconst HeaderNav = ({ history }) => {\n  const { user, username, onLogout, isCMS } = useNavigation();\n  const { navMenuPaths, enableCredits, enableAdminInvite } = useConfig();\n  const { isadmin, userid } = user || {};\n  const { themeName, setThemeName } = useTheme();\n  const userIsAdmin = user && isadmin;\n  const isValidContractor = isUserValidContractor(user);\n\n  const handleLogoutClick = () => onLogout(isCMS, false);\n\n  const menuItems = useMemo(\n    () =>\n      navMenuPaths.map(({ label, path, admin, dccRequired }, idx) => {\n        if (path === \"/user\") {\n          path += \"/\" + userid;\n        }\n        if (path === \"/user-proposals\") {\n          path = `/user/${userid}?tab=submitted proposals`;\n        }\n        if (path === \"/drafts\") {\n          path = `/user/${userid}?tab=draft proposals`;\n        }\n        if (path === \"/invoices\") {\n          if (userIsAdmin) {\n            label = \"All Invoices\";\n          } else {\n            label = \"Domain Invoices\";\n          }\n        }\n        const isActive = window.location.pathname === path;\n        const onMenuItemClick = (path) => () => history.push(path);\n        const isDisabled = !userIsAdmin && dccRequired && !isValidContractor;\n        const showItem = ((admin && userIsAdmin) || !admin) && !isDisabled;\n        return (\n          showItem && (\n            <DropdownItem\n              className={classNames(isActive && styles.activeDropdownItem)}\n              key={`link-${idx}`}\n              onClick={onMenuItemClick(path)}\n            >\n              {label}\n            </DropdownItem>\n          )\n        );\n      }),\n    [history, navMenuPaths, userIsAdmin, userid, isValidContractor]\n  );\n\n  const [darkThemeOnLocalStorage, setDarkThemeOnLocalStorage] = useLocalStorage(\n    \"darkTheme\",\n    false\n  );\n\n  useEffect(() => {\n    if (darkThemeOnLocalStorage && themeName === DEFAULT_LIGHT_THEME_NAME) {\n      setThemeName(DEFAULT_DARK_THEME_NAME);\n    }\n  }, [darkThemeOnLocalStorage, setThemeName, themeName]);\n\n  const onThemeToggleHandler = () => {\n    if (themeName === DEFAULT_LIGHT_THEME_NAME) {\n      setDarkThemeOnLocalStorage(true);\n      setThemeName(DEFAULT_DARK_THEME_NAME);\n    } else {\n      setDarkThemeOnLocalStorage(false);\n      setThemeName(DEFAULT_LIGHT_THEME_NAME);\n    }\n  };\n\n  return user && username ? (\n    <div\n      data-testid=\"header-nav\"\n      className={classNames(\n        styles.loggedInContainer,\n        !enableCredits && styles.noCreditsContainer\n      )}\n    >\n      <ConfigFilter showIf={(config) => config.enableCredits}>\n        <ProposalCreditsIndicator user={user} />\n      </ConfigFilter>\n      <Dropdown\n        className={classNames(\n          styles.dropdown,\n          !enableCredits && styles.noCreditsDropdown\n        )}\n        itemsListClassName={styles.dropdownList}\n        closeOnItemClick={false}\n        title={username}\n      >\n        {menuItems}\n        <DropdownItem onClick={onThemeToggleHandler}>\n          <DarkLightToggle\n            onToggle={onThemeToggleHandler}\n            toggled={themeName === DEFAULT_DARK_THEME_NAME}\n          />\n        </DropdownItem>\n        <DropdownItem onClick={handleLogoutClick}>Logout</DropdownItem>\n      </Dropdown>\n    </div>\n  ) : (\n    <nav className={styles.navContainer}>\n      <div\n        className={classNames(styles.themeToggleWrapper, styles.publicWrapper)}\n      >\n        <DarkLightToggle\n          onToggle={onThemeToggleHandler}\n          toggled={themeName === DEFAULT_DARK_THEME_NAME}\n        />\n      </div>\n      {!enableAdminInvite && (\n        <div className={styles.navLinkCtn}>\n          <NavLink\n            className={styles.navLink}\n            activeClassName={styles.activeNavLink}\n            to=\"/user/login\"\n          >\n            <Text className={styles.navLinkText} data-testid=\"nav-login\">\n              Log in\n            </Text>\n          </NavLink>\n          <NavLink\n            className={styles.navLink}\n            activeClassName={styles.activeNavLink}\n            to=\"/user/signup\"\n          >\n            <Text className={styles.navLinkText}>Sign up</Text>\n          </NavLink>\n        </div>\n      )}\n    </nav>\n  );\n};\n\nexport default withRouter(HeaderNav);\n","import { classNames, useLockBodyScrollOnTrue } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport HeaderNav from \"../HeaderNav\";\nimport SidebarContent from \"../SidebarContent\";\nimport styles from \"./NavigationDrawer.module.css\";\n\nconst NavigationDrawer = ({ show, fullScreen }) => {\n  useLockBodyScrollOnTrue(show);\n  return (\n    <div\n      className={classNames(\n        fullScreen\n          ? styles.navigationDrawerFullScreen\n          : styles.navigationDrawer,\n        show && styles.navigationDrawerShow\n      )}\n    >\n      <div className={classNames(styles.navWrapper, \"margin-bottom-s\")}>\n        <HeaderNav />\n      </div>\n      <SidebarContent />\n    </div>\n  );\n};\n\nNavigationDrawer.propTypes = {\n  show: PropTypes.bool.isRequired,\n  fullScreen: PropTypes.bool.isRequired\n};\n\nexport default NavigationDrawer;\n","import { classNames, Header as UIHeader, useMediaQuery } from \"pi-ui\";\nimport React, { useState, useCallback } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport Logo from \"src/components/Logo\";\nimport HamburgerMenu from \"src/components/HamburgerMenu\";\nimport HeaderNav from \"src/components/HeaderNav\";\nimport NavigationDrawer from \"src/components/NavigationDrawer\";\nimport { useConfig } from \"src/containers/Config\";\nimport { NOJS_ROUTE_PREFIX } from \"src/constants\";\nimport styles from \"./Header.module.css\";\n\nconst Header = ({ noBorder }) => {\n  const small = useMediaQuery(\"(max-width: 1000px)\");\n  const extrasmall = useMediaQuery(\"(max-width: 560px)\");\n  const [showMenu, setShowMenu] = useState(false);\n  const { javascriptEnabled } = useConfig();\n  const url = javascriptEnabled ? \"/\" : NOJS_ROUTE_PREFIX + \"/\";\n  const toggleShowMenu = useCallback(\n    () => setShowMenu(!showMenu),\n    [showMenu, setShowMenu]\n  );\n  return (\n    <UIHeader className={classNames(noBorder && styles.noBorder)}>\n      <NavLink\n        to={url}\n        className={extrasmall && showMenu ? styles.hideLogo : styles.showLogo}\n      >\n        <Logo />\n      </NavLink>\n      {small ? (\n        <>\n          <HamburgerMenu toggleShowMenu={toggleShowMenu} showMenu={showMenu} />\n          <NavigationDrawer\n            show={showMenu}\n            fullScreen={extrasmall}\n            toggleShowMenu={toggleShowMenu}\n          />\n        </>\n      ) : (\n        <HeaderNav />\n      )}\n    </UIHeader>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport { Modal, Button } from \"pi-ui\";\nimport StaticMarkdown from \"src/components/StaticMarkdown\";\nimport { useConfig } from \"src/containers/Config\";\n\nconst ModalOnboard = ({ show, onClose }) => {\n  const { onBoardContent, onBoardLink } = useConfig();\n  function goToDocs() {\n    const win = window.open(\n      onBoardLink,\n      \"_blank\",\n      \"noopener=true,noreferrer=true\"\n    );\n    win.focus();\n    onClose();\n  }\n  return (\n    <Modal show={show} onClose={onClose}>\n      <StaticMarkdown contentName={onBoardContent} />\n      <div className=\"justify-right margin-top-l\">\n        <Button kind=\"secondary\" onClick={onClose}>\n          Maybe later\n        </Button>\n        <Button onClick={goToDocs}>Yes, show me more</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ModalOnboard;\n","import { useEffect, useState } from \"react\";\nimport ModalOnboard from \"src/components/ModalOnboard\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport { useSelector } from \"src/redux\";\nimport * as sel from \"src/selectors\";\n\nexport default function useOnboardModal() {\n  const currentUser = useSelector(sel.currentUser);\n  const firstUserAccess = currentUser && !currentUser.lastlogintime;\n  const [showOnboard, setShowOnboard] = useState(firstUserAccess);\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  useEffect(() => {\n    setShowOnboard(firstUserAccess);\n  }, [firstUserAccess]);\n\n  useEffect(() => {\n    if (showOnboard) {\n      setShowOnboard(false);\n      handleOpenModal(ModalOnboard, {\n        onClose: handleCloseModal\n      });\n    }\n  }, [handleCloseModal, handleOpenModal, showOnboard]);\n}\n","export const constants = {\n  RECORD_TYPE_INVOICE: \"invoice\",\n  RECORD_TYPE_PROPOSAL: \"proposal\",\n  RECORD_TYPE_DCC: \"dcc\"\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Message } from \"pi-ui\";\n\nconst defaulErrorRenderer = (error, title) => (\n  <Message title={title} header={title} kind=\"error\">\n    {error.toString()}\n  </Message>\n);\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return {\n      error: error\n    };\n  }\n\n  render() {\n    const { title, errorRenderer, displayError } = this.props;\n    const { error } = this.state;\n    return error && displayError\n      ? errorRenderer(error, title)\n      : this.props.children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  title: PropTypes.string,\n  errorRenderer: PropTypes.func,\n  displayError: PropTypes.bool\n};\n\nErrorBoundary.defaultProps = {\n  title: \"Error\",\n  errorRenderer: defaulErrorRenderer,\n  displayError: true\n};\n\nexport default ErrorBoundary;\n","import * as sel from \"src/selectors\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\n\nexport function useLoader() {\n  const user = useSelector(sel.currentUser);\n  const apiInfo = useSelector(sel.init);\n  const onRequestApiInfo = useAction(act.requestApiInfo);\n  const localLogout = useAction(act.handleLogout);\n  const onPollUserPayment = useAction(act.onPollUserPayment);\n  const onUserProposalCredits = useAction(act.onUserProposalCredits);\n\n  return {\n    user,\n    apiInfo,\n    onRequestApiInfo,\n    localLogout,\n    onPollUserPayment,\n    onUserProposalCredits\n  };\n}\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Message,\n  useTheme,\n  classNames,\n  DEFAULT_LIGHT_THEME_NAME,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport styles from \"./LoaderScreen.module.css\";\nimport Logo from \"src/components/Logo\";\nimport useLocalStorage from \"src/hooks/utils/useLocalStorage\";\n\nimport { Transition } from \"react-transition-group\";\n\nconst duration = 300;\n\nconst defaultStyle = {\n  maxWidth: \"20rem\",\n  transition: `opacity ${duration}ms ease-in-out`,\n  opacity: 0\n};\n\nconst transitionStyles = {\n  entering: { opacity: 1 },\n  entered: { opacity: 1 },\n  exiting: { opacity: 0 },\n  exited: { opacity: 0 }\n};\n\nconst LoaderScreen = ({ error }) => {\n  const [mounted, setMounted] = useState(false);\n  const { themeName, setThemeName } = useTheme();\n  const [darkThemeOnLocalStorage] = useLocalStorage(\"darkTheme\", false);\n\n  useEffect(() => {\n    if (darkThemeOnLocalStorage && themeName === DEFAULT_LIGHT_THEME_NAME) {\n      setThemeName(DEFAULT_DARK_THEME_NAME);\n    }\n  }, [darkThemeOnLocalStorage, setThemeName, themeName]);\n\n  useEffect(() => {\n    setMounted(true);\n    return () => {\n      setMounted(false);\n    };\n  }, []);\n\n  return (\n    <div className={classNames(styles.container, styles.dark)}>\n      <Transition in={mounted} timeout={duration}>\n        {(state) => (\n          <Logo\n            style={{\n              ...defaultStyle,\n              ...transitionStyles[state]\n            }}\n          />\n        )}\n      </Transition>\n      {error && (\n        <Message className=\"margin-top-m\" kind=\"error\">\n          {error.toString()}\n        </Message>\n      )}\n    </div>\n  );\n};\n\nexport default LoaderScreen;\n","import React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { useLoader } from \"./hooks\";\nimport LoaderScreen from \"./LoaderScreen\";\nimport useLocalStorage from \"src/hooks/utils/useLocalStorage\";\nimport { useConfig } from \"src/containers/Config\";\n\nexport const LoaderContext = createContext();\nexport const useLoaderContext = () => useContext(LoaderContext);\n\nconst Loader = ({ children }) => {\n  const { enablePaywall, enableCredits } = useConfig();\n  const [initDone, setInitDone] = useState(false);\n  const [error, setError] = useState(null);\n  const [apiInfo, setApiInfo] = useState(null);\n  const {\n    onRequestApiInfo,\n    user,\n    localLogout,\n    onPollUserPayment,\n    onUserProposalCredits\n  } = useLoader();\n  const [userActiveOnLocalStorage, setUserActiveOnLocalStorage] =\n    useLocalStorage(\"userActive\", false);\n\n  // fetch api info and current user if any\n  useEffect(() => {\n    async function onInit() {\n      try {\n        const apiInfo = await onRequestApiInfo(false);\n        setApiInfo(apiInfo);\n        setInitDone(true);\n      } catch (e) {\n        setError(e);\n      }\n    }\n    onInit();\n  }, [onRequestApiInfo]);\n\n  const hasUser = !!user;\n\n  // mark user as active on login\n  useEffect(() => {\n    if (initDone) {\n      setUserActiveOnLocalStorage(hasUser);\n    }\n  }, [hasUser, initDone, setUserActiveOnLocalStorage]);\n\n  // trigger logout if user isn't marked as active on local storage\n  // this is usefull for reflecting logout across different tabs\n  useEffect(() => {\n    if (!userActiveOnLocalStorage) {\n      localLogout(false);\n    }\n  }, [userActiveOnLocalStorage, localLogout]);\n\n  // poll user paywall if applicable\n  useEffect(() => {\n    const userFetched = !!user;\n    if (enablePaywall && userFetched) {\n      onPollUserPayment().catch(() => {\n        setError(new Error(\"Unable to Poll User Payment\"));\n      });\n    }\n  }, [user, enablePaywall, onPollUserPayment]);\n\n  // fetch user credits if applicable\n  useEffect(() => {\n    if (enableCredits && hasUser) {\n      onUserProposalCredits();\n    }\n  }, [hasUser, onUserProposalCredits, enableCredits]);\n\n  return (\n    <LoaderContext.Provider\n      value={{\n        initDone,\n        error,\n        currentUser: user,\n        apiInfo\n      }}\n    >\n      {initDone && !error ? children : <LoaderScreen error={error} />}\n    </LoaderContext.Provider>\n  );\n};\n\nexport default Loader;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorMessage\":\"ManageContractor_errorMessage__3aCst\",\"editDcc\":\"ManageContractor_editDcc__15B61\",\"editContractor\":\"ManageContractor_editContractor__2hfTs\",\"fieldError\":\"ManageContractor_fieldError__1vVBo\"};","import { Button, Link, Message, P } from \"pi-ui\";\nimport React, { useCallback } from \"react\";\nimport useNavigation from \"src/hooks/api/useNavigation\";\nimport useFaucet from \"./hooks\";\nimport styles from \"./PaymentFaucet.module.css\";\n\nconst noop = () => {};\nconst FAUCET_BASE_URL = \"https://testnet.decred.org/explorer/tx\";\nconst getFaucetUrl = (txid) => `${FAUCET_BASE_URL}/${txid}`;\n\nconst PaymentFaucet = ({ address, amount, onFail = noop }) => {\n  const { user } = useNavigation();\n  const {\n    payWithFaucetError,\n    payWithFaucet,\n    payWithFaucetTxId,\n    isApiRequestingPayWithFaucet,\n    isTestnet\n  } = useFaucet();\n\n  const handlePayment = useCallback(\n    () => payWithFaucet(address, amount, user.userid).catch(onFail),\n    [address, amount, user.userid, payWithFaucet, onFail]\n  );\n  return (\n    isTestnet && (\n      <div className={styles.paywallFaucet}>\n        <P className=\"margin-top-m\">\n          This Politeia instance is running on Testnet, which means you can pay\n          with the Decred faucet:\n        </P>\n        {payWithFaucetTxId ? null : (\n          <Button\n            className=\"margin-top-s\"\n            loading={isApiRequestingPayWithFaucet}\n            onClick={handlePayment}\n          >\n            Pay with Faucet\n          </Button>\n        )}\n        {payWithFaucetError ? (\n          <Message kind=\"error\" className=\"margin-top-m\">\n            {payWithFaucetError.toString()}\n          </Message>\n        ) : null}\n        {payWithFaucetTxId ? (\n          <Message kind=\"info\" className={styles.transactionIdMessage}>\n            <span className={styles.transactionLabel}>Sent transaction: </span>\n            <Link\n              href={getFaucetUrl(payWithFaucetTxId)}\n              target=\"_blank\"\n              id=\"transactionLink\"\n              truncate\n              rel=\"noopener noreferrer\"\n              className={styles.transactionIdLink}\n            >\n              {payWithFaucetTxId}\n            </Link>\n          </Message>\n        ) : null}\n      </div>\n    )\n  );\n};\n\nexport default PaymentFaucet;\n","import { useMemo } from \"react\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport * as sel from \"src/selectors\";\n\nexport default function useFaucet() {\n  const currentUserID = useSelector(sel.currentUserID);\n  const isTestnet = useSelector(sel.isTestNet);\n  const isApiRequestingPayWithFaucet = useSelector(\n    sel.isApiRequestingPayWithFaucet\n  );\n  const proposalPaywallPaymentTxidSelector = useMemo(\n    () => sel.makeGetPaywallTxid(currentUserID),\n    [currentUserID]\n  );\n  const proposalPaywallPaymentTxid = useSelector(\n    proposalPaywallPaymentTxidSelector\n  );\n  const paywallFaucetTxidSelector = useMemo(\n    () => sel.makeGetPaywallFaucetTxid(currentUserID),\n    [currentUserID]\n  );\n  const paywallFaucetTxid = useSelector(paywallFaucetTxidSelector);\n  const payWithFaucetError = useSelector(sel.payWithFaucetError);\n\n  const payWithFaucet = useAction(act.payWithFaucet);\n  const resetFaucet = useAction(act.resetPaywallPaymentWithFaucet);\n\n  const paymentTxid = paywallFaucetTxid || proposalPaywallPaymentTxid;\n\n  return {\n    isTestnet,\n    isApiRequestingPayWithFaucet,\n    payWithFaucetTxId: paymentTxid,\n    payWithFaucetError,\n    payWithFaucet,\n    resetFaucet\n  };\n}\n","import PropTypes from \"prop-types\";\nimport qr from \"qr-image\";\nimport React from \"react\";\n\nconst QRCode = ({ addr }) => {\n  const qr_img = qr.imageSync(\"decred:\" + addr, { type: \"svg\" });\n  return <div dangerouslySetInnerHTML={{ __html: qr_img }} />;\n};\n\nQRCode.propTypes = {\n  addr: PropTypes.string\n};\n\nexport default QRCode;\n","import {\n  classNames,\n  CopyableText,\n  H4,\n  Text,\n  useTheme,\n  DEFAULT_DARK_THEME_NAME\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport PaymentFaucet from \"../PaymentFaucet\";\nimport PaymentStatusTag from \"../PaymentStatusTag\";\nimport QRCode from \"../QRCode\";\nimport styles from \"./PaymentComponent.module.css\";\n\nconst PaymentComponent = ({ address, amount, extraSmall, status }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  return (\n    <>\n      <div\n        data-testid=\"payment-component\"\n        className={classNames(\n          styles.paywallInfo,\n          isDarkTheme && styles.dark,\n          \"margin-top-l\"\n        )}\n      >\n        <div className={styles.qrcodeWrapper}>\n          <QRCode addr={address} />\n        </div>\n        <div className={classNames(styles.infoWrapper, \"margin-left-m\")}>\n          <H4 weight=\"bold\" className=\"margin-bottom-xs\">\n            Send\n          </H4>\n          <Text>{amount} DCR</Text>\n          <H4 weight=\"bold\" className=\"margin-top-s margin-bottom-xs\">\n            To address\n          </H4>\n          <CopyableText\n            id=\"component-payment-address\"\n            truncate\n            tooltipPlacement={\"bottom\"}\n          >\n            {address}\n          </CopyableText>\n          {!extraSmall && (\n            <span data-testid=\"payment-status-tag\">\n              <PaymentStatusTag status={status} />\n            </span>\n          )}\n        </div>\n      </div>\n      <PaymentFaucet address={address} amount={amount} />\n    </>\n  );\n};\n\nPaymentComponent.propTypes = {\n  address: PropTypes.string,\n  amount: PropTypes.number,\n  status: PropTypes.number,\n  mapStatusTag: PropTypes.object\n};\n\nexport default PaymentComponent;\n","import { Button, useMediaQuery } from \"pi-ui\";\nimport React, { useCallback } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport LoggedInContent from \"../LoggedInContent\";\nimport styles from \"./NewButton.module.css\";\n\nconst NewButton = ({ history, goTo, label, disabled }) => {\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  const onClick = useCallback(() => history.push(goTo), [history, goTo]);\n  return (\n    <LoggedInContent>\n      <Button\n        type=\"button\"\n        kind={disabled ? \"disabled\" : \"primary\"}\n        className={styles.newButton}\n        onClick={onClick}\n      >\n        {extraSmall ? \"+\" : label}\n      </Button>\n    </LoggedInContent>\n  );\n};\n\nexport default withRouter(NewButton);\n","import { Sidebar as UISidebar } from \"pi-ui\";\nimport React from \"react\";\nimport SidebarContent from \"./SidebarContent\";\n\nconst Sidebar = () => <SidebarContent wrapper={UISidebar} />;\n\nexport default Sidebar;\n","import {\n  classNames,\n  Container,\n  H1,\n  Main as UIMain,\n  Message,\n  PageDetails as PageDetailsUI,\n  Tab as TabUI,\n  Tabs as TabsUI,\n  TopBanner\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport ErrorBoundary from \"src/components/ErrorBoundary\";\nimport NewButton from \"src/components/NewButton\";\nimport Header from \"src/containers/Header/Header\";\nimport useScrollToTop from \"src/hooks/utils/useScrollToTop\";\nimport Sidebar from \"../../Sidebar\";\nimport styles from \"../layouts.module.css\";\nimport { useConfig } from \"src/containers/Config\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport isNull from \"lodash/fp/isNull\";\n\nconst renderError = (error) => (\n  <Main className={styles.singleContentMain}>\n    <Message kind=\"error\">{error.toString()}</Message>\n  </Main>\n);\n\nconst DefaultNewButton = () => {\n  const {\n    recordType,\n    constants: { RECORD_TYPE_PROPOSAL, RECORD_TYPE_INVOICE, RECORD_TYPE_DCC }\n  } = useConfig();\n  const { isPaid } = usePaywall();\n  const mapRecordTypeToButton = {\n    [RECORD_TYPE_PROPOSAL]: (\n      // When paywall is off `isPaid` is null, in that case the new proposal\n      // button should be enabled.\n      <NewButton\n        disabled={!isNull(isPaid) && !isPaid}\n        label=\"New Proposal\"\n        goTo=\"/record/new\"\n      />\n    ),\n    [RECORD_TYPE_INVOICE]: (\n      <NewButton label=\"New Invoice\" goTo=\"/invoices/new\" />\n    ),\n    [RECORD_TYPE_DCC]: <NewButton label=\"New DCC\" goTo=\"/dccs/new\" />\n  };\n  return mapRecordTypeToButton[recordType] || null;\n};\n\nconst Title = (props) => <H1 {...props} />;\n\nconst Subtitle = (props) => (\n  <span className={styles.subtitle} {...props}>\n    {props.children}\n  </span>\n);\n\nconst PageDetails = ({\n  className,\n  title,\n  subtitle,\n  actionsContent,\n  actionsClassName,\n  children,\n  headerClassName,\n  titleAndSubtitleWrapperClassName,\n  ...props\n}) => {\n  const titleContent =\n    typeof title === \"string\" ? (\n      <H1\n        id=\"page-title\"\n        truncate\n        linesBeforeTruncate={2}\n        className={styles.pageDetailsTitle}\n      >\n        {title}\n      </H1>\n    ) : (\n      title\n    );\n  return (\n    <PageDetailsUI\n      className={classNames(styles.customPageDetails, className)}\n      {...props}\n    >\n      <div className={classNames(styles.pageDetailsHeader, headerClassName)}>\n        <div\n          className={classNames(\n            styles.titleAndSubtitleWrapper,\n            titleAndSubtitleWrapperClassName\n          )}\n        >\n          {titleContent}\n          {!!subtitle && <Subtitle>{subtitle}</Subtitle>}\n        </div>\n        <div\n          className={classNames(styles.pageDetailsActions, actionsClassName)}\n        >\n          {actionsContent}\n        </div>\n      </div>\n\n      {children}\n    </PageDetailsUI>\n  );\n};\n\nconst Tab = ({ className, ...props }) => (\n  <TabUI className={classNames(styles.customTab, className)} {...props} />\n);\n\nconst Tabs = ({ className, ...props }) => (\n  <TabsUI className={classNames(className)} {...props} />\n);\n\nconst Main = ({ className, fillScreen, ...props }) => (\n  <UIMain\n    className={classNames(\n      styles.customMain,\n      fillScreen && styles.customMainNoSidebar,\n      className\n    )}\n    {...props}\n  />\n);\n\nconst MultipleContentpage = ({ children, disableScrollToTop, ...props }) => {\n  useScrollToTop(disableScrollToTop);\n  return (\n    <Container {...props}>\n      <Header noBorder />\n      <ErrorBoundary errorRenderer={renderError}>\n        {children({\n          Sidebar,\n          TopBanner,\n          Main,\n          Subtitle,\n          PageDetails,\n          DefaultNewButton,\n          Title,\n          Tabs,\n          Tab\n        })}\n      </ErrorBoundary>\n    </Container>\n  );\n};\n\nPageDetails.defaultProps = {\n  actionsContent: <DefaultNewButton />\n};\n\nMultipleContentpage.propTypes = {\n  children: PropTypes.func,\n  disableScrollToTop: PropTypes.bool\n};\n\nMultipleContentpage.defaultProps = {\n  disableScrollToTop: false\n};\n\nexport default MultipleContentpage;\n","import React from \"react\";\nimport { Modal } from \"pi-ui\";\nimport { useConfig } from \"src/containers/Config\";\nimport Link from \"src/components/Link\";\nimport StaticMarkdown from \"./StaticMarkdown\";\n\nconst ModalPrivacyPolicy = (props) => {\n  const { privacyPolicyContent } = useConfig();\n  return (\n    <Modal\n      style={{ maxWidth: \"70rem\" }}\n      {...props}\n      iconType=\"info\"\n      iconSize=\"lg\"\n    >\n      <StaticMarkdown contentName={privacyPolicyContent} />\n      <div className=\"justify-right\">\n        <Link to=\"/user/privacy-policy\" className=\"margin-top-m\">\n          Privacy Policy Permalink\n        </Link>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ModalPrivacyPolicy;\n","import * as Yup from \"yup\";\n// import {\n//   maxLengthMessage,\n//   minLengthMessage,\n//   yupFieldMatcher\n// } from \"src/utils/validation\";\n\n/*\n  NOTE: Code that validates login via username is commented out until\n  pi reintroduces it. Currently, the login returned to email.\n*/\nexport const loginValidationSchema = ({\n  minpasswordlength\n  // usernamesupportedchars,\n  // minusernamelength,\n  // maxusernamelength\n}) =>\n  Yup.object().shape({\n    // username: Yup.string()\n    //   .matches(...yupFieldMatcher(\"username\", usernamesupportedchars))\n    //   .min(minusernamelength, minLengthMessage(\"username\", minusernamelength))\n    //   .max(maxusernamelength, maxLengthMessage(\"username\", maxusernamelength))\n    //   .required(\"Required\"),\n    email: Yup.string().trim().email(\"Invalid email\").required(\"Required\"),\n    password: Yup.string()\n      .min(\n        minpasswordlength,\n        `Password must be at least ${minpasswordlength} characters`\n      )\n      .required(\"Required\")\n  });\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, Message } from \"pi-ui\";\nimport VerifyTotp from \"src/containers/User/Totp/Verify\";\nimport { TOTP_CODE_LENGTH } from \"src/constants\";\n\nconst ModalTotpVerifyContent = ({ onClose, onVerify }) => {\n  const [error, setError] = useState();\n  const handleChange = (v, clearCode) => {\n    if (v.length === TOTP_CODE_LENGTH) {\n      onVerify(v)\n        .then(() => {\n          onClose();\n        })\n        .catch((e) => {\n          clearCode();\n          setError(e);\n        });\n    }\n  };\n  return (\n    <div data-testid=\"modal-totp-verify\">\n      {error && (\n        <Message\n          kind=\"error\"\n          data-testid=\"modal-totp-verify-error\"\n          className=\"margin-bottom-m\"\n        >\n          {error.toString()}\n        </Message>\n      )}\n      <VerifyTotp\n        onType={handleChange}\n        extended={false}\n        tabIndex={1}\n        title=\"Authenticator Code\"\n      />\n    </div>\n  );\n};\n\nconst ModalTotpVerify = ({ show, onClose, onVerify }) => (\n  <Modal show={show} onClose={onClose} title=\"Verify 2FA Code\">\n    <ModalTotpVerifyContent onVerify={onVerify} onClose={onClose} />\n  </Modal>\n);\n\nModalTotpVerify.propTypes = {\n  show: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onVerify: PropTypes.func.isRequired\n};\n\nexport default ModalTotpVerify;\n","import { Button, Link as UILink, Text, TextInput, classNames } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport ModalPrivacyPolicy from \"src/components/ModalPrivacyPolicy\";\nimport styles from \"./LoginForm.module.css\";\nimport { useLogin } from \"./hooks\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport { useConfig } from \"src/containers/Config\";\nimport ModalTotpVerify from \"src/components/ModalTotpVerify\";\nimport { TOTP_MISSING_LOGIN_ERROR } from \"src/constants\";\n\nconst LoginForm = ({\n  hideTitle,\n  onLoggedIn,\n  redirectToPrivacyPolicyRoute,\n  history,\n  emailId,\n  passwordId,\n  renderPrivacyPolicyModal\n}) => {\n  const { onLogin, validationSchema } = useLogin();\n  const { enableAdminInvite } = useConfig();\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const onSubmit = async (\n    values,\n    { resetForm, setSubmitting, setFieldError }\n  ) => {\n    const credentials = { ...values, email: values.email.trim() };\n    try {\n      await onLogin(credentials);\n      setSubmitting(false);\n      resetForm();\n      onLoggedIn && onLoggedIn();\n    } catch (e) {\n      setSubmitting(false);\n      if (e.errorcode === TOTP_MISSING_LOGIN_ERROR) {\n        handleOpenModal(\n          ModalTotpVerify,\n          {\n            onVerify: (code) => onLogin({ ...credentials, code }),\n            onClose: handleCloseModal\n          },\n          { overlay: true }\n        );\n        return;\n      }\n      setFieldError(\"global\", e);\n    }\n  };\n\n  const handleOpenPrivacyPolicyModal = () => {\n    handleOpenModal(ModalPrivacyPolicy, {\n      onClose: handleCloseModal\n    });\n  };\n\n  function handleOnPrivacyPolicyClick() {\n    if (redirectToPrivacyPolicyRoute) {\n      history.push(\"/user/privacy-policy\");\n    } else if (renderPrivacyPolicyModal) {\n      handleOpenPrivacyPolicyModal();\n    }\n  }\n\n  return (\n    <FormWrapper\n      initialValues={{\n        email: \"\",\n        password: \"\"\n      }}\n      loading={!validationSchema}\n      validationSchema={validationSchema}\n      onSubmit={onSubmit}\n    >\n      {({\n        Form,\n        Title,\n        Actions,\n        Footer,\n        Link,\n        ErrorMessage,\n        values,\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        isSubmitting,\n        errors,\n        touched\n      }) => {\n        return (\n          <Form onSubmit={handleSubmit}>\n            {!hideTitle && <Title>Log in</Title>}\n            {errors && errors.global && (\n              <ErrorMessage>{errors.global.toString()}</ErrorMessage>\n            )}\n            <TextInput\n              id={emailId}\n              label=\"Email\"\n              name=\"email\"\n              tabIndex={1}\n              autoComplete=\"email\"\n              value={values.email.trim()}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              error={touched.email && errors.email}\n            />\n            <TextInput\n              id={passwordId}\n              label=\"Password\"\n              type=\"password\"\n              name=\"password\"\n              tabIndex={2}\n              autoComplete=\"current-password\"\n              value={values.password}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              error={touched.password && errors.password}\n            />\n            <Actions>\n              <Link to=\"/user/request-reset-password\">Reset Password</Link>\n              <Button\n                loading={isSubmitting}\n                kind=\"primary\"\n                type=\"submit\"\n                data-testid=\"login-form-button\"\n              >\n                Login\n              </Button>\n            </Actions>\n            <Footer>\n              <UILink\n                gray\n                onClick={handleOnPrivacyPolicyClick}\n                customComponent={({ className, ...props }) => (\n                  <Text\n                    className={classNames(className, styles.privacyPolicyTxt)}\n                    {...props}\n                  >\n                    {\" \"}\n                    Privacy Policy\n                  </Text>\n                )}\n              />\n              {!enableAdminInvite && (\n                <Text className={styles.createAccounTxt}>\n                  Don't have an account?{\" \"}\n                  <Link to=\"/user/signup\">Create here!</Link>\n                </Text>\n              )}\n            </Footer>\n          </Form>\n        );\n      }}\n    </FormWrapper>\n  );\n};\n\nLoginForm.propTypes = {\n  hideTitle: PropTypes.bool,\n  onLoggedIn: PropTypes.func,\n  emailId: PropTypes.string,\n  passwordId: PropTypes.string,\n  renderPrivacyPolicyModal: PropTypes.bool\n};\n\nLoginForm.defaultProps = {\n  emailId: \"loginemail\",\n  passwordId: \"loginpassword\",\n  renderPrivacyPolicyModal: true\n};\n\nexport default withRouter(LoginForm);\n","import { useEffect, useState } from \"react\";\nimport * as act from \"src/actions\";\nimport { useAction } from \"src/redux\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\nimport { loginValidationSchema } from \"./validation\";\n\nexport function useLogin() {\n  const onLogin = useAction(act.onLogin);\n  const { policy, loading: loadingPolicy } = usePolicy();\n  const [validationSchema, setValidationSchema] = useState(\n    policy ? loginValidationSchema(policy) : null\n  );\n\n  useEffect(\n    function handleSetValidationSchemaFromPolicy() {\n      if (!!policy && !validationSchema) {\n        setValidationSchema(loginValidationSchema(policy));\n      }\n    },\n    [policy, validationSchema]\n  );\n\n  return { onLogin, validationSchema, loadingPolicy };\n}\n","import React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { NumberInput, classNames } from \"pi-ui\";\nimport styles from \"./DigitsInput.module.css\";\n\nconst getDigitsArrayFromCode = (code = \"\", length) => {\n  let newDigits = code.split(\"\").slice(0, length);\n  if (newDigits.length < length) {\n    const fillArray = Array(length - newDigits.length).fill(\"\");\n    newDigits = [...newDigits, ...fillArray];\n  }\n  return newDigits;\n};\n\nconst DigitsInput = ({\n  length,\n  onChange,\n  className,\n  code,\n  tabIndex,\n  autoFocus\n}) => {\n  const [digits, setDigits] = useState(getDigitsArrayFromCode(code, length));\n  const [focused, setFocused] = useState();\n  const inputRef = useRef(null);\n\n  const handleChangeDigit = (e) => {\n    e && e.preventDefault();\n    const newCode = e.target.value.toString();\n    const numbersOnlyCode = newCode.replace(/^\\D+/g, \"\");\n    onChange(getDigitsArrayFromCode(numbersOnlyCode, length).join(\"\"));\n  };\n\n  useEffect(() => {\n    setDigits(getDigitsArrayFromCode(code, length));\n  }, [code, length]);\n\n  const onChangeDigit = (index) => {\n    const newDigits = [...digits];\n    newDigits[index] = \"\";\n    inputRef.current.selectionStart = index;\n    inputRef.current.selectionEnd = index + 1;\n    inputRef.current.focus();\n  };\n\n  // Both useEffects are used to trigger the input focus\n  // on render because useEffect does not recognize changes\n  // for references, therefore, inputRef cannot be used as\n  // a dependency\n  useEffect(() => {\n    focused && inputRef.current.focus();\n  }, [focused]);\n\n  useEffect(() => {\n    setFocused(autoFocus);\n  }, [autoFocus]);\n\n  return (\n    <>\n      <input\n        type=\"text\"\n        data-testid=\"digits-input\"\n        className={styles.mainInput}\n        onChange={handleChangeDigit}\n        value={digits.join(\"\")}\n        ref={inputRef}\n        onBlur={() => {\n          !autoFocus && setFocused(false);\n        }}\n      />\n      <div\n        className={classNames(\n          className,\n          styles.digitsWrapper,\n          focused && styles.focusedInput\n        )}\n      >\n        {digits.map((value, index) => {\n          return (\n            <NumberInput\n              id={`id-digit-${index}`}\n              key={`digit-${index}`}\n              defaultValue={value}\n              tabIndex={tabIndex}\n              onFocus={(e) => {\n                e && e.target && e.target.value\n                  ? onChangeDigit(index)\n                  : inputRef.current.focus();\n                setFocused(true);\n              }}\n            />\n          );\n        })}\n      </div>\n    </>\n  );\n};\n\nDigitsInput.propTypes = {\n  length: PropTypes.number,\n  onChange: PropTypes.func,\n  className: PropTypes.string,\n  code: PropTypes.string,\n  tabIndex: PropTypes.number,\n  autoFocus: PropTypes.bool\n};\n\nDigitsInput.defaultProps = {\n  tabIndex: 1,\n  length: 6,\n  onChange: () => {},\n  onFill: () => {},\n  autoFocus: false\n};\n\nexport default DigitsInput;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { H2, P, Text, Button } from \"pi-ui\";\nimport DigitsInput from \"src/components/DigitsInput\";\nimport { TOTP_CODE_LENGTH } from \"src/constants\";\nimport styles from \"./Totp.module.css\";\n\nconst Wrapper = ({ isForm, ...props }) =>\n  isForm ? <form {...props} /> : <div {...props} />;\n\nconst VerifyTotp = ({\n  onVerify,\n  buttonLabel,\n  extended,\n  title,\n  description,\n  className,\n  inputClassName,\n  onType,\n  tabIndex\n}) => {\n  const [enableVerify, setEnableVerify] = useState(false);\n  const [code, setCode] = useState(\"\");\n  const onFillCode = (newCode) => {\n    setEnableVerify(newCode.length === TOTP_CODE_LENGTH);\n    setCode(newCode);\n    onType(newCode, () => {\n      setCode(\"\");\n    });\n  };\n  const handleVerify = (e) => {\n    e && e.preventDefault();\n    onVerify(code, () => onFillCode(\"\"));\n  };\n  return (\n    <Wrapper isForm={extended} className={className}>\n      {extended ? (\n        <>\n          <H2>{title}</H2>\n          <P>{description}</P>\n        </>\n      ) : (\n        <Text className={styles.inputLabel}>{title}</Text>\n      )}\n      <div>\n        <DigitsInput\n          onChange={onFillCode}\n          className={inputClassName}\n          tabIndex={tabIndex}\n          code={code}\n          autoFocus={true}\n        />\n        {extended && (\n          <Button\n            data-testid=\"totp-verify-button\"\n            type=\"submit\"\n            kind={\n              enableVerify ? (extended ? \"primary\" : \"secondary\") : \"disabled\"\n            }\n            onClick={handleVerify}\n          >\n            {buttonLabel}\n          </Button>\n        )}\n      </div>\n    </Wrapper>\n  );\n};\n\nVerifyTotp.propTypes = {\n  onVerify: PropTypes.func,\n  onType: PropTypes.func,\n  buttonLabel: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string,\n  className: PropTypes.string,\n  inputClassName: PropTypes.string,\n  extended: PropTypes.bool\n};\n\nVerifyTotp.defaultProps = {\n  buttonLabel: \"Verify\",\n  extended: true,\n  description: \"\",\n  onType: () => {}\n};\n\nexport default VerifyTotp;\n","import { Button } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { useConfig } from \"src/containers/Config\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport ModalPayPaywall from \"./ModalPayPaywall/ModalPayPaywall\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport StaticMarkdown from \"./StaticMarkdown\";\n\nconst PaywallMessage = ({ wrapper, ...props }) => {\n  const { paywallContent } = useConfig();\n  const { isPaid, currentUserEmail } = usePaywall();\n  const WrapperComponent = wrapper;\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n  const openPaywallModal = () =>\n    handleOpenModal(ModalPayPaywall, {\n      title: \"Complete your registration\",\n      onClose: handleCloseModal\n    });\n  const showMessage = !!currentUserEmail && isPaid === false && isPaid !== null;\n\n  return (\n    showMessage && (\n      <>\n        <WrapperComponent {...props}>\n          <StaticMarkdown contentName={paywallContent} />\n          <Button\n            onClick={openPaywallModal}\n            className=\"margin-top-m\"\n            data-testid=\"registration-fee-btn\"\n          >\n            Pay the registration fee\n          </Button>\n        </WrapperComponent>\n      </>\n    )\n  );\n};\n\nPaywallMessage.propTypes = {\n  wrapper: PropTypes.oneOfType([PropTypes.func, PropTypes.element])\n};\n\nPaywallMessage.defaultProps = {\n  wrapper: React.Fragment\n};\n\nexport default PaywallMessage;\n","import { Card, classNames } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useMemo } from \"react\";\nimport { useConfig } from \"src/containers/Config\";\nimport PaywallMessage from \"../PaywallMessage\";\nimport StaticMarkdown from \"../StaticMarkdown/StaticMarkdown\";\nimport styles from \"./SidebarContent.module.css\";\n\nconst SidebarBlock = ({ children, className, ...props }) => (\n  <Card\n    className={classNames(\n      styles.sideBarBlockWrapper,\n      \"margin-bottom-m\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n  </Card>\n);\n\nconst SidebarContent = ({ wrapper }) => {\n  const WrapperComponent = wrapper;\n  const { aboutContent, enablePaywall } = useConfig();\n\n  return useMemo(\n    () => (\n      <WrapperComponent data-testid=\"sidebar\">\n        {enablePaywall && (\n          <PaywallMessage\n            wrapper={SidebarBlock}\n            className={classNames(\n              styles.sideBarBlockWrapper,\n              \"margin-bottom-s\"\n            )}\n            marker\n          />\n        )}\n        {!!aboutContent && (\n          <SidebarBlock>\n            <StaticMarkdown contentName={aboutContent} />\n          </SidebarBlock>\n        )}\n      </WrapperComponent>\n    ),\n    [aboutContent, enablePaywall]\n  );\n};\n\nSidebarContent.propTypes = {\n  wrapper: PropTypes.oneOfType([PropTypes.func, PropTypes.node])\n};\n\nSidebarContent.defaultProps = {\n  wrapper: ({ children }) => <>{children}</>\n};\n\nexport default SidebarContent;\n","import React, { Component } from \"react\";\nimport { Button } from \"pi-ui\";\nimport { withRouter } from \"react-router-dom\";\nimport SingleContentPage from \"./layout/SingleContentPage\";\nimport IdentityMessageError from \"./IdentityMessageError\";\nimport { isIdentityError } from \"src/utils\";\nimport { Row } from \"./layout\";\n\nconst identityErrorRenderer = (history) => (\n  <SingleContentPage noCardWrap>\n    <IdentityMessageError />\n    <Row justify=\"center\">\n      <Button onClick={() => history.push(\"/\")}>Return home</Button>\n    </Row>\n  </SingleContentPage>\n);\n\nclass IdentityErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return {\n      error\n    };\n  }\n\n  render() {\n    const { history } = this.props;\n    // If user navigates away reset error.\n    history.listen(() => {\n      if (this.state.error) {\n        this.setState({\n          error: false\n        });\n      }\n    });\n    const { error } = this.state;\n    return isIdentityError(error)\n      ? identityErrorRenderer(history)\n      : this.props.children;\n  }\n}\n\nexport default withRouter(IdentityErrorBoundary);\n","import React, { createContext, useCallback, useRef, useReducer } from \"react\";\nimport IdentityErrorBoundary from \"src/components/IdentityErrorBoundary\";\n\nexport const modalContext = createContext({ component: () => null, props: {} });\n\nconst initialState = {\n  component: () => null,\n  props: {\n    show: false\n  }\n};\n\nfunction toggleReducer(state) {\n  return { toggle: !state.toggle };\n}\n\nconst ModalProvider = ({ children }) => {\n  const modalStack = useRef([]);\n  const modalToDisplay = useRef(initialState);\n  // Modals are refs, and refs doesn't trigger component re-render. This\n  // will force the state update, hence a modal update.\n  const [, toggleDisplay] = useReducer(toggleReducer, { toggle: false });\n\n  const handleOpenModal = useCallback(function (\n    modal,\n    props = {},\n    { overlay } = {}\n  ) {\n    const newModal = { component: modal, props: { show: true, ...props } };\n    if (!modalStack.current || overlay) {\n      modalStack.current && modalStack.current.push(newModal);\n      modalToDisplay.current = newModal;\n      toggleDisplay();\n    } else if (modalToDisplay.current && !modalToDisplay.current.props.show) {\n      modalToDisplay.current = newModal;\n      toggleDisplay();\n    }\n  },\n  []);\n\n  const handleCloseModal = useCallback(function () {\n    modalStack.current && modalStack.current.pop();\n    const previousModal = modalStack.current && modalStack.current.pop();\n    modalToDisplay.current = previousModal || initialState;\n    toggleDisplay();\n  }, []);\n\n  const props = {\n    onClose: handleCloseModal,\n    ...modalToDisplay.current.props\n  };\n\n  return (\n    <IdentityErrorBoundary>\n      <modalContext.Provider value={[handleOpenModal, handleCloseModal]}>\n        {children}\n        <modalToDisplay.current.component {...props} />\n      </modalContext.Provider>\n    </IdentityErrorBoundary>\n  );\n};\n\nexport default ModalProvider;\n","import React, { createContext, useContext, useState, useCallback } from \"react\";\n\nconst staticContentContext = createContext();\n\nexport const useStaticContent = () => useContext(staticContentContext);\n\nconst StaticContentProvider = ({ children }) => {\n  const [contents, setContents] = useState({});\n\n  const getContent = useCallback(\n    async (contentName) => {\n      if (!contentName) return \"\";\n      if (contents[contentName]) {\n        return contents[contentName];\n      }\n      try {\n        const module = await import(`src/assets/copies/${contentName}.md`);\n        const markdownContent = await fetch(module.default);\n        const text = await markdownContent.text();\n        setContents({ ...contents, [contentName]: text });\n        return text;\n      } catch (e) {\n        throw new Error(\n          `Failed loading static content: ${contentName}. Error: ${e}`\n        );\n      }\n    },\n    [contents]\n  );\n\n  return (\n    <staticContentContext.Provider value={{ getContent }}>\n      {children}\n    </staticContentContext.Provider>\n  );\n};\n\nexport default StaticContentProvider;\n","import React from \"react\";\nimport { useTheme, DEFAULT_DARK_THEME_NAME } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport { useConfig } from \"src/containers/Config\";\n\nconst Logo = ({ style }) => {\n  const { themeName } = useTheme();\n  const { logoLight, logoDark } = useConfig();\n  const logoSrc = themeName === DEFAULT_DARK_THEME_NAME ? logoDark : logoLight;\n  return (\n    <img\n      role=\"presentation\"\n      alt=\"logo\"\n      style={style}\n      src={require(`src/assets/images/${logoSrc}`)}\n    />\n  );\n};\n\nLogo.propTypes = {\n  style: PropTypes.object\n};\n\nexport default Logo;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, Icon, Card } from \"pi-ui\";\nimport useEventListener from \"src/hooks/utils/useEventListener\";\nimport styles from \"./ModalFullImage.module.css\";\n\nconst ModalFullImage = ({ images, show, initialIndex = 0, ...props }) => {\n  const [currentImageIdx, setCurrentImageIdx] = useState(initialIndex);\n  const currentImage = images[currentImageIdx];\n  const imgSrc = currentImage\n    ? `data:${currentImage.mime};base64,${currentImage.payload}`\n    : \"\";\n  const imgAlt = currentImage ? currentImage.name : \"image\";\n\n  // only allow navigating back and forth if there are multiple images\n  const canNavigate = images && images.length > 1;\n\n  function showNextImage() {\n    // go to next image or reset index to 0 if there are no subsequent images\n    const nextIndex =\n      images.length > currentImageIdx + 1 ? currentImageIdx + 1 : 0;\n    setCurrentImageIdx(nextIndex);\n  }\n\n  function showPreviousImage() {\n    // go to previous index or set to latest index if there are no preceding images\n    const prevIndex =\n      currentImageIdx === 0 ? images.length - 1 : currentImageIdx - 1;\n    setCurrentImageIdx(prevIndex);\n  }\n\n  useEventListener(\"keydown\", ({ key }) => {\n    if (key === \"ArrowLeft\") {\n      canNavigate && showPreviousImage();\n    }\n    if (key === \"ArrowRight\") {\n      canNavigate && showNextImage();\n    }\n  });\n\n  return (\n    <Modal\n      {...props}\n      show={show}\n      wrapperClassName={styles.wrapper}\n      contentClassName={styles.content}\n    >\n      <div className={styles.navigator}>\n        <Card className={styles.navigatorCard}>\n          {canNavigate && (\n            <Icon\n              className={styles.navigatorIcon}\n              onClick={showPreviousImage}\n              type=\"left\"\n            />\n          )}\n          <span className=\"padding-x-s\">{`${currentImageIdx + 1}/${\n            images.length\n          }`}</span>\n          {canNavigate && (\n            <Icon\n              className={styles.navigatorIcon}\n              onClick={showNextImage}\n              type=\"right\"\n              size=\"lg\"\n            />\n          )}\n        </Card>\n      </div>\n      <img alt={imgAlt} style={{ width: \"100%\" }} src={imgSrc} />\n    </Modal>\n  );\n};\n\nModalFullImage.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.object),\n  show: PropTypes.bool,\n  onPrevious: PropTypes.func,\n  onNext: PropTypes.func,\n  navigatorText: PropTypes.string,\n  withNavigation: PropTypes.bool\n};\n\nexport default ModalFullImage;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"returnLink\":\"GoBackLink_returnLink__1dNp8\",\"darkReturnLink\":\"GoBackLink_darkReturnLink__2qn9L\",\"returnLinkContainer\":\"GoBackLink_returnLinkContainer__2ZKnr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navButton\":\"HamburgerMenu_navButton__2HqQV\",\"navIcon\":\"HamburgerMenu_navIcon__2JDl7\",\"navIconClose\":\"HamburgerMenu_navIconClose__2vq7v HamburgerMenu_navIcon__2JDl7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statusTag\":\"PaymentStatusTag_statusTag__SoV-U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noBorder\":\"Header_noBorder__2M57E\",\"showLogo\":\"Header_showLogo__2bj9a\",\"hideLogo\":\"Header_hideLogo__QDhue Header_showLogo__2bj9a\",\"customHeader\":\"Header_customHeader__WHHYF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"digitsWrapper\":\"DigitsInput_digitsWrapper__3g8bx\",\"focusedInput\":\"DigitsInput_focusedInput__4MVNd\",\"mainInput\":\"DigitsInput_mainInput__2PhN3\"};","import { useEffect, useState } from \"react\";\nimport * as act from \"src/actions\";\nimport { useSelector, useAction } from \"src/redux\";\nimport * as sel from \"src/selectors\";\nimport isEmpty from \"lodash/isEmpty\";\n\nfunction usePolicy() {\n  const policy = useSelector(sel.policy);\n  const loading = useSelector(sel.isApiRequestingPolicy);\n  const onFetchPolicy = useAction(act.onGetPolicy);\n  const [error, setError] = useState();\n  useEffect(\n    function handleSetValidationSchemaFromPolicy() {\n      if (isEmpty(policy)) {\n        onFetchPolicy().catch((e) => {\n          setError(e);\n        });\n      }\n    },\n    [policy, onFetchPolicy]\n  );\n\n  return {\n    policy: policy.www,\n    policyTicketVote: policy.ticketvote,\n    policyComments: policy.comments,\n    policyPi: policy.pi,\n    loading,\n    error\n  };\n}\n\nexport default usePolicy;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HelpMessage_container__3WYkK\",\"helpMessage\":\"HelpMessage_helpMessage__2CQ55\",\"dark\":\"HelpMessage_dark__28Pg1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentWrapper\":\"NotFound_contentWrapper__2daCB\",\"notFoundImg\":\"NotFound_notFoundImg__V8ct0\",\"returnHomeBtn\":\"NotFound_returnHomeBtn__3P2YH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentWrapper\":\"ModalSearchVotes_contentWrapper__2tEmV\",\"loadingWrapper\":\"ModalSearchVotes_loadingWrapper___Xx4y\",\"searchVotesModal\":\"ModalSearchVotes_searchVotesModal__2jcaa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"draftWrapper\":\"ModalDrafts_draftWrapper__Ua6Em\",\"modalTitle\":\"ModalDrafts_modalTitle__1P7XW\",\"draftTitleRfp\":\"ModalDrafts_draftTitleRfp__2x2yL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"arrowAnchor\":\"MonthPickerField_arrowAnchor__2Y4Pa\",\"arrowAnchorOpen\":\"MonthPickerField_arrowAnchorOpen__3Gibu MonthPickerField_arrowAnchor__2Y4Pa\",\"valueWrapper\":\"MonthPickerField_valueWrapper__nfh_N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"List_spinnerWrapper__2UBsS\",\"actionsWrapper\":\"List_actionsWrapper__2MzQc\"};","import {\n  DCC_STATUS_ACTIVE,\n  DCC_STATUS_APPROVED,\n  DCC_STATUS_REJECTED,\n  DCC_STATUS_DRAFTS,\n  DCC_TYPE_ISSUANCE,\n  DCC_TYPE_REVOCATION,\n  DCC_DOMAIN_DEVELOPER,\n  DCC_FULL_USER_CONTRACTOR_TYPES,\n  CONTRACTOR_TYPE_NOMINEE,\n  CONTRACTOR_TYPE_REVOKED,\n  CONTRACTOR_TYPE_SUPERVISOR,\n  CONTRACTOR_TYPE_SUBCONTRACTOR\n} from \"./constants\";\nimport isEmpty from \"lodash/isEmpty\";\nimport some from \"lodash/fp/some\";\nimport isEqual from \"lodash/fp/isEqual\";\nimport { or } from \"src/lib/fp\";\nimport { CMS_USER_TYPES } from \"../../constants\";\n\nconst dccTypes = {\n  [DCC_TYPE_REVOCATION]: \"Revocation\",\n  [DCC_TYPE_ISSUANCE]: \"Issuance\"\n};\n\nconst dccStatusList = {\n  [DCC_STATUS_ACTIVE]: \"active\",\n  [DCC_STATUS_APPROVED]: \"approved\",\n  [DCC_STATUS_REJECTED]: \"rejected\"\n};\n\n/**\n * Returns the corresponding type's name\n * @param {Number} type\n */\nexport const presentationalDccType = (dcc) =>\n  dcc && dcc.dccpayload && dccTypes[dcc.dccpayload.type];\n\n/**\n * Returns the corresponding StatusTag props for given DCC object\n * @param {Object} dcc\n */\nexport const getDccStatusTagProps = (dcc) => {\n  switch (dcc.status) {\n    case DCC_STATUS_ACTIVE:\n      return {\n        type: \"yellowTime\",\n        text: \"Active\"\n      };\n    case DCC_STATUS_APPROVED:\n      return {\n        type: \"greenCheck\",\n        text: \"Approved\"\n      };\n    case DCC_STATUS_REJECTED:\n      return {\n        type: \"orangeNegativeCircled\",\n        text: \"Rejected\"\n      };\n    case DCC_STATUS_DRAFTS:\n      return {\n        type: \"blackTime\",\n        text: \"Draft\"\n      };\n    default:\n      break;\n  }\n};\n\n/**\n * Returns a presentational name for a given DCC based on the nominee\n * username, and dcc type\n * @param {Object} dcc\n */\nexport const presentationalDccName = (dcc) =>\n  dcc && dcc.dccpayload\n    ? `${presentationalDccType(dcc)} for ${dcc.nomineeusername}`\n    : \"\";\n\n/**\n * Returns a presentational name for a draft dcc\n * @param {Object} dcc\n */\nexport const presentationalDraftDccName = (draft) =>\n  draft && draft.type && draft.nomineeusername\n    ? `${dccTypes[draft.type]} DCC draft for ${draft.nomineeusername}`\n    : \"\";\n\n/**\n * Returns a presentational name for DCC Contractor Types\n * @param {Number} type\n */\nexport const presentationalDccContractorType = (type) => CMS_USER_TYPES[type];\n\n/**\n * Returns statement if it exists, otherwise returns a message indicating that\n * dcc is empty\n * @param {String} domain\n */\nexport const presentationalStatement = (statement) =>\n  isEmpty(statement) ? \"No statement provided\" : statement;\n\n/**\n * Returns a presentational dcc status\n * @param {Object} dcc\n */\nexport const presentationalStatus = (status) => dccStatusList[status];\n\n/**\n * Returns if dcc is revocation\n * @param {Object} dcc\n */\nexport const isRevocationDcc = (dcc) =>\n  dcc && dcc.dccpayload && dcc.dccpayload.type === DCC_TYPE_REVOCATION;\n\n/**\n * Returns if dcc's status is active\n * @param {Object} dcc\n */\nexport const isDccActive = (dcc) => dcc && dcc.status === DCC_STATUS_ACTIVE;\n\n/**\n * Returns if dcc's status is approved\n * @param {Object} dcc\n */\nexport const isDccApproved = (dcc) => dcc && dcc.status === DCC_STATUS_APPROVED;\n\n/**\n * Returns contractor type options for selectors\n * @param {Boolean} isSupervisor\n */\nexport const getContractorTypeOptions = (isSupervisor) =>\n  CMS_USER_TYPES.reduce(\n    (acc, label, value) =>\n      value === CONTRACTOR_TYPE_NOMINEE ||\n      value === CONTRACTOR_TYPE_REVOKED ||\n      value === CONTRACTOR_TYPE_SUPERVISOR\n        ? [...acc]\n        : [...acc, { label, value }],\n    []\n  ).filter((type) =>\n    !isSupervisor ? type.value !== CONTRACTOR_TYPE_SUBCONTRACTOR : true\n  );\n\n/**\n * Retuns DCC type options for selectors\n */\nexport const getDccTypeOptions = () => [\n  {\n    label: dccTypes[DCC_TYPE_ISSUANCE],\n    value: DCC_TYPE_ISSUANCE\n  },\n  {\n    label: dccTypes[DCC_TYPE_REVOCATION],\n    value: DCC_TYPE_REVOCATION\n  }\n];\n\n/**\n * Returns user options for DCC from user object list\n * @param {Array} users\n */\nexport const getNomineeOptions = (users) =>\n  users.map(({ username, id }) => ({ label: username, value: id }));\n/**\n * Return if dcc's status is not active using fp approach\n * @param {Object} dcc\n */\nexport const isDccNotActiveFP = (dcc) => () => !isDccActive(dcc);\n\n/**\n * Returns a status list for StatusBar component\n * @param {Array} supportuserids\n * @param {Array} againstuserids\n */\nexport const dccSupportOpposeStatus = (supportuserids, againstuserids) => [\n  {\n    label: \"Support\",\n    amount: supportuserids.length,\n    color: \"green\"\n  },\n  {\n    label: \"Against\",\n    amount: againstuserids.length,\n    color: \"orange\"\n  }\n];\n\n/**\n * Returns an object list with shape { label: username, value: id }\n * from 2 arrays of the same size\n * @param {Array} idList List of ids\n * @param {Array} usernameList List of usernames\n */\nexport const dccSupportOpposeList = (idList, usernameList) =>\n  idList.map((id, index) => ({ label: usernameList[index], value: id }));\n\n/**\n * Returns if userid is on idArray using fp approach\n * @param {Array} idArray\n * @param {String} userid\n */\nexport const isUserIdOn = (idArray) => (userid) =>\n  some((id) => id === userid)(idArray);\n\n/**\n * Returns if dcc support/oppose action is available\n * @param {String} userid\n * @param {Object} dcc\n */\nexport const isDccSupportOpposeAvailable = (userid, dcc) =>\n  !or(\n    isUserIdOn(dcc.supportuserids),\n    isUserIdOn(dcc.againstuserids),\n    isEqual(dcc.sponsoruserid),\n    isDccNotActiveFP(dcc)\n  )(userid);\n\n/**\n * Returns if cms user is a valid contractor\n * @param {Number} contractortype\n * @param {Number} domain\n */\nexport const isUserValidContractor = (user) =>\n  user && DCC_FULL_USER_CONTRACTOR_TYPES.includes(user.contractortype);\n\n/**\n * Returns if cms user is a developer\n * @param {Object} user\n */\nexport const isUserDeveloper = (user) =>\n  isUserValidContractor(user) && user.domain === DCC_DOMAIN_DEVELOPER;\n/**\n * Retuns a sorted dcc list by timestamp\n * @param {Object} unorderedDccs\n */\nexport const sortDccsByTimestamp = (unorderedDccs) =>\n  unorderedDccs &&\n  Object.values(unorderedDccs).sort((a, b) => b.timestamp - a.timestamp);\n\n/*\n * This helper function uses currying to apply a callback to a draftId in order to delete it\n * @param {int} draftId\n * @param {func} cb\n */\nexport const handleDeleteDraft = (draftId, cb) => () => {\n  cb(draftId);\n};\n","import * as stringUtils from \"./strings\";\n\n/**\n * Converts an array of chars into a Regex Expression\n * @param {Array} supportedChars\n * @return {RegExp} regex expression from supported chars\n */\nexport const buildRegexFromSupportedChars = (supportedChars) => {\n  const charNeedsEscaping = (c) => c === \"/\" || c === \".\" || c === \"-\";\n  const concatedChars = supportedChars.reduce(\n    (str, char) => (charNeedsEscaping(char) ? str + `\\\\${char}` : str + char),\n    \"\"\n  );\n  const regex = \"^[\" + concatedChars + \"]*$\";\n  return new RegExp(regex);\n};\n\n/**\n * Converts an array of chars into a Regex Expression\n * @param {Array} supportedChars\n * @return {RegExp} Simple regex expression from supported chars\n */\nexport const buildSimpleMatchRegexFromSupportedChars = (supportedChars) => {\n  const charNeedsEscaping = (c) => c === \"/\" || c === \".\" || c === \"-\";\n  const concatedChars = supportedChars.reduce(\n    (str, char) =>\n      charNeedsEscaping(char) ? `${str}\\\\${char}` : `${str}${char}`,\n    \"\"\n  );\n  const regex = `([${concatedChars}])`;\n  return new RegExp(regex, \"gi\");\n};\n\n/**\n * Creates a string from the concatenation of the supported chars\n * @param {Array} supportedChars\n * @returns {string} string of valid chars\n */\nexport const buildValidCharsStrFromSupportedChars = (supportedChars) =>\n  supportedChars.reduce((str, v) => str + v, \"\");\n\n/**\n * @param {string} fieldName\n * @param {Array} supportedChars\n * @returns {string} custom error message for a non-valid field given a set of\n * supported chars\n */\nexport const invalidMessage = (fieldName, supportedChars) =>\n  `${stringUtils.capitalize(\n    fieldName\n  )} is not valid. Valid chars are ${buildValidCharsStrFromSupportedChars(\n    supportedChars\n  )} `;\n\n/**\n * Creates a yup field matcher for given a field name and an array of\n * supported chars\n * @param {string} fieldName\n * @param {Array} supportedChars\n * @returns {Array} array of parameters for a yup field matcher\n */\nexport const yupFieldMatcher = (fieldName, supportedChars) => {\n  return [\n    buildRegexFromSupportedChars(supportedChars),\n    {\n      excludeEmptyString: true,\n      message: invalidMessage(fieldName, supportedChars)\n    }\n  ];\n};\n\n/**\n * Returns a generic error message for exceeding the minimum length\n * @param {string} fieldName\n * @param {number} minLenght\n */\nexport const minLengthMessage = (fieldName, minLenght) =>\n  `${stringUtils.capitalize(\n    fieldName\n  )} must be at least ${minLenght} characters`;\n\n/**\n * Returns a generic error message for exceeding the exact length\n * @param {string} fieldName\n * @param {number} length\n */\nexport const exactLengthMessage = (fieldName, length) =>\n  `${stringUtils.capitalize(fieldName)} must be exactly ${length} characters`;\n\n/**\n * Returns a generic error message for exceeding the maximum length\n * @param {string} fieldName\n * @param {number} maxLength\n */\nexport const maxLengthMessage = (fieldName, maxLength) =>\n  `${stringUtils.capitalize(\n    fieldName\n  )} must be at most ${maxLength} characters`;\n\n/**\n * Returns a generic error message for exceeding the maximum amount\n * for a given field name\n */\nexport const minAmountMessage = (fieldName, minAmount) =>\n  `${stringUtils.capitalize(\n    fieldName\n  )} must be greater than or equal to ${minAmount}`;\n\n/**\n * Returns a generic error message for not meeting the minimun amount\n * for a given field name\n */\nexport const maxAmountMessage = (fieldName, maxAmount) =>\n  `${stringUtils.capitalize(\n    fieldName\n  )} must be less than or equal to ${maxAmount}`;\n\n/**\n * Returns a generic error message for exceeding the maximum size\n * for attached files in a proposal\n */\nexport const maxFileSizeMessage = () => \"Files size can be at most 512kb\";\n\n/**\n * Returns a generic error message for exceeding the maximum number\n * of attached files in a proposal\n */\nexport const maxFilesExceededMessage = (max) =>\n  `Proposals must have at most ${max} attached images`;\n\n/**\n * Returns a generic error message for invalid mime types on\n * attached files\n * @param {Array} validMimeTypes\n */\nexport const validMimeTypesMessage = (validMimeTypes) =>\n  `Files must have a valid mime type: ${validMimeTypes}`;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"baseTitle\":\"RecordWrapper_baseTitle__tqu6p\",\"underlineTitle\":\"RecordWrapper_underlineTitle__xhPYI\",\"header\":\"RecordWrapper_header__ccbxR\",\"subtitleWrapper\":\"RecordWrapper_subtitleWrapper__2b9cK\",\"subtitleSeparator\":\"RecordWrapper_subtitleSeparator__2PKij\",\"flexWrap\":\"RecordWrapper_flexWrap__PsyUK\",\"eventTooltip\":\"RecordWrapper_eventTooltip__2KLN5\",\"status\":\"RecordWrapper_status__233kH\",\"editButton\":\"RecordWrapper_editButton__2HvKV\",\"titleWrapper\":\"RecordWrapper_titleWrapper__3SJZN\",\"rfpLink\":\"RecordWrapper_rfpLink__2MR3e\",\"darkProposedFor\":\"RecordWrapper_darkProposedFor__eqxoN\",\"proposedFor\":\"RecordWrapper_proposedFor__GiAam\",\"titleEditWrapper\":\"RecordWrapper_titleEditWrapper__1z58d\",\"rfpTitleWrapper\":\"RecordWrapper_rfpTitleWrapper__nX1-q\",\"rfptag\":\"RecordWrapper_rfptag__1yXfQ\",\"mobileRfpTag\":\"RecordWrapper_mobileRfpTag__9tZFD\",\"commentsLink\":\"RecordWrapper_commentsLink__1ADUe\",\"commentsNumber\":\"RecordWrapper_commentsNumber__2Y2AF\",\"darkCommentsNumber\":\"RecordWrapper_darkCommentsNumber__1_HSX\",\"actionsTooltip\":\"RecordWrapper_actionsTooltip__3w4fp\",\"darkActionsTooltip\":\"RecordWrapper_darkActionsTooltip__1XXPq\",\"recordToken\":\"RecordWrapper_recordToken__3ASxY\",\"author\":\"RecordWrapper_author__16JxO\",\"metadataLabel\":\"RecordWrapper_metadataLabel__1vmTN\",\"disableMobileView\":\"RecordWrapper_disableMobileView__2_AzI\",\"titleStatusWrapper\":\"RecordWrapper_titleStatusWrapper__4sgJH\",\"title\":\"RecordWrapper_title__13QZe\"};","module.exports = __webpack_public_path__ + \"static/media/rfp-tag.610c1f4b.svg\";","import { formatTimestampsFromMessage } from \"src/utils\";\n\nconst APIPi = \"pi\";\nconst APIRecords = \"records\";\nconst APIComments = \"comments\";\nconst APITicketvote = \"ticketvote\";\nconst APIWww = \"v1\"; // www api has no prefix so it's identified by v1\n\nconst PluginIdPi = \"pi\";\nconst PluginIdPiUser = \"piuser\";\nconst PluginIdComments = \"comments\";\nconst PluginIdTicketvote = \"ticketvote\";\n\nconst defaultErrorMessage = (code = 0, api = \"\") => `\n  The server encountered an unexpected error, please contact Politeia\n  administrators and inform the api/${api} error code: ${code}\n`;\n\n// API User errors\nexport function APIUserError(response, code, context) {\n  const url = new URL(response.url);\n  const apiType = url.pathname.split(\"/\")[2];\n\n  switch (apiType) {\n    case APIPi:\n      throw new PiUserError(code);\n    case APIRecords:\n      throw new RecordsUserError(code, context);\n    case APIComments:\n      throw new CommentsUserError(code);\n    case APITicketvote:\n      throw new TicketvoteUserError(code, context);\n    case APIWww:\n      throw new WWWUserError(code, context);\n    default:\n      defaultErrorMessage();\n  }\n}\n\n// API Plugin errors\nexport function APIPluginError(pluginId, code, context) {\n  switch (pluginId) {\n    case PluginIdPi:\n      throw new PiPluginError(code, context);\n    case PluginIdPiUser:\n      throw new PiUserPluginError(code);\n    case PluginIdComments:\n      throw new CommentsPluginError(code, context);\n    case PluginIdTicketvote:\n      throw new TicketvotePluginError(code, context);\n    default:\n      defaultErrorMessage();\n  }\n}\n\nfunction PiUserError(code) {\n  const errorMap = {\n    1: \"Invalid inputs for request\",\n    2: \"The provided user identity is not active\",\n    3: \"The provided record token is invalid\",\n    4: \"The provided record was not found\"\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, APIPi);\n  this.errorcode = code;\n  this.errorid = \"pi-user\";\n}\n\nPiUserError.prototype = new Error();\n\nfunction RecordsUserError(code, context) {\n  const errorMap = {\n    1: \"Invalid inputs for request\",\n    2: \"The provided record files are empty\",\n    3: `The file ${context} has an invalid name`,\n    4: `The provided record has duplicate files: ${context}`,\n    5: `The file ${context} has an invalid MIME type`,\n    6: `The file ${context} has an unsupported MIME type.`,\n    7: `The file ${context} has an invalid digest`,\n    8: \"The provided record mdstream has an invalid payload\",\n    9: `The provided record mdstream has an invalid ID ${context}`,\n    10: \"The provided user public key is invalid\",\n    11: \"The provided signature is invalid\",\n    12: \"The provided record token is invalid\",\n    13: \"The record was not found\",\n    14: \"The record is locked for changes\",\n    15: \"The record has no changes and therefore cannot be updated\",\n    16: \"The record state is invalid\",\n    17: \"The record status is invalid\",\n    18: `The status transition is invalid: ${context}`,\n    19: \"The status reason was not found\",\n    20: \"The number of requested record tokens exceeds the page size policy.\",\n    29: \"You must be logged in to perform this action\"\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, APIRecords);\n  this.errorcode = code;\n  this.errorid = \"records-user\";\n}\n\nRecordsUserError.prototype = new Error();\n\nfunction CommentsUserError(code) {\n  const errorMap = {\n    1: \"Invalid inputs for request\",\n    2: \"You must be an author or admin to perform this action\",\n    3: \"The user public key is not active\",\n    4: \"The provided signature was invalid for this comment\",\n    5: \"The record has an invalid state\",\n    6: \"The record token is invalid\",\n    7: \"The record was not found\",\n    8: \"The record is locked for changes\",\n    9: \"No tokens found in the count votes request\"\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, APIComments);\n  this.errorcode = code;\n  this.errorid = \"comments-user\";\n}\n\nCommentsUserError.prototype = new Error();\n\nfunction TicketvoteUserError(code, context) {\n  const errorMap = {\n    0: \"Invalid vote error.\",\n    1: \"Internal server error.\",\n    2: \"The user public key is not active\",\n    3: `Unauthorized: ${context}`,\n    4: \"The provided record was not found\",\n    5: \"The provided record is locked\",\n    6: \"The provided token is invalid\",\n    7: `The page size has exceeded: ${context}`,\n    8: \"The provided payload is duplicate\"\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, APITicketvote);\n  this.errorcode = code;\n  this.errorid = \"ticketvote-user\";\n}\n\nTicketvoteUserError.prototype = new Error();\n\nfunction WWWUserError(code, context) {\n  const errorMap = {\n    1: \"The provided password was invalid\",\n    2: \"The provided email address is invalid\",\n    3: \"The provided verification token is invalid. Please ensure you click the link or copy and paste it exactly as it appears in the verification email\",\n    4: \"The provided verification token is expired. Please register again to receive another email with a new verification token\",\n    5: `The provided proposal is missing the following file(s): ${context}`,\n    6: \"The requested proposal was not found\",\n    7: `The provided proposal has duplicate files: ${context}`,\n    8: \"The provided proposal has an invalid title\",\n    9: \"The submitted proposal has too many markdown files\",\n    10: \"The submitted proposal has too many images\",\n    11: \"The submitted proposal markdown is too large\",\n    12: \"The submitted proposal has one or more images that are too large\",\n    13: \"The password you provided is invalid; it's either too short, too long, or has unsupported characters.\",\n    14: \"The requested comment was not found\",\n    15: \"The provided proposal name was invalid\",\n    16: \"The SHA256 checksum for one of the files was incorrect\",\n    17: \"The Base64 encoding for one of the files was incorrect\",\n    18: `The MIME type detected for ${context} is not supported`,\n    19: \"The MIME type for one of the files is not supported\",\n    20: \"The requested proposal status transition is invalid\",\n    21: \"The provided public key was invalid\",\n    22: \"No active public key was found for your account, please visit your account page to resolve this issue\",\n    23: \"The provided signature was invalid\",\n    24: \"The provided inputs were invalid\",\n    25: \"The private key used for signing was invalid\",\n    26: \"Your comment is too long\",\n    27: \"The user was not found\",\n    28: \"The proposal is in an unexpected state, please contact Politeia administrators\",\n    29: \"You must be logged in to perform this action\",\n    30: \"You must pay the registration fee to perform this action\",\n    31: \"You cannot change the status of your own proposal, please have another admin review it!\",\n    32: \"The username you provided is invalid; it's either too short, too long, or has unsupported characters\",\n    33: \"Another user already has that username, please choose another\",\n    34: \"A verification email has already been sent recently. Please check your email, or wait until it expires and send another one\",\n    35: \"The server cannot verify the payment at this time, please try again later or contact Politeia administrators\",\n    36: \"The public key provided is already taken by another user\",\n    37: \"The proposal cannot be set to that voting status\",\n    38: \"Your account has been locked due to too many login attempts\",\n    40: \"That is an invalid user edit action\",\n    41: \"You are not authorized to perform this action\",\n    42: \"This proposal is in the wrong state for that action\",\n    43: \"Commenting is not allowed on this proposal\",\n    44: \"You cannot vote on this comment\",\n    45: \"You must provide a reason for censoring the proposal\",\n    46: \"You must provide a reason for censoring the comment\",\n    47: \"You cannot censor this comment\",\n    48: \"Only the proposal author may perform this action\",\n    49: \"The author has not yet authorized a vote for this proposal\",\n    50: \"The vote has already been authorized for this proposal\",\n    51: \"That is an invalid vote authorization action\",\n    52: \"This account has been deactivated\",\n    53: \"Your email address has not yet been verified\",\n    54: \"Invalid proposal vote parameters\",\n    55: \"Email address is not verified\",\n    56: \"Invalid user ID\",\n    57: \"Invalid like comment action\",\n    58: \"Invalid proposal censorship token\",\n    59: \"Email address is already verified\",\n    60: \"No changes were found in the proposal\",\n    61: \"Maximum proposal page size exceeded\",\n    62: \"That is a duplicate comment.\",\n    63: \"Invalid login credentials\",\n    64: \"Comment is censored\",\n    65: \"Invalid proposal version\",\n    66: \"Invalid proposal metadata\",\n    67: \"Missing proposal metadata\",\n    68: \"Proposal metadata digest invalid\",\n    69: \"Invalid vote type\",\n    70: \"Invalid vote option\",\n    71: \"The proposal linkby deadline was not met yet\",\n    72: \"The RFP proposal has no linked proposals\",\n    73: \"Invalid proposal linkto\",\n    74: \"Invalid proposal linkby\",\n    75: \"Invalid runoff vote\",\n    76: \"Wrong proposal type\",\n    77: \"Wrong 2FA code was provided\",\n    78: \"Invalid TOTP type\",\n    79: \"Login requires the TOTP code\",\n    80: \"You must wait until the next TOTP code window\",\n\n    // CMS Errors\n    1001: \"Malformed name\",\n    1002: \"Malformed location\",\n    1003: \"Invoice cannot be found\",\n    1004: \"Month or year was set, while the other was not\",\n    1005: \"Invalid invoice status transition\",\n    1006: \"Reason for action not provided\",\n    1007: \"Submitted invoice file is malformed\",\n    1008: \"Submitted invoice is a duplicate of an existing invoice\",\n    1009: \"Invalid payment address\",\n    1010: \"Malformed line item submitted\",\n    1011: \"Invoice missing contractor name\",\n    1013: \"Invoice missing contractor contact\",\n    1014: \"Invoice missing contractor rate\",\n    1015: \"Invoice has invalid contractor rate\",\n    1016: \"Invoice has malformed contractor contact\",\n    1017: \"Line item has malformed proposal token\",\n    1018: \"Line item has malformed domain\",\n    1019: \"Line item has malformed subdomain\",\n    1020: \"Line item has malformed description\",\n    1021: \"Invoice is an wrong status to be editted (approved, rejected or paid)\",\n    1022: \"Invoices require at least 1 line item\",\n    1023: \"Only one invoice per month/year is allowed to be submitted\",\n    1024: \"An invalid month/year was submitted on an invoice\",\n    1025: \"Exchange rate was invalid or didn't match the expected result\",\n    1026: \"An invalid line item type was entered\",\n    1027: \"An invalid value was entered into labor or expenses\",\n    1028: \"The invoice has a duplicate payment address, please use a new address\",\n    1029: \"Invalid dates were requested for line item payouts\",\n    1030: \"An attempted edit of invoice included an unauthorized month or year change\",\n    1031: \"An invalid DCC Type was included in the request\",\n    1032: \"Your domain does not match the DCC domain\",\n    1033: \"The DCC sponsor statement is malformed\",\n    1034: \"The submitted DCC file is malformed, please review and try again\",\n    1035: \"This error is currently not implemented\",\n    1036: \"There was an invalid status transition detected\",\n    1037: \"That email is already being used by another user\",\n    1038: \"You do not have the correct contractor status to submit an invoice\",\n    1039: \"An invalid nominee was submitted for a DCC\",\n    1040: \"The requested DCC was not found\",\n    1041: \"Cannot comment/support/oppose a DCC if it's not active\",\n    1042: \"Invalid suppport or opposition vote was included, must be aye or nay\",\n    1043: \"You have already supported or opposed this DCC\",\n    1044: \"You may not support or oppose your own sponsored DCC\",\n    1045: \"You are not authorized to complete a DCC request\",\n    1046: \"You must include a valid contractor type for a DCC\",\n    1047: \"You must be a Supervisor Contractor to submit a Sub Contractor line item\",\n    1048: \"You must supply a UserID for a Sub Contractor line item\",\n    1049: \"Invalid SubContractor\",\n    1050: `Supervisor Error - ${context}`,\n    1051: \"Malformed DCC\",\n    1052: \"The DCC is not currently up for an all user vote\",\n    1053: \"The user does not have the sufficient user weight for this vote\",\n    1054: \"The all contractors voting period has ended\",\n    1055: \"Cannot update the status of a DCC while the vote is still live\",\n    1056: \"The user has already submitted a vote for this DCC\",\n    1057: \"Codestats site username is required to receive the code stats\",\n    1058: \"Code tracker required for attempted request, check token setting in config\"\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, APIWww);\n  this.errorcode = code;\n  this.errorid = \"www\";\n}\n\nWWWUserError.prototype = new Error();\n\nfunction PiPluginError(code, context) {\n  const errorMap = {\n    1: `The submitted proposal has an invalid file name: ${context}`,\n    2: `The file size is invalid, ${context}`,\n    3: `The required ${context} file is missing`,\n    4: `The provided images exceeds the maximum allowed, ${context}`,\n    5: `The file exceeds the maximum allowed size, ${context}`,\n    6: `Proposal name is invalid, ${context}`,\n    7: `This operation is not allowed, ${context}`,\n    8: `Proposal start date is invalid, ${formatTimestampsFromMessage(\n      context\n    )}`,\n    9: `Proposal end date is invalid, ${formatTimestampsFromMessage(context)}`,\n    10: `Proposal amount is invalid, ${context}`,\n    11: `Proposal domain is invalid, ${context}`,\n    15: `${context}`,\n    16: `${context}`,\n    17: \"Comment replies are only allowed on the most recent author update thread\",\n    18: \"Author update title is missing\"\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, PluginIdPi);\n  this.errorcode = code;\n  this.errorid = \"pi\";\n}\n\nPiPluginError.prototype = new Error();\n\nfunction PiUserPluginError(code) {\n  const errorMap = {\n    2: \"You do not have any proposal credits; you must purchase one before you can submit a proposal.\"\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, PluginIdPiUser);\n  this.errorcode = code;\n}\n\nPiUserPluginError.prototype = new Error();\n\nfunction CommentsPluginError(code, context) {\n  const errorMap = {\n    1: `The provided proposal token is invalid, ${context}`,\n    2: \"The provided user public key is not active\",\n    3: \"The provided signature is invalid\",\n    4: `The comment exceeds the maximum length allowed, ${context}`,\n    5: \"The comment has no changes and therefore cannot be updated\",\n    6: `The provided comment code is not found ${context}`,\n    7: \"Only the comment author is allowed to edit\",\n    8: `The provided parent ID is invalid, ${context}`,\n    9: `The provided comment vote is invalid, ${context}`,\n    10: \"You have exceeded the max number of changes on your vote\",\n    12: \"Backend does not accept the extra data needed for author updates\",\n    13: context,\n    14: context\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, PluginIdComments);\n  this.errorcode = code;\n  this.errorid = \"comments\";\n}\n\nCommentsPluginError.prototype = new Error();\n\nfunction TicketvotePluginError(code, context) {\n  const errorMap = {\n    1: `The provided record token is invalid, ${context}`,\n    2: \"The provided user public key is invalid\",\n    3: \"The provided signature is invalid\",\n    4: `The provided record version is invalid, ${context}`,\n    5: `The provided authorization is invalid, ${context}`,\n    6: `The start details for this vote are missing, ${context}`,\n    7: `The start details for this vote are invalid, ${context}`,\n    8: `The provided vote type is invalid, ${context}`,\n    9: `The provided vote duration is invalid, ${context}`,\n    10: `The provided quorum is invalid, ${context}`,\n    11: `The provided pass percentage is invalid, ${context}`,\n    12: `The provided vote options are invalid, ${context}`,\n    13: `The provided vote bits are invalid, ${context}`,\n    14: `The parent for the runnoff vote is invalid, ${context}`,\n    15: `The provided vote status is invalid, ${context}`,\n    16: `The provided metadata for this vote is invalid, ${context}`,\n    17: `The provided linkBy is invalid, ${context}`,\n    18: `The provided linkTo is invalid, ${context}`,\n    19: `The linkBy deadline for this record is not yet expired, ${context}`,\n    20: `The provided record status is invalid, ${context}`\n  };\n\n  this.message = errorMap[code] || defaultErrorMessage(code, PluginIdComments);\n  this.errorcode = code;\n  this.errorid = \"ticketvote\";\n}\n\nTicketvotePluginError.prototype = new Error();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoaderScreen_container__1Ugw2\",\"dark\":\"LoaderScreen_dark__X5H0N\",\"logo-enter\":\"LoaderScreen_logo-enter__1qVRw\",\"logo-active\":\"LoaderScreen_logo-active__3OqdW\",\"logo-exit\":\"LoaderScreen_logo-exit__-K3yH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sideBarBlockWrapper\":\"SidebarContent_sideBarBlockWrapper__1Jdl1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ProposalCreditsIndicator_wrapper__2zDh4\",\"proposalCreditsButton\":\"ProposalCreditsIndicator_proposalCreditsButton__1IH7I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"privacyPolicyTxt\":\"LoginForm_privacyPolicyTxt__1UFZg\",\"createAccounTxt\":\"LoginForm_createAccounTxt__2b4IR\",\"totp\":\"LoginForm_totp__fSiqj\",\"hide\":\"LoginForm_hide__1RUue\",\"totpInput\":\"LoginForm_totpInput__3Su30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"LoadingWithMessage_wrapper__2RMwY\",\"text\":\"LoadingWithMessage_text__1SRc3\"};","export const DCC_STATUS_ACTIVE = 1;\nexport const DCC_STATUS_APPROVED = 2;\nexport const DCC_STATUS_REJECTED = 3;\nexport const DCC_STATUS_DRAFTS = 4;\n\nexport const DCC_TYPE_ISSUANCE = 1;\nexport const DCC_TYPE_REVOCATION = 2;\n\nexport const CONTRACTOR_TYPE_INVALID = 0;\nexport const CONTRACTOR_TYPE_DIRECT = 1;\nexport const CONTRACTOR_TYPE_SUPERVISOR = 2;\nexport const CONTRACTOR_TYPE_SUBCONTRACTOR = 3;\nexport const CONTRACTOR_TYPE_NOMINEE = 4;\nexport const CONTRACTOR_TYPE_REVOKED = 5;\n\nexport const DCC_DOMAIN_INVALID = 0;\nexport const DCC_DOMAIN_DEVELOPER = 1;\n\nexport const DCC_FULL_USER_CONTRACTOR_TYPES = [\n  CONTRACTOR_TYPE_DIRECT,\n  CONTRACTOR_TYPE_SUPERVISOR,\n  CONTRACTOR_TYPE_SUBCONTRACTOR\n];\nexport const DCC_SUPPORT_ACTION = \"aye\";\nexport const DCC_OPPOSE_ACTION = \"nay\";\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dateTooltip\":\"DateTooltip_dateTooltip__2NVWM\",\"darkDateTooltip\":\"DateTooltip_darkDateTooltip__1DuEZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"copyTooltip\":\"CopyToClipboard_copyTooltip__2l_Xm\",\"darkCopyTooltip\":\"CopyToClipboard_darkCopyTooltip__6oVLG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reportButton\":\"ProposalActions_reportButton__3oKuD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableButton\":\"TableButton_tableButton__1AHkD\",\"tableButtonDisabled\":\"TableButton_tableButtonDisabled__1e9WI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"customMain\":\"Detail_customMain__3wa5A\",\"customHeader\":\"Detail_customHeader__2GzmO\",\"customTitleAndSubtitleWrapper\":\"Detail_customTitleAndSubtitleWrapper__2Hwr-\",\"commentsHeaderWrapper\":\"Detail_commentsHeaderWrapper__2l6sn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleWrapper\":\"Detail_titleWrapper__2AjQi\",\"sidebanner\":\"Detail_sidebanner__3xpCe\",\"titleLink\":\"Detail_titleLink__1H8NR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"Proposal_row__8stpv\",\"authorizeTooltip\":\"Proposal_authorizeTooltip__3f519\",\"disabled\":\"Proposal_disabled__24e_p\",\"filesRow\":\"Proposal_filesRow__ym64j\",\"blocksLeft\":\"Proposal_blocksLeft__12W8-\",\"subtitleStatusTag\":\"Proposal_subtitleStatusTag__2uCLC\",\"version\":\"Proposal_version__2X0Wi\",\"versionPicker\":\"Proposal_versionPicker__1gIcB\",\"darkVersionPicker\":\"Proposal_darkVersionPicker__gbLga\",\"markdownContainer\":\"Proposal_markdownContainer__24dtL\",\"rfpMarkdownContainer\":\"Proposal_rfpMarkdownContainer__2m7-3\",\"voteCount\":\"Proposal_voteCount__2_LLq\",\"quorumAndVotes\":\"Proposal_quorumAndVotes__s5iX4\",\"voteCountSearch\":\"Proposal_voteCountSearch__11xx_\",\"lastRow\":\"Proposal_lastRow__1Jc7D\",\"copyLink\":\"Proposal_copyLink__2JXZk\",\"downloadCommentsLink\":\"Proposal_downloadCommentsLink__b-R0t\",\"abandonedProposal\":\"Proposal_abandonedProposal__1P0gD\",\"rfpProposal\":\"Proposal_rfpProposal__feOrH\",\"proposalActions\":\"Proposal_proposalActions__25ckk\",\"statusTag\":\"Proposal_statusTag__xFNdF\",\"statusBarTooltip\":\"Proposal_statusBarTooltip__EYAQq\",\"quorumTooltip\":\"Proposal_quorumTooltip__1Y3mb\",\"darkQuorumTooltip\":\"Proposal_darkQuorumTooltip__2eZkr\",\"votesQuorum\":\"Proposal_votesQuorum__26bzh\",\"votesLeft\":\"Proposal_votesLeft__3FUna\",\"votesReceived\":\"Proposal_votesReceived__1wGQy\",\"rawMarkdownPre\":\"Proposal_rawMarkdownPre__1XnBe\",\"toggleMarkdownLink\":\"Proposal_toggleMarkdownLink__1D9TB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"attachFileButton\":\"AttachFileInput_attachFileButton__1Z6uh\",\"small\":\"AttachFileInput_small__ZjsQs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ModalVotesList_list__MzlH0\",\"card\":\"ModalVotesList_card__20fs0\"};","import { useLayoutEffect, useCallback, useRef } from \"react\";\n\nfunction useScrollTo(element, shouldScroll) {\n  // This ref is used to hold the setTimeout timer to clean it up\n  // on unmount.\n  const timer = useRef(null);\n  const scrollToElement = useCallback((element) => {\n    timer.current = setTimeout(\n      () => document.getElementById(element).scrollIntoView(),\n      100\n    );\n  }, []);\n\n  useLayoutEffect(() => {\n    shouldScroll && scrollToElement(element);\n\n    // Cleanup timer on unmount\n    return () => timer.current && clearTimeout(timer.current);\n  }, [element, scrollToElement, shouldScroll]);\n}\n\nexport default useScrollTo;\n","import React from \"react\";\nimport { H1, Message, Spinner, classNames } from \"pi-ui\";\nimport { Formik } from \"formik\";\nimport Link from \"../Link\";\nimport styles from \"./FormWrapper.module.css\";\n\nconst Title = ({ className, ...props }) => (\n  <H1 className={classNames(styles.title, className)} {...props} />\n);\n\nconst Actions = ({ className, ...props }) => (\n  <div\n    className={classNames(\n      props.children.length > 1 ? styles.actions : styles.singleAction,\n      className\n    )}\n    {...props}\n  />\n);\n\nconst Footer = ({ className, ...props }) => (\n  <div className={classNames(styles.footer, className)} {...props} />\n);\n\nconst Form = ({ className, ...props }) => (\n  <form className={classNames(styles.form, className)} {...props} />\n);\n\nconst ErrorMessage = ({ className, ...props }) => (\n  <Message\n    kind=\"error\"\n    className={classNames(styles.errorMessage, className)}\n    {...props}\n  />\n);\n\nconst Loader = ({ className, ...props }) => (\n  <div className={classNames(styles.loader, className)} {...props}>\n    <Spinner invert />\n  </div>\n);\n\nconst FormWrapper = ({ children, loading, ...props }) => {\n  return loading ? (\n    <Loader />\n  ) : (\n    <Formik {...props}>\n      {(props) =>\n        children({ ...props, Actions, Footer, Title, Form, ErrorMessage, Link })\n      }\n    </Formik>\n  );\n};\n\nexport default FormWrapper;\n","/*\n  This lib is designed to handle persisting state data into local storage\n*/\nimport isEqual from \"lodash/isEqual\";\nimport get from \"lodash/get\";\nimport set from \"lodash/set\";\nimport { currentUserID } from \"../selectors/models/users\";\n\n// Logged in state key refers to the chunck of the state which will be stored\n// in the local storage only while the user stills logged in\nexport const loggedInStateKey = \"state\";\n\n// Persistent state key refers to the chunck of state which will persist\n// in the local storage even if the user logs out\nexport const persistentStateKey = (uuid) => `state-${uuid}`;\n\nexport const stateKey = (uuid) =>\n  uuid ? persistentStateKey(uuid) : loggedInStateKey;\n\nexport const loadStateLocalStorage = (uuid) => {\n  try {\n    const serializedState = localStorage.getItem(stateKey(uuid));\n    if (!serializedState) return undefined;\n    else return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nexport const saveStateLocalStorage = (state, uuid = \"\") => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem(stateKey(uuid), serializedState);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const clearStateLocalStorage = (uuid) => {\n  const key = stateKey(uuid);\n  localStorage.removeItem(key);\n};\n\nexport const handleSaveVotesTimetamps = (token, timestamps) =>\n  saveStateLocalStorage(timestamps, `${token}-votes-timestamps`);\n\nexport const loadVotesTimestamps = (token) =>\n  loadStateLocalStorage(`${token}-votes-timestamps`);\n\nexport const handleSaveCommentsTimetamps = (token, timestamps) =>\n  saveStateLocalStorage(timestamps, `${token}-comments-timestamps`);\n\nexport const loadCommentsTimestamps = (token) =>\n  loadStateLocalStorage(`${token}-comments-timestamps`);\n\nexport const handleSaveAppDraftProposals = (state) => {\n  const uuid = currentUserID(state);\n  if (!uuid) {\n    return;\n  }\n  const stateFromLs = loadStateLocalStorage(uuid) || {};\n  const draftProposalsFromStore = state.app.draftProposals;\n  const draftProposalsLocalStorage = get(\n    stateFromLs,\n    [\"app\", \"draftProposals\"],\n    {}\n  );\n\n  if (\n    draftProposalsFromStore &&\n    !isEqual(draftProposalsFromStore, draftProposalsLocalStorage)\n  ) {\n    const newValue = set(\n      stateFromLs,\n      [\"app\", \"draftProposals\"],\n      draftProposalsFromStore\n    );\n    saveStateLocalStorage(newValue, uuid);\n  }\n};\n\nexport const handleSaveAppDraftInvoices = (state) => {\n  const uuid = currentUserID(state);\n  if (!uuid) {\n    return;\n  }\n  const stateFromLs = loadStateLocalStorage(uuid) || {};\n  const draftInvoicesFromStore = state.app.draftInvoices;\n  const draftInvoicesLocalStorage = get(\n    stateFromLs,\n    [\"app\", \"draftInvoices\"],\n    {}\n  );\n\n  if (\n    draftInvoicesFromStore &&\n    !isEqual(draftInvoicesFromStore, draftInvoicesLocalStorage)\n  ) {\n    const newValue = set(\n      stateFromLs,\n      [\"app\", \"draftInvoices\"],\n      draftInvoicesFromStore\n    );\n    saveStateLocalStorage(newValue, uuid);\n  }\n};\n\nexport const handleSaveAppDraftDccs = (state) => {\n  const uuid = currentUserID(state);\n  if (!uuid) {\n    return;\n  }\n  const stateFromLs = loadStateLocalStorage(uuid) || {};\n  const draftDccsFromStore = state.app.draftDccs;\n  const draftDccsLocalStorage = get(stateFromLs, [\"app\", \"draftDccs\"], {});\n\n  if (\n    draftDccsFromStore &&\n    !isEqual(draftDccsFromStore, draftDccsLocalStorage)\n  ) {\n    const newValue = set(stateFromLs, [\"app\", \"draftDccs\"], draftDccsFromStore);\n    saveStateLocalStorage(newValue, uuid);\n  }\n};\n\nexport const handleSaveStateToLocalStorage = (state) => {\n  handleSaveAppDraftProposals(state);\n  handleSaveAppDraftDccs(state);\n  handleSaveAppDraftInvoices(state);\n};\n","import React from \"react\";\nimport { CustomConfigProvider } from \"src/containers/Config\";\nimport { constants } from \"../Config/helpers\";\n\nconst customConfigDcc = {\n  recordType: constants.RECORD_TYPE_DCC\n};\n\nexport const DccProvider = ({ children }) => (\n  <CustomConfigProvider {...{ children, ...customConfigDcc }} />\n);\n\nexport const withDcc = (Component) => (props) =>\n  (\n    <CustomConfigProvider {...customConfigDcc}>\n      <Component {...props} />\n    </CustomConfigProvider>\n  );\n","export const MAINNET = \"mainnet\";\nexport const TESTNET = \"testnet\";\n\nexport const CMSWWWMODE = \"cmswww\";\n\nexport const RECORD_TYPE_PROPOSAL = \"proposals\";\nexport const RECORD_TYPE_INVOICE = \"invoices\";\n\nexport const EXPLORER = \"dcrdata\";\n\nexport const CENSORSHIP_TOKEN_LENGTH = 16;\n\n// DCC\nexport const DCC_STATUS_ACTIVE = 1;\nexport const DCC_STATUS_APPROVED = 2;\nexport const DCC_STATUS_REJECTED = 3;\nexport const DCC_STATUS_DRAFTS = 4;\n\nexport const DCC_TYPE_ISSUANCE = 1;\nexport const DCC_TYPE_REVOCATION = 2;\n\nexport const DCC_DIRECT_CONTRACTOR_TYPE = 1;\nexport const DCC_SUB_CONTRACTOR_TYPE = 3;\n\nexport const DCC_SUPPORT_VOTE = \"aye\";\nexport const DCC_OPPOSE_VOTE = \"nay\";\n\n// CMS\nexport const INVOICE_STATUS_UNREVIEWED = 2;\nexport const INITIAL_YEAR = 2018;\n\n// POLITEIA\n\nexport const PROPOSAL_FILTER_ALL = 0;\n\nexport const PROPOSAL_STATUS_UNREVIEWED = 1;\nexport const PROPOSAL_STATUS_PUBLIC = 2;\nexport const PROPOSAL_STATUS_CENSORED = 3;\nexport const PROPOSAL_STATUS_ARCHIVED = 4;\n\nexport const PROPOSAL_SUMMARY_STATUS_UNVETTED = \"unvetted\";\nexport const PROPOSAL_SUMMARY_STATUS_UNVETTED_ABANDONED = \"unvetted-abandoned\";\nexport const PROPOSAL_SUMMARY_STATUS_UNVETTED_CENSORED = \"unvetted-censored\";\nexport const PROPOSAL_SUMMARY_STATUS_UNDER_REVIEW = \"under-review\";\nexport const PROPOSAL_SUMMARY_STATUS_ABANDONED = \"abandoned\";\nexport const PROPOSAL_SUMMARY_STATUS_CENSORED = \"censored\";\nexport const PROPOSAL_SUMMARY_STATUS_VOTE_AUTHORIZED = \"vote-authorized\";\nexport const PROPOSAL_SUMMARY_STATUS_VOTE_STARTED = \"vote-started\";\nexport const PROPOSAL_SUMMARY_STATUS_REJECTED = \"rejected\";\nexport const PROPOSAL_SUMMARY_STATUS_ACTIVE = \"active\";\nexport const PROPOSAL_SUMMARY_STATUS_COMPLETED = \"completed\";\nexport const PROPOSAL_SUMMARY_STATUS_APPROVED = \"approved\";\nexport const PROPOSAL_SUMMARY_STATUS_CLOSED = \"closed\";\n\nexport const PROPOSAL_STATE_UNVETTED = 1;\nexport const PROPOSAL_STATE_VETTED = 2;\n\nexport const PROPOSAL_TYPE_REGULAR = 1;\nexport const PROPOSAL_TYPE_RFP = 2;\nexport const PROPOSAL_TYPE_RFP_SUBMISSION = 3;\n\nexport const PROPOSAL_BILLING_STATUS_ACTIVE = 1;\nexport const PROPOSAL_BILLING_STATUS_CLOSED = 2;\nexport const PROPOSAL_BILLING_STATUS_COMPLETED = 3;\n\nexport const VOTE_TYPE_STANDARD = 1;\nexport const VOTE_TYPE_RUNOFF = 2;\n\nexport const PROPOSAL_USER_FILTER_SUBMITTED = 1;\nexport const PROPOSAL_USER_FILTER_DRAFT_PROPOSALS = 2;\n\nexport const PROPOSAL_METADATA_FILENAME = \"proposalmetadata.json\";\nexport const VOTE_METADATA_FILENAME = \"votemetadata.json\";\nexport const PROPOSAL_UPDATE_HINT = \"proposalupdate\";\n\nexport const PROPOSAL_AMOUNT_UNIT = \"$\";\n\nexport const PROPOSAL_MAIN_THREAD_KEY = \"main\";\n\nexport const USER_METADATA_PLUGIN = \"usermd\";\n\nexport const PAYWALL_STATUS_WAITING = 0;\nexport const PAYWALL_STATUS_LACKING_CONFIRMATIONS = 1;\nexport const PAYWALL_STATUS_PAID = 2;\n\nexport const CMS_PAYWALL_STATUS = 2;\nexport const CONFIRMATIONS_REQUIRED = 2;\n\nexport const PUB_KEY_STATUS_LOADING = 0;\nexport const PUB_KEY_STATUS_LOADED = 1;\n\nexport const PROPOSAL_VOTING_NOT_AUTHORIZED = 1;\nexport const PROPOSAL_VOTING_AUTHORIZED = 2;\nexport const PROPOSAL_VOTING_ACTIVE = 3;\nexport const PROPOSAL_VOTING_FINISHED = 4;\nexport const PROPOSAL_VOTING_APPROVED = 5;\nexport const PROPOSAL_VOTING_REJECTED = 6;\nexport const PROPOSAL_VOTING_INELIGIBLE = 7;\nexport const PROPOSAL_APPROVED = 8;\n\nexport const PROPOSAL_COMMENT_UPVOTE = 1;\nexport const PROPOSAL_COMMENT_DOWNVOTE = -1;\n\n// Proposals presentational statuses returned by the 'voteinv' &\n// 'proposalinv' endpoints from the API.\nexport const UNREVIEWED = \"unreviewed\";\nexport const VETTEDCENSORED = \"vettedcensored\";\nexport const UNVETTEDCENSORED = \"unvettedcensored\";\nexport const ABANDONED = \"abandoned\";\nexport const PRE_VOTE = \"pre\";\nexport const ACTIVE_VOTE = \"started\";\nexport const APPROVED = \"approved\";\nexport const AUTHORIZED = \"authorized\";\nexport const UNAUTHORIZED = \"unauthorized\";\nexport const REJECTED = \"rejected\";\nexport const INELIGIBLE = \"ineligible\";\nexport const ARCHIVED = \"archived\";\nexport const PUBLIC = \"public\";\nexport const CENSORED = \"censored\";\nexport const VETTED = \"vetted\";\nexport const UNVETTED = \"unvetted\";\n\nexport const USER_DETAIL_TAB_GENERAL = 0;\nexport const USER_DETAIL_TAB_PREFERENCES = 1;\nexport const USER_DETAIL_TAB_PROPOSALS = 2;\nexport const USER_DETAIL_TAB_COMMENTS = 3;\nexport const USER_DETAIL_TAB_INVOICES = 4;\nexport const USER_DETAIL_TAB_MANAGE_USER = 5;\n\nexport const MANAGE_USER_EXPIRE_NEW_USER_VERIFICATION = 1;\nexport const MANAGE_USER_EXPIRE_UPDATE_KEY_VERIFICATION = 2;\nexport const MANAGE_USER_EXPIRE_RESET_PASSWORD_VERIFICATION = 3;\nexport const MANAGE_USER_CLEAR_USER_PAYWALL = 4;\nexport const MANAGE_USER_UNLOCK = 5;\nexport const MANAGE_USER_DEACTIVATE = 6;\nexport const MANAGE_USER_REACTIVATE = 7;\nexport const LIST_HEADER_VETTED = \"Proposals\";\nexport const LIST_HEADER_ADMIN = \"Admin Proposals\";\nexport const LIST_HEADER_USER = \"Your Proposals\";\nexport const SORT_BY_OLD = \"OLD\";\nexport const SORT_BY_NEW = \"NEW\";\nexport const SORT_BY_TOP = \"TOP\";\n\nexport const DEFAULT_TAB_TITLE = \"Politeia\";\n\nexport const NOTIFICATION_EMAIL_MY_PROPOSAL_STATUS_CHANGE = 1 << 0;\nexport const NOTIFICATION_EMAIL_MY_PROPOSAL_VOTE_STARTED = 1 << 1;\nexport const NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VETTED = 1 << 2;\nexport const NOTIFICATION_EMAIL_REGULAR_PROPOSAL_EDITED = 1 << 3;\nexport const NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VOTE_STARTED = 1 << 4;\nexport const NOTIFICATION_EMAIL_ADMIN_PROPOSAL_NEW = 1 << 5;\nexport const NOTIFICATION_EMAIL_ADMIN_PROPOSAL_VOTE_AUTHORIZED = 1 << 6;\nexport const NOTIFICATION_EMAIL_COMMENT_ON_MY_PROPOSAL = 1 << 7;\nexport const NOTIFICATION_EMAIL_COMMENT_ON_MY_COMMENT = 1 << 8;\n\n// Identity\nexport const STORAGE_PREFIX = \"ed255191~\";\nexport const IDENTITY_ERROR =\n  \"User identity not found. You need to restore it from a backup or generate a new one.\";\n// Import key errors\nexport const PUBLIC_KEY_MISMATCH =\n  \"The provided public key doesn't match the key stored in the server.\";\nexport const INVALID_KEY_PAIR = \"The provided key pair is not valid.\";\nexport const INVALID_FILE =\n  \"This is not a valid identity file. The identity has to be a JSON file containing the publicKey and the secretKey values.\";\nexport const LOAD_KEY_FAILED =\n  \"Sorry, something went wrong while importing the identity file, please try again. If the error persists, contact the Politeia support.\";\n\n//Links\nexport const PI_DOCS = \"https://docs.decred.org/governance/politeia/politeia/\";\nexport const PROPOSAL_GUIDELINES =\n  \"https://docs.decred.org/governance/politeia/proposal-guidelines/\";\n\nexport const INVOICE_STATUS_INVALID = 0; // Invalid status XXX?\nexport const INVOICE_STATUS_NOTFOUND = 1; // Invoice not found XXX?\n\nexport const INVOICE_STATUS_NEW = 2; // Invoice has not been reviewed\nexport const INVOICE_STATUS_UPDATED = 3; // Invoice has unreviewed changes\nexport const INVOICE_STATUS_DISPUTED = 4; // Invoice has been disputed for some reason\nexport const INVOICE_STATUS_REJECTED = 5; // Invoice needs to be revised\nexport const INVOICE_STATUS_APPROVED = 6; // Invoice has been approved\nexport const INVOICE_STATUS_PAID = 7; // Invoice has been paid\n\nexport const INVOICE_FILTER_ALL = 99;\nexport const PROPOSAL_USER_FILTER_DRAFT_INVOICES = 100;\n\nexport const CMS_LIST_HEADER_ADMIN = \"Admin Invoices\";\nexport const CMS_LIST_HEADER_USER = \"Your Invoices\";\n\nexport const CMS_DEFAULT_TAB_TITLE = \"Contractor Management System\";\n\nexport const FILTER_ALL_MONTHS = 0;\n\nexport const BLOCK_DURATION_TESTNET = 2;\nexport const BLOCK_DURATION_MAINNET = 5;\n\nexport const CMS_USER_TYPES = [\n  \"No type defined\",\n  \"Direct\",\n  \"Supervisor\",\n  \"Sub Contractor\",\n  \"Nominee\",\n  \"Revoked\"\n];\n\nexport const NOJS_ROUTE_PREFIX = \"/nojavascript\";\n\nexport const MONTHS_LABELS = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"Jun\",\n  \"Jul\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\"\n];\n\nexport const INVALID_DATE_LABEL = \"Invalid date\";\n\nexport const TOTP_CODE_LENGTH = 6;\nexport const TOTP_DEFAULT_TYPE = 1;\nexport const TOTP_MISSING_LOGIN_ERROR = 79;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../layouts.module.css\";\nimport { classNames } from \"pi-ui\";\n\nexport const Row = ({\n  children,\n  topMarginSize,\n  justify,\n  align,\n  noMargin,\n  className,\n  hide,\n  wrap,\n  onClick\n}) =>\n  !hide && (\n    <div\n      className={classNames(\n        !noMargin && `margin-top-${topMarginSize}`,\n        `justify-${justify}`,\n        `align-${align}`,\n        wrap && styles.wrap,\n        className\n      )}\n      onClick={onClick}\n    >\n      {children}\n    </div>\n  );\n\nRow.propTypes = {\n  children: PropTypes.node,\n  topMarginSize: PropTypes.oneOf([\"s\", \"m\", \"l\"]),\n  justify: PropTypes.oneOf([\"left\", \"right\", \"space-between\", \"center\"]),\n  align: PropTypes.oneOf([\"start\", \"end\", \"center\", \"stretch\"]),\n  hide: PropTypes.bool,\n  noMargin: PropTypes.bool,\n  wrap: PropTypes.bool,\n  onClick: PropTypes.func\n};\n\nRow.defaultProps = {\n  topMarginSize: \"m\",\n  justify: \"left\",\n  align: \"stretch\",\n  wrap: false,\n  hide: false,\n  noMargin: false\n};\n\nexport default Row;\n","import React, { useEffect, useState } from \"react\";\nimport { Button, Icon, Modal, Text, useTheme, getThemeProperty } from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport { useCrash, useModalContext } from \"src/hooks\";\nimport { isIdentityError } from \"src/utils\";\n\nconst ModalConfirm = ({\n  show,\n  onClose,\n  onSubmit,\n  title,\n  message,\n  successTitle,\n  successMessage,\n  onCloseSuccess\n}) => {\n  const [, handleCloseModal] = useModalContext();\n  const crash = useCrash();\n  const [success, setSuccess] = useState(false);\n\n  const { theme } = useTheme();\n  const successIconBgColor = getThemeProperty(\n    theme,\n    \"success-icon-background-color\"\n  );\n  const iconCheckmarkColor = getThemeProperty(\n    theme,\n    \"success-icon-checkmark-color\"\n  );\n\n  const onSubmitForm = async (\n    _,\n    { resetForm, setFieldError, setSubmitting }\n  ) => {\n    try {\n      await onSubmit();\n      resetForm();\n      setSuccess(true);\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n      if (isIdentityError(e)) {\n        crash(e);\n        handleCloseModal();\n      }\n    }\n  };\n  useEffect(\n    function clearOnClose() {\n      if (!show) {\n        setTimeout(() => setSuccess(false), 500);\n      }\n    },\n    [show]\n  );\n\n  return (\n    <Modal\n      style={{ width: \"600px\" }}\n      title={(success && successTitle) || title}\n      show={show}\n      onClose={success && onCloseSuccess ? onCloseSuccess : onClose}\n      iconComponent={\n        !success ? (\n          <Icon type=\"info\" size={26} />\n        ) : (\n          <Icon\n            type=\"checkmark\"\n            iconColor={iconCheckmarkColor}\n            backgroundColor={successIconBgColor}\n            size={26}\n          />\n        )\n      }\n    >\n      {!success && (\n        <FormWrapper initialValues={{}} onSubmit={onSubmitForm}>\n          {({\n            Form,\n            Actions,\n            ErrorMessage,\n            handleSubmit,\n            errors,\n            isSubmitting\n          }) => (\n            <Form onSubmit={handleSubmit}>\n              {errors && errors.global && (\n                <ErrorMessage data-testid=\"modal-confirm-error\">\n                  {errors.global.toString()}\n                </ErrorMessage>\n              )}\n              <Text>{message}</Text>\n              <Actions className=\"no-padding-bottom\">\n                <Button\n                  loading={isSubmitting}\n                  type=\"submit\"\n                  data-testid=\"modal-confirm-button\"\n                >\n                  Confirm\n                </Button>\n              </Actions>\n            </Form>\n          )}\n        </FormWrapper>\n      )}\n      {success && (\n        <>\n          {successMessage}\n          <div className=\"justify-right margin-top-m\">\n            <Button\n              onClick={onCloseSuccess || onClose}\n              data-testid=\"modal-confirm-success-msg\"\n            >\n              Ok\n            </Button>\n          </div>\n        </>\n      )}\n    </Modal>\n  );\n};\n\nModalConfirm.propTypes = {\n  title: PropTypes.string,\n  message: PropTypes.node,\n  show: PropTypes.bool,\n  onClose: PropTypes.func,\n  onCloseSuccess: PropTypes.func,\n  onSubmit: PropTypes.func,\n  successTitle: PropTypes.string,\n  successMessage: PropTypes.node\n};\n\nModalConfirm.defaultProps = {\n  title: \"Confirm Action\",\n  message: \"Are you sure?\"\n};\n\nexport default React.memo(ModalConfirm);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Credits_block__3BOUe\",\"blockDetails\":\"Credits_blockDetails__TYhgI\",\"descriptionParagraph\":\"Credits_descriptionParagraph__pQDVO\",\"darkDescriptionParagraph\":\"Credits_darkDescriptionParagraph__23NrY\",\"title\":\"Credits_title__3M6BW\",\"status\":\"Credits_status__-jFqS\",\"darkTitle\":\"Credits_darkTitle__1W7vM\",\"spinnerWrapper\":\"Credits_spinnerWrapper__11pos\",\"buttonsWrapper\":\"Credits_buttonsWrapper__1Rpsp\"};","import { useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport { useSelector } from \"src/redux\";\nimport { useConfig } from \"src/containers/Config\";\n\nfunction usePaywall(userID) {\n  const currentUserID = useSelector(sel.currentUserID);\n  const uuid = userID || currentUserID;\n  const currentUserEmail = useSelector(sel.currentUserEmail);\n  const paywallAddress = useSelector(sel.currentUserPaywallAddress);\n  const paywallAmount = useSelector(sel.currentUserPaywallAmount);\n  const paywallTxNotBefore = useSelector(sel.currentUserPaywallTxNotBefore);\n  const paywallTxId = useSelector(sel.currentUserPaywallTxid);\n  const userIsPaidSelector = useMemo(() => sel.makeGetUserIsPaid(uuid), [uuid]);\n  const userPaywallStatusSelector = useMemo(\n    () => sel.makeGetUserPaywallStatus(uuid),\n    [uuid]\n  );\n  const userIsPaid = useSelector(userIsPaidSelector);\n  const userPaywallStatus = useSelector(userPaywallStatusSelector);\n\n  const { enablePaywall, enableCredits } = useConfig();\n\n  return {\n    currentUserEmail,\n    paywallAddress,\n    paywallAmount,\n    paywallTxId,\n    paywallTxNotBefore,\n    userPaywallStatus,\n    isPaid: userIsPaid,\n    paywallEnabled: enablePaywall,\n    creditsEnabled: enableCredits\n  };\n}\n\nexport default usePaywall;\n","import * as act from \"../actions/types\";\n\nexport const DEFAULT_STATE = {\n  init: {},\n  policy: {},\n  keyMismatch: false,\n  draftProposals: null,\n  draftInvoices: null,\n  draftDccs: null,\n  csrfIsNeeded: null,\n  shouldVerifyKey: false,\n  identityImportResult: { errorMsg: \"\", successMsg: \"\" },\n  pollingCreditsPayment: false,\n  reachedCreditsPaymentPollingLimit: false,\n  proposalPaymentReceived: false\n};\n\nconst app = (state = DEFAULT_STATE, action) =>\n  ((\n    {\n      [act.RECEIVE_INIT_SESSION]: () =>\n        action.error\n          ? state\n          : {\n              ...state,\n              init: action.payload\n            },\n      [act.RECEIVE_POLICY]: () =>\n        action.error\n          ? state\n          : {\n              ...state,\n              policy: action.payload\n            },\n      [act.KEY_MISMATCH]: () => ({\n        ...state,\n        keyMismatch: action.payload\n      }),\n      [act.SAVE_DRAFT_PROPOSAL]: () => {\n        const newDraftProposals = state.draftProposals;\n        const draftId = action.payload.id;\n        return {\n          ...state,\n          draftProposals: {\n            ...newDraftProposals,\n            newDraft: true,\n            lastSubmitted: action.payload.name,\n            [draftId]: {\n              ...action.payload,\n              draftId\n            }\n          }\n        };\n      },\n      [act.DELETE_DRAFT_PROPOSAL]: () => {\n        const draftId = action.payload;\n        if (!state.draftProposals[draftId]) {\n          return state;\n        }\n        const newDraftProposals = state.draftProposals;\n        delete newDraftProposals[draftId];\n        return { ...state, draftProposals: newDraftProposals };\n      },\n      [act.LOAD_DRAFT_PROPOSALS]: () => ({\n        ...state,\n        draftProposals: action.payload\n      }),\n\n      [act.SAVE_DRAFT_INVOICE]: () => {\n        const newDraftInvoices = state.draftInvoices;\n        const draftId = action.payload.id;\n        return {\n          ...state,\n          draftInvoices: {\n            ...newDraftInvoices,\n            newDraft: true,\n            lastSubmitted: action.payload.name,\n            [draftId]: {\n              ...action.payload,\n              draftId\n            }\n          }\n        };\n      },\n      [act.DELETE_DRAFT_INVOICE]: () => {\n        const draftId = action.payload;\n        if (!state.draftInvoices[draftId]) {\n          return state;\n        }\n        const newDraftInvoices = state.draftInvoices;\n        delete newDraftInvoices[draftId];\n        return { ...state, draftInvoices: newDraftInvoices };\n      },\n      [act.LOAD_DRAFT_INVOICES]: () => ({\n        ...state,\n        draftInvoices: action.payload\n      }),\n      [act.SAVE_DRAFT_DCC]: () => {\n        const newDraftDccs = state.draftDccs;\n        const draftId = action.payload.id;\n        return {\n          ...state,\n          draftDccs: {\n            ...newDraftDccs,\n            newDraft: true,\n            lastSubmitted: draftId,\n            [draftId]: {\n              ...action.payload,\n              draftId\n            }\n          }\n        };\n      },\n      [act.DELETE_DRAFT_DCC]: () => {\n        const draftId = action.payload;\n        if (!state.draftDccs[draftId]) {\n          return state;\n        }\n        const newDraftDccs = state.draftDccs;\n        delete newDraftDccs[draftId];\n        return { ...state, draftDccs: newDraftDccs };\n      },\n      [act.LOAD_DRAFT_DCCS]: () => ({\n        ...state,\n        draftDccs: action.payload\n      }),\n      [act.CSRF_NEEDED]: () => ({\n        ...state,\n        init: { ...state.init, csrfToken: null }\n      }),\n      [act.SHOULD_AUTO_VERIFY_KEY]: () => ({\n        ...state,\n        shouldVerifyKey: action.payload\n      }),\n      [act.IDENTITY_IMPORTED]: () => ({\n        ...state,\n        identityImportResult: action.payload\n      }),\n      [act.TOGGLE_CREDITS_PAYMENT_POLLING]: () => ({\n        ...state,\n        pollingCreditsPayment: action.payload\n      }),\n      [act.TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT]: () => ({\n        ...state,\n        reachedCreditsPaymentPollingLimit: action.payload\n      }),\n      [act.TOGGLE_PROPOSAL_PAYMENT_RECEIVED]: () => ({\n        ...state,\n        proposalPaymentReceived: action.payload\n      }),\n      [act.RECEIVE_LOGOUT]: () => ({\n        ...DEFAULT_STATE,\n        policy: state.policy\n      }),\n      [act.RECEIVE_CMS_LOGOUT]: () => ({\n        ...DEFAULT_STATE,\n        policy: state.policy\n      })\n    }[action.type] || (() => state)\n  )());\n\nexport default app;\n","export const DEFAULT_REQUEST_STATE = {\n  isRequesting: false,\n  error: null\n};\n\nexport const request = (key, state, { payload, error }) =>\n  payload\n    ? {\n        ...state,\n        [key]: {\n          ...state[key],\n          payload: error ? null : payload,\n          isRequesting: error ? false : true,\n          error: error ? payload : null\n        }\n      }\n    : {\n        ...state,\n        [key]: {\n          ...state[key],\n          isRequesting: error ? false : true,\n          error: error ? payload : null\n        }\n      };\n\nexport const receive = (key, state, { payload, error } = {}, keepError) => ({\n  ...state,\n  [key]: {\n    ...state[key],\n    payload: error ? null : payload,\n    isRequesting: false,\n    error: error ? payload : keepError ? state[key].error : null\n  }\n});\n\nexport const reset = (key, state) => ({\n  ...state,\n  [key]: DEFAULT_REQUEST_STATE\n});\n\nexport const resetMultiple = (keys, state) =>\n  keys.reduce((acc, key) => ({ ...acc, [key]: DEFAULT_REQUEST_STATE }), state);\n","import { request } from \"./util\";\n\nexport const onRequestLikeComment = (state, action) => {\n  state = request(\"likeComment\", state, action);\n  const id = action.payload.commentid;\n  return {\n    ...state,\n    likeComment: {\n      ...state.likeComment,\n      isRequesting: {\n        [id]: true\n      }\n    }\n  };\n};\n","import * as act from \"../actions/types\";\nimport { DEFAULT_REQUEST_STATE, receive, request, reset } from \"./util\";\nimport { onRequestLikeComment } from \"./handlers\";\nimport compose from \"lodash/fp/compose\";\n\nexport const DEFAULT_STATE = {\n  me: DEFAULT_REQUEST_STATE,\n  init: DEFAULT_REQUEST_STATE,\n  policy: DEFAULT_REQUEST_STATE,\n  newUser: DEFAULT_REQUEST_STATE,\n  verifyNewUser: DEFAULT_REQUEST_STATE,\n  user: DEFAULT_REQUEST_STATE,\n  login: DEFAULT_REQUEST_STATE,\n  logout: DEFAULT_REQUEST_STATE,\n  changeUsername: DEFAULT_REQUEST_STATE,\n  changePassword: DEFAULT_REQUEST_STATE,\n  userProposals: DEFAULT_REQUEST_STATE,\n  userInventory: DEFAULT_REQUEST_STATE,\n  tokenInventory: DEFAULT_REQUEST_STATE,\n  proposalsBatch: DEFAULT_REQUEST_STATE,\n  proposal: DEFAULT_REQUEST_STATE,\n  proposalComments: DEFAULT_REQUEST_STATE,\n  likeComment: DEFAULT_REQUEST_STATE,\n  censorComment: DEFAULT_REQUEST_STATE,\n  commentslikes: DEFAULT_REQUEST_STATE,\n  editUser: DEFAULT_REQUEST_STATE,\n  codestats: DEFAULT_REQUEST_STATE,\n  manageUser: DEFAULT_REQUEST_STATE,\n  userSearch: DEFAULT_REQUEST_STATE,\n  newProposal: DEFAULT_REQUEST_STATE,\n  editProposal: DEFAULT_REQUEST_STATE,\n  newComment: DEFAULT_REQUEST_STATE,\n  proposalPaywallDetails: DEFAULT_REQUEST_STATE,\n  proposalOwnerBilling: DEFAULT_REQUEST_STATE,\n  userProposalCredits: DEFAULT_REQUEST_STATE,\n  resetPassword: DEFAULT_REQUEST_STATE,\n  verifyResetPassword: DEFAULT_REQUEST_STATE,\n  resendVerificationEmail: DEFAULT_REQUEST_STATE,\n  setStatusProposal: DEFAULT_REQUEST_STATE,\n  startVote: DEFAULT_REQUEST_STATE,\n  updateUserKey: DEFAULT_REQUEST_STATE,\n  verifyUserKey: DEFAULT_REQUEST_STATE,\n  proposalsVoteSummary: DEFAULT_REQUEST_STATE,\n  proposalVoteResults: DEFAULT_REQUEST_STATE,\n  authorizeVote: DEFAULT_REQUEST_STATE,\n  proposalPaywallPayment: DEFAULT_REQUEST_STATE,\n  rescanUserPayments: DEFAULT_REQUEST_STATE,\n  payouts: DEFAULT_REQUEST_STATE,\n  invoicePayouts: DEFAULT_REQUEST_STATE,\n  payApproved: DEFAULT_REQUEST_STATE,\n  spendingSummary: DEFAULT_REQUEST_STATE,\n  inviteUser: DEFAULT_REQUEST_STATE,\n  newInvoice: DEFAULT_REQUEST_STATE,\n  userInvoices: DEFAULT_REQUEST_STATE,\n  adminInvoices: DEFAULT_REQUEST_STATE,\n  invoice: DEFAULT_REQUEST_STATE,\n  invoiceComments: DEFAULT_REQUEST_STATE,\n  setStatusInvoice: DEFAULT_REQUEST_STATE,\n  editInvoice: DEFAULT_REQUEST_STATE,\n  exchangeRate: DEFAULT_REQUEST_STATE,\n  manageCmsUser: DEFAULT_REQUEST_STATE,\n  userSubcontractors: DEFAULT_REQUEST_STATE,\n  newDcc: DEFAULT_REQUEST_STATE,\n  dccs: DEFAULT_REQUEST_STATE,\n  dcc: DEFAULT_REQUEST_STATE,\n  supportOpposeDCC: DEFAULT_REQUEST_STATE,\n  setDCCStatus: DEFAULT_REQUEST_STATE,\n  setTotp: DEFAULT_REQUEST_STATE,\n  verifyTotp: DEFAULT_REQUEST_STATE\n};\n\nconst api = (state = DEFAULT_STATE, action) =>\n  ((\n    {\n      [act.REQUEST_ME]: () => request(\"me\", state, action),\n      [act.RECEIVE_ME]: () => receive(\"me\", state, action),\n      [act.REQUEST_INIT_SESSION]: () => request(\"init\", state, action),\n      [act.RECEIVE_INIT_SESSION]: () => receive(\"init\", state, action),\n      [act.REQUEST_POLICY]: () => request(\"policy\", state, action),\n      [act.RECEIVE_POLICY]: () => receive(\"policy\", state, action),\n      [act.REQUEST_NEW_USER]: () => request(\"newUser\", state, action),\n      [act.RECEIVE_NEW_USER]: () => receive(\"newUser\", state, action),\n      [act.RESET_NEW_USER]: () => reset(\"newUser\", state),\n      [act.REQUEST_VERIFY_NEW_USER]: () =>\n        request(\"verifyNewUser\", state, action),\n      [act.RECEIVE_VERIFY_NEW_USER]: () =>\n        receive(\"verifyNewUser\", state, action),\n      [act.REQUEST_USER]: () => request(\"user\", state, action),\n      [act.RECEIVE_USER]: () => receive(\"user\", state, action),\n      [act.REQUEST_LOGIN]: () => request(\"login\", state, action),\n      [act.RECEIVE_LOGIN]: () => receive(\"login\", state, action),\n      [act.REQUEST_LOGOUT]: () => request(\"logout\", state, action),\n      [act.RECEIVE_LOGOUT]: () => receive(\"logout\", state, action),\n      [act.REQUEST_CHANGE_USERNAME]: () =>\n        request(\"changeUsername\", state, action),\n      [act.RECEIVE_CHANGE_USERNAME]: () =>\n        receive(\"changeUsername\", state, action),\n      [act.REQUEST_CHANGE_PASSWORD]: () =>\n        request(\"changePassword\", state, action),\n      [act.RECEIVE_CHANGE_PASSWORD]: () =>\n        receive(\"changePassword\", state, action),\n      [act.REQUEST_USER_INVENTORY]: () =>\n        request(\"userInventory\", state, action),\n      [act.RECEIVE_USER_INVENTORY]: () => receive(\"userInventory\", state),\n      [act.REQUEST_TOKEN_INVENTORY]: () =>\n        request(\"tokenInventory\", state, action),\n      [act.RECEIVE_VOTES_INVENTORY]: () =>\n        receive(\"tokenInventory\", state, action),\n      [act.REQUEST_PROPOSALS_BATCH]: () =>\n        request(\"proposalsBatch\", state, action),\n      [act.RECEIVE_PROPOSALS_BATCH]: () => receive(\"proposalsBatch\", state),\n      [act.REQUEST_PROPOSAL]: () => request(\"proposal\", state, action),\n      [act.RECEIVE_PROPOSAL]: () => receive(\"proposal\", state, action),\n      [act.REQUEST_CODE_STATS]: () => request(\"codestats\", state, action),\n      [act.RECEIVE_CODE_STATS]: () => receive(\"codestats\", state, action),\n      [act.REQUEST_PROPOSAL_BILLING]: () =>\n        request(\"proposalOwnerBilling\", state, action),\n      [act.RECEIVE_PROPOSAL_BILLING]: () =>\n        receive(\"proposalOwnerBilling\", state, action),\n      [act.REQUEST_RECORD_COMMENTS]: compose(\n        // clean likeComment errors\n        (newState) => receive(\"likeComment\", newState, { payload: {} }),\n        () => request(\"proposalComments\", state, action)\n      ),\n      [act.RECEIVE_RECORD_COMMENTS]: () =>\n        receive(\"proposalComments\", state, action),\n      [act.REQUEST_LIKE_COMMENT]: () => onRequestLikeComment(state, action),\n      [act.RECEIVE_LIKE_COMMENT]: () =>\n        receive(\"likeComment\", state, action, true),\n      [act.RECEIVE_LIKE_COMMENT_SUCCESS]: () =>\n        receive(\"likeComment\", state, action),\n      [act.REQUEST_CENSOR_COMMENT]: () =>\n        request(\"censorComment\", state, action),\n      [act.RECEIVE_CENSOR_COMMENT]: () => receive(\"censorComment\", state),\n      [act.REQUEST_LIKED_COMMENTS]: () =>\n        request(\"commentslikes\", state, action),\n      [act.RECEIVE_LIKED_COMMENTS]: () =>\n        receive(\"commentslikes\", state, action),\n      [act.REQUEST_EDIT_USER]: () => request(\"editUser\", state, action),\n      [act.RECEIVE_EDIT_USER]: () => receive(\"editUser\", state, action),\n      [act.REQUEST_MANAGE_USER]: () => request(\"manageUser\", state, action),\n      [act.RECEIVE_MANAGE_USER]: () => receive(\"manageUser\", state),\n      [act.REQUEST_USER_SEARCH]: () => request(\"userSearch\", state, action),\n      [act.RECEIVE_USER_SEARCH]: () => receive(\"userSearch\", state, action),\n      [act.REQUEST_NEW_PROPOSAL]: () => request(\"newProposal\", state, action),\n      [act.RECEIVE_NEW_PROPOSAL]: () => receive(\"newProposal\", state, action),\n      [act.REQUEST_EDIT_PROPOSAL]: () => request(\"editProposal\", state, action),\n      [act.RECEIVE_EDIT_PROPOSAL]: () => receive(\"editProposal\", state, action),\n      [act.REQUEST_NEW_COMMENT]: () => request(\"newComment\", state, action),\n      [act.RECEIVE_NEW_COMMENT]: () => receive(\"newComment\", state),\n      [act.REQUEST_EDIT_COMMENT]: () => request(\"editComment\", state, action),\n      [act.RECEIVE_EDIT_COMMENT]: () => receive(\"editComment\", state),\n      [act.REQUEST_PROPOSAL_PAYWALL_DETAILS]: () =>\n        request(\"proposalPaywallDetails\", state, action),\n      [act.RECEIVE_PROPOSAL_PAYWALL_DETAILS]: () =>\n        receive(\"proposalPaywallDetails\", state, action),\n      [act.REQUEST_USER_PROPOSAL_CREDITS]: () =>\n        request(\"userProposalCredits\", state, action),\n      [act.RECEIVE_USER_PROPOSAL_CREDITS]: () =>\n        receive(\"userProposalCredits\", state, action),\n      [act.REQUEST_RESET_PASSWORD]: () =>\n        request(\"resetPassword\", state, action),\n      [act.RECEIVE_RESET_PASSWORD]: () =>\n        receive(\"resetPassword\", state, action),\n      [act.REQUEST_VERIFY_RESET_PASSWORD]: () =>\n        request(\"verifyResetPassword\", state, action),\n      [act.RECEIVE_VERIFY_RESET_PASSWORD]: () =>\n        receive(\"verifyResetPassword\", state, action),\n      [act.REQUEST_RESEND_VERIFICATION_EMAIL]: () =>\n        request(\"resendVerificationEmail\", state, action),\n      [act.RECEIVE_RESEND_VERIFICATION_EMAIL]: () =>\n        receive(\"resendVerificationEmail\", state, action),\n      [act.RESET_RESEND_VERIFICATION_EMAIL]: () =>\n        reset(\"resendVerificationEmail\", state),\n      [act.REQUEST_SETSTATUS_PROPOSAL]: () =>\n        request(\"setStatusProposal\", state, action),\n      [act.RECEIVE_SETSTATUS_PROPOSAL]: () =>\n        receive(\"setStatusProposal\", state),\n      [act.REQUEST_SET_BILLING_STATUS]: () =>\n        request(\"setBillingStatus\", state, action),\n      [act.RECEIVE_SET_BILLING_STATUS]: () =>\n        receive(\"setBillingStatus\", state),\n      [act.REQUEST_BILLING_STATUS_CHANGES]: () =>\n        request(\"billingStatusChanges\", state, action),\n      [act.RECEIVE_BILLING_STATUS_CHANGES]: () =>\n        receive(\"billingStatusChanges\", state),\n      [act.REQUEST_START_VOTE]: () => request(\"startVote\", state, action),\n      [act.RECEIVE_START_VOTE]: () => receive(\"startVote\", state),\n      [act.RECEIVE_START_RUNOFF_VOTE]: () => receive(\"startRunoffVote\", state),\n      [act.REQUEST_START_RUNOFF_VOTE]: () =>\n        request(\"startRunoffVote\", state, action),\n      [act.REQUEST_UPDATED_KEY]: () => request(\"updateUserKey\", state, action),\n      [act.RECEIVE_UPDATED_KEY]: () => receive(\"updateUserKey\", state, action),\n      [act.REQUEST_VERIFIED_KEY]: () => request(\"verifyUserKey\", state, action),\n      [act.RECEIVE_VERIFIED_KEY]: () => receive(\"verifyUserKey\", state, action),\n      [act.REQUEST_PROPOSALS_VOTE_SUMMARY]: () =>\n        request(\"proposalsVoteSummary\", state, action),\n      [act.RECEIVE_PROPOSALS_VOTE_SUMMARY]: () =>\n        receive(\"proposalsVoteSummary\", state, {}),\n      [act.REQUEST_BATCH_PROPOSAL_SUMMARY]: () =>\n        request(\"batchProposalSummary\", state, action),\n      [act.RECEIVE_BATCH_PROPOSAL_SUMMARY]: () =>\n        receive(\"batchProposalSummary\", state, action),\n      [act.REQUEST_PROPOSAL_VOTE_RESULTS]: () =>\n        request(\"proposalVoteResults\", state, action),\n      [act.RECEIVE_PROPOSAL_VOTE_RESULTS]: () =>\n        receive(\"proposalVoteResults\", state, action),\n      [act.REQUEST_VOTES_DETAILS]: () => request(\"votesDetails\", state, action),\n      [act.RECEIVE_VOTES_DETAILS]: () => receive(\"votesDetails\", state, action),\n      [act.REQUEST_AUTHORIZE_VOTE]: () =>\n        request(\"authorizeVote\", state, action),\n      [act.RECEIVE_AUTHORIZE_VOTE]: () => receive(\"authorizeVote\", state, {}),\n      [act.REQUEST_REVOKE_AUTH_VOTE]: () =>\n        request(\"authorizeVote\", state, action),\n      [act.RECEIVE_REVOKE_AUTH_VOTE]: () => receive(\"authorizeVote\", state, {}),\n      [act.REQUEST_PROPOSAL_PAYWALL_PAYMENT]: () =>\n        request(\"proposalPaywallPayment\", state, action),\n      [act.RECEIVE_PROPOSAL_PAYWALL_PAYMENT]: () =>\n        receive(\"proposalPaywallPayment\", state, action),\n      [act.REQUEST_RESCAN_USER_PAYMENTS]: () =>\n        request(\"rescanUserPayments\", state, action),\n      [act.RECEIVE_RESCAN_USER_PAYMENTS]: () =>\n        receive(\"rescanUserPayments\", state, {}),\n      [act.RESET_RESCAN_USER_PAYMENTS]: () =>\n        reset(\"rescanUserPayments\", state, action),\n      [act.RESET_RESCAN_USER_PAYMENTS]: () =>\n        reset(\"rescanUserPayments\", state, action),\n      [act.REQUEST_SET_TOTP]: () => request(\"setTotp\", state, action),\n      [act.RECEIVE_SET_TOTP]: () => receive(\"setTotp\", state, action),\n      [act.REQUEST_VERIFY_TOTP]: () => request(\"verifyTotp\", state, action),\n      [act.RECEIVE_VERIFY_TOTP]: () => receive(\"verifyTotp\", state, action),\n      [act.REQUEST_VOTES_BUNDLE]: () => request(\"votesBundle\", state, action),\n      [act.RECEIVE_VOTES_BUNDLE]: () => receive(\"votesBundle\", state, action),\n      // == CMS START ==\n      [act.REQUEST_GENERATE_PAYOUTS]: () => request(\"payouts\", state, action),\n      [act.RECEIVE_GENERATE_PAYOUTS]: () => receive(\"payouts\", state, action),\n      [act.REQUEST_INVOICE_PAYOUTS]: () =>\n        request(\"invoicePayouts\", state, action),\n      [act.RECEIVE_INVOICE_PAYOUTS]: () =>\n        receive(\"invoicePayouts\", state, action),\n      [act.REQUEST_PAY_APPROVED]: () => request(\"payApproved\", state, action),\n      [act.RECEIVE_PAY_APPROVED]: () => receive(\"payApproved\", state, action),\n      [act.REQUEST_SPENDING_SUMMARY]: () =>\n        request(\"spendingSummary\", state, action),\n      [act.RECEIVE_SPENDING_SUMMARY]: () =>\n        receive(\"spendingSummary\", state, action),\n      [act.REQUEST_SPENDING_DETAILS]: () =>\n        request(\"spendingDetails\", state, action),\n      [act.RECEIVE_SPENDING_DETAILS]: () =>\n        receive(\"spendingDetails\", state, action),\n      [act.REQUEST_INVITE_USER]: () => request(\"inviteUser\", state, action),\n      [act.RECEIVE_INVITE_USER]: () => receive(\"inviteUser\", state, action),\n      [act.REQUEST_NEW_INVOICE]: () => request(\"newInvoice\", state, action),\n      [act.RECEIVE_NEW_INVOICE]: () => receive(\"newInvoice\", state, action),\n      [act.REQUEST_USER_INVOICES]: () => request(\"userInvoices\", state, action),\n      [act.RECEIVE_USER_INVOICES]: () => receive(\"userInvoices\", state, action),\n      [act.REQUEST_ADMIN_INVOICES]: () =>\n        request(\"adminInvoices\", state, action),\n      [act.RECEIVE_ADMIN_INVOICES]: () =>\n        receive(\"adminInvoices\", state, action),\n      [act.REQUEST_INVOICE]: () => request(\"invoice\", state, action),\n      [act.RECEIVE_INVOICE]: () => receive(\"invoice\", state, action),\n      [act.REQUEST_RECORD_COMMENTS]: compose(\n        // clean likeComment errors\n        (newState) => receive(\"likeComment\", newState, { payload: {} }),\n        () => request(\"invoiceComments\", state, action)\n      ),\n      [act.RECEIVE_RECORD_COMMENTS]: () =>\n        receive(\"invoiceComments\", state, action),\n      [act.REQUEST_SETSTATUS_INVOICE]: () =>\n        request(\"setStatusInvoice\", state, action),\n      [act.RECEIVE_SETSTATUS_INVOICE]: () =>\n        receive(\"setStatusInvoice\", state, action),\n      [act.REQUEST_EDIT_INVOICE]: () => request(\"editInvoice\", state, action),\n      [act.RECEIVE_EDIT_INVOICE]: () => receive(\"editInvoice\", state, action),\n      [act.REQUEST_EXCHANGE_RATE]: () => request(\"exchangeRate\", state, action),\n      [act.RECEIVE_EXCHANGE_RATE]: () => receive(\"exchangeRate\", state, action),\n      [act.REQUEST_MANAGE_CMS_USER]: () =>\n        request(\"manageCmsUser\", state, action),\n      [act.RECEIVE_MANAGE_CMS_USER]: () =>\n        receive(\"manageCmsUser\", state, action),\n      [act.REQUEST_USER_SUBCONTRACTORS]: () =>\n        request(\"userSubcontractors\", state, action),\n      [act.RECEIVE_USER_SUBCONTRACTORS]: () =>\n        receive(\"userSubcontractors\", state, action),\n      [act.REQUEST_NEW_DCC]: () => request(\"newDcc\", state, action),\n      [act.RECEIVE_NEW_DCC]: () => receive(\"newDcc\", state, action),\n      [act.REQUEST_DCCS]: () => request(\"dccs\", state, action),\n      [act.RECEIVE_DCCS]: () => receive(\"dccs\", state, action),\n      [act.REQUEST_DCC]: () => request(\"dcc\", state, action),\n      [act.RECEIVE_DCC]: () => receive(\"dcc\", state, action),\n      [act.REQUEST_SUPPORT_OPPOSE_DCC]: () =>\n        request(\"supportOpposeDCC\", state, action),\n      [act.RECEIVE_SUPPORT_OPPOSE_DCC]: () =>\n        receive(\"supportOpposeDCC\", state, action),\n      [act.REQUEST_SET_DCC_STATUS]: () =>\n        request(\"setDCCStatus\", state, action),\n      [act.RECEIVE_SET_DCC_STATUS]: () => receive(\"setDccStatus\", state, action)\n      // === CMS END ===\n    }[action.type] || (() => state)\n  )());\n\nexport default api;\n","import * as act from \"../actions/types\";\nimport { DEFAULT_REQUEST_STATE, receive, request, reset } from \"./util\";\n\nexport const DEFAULT_STATE = {\n  payWithFaucet: DEFAULT_REQUEST_STATE\n};\n\nconst external_api = (state = DEFAULT_STATE, action) =>\n  ((\n    {\n      [act.REQUEST_PAYWALL_PAYMENT_WITH_FAUCET]: () =>\n        request(\"payWithFaucet\", state, action),\n      [act.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET]: () =>\n        receive(\"payWithFaucet\", state, action),\n      [act.TOGGLE_PROPOSAL_PAYMENT_RECEIVED]: () =>\n        reset(\"payWithFaucet\", state),\n      [act.RECEIVE_LOGOUT]: () => DEFAULT_STATE\n    }[action.type] || (() => state)\n  )());\n\nexport default external_api;\n","import * as act from \"src/actions/types\";\nimport uniqWith from \"lodash/uniqWith\";\nimport reverse from \"lodash/reverse\";\nimport compose from \"lodash/fp/compose\";\nimport set from \"lodash/fp/set\";\nimport get from \"lodash/fp/get\";\nimport find from \"lodash/fp/find\";\nimport findIndex from \"lodash/fp/findIndex\";\nimport update from \"lodash/fp/update\";\nimport { shortRecordToken, calculateAuthorUpdateTree } from \"src/helpers\";\nimport {\n  PROPOSAL_STATUS_PUBLIC,\n  PROPOSAL_STATUS_UNREVIEWED,\n  PROPOSAL_MAIN_THREAD_KEY,\n  PROPOSAL_UPDATE_HINT,\n  PROPOSAL_STATE_UNVETTED\n} from \"src/constants\";\n\nconst DEFAULT_STATE = {\n  comments: { byToken: {}, accessTimeByToken: {}, backup: null },\n  commentsVotes: { byToken: {}, backup: null },\n  commentsLikes: { byToken: {}, backup: null }\n};\n\nconst olderVotesFirst = (a, b) => a.timestamp - b.timestamp;\n\nconst calcScoreByComment = (votes) => {\n  return votes.sort(olderVotesFirst).reduce((accObj, currentVote) => {\n    const id = currentVote.commentid;\n    if (!accObj[id] || accObj[id] !== currentVote.vote) {\n      // no vote found or old vote is different than new vote. Vote option\n      // is the chosen option.\n      return {\n        ...accObj,\n        [id]: currentVote.vote\n      };\n    } else {\n      // old vote is equals new vote. Set score to 0\n      return {\n        ...accObj,\n        [id]: 0\n      };\n    }\n  }, {});\n};\n\nconst calcVotes = (comment, oldVote, vote) => {\n  let newUpvotes = comment.upvotes;\n  let newDownvotes = comment.downvotes;\n  // if prev vote equals vote, reset the vote\n  if (oldVote === vote) {\n    if (vote > 0) {\n      // means upvote, reset upvotes and leave downvotes\n      newUpvotes--;\n    } else {\n      // means downvote, reset downvotes and leave upvotes\n      newDownvotes--;\n    }\n  } else if (oldVote !== 0) {\n    // if prev vote and vote are different and oldVote is different than 0, decrement prev vote and increment vote\n    if (vote > 0) {\n      // means upvote, inc upvote and dec downvote\n      newUpvotes++;\n      newDownvotes--;\n    } else {\n      // means downvote, dec upvote and inc downvote\n      newUpvotes--;\n      newDownvotes++;\n    }\n  } else if (vote > 0) {\n    // if oldVote is 0 (no option selected), just increment the vote option\n    newUpvotes++;\n  } else {\n    newDownvotes++;\n  }\n\n  return { newUpvotes, newDownvotes };\n};\n\nconst comments = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? action.type === act.RECEIVE_LIKE_COMMENT\n      ? /* if like comment action receives an error, restore data from backup */\n        (function restoreLikesFromBackup() {\n          const { token, commentid, oldVote } = get([\n            \"commentsLikes\",\n            \"backup\"\n          ])(state);\n          const oldCommentVotes = get([\"commentsVotes\", \"backup\"])(state);\n\n          return compose(\n            set([\"commentsLikes\", \"backup\"], null),\n            update([\"commentsLikes\", \"byToken\", token], (current) => ({\n              ...current,\n              [commentid]: oldVote\n            })),\n            update([\"commentsVotes\", \"byToken\", token], (current) => ({\n              ...current,\n              [commentid]: oldCommentVotes\n            }))\n          )(state);\n        })()\n      : state\n    : (\n        {\n          [act.RECEIVE_RECORD_COMMENTS]: () => {\n            const { token, comments, accesstime } = action.payload;\n            const shortToken = shortRecordToken(token);\n            // Filter duplicated comments by signature. The latest copy found\n            // will be kept.\n            const filteredComments = uniqWith(\n              reverse(comments),\n              (arrVal, othVal) =>\n                arrVal.signature && arrVal.signaure !== othVal.signaure\n            );\n\n            // Find author update ids.\n            const authorUpdateIds = filteredComments\n              .filter(\n                ({ extradatahint }) => extradatahint === PROPOSAL_UPDATE_HINT\n              )\n              .map(({ commentid }) => commentid);\n\n            const sectionIds = [...authorUpdateIds, PROPOSAL_MAIN_THREAD_KEY];\n\n            // Calculate comments tree for each author update to display each\n            // one of them in a separate comments section.\n            const commentsMap = {};\n            let authorUpdateThreads = [];\n            authorUpdateIds.forEach((updateId) => {\n              const authorUpdateTree = calculateAuthorUpdateTree(\n                updateId,\n                filteredComments\n              );\n              authorUpdateThreads = [\n                ...authorUpdateThreads,\n                ...authorUpdateTree\n              ];\n              commentsMap[updateId] = filteredComments.filter(({ commentid }) =>\n                authorUpdateTree.includes(commentid)\n              );\n            });\n            commentsMap[PROPOSAL_MAIN_THREAD_KEY] = filteredComments.filter(\n              ({ commentid }) => !authorUpdateThreads.includes(commentid)\n            );\n\n            return compose(\n              set([\"comments\", \"byToken\", shortToken], {\n                sectionIds,\n                comments: commentsMap\n              }),\n              set([\"comments\", \"accessTimeByToken\", shortToken], accesstime)\n            )(state);\n          },\n          [act.RECEIVE_NEW_COMMENT]: () => {\n            const { sectionId, ...comment } = action.payload;\n            const shortToken = shortRecordToken(comment.token);\n            // If comment's section id is not known then we are dealing\n            // with a new author update and the section id should be\n            // added to the section ids array.\n            const { sectionIds } = state.comments.byToken[shortToken];\n            const isNewSectionId = !sectionIds.includes(sectionId);\n            return compose(\n              update(\n                [\"comments\", \"byToken\", shortToken, \"comments\", sectionId],\n                (comments = []) => [comment, ...comments]\n              ),\n              isNewSectionId\n                ? set(\n                    [\"comments\", \"byToken\", shortToken, \"sectionIds\"],\n                    [sectionId, ...sectionIds]\n                  )\n                : (state) => state\n            )(state);\n          },\n          [act.RECEIVE_EDIT_COMMENT]: () => {\n            const { sectionId, commentid, ...comment } = action.payload;\n            const shortToken = shortRecordToken(comment.token);\n\n            // Find old comment index\n            const oldCommentIdx = compose(\n              findIndex((c) => c.commentid === commentid),\n              get([\"comments\", \"byToken\", shortToken, \"comments\", sectionId])\n            )(state);\n\n            // Overwrite old comment\n            return set(\n              [\n                \"comments\",\n                \"byToken\",\n                shortToken,\n                \"comments\",\n                sectionId,\n                oldCommentIdx\n              ],\n              {\n                commentid,\n                ...comment\n              }\n            )(state);\n          },\n          [act.RECEIVE_LIKED_COMMENTS]: () => {\n            const { token, votes } = action.payload;\n            const commentsUserVote = calcScoreByComment(votes);\n            return set(\n              [\"commentsLikes\", \"byToken\", shortRecordToken(token)],\n              commentsUserVote\n            )(state);\n          },\n          [act.REQUEST_LIKE_COMMENT]: () => {\n            const { token, vote, commentid, sectionId } = action.payload;\n            const shortToken = shortRecordToken(token);\n            const oldComment = compose(\n              find((c) => c.commentid === commentid),\n              get([\"comments\", \"byToken\", shortToken, \"comments\", sectionId])\n            )(state);\n            const commentsLikes = state.commentsLikes.byToken[shortToken];\n            const oldCommentsVotes = get([\n              \"commentsVotes\",\n              \"byToken\",\n              shortToken,\n              commentid\n            ])(state);\n            const oldVote = commentsLikes\n              ? commentsLikes[commentid]\n                ? commentsLikes[commentid]\n                : 0\n              : 0;\n            const newCommentsLikes = commentsLikes;\n\n            // calc new use option\n            if (oldVote === 0 || oldVote !== vote) {\n              newCommentsLikes[commentid] = vote;\n            } else {\n              newCommentsLikes[commentid] = 0;\n            }\n\n            const { newUpvotes, newDownvotes } = calcVotes(\n              oldCommentsVotes || oldComment,\n              oldVote,\n              vote\n            );\n            const votes = {\n              upvotes: newUpvotes,\n              downvotes: newDownvotes\n            };\n\n            return compose(\n              set([\"commentsLikes\", \"byToken\", shortToken], newCommentsLikes),\n              /* backup the old vote and comment to restore in case of error */\n              set([\"commentsLikes\", \"backup\"], {\n                token: shortToken,\n                commentid,\n                oldVote,\n                oldComment\n              }),\n              set([\"commentsVotes\", \"backup\"], {\n                downvotes: oldComment.downvotes,\n                upvotes: oldComment.upvotes\n              }),\n              update([\"commentsVotes\", \"byToken\", shortToken], (current) => ({\n                ...current,\n                [commentid]: votes\n              }))\n            )(state);\n          },\n          [act.RECEIVE_LIKE_COMMENT_SUCCESS]: () => {\n            const { token, commentid, sectionId } = action.payload;\n            const shortToken = shortRecordToken(token);\n            const { upvotes, downvotes } =\n              state.commentsVotes.byToken[shortToken][commentid];\n            return update(\n              [\"comments\", \"byToken\", shortToken, \"comments\", sectionId],\n              (comments) =>\n                comments.map((comment) => {\n                  if (comment.commentid !== commentid) return comment;\n                  return { ...comment, upvotes, downvotes };\n                })\n            )(state);\n          },\n          [act.RECEIVE_CENSOR_COMMENT]: () => {\n            const { commentid, token, sectionId, reason, publickey } =\n              action.payload;\n            const censorTargetComment = (comment) => {\n              if (comment.commentid !== commentid) return comment;\n              return {\n                ...comment,\n                publickey,\n                deleted: true,\n                comment: \"\",\n                reason\n              };\n            };\n            return compose(\n              update(\n                [\n                  \"comments\",\n                  \"byToken\",\n                  shortRecordToken(token),\n                  \"comments\",\n                  sectionId\n                ],\n                (comments) => comments.map(censorTargetComment)\n              )\n            )(state);\n          },\n          [act.RECEIVE_SETSTATUS_PROPOSAL]: () => {\n            const { proposal, oldStatus } = action.payload;\n            if (\n              proposal.status === PROPOSAL_STATUS_PUBLIC &&\n              oldStatus === PROPOSAL_STATUS_UNREVIEWED\n            ) {\n              delete state.comments.byToken[\n                shortRecordToken(proposal.censorshiprecord.token)\n              ];\n            }\n            return state;\n          },\n          [act.RECEIVE_LOGOUT]: function removeUnvettedComments() {\n            return update([\"comments\", \"byToken\"], (commentsByToken) =>\n              Object.keys(commentsByToken).reduce((acc, token) => {\n                const { sectionIds, comments } = commentsByToken[token];\n                const isUnvetted = sectionIds.some((sec) =>\n                  comments[sec].some(\n                    ({ state }) => state === PROPOSAL_STATE_UNVETTED\n                  )\n                );\n                return isUnvetted\n                  ? { ...acc }\n                  : { ...acc, [token]: commentsByToken[token] };\n              }, {})\n            )(state);\n          },\n          [act.RECEIVE_CMS_LOGOUT]: () => DEFAULT_STATE\n        }[action.type] || (() => state)\n      )();\n\nexport default comments;\n","import * as act from \"src/actions/types\";\nimport set from \"lodash/fp/set\";\nimport update from \"lodash/fp/update\";\n\nconst DEFAULT_STATE = {\n  byUserID: {}\n};\n\nconst credits = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_USER_PROPOSAL_CREDITS]: () =>\n            set([\"byUserID\", action.payload.userid], {\n              unspent: action.payload.unspentcredits,\n              spent: action.payload.spentcredits,\n              newcredits: null\n            })(state),\n          [act.RECEIVE_RESCAN_USER_PAYMENTS]: () => {\n            const userid = action.payload.userid;\n            const newcredits = action.payload.newcredits || [];\n            const unspent = state.byUserID[userid]\n              ? [...state.byUserID[userid].unspent, ...newcredits]\n              : [...newcredits];\n            return update([\"byUserID\", userid], (credits) => ({\n              ...credits,\n              unspent: unspent,\n              newcredits: newcredits.length\n            }))(state);\n          },\n          [act.RESET_RESCAN_USER_PAYMENTS]: () =>\n            update([\"byUserID\", action.payload], (credits) => ({\n              ...credits,\n              newcredits: null\n            }))(state)\n        }[action.type] || (() => state)\n      )();\n\nexport default credits;\n","import * as act from \"src/actions/types\";\nimport compose from \"lodash/fp/compose\";\nimport set from \"lodash/fp/set\";\nimport update from \"lodash/fp/update\";\n\nconst DEFAULT_SEARCH_STATE = {\n  results: [],\n  resultsByID: {},\n  queryByEmail: {},\n  queryByUsername: {},\n  queryByPublicKey: {}\n};\n\nconst DEFAULT_CMS_USERS_STATE = {\n  byContractorType: {},\n  byDomain: {},\n  byID: {}\n};\n\nconst DEFAULT_STATE = {\n  byID: {},\n  currentUserID: null,\n  search: DEFAULT_SEARCH_STATE,\n  cms: DEFAULT_CMS_USERS_STATE,\n  newUser: {}\n};\n\nconst skip = () => (value) => value;\n\nconst onReceiveLogout = (state) =>\n  compose(\n    set(\"search\", DEFAULT_SEARCH_STATE),\n    set(\"currentUserID\", null),\n    update(\"byID\", (data) => {\n      const publicData = {};\n      Object.keys(data).map(\n        (id) =>\n          (publicData[id] = {\n            id,\n            userid: data[id].userid,\n            isadmin: data[id].isadmin,\n            username: data[id].username,\n            identities: data[id].identities\n          })\n      );\n      return publicData;\n    })\n  )(state);\n\nconst onReceiveCMSLogout = (state) =>\n  compose(\n    set(\"currentUserID\", null),\n    update(\"byID\", (data) => {\n      const publicData = {};\n      Object.keys(data).map((id) => (publicData[id] = {}));\n      return publicData;\n    })\n  )(state);\n\nconst users = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_USER]: () => {\n            const userid = action.payload.user.id;\n            delete action.payload.user.id;\n            return update([\"byID\", userid], (userData) => ({\n              ...userData,\n              ...action.payload.user,\n              userid\n            }))(state);\n          },\n          [act.RECEIVE_ME || act.RECEIVE_LOGIN]: () =>\n            compose(\n              set(\"currentUserID\", action.payload.userid),\n              set([\"byID\", action.payload.userid], action.payload)\n            )(state),\n          [act.RECEIVE_EDIT_USER]: () =>\n            compose(\n              set(\n                [\"byID\", state.currentUserID, \"emailnotifications\"],\n                action.payload.preferences.emailnotifications\n              ),\n              set([\"byID\", state.currentUserID, \"edited\"], action.payload)\n            )(state),\n          [act.RECEIVE_EDIT_CMS_USER]: () =>\n            update([\"byID\", state.currentUserID], (currentUser) => ({\n              ...currentUser,\n              ...action.payload\n            }))(state),\n          [act.RECEIVE_CHANGE_USERNAME]: () =>\n            set(\n              [\"byID\", state.currentUserID, \"username\"],\n              action.payload.username\n            )(state),\n          [act.RECEIVE_VERIFIED_KEY]: () =>\n            update([\"byID\", state.currentUserID], (user) => ({\n              ...user,\n              publickey: action.payload.publickey,\n              verifiedkey: action.payload\n            }))(state),\n          [act.RECEIVE_MANAGE_CMS_USER]: () => {\n            const { domain, type, supervisorIDs, proposalsOwned, userID } =\n              action.payload;\n            return update([\"byID\", userID], (user) => ({\n              ...user,\n              domain,\n              contractortype: type,\n              supervisoruserids: supervisorIDs,\n              proposalsowned: proposalsOwned\n            }))(state);\n          },\n          [act.RECEIVE_USER_SEARCH]: () => {\n            const {\n              users,\n              query: { email, username, publickey }\n            } = action.payload;\n            const usersByID = users?.reduce(\n              (res, user) => ({ ...res, [user.id]: user }),\n              {}\n            );\n            const usersIds = users?.map((user) => user.id);\n            const searchedByEmail = !!email;\n            const searchedByUsername = !!username;\n            const searchedByPublicKey = !!publickey;\n            return compose(\n              set([\"search\", \"results\"], users),\n              update(\"search.resultsByID\", (users) => ({\n                ...users,\n                ...usersByID\n              })),\n              searchedByEmail\n                ? set([\"search\", \"queryByEmail\", email], usersIds)\n                : skip(),\n              searchedByUsername\n                ? set([\"search\", \"queryByUsername\", username], usersIds)\n                : skip(),\n              searchedByPublicKey\n                ? set([\"search\", \"queryByPublicKey\", publickey], usersIds)\n                : skip()\n            )(state);\n          },\n          [act.RECEIVE_LOGOUT]: () => onReceiveLogout(state),\n          [act.RECEIVE_CMS_LOGOUT]: () => onReceiveCMSLogout(state),\n          [act.RECEIVE_CMS_USERS]: () => {\n            const { users } = action.payload;\n            const byContractorType = users?.reduce((res, user) => {\n              const usersFromContractorType = res[user.contractortype] || [];\n              return {\n                ...res,\n                [user.contractortype]: [user, ...usersFromContractorType]\n              };\n            }, {});\n            const byDomain = users?.reduce((res, user) => {\n              const usersFromDomain = res[user.domain] || [];\n              return {\n                ...res,\n                [user.domain]: [user, ...usersFromDomain]\n              };\n            }, {});\n            const byID = users?.reduce((res, user) => {\n              return {\n                ...res,\n                [user.id]: user\n              };\n            }, {});\n            return set(\"cms\", {\n              byContractorType,\n              byDomain,\n              byID\n            })(state);\n          },\n          [act.RECEIVE_UPDATED_KEY]: () =>\n            update([\"byID\", state.currentUserID], (user) => ({\n              ...user,\n              ...action.payload\n            }))(state),\n          [act.RECEIVE_NEW_USER]: () => set(\"newUser\", action.payload)(state),\n          [act.RESET_NEW_USER]: () =>\n            set(\"newUser\", DEFAULT_STATE.newUser)(state),\n          [act.RECEIVE_SET_TOTP]: () =>\n            set([\"byID\", state.currentUserID, \"totp\"], action.payload)(state),\n          [act.RECEIVE_VERIFY_TOTP]: () =>\n            set([\"byID\", state.currentUserID, \"totp\"], action.payload)(state),\n          [act.SET_HAS_TOTP]: () =>\n            update([\"byID\", state.currentUserID], (user) => ({\n              ...user,\n              totpverified: action.payload\n            }))(state)\n        }[action.type] || (() => state)\n      )();\n\nexport default users;\n","import * as act from \"src/actions/types\";\nimport compose from \"lodash/fp/compose\";\nimport set from \"lodash/fp/set\";\nimport get from \"lodash/fp/get\";\nimport update from \"lodash/fp/update\";\nimport {\n  PROPOSAL_STATUS_ARCHIVED,\n  PROPOSAL_STATUS_CENSORED,\n  PROPOSAL_STATUS_PUBLIC,\n  PROPOSAL_STATUS_UNREVIEWED,\n  UNREVIEWED,\n  ACTIVE_VOTE,\n  APPROVED,\n  AUTHORIZED,\n  UNAUTHORIZED,\n  REJECTED,\n  PUBLIC,\n  CENSORED,\n  ARCHIVED,\n  INELIGIBLE,\n  PROPOSAL_STATE_UNVETTED,\n  PROPOSAL_STATE_VETTED,\n  PROPOSAL_BILLING_STATUS_CLOSED,\n  PROPOSAL_BILLING_STATUS_COMPLETED,\n  PROPOSAL_SUMMARY_STATUS_UNDER_REVIEW,\n  PROPOSAL_SUMMARY_STATUS_VOTE_AUTHORIZED,\n  PROPOSAL_SUMMARY_STATUS_VOTE_STARTED,\n  PROPOSAL_SUMMARY_STATUS_CLOSED,\n  PROPOSAL_SUMMARY_STATUS_COMPLETED,\n  PROPOSAL_SUMMARY_STATUS_ACTIVE\n} from \"src/constants\";\nimport {\n  shortRecordToken,\n  getIndexMdFromText,\n  parseReceivedProposalsMap,\n  parseRawProposal\n} from \"src/helpers\";\n\nconst mapStatusToName = {\n  [PROPOSAL_STATUS_UNREVIEWED]: UNREVIEWED,\n  [PROPOSAL_STATUS_ARCHIVED]: ARCHIVED,\n  [PROPOSAL_STATUS_CENSORED]: CENSORED,\n  [PROPOSAL_STATUS_PUBLIC]: PUBLIC\n};\n\nconst DEFAULT_STATE = {\n  byToken: {},\n  summaries: {},\n  billingStatusChanges: {},\n  allByVoteStatus: {\n    [UNAUTHORIZED]: [],\n    [AUTHORIZED]: [],\n    [ACTIVE_VOTE]: [],\n    [APPROVED]: [],\n    [REJECTED]: [],\n    [INELIGIBLE]: []\n  },\n  allByRecordStatus: {\n    [ARCHIVED]: [],\n    [CENSORED]: [],\n    [UNREVIEWED]: []\n  },\n  allProposalsByUserId: {},\n  allTokensByUserId: {},\n  numOfProposalsByUserId: {},\n  newProposalToken: null\n};\n\n// mapReviewStatusToTokenInventoryStatus accepts proposal's status & state and\n// returns presentational string status\nconst mapReviewStatusToTokenInventoryStatus = (status, state) => {\n  switch (status) {\n    case PROPOSAL_STATUS_UNREVIEWED:\n      return UNREVIEWED;\n    case PROPOSAL_STATUS_CENSORED:\n      return state !== PROPOSAL_STATE_UNVETTED ? INELIGIBLE : CENSORED;\n    case PROPOSAL_STATUS_PUBLIC:\n      return UNAUTHORIZED;\n    case PROPOSAL_STATUS_ARCHIVED:\n      return state !== PROPOSAL_STATE_UNVETTED ? INELIGIBLE : ARCHIVED;\n    default:\n      throw Error(\n        `mapReviewStatusToTokenInventoryStatus: Invalid proposal status:\n      ${status}`\n      );\n  }\n};\n\nconst proposalToken = (proposal) => proposal.censorshiprecord.token;\n\nconst proposalIndexFile = (name = \"\", description = \"\") =>\n  getIndexMdFromText([name, description].join(\"\\n\\n\"));\n\nconst updateAllByVoteStatus = (allByVoteStatus, newStatus, tokens) => {\n  let res = {};\n  const shortTokens = tokens.map((token) => shortRecordToken(token));\n  shortTokens.forEach((token) => {\n    const updatedByStatus = Object.keys(allByVoteStatus).reduce((inv, key) => {\n      const tokens = res[key] || allByVoteStatus[key] || [];\n      const foundToken = tokens.find((t) => t === token);\n      if (foundToken && key !== newStatus)\n        return { ...inv, [key]: tokens.filter((t) => t !== token) };\n\n      if (!foundToken && key === newStatus)\n        return { ...inv, [key]: [token].concat(tokens) };\n\n      return { ...inv, [key]: tokens };\n    }, res);\n    res = {\n      ...res,\n      ...updatedByStatus\n    };\n  });\n  return res;\n};\n\nconst updateProposalRfpLinks = (proposal) => (state) => {\n  if (!proposal.linkto) return state;\n  const linkedProposal = get([\"byToken\", shortRecordToken(proposal.linkto)])(\n    state\n  );\n  if (!linkedProposal) return state;\n  return update(\n    [\"byToken\", shortRecordToken(proposal.linkto), \"linkedfrom\"],\n    (links) =>\n      links\n        ? [...links, shortRecordToken(proposalToken(proposal))]\n        : [shortRecordToken(proposalToken(proposal))]\n  )(state);\n};\n\nconst updateInventory = (payload) => (allProps) => ({\n  ...allProps,\n  ...Object.keys(payload).reduce((res, status) => {\n    const propsStatus = allProps[status] ? allProps[status] : [];\n    const payloadStatus = payload[status] ? payload[status] : [];\n    return {\n      ...res,\n      [status]: [\n        ...new Set([\n          ...propsStatus,\n          ...payloadStatus.map((token) => shortRecordToken(token))\n        ])\n      ]\n    };\n  }, {})\n});\n\nconst onReceiveLogout = (state) =>\n  compose(\n    update(\"byToken\", (data) => {\n      const vetted = {};\n      const unvetted = {};\n      Object.keys(data).flatMap((id) =>\n        data[id].state === PROPOSAL_STATE_VETTED\n          ? (vetted[id] = {\n              ...data[id]\n            })\n          : data[id].state === PROPOSAL_STATE_UNVETTED\n          ? (unvetted[id] = {\n              name: id,\n              censorshiprecord: data[id].censorshiprecord,\n              userid: data[id].userid,\n              username: data[id].username,\n              state: data[id].state,\n              status: data[id].status,\n              files: [],\n              timestamp: data[id].timestamp,\n              version: data[id].version,\n              metadata: data[id].metadata\n            })\n          : []\n      );\n      return { ...vetted, ...unvetted };\n    }),\n    set(\"allProposalsByUserId\", DEFAULT_STATE.allProposalsByUserId),\n    set(\"allTokensByUserId\", DEFAULT_STATE.allTokensByUserId),\n    set(\"numOfProposalsByUserId\", DEFAULT_STATE.numOfProposalsByUserId)\n  )(state);\n\nconst updateMultiProposalSummary =\n  (tokens, newStatus, newReason) => (state) => {\n    tokens.forEach(\n      (token) =>\n        (state = updateProposalSummary(state, token, newStatus, newReason))\n    );\n    return state;\n  };\n\nconst updateProposalSummary = (state, token, newStatus) =>\n  update([\"summaries\", shortRecordToken(token)], (proposalSummary) => ({\n    ...proposalSummary,\n    status: newStatus\n  }))(state);\n\nconst updateMultiBillingStatusChanges = (billingstatuschanges) => (state) => {\n  for (const [token, statuschanges] of Object.entries(billingstatuschanges)) {\n    state = updateBillingStatusChanges(state, token, statuschanges);\n  }\n  return state;\n};\n\nconst updateBillingStatusChanges = (state, token, billingstatuschanges) => {\n  const numbillingstatuschanges = billingstatuschanges?.length || 0;\n  const billingStatusChangeMetadata =\n    (numbillingstatuschanges > 0 &&\n      billingstatuschanges[numbillingstatuschanges - 1]) ||\n    {};\n  billingStatusChangeMetadata.numbillingstatuschanges = numbillingstatuschanges;\n\n  return set(\n    [\"billingStatusChanges\", shortRecordToken(token)],\n    billingStatusChangeMetadata\n  )(state);\n};\n\nconst proposals = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_PROPOSALS_BATCH]: () =>\n            compose(\n              action.payload.userid\n                ? update([\"allProposalsByUserId\"], (prop) => ({\n                    [action.payload.userid]: {\n                      ...prop[action.payload.userid],\n                      ...parseReceivedProposalsMap(action.payload.proposals)\n                    }\n                  }))\n                : (state) => state,\n              update(\"byToken\", (proposals) => ({\n                ...proposals,\n                ...parseReceivedProposalsMap(action.payload.proposals)\n              }))\n            )(state),\n          [act.RECEIVE_BATCH_PROPOSAL_SUMMARY]: () => {\n            const keys = Object.keys(action.payload.summaries);\n            const normalizedSummaries = keys.reduce(\n              (acc, key) => ({\n                ...acc,\n                [shortRecordToken(key)]: {\n                  ...state.summaries[shortRecordToken(key)],\n                  ...action.payload.summaries[key]\n                }\n              }),\n              {}\n            );\n            return update(\"summaries\", (proposalSummaries) => ({\n              ...proposalSummaries,\n              ...normalizedSummaries\n            }))(state);\n          },\n          [act.RECEIVE_VOTES_INVENTORY]: () =>\n            update(\"allByVoteStatus\", updateInventory(action.payload))(state),\n          [act.RECEIVE_RECORDS_INVENTORY]: () =>\n            update(\"allByRecordStatus\", updateInventory(action.payload))(state),\n          [act.RECEIVE_EDIT_PROPOSAL]: () =>\n            set(\n              [\n                \"byToken\",\n                shortRecordToken(action.payload.proposal.censorshiprecord.token)\n              ],\n              parseRawProposal(action.payload.proposal)\n            )(state),\n          [act.RECEIVE_NEW_PROPOSAL]: () => {\n            // creates the index.md file\n            const indexFile = proposalIndexFile(\n              action.payload.name,\n              action.payload.description\n            );\n\n            return compose(\n              set(\n                [\"byToken\", shortRecordToken(proposalToken(action.payload))],\n                parseRawProposal({\n                  ...action.payload,\n                  files: [...action.payload.files, indexFile],\n                  commentsCount: 0\n                })\n              ),\n              update(\n                [\"allByRecordStatus\", UNREVIEWED],\n                (unreviewdProps = []) => [\n                  shortRecordToken(proposalToken(action.payload)),\n                  ...unreviewdProps\n                ]\n              ),\n              update(\n                [\"allProposalsByUserId\", action.payload.userid],\n                (userProposals = {}) => {\n                  const token = shortRecordToken(proposalToken(action.payload));\n                  return { [token]: action.payload, ...userProposals };\n                }\n              ),\n              update(\n                [\"numOfProposalsByUserId\", action.payload.userid],\n                (numOfProps = 0) => ++numOfProps\n              ),\n              set(\n                \"newProposalToken\",\n                shortRecordToken(action.payload.censorshiprecord.token)\n              )\n            )(state);\n          },\n          [act.RECEIVE_SETSTATUS_PROPOSAL]: () =>\n            compose(\n              updateProposalRfpLinks(action.payload.proposal),\n              set(\n                [\n                  \"byToken\",\n                  shortRecordToken(proposalToken(action.payload.proposal))\n                ],\n                parseRawProposal(action.payload.proposal)\n              ),\n              update([\"allByVoteStatus\"], (allProps) =>\n                updateAllByVoteStatus(\n                  allProps,\n                  mapReviewStatusToTokenInventoryStatus(\n                    action.payload.proposal.status,\n                    action.payload.proposal.state\n                  ),\n                  [shortRecordToken(proposalToken(action.payload.proposal))]\n                )\n              ),\n              update([\"allByRecordStatus\"], (props) => {\n                const statusTokensArray =\n                  props[mapStatusToName[action.payload.proposal.status]];\n                const proposalToken = shortRecordToken(\n                  action.payload.proposal.censorshiprecord.token\n                );\n                const newArr = statusTokensArray\n                  ? [proposalToken, ...statusTokensArray]\n                  : [proposalToken];\n                if (!props[mapStatusToName[action.payload.oldStatus]])\n                  return {\n                    ...props,\n                    [mapStatusToName[action.payload.proposal.status]]: newArr\n                  };\n                return {\n                  ...props,\n                  [mapStatusToName[action.payload.oldStatus]]: props[\n                    mapStatusToName[action.payload.oldStatus]\n                  ].filter((p) => p !== proposalToken),\n                  [mapStatusToName[action.payload.proposal.status]]: newArr\n                };\n              })\n            )(state),\n          [act.RECEIVE_USER_INVENTORY]: () =>\n            compose(\n              update([\"allTokensByUserId\"], () => {\n                return {\n                  [action.payload.userid]: action.payload.proposals\n                };\n              }),\n              set(\n                [\"numOfProposalsByUserId\", action.payload.userid],\n                action.payload.numofproposals\n              )\n            )(state),\n          [act.RECEIVE_START_VOTE]: () =>\n            compose(\n              update(\"allByVoteStatus\", (allProps) =>\n                updateAllByVoteStatus(\n                  allProps,\n                  ACTIVE_VOTE,\n                  action.payload.tokens\n                )\n              ),\n              updateMultiProposalSummary(\n                action.payload.tokens,\n                PROPOSAL_SUMMARY_STATUS_VOTE_STARTED\n              )\n            )(state),\n          [act.RECEIVE_AUTHORIZE_VOTE]: () =>\n            updateProposalSummary(\n              state,\n              action.payload.token,\n              PROPOSAL_SUMMARY_STATUS_VOTE_AUTHORIZED\n            ),\n          [act.RECEIVE_REVOKE_AUTH_VOTE]: () =>\n            updateProposalSummary(\n              state,\n              action.payload.token,\n              PROPOSAL_SUMMARY_STATUS_UNDER_REVIEW\n            ),\n          [act.RECEIVE_SET_BILLING_STATUS]: () => {\n            state = updateProposalSummary(\n              state,\n              action.payload.token,\n              action.payload.billingStatus === PROPOSAL_BILLING_STATUS_CLOSED\n                ? PROPOSAL_SUMMARY_STATUS_CLOSED\n                : action.payload.billingStatus ===\n                  PROPOSAL_BILLING_STATUS_COMPLETED\n                ? PROPOSAL_SUMMARY_STATUS_COMPLETED\n                : PROPOSAL_SUMMARY_STATUS_ACTIVE\n            );\n            return update(\n              [\"billingStatusChanges\", shortRecordToken(action.payload.token)],\n              (billingStatusChangeMetadata) => ({\n                ...billingStatusChangeMetadata,\n                token: action.payload.token,\n                status: action.payload.billingStatus,\n                numbillingstatuschanges:\n                  (billingStatusChangeMetadata?.numbillingstatuschanges || 0) +\n                  1,\n                reason: action.payload.reason,\n                receipt: action.payload.receipt,\n                timestamp: action.payload.timestamp,\n                publickey: action.payload.publickey\n              })\n            )(state);\n          },\n          [act.RECEIVE_BILLING_STATUS_CHANGES]: () =>\n            updateMultiBillingStatusChanges(\n              action.payload.billingstatuschanges\n            )(state),\n          [act.RECEIVE_NEW_COMMENT]: () => {\n            const comment = action.payload;\n            if (!state.byToken[comment.token]) return state;\n            return update(\n              [\"byToken\", comment.token, \"commentsCount\"],\n              (commentsCount) => ++commentsCount\n            )(state);\n          },\n          [act.RECEIVE_LOGOUT]: () => onReceiveLogout(state)\n        }[action.type] || (() => state)\n      )();\n\nexport default proposals;\n","import * as act from \"src/actions/types\";\nimport compose from \"lodash/fp/compose\";\nimport set from \"lodash/fp/set\";\nimport update from \"lodash/fp/update\";\nimport { PROPOSAL_VOTING_AUTHORIZED } from \"src/constants\";\nimport {\n  PROPOSAL_VOTING_NOT_AUTHORIZED,\n  PROPOSAL_VOTING_ACTIVE\n} from \"../../constants\";\nimport { shortRecordToken } from \"src/helpers\";\n\nconst DEFAULT_STATE = {\n  byToken: [],\n  bestBlock: null\n};\n\nconst receiveVoteStatusChange = (state, token, newStatus) =>\n  update([\"byToken\", shortRecordToken(token)], (voteSummary) => ({\n    ...voteSummary,\n    status: newStatus\n  }))(state);\n\nconst receiveMultiVoteStatusChange = (state, tokens, newStatus) => {\n  tokens.forEach((token) => receiveVoteStatusChange(state, token, newStatus));\n  return state;\n};\n\nconst proposalVotes = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_PROPOSALS_VOTE_SUMMARY]: () => {\n            const keys = Object.keys(action.payload.summaries);\n            const normalizedSummaries = keys.reduce(\n              (acc, key) => ({\n                ...acc,\n                [shortRecordToken(key)]: {\n                  ...state.byToken[shortRecordToken(key)],\n                  ...action.payload.summaries[key]\n                }\n              }),\n              {}\n            );\n            return compose(\n              update(\"byToken\", (voteSummaries) => ({\n                ...voteSummaries,\n                ...normalizedSummaries\n              })),\n              set(\"bestBlock\", action.payload.bestblock)\n            )(state);\n          },\n          [act.RECEIVE_VOTES_DETAILS]: () => {\n            return update(\n              [\"byToken\", shortRecordToken(action.payload.token)],\n              (voteSummary) => ({\n                ...voteSummary,\n                details: {\n                  auths: action.payload.auths,\n                  details: action.payload.vote\n                }\n              })\n            )(state);\n          },\n          [act.RECEIVE_PROPOSAL_VOTE_RESULTS]: () => {\n            return update(\n              [\"byToken\", shortRecordToken(action.payload.token)],\n              (voteSummary) => ({\n                ...voteSummary,\n                votes: action.payload.votes\n              })\n            )(state);\n          },\n          [act.RECEIVE_AUTHORIZE_VOTE]: () =>\n            receiveVoteStatusChange(\n              state,\n              action.payload.token,\n              PROPOSAL_VOTING_AUTHORIZED\n            ),\n          [act.RECEIVE_REVOKE_AUTH_VOTE]: () =>\n            receiveVoteStatusChange(\n              state,\n              action.payload.token,\n              PROPOSAL_VOTING_NOT_AUTHORIZED\n            ),\n          [act.RECEIVE_START_VOTE]: () =>\n            receiveMultiVoteStatusChange(\n              state,\n              action.payload.tokens,\n              PROPOSAL_VOTING_ACTIVE\n            )\n        }[action.type] || (() => state)\n      )();\n\nexport default proposalVotes;\n","import * as act from \"src/actions/types\";\nimport set from \"lodash/fp/set\";\nimport update from \"lodash/fp/update\";\nimport compose from \"lodash/fp/compose\";\nimport union from \"lodash/fp/union\";\n\nconst DEFAULT_STATE = {\n  byToken: {},\n  all: [],\n  exchangeRates: {},\n  subContractors: null,\n  newInvoiceToken: null\n};\n\nconst onReceiveCMSLogout = () =>\n  compose(set(\"all\", []), set(\"byToken\", {}))(DEFAULT_STATE);\n\nconst invoiceToken = (invoice) => invoice.censorshiprecord.token;\n\nconst invoiceArrayToByTokenObject = (invoices) =>\n  invoices.reduce(\n    (invoicesByToken, invoice) => ({\n      ...invoicesByToken,\n      [invoiceToken(invoice)]: invoice\n    }),\n    {}\n  );\n\nconst onReceiveInvoices = (state, receivedInvoices = []) => {\n  return compose(\n    update(\"byToken\", (invoices) => ({\n      ...invoices,\n      ...invoiceArrayToByTokenObject(receivedInvoices)\n    })),\n    update(\"all\", union(receivedInvoices.map(invoiceToken)))\n  )(state);\n};\n\nconst invoices = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_EXCHANGE_RATE]: () => {\n            const { year, month, exchangerate } = action.payload;\n            return set(\n              [\"exchangeRates\", `${year}-${month}`],\n              exchangerate\n            )(state);\n          },\n          [act.RECEIVE_USER_SUBCONTRACTORS]: () => {\n            const { users } = action.payload;\n            return set(\"subContractors\", users)(state);\n          },\n          [act.RECEIVE_USER_INVOICES]: () =>\n            onReceiveInvoices(state, action.payload.invoices),\n          [act.RECEIVE_ADMIN_INVOICES]: () =>\n            onReceiveInvoices(state, action.payload.invoices),\n          [act.RECEIVE_INVOICE]: () => {\n            const { invoice, payout } = action.payload;\n            return set([\"byToken\", invoiceToken(invoice)], {\n              ...invoice,\n              payout\n            })(state);\n          },\n          [act.RECEIVE_EDIT_INVOICE]: () => {\n            const { invoice } = action.payload;\n            return set([\"byToken\", invoiceToken(invoice)], invoice)(state);\n          },\n          [act.RECEIVE_SETSTATUS_INVOICE]: () => {\n            const invoice = action.payload;\n            return set([\"byToken\", invoiceToken(invoice)], invoice)(state);\n          },\n          [act.RECEIVE_NEW_INVOICE]: () => {\n            const invoice = action.payload;\n            return set(\n              \"newInvoiceToken\",\n              invoice.censorshiprecord.token\n            )(state);\n          },\n          [act.RECEIVE_CMS_LOGOUT]: () => onReceiveCMSLogout()\n        }[action.type] || (() => state)\n      )();\n\nexport default invoices;\n","import * as act from \"src/actions/types\";\nimport set from \"lodash/fp/set\";\n\nconst DEFAULT_STATE = {\n  payouts: [],\n  payoutSummaries: []\n};\n\nconst invoicePayouts = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_GENERATE_PAYOUTS]: () =>\n            set(\"payouts\", action.payload.payouts)(state),\n          [act.RECEIVE_INVOICE_PAYOUTS]: () =>\n            set(\"payoutSummaries\", action.payload.invoices)(state),\n          [act.RECEIVE_PAY_APPROVED]: () => DEFAULT_STATE,\n          [act.RECEIVE_CMS_LOGOUT]: () => DEFAULT_STATE\n        }[action.type] || (() => state)\n      )();\n\nexport default invoicePayouts;\n","import * as act from \"src/actions/types\";\nimport set from \"lodash/fp/set\";\nimport update from \"lodash/fp/update\";\nimport compose from \"lodash/fp/compose\";\nimport get from \"lodash/fp/get\";\nimport union from \"lodash/fp/union\";\nimport omit from \"lodash/omit\";\nimport isEmpty from \"lodash/isEmpty\";\n\nconst DEFAULT_STATE = {\n  byToken: {},\n  all: [],\n  byStatus: {},\n  newDccToken: null\n};\n\nconst dccToken = (dcc) => dcc.censorshiprecord.token;\nconst dccStatus = (dcc) => dcc.status;\n\nconst dccArrayToByTokenObject = (dccs) =>\n  dccs.reduce(\n    (dccsByToken, dcc) => ({\n      ...dccsByToken,\n      [dccToken(dcc)]: dcc\n    }),\n    {}\n  );\n\nconst dccArrayToByStatusObject = (dccs) =>\n  dccs.reduce(\n    (dccsByStatus, dcc) => ({\n      ...dccsByStatus,\n      [dccStatus(dcc)]: {\n        ...(dccsByStatus[dccStatus(dcc)] || []),\n        [dccToken(dcc)]: dcc\n      }\n    }),\n    {}\n  );\n\nconst dccByStatusRemoveByToken = (dccs, token) =>\n  !isEmpty(dccs) ? omit(dccs, token) : dccs;\n\nconst onReceiveDccs = (state, receivedDccs) =>\n  compose(\n    update(\"byToken\", (dccs) => ({\n      ...dccs,\n      ...dccArrayToByTokenObject(receivedDccs)\n    })),\n    update(\"all\", union(receivedDccs.map(dccToken))),\n    update(\"byStatus\", (dccs) => ({\n      ...dccs,\n      ...dccArrayToByStatusObject(receivedDccs)\n    }))\n  )(state);\n\nconst onReceiveDcc = (state, receivedDcc) =>\n  set([\"byToken\", dccToken(receivedDcc)], {\n    ...receivedDcc\n  })(state);\n\nconst onReceiveSupportOpposeDcc = (state, payload) => {\n  const { token, userid, username, isSupport } = payload;\n\n  const support = compose(\n    update([\"byToken\", token, \"supportuserids\"], (supportids) => [\n      ...supportids,\n      userid\n    ]),\n    update([\"byToken\", token, \"supportusernames\"], (supportusernames) => [\n      ...supportusernames,\n      username\n    ])\n  );\n\n  const oppose = compose(\n    update([\"byToken\", token, \"againstuserids\"], (againstids) => [\n      ...againstids,\n      userid\n    ]),\n    update([\"byToken\", token, \"againstusernames\"], (againstusernames) => [\n      ...againstusernames,\n      username\n    ])\n  );\n  return isSupport ? support(state) : oppose(state);\n};\n\nconst onReceiveSetDccStatus = (state, payload) => {\n  const { status: newStatus, reason, token } = payload;\n  const { status: oldStatus, ...dcc } = get([\"byToken\", token])(state);\n  const timereviewed = Date.now() / 1000;\n\n  const newDcc = {\n    ...dcc,\n    status: newStatus,\n    statuschangereason: reason,\n    timereviewed\n  };\n\n  return compose(\n    set([\"byToken\", token], newDcc),\n    set([\"byStatus\", newStatus, token], newDcc),\n    update([\"byStatus\", oldStatus], (dccsByOldDccStatus) =>\n      dccByStatusRemoveByToken(dccsByOldDccStatus, token)\n    )\n  )(state);\n};\nconst onReceiveDraftDcc = (state, draft) =>\n  set([\"drafts\", draft.id], {\n    ...draft\n  })(state);\n\nconst onReceiveDrafts = (state, drafts) =>\n  set(\"drafts\", {\n    ...drafts\n  })(state);\n\nconst dccs = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_DCCS]: () => onReceiveDccs(state, action.payload.dccs),\n          [act.RECEIVE_DCC]: () => onReceiveDcc(state, action.payload.dcc),\n          [act.RECEIVE_NEW_DCC]: () =>\n            set(\"newDccToken\", action.payload.censorshiprecord.token)(state),\n          [act.RECEIVE_SUPPORT_OPPOSE_DCC]: () =>\n            onReceiveSupportOpposeDcc(state, action.payload),\n          [act.RECEIVE_SET_DCC_STATUS]: () =>\n            onReceiveSetDccStatus(state, action.payload),\n          [act.SAVE_DRAFT_DCC]: () => onReceiveDraftDcc(state, action.payload),\n          [act.LOAD_DRAFT_DCCS]: () => onReceiveDrafts(state, action.payload),\n          [act.RECEIVE_CMS_LOGOUT]: () => DEFAULT_STATE\n        }[action.type] || (() => state)\n      )();\n\nexport default dccs;\n","import * as act from \"src/actions/types\";\nimport { update } from \"lodash/fp\";\nimport { PAYWALL_STATUS_PAID } from \"src/constants\";\n\nconst DEFAULT_STATE = {\n  byUserID: {}\n};\n\nconst paywall = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_USER]: () => {\n            const { userid, newuserpaywalltx } = action.payload.user;\n            const paywall = state.byUserID[userid];\n            const isPaid = paywall ? paywall.isPaid : false;\n\n            return update([\"byUserID\", userid], (paywall) => ({\n              ...paywall,\n              isPaid: isPaid || newuserpaywalltx !== \"\"\n            }))(state);\n          },\n          [act.RECEIVE_PROPOSAL_PAYWALL_DETAILS]: () => {\n            const userid = action.payload.userid;\n            delete action.payload.userid;\n\n            return update([\"byUserID\", userid], (paywall) => ({\n              ...paywall,\n              ...action.payload\n            }))(state);\n          },\n          [act.RECEIVE_PROPOSAL_PAYWALL_PAYMENT]: () => {\n            const userid = action.payload.userid;\n            delete action.payload.userid;\n\n            return update([\"byUserID\", userid], (paywall) => ({\n              ...paywall,\n              ...action.payload\n            }))(state);\n          },\n          [act.UPDATE_USER_PAYWALL_STATUS]: () => {\n            const { userid, status } = action.payload;\n\n            return update([\"byUserID\", userid], (paywall) => ({\n              ...paywall,\n              status: status,\n              isPaid: status === PAYWALL_STATUS_PAID\n            }))(state);\n          },\n          [act.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET]: () => {\n            const { userid, txid } = action.payload;\n\n            return update([\"byUserID\", userid], (paywall) => ({\n              ...paywall,\n              faucetTxid: txid\n            }))(state);\n          },\n          [act.RECEIVE_LOGOUT]: () => DEFAULT_STATE\n        }[action.type] || (() => state)\n      )();\n\nexport default paywall;\n","import * as act from \"src/actions/types\";\nimport set from \"lodash/fp/set\";\n\nconst DEFAULT_STATE = {\n  byUserID: {}\n};\n\nconst codestats = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_CODE_STATS]: () => {\n            const { userid, codestats, start, end } = action.payload;\n            return set(\n              [\"byUserID\", userid, `${start}${end}`],\n              codestats\n            )(state);\n          },\n          [act.RECEIVE_CMS_LOGOUT]: () => DEFAULT_STATE\n        }[action.type] || (() => state)\n      )();\n\nexport default codestats;\n","import * as act from \"src/actions/types\";\nimport set from \"lodash/fp/set\";\n\nconst DEFAULT_STATE = {\n  proposalsList: null,\n  proposalDetails: null\n};\n\nconst proposalBilling = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_SPENDING_SUMMARY]: () =>\n            set(\"proposalsList\", action.payload.proposals)(state),\n          [act.RECEIVE_SPENDING_DETAILS]: () =>\n            set(\"proposalDetails\", action.payload.details)(state),\n          [act.RECEIVE_PAY_APPROVED]: () => DEFAULT_STATE,\n          [act.RECEIVE_CMS_LOGOUT]: () => DEFAULT_STATE\n        }[action.type] || (() => state)\n      )();\n\nexport default proposalBilling;\n","import * as act from \"src/actions/types\";\nimport { set } from \"lodash/fp\";\nimport { shortRecordToken } from \"src/helpers\";\n\nconst DEFAULT_STATE = {\n  byProposalToken: {}\n};\n\nconst proposalOwnerBilling = (state = DEFAULT_STATE, action) =>\n  action.error\n    ? state\n    : (\n        {\n          [act.RECEIVE_PROPOSAL_BILLING]: () => {\n            const { token, response } = action.payload;\n            return set(\n              [\"byProposalToken\", shortRecordToken(token)],\n              response\n            )(state);\n          },\n          [act.RECEIVE_CMS_LOGOUT]: () => DEFAULT_STATE\n        }[action.type] || (() => state)\n      )();\n\nexport default proposalOwnerBilling;\n","import { combineReducers } from \"redux\";\nimport app from \"./app\";\nimport api from \"./api\";\nimport external_api from \"./external_api\";\nimport {\n  comments,\n  users,\n  credits,\n  proposals,\n  proposalVotes,\n  invoices,\n  invoicePayouts,\n  dccs,\n  paywall,\n  codestats,\n  proposalBilling,\n  proposalOwnerBilling\n} from \"./models\";\n\nconst rootReducer = combineReducers({\n  app,\n  api,\n  external_api,\n  comments,\n  credits,\n  users,\n  proposals,\n  proposalVotes,\n  invoices,\n  invoicePayouts,\n  dccs,\n  paywall,\n  codestats,\n  proposalBilling,\n  proposalOwnerBilling\n});\n\nexport default rootReducer;\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport rootReducer from \"../reducers\";\n\nconst getComposer = () => {\n  const isProductionEnv = process.env.NODE_ENV === \"production\";\n  const browserHasReduxDevTools =\n    typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\n\n  if (!isProductionEnv && browserHasReduxDevTools) {\n    return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n      trace: true\n      // Specify extension’s options like name, actionsBlacklist, actionsCreators, serialize...\n    });\n  }\n\n  return compose;\n};\n\nconst getMiddlewares = () => {\n  const middlewares = [thunkMiddleware];\n\n  return middlewares;\n};\n\nconst configureStore = (preloadedState = {}) => {\n  const composeEnhancers = getComposer();\n  const middlewares = getMiddlewares();\n  return createStore(\n    rootReducer,\n    preloadedState,\n    composeEnhancers(applyMiddleware(...middlewares))\n  );\n};\n\nexport default configureStore;\n","import React, { useMemo, useContext } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { createSelectorHook, createDispatchHook } from \"react-redux\";\nimport throttle from \"lodash/throttle\";\n\nexport const reduxContext = React.createContext();\nexport const useReduxContext = () => useContext(reduxContext);\n\nexport const useSelector = createSelectorHook(reduxContext);\nexport const useDispatch = createDispatchHook(reduxContext);\n\nexport function useAction(action) {\n  const dispatch = useDispatch();\n  const boundAction = useMemo(\n    () => bindActionCreators(action, dispatch),\n    [action, dispatch]\n  );\n  return boundAction;\n}\n\nexport const useStoreSubscribe = (callbackFn) => {\n  const { store } = useReduxContext();\n  return store.subscribe(\n    throttle(() => {\n      const state = store.getState();\n      callbackFn(state);\n    }, 1000)\n  );\n};\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { reduxContext } from \"./hooks\";\nimport configureStore from \"./configureStore\";\n\nconst store = configureStore();\n\nconst ReduxProvider = ({ children }) => (\n  <Provider context={reduxContext} store={store}>\n    {children}\n  </Provider>\n);\n\nexport default ReduxProvider;\n","import cfgStore from \"./configureStore\";\nimport Provider from \"./ReduxProvider\";\nexport * from \"./hooks.js\";\n\nexport const ReduxProvider = Provider;\nexport const configureStore = cfgStore;\n","import { useRef, useEffect, useState } from \"react\";\n\nconst DEFAULT_ARGS = [];\n\nfunction useApplyAction(action, args = DEFAULT_ARGS, enabled = true) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [response, setResponse] = useState(null);\n  useEffect(() => {\n    let mounted = true;\n    async function executeAction() {\n      if (mounted) setLoading(true);\n      try {\n        const res = await action.apply(null, args);\n        if (mounted) {\n          setLoading(false);\n          setResponse(res);\n        }\n      } catch (e) {\n        setLoading(false);\n        setError(e);\n      }\n    }\n    if (enabled) {\n      executeAction();\n    }\n    return function cleanup() {\n      mounted = false;\n    };\n  }, [action, args, enabled]);\n  return [loading, error, response];\n}\n\nfunction areArgsEqual(newArgs, oldArgs) {\n  if (newArgs.length !== oldArgs.length) {\n    return false;\n  }\n  const shallowEqual = (a, b) => a === b;\n  return newArgs.every((newArg, index) => shallowEqual(newArg, oldArgs[index]));\n}\n\n/**\n * useAPIAction hook memoizes the args array and applies the action if enabled. args should be an array of primitives.\n * @param {function} action\n * @param {array} args\n * @param {boolean} enabled\n */\nfunction useAPIAction(action, args = DEFAULT_ARGS, enabled = true) {\n  const actionArgs = useRef(args);\n  const areArgsMatched =\n    args && actionArgs.current && areArgsEqual(args, actionArgs.current);\n  const cachedArgs = areArgsMatched ? actionArgs.current : args;\n\n  useEffect(() => {\n    actionArgs.current = cachedArgs;\n  }, [cachedArgs]);\n\n  return useApplyAction(action, cachedArgs, enabled);\n}\n\nexport default useAPIAction;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Card, Message, Container, Main, classNames } from \"pi-ui\";\nimport styles from \"../layouts.module.css\";\nimport ErrorBoundary from \"src/components/ErrorBoundary\";\nimport Header from \"src/containers/Header\";\nimport useScrollToTop from \"src/hooks/utils/useScrollToTop\";\n\nconst renderError = (error) => (\n  <Message kind=\"error\">{error.toString()}</Message>\n);\n\nconst SingleContentPage = ({\n  children,\n  contentWidth,\n  disableScrollToTop,\n  noCardWrap\n}) => {\n  useScrollToTop(disableScrollToTop);\n  return (\n    <Container className={styles.customContainer} singleContent>\n      <Header noBorder={true} />\n      <Main\n        fill\n        className={classNames(styles.singleContentMain, styles[contentWidth])}\n      >\n        <ErrorBoundary errorRenderer={renderError}>\n          {noCardWrap ? (\n            children\n          ) : (\n            <Card className={styles.card}>{children}</Card>\n          )}\n        </ErrorBoundary>\n      </Main>\n    </Container>\n  );\n};\n\nSingleContentPage.propTypes = {\n  children: PropTypes.node.isRequired,\n  contentWidth: PropTypes.oneOf([\"narrow\", \"widen\"]),\n  disableScrollToTop: PropTypes.bool,\n  noCardWrap: PropTypes.bool\n};\n\nSingleContentPage.defaultProps = {\n  contentWidth: \"narrow\",\n  disableScrollToTop: false,\n  noCardWrap: false\n};\n\nexport default SingleContentPage;\n","import React from \"react\";\nimport FileReaderInput from \"react-file-reader-input\";\nimport { getFormattedFiles } from \"./helpers\";\n\nconst FilesInput = ({ onChange, children, acceptedFiles }) => {\n  function handleFilesChange(e, files) {\n    const formattedFiles = getFormattedFiles(files);\n    onChange(formattedFiles, files);\n  }\n\n  return (\n    <FileReaderInput\n      as=\"binary\"\n      id=\"my-file-input\"\n      accept={acceptedFiles || \"*\"}\n      onChange={handleFilesChange}\n      multiple\n    >\n      {children}\n    </FileReaderInput>\n  );\n};\n\nexport default FilesInput;\n","export function getFormattedFiles(files) {\n  const formattedFiles = [];\n  files.forEach((r) => {\n    const [event, file] = r;\n    formattedFiles.push({\n      name: file.name,\n      mime: file.name.includes(\".txt\")\n        ? `${file.type}; charset=utf-8`\n        : file.type,\n      size: file.size,\n      payload: btoa(event.target.result)\n    });\n  });\n  return formattedFiles;\n}\n","import React from \"react\";\nimport { Modal, P, Button } from \"pi-ui\";\nimport styles from \"./ModalAttachFiles.module.css\";\nimport FilesInput from \"src/components/Files/Input\";\nimport usePolicy from \"src/hooks/api/usePolicy\";\n\nconst ModalAttachFiles = ({\n  title = \"Attach a file\",\n  subTitle = \"Select the file that you would like to attach to your proposal.\",\n  show,\n  onChange,\n  onClose\n}) => {\n  const { policyPi: policy } = usePolicy();\n  return (\n    <Modal title={title} show={show} onClose={onClose}>\n      <div className={styles.wrapper}>\n        <P>{subTitle}</P>\n        {policy && (\n          <P>\n            Valid MIME types - image/png <br />\n            Max image size - 512kb <br />\n            Max number of files - {policy.imagefilecountmax}\n          </P>\n        )}\n        <P className={styles.greyText}>\n          If you have any problems with your upload, try using a smaller file.\n        </P>\n        <div className={styles.selectFileWrapper}>\n          <FilesInput onChange={onChange} acceptedFiles={\"image/png\"}>\n            <Button\n              className={styles.selectFileButton}\n              type=\"submit\"\n              kind={\"primary\"}\n            >\n              Select file\n            </Button>\n          </FilesInput>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ModalAttachFiles;\n","import React, { useCallback } from \"react\";\nimport { classNames } from \"pi-ui\";\nimport styles from \"./AttachFileInput.module.css\";\nimport attachSVG from \"./attach-file.svg\";\nimport ModalAttachFiles from \"src/components/ModalAttachFiles\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\n\nconst AttachFiles = ({ onChange, label, small, acceptedFiles, ...props }) => {\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n  const handleOnChange = useCallback(\n    (v) => {\n      onChange(v);\n      handleCloseModal();\n    },\n    [onChange, handleCloseModal]\n  );\n\n  const openAttachModal = () => {\n    handleOpenModal(ModalAttachFiles, {\n      acceptedFiles,\n      onChange: handleOnChange,\n      onClose: handleCloseModal\n    });\n  };\n\n  return (\n    <>\n      <span\n        className={classNames(styles.attachFileButton, small && styles.small)}\n        onClick={openAttachModal}\n        {...props}\n      >\n        {label}\n        <img alt=\"Attach\" src={attachSVG} />\n      </span>\n    </>\n  );\n};\nexport default AttachFiles;\n","// code grabbed/modified from: https://github.com/miguelmota/merkle-tree/\nimport crypto from \"crypto\";\n\n// hash algorithm\nfunction sha256(data) {\n  // returns Buffer\n  return crypto.createHash(\"sha256\").update(data).digest();\n}\n\n/**\n * Class reprensenting a Merkle Tree\n * @namespace MerkleTree\n */\nclass MerkleTree {\n  /**\n   * @desc Constructs a Merkle Tree.\n   * All nodes and leaves are stored as Buffers.\n   * Lonely leaf nodes are promoted to the next level up without being hashed again.\n   * @param {Buffer[]} leaves - Array of hashed leaves. Each leaf must be a Buffer.\n   * @param {Function} hashAlgorithm - Algorithm used for hashing leaves and nodes\n   * @param {Object} options - Additional options\n   * @example\n   * const MerkleTree = require('merkletreejs')\n   * const crypto = require('crypto')\n   *\n   * function sha256(data) {\n   *   // returns Buffer\n   *   return crypto.createHash('sha256').update(data).digest()\n   * }\n   *\n   * const leaves = ['a', 'b', 'c'].map(x => sha3(x))\n   *\n   * const tree = new MerkleTree(leaves, sha256)\n   */\n  constructor(leaves, hashAlgorithm = sha256) {\n    this.hashAlgo = hashAlgorithm;\n    this.leaves = leaves;\n    this.layers = [leaves];\n\n    this.createHashes(this.leaves);\n  }\n\n  createHashes(nodes) {\n    if (nodes.length === 1) {\n      return false;\n    }\n\n    const layerIndex = this.layers.length;\n\n    this.layers.push([]);\n\n    for (let i = 0; i < nodes.length - 1; i += 2) {\n      const left = nodes[i];\n      const right = nodes[i + 1];\n      let data = null;\n\n      data = Buffer.concat([left, right]);\n\n      const hash = this.hashAlgo(data);\n\n      this.layers[layerIndex].push(hash);\n    }\n\n    // is odd number of nodes\n    if (nodes.length % 2 === 1) {\n      let data = nodes[nodes.length - 1];\n      let hash = data;\n      data = Buffer.concat([data, data]);\n      hash = this.hashAlgo(data);\n\n      this.layers[layerIndex].push(hash);\n    }\n\n    this.createHashes(this.layers[layerIndex]);\n  }\n\n  /**\n   * getLeaves\n   * @desc Returns array of leaves of Merkle Tree.\n   * @return {Buffer[]}\n   * @example\n   * const leaves = tree.getLeaves()\n   */\n  getLeaves() {\n    return this.leaves;\n  }\n\n  /**\n   * getLayers\n   * @desc Returns array of all layers of Merkle Tree, including leaves and root.\n   * @return {Buffer[]}\n   * @example\n   * const layers = tree.getLayers()\n   */\n  getLayers() {\n    return this.layers;\n  }\n\n  /**\n   * getRoot\n   * @desc Returns the Merkle root hash as a Buffer.\n   * @return {Buffer}\n   * @example\n   * const root = tree.getRoot()\n   */\n  getRoot() {\n    return this.layers[this.layers.length - 1][0];\n  }\n\n  /**\n   * getProof\n   * @desc Returns the proof for a target leaf.\n   * @param {Buffer} leaf - Target leaf\n   * @param {Number} [index] - Target leaf index in leaves array.\n   * Use if there are leaves containing duplicate data in order to distinguish it.\n   * @return {Buffer[]} - Array of Buffer hashes.\n   * @example\n   * const proof = tree.getProof(leaves[2])\n   *\n   * @example\n   * const leaves = ['a', 'b', 'a'].map(x => sha3(x))\n   * const tree = new MerkleTree(leaves, sha3)\n   * const proof = tree.getProof(leaves[2], 2)\n   */\n  getProof(leaf, index) {\n    const proof = [];\n\n    if (typeof index !== \"number\") {\n      index = -1;\n\n      for (let i = 0; i < this.leaves.length; i++) {\n        if (Buffer.compare(leaf, this.leaves[i]) === 0) {\n          index = i;\n        }\n      }\n    }\n\n    if (index <= -1) {\n      return [];\n    }\n\n    if (index === this.leaves.length - 1) {\n      for (let i = 0; i < this.layers.length - 1; i++) {\n        const layer = this.layers[i];\n        const isRightNode = index % 2;\n        const pairIndex = isRightNode ? index - 1 : index;\n\n        if (pairIndex < layer.length) {\n          proof.push({\n            position: isRightNode ? \"left\" : \"right\",\n            data: layer[pairIndex]\n          });\n        }\n\n        // set index to parent index\n        index = (index / 2) | 0;\n      }\n\n      return proof;\n    } else {\n      for (let i = 0; i < this.layers.length; i++) {\n        const layer = this.layers[i];\n        const isRightNode = index % 2;\n        const pairIndex = isRightNode ? index - 1 : index + 1;\n\n        if (pairIndex < layer.length) {\n          proof.push({\n            position: isRightNode ? \"left\" : \"right\",\n            data: layer[pairIndex]\n          });\n        }\n\n        // set index to parent index\n        index = (index / 2) | 0;\n      }\n\n      return proof;\n    }\n  }\n\n  /**\n   * verify\n   * @desc Returns true if the proof path (array of hashes) can connect the target node\n   * to the Merkle root.\n   * @param {Buffer[]} proof - Array of proof Buffer hashes that should connect\n   * target node to Merkle root.\n   * @param {Buffer} targetNode - Target node Buffer\n   * @param {Buffer} root - Merkle root Buffer\n   * @return {Boolean}\n   * @example\n   * const root = tree.getRoot()\n   * const proof = tree.getProof(leaves[2])\n   * const verified = tree.verify(proof, leaves[2], root)\n   *\n   */\n  verify(proof, targetNode, root) {\n    let hash = targetNode;\n\n    if (!Array.isArray(proof) || !proof.length || !targetNode || !root) {\n      return false;\n    }\n\n    for (let i = 0; i < proof.length; i++) {\n      const node = proof[i];\n      const isLeftNode = node.position === \"left\";\n      const buffers = [];\n\n      buffers.push(hash);\n\n      buffers[isLeftNode ? \"unshift\" : \"push\"](node.data);\n\n      hash = this.hashAlgo(Buffer.concat(buffers));\n    }\n\n    return Buffer.compare(hash, root) === 0;\n  }\n}\n\nexport default MerkleTree;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newButton\":\"NewButton_newButton__2SXmT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paywallDescription\":\"ModalPayPaywall_paywallDescription__17hwp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"markdownHeadings\":\"StaticMarkdown_markdownHeadings__2O33x\"};","import * as Yup from \"yup\";\n\nconst MIN_CREDITS_NUMBER = 1;\nconst MAX_CREDITS_NUMBER = 999;\n\nexport const validationSchema = Yup.object().shape({\n  creditsNumber: Yup.number()\n    .min(MIN_CREDITS_NUMBER, \"Credits must be higher than 0\")\n    .max(MAX_CREDITS_NUMBER, \"Credits muts be less than 999\")\n});\n","import { useMemo } from \"react\";\nimport * as sel from \"src/selectors\";\nimport { useSelector } from \"src/redux\";\nimport {\n  PAYWALL_STATUS_LACKING_CONFIRMATIONS,\n  PAYWALL_STATUS_PAID,\n  PAYWALL_STATUS_WAITING\n} from \"src/constants\";\nimport { convertAtomsToDcr } from \"src/utils\";\n\nconst getProposalCreditsPaymentStatus = (numOfConfirmations, txid) => {\n  if (!txid) {\n    return PAYWALL_STATUS_WAITING;\n  }\n  if (numOfConfirmations < 2) {\n    return PAYWALL_STATUS_LACKING_CONFIRMATIONS;\n  }\n  return PAYWALL_STATUS_PAID;\n};\n\nexport default function useProposalCreditsPaymentInfo(userID) {\n  const proposalPaywallPaymentConfirmationsSelector = useMemo(\n    () => sel.makeGetPaywallConfirmations(userID),\n    [userID]\n  );\n  const proposalPaywallPaymentTxidSelector = useMemo(\n    () => sel.makeGetPaywallTxid(userID),\n    [userID]\n  );\n  const proposalPaywallPaymentConfirmations = useSelector(\n    proposalPaywallPaymentConfirmationsSelector\n  );\n  const proposalPaywallPaymentTxid = useSelector(\n    proposalPaywallPaymentTxidSelector\n  );\n  const isPollingCreditsPayment = useSelector(sel.pollingCreditsPayment);\n  const proposalPaywallPaymentAmountSelector = useMemo(\n    () => sel.makeGetPaywallAmount(userID),\n    [userID]\n  );\n  const proposalPaywallPaymentAmount = useSelector(\n    proposalPaywallPaymentAmountSelector\n  );\n\n  const status = getProposalCreditsPaymentStatus(\n    proposalPaywallPaymentConfirmations,\n    proposalPaywallPaymentTxid\n  );\n\n  return {\n    status,\n    isPollingCreditsPayment,\n    amount: convertAtomsToDcr(proposalPaywallPaymentAmount)\n  };\n}\n","import {\n  Button,\n  classNames,\n  Modal,\n  Text,\n  useMediaQuery,\n  NumberInput\n} from \"pi-ui\";\nimport PropTypes from \"prop-types\";\nimport React, { useEffect, useState } from \"react\";\nimport FormWrapper from \"src/components/FormWrapper\";\nimport PaymentComponent from \"../PaymentComponent\";\nimport PaymentStatusTag from \"../PaymentStatusTag\";\nimport styles from \"./ModalBuyProposalCredits.module.css\";\nimport { validationSchema } from \"./validation\";\nimport useProposalCreditsPaymentInfo from \"./hooks\";\n\nconst ModalBuyProposalCredits = ({\n  show,\n  onClose,\n  price,\n  initialStep = 0,\n  address,\n  userID,\n  startPollingPayment\n}) => {\n  const [creditsNumber, setNumber] = useState(1);\n  const customOnClose = () => {\n    onClose();\n    // Wait the transition finish to change the modal type\n    setTimeout(() => setModalType(initialStep), 300);\n  };\n  const [modalType, setModalType] = useState(initialStep);\n  function handleGoToPaymentDetails(values) {\n    setModalType(1);\n    setNumber(+values.creditsNumber);\n  }\n\n  const { isPollingCreditsPayment, status, amount } =\n    useProposalCreditsPaymentInfo(userID);\n\n  useEffect(() => {\n    setModalType(initialStep);\n  }, [initialStep]);\n\n  useEffect(() => {\n    if (!isPollingCreditsPayment && modalType === 1) {\n      startPollingPayment();\n    }\n  }, [isPollingCreditsPayment, startPollingPayment, modalType]);\n\n  const extraSmall = useMediaQuery(\"(max-width: 560px)\");\n  return modalType ? (\n    <Modal show={show} onClose={customOnClose} title=\"Complete your purchase\">\n      {extraSmall && <PaymentStatusTag status={status} />}\n      <PaymentComponent\n        address={address}\n        amount={amount || +(creditsNumber * price).toFixed(1)}\n        extraSmall={extraSmall}\n        status={status}\n      />\n    </Modal>\n  ) : (\n    <Modal\n      show={show}\n      onClose={customOnClose}\n      title=\"Purchase Proposal Credits\"\n      contentStyle={{ width: \"100%\" }}\n    >\n      <FormWrapper\n        initialValues={{\n          creditsNumber: \"1\"\n        }}\n        validationSchema={validationSchema}\n        onSubmit={handleGoToPaymentDetails}\n      >\n        {({\n          Form,\n          ErrorMessage,\n          values,\n          handleChange,\n          handleSubmit,\n          errors\n        }) => {\n          const disableNext =\n            (errors && errors.creditsNumber) || !+values.creditsNumber;\n          return (\n            <Form onSubmit={handleSubmit}>\n              <div>\n                <Text>How many credits do you want to buy? </Text>\n                <NumberInput\n                  id=\"creditsNumber\"\n                  name=\"creditsNumber\"\n                  value={values.creditsNumber}\n                  onChange={handleChange}\n                />\n                {errors && errors.creditsNumber && (\n                  <ErrorMessage>{errors.creditsNumber}</ErrorMessage>\n                )}\n              </div>\n              <div className=\"margin-top-s\">\n                <Text color=\"gray\">Each proposal credit costs 0.1 DCR</Text>\n              </div>\n              <div className={classNames(\"margin-top-l\", styles.actionButtons)}>\n                <Button onClick={customOnClose} kind=\"secondary\">\n                  Back\n                </Button>\n                <Button\n                  kind={(disableNext && \"disabled\") || \"primary\"}\n                  type=\"submit\"\n                >\n                  Next\n                </Button>\n              </div>\n            </Form>\n          );\n        }}\n      </FormWrapper>\n    </Modal>\n  );\n};\n\nModalBuyProposalCredits.propTypes = {\n  show: PropTypes.bool,\n  onClose: PropTypes.func\n};\n\nexport default ModalBuyProposalCredits;\n","import { useCallback, useEffect, useRef, useMemo } from \"react\";\nimport * as act from \"src/actions\";\nimport * as sel from \"src/selectors\";\nimport usePaywall from \"src/hooks/api/usePaywall\";\nimport { useSelector, useAction } from \"src/redux\";\nimport useModalContext from \"src/hooks/utils/useModalContext\";\nimport ModalBuyProposalCredits from \"src/components/ModalBuyProposalCredits\";\nimport ModalPayPaywall from \"src/components/ModalPayPaywall\";\n\nexport function useCredits(userID) {\n  const isApiRequestingProposalPaywall = useSelector(\n    sel.isApiRequestingProposalPaywall\n  );\n  const isApiRequestingUserProposalCredits = useSelector(\n    sel.isApiRequestingUserProposalCredits\n  );\n  const proposalPaywallAddressSelector = useMemo(\n    () => sel.makeGetPaywallAddress(userID),\n    [userID]\n  );\n  const proposalCreditPriceSelector = useMemo(\n    () => sel.makeGetPaywallCreditPrice(userID),\n    [userID]\n  );\n  const proposalPaywallPaymentTxidSelector = useMemo(\n    () => sel.makeGetPaywallTxid(userID),\n    [userID]\n  );\n  const proposalPaywallPaymentAmountSelector = useMemo(\n    () => sel.makeGetPaywallAmount(userID),\n    [userID]\n  );\n  const proposalPaywallPaymentConfirmationsSelector = useMemo(\n    () => sel.makeGetPaywallConfirmations(userID),\n    [userID]\n  );\n  const paywallFaucetTxidSelector = useMemo(\n    () => sel.makeGetPaywallFaucetTxid(userID),\n    [userID]\n  );\n  const creditsSelector = useMemo(\n    () => sel.makeGetUnspentUserCredits(userID),\n    [userID]\n  );\n  const creditsPurchasesSelector = useMemo(\n    () => sel.makeGetUserCreditsPurchasesByTx(userID),\n    [userID]\n  );\n  const proposalPaywallAddress = useSelector(proposalPaywallAddressSelector);\n  const proposalCreditPrice = useSelector(proposalCreditPriceSelector);\n  const proposalPaywallPaymentTxid = useSelector(\n    proposalPaywallPaymentTxidSelector\n  );\n  const proposalPaywallPaymentAmount = useSelector(\n    proposalPaywallPaymentAmountSelector\n  );\n  const proposalPaywallPaymentConfirmations = useSelector(\n    proposalPaywallPaymentConfirmationsSelector\n  );\n  const proposalCreditsUnspent = useSelector(creditsSelector);\n  const proposalCreditsPurchases = useSelector(creditsPurchasesSelector);\n  const paywallFaucetTxid = useSelector(paywallFaucetTxidSelector);\n\n  const pollingCreditsPayment = useSelector(sel.pollingCreditsPayment);\n  const reachedCreditsPaymentPollingLimit = useSelector(\n    sel.reachedCreditsPaymentPollingLimit\n  );\n  const proposalPaymentReceived = useSelector(sel.proposalPaymentReceived);\n  const isAdmin = useSelector(sel.currentUserIsAdmin);\n  const currentUserID = useSelector(sel.currentUserID);\n\n  const onUserProposalCredits = useAction(act.onUserProposalCredits);\n  const onPurchaseProposalCredits = useAction(\n    act.onFetchProposalPaywallDetails\n  );\n  const onPollProposalPaywallPayment = useAction(\n    act.onPollProposalPaywallPayment\n  );\n  const toggleCreditsPaymentPolling = useAction(\n    act.toggleCreditsPaymentPolling\n  );\n  const toggleProposalPaymentReceived = useAction(\n    act.toggleProposalPaymentReceived\n  );\n  const clearProposalPaymentPollingPointer = useAction(\n    act.clearProposalPaymentPollingPointer\n  );\n  const { isPaid, paywallEnabled, creditsEnabled } = usePaywall(userID);\n  const proposalCredits = proposalCreditsUnspent.length;\n  const proposalCreditsFetched = proposalCredits !== null;\n  const isUserPageOwner = currentUserID === userID;\n  const shouldFetchPurchaseProposalCredits =\n    creditsEnabled &&\n    isPaid &&\n    !!userID &&\n    isUserPageOwner &&\n    !proposalCreditPrice &&\n    !isApiRequestingProposalPaywall;\n  const shouldPollPaywallPayment =\n    paywallEnabled &&\n    isPaid &&\n    isUserPageOwner &&\n    proposalPaywallPaymentTxid !== \"\" &&\n    !pollingCreditsPayment &&\n    !reachedCreditsPaymentPollingLimit;\n  const shouldFetchProposalCredits =\n    isPaid &&\n    userID &&\n    isUserPageOwner &&\n    !isApiRequestingUserProposalCredits &&\n    !proposalCreditsFetched;\n\n  useEffect(() => {\n    if (shouldFetchPurchaseProposalCredits) {\n      onPurchaseProposalCredits();\n    }\n  }, [shouldFetchPurchaseProposalCredits, onPurchaseProposalCredits]);\n\n  useEffect(() => {\n    if (shouldFetchProposalCredits) {\n      onUserProposalCredits();\n    }\n  }, [shouldFetchProposalCredits, onUserProposalCredits]);\n\n  return {\n    proposalCreditPrice,\n    isAdmin,\n    isApiRequestingUserProposalCredits,\n    proposalCredits,\n    proposalCreditsPurchases,\n    currentUserID,\n    proposalPaywallAddress,\n    proposalPaywallPaymentConfirmations,\n    proposalPaywallPaymentTxid,\n    proposalPaywallPaymentAmount,\n    toggleCreditsPaymentPolling,\n    pollingCreditsPayment,\n    proposalPaymentReceived,\n    toggleProposalPaymentReceived,\n    onPollProposalPaywallPayment,\n    shouldPollPaywallPayment,\n    clearProposalPaymentPollingPointer,\n    paywallFaucetTxid\n  };\n}\n\nexport function usePollProposalCreditsPayment() {\n  const currentUserID = useSelector(sel.currentUserID);\n  const proposalPaywallPaymentTxidSelector = useMemo(\n    () => sel.makeGetPaywallTxid(currentUserID),\n    [currentUserID]\n  );\n  const proposalPaywallPaymentTxid = useSelector(\n    proposalPaywallPaymentTxidSelector\n  );\n  const onFetchProposalPaywallDetails = useAction(\n    act.onFetchProposalPaywallDetails\n  );\n  const pollingCreditsPayment = useSelector(sel.pollingCreditsPayment);\n  const onUserProposalCredits = useAction(act.onUserProposalCredits);\n  const toggleCreditsPaymentPolling = useAction(\n    act.toggleCreditsPaymentPolling\n  );\n  const toggleProposalPaymentReceived = useAction(\n    act.toggleProposalPaymentReceived\n  );\n\n  const prevProposalPaywallPaymentTxid = useRef(null);\n\n  useEffect(() => {\n    if (\n      pollingCreditsPayment &&\n      prevProposalPaywallPaymentTxid.current &&\n      !proposalPaywallPaymentTxid\n    ) {\n      toggleProposalPaymentReceived(true);\n      toggleCreditsPaymentPolling(false);\n      onUserProposalCredits();\n      onFetchProposalPaywallDetails();\n    }\n    prevProposalPaywallPaymentTxid.current = proposalPaywallPaymentTxid;\n  }, [\n    pollingCreditsPayment,\n    proposalPaywallPaymentTxid,\n    toggleProposalPaymentReceived,\n    toggleCreditsPaymentPolling,\n    onUserProposalCredits,\n    onFetchProposalPaywallDetails\n  ]);\n\n  return {};\n}\n\nexport function useRescanUserCredits(userID) {\n  const errorRescan = useSelector(sel.apiRescanUserPaymentsError);\n  const isLoadingRescan = useSelector(sel.isApiRequestingRescanUserPayments);\n  const amountOfCreditsAddedOnRescanSelector = useMemo(\n    () => sel.makeGetCreditsAddedOnRescan(userID),\n    [userID]\n  );\n  const amountOfCreditsAddedOnRescan = useSelector(\n    amountOfCreditsAddedOnRescanSelector\n  );\n\n  const onRescan = useAction(act.onRescanUserPayments);\n  const onResetRescan = useAction(act.onResetRescanUserPayments);\n\n  useEffect(() => {\n    if (amountOfCreditsAddedOnRescan !== null) {\n      setTimeout(() => onResetRescan(userID), 3000);\n    }\n  }, [amountOfCreditsAddedOnRescan, onResetRescan, userID]);\n\n  const onRescanUserCredits = useCallback(() => {\n    onRescan(userID);\n  }, [onRescan, userID]);\n\n  return {\n    onRescanUserCredits,\n    errorRescan,\n    isLoadingRescan,\n    amountOfCreditsAddedOnRescan\n  };\n}\n\nexport function useUserPaymentModals(user) {\n  const userID = user && user.userid;\n  const {\n    proposalCreditPrice,\n    proposalPaywallAddress,\n    proposalPaywallPaymentTxid,\n    toggleCreditsPaymentPolling,\n    onPollProposalPaywallPayment,\n    toggleProposalPaymentReceived\n  } = useCredits(userID);\n\n  const [handleOpenModal, handleCloseModal] = useModalContext();\n\n  const onStartPollingPayment = () => {\n    toggleCreditsPaymentPolling(true);\n    onPollProposalPaywallPayment(false);\n  };\n\n  const customCloseProposalCreditsModal = () => {\n    toggleProposalPaymentReceived(false);\n    handleCloseModal();\n  };\n\n  const handleOpenPaywallModal = () => {\n    handleOpenModal(ModalPayPaywall, {\n      title: \"Complete your registration\",\n      onClose: handleCloseModal\n    });\n  };\n\n  const handleOpenBuyCreditsModal = () => {\n    handleOpenModal(ModalBuyProposalCredits, {\n      title: \"Purchase Proposal Credits\",\n      price: proposalCreditPrice,\n      address: proposalPaywallAddress,\n      startPollingPayment: onStartPollingPayment,\n      initialStep: proposalPaywallPaymentTxid ? 1 : 0,\n      onClose: customCloseProposalCreditsModal,\n      userID\n    });\n  };\n  return {\n    handleOpenPaywallModal,\n    handleOpenBuyCreditsModal,\n    handleCloseModal\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"actionButtons\":\"ModalBuyProposalCredits_actionButtons__2xewZ\",\"inputNumber\":\"ModalBuyProposalCredits_inputNumber__1Kptc\"};","module.exports = __webpack_public_path__ + \"static/media/plus.2d8b4d24.svg\";","module.exports = __webpack_public_path__ + \"static/media/notFound.12a4c9d0.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"join\":\"Join_join__3Uo6C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconButton\":\"IconButton_iconButton__3nqcI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"diff-text-preview-toggle\":\"Diff_diff-text-preview-toggle__2NKBw\",\"diff-active-toggle\":\"Diff_diff-active-toggle__15fkz\",\"diffTable\":\"Diff_diffTable__13C6Q\",\"lineIndex\":\"Diff_lineIndex__3VW5U\",\"lineIcon\":\"Diff_lineIcon__cIDAh\",\"lineContent\":\"Diff_lineContent__27u-T\",\"lineAdded\":\"Diff_lineAdded__3aoVi\",\"lineRemoved\":\"Diff_lineRemoved__30R19\",\"diff-out-line\":\"Diff_diff-out-line__2mwbh\",\"diff-header\":\"Diff_diff-header__mhREM\",\"diff-wrapper\":\"Diff_diff-wrapper___22hN\",\"files\":\"Diff_files__SICTV\",\"fileAdded\":\"Diff_fileAdded__34LjJ\",\"fileRemoved\":\"Diff_fileRemoved__yhmuY\",\"lineitemsRemoved\":\"Diff_lineitemsRemoved__Nl0Mx\",\"lineitemsRemovedDark\":\"Diff_lineitemsRemovedDark__1Cora\",\"lineitemsAdded\":\"Diff_lineitemsAdded__YVIkc\",\"lineitemsAddedDark\":\"Diff_lineitemsAddedDark__37bTR\",\"multiline\":\"Diff_multiline__2FnHm\",\"fileUnchanged\":\"Diff_fileUnchanged__146PC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorTooltip\":\"CellRenderer_errorTooltip__1-Chu\",\"errorTooltipContent\":\"CellRenderer_errorTooltipContent__2zoK6\",\"value\":\"CellRenderer_value__3RYID\",\"erroredCell\":\"CellRenderer_erroredCell__9SRDR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"VettedProposals_spinnerWrapper__2xC6z\",\"customMain\":\"VettedProposals_customMain__3mZSd\",\"pulse\":\"VettedProposals_pulse__TEjDr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteDraft\":\"DraftProposal_deleteDraft__1rD49\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"ListWrapper_spinnerWrapper__2BsIf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteDraft\":\"DraftInvoice_deleteDraft__1ohvQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteDraft\":\"DraftDcc_deleteDraft__1Bp5j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"SearchSelector_select__24Fc-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"List_spinnerWrapper__1JJ0l\"};","module.exports = __webpack_public_path__ + \"static/media/attach-file.a5d32ac1.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerWrapper\":\"InvoiceForm_spinnerWrapper__3C3Zl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"PayoutsDateRange_form__3519Q\"};","module.exports = __webpack_public_path__ + \"static/media/SourceSansPro-Light.ee2a11b8.ttf\";","module.exports = __webpack_public_path__ + \"static/media/SourceSansPro-Regular.5182da42.ttf\";","module.exports = __webpack_public_path__ + \"static/media/SourceSansPro-SemiBold.774c05cc.ttf\";","export const arg =\n  (idx) =>\n  (...args) =>\n    args[idx];\nexport const constant = (x) => () => x;\nexport const not =\n  (fn) =>\n  (...args) =>\n    !fn(...args);\nexport const bool =\n  (fn) =>\n  (...args) =>\n    !!fn(...args);\nexport const or =\n  (...fns) =>\n  (...args) => {\n    let result;\n    return fns.find((fn) => (result = fn(...args))) ? result : false;\n  };\nexport const and =\n  (...fns) =>\n  (...args) => {\n    let result;\n    return fns.find((fn) => {\n      result = fn(...args);\n      return !result;\n    })\n      ? false\n      : result;\n  };\n","export const REQUEST_INIT_SESSION = \"API_REQUEST_INIT_SESSION\";\nexport const RECEIVE_INIT_SESSION = \"API_RECEIVE_INIT_SESSION\";\n\nexport const REQUEST_ME = \"API_REQUEST_ME\";\nexport const RECEIVE_ME = \"API_RECEIVE_ME\";\n\nexport const REQUEST_POLICY = \"API_REQUEST_POLICY\";\nexport const RECEIVE_POLICY = \"API_RECEIVE_POLICY\";\n\nexport const REQUEST_CODE_STATS = \"API_REQUEST_CODE_STATS\";\nexport const RECEIVE_CODE_STATS = \"API_RECEIVE_CODE_STATS\";\n\nexport const REQUEST_NEW_USER = \"API_REQUEST_NEW_USER\";\nexport const RECEIVE_NEW_USER = \"API_RECEIVE_NEW_USER\";\nexport const RESET_NEW_USER = \"API_RESET_NEW_USER\";\n\nexport const RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET =\n  \"RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET\";\nexport const REQUEST_PAYWALL_PAYMENT_WITH_FAUCET =\n  \"REQUEST_PAYWALL_PAYMENT_WITH_FAUCET\";\n\nexport const UPDATE_USER_PAYWALL_STATUS = \"UPDATE_USER_PAYWALL_STATUS\";\n\nexport const REQUEST_CHANGE_USERNAME = \"API_REQUEST_CHANGE_USERNAME\";\nexport const RECEIVE_CHANGE_USERNAME = \"API_RECEIVE_CHANGE_USERNAME\";\n\nexport const REQUEST_CHANGE_PASSWORD = \"API_REQUEST_CHANGE_PASSWORD\";\nexport const RECEIVE_CHANGE_PASSWORD = \"API_RECEIVE_CHANGE_PASSWORD\";\n\nexport const REQUEST_VERIFY_NEW_USER = \"API_REQUEST_VERIFY_NEW_USER\";\nexport const RECEIVE_VERIFY_NEW_USER = \"API_RECEIVE_VERIFY_NEW_USER\";\n\nexport const REQUEST_USER = \"API_REQUEST_USER\";\nexport const RECEIVE_USER = \"API_RECEIVE_USER\";\n\nexport const REQUEST_PROPOSAL_BILLING = \"API_REQUEST_PROPOSAL_BILLING\";\nexport const RECEIVE_PROPOSAL_BILLING = \"API_RECEIVE_PROPOSAL_BILLING\";\n\nexport const REQUEST_LOGIN = \"API_REQUEST_LOGIN\";\nexport const RECEIVE_LOGIN = \"API_RECEIVE_LOGIN\";\n\nexport const KEY_MISMATCH = \"KEY_MISMATCH\";\n\nexport const REQUEST_RESEND_VERIFICATION_EMAIL =\n  \"API_REQUEST_RESEND_VERIFICATION_EMAIL\";\nexport const RECEIVE_RESEND_VERIFICATION_EMAIL =\n  \"API_RECEIVE_RESEND_VERIFICATION_EMAIL\";\nexport const RESET_RESEND_VERIFICATION_EMAIL =\n  \"API_RESET_RESEND_VERIFICATION_EMAIL\";\n\nexport const REQUEST_LOGOUT = \"API_REQUEST_LOGOUT\";\nexport const RECEIVE_LOGOUT = \"API_RECEIVE_LOGOUT\";\nexport const RECEIVE_CMS_LOGOUT = \"API_RECEIVE_CMS_LOGOUT\";\n\nexport const REQUEST_USER_INVENTORY = \"REQUEST_USER_INVENTORY\";\nexport const RECEIVE_USER_INVENTORY = \"RECEIVE_USER_INVENTORY\";\n\nexport const REQUEST_PROPOSAL = \"API_REQUEST_PROPOSAL\";\nexport const RECEIVE_PROPOSAL = \"API_RECEIVE_PROPOSAL\";\n\nexport const REQUEST_RECORD_COMMENTS = \"API_REQUEST_RECORD_COMMENTS\";\nexport const RECEIVE_RECORD_COMMENTS = \"API_RECEIVE_RECORD_COMMENTS\";\n\nexport const REQUEST_NEW_PROPOSAL = \"API_REQUEST_NEW_PROPOSAL\";\nexport const RECEIVE_NEW_PROPOSAL = \"API_RECEIVE_NEW_PROPOSAL\";\n\nexport const REQUEST_EDIT_PROPOSAL = \"API_REQUEST_EDIT_PROPOSAL\";\nexport const RECEIVE_EDIT_PROPOSAL = \"API_RECEIVE_EDIT_PROPOSAL\";\n\nexport const REQUEST_NEW_COMMENT = \"API_REQUEST_NEW_COMMENT\";\nexport const RECEIVE_NEW_COMMENT = \"API_RECEIVE_NEW_COMMENT\";\n\nexport const REQUEST_EDIT_COMMENT = \"API_REQUEST_EDIT_COMMENT\";\nexport const RECEIVE_EDIT_COMMENT = \"API_RECEIVE_EDIT_COMMENT\";\n\nexport const REQUEST_SETSTATUS_PROPOSAL = \"API_REQUEST_SETSTATUS_PROPOSAL\";\nexport const RECEIVE_SETSTATUS_PROPOSAL = \"API_RECEIVE_SETSTATUS_PROPOSAL\";\n\nexport const REQUEST_SET_BILLING_STATUS = \"API_REQUEST_SET_BILLING_STATUS\";\nexport const RECEIVE_SET_BILLING_STATUS = \"API_RECEIVE_SET_BILLING_STATUS\";\n\nexport const REQUEST_BILLING_STATUS_CHANGES =\n  \"API_REQUEST_BILLING_STATUS_CHANGES\";\nexport const RECEIVE_BILLING_STATUS_CHANGES =\n  \"API_RECEIVE_BILLING_STATUS_CHANGES\";\n\nexport const REQUEST_START_VOTE = \"API_REQUEST_START_VOTE\";\nexport const RECEIVE_START_VOTE = \"API_RECEIVE_START_VOTE\";\nexport const REQUEST_START_RUNOFF_VOTE = \"API_REQUEST_START_RUNOFF_VOTE\";\nexport const RECEIVE_START_RUNOFF_VOTE = \"API_RECEIVE_START_RUNOFF_VOTE\";\nexport const REQUEST_UPDATED_KEY = \"API_REQUEST_UPDATED_KEY\";\nexport const RECEIVE_UPDATED_KEY = \"API_RECEIVE_UPDATED_KEY\";\n\nexport const REQUEST_VERIFIED_KEY = \"API_REQUEST_VERIFIED_KEY\";\nexport const RECEIVE_VERIFIED_KEY = \"API_RECEIVE_VERIFIED_KEY\";\n\nexport const REQUEST_LIKE_COMMENT = \"API_REQUEST_LIKE_COMMENT\";\nexport const RECEIVE_LIKE_COMMENT = \"API_RECEIVE_LIKE_COMMENT\";\nexport const RECEIVE_LIKE_COMMENT_SUCCESS = \"API_RECEIVE_LIKE_COMMENT_SUCCESS\";\n\nexport const REQUEST_CENSOR_COMMENT = \"API_REQUEST_CENSOR_COMMENT\";\nexport const RECEIVE_CENSOR_COMMENT = \"API_RECEIVE_CENSOR_COMMENT\";\n\nexport const REQUEST_LIKED_COMMENTS = \"API_REQUEST_LIKED_COMMENTS\";\nexport const RECEIVE_LIKED_COMMENTS = \"API_RECEIVE_LIKED_COMMENTS\";\n\nexport const REQUEST_EDIT_USER = \"API_REQUEST_EDIT_USER\";\nexport const RECEIVE_EDIT_USER = \"API_RECEIVE_EDIT_USER\";\n\nexport const REQUEST_MANAGE_USER = \"API_REQUEST_MANAGE_USER\";\nexport const RECEIVE_MANAGE_USER = \"API_RECEIVE_MANAGE_USER\";\n\nexport const REQUEST_PROPOSAL_VOTE_RESULTS =\n  \"API_REQUEST_PROPOSAL_VOTE_RESULTS\";\nexport const RECEIVE_PROPOSAL_VOTE_RESULTS =\n  \"API_RECEIVE_PROPOSAL_VOTE_RESULTS\";\n\nexport const REQUEST_PROPOSALS_VOTE_SUMMARY =\n  \"API_REQUEST_PROPOSALS_VOTE_SUMMARY\";\nexport const RECEIVE_PROPOSALS_VOTE_SUMMARY =\n  \"API_RECEIVE_PROPOSALS_VOTE_SUMMARY\";\n\nexport const REQUEST_BATCH_PROPOSAL_SUMMARY =\n  \"API_REQUEST_BATCH_PROPOSAL_SUMMARY\";\nexport const RECEIVE_BATCH_PROPOSAL_SUMMARY =\n  \"API_RECEIVE_BATCH_PROPOSAL_SUMMARY\";\n\nexport const REQUEST_VOTES_DETAILS = \"API_REQUEST_VOTES_DETAILS\";\nexport const RECEIVE_VOTES_DETAILS = \"API_RECEIVE_VOTES_DETAILS\";\n\nexport const REQUEST_USER_SEARCH = \"API_REQUEST_USER_SEARCH\";\nexport const RECEIVE_USER_SEARCH = \"API_RECEIVE_USER_SEARCH\";\n\nexport const SAVE_DRAFT_PROPOSAL = \"SAVE_DRAFT_PROPOSAL\";\nexport const DELETE_DRAFT_PROPOSAL = \"DELETE_DRAFT_PROPOSAL\";\nexport const LOAD_DRAFT_PROPOSALS = \"LOAD_DRAFT_PROPOSALS\";\n\nexport const REQUEST_PROPOSAL_PAYWALL_DETAILS =\n  \"API_REQUEST_PROPOSAL_PAYWALL_DETAILS\";\nexport const RECEIVE_PROPOSAL_PAYWALL_DETAILS =\n  \"API_RECEIVE_PROPOSAL_PAYWALL_DETAILS\";\n\nexport const REQUEST_USER_PROPOSAL_CREDITS =\n  \"API_REQUEST_USER_PROPOSAL_CREDITS\";\nexport const RECEIVE_USER_PROPOSAL_CREDITS =\n  \"API_RECEIVE_USER_PROPOSAL_CREDITS\";\n\nexport const CSRF_NEEDED = \"API_CSRF_NEEDED\";\n\nexport const SHOULD_AUTO_VERIFY_KEY = \"API_SHOULD_AUTO_VERIFY_KEY\";\n\nexport const IDENTITY_IMPORTED = \"IDENTITY_IMPORTED\";\n\nexport const REQUEST_AUTHORIZE_VOTE = \"REQUEST_AUTHORIZE_VOTE\";\nexport const RECEIVE_AUTHORIZE_VOTE = \"RECEIVE_AUTHORIZE_VOTE\";\n\nexport const REQUEST_REVOKE_AUTH_VOTE = \"REQUEST_REVOKE_AUTH_VOTE\";\nexport const RECEIVE_REVOKE_AUTH_VOTE = \"RECEIVE_REVOKE_AUTH_VOTE\";\n\nexport const REQUEST_PROPOSAL_PAYWALL_PAYMENT =\n  \"REQUEST_PROPOSAL_PAYWALL_PAYMENT\";\nexport const RECEIVE_PROPOSAL_PAYWALL_PAYMENT =\n  \"RECEIVE_PROPOSAL_PAYWALL_PAYMENT\";\n\nexport const TOGGLE_CREDITS_PAYMENT_POLLING = \"TOGGLE_CREDITS_PAYMENT_POLLING\";\nexport const TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT =\n  \"TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT\";\nexport const TOGGLE_PROPOSAL_PAYMENT_RECEIVED =\n  \"TOGGLE_PROPOSAL_PAYMENT_RECEIVED\";\n\nexport const REQUEST_RESCAN_USER_PAYMENTS = \"REQUEST_RESCAN_USER_PAYMENTS\";\nexport const RECEIVE_RESCAN_USER_PAYMENTS = \"RECEIVE_RESCAN_USER_PAYMENTS\";\nexport const RESET_RESCAN_USER_PAYMENTS = \"RESET_RESCAN_USER_PAYMENTS\";\n\nexport const REQUEST_TOKEN_INVENTORY = \"REQUEST_TOKEN_INVENTORY\";\nexport const RECEIVE_VOTES_INVENTORY = \"RECEIVE_VOTES_INVENTORY\";\nexport const RECEIVE_RECORDS_INVENTORY = \"RECEIVE_RECORDS_INVENTORY\";\n\nexport const REQUEST_RESET_PASSWORD = \"REQUEST_RESET_PASSWORD\";\nexport const RECEIVE_RESET_PASSWORD = \"RECEIVE_RESET_PASSWORD\";\n\nexport const REQUEST_VERIFY_RESET_PASSWORD = \"REQUEST_VERIFY_RESET_PASSWORD\";\nexport const RECEIVE_VERIFY_RESET_PASSWORD = \"RECEIVE_VERIFY_RESET_PASSWORD\";\n\nexport const REQUEST_PROPOSALS_BATCH = \"REQUEST_PROPOSALS_BATCH\";\nexport const RECEIVE_PROPOSALS_BATCH = \"RECEIVE_PROPOSALS_BATCH\";\n\n// CMS\nexport const REQUEST_INVITE_USER = \"REQUEST_INVITE_USER\";\nexport const RECEIVE_INVITE_USER = \"RECEIVE_INVITE_USER\";\n\nexport const REQUEST_NEW_INVOICE = \"API_REQUEST_NEW_INVOICE\";\nexport const RECEIVE_NEW_INVOICE = \"API_RECEIVE_NEW_INVOICE\";\n\nexport const REQUEST_EDIT_INVOICE = \"API_REQUEST_EDIT_INVOICE\";\nexport const RECEIVE_EDIT_INVOICE = \"API_RECEIVE_EDIT_INVOICE\";\n\nexport const REQUEST_USER_INVOICES = \"API_REQUEST_USER_INVOICES\";\nexport const RECEIVE_USER_INVOICES = \"API_RECEIVE_USER_INVOICES\";\n\nexport const REQUEST_ADMIN_INVOICES = \"API_REQUEST_ADMIN_INVOICES\";\nexport const RECEIVE_ADMIN_INVOICES = \"API_RECEIVE_ADMIN_INVOICES\";\n\nexport const REQUEST_INVOICE = \"API_REQUEST_INVOICE\";\nexport const RECEIVE_INVOICE = \"API_RECEIVE_INVOICE\";\n\nexport const SAVE_DRAFT_INVOICE = \"SAVE_DRAFT_INVOICE\";\nexport const DELETE_DRAFT_INVOICE = \"DELETE_DRAFT_INVOICE\";\nexport const LOAD_DRAFT_INVOICES = \"LOAD_DRAFT_INVOICES\";\n\nexport const REQUEST_SETSTATUS_INVOICE = \"API_REQUEST_SETSTATUS_INVOICE\";\nexport const RECEIVE_SETSTATUS_INVOICE = \"API_RECEIVE_SETSTATUS_INVOICE\";\n\nexport const REQUEST_GENERATE_PAYOUTS = \"API_REQUEST_GENERATE_PAYOUTS\";\nexport const RECEIVE_GENERATE_PAYOUTS = \"API_RECEIVE_GENERATE_PAYOUTS\";\n\nexport const REQUEST_INVOICE_PAYOUTS = \"API_REQUEST_INVOICE_PAYOUTS\";\nexport const RECEIVE_INVOICE_PAYOUTS = \"API_RECEIVE_INVOICE_PAYOUTS\";\n\nexport const REQUEST_PAY_APPROVED = \"API_REQUEST_PAY_APPROVED\";\nexport const RECEIVE_PAY_APPROVED = \"API_RECEIVE_PAY_APPROVED\";\n\nexport const REQUEST_SPENDING_SUMMARY = \"API_REQUEST_SPENDING_SUMMARY\";\nexport const RECEIVE_SPENDING_SUMMARY = \"API_RECEIVE_SPENDING_SUMMARY\";\n\nexport const REQUEST_SPENDING_DETAILS = \"API_REQUEST_SPENDING_DETAILS\";\nexport const RECEIVE_SPENDING_DETAILS = \"API_RECEIVE_SPENDING_DETAILS\";\n\nexport const REQUEST_EXCHANGE_RATE = \"API_REQUEST_EXCHANGE_RATE\";\nexport const RECEIVE_EXCHANGE_RATE = \"API_RECEIVE_EXCHANGE_RATE\";\n\nexport const REQUEST_MANAGE_CMS_USER = \"API_REQUEST_MANAGE_CMS_USER\";\nexport const RECEIVE_MANAGE_CMS_USER = \"API_RECEIVE_MANAGE_CMS_USER\";\n\nexport const REQUEST_USER_SUBCONTRACTORS = \"API_REQUEST_USER_SUBCONTRACTORS\";\nexport const RECEIVE_USER_SUBCONTRACTORS = \"API_RECEIVE_USER_SUBCONTRACTORS\";\n\nexport const REQUEST_NEW_DCC = \"API_REQUEST_NEW_DCC\";\nexport const RECEIVE_NEW_DCC = \"API_RECEIVE_NEW_DCC\";\n\nexport const REQUEST_DCCS = \"API_REQUEST_DCCS\";\nexport const RECEIVE_DCCS = \"API_RECEIVE_DCCS\";\n\nexport const REQUEST_DCC = \"API_REQUEST_DCC\";\nexport const RECEIVE_DCC = \"API_RECEIVE_DCC\";\n\nexport const REQUEST_SUPPORT_OPPOSE_DCC = \"API_REQUEST_SUPPORT_OPPOSE_DCC\";\nexport const RECEIVE_SUPPORT_OPPOSE_DCC = \"API_RECEIVE_SUPPORT_OPPOSE_DCC\";\n\nexport const REQUEST_SET_DCC_STATUS = \"API_REQUEST_SET_DCC_STATUS\";\nexport const RECEIVE_SET_DCC_STATUS = \"API_RECEIVE_SET_DCC_STATUS\";\n\nexport const REQUEST_CMS_USERS = \"API_REQUEST_CMS_USERS\";\nexport const RECEIVE_CMS_USERS = \"API_RECEIVE_CMS_USERS\";\n\nexport const SAVE_DRAFT_DCC = \"SAVE_DRAFT_DCC\";\nexport const DELETE_DRAFT_DCC = \"DELETE_DRAFT_DCC\";\nexport const LOAD_DRAFT_DCCS = \"LOAD_DRAFT_DCCS\";\n\nexport const REQUEST_EDIT_CMS_USER = \"API_REQUEST_EDIT_CMS_USER\";\nexport const RECEIVE_EDIT_CMS_USER = \"API_RECEIVE_EDIT_CMS_USER\";\n\nexport const REQUEST_SET_TOTP = \"API_REQUEST_SET_TOTP\";\nexport const RECEIVE_SET_TOTP = \"API_RECEIVE_SET_TOTP\";\n\nexport const REQUEST_VERIFY_TOTP = \"API_REQUEST_VERIFY_TOTP\";\nexport const RECEIVE_VERIFY_TOTP = \"API_RECEIVE_VERIFY_TOTP\";\n\nexport const SET_HAS_TOTP = \"SET_HAS_TOTP\";\n\nexport const REQUEST_VOTES_BUNDLE = \"API_REQUEST_VOTES_BUNDLE\";\nexport const RECEIVE_VOTES_BUNDLE = \"API_RECEIVE_VOTES_BUNDLE\";\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"diffTabs\":\"ModalDiff_diffTabs__3Lz89\",\"modalContent\":\"ModalDiff_modalContent__Y5moP\",\"diffTabContent\":\"ModalDiff_diffTabContent__3j7qo\",\"diffWrapper\":\"ModalDiff_diffWrapper__3vRJb\",\"version\":\"ModalDiff_version__Zjuah\",\"field\":\"ModalDiff_field__x7-qc\",\"lineitemsWrapper\":\"ModalDiff_lineitemsWrapper__26Xkl\",\"versionSelectorContainer\":\"ModalDiff_versionSelectorContainer__frzzI\",\"versionSelectorWrapper\":\"ModalDiff_versionSelectorWrapper__25wee\",\"versionCompareIcon\":\"ModalDiff_versionCompareIcon__3Auxa\",\"versionSpinnerContainer\":\"ModalDiff_versionSpinnerContainer__3E5PR\",\"headerSubtitle\":\"ModalDiff_headerSubtitle__28zCQ\",\"titleDiff\":\"ModalDiff_titleDiff__1NQTD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"InvoiceDatasheet_wrapper__1aFeJ\",\"data-grid\":\"InvoiceDatasheet_data-grid__1o7tv\",\"cell\":\"InvoiceDatasheet_cell__Z8EQd\",\"multilineCellValue\":\"InvoiceDatasheet_multilineCellValue__2160Y\",\"table\":\"InvoiceDatasheet_table__3Haps\",\"tableHead\":\"InvoiceDatasheet_tableHead__3yYlt\",\"tableCell\":\"InvoiceDatasheet_tableCell__TrjEW\",\"tableHeadCell\":\"InvoiceDatasheet_tableHeadCell__3Zw6J InvoiceDatasheet_tableCell__TrjEW\",\"tableRow\":\"InvoiceDatasheet_tableRow__U-Cjn\",\"datasheetWrapper\":\"InvoiceDatasheet_datasheetWrapper__2hwQ-\",\"highlightChar\":\"InvoiceDatasheet_highlightChar__34noR\",\"textWrapper\":\"InvoiceDatasheet_textWrapper__5auVY\",\"invoiceError\":\"InvoiceDatasheet_invoiceError__lzwRZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fieldHeading\":\"Identity_fieldHeading__31P1y\",\"block\":\"Identity_block__xfAfU\",\"identityList\":\"Identity_identityList__3Dh5S\",\"buttonsWrapper\":\"Identity_buttonsWrapper__34vKJ\",\"spinnerWrapper\":\"Identity_spinnerWrapper__23PUN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"customMain\":\"layouts_customMain__2zC9I\",\"customMainNoSidebar\":\"layouts_customMainNoSidebar__4nmF_\",\"singleContentMain\":\"layouts_singleContentMain__2cVbY layouts_customMain__2zC9I\",\"customPageDetails\":\"layouts_customPageDetails__2h4A9\",\"titleAndSubtitleWrapper\":\"layouts_titleAndSubtitleWrapper__3MoB2\",\"subtitle\":\"layouts_subtitle__29sor\",\"pageDetailsHeader\":\"layouts_pageDetailsHeader__2SA5t\",\"pageDetailsTitle\":\"layouts_pageDetailsTitle__1WSVs\",\"pageDetailsActions\":\"layouts_pageDetailsActions__29ORE\",\"card\":\"layouts_card__LMftl\",\"narrow\":\"layouts_narrow__-nY1q\",\"widen\":\"layouts_widen__1-OcW\",\"wrap\":\"layouts_wrap__3rhSq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comment\":\"Comment_comment__2x0rw\",\"reply\":\"Comment_reply__15f8G\",\"editForm\":\"Comment_editForm__2mGZ7\",\"censor\":\"Comment_censor__1Se5z\",\"censored\":\"Comment_censored__2aah8\",\"timeAgo\":\"Comment_timeAgo__3gRzF\",\"editIcon\":\"Comment_editIcon__2ahL3\",\"contextLink\":\"Comment_contextLink__2-GNd\",\"info\":\"Comment_info__1So_U\",\"likesWrapper\":\"Comment_likesWrapper__21g8Y\",\"childrenContainer\":\"Comment_childrenContainer__2ueeD\",\"showReplies\":\"Comment_showReplies__2CduP\",\"commentAuthor\":\"Comment_commentAuthor__OiN-w\",\"recordAuthor\":\"Comment_recordAuthor__2_qSN\",\"permalinkTooltip\":\"Comment_permalinkTooltip__2bep7\",\"copyLinkIcon\":\"Comment_copyLinkIcon__2Ajzb\",\"highlightAsNew\":\"Comment_highlightAsNew__2FX1b\",\"replyForm\":\"Comment_replyForm__hdxiT\"};","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport compose from \"lodash/fp/compose\";\nimport { or, bool } from \"../lib/fp\";\n\nexport const getIsApiRequesting = (key) =>\n  bool(get([\"api\", key, \"isRequesting\"]));\nexport const getApiPayload = (key) => get([\"api\", key, \"payload\"]);\nexport const getApiError = (key) => get([\"api\", key, \"error\"]);\n\n// Politeia Selectors\nconst isApiRequestingProposal = getIsApiRequesting(\"proposal\");\nexport const isApiRequestingInit = getIsApiRequesting(\"init\");\nexport const isApiRequestingPolicy = getIsApiRequesting(\"policy\");\nexport const isApiRequestingUserProposals = getIsApiRequesting(\"userProposals\");\nexport const isApiRequestingUser = getIsApiRequesting(\"user\");\nexport const isApiRequestingUserSearch = getIsApiRequesting(\"userSearch\");\nexport const isApiRequestingPropVoteResults = getIsApiRequesting(\n  \"proposalVoteResults\"\n);\nexport const isApiRequestingProposalsVoteSummary = getIsApiRequesting(\n  \"proposalsVoteSummary\"\n);\nexport const isApiRequestingBatchProposalSummary = getIsApiRequesting(\n  \"batchProposalSummary\"\n);\nexport const isApiRequestingBillingStatusChanges = getIsApiRequesting(\n  \"billingStatusChanges\"\n);\nexport const isApiRequestingVotesDetails = getIsApiRequesting(\"votesDetails\");\nexport const isApiRequestingEditUser = getIsApiRequesting(\"editUser\");\nexport const isApiRequestingProposalPaywall = getIsApiRequesting(\n  \"proposalPaywallDetails\"\n);\nexport const isApiRequestingUserProposalCredits = getIsApiRequesting(\n  \"userProposalCredits\"\n);\nexport const isApiRequestingLikeComment = get([\n  \"api\",\n  \"likeComment\",\n  \"isRequesting\"\n]);\nexport const proposalIsRequesting = or(\n  isApiRequestingInit,\n  isApiRequestingProposal\n);\nexport const isApiRequestingVoteSummary = or(\n  isApiRequestingProposalsVoteSummary,\n  isApiRequestingPropVoteResults,\n  isApiRequestingVotesDetails\n);\nexport const isApiRequestingRescanUserPayments =\n  getIsApiRequesting(\"rescanUserPayments\");\n\nexport const isApiRequestingProposalOwnerBilling = getIsApiRequesting(\n  \"proposalOwnerBilling\"\n);\n\nexport const isApiRequestingComments = or(\n  getIsApiRequesting(\"proposalComments\"),\n  getIsApiRequesting(\"invoiceComments\")\n);\nexport const isApiRequestingCommentsLikes = getIsApiRequesting(\"commentslikes\");\nexport const isApiRequestingManageUser = getIsApiRequesting(\"manageUser\");\nconst apiManageUserPayload = getApiPayload(\"manageUser\");\nexport const manageUserAction = compose(get(\"action\"), apiManageUserPayload);\nexport const makeIsApiRequestingManageUserByAction = (action) =>\n  createSelector(\n    (state) =>\n      isApiRequestingManageUser(state) && manageUserAction(state) === action\n  );\n\nexport const updateUserKeyError = getApiError(\"updateUserKey\");\nexport const verifyUserKeyError = getApiError(\"verifyUserKey\");\nexport const editUserError = getApiError(\"editUser\");\nexport const apiInitError = getApiError(\"init\");\nexport const propVoteResultsError = getApiError(\"proposalVoteResults\");\nconst apiUserProposalsError = getApiError(\"userProposals\");\nconst apiProposalError = getApiError(\"proposal\");\nexport const apiPropsVoteSummaryError = getApiError(\n  \"proposalsVoteSummaryError\"\n);\nexport const userProposalsError = or(apiInitError, apiUserProposalsError);\nexport const apiProposalsBatchError = getApiError(\"proposalsBatch\");\nexport const proposalError = or(apiInitError, apiProposalError);\nexport const apiRescanUserPaymentsError = getApiError(\"rescanUserPayments\");\nexport const apiProposalCommentsError = getApiError(\"proposalComments\");\nexport const apiInvoiceCommentsError = getApiError(\"invoiceComments\");\nexport const apiDccCommentsError = getApiError(\"dccComments\");\nexport const apiLikeCommentsError = getApiError(\"likeComment\");\nexport const apiCommentsLikesError = getApiError(\"commentslikes\");\n\n// CMS Selectors\nexport const isApiRequestingInvoicePayouts =\n  getIsApiRequesting(\"invoicePayouts\");\n\nexport const isApiRequestingProposalBillingSummary =\n  getIsApiRequesting(\"spendingSummary\");\n\nexport const isApiRequestingProposalBillingDetails =\n  getIsApiRequesting(\"spendingDetails\");\n","import get from \"lodash/fp/get\";\nimport compose from \"lodash/fp/compose\";\nimport {\n  CMSWWWMODE,\n  NOTIFICATION_EMAIL_MY_PROPOSAL_STATUS_CHANGE,\n  NOTIFICATION_EMAIL_MY_PROPOSAL_VOTE_STARTED,\n  NOTIFICATION_EMAIL_ADMIN_PROPOSAL_NEW,\n  NOTIFICATION_EMAIL_ADMIN_PROPOSAL_VOTE_AUTHORIZED,\n  NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VETTED,\n  NOTIFICATION_EMAIL_REGULAR_PROPOSAL_EDITED,\n  NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VOTE_STARTED,\n  NOTIFICATION_EMAIL_COMMENT_ON_MY_PROPOSAL,\n  NOTIFICATION_EMAIL_COMMENT_ON_MY_COMMENT\n} from \"../constants\";\n\nexport const init = get([\"app\", \"init\"]);\n\nexport const policy = get([\"app\", \"policy\"]);\n\nexport const csrf = compose(get(\"csrfToken\"), init);\n\nexport const isTestNet = compose(get(\"testnet\"), init);\n\nconst mode = compose(get(\"mode\"), init);\n\nexport const isCMS = (state) => mode(state) === CMSWWWMODE;\n\nexport const keyMismatch = get([\"app\", \"keyMismatch\"]);\n\nexport const draftProposals = (state) =>\n  state && state.app && state.app.draftProposals;\n\nexport const draftInvoices = (state) =>\n  state && state.app && state.app.draftInvoices;\n\nexport const draftDccs = (state) => state && state.app && state.app.draftDccs;\n\nexport const resolveEditUserValues = (prefs) => {\n  return {\n    emailnotifications:\n      (prefs[\"myproposalnotifications-statuschange\"]\n        ? NOTIFICATION_EMAIL_MY_PROPOSAL_STATUS_CHANGE\n        : 0) |\n      (prefs[\"myproposalnotifications-votestarted\"]\n        ? NOTIFICATION_EMAIL_MY_PROPOSAL_VOTE_STARTED\n        : 0) |\n      (prefs[\"regularproposalnotifications-vetted\"]\n        ? NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VETTED\n        : 0) |\n      (prefs[\"regularproposalnotifications-edited\"]\n        ? NOTIFICATION_EMAIL_REGULAR_PROPOSAL_EDITED\n        : 0) |\n      (prefs[\"regularproposalnotifications-votestarted\"]\n        ? NOTIFICATION_EMAIL_REGULAR_PROPOSAL_VOTE_STARTED\n        : 0) |\n      (prefs[\"adminproposalnotifications-new\"]\n        ? NOTIFICATION_EMAIL_ADMIN_PROPOSAL_NEW\n        : 0) |\n      (prefs[\"adminproposalnotifications-voteauthorized\"]\n        ? NOTIFICATION_EMAIL_ADMIN_PROPOSAL_VOTE_AUTHORIZED\n        : 0) |\n      (prefs[\"commentnotifications-proposal\"]\n        ? NOTIFICATION_EMAIL_COMMENT_ON_MY_PROPOSAL\n        : 0) |\n      (prefs[\"commentnotifications-comment\"]\n        ? NOTIFICATION_EMAIL_COMMENT_ON_MY_COMMENT\n        : 0)\n  };\n};\n\nexport const shouldAutoVerifyKey = (state) => state.app.shouldVerifyKey;\n\nexport const identityImportSuccess = (state) =>\n  state.app.identityImportResult && state.app.identityImportResult.successMsg;\n\nexport const pollingCreditsPayment = (state) => state.app.pollingCreditsPayment;\n\nexport const reachedCreditsPaymentPollingLimit = (state) =>\n  state.app.reachedCreditsPaymentPollingLimit;\n\nexport const proposalPaymentReceived = (state) =>\n  state.app.proposalPaymentReceived;\n","import get from \"lodash/fp/get\";\nimport compose from \"lodash/fp/compose\";\nimport { bool } from \"../lib/fp\";\n\nexport const getIsExtApiRequesting = (key) =>\n  bool(get([\"external_api\", key, \"isRequesting\"]));\nexport const getExtApiResponse = (key) =>\n  get([\"external_api\", key, \"response\"]);\nexport const getExtApiError = (key) => get([\"external_api\", key, \"error\"]);\n\nexport const isApiRequestingPayWithFaucet =\n  getIsExtApiRequesting(\"payWithFaucet\");\nexport const payWithFaucetError = getExtApiError(\"payWithFaucet\");\nexport const payWithFaucetTxId = compose(\n  get(\"txid\"),\n  getExtApiResponse(\"payWithFaucet\")\n);\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport { shortRecordToken } from \"src/helpers\";\n\nexport const commentsInfoByToken = get([\"comments\", \"comments\", \"byToken\"]);\nconst commentsVotesByToken = get([\"comments\", \"commentsVotes\", \"byToken\"]);\n\nexport const accessTimeByToken = get([\n  \"comments\",\n  \"comments\",\n  \"accessTimeByToken\"\n]);\nexport const commentsLikesByToken = get([\n  \"comments\",\n  \"commentsLikes\",\n  \"byToken\"\n]);\n\nconst getByToken = (token) => (mapByToken) => {\n  const shortToken = token && shortRecordToken(token);\n  return mapByToken[shortToken];\n};\n\nconst getSectionIds = ({ sectionIds } = {}) => sectionIds;\n\nconst getCommentsMap = ({ comments } = {}) => comments;\n\nconst getSectionComments =\n  (sectionId) =>\n  (commentsMap = {}) =>\n    commentsMap[sectionId];\n\nexport const makeGetRecordCommentSectionIds = (token) =>\n  createSelector(makeGetRecordCommentsInfo(token), getSectionIds);\n\nexport const makeGetRecordSectionComments = (token, sectionId) =>\n  createSelector(makeGetRecordComments(token), getSectionComments(sectionId));\n\nexport const makeGetRecordComments = (token) =>\n  createSelector(makeGetRecordCommentsInfo(token), getCommentsMap);\n\nexport const makeGetRecordCommentsInfo = (token) =>\n  createSelector(commentsInfoByToken, getByToken(token));\n\nexport const makeGetRecordCommentsVotes = (token) =>\n  createSelector(commentsVotesByToken, getByToken(token));\n\nexport const makeGetRecordCommentsLikes = (token) =>\n  createSelector(commentsLikesByToken, getByToken(token));\n\nexport const makeGetLastAccessTime = (token) =>\n  createSelector(accessTimeByToken, getByToken(token));\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\n\nexport const creditsByUserID = get([\"credits\", \"byUserID\"]);\n\nexport const makeGetCreditsAddedOnRescan = (userid) =>\n  createSelector(creditsByUserID, (creditsByUserID) =>\n    creditsByUserID[userid] ? creditsByUserID[userid].newcredits : null\n  );\n\nexport const makeGetUnspentUserCredits = (userid) =>\n  createSelector(creditsByUserID, (creditsByUserID) =>\n    creditsByUserID[userid] ? creditsByUserID[userid].unspent : []\n  );\n\nexport const makeGetSpentUserCredits = (userid) =>\n  createSelector(creditsByUserID, (creditsByUserID) =>\n    creditsByUserID[userid] ? creditsByUserID[userid].spent : []\n  );\n\nexport const makeGetUserCreditsPurchasesByTx = (userid) => {\n  const spentUserCredits = makeGetSpentUserCredits(userid);\n  const unspentUserCredits = makeGetUnspentUserCredits(userid);\n\n  return createSelector(\n    spentUserCredits,\n    unspentUserCredits,\n    (spent, unspent) => {\n      const groupedCredits =\n        spent &&\n        unspent &&\n        [...spent, ...unspent].reduce((result, credit) => {\n          if (credit.txid in result) {\n            result[credit.txid].numberPurchased++;\n          } else {\n            result[credit.txid] = {\n              price: credit.price / 100000000,\n              datePurchased: credit.datepurchased,\n              numberPurchased: 1,\n              txId: credit.txid\n            };\n          }\n          return result;\n        }, []);\n      const sortedCredits = groupedCredits\n        ? Object.values(groupedCredits).sort(\n            (a, b) => a.datePurchased - b.datePurchased\n          )\n        : [];\n\n      return sortedCredits;\n    }\n  );\n};\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport keys from \"lodash/keys\";\nimport { isEmpty } from \"src/helpers\";\nimport { shortRecordToken } from \"src/helpers\";\nimport { createDeepEqualSelector } from \"../helpers\";\n\nexport const proposalsByToken = get([\"proposals\", \"byToken\"]);\nexport const proposalSummariesByToken = get([\"proposals\", \"summaries\"]);\nexport const billingStatusChangesByToken = get([\n  \"proposals\",\n  \"billingStatusChanges\"\n]);\nexport const allProposalsByUserID = get([\"proposals\", \"allProposalsByUserId\"]);\nexport const allTokensByUserID = get([\"proposals\", \"allTokensByUserId\"]);\nexport const numOfProposalsByUserId = get([\n  \"proposals\",\n  \"numOfProposalsByUserId\"\n]);\nexport const allByVoteStatus = createDeepEqualSelector(\n  get([\"proposals\"]),\n  ({ allByVoteStatus }) => allByVoteStatus\n);\n\nexport const allByRecordStatus = createDeepEqualSelector(\n  get([\"proposals\"]),\n  ({ allByRecordStatus }) => allByRecordStatus\n);\n\nexport const tokenInventory = createDeepEqualSelector(\n  get([\"api\"]),\n  ({ tokenInventory }) => tokenInventory.payload\n);\nexport const newProposalToken = get([\"proposals\", \"newProposalToken\"]);\n\nexport const makeGetProposalByToken = (token) =>\n  createSelector(\n    proposalsByToken,\n    (propsByToken) => propsByToken[shortRecordToken(token)]\n  );\n\nexport const makeGetProposalSummaryByToken = (token) =>\n  createSelector(proposalSummariesByToken, (summaries) => {\n    const tokenFromSummary = keys(summaries).find(\n      (s) => shortRecordToken(s) === shortRecordToken(token)\n    );\n    return summaries[tokenFromSummary];\n  });\n\nexport const makeGetBillingStatusChangeMetadata = (token) =>\n  createSelector(billingStatusChangesByToken, (billingStatusChanges) => {\n    const t = keys(billingStatusChanges).find(\n      (s) => shortRecordToken(s) === shortRecordToken(token)\n    );\n    return billingStatusChanges[t];\n  });\n\nexport const makeGetUserProposalsTokens = (userId) =>\n  createSelector(allTokensByUserID, get(userId));\n\nexport const makeGetNumOfProposalsByUserId = (userId) =>\n  createSelector(numOfProposalsByUserId, get(userId));\n\n// changed this selector to keep the order in which the proposals are fetched. Old approach was messing with RFPs previously fetched.\nexport const makeGetUserProposals = (userId) =>\n  createSelector(allProposalsByUserID, (props) => {\n    return isEmpty(props) ? [] : props[userId];\n  });\n\nexport const makeGetProposalName = (token) =>\n  createSelector(makeGetProposalByToken(shortRecordToken(token)), (proposal) =>\n    proposal ? proposal.name : null\n  );\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport keys from \"lodash/keys\";\nimport { shortRecordToken } from \"src/helpers\";\n\nexport const voteSummariesByToken = get([\"proposalVotes\", \"byToken\"]);\n\nexport const bestBlock = get([\"proposalVotes\", \"bestBlock\"]);\n\nexport const makeGetProposalVoteSummary = (token) =>\n  createSelector(voteSummariesByToken, (voteSummaries) => {\n    const tokenFromSummary = keys(voteSummaries).find(\n      (s) => shortRecordToken(s) === shortRecordToken(token)\n    );\n    return voteSummaries[tokenFromSummary];\n  });\n\nexport const makeGetProposalVoteResults = (token) =>\n  createSelector(\n    makeGetProposalVoteSummary(token),\n    (summary) =>\n      summary && {\n        castvotes: summary.votes,\n        startvotereply: summary.startvotereply\n      }\n  );\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport orderBy from \"lodash/fp/orderBy\";\nimport { currentUserID } from \"./users\";\n\nexport const invoicesByToken = get([\"invoices\", \"byToken\"]);\nexport const allInvoicesTokens = get([\"invoices\", \"all\"]);\nexport const exchangeRates = get([\"invoices\", \"exchangeRates\"]);\nexport const subContractors = get([\"invoices\", \"subContractors\"]);\nexport const newInvoiceToken = get([\"invoices\", \"newInvoiceToken\"]);\n\nconst sortByNewestFirst = orderBy([\"timestamp\"], [\"desc\"]);\n\nexport const allInvoices = createSelector(\n  allInvoicesTokens,\n  invoicesByToken,\n  (tokens, invByToken) => {\n    return sortByNewestFirst(tokens.map((token) => invByToken[token]));\n  }\n);\n\nexport const makeGetInvoicesByUserID = (userID) =>\n  createSelector(allInvoices, (invoices) =>\n    invoices.filter((inv) => inv.userid === userID)\n  );\n\nexport const getCurrentUserInvoices = createSelector(\n  allInvoices,\n  currentUserID,\n  (invoices, currUserID) => {\n    return invoices.filter((inv) => inv.userid === currUserID);\n  }\n);\n\nexport const makeGetInvoiceByToken = (token) =>\n  createSelector(invoicesByToken, get(token));\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport orderBy from \"lodash/fp/orderBy\";\n\nexport const payouts = get([\"invoicePayouts\", \"payouts\"]);\nexport const payoutSummaries = get([\"invoicePayouts\", \"payoutSummaries\"]);\n\nexport const lineItemPayouts = createSelector(\n  payoutSummaries,\n  (invoices = []) =>\n    orderBy(\n      [\"timestamp\"],\n      [\"asc\"]\n    )(\n      invoices.reduce(\n        (acc, invoice) =>\n          acc.concat(\n            invoice.input.lineitems.map((lineItem) => ({\n              ...lineItem,\n              timestamp: invoice.timestamp,\n              token: invoice.censorshiprecord.token,\n              labor:\n                (lineItem.labor / 60) * (invoice.input.contractorrate / 100),\n              expenses: lineItem.expenses / 100,\n              description: lineItem.description.replace(/#/g, \"\"),\n              month: invoice.input.month,\n              year: invoice.input.year,\n              paiddate: new Date(\n                invoice.payment.timelastupdated * 1000\n              ).toLocaleString(),\n              amountreceived: invoice.payment.amountreceived / 100000000\n            }))\n          ),\n        []\n      )\n    )\n);\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport orderBy from \"lodash/fp/orderBy\";\nimport { currentUserID } from \"./users\";\n\nexport const dccsByToken = get([\"dccs\", \"byToken\"]);\nexport const allDccsTokens = get([\"dccs\", \"all\"]);\nexport const dccsByStatus = get([\"dccs\", \"byStatus\"]);\nexport const newDccToken = get([\"dccs\", \"newDccToken\"]);\nconst sortByNewestFirst = orderBy([\"timestamp\"], [\"desc\"]);\n\nexport const allDccs = createSelector(\n  allDccsTokens,\n  dccsByToken,\n  (tokens, invByToken) => {\n    return sortByNewestFirst(tokens.map((token) => invByToken[token]));\n  }\n);\n\nexport const makeGetDccsByUserID = (userID) =>\n  createSelector(allDccs, (dccs) =>\n    dccs.filter((inv) => inv.userid === userID)\n  );\n\nexport const getCurrentUserDccs = createSelector(\n  allDccs,\n  currentUserID,\n  (dccs, currUserID) => {\n    return dccs.filter((inv) => inv.userid === currUserID);\n  }\n);\n\nexport const makeGetDccByToken = (token) =>\n  createSelector(dccsByToken, get(token));\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport { PAYWALL_STATUS_PAID, PAYWALL_STATUS_WAITING } from \"src/constants\";\n\nexport const paywallByUserID = get([\"paywall\", \"byUserID\"]);\n\nexport const makeGetPaywallByUserID = (userID) =>\n  createSelector(paywallByUserID, get(userID));\n\nexport const makeGetUserPaywallStatus = (userID) =>\n  createSelector(makeGetPaywallByUserID(userID), (paywall) =>\n    paywall ? getUserPaywallStatus(paywall) : null\n  );\n\nexport const makeGetPaywallCreditPrice = (userID) =>\n  createSelector(makeGetPaywallByUserID(userID), (paywall) =>\n    paywall ? paywall.creditprice / 100000000 : null\n  );\n\nexport const getUserPaywallStatus = (paywall) => {\n  if (paywall.isPaid) {\n    return PAYWALL_STATUS_PAID;\n  }\n  return paywall.status || PAYWALL_STATUS_WAITING;\n};\n\nconst createPaywallSelector = (userID, key) =>\n  createSelector(makeGetPaywallByUserID(userID), (paywall) =>\n    paywall ? paywall[key] : null\n  );\n\nexport const makeGetUserIsPaid = (userID) =>\n  createPaywallSelector(userID, \"isPaid\");\n\nexport const makeGetPaywallAddress = (userID) =>\n  createPaywallSelector(userID, \"paywalladdress\");\n\nexport const makeGetPaywallTxNotBefore = (userID) =>\n  createPaywallSelector(userID, \"creditprice\");\n\nexport const makeGetPaywallTxid = (userID) =>\n  createPaywallSelector(userID, \"txid\");\n\nexport const makeGetPaywallAmount = (userID) =>\n  createPaywallSelector(userID, \"amount\");\n\nexport const makeGetPaywallConfirmations = (userID) =>\n  createPaywallSelector(userID, \"confirmations\");\n\nexport const makeGetPaywallFaucetTxid = (userID) =>\n  createPaywallSelector(userID, \"faucetTxid\");\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\n\nexport const codeStatsByUserID = get([\"codestats\", \"byUserID\"]);\nexport const userCodeStats = (userID) =>\n  createSelector(codeStatsByUserID, get(userID));\n\nexport const makeGetCodeStatsByUserID = (userID, start, end) =>\n  createSelector(userCodeStats(userID), (userCodeStats) =>\n    userCodeStats ? userCodeStats[`${start}${end}`] : null\n  );\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport orderBy from \"lodash/fp/orderBy\";\n\nconst proposals = get([\"proposalBilling\", \"proposalsList\"]);\nconst details = get([\"proposalBilling\", \"proposalDetails\"]);\n\nexport const proposalsBilled = createSelector(proposals, (proposals) =>\n  proposals ? orderBy([\"totalbilled\"], [\"desc\"], proposals) : null\n);\n\nexport const proposalBillingDetails = details;\n","import { createSelector } from \"reselect\";\nimport get from \"lodash/fp/get\";\nimport { shortRecordToken } from \"src/helpers\";\n\nconst proposalOwnerBillingByToken = get([\n  \"proposalOwnerBilling\",\n  \"byProposalToken\"\n]);\n\nexport const makeGetBillingInfoByToken = (token) =>\n  createSelector(proposalOwnerBillingByToken, get(shortRecordToken(token)));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statsTitle\":\"Detail_statsTitle__9mEiN\",\"uilink\":\"Detail_uilink__7PmzV\",\"titleLinkWrapper\":\"Detail_titleLinkWrapper__OhmB_\",\"collapse\":\"Detail_collapse__28jpV\",\"statsHeader\":\"Detail_statsHeader__3lzD2\",\"codeStats\":\"Detail_codeStats__3464b\",\"singleStat\":\"Detail_singleStat__3AFhS\",\"addition\":\"Detail_addition__1YFXQ\",\"deletion\":\"Detail_deletion__1eiLX\",\"contributionDetails\":\"Detail_contributionDetails__3r7sO\",\"invoiceLinkWrapper\":\"Detail_invoiceLinkWrapper__1jUOK\",\"prs\":\"Detail_prs__3bGwD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sharedNavAtribute\":\"HeaderNav_sharedNavAtribute__QoKxe\",\"navContainer\":\"HeaderNav_navContainer__22YWV HeaderNav_sharedNavAtribute__QoKxe\",\"loggedInContainer\":\"HeaderNav_loggedInContainer__1t1Gb\",\"noCreditsContainer\":\"HeaderNav_noCreditsContainer__nTKb-\",\"navLinkCtn\":\"HeaderNav_navLinkCtn__2LmuQ HeaderNav_sharedNavAtribute__QoKxe\",\"navLink\":\"HeaderNav_navLink__Wcu6P HeaderNav_sharedNavAtribute__QoKxe\",\"activeDropdownItem\":\"HeaderNav_activeDropdownItem__1kamu\",\"activeNavLink\":\"HeaderNav_activeNavLink__1unlU\",\"dropdownList\":\"HeaderNav_dropdownList__1XY9O\",\"themeToggleWrapper\":\"HeaderNav_themeToggleWrapper__3auzw\",\"publicWrapper\":\"HeaderNav_publicWrapper__3Mh36\",\"dropdown\":\"HeaderNav_dropdown__2xkXy\",\"noCreditsDropdown\":\"HeaderNav_noCreditsDropdown__2OaHw\"};","import { useEffect } from \"react\";\n\nexport default function useThrowError(error) {\n  useEffect(() => {\n    if (error) {\n      throw error;\n    }\n  }, [error]);\n}\n","import qs from \"query-string\";\n\nexport const setQueryStringWithoutPageReload = (qsValue) => {\n  const newurl =\n    window.location.protocol +\n    \"//\" +\n    window.location.host +\n    window.location.pathname +\n    qsValue;\n  window.history.replaceState({ path: newurl, search: qsValue }, \"\", newurl);\n};\n\nexport const getQueryStringValue = (\n  key,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  return values[key];\n};\n\nexport const getQueryStringValues = (queryString = window.location.search) =>\n  qs.parse(queryString);\n\nexport const setQueryStringValue = (\n  key,\n  value,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  const newQsValue = qs.stringify({\n    ...values,\n    [key]: value\n  });\n  setQueryStringWithoutPageReload(`?${newQsValue}`);\n};\n\nexport const removeQueryStringsFromUrl = (url, parameter, parameter2) => {\n  const newurl = url\n    .replace(new RegExp(\"[?&]\" + parameter + \"=[^&#]*(#.*)?$\"), \"$1\")\n    .replace(new RegExp(\"([?&])\" + parameter + \"=[^&]*&\"), \"$1\")\n    .replace(new RegExp(\"[?&]\" + parameter2 + \"=[^&#]*(#.*)?$\"), \"$1\")\n    .replace(new RegExp(\"([?&])\" + parameter2 + \"=[^&]*&\"), \"$1\");\n  window.history.replaceState({ path: newurl }, \"\", newurl);\n};\n","import React, {\n  createContext,\n  useContext,\n  useMemo,\n  useRef,\n  useEffect\n} from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nconst routerCtx = createContext();\n\nexport const useRouter = () => useContext(routerCtx);\n\nconst RouterProvider = ({ location, children, ...rest }) => {\n  const navigationHistory = useRef([]);\n  const ctxValue = useMemo(() => ({ ...rest, location }), [rest, location]);\n  useEffect(() => {\n    navigationHistory.current = [location, ...navigationHistory.current];\n  }, [location]);\n  return (\n    <routerCtx.Provider\n      value={{ ...ctxValue, navigationHistory: navigationHistory.current }}\n    >\n      {children}\n    </routerCtx.Provider>\n  );\n};\n\nexport default withRouter(RouterProvider);\n","import React from \"react\";\nimport { BrowserRouter as ReactRouter } from \"react-router-dom\";\nimport RouterProvider from \"./RouterProvider\";\n\nconst Router = ({ children }) => (\n  <ReactRouter>\n    <RouterProvider>{children}</RouterProvider>\n  </ReactRouter>\n);\n\nexport default Router;\n","import React, { useMemo, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { matchPath } from \"react-router-dom\";\nimport { Link, classNames, useTheme, DEFAULT_DARK_THEME_NAME } from \"pi-ui\";\nimport { useRouter } from \"src/components/Router\";\nimport styles from \"./GoBackLink.module.css\";\nimport findIndex from \"lodash/fp/findIndex\";\n\nconst backArrow = <>&#8592;</>;\n\nfunction isExactMatch(match) {\n  return match?.isExact;\n}\n\nconst GoBackLink = ({ label, hierarchy, breakpoint }) => {\n  const { themeName } = useTheme();\n  const isDarkTheme = themeName === DEFAULT_DARK_THEME_NAME;\n  const { history, navigationHistory } = useRouter();\n  const hierarchyRef = useRef(hierarchy);\n  const previousHierarchyLink = useMemo(() => {\n    if (!hierarchyRef.current) return;\n    const hierarchyMatches = hierarchyRef.current.map((path) =>\n      matchPath(history.location.pathname, {\n        path,\n        strict: true\n      })\n    );\n    const currentIndex = hierarchyMatches.findIndex(isExactMatch);\n    const previousIndex = currentIndex > 0 ? currentIndex - 1 : 0;\n    const previousMatch = hierarchyMatches[previousIndex];\n    return previousMatch.url;\n  }, [history]);\n\n  const previousDefaultLinkIndex = useMemo(\n    () =>\n      findIndex(\n        (prev) =>\n          !matchPath(prev.pathname, {\n            path: breakpoint,\n            strict: true\n          })\n      )(navigationHistory),\n    [navigationHistory, breakpoint]\n  );\n\n  return !previousHierarchyLink && previousDefaultLinkIndex < 0 ? null : (\n    <div className={styles.returnLinkContainer}>\n      <Link\n        className={classNames(\n          styles.returnLink,\n          isDarkTheme && styles.darkReturnLink\n        )}\n        onClick={() =>\n          previousHierarchyLink\n            ? history.push(previousHierarchyLink)\n            : history.go(-(previousDefaultLinkIndex + 1))\n        }\n      >\n        {backArrow} {label}\n      </Link>\n    </div>\n  );\n};\n\nGoBackLink.propTypes = {\n  label: PropTypes.string,\n  hierarchy: PropTypes.arrayOf(PropTypes.string),\n  breakpoint: PropTypes.string\n};\n\nGoBackLink.defaultProps = {\n  label: \"Go Back\"\n};\n\nexport default GoBackLink;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"thumbnailGrid\":\"Files_thumbnailGrid__2DFxb\",\"fileError\":\"Files_fileError__1YTen\",\"fileErrorText\":\"Files_fileErrorText__31dut\",\"marginRight\":\"Files_marginRight__ySxfa\",\"removeFileIcon\":\"Files_removeFileIcon__1r2s0\",\"fileThumbnailWrapper\":\"Files_fileThumbnailWrapper__FfP4u\",\"fileThumbnail\":\"Files_fileThumbnail__3YAnA\",\"imageThumbnailWrapper\":\"Files_imageThumbnailWrapper__etpVz\",\"imageThumbnail\":\"Files_imageThumbnail__Lv-_T\",\"fileThumbnailText\":\"Files_fileThumbnailText__27h4X\"};","import CryptoJS from \"crypto-js\";\nimport get from \"lodash/fp/get\";\nimport flow from \"lodash/fp/flow\";\nimport filter from \"lodash/fp/filter\";\nimport gte from \"lodash/fp/gt\";\nimport range from \"lodash/fp/range\";\nimport map from \"lodash/fp/map\";\nimport splitFp from \"lodash/fp/split\";\nimport reduce from \"lodash/fp/reduce\";\nimport compose from \"lodash/fp/compose\";\nimport uniq from \"lodash/fp/uniq\";\nimport * as pki from \"./lib/pki\";\nimport { sha3_256 } from \"js-sha3\";\nimport { capitalize } from \"./utils/strings\";\n\nimport {\n  INVALID_FILE,\n  INVOICE_STATUS_APPROVED,\n  INVOICE_STATUS_DISPUTED,\n  INVOICE_STATUS_NEW,\n  INVOICE_STATUS_PAID,\n  INVOICE_STATUS_REJECTED,\n  INVOICE_STATUS_UPDATED,\n  PROPOSAL_FILTER_ALL,\n  PROPOSAL_VOTING_ACTIVE,\n  PROPOSAL_VOTING_AUTHORIZED,\n  PROPOSAL_VOTING_FINISHED,\n  PROPOSAL_VOTING_NOT_AUTHORIZED,\n  PROPOSAL_METADATA_FILENAME,\n  PROPOSAL_STATUS_PUBLIC,\n  PROPOSAL_STATUS_CENSORED,\n  PROPOSAL_STATUS_ARCHIVED,\n  VOTE_METADATA_FILENAME,\n  USER_METADATA_PLUGIN,\n  MONTHS_LABELS,\n  INVALID_DATE_LABEL\n} from \"./constants.js\";\n\nexport const digestPayload = (payload) =>\n  CryptoJS.SHA256(\n    arrayBufferToWordArray(base64ToArrayBuffer(payload))\n  ).toString(CryptoJS.enc.Hex);\n\nexport const digest = (payload) => sha3_256(payload);\n\nexport const utoa = (str) => window.btoa(unescape(encodeURIComponent(str)));\nexport const atou = (str) => decodeURIComponent(escape(window.atob(str)));\n\n// shortToken receives a full lengthed record token and parses to its short\n// form\nexport const shortRecordToken = (token) => token.substring(0, 7);\n\n// parseReceivedProposalsMap iterates over BE returned proposals map[token] => proposal, parses the\n// metadata file & the proposal statuses\nexport const parseReceivedProposalsMap = (proposals) => {\n  const parsedProps = {};\n  for (const [token, prop] of Object.entries(proposals)) {\n    parsedProps[shortRecordToken(token)] = {\n      ...parseRawProposal(prop)\n    };\n  }\n  return parsedProps;\n};\n\n/**\n * getProposalTimestamps\n * @param {Object} proposal\n * @returns {{publishedat: number, censoredat: number, abandonedat: number}} Object with publishedat, censoredat, abandonedat\n */\n\nconst getProposalTimestamps = (mdByStatus = {}) => ({\n  publishedat: mdByStatus[PROPOSAL_STATUS_PUBLIC]?.timestamp || 0,\n  censoredat: mdByStatus[PROPOSAL_STATUS_CENSORED]?.timestamp || 0,\n  abandonedat: mdByStatus[PROPOSAL_STATUS_ARCHIVED]?.timestamp || 0\n});\n\n// parseProposalMetadata accepts a proposal object parses it's metadata\n// and returns it as object of the form { name, startdate, enddate,\n// amount, domain }\n//\n// censored proposals won't have metadata, in this case this function will\n// return an empty object\nconst parseProposalMetadata = (proposal = {}) => {\n  const metadata =\n    proposal.files &&\n    proposal.files.find((f) => f.name === PROPOSAL_METADATA_FILENAME);\n  return metadata ? JSON.parse(atob(metadata.payload)) : {};\n};\n\n// parseVoteMetadata accepts a proposal object and parses its votes metadata.\n//\n// censored proposals won't have metadata, in this case this function will\n// return an empty object\nconst parseVoteMetadata = (proposal = {}) => {\n  const metadata =\n    proposal.files &&\n    proposal.files.find((f) => f.name === VOTE_METADATA_FILENAME);\n  return metadata ? JSON.parse(atob(metadata.payload)) : {};\n};\n\n// parseUserMetadata accepts a proposal object and parses its user plugin\n// metadata. Returns a key-value object where the key is the status for\n// that status change, and the value is their parsed json payload. If\n// the metadata was not a status change one, the data will be inserted\n// plainly in the object.\n//\n// proposals without any user metadata will return an empty object\nconst parseUserPluginMetadata = (proposal = {}) =>\n  compose(\n    reduce(\n      (acc, curr) =>\n        curr.status\n          ? { ...acc, byStatus: { ...acc.byStatus, [curr.status]: curr } }\n          : { ...acc, ...curr },\n      { byStatus: {} }\n    ),\n    map(({ payload }) => {\n      try {\n        const parsedPayload = JSON.parse(payload);\n        return parsedPayload;\n      } catch (e) {\n        // Parses metadata payload that may be nested without a json parent\n        // on the payload response. This happens when there were more than\n        // one status change to the proposal.\n        return compose(\n          reduce(\n            (acc, curr) =>\n              curr.status\n                ? {\n                    ...acc,\n                    byStatus: {\n                      ...acc.byStatus,\n                      [curr.status]: curr\n                    }\n                  }\n                : { ...acc, ...curr },\n            { byStatus: {} }\n          ),\n          filter((md) => Object.keys(md).length),\n          map((parsed) => JSON.parse(`{${parsed}}`)),\n          splitFp(/\\{(.*?)\\}/)\n        )(payload);\n      }\n    }),\n    filter(({ pluginid }) => pluginid === USER_METADATA_PLUGIN),\n    get(\"metadata\")\n  )(proposal);\n\n// parseProposalIndexFile accepts a proposal object and parses its index.md\n// file.\n//\n// censored proposals won't have metadata, in this case this function will\n// return an empty object\nconst parseProposalIndexFile = (proposal = {}) => {\n  const index =\n    proposal.files && proposal.files.find((f) => f.name === \"index.md\");\n  return index ? { description: getTextFromIndexMd(index) } : {};\n};\n\n// parseRawProposal accepts raw proposal object received from BE and parses\n// its metadata & status changes\nexport const parseRawProposal = (proposal) => {\n  // Parse metdata\n  const { name, startdate, enddate, domain, amount, legacytoken } =\n    parseProposalMetadata(proposal);\n  const { linkby, linkto } = parseVoteMetadata(proposal);\n  const { description } = parseProposalIndexFile(proposal);\n  const usermds = parseUserPluginMetadata(proposal);\n  const statuschangemsg = usermds.byStatus[proposal.status]?.reason;\n  const statuschangepk = usermds.byStatus[proposal.status]?.publickey;\n\n  // get prop timestamps\n  const { publishedat, censoredat, abandonedat } = getProposalTimestamps(\n    usermds.byStatus\n  );\n\n  return {\n    ...proposal,\n    description: description || proposal.description,\n    name: name || proposal.name,\n    amount: amount / 100, // BE stores amount in cents - calculate USD.\n    startDate: startdate,\n    endDate: enddate,\n    legacytoken,\n    domain,\n    linkby,\n    userid: usermds.userid || proposal.userid,\n    linkto,\n    commentsCount: proposal.commentsCount || 0,\n    statuschangemsg,\n    statuschangepk,\n    publishedat,\n    censoredat,\n    abandonedat\n  };\n};\n\n// parseRawProposalsBatch accepts raw proposal batch object received from BE and parses\n// the respective metadata & status changes for each proposal\nexport const parseRawProposalsBatch = (proposals) =>\n  Object.keys(proposals).reduce(\n    (acc, curr) => ({\n      ...acc,\n      [curr]: parseRawProposal(proposals[curr])\n    }),\n    {}\n  );\n\n// This function extracts the content of index.md's payload which includes the\n// propsoal description.\nexport const getTextFromIndexMd = (file = {}) => {\n  if (!file.payload) return \"\";\n  return atou(file.payload);\n};\n\nexport const getIndexMdFromText = (text = \"\") => ({\n  name: \"index.md\",\n  mime: \"text/plain; charset=utf-8\",\n  payload: utoa(text)\n});\n\nexport const getTextFromJsonToCsv = (file) => {\n  const json = JSON.parse(atou(file.payload));\n  return json;\n};\n\nexport const objectToBuffer = (obj) => Buffer.from(JSON.stringify(obj));\n\nexport const bufferToBase64String = (buf) => buf.toString(\"base64\");\n\nexport const objectToSHA256 = (obj) => {\n  const buffer = objectToBuffer(obj);\n  const base64 = bufferToBase64String(buffer);\n  return digestPayload(base64);\n};\n\n// Copied from https://stackoverflow.com/a/43131635\nexport const hexToArray = (hex) =>\n  new Uint8Array(hex.match(/[\\da-f]{2}/gi).map((h) => parseInt(h, 16)));\n\n// Copied from https://stackoverflow.com/a/21797381\nexport const base64ToArrayBuffer = (base64) => {\n  const binary_string = window.atob(base64);\n  const len = binary_string.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) {\n    bytes[i] = binary_string.charCodeAt(i);\n  }\n  return bytes.buffer;\n};\n\n// Copied from https://stackoverflow.com/a/33918579\nexport const arrayBufferToWordArray = (ab) => {\n  const i8a = new Uint8Array(ab);\n  const a = [];\n  for (let i = 0; i < i8a.length; i += 4) {\n    // eslint-disable-next-line\n    a.push(\n      (i8a[i] << 24) | (i8a[i + 1] << 16) | (i8a[i + 2] << 8) | i8a[i + 3]\n    );\n  }\n  return CryptoJS.lib.WordArray.create(a, i8a.length);\n};\n\nexport const getUsernameFieldLabel = (policy, defaultText = \"Username\") => {\n  if (policy) {\n    return `${defaultText} (${policy.minusernamelength} - ${policy.maxusernamelength} characters)`;\n  }\n  return defaultText;\n};\n\nexport const getPasswordFieldLabel = (policy, defaultText = \"Password\") => {\n  if (policy) {\n    return `${defaultText} (at least ${policy.minpasswordlength} characters)`;\n  }\n  return defaultText;\n};\n\nexport const getRandomColor = () => {\n  const letters = \"0123456789ABCDEF\";\n  let color = \"#3F\";\n  for (let i = 0; i < 4; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n};\n\nexport const uniqueID = (prefix) =>\n  prefix + \"_\" + Math.random().toString(36).substr(2, 9);\n\nexport const verifyUserPubkey = (userid, keyToBeMatched, keyMismatchAction) =>\n  pki.getKeys(userid).then((keys) => {\n    const res = keys ? keys.publicKey !== keyToBeMatched : true;\n    keyMismatchAction(res);\n  });\n\nexport const multiplyFloatingNumbers = (num1, num2) => {\n  let cont1 = 0;\n  let cont2 = 0;\n  while (num1 < 1) {\n    num1 *= 10;\n    cont1++;\n  }\n  while (num2 < 1) {\n    num2 *= 10;\n    cont2++;\n  }\n  return (num1 * num2) / Math.pow(10, cont1 + cont2);\n};\n\nexport const countPublicProposals = (proposals) => {\n  const defaultObj = {\n    [PROPOSAL_VOTING_ACTIVE]: 0,\n    [PROPOSAL_VOTING_NOT_AUTHORIZED]: 0,\n    [PROPOSAL_FILTER_ALL]: 0\n  };\n  return proposals\n    ? proposals.reduce((acc, cur) => {\n        if (\n          cur.status === PROPOSAL_VOTING_NOT_AUTHORIZED ||\n          cur.status === PROPOSAL_VOTING_AUTHORIZED\n        )\n          acc[PROPOSAL_VOTING_NOT_AUTHORIZED]++;\n        else if (cur.status === PROPOSAL_VOTING_ACTIVE)\n          acc[PROPOSAL_VOTING_ACTIVE]++;\n        else if (cur.status === PROPOSAL_VOTING_FINISHED)\n          acc[PROPOSAL_VOTING_FINISHED]++;\n        acc[PROPOSAL_FILTER_ALL]++;\n        return acc;\n      }, defaultObj)\n    : defaultObj;\n};\n\nexport const proposalsArrayToObject = (arr) =>\n  arr\n    ? arr.reduce((acc, cur) => {\n        return {\n          ...acc,\n          [cur.censorshiprecord.token]: cur\n        };\n      }, {})\n    : {};\n\nexport const removeProposalsDuplicates = (arr1, arr2) => {\n  const mergedObj = {\n    ...proposalsArrayToObject(arr1),\n    ...proposalsArrayToObject(arr2)\n  };\n  return Object.keys(mergedObj).map((item) => mergedObj[item]);\n};\n\nexport const getKeyByValue = (obj, val) =>\n  Object.values(obj).find((value) => value.digest === val);\n\n// CMS HELPERS\nexport const renderInvoiceStatus = (status) => {\n  return mapInvoiceStatusToMessage[status] || \"Invalid Invoice Status\";\n};\n\nconst mapInvoiceStatusToMessage = {\n  [INVOICE_STATUS_NEW]: \"Invoice unreviewed\",\n  [INVOICE_STATUS_UPDATED]: \"Invoice updated and unreviewed\",\n  [INVOICE_STATUS_REJECTED]: \"Invoice rejected\",\n  [INVOICE_STATUS_DISPUTED]: \"Invoice disputed\",\n  [INVOICE_STATUS_APPROVED]: \"Invoice approved\",\n  [INVOICE_STATUS_PAID]: \"Invoice paid\"\n};\n\nexport const formatDate = (date) => {\n  const twoChars = (v) => (v < 10 ? `0${v}` : v);\n  const d = new Date(date * 1000);\n  const year = d.getUTCFullYear();\n  const month = twoChars(d.getUTCMonth());\n  const day = twoChars(d.getUTCDate());\n  const hours = twoChars(d.getUTCHours());\n  const minutes = twoChars(d.getUTCMinutes());\n  const seconds = twoChars(d.getUTCSeconds());\n  return `${year}-${month}-${day}-${hours}:${minutes}:${seconds}`;\n};\n\nexport const getJsonData = (base64) => {\n  const data = atob(base64.split(\",\").pop());\n  try {\n    const json = JSON.parse(data);\n    if (!json) throw new Error(INVALID_FILE);\n    return json;\n  } catch (e) {\n    throw new Error(INVALID_FILE);\n  }\n};\n\n// CSV\nconst DELIMITER_CHAR = \",\";\nconst COMMENT_CHAR = \"#\";\nconst LINE_DELIMITER = \"\\n\";\n\nexport const isComment = (line) => line[0] === COMMENT_CHAR;\n\nconst split = (string, delimiter) => string.split(delimiter);\n\nexport const splitLine = (string) => split(string, LINE_DELIMITER);\n\nexport const splitColumn = (string) => split(string, DELIMITER_CHAR);\n\nconst jsonCsvMap = (line, linenum) => ({\n  linenum,\n  type: +line[0],\n  subtype: line[1],\n  description: line[2],\n  proposaltoken: line[3],\n  hours: +line[4],\n  totalcost: +line[5]\n});\n\nexport const csvToJson = (csv) =>\n  splitLine(csv).map(splitColumn).map(jsonCsvMap);\n\nexport const getMonthOptions = () => {\n  const month = getCurrentMonth();\n  return flow(range(), filter(gte(month)))(1, 13);\n};\n\nexport const getCurrentMonth = () => {\n  const d = new Date();\n  return d.getMonth() + 1;\n};\n\nexport const getCurrentYear = () => {\n  const d = new Date();\n  return d.getFullYear();\n};\n\nexport const getCurrentDateValue = () => {\n  return {\n    month: getCurrentMonth(),\n    year: getCurrentYear()\n  };\n};\n\nexport const getDateFromYearAndMonth = ({ year, month }) =>\n  new Date(year, month);\n\nexport const getYearOptions = (initial, lastYear) => {\n  const isYearValid = (y) => y < lastYear + getCurrentMonth() - 1;\n  return flow(range(), filter(isYearValid))(initial, lastYear + 1);\n};\n\nexport const fromMinutesToHours = (minutes) =>\n  parseFloat(minutes / 60).toFixed(2);\nexport const fromHoursToMinutes = (hours) => parseInt(hours * 60, 10);\nexport const fromUSDCentsToUSDUnits = (cents) =>\n  parseFloat(cents / 100).toFixed(2);\nexport const fromUSDUnitsToUSDCents = (units) => parseInt(units * 100, 10);\n\nexport const isEmpty = (obj) => Object.keys(obj).length === 0;\n\n/** Pure function that given 2 UNIX timestamps returns the differnce between them in minutes */\nexport const getTimeDiffInMinutes = (d1, d2) => {\n  return (d1 - d2) / 60e3;\n};\n\n/**\n * Function to format supported domains in the format for Select/Dropdown\n * components\n * @param {array} supporteddomains\n */\nexport const getContractorDomains = (supporteddomains) => [\n  { label: \"No domain defined\", value: 0 },\n  ...supporteddomains.map((item) => ({\n    label: capitalize(item.description),\n    value: item.type\n  }))\n];\n\n/**\n * Function to return the domain name given an array of contractor domains and\n * a domain type\n * @param {array} contractorDomains\n * @param {number|string} op\n */\nexport const getDomainName = (contractorDomains, op) => {\n  const domain = contractorDomains.find((domain) => domain.value === op);\n  return domain ? domain.label : \"\";\n};\n\n/**\n * Converts { day, month, year } object to an unix second timestamp\n * If `endOfDay` is active, returns the 23:59 time for given date. Else, returns\n * 00:00.\n * @param {object} date\n * @param {boolean} endOfDay\n */\nexport const convertObjectToUnixTimestamp = (date, endOfDay) => {\n  if (!date) return 0;\n  const { day, month, year } = date;\n  return endOfDay\n    ? new Date(year, month - 1, day, 23, 59, 59).getTime() / 1000\n    : new Date(year, month - 1, day, 0, 0, 1).getTime() / 1000;\n};\n\n/** INLINE IMAGES HELPERS */\n/**\n * replaceBlobsByDigestsAndGetFiles uses a regex to parse images and replace blobs by files digests\n * @param {String} description the markdown description\n * @param {Map} map the map of blob -> file\n * @returns {object} { description, files }\n */\nexport function replaceBlobsByDigestsAndGetFiles(description, map) {\n  const imageRegexParser =\n    /!\\[[^\\]]*\\]\\((?<blob>.*?)(?=\"|\\))(?<optionalpart>\".*\")?\\)/g;\n  const imgs = description.matchAll(imageRegexParser);\n  let newDescription = description;\n  const files = [];\n  /**\n   * This for loop will update the newDescription replacing the image blobs by their digests and push the img object to an array of files\n   * */\n  for (const img of imgs) {\n    const { blob } = img.groups;\n    if (map.has(blob)) {\n      newDescription = newDescription.replace(blob, map.get(blob).digest);\n      files.push(map.get(blob));\n    }\n  }\n  return { description: newDescription, files };\n}\n\nconst b64toBlob = (b64Data, contentType = \"\", sliceSize = 512) => {\n  const byteCharacters = atob(b64Data);\n  const byteArrays = [];\n\n  for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    const slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    const byteNumbers = new Array(slice.length);\n    for (let i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    const byteArray = new Uint8Array(byteNumbers);\n    byteArrays.push(byteArray);\n  }\n\n  const blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\n/**\n * replaceBlobsByDigestsAndGetFiles uses a regex to parse images digests and create a new Blob\n * @param {String} description the markdown description\n * @param {Map} map the map of blob -> file\n * @returns {object} { description, files }\n */\nexport function replaceImgDigestByBlob(vals, map) {\n  if (!vals) return { text: \"\", markdownFiles: [] };\n  const { description, files } = vals;\n  const imageRegexParser =\n    /!\\[[^\\]]*\\]\\((?<digest>.*?)(?=\"|\\))(?<optionalpart>\".*\")?\\)/g;\n  const imgs = description.matchAll(imageRegexParser);\n  let newText = description;\n  const markdownFiles = [];\n  /**\n   * This for loop will update the newText replacing images digest by a blob and push the img object to an array of markdownFiles\n   * */\n  for (const img of imgs) {\n    const { digest } = img.groups;\n    const obj = getKeyByValue(files, digest);\n    if (obj) {\n      const urlCreator = window.URL || window.webkitURL;\n      const blobUrl = urlCreator.createObjectURL(\n        b64toBlob(obj.payload, obj.mime)\n      );\n      map.set(blobUrl, obj);\n      markdownFiles.push(obj);\n      newText = newText.replace(digest, blobUrl);\n    }\n  }\n  return { text: newText, markdownFiles };\n}\n\n/**\n * getAttachmentsFiles removes the metadata and index files\n * @param {Array} files\n * @returns {Array} [attachments]\n */\nexport function getAttachmentsFiles(files) {\n  return files.filter(\n    (f) =>\n      ![\n        \"index.md\",\n        \"data.json\",\n        PROPOSAL_METADATA_FILENAME,\n        VOTE_METADATA_FILENAME\n      ].includes(f.name)\n  );\n}\n\n/**\n * getChildrenComments accepts an array of comments and a subset of comment ids\n * as parents and returns the ids of the children comments as an array.\n * @param {Array} comments\n * @param {Array} parents comment ids\n * @param {Array} children comment ids\n */\nconst getChildrenComments = (comments, parents) =>\n  comments\n    .filter(({ parentid }) => parents.includes(parentid))\n    .map(({ commentid }) => commentid);\n\n/**\n * calculateAuthorUpdateTree accepts an array of comments and an author update\n * id. It calculates the author update thread comment tree then returns\n * the tree as an sub-array of the original array.\n * @param {String} authorUpdateId\n * @param {Array} comments\n * @returns {Array} array of author update thread comments.\n */\nexport const calculateAuthorUpdateTree = (authorUpdateId, comments) => {\n  let authorUpdateTree = [authorUpdateId];\n  let children = getChildrenComments(comments, authorUpdateTree);\n  let allTreeComments = uniq([...authorUpdateTree, ...children]);\n  while (allTreeComments.length > authorUpdateTree.length) {\n    authorUpdateTree = allTreeComments;\n    const parents = [...authorUpdateTree];\n    children = getChildrenComments(comments, parents);\n    allTreeComments = uniq([...authorUpdateTree, ...children]);\n  }\n  return allTreeComments;\n};\n\n/**\n * formatDateToInternationalString accepts an object of day, month and year.\n * It returns a string of human viewable international date from the result\n * of DatePicker or BackEnd and supposes they are correct.\n * String format: 08 Sep 2021\n * @param {object} { day, month, year }\n * @returns {string}\n */\nexport const formatDateToInternationalString = ({ day, month, year }) => {\n  const monthLabel = MONTHS_LABELS[month - 1];\n  if (monthLabel === undefined) {\n    return INVALID_DATE_LABEL;\n  }\n  const dayView = `0${day}`.slice(-2);\n  return `${dayView} ${MONTHS_LABELS[month - 1]} ${year}`;\n};\n","import React, { useCallback } from \"react\";\nimport { Select } from \"pi-ui\";\nimport useAsyncState from \"src/hooks/utils/useAsyncState\";\n\nconst customStyles = {\n  container: (provided) => ({\n    ...provided,\n    height: \"100%\"\n  }),\n  control: (provided) => ({\n    ...provided,\n    height: \"100%\"\n  })\n};\n\nconst SelectEditor = ({ value, options, onChange, onCommit }) => {\n  const getValueObj = useCallback(\n    (value) => options.find((op) => op.value === value),\n    [options]\n  );\n\n  const [newValue, setNewValue] = useAsyncState(getValueObj(value));\n\n  const handleChange = useCallback(\n    async ({ value }) => {\n      await setNewValue(getValueObj(value));\n      onChange(value);\n      onCommit(value);\n    },\n    [setNewValue, getValueObj, onChange, onCommit]\n  );\n\n  return (\n    <Select\n      options={options}\n      value={newValue}\n      onChange={handleChange}\n      styles={customStyles}\n    />\n  );\n};\n\nexport default SelectEditor;\n","import React, { useCallback } from \"react\";\nimport { TextArea } from \"pi-ui\";\n\nconst TextAreaWrapper = ({ onChange, row, col, value }) => {\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n\n  return (\n    <TextArea\n      id={`item-${row}-${col}`}\n      onChange={handleChange}\n      value={value}\n      wrapped={true}\n      autoFocus\n    />\n  );\n};\n\nexport default TextAreaWrapper;\n","import React, { useCallback } from \"react\";\nimport SelectEditor from \"./components/SelectEditor\";\nimport TextArea from \"./components/TextArea\";\nimport {\n  multilineCellValue,\n  textWrapper,\n  highlightChar\n} from \"./InvoiceDatasheet.module.css\";\nimport { buildSimpleMatchRegexFromSupportedChars } from \"src/utils/validation\";\nimport { isEmpty } from \"src/helpers\";\nimport { Spinner, classNames } from \"pi-ui\";\n\nexport const selectWrapper = (options) => (props) =>\n  <SelectEditor {...{ ...props, options }} />;\n\nexport const textWithErrorWrapper =\n  (error, valuesOptions) =>\n  ({ value, ...props }) =>\n    error ? (\n      <span className={highlightChar}>{error.toString()}</span>\n    ) : valuesOptions &&\n      value &&\n      !valuesOptions.includes(value) &&\n      !props.cell.readOnly ? (\n      <span className={classNames(highlightChar, \"value-viewer\")}>{value}</span>\n    ) : (\n      <span className=\"value-viewer\">{value}</span>\n    );\n\nexport const textAreaWrapper = () => (props) =>\n  (\n    <div className={textWrapper}>\n      <TextArea {...props} />\n    </div>\n  );\n\nconst printHighlightingUnsupported = (uniqueUnmatched, value, isMultiline) => {\n  return (\n    <div className={isMultiline ? multilineCellValue : \"\"}>\n      {value\n        .split(\"\")\n        .map((v) =>\n          uniqueUnmatched.has(v) ? (\n            <span className={highlightChar}>{v}</span>\n          ) : (\n            v\n          )\n        )}\n    </div>\n  );\n};\n\nconst getUnmatchedSet = (supportedChars, value) => {\n  const re = buildSimpleMatchRegexFromSupportedChars(supportedChars);\n  const unmatched = value.replace(re, \"\");\n  const uniqueUnmatched = new Set(unmatched);\n  return uniqueUnmatched;\n};\n\nexport const multilineTextWrapper =\n  (supportedChars) =>\n  ({ value }) => {\n    const uniqueUnmatched = getUnmatchedSet(supportedChars, value);\n    return printHighlightingUnsupported(uniqueUnmatched, value, true);\n  };\n\nexport const singlelineTextWrapper =\n  (supportedChars) =>\n  ({ value }) => {\n    const uniqueUnmatched = getUnmatchedSet(supportedChars, value);\n    return printHighlightingUnsupported(uniqueUnmatched, value, false);\n  };\n\nexport const proposalViewWrapper =\n  (proposals, proposalsError) =>\n  ({ cell: { value } }) => {\n    const findProposal = useCallback(\n      (v) => proposals && proposals.find((p) => p.value === v),\n      []\n    );\n    const selectedProposal = findProposal(value);\n    const isLoading = value && isEmpty(proposals);\n    const invalidProposal = !isEmpty(value) && !selectedProposal && !isLoading;\n    return (\n      <>\n        {isLoading && <Spinner invert />}\n        {proposalsError && (\n          <span className={highlightChar}>{proposalsError.toString()}</span>\n        )}\n        {invalidProposal && (\n          <span className={highlightChar}>Invalid proposal token</span>\n        )}\n        {selectedProposal && <span>{selectedProposal.label}</span>}\n      </>\n    );\n  };\n","import {\n  fromHoursToMinutes,\n  fromUSDCentsToUSDUnits,\n  fromMinutesToHours,\n  fromUSDUnitsToUSDCents\n} from \"../../helpers\";\nimport {\n  selectWrapper,\n  textAreaWrapper,\n  multilineTextWrapper,\n  singlelineTextWrapper,\n  textWithErrorWrapper\n} from \"./wrappers\";\nimport find from \"lodash/find\";\n\nexport const columnTypes = {\n  TYPE_COL: 1,\n  DOMAIN_COL: 2,\n  SUBDOMAIN_COL: 3,\n  DESC_COL: 4,\n  PROP_TOKEN_COL: 5,\n  SUBCONTRACTOR_COL: 6,\n  SUBRATE_COL: 7,\n  LABOR_COL: 8,\n  EXP_COL: 9,\n  SUBTOTAL_COL: 10\n};\n\nexport const {\n  SUBCONTRACTOR_COL,\n  SUBRATE_COL,\n  LABOR_COL,\n  EXP_COL,\n  SUBTOTAL_COL\n} = columnTypes;\n\nconst capitalizeFirstLetter = (string) =>\n  string[0].toUpperCase() + string.substring(1);\n\nconst defaultLineItemTypeOption = (policyLineItemTypes) =>\n  policyLineItemTypes[0].type;\n\nconst getSubcontractorOptions = (subContractors) =>\n  subContractors\n    ? subContractors.map((sc) => ({\n        value: sc.id,\n        label: sc.username\n      }))\n    : [];\n\nconst defaultDomainOption = (policyDomains) =>\n  capitalizeFirstLetter(policyDomains[0].description);\n\nexport const generateBlankLineItem = (policy) => ({\n  type: defaultLineItemTypeOption(policy.supportedlineitemtypes),\n  domain: defaultDomainOption(policy.supporteddomains),\n  subdomain: \"\",\n  description: \"\",\n  proposaltoken: \"\",\n  labor: 0,\n  expenses: 0,\n  subtotal: \"\",\n  subuserid: \"\",\n  subrate: 0\n});\n\nexport const getTotalsLine = (lineLength, totals, commonProps = {}) =>\n  lineLength > totals.length\n    ? [\n        ...new Array(lineLength - totals.length).fill(commonProps),\n        ...totals.map((item) => ({ ...item, ...commonProps }))\n      ]\n    : totals;\n\nexport const convertLineItemsToGrid = (\n  lineItems,\n  readOnly = true,\n  errors,\n  userRate = 0,\n  policy,\n  proposals,\n  subContractors,\n  proposalsError,\n  subContractorsError\n) => {\n  const {\n    supporteddomains: policyDomains,\n    supportedlineitemtypes: policyLineItemTypes,\n    invoicefieldsupportedchars: policySupportedChars\n  } = policy;\n  const grid = [];\n  const {\n    grid: gridBody,\n    expenseTotal,\n    laborTotal,\n    total\n  } = lineItems.reduce(\n    (acc, line, idx) => {\n      const newLine = line;\n      const isLaborReadonly =\n        newLine.type === 2 ? true : newLine.type === 3 ? true : readOnly;\n      const isSubContractorReadonly = newLine.type !== 4 ? true : readOnly;\n      const isExpenseReadonly =\n        newLine.type === 1 || newLine.type === 4 ? true : readOnly;\n      const subUser = find(subContractors, { id: newLine.subuserid });\n      const subContractorValue = isSubContractorReadonly\n        ? subUser && subUser.username\n        : newLine.subuserid;\n      const typeValue = policyLineItemTypes.find(\n        (t) => t.type === newLine.type\n      );\n      const laborHours = +fromMinutesToHours(newLine.labor);\n      const expenses = +fromUSDCentsToUSDUnits(newLine.expenses);\n      const subRate = +fromUSDCentsToUSDUnits(newLine.subrate);\n      const lineSubTotal =\n        newLine.type !== 4\n          ? laborHours * userRate + expenses\n          : laborHours * subRate;\n      const rowErrors = (errors && errors[idx]) || {};\n      const tableLine = [\n        { readOnly: true, value: idx + 1 },\n        {\n          readOnly,\n          value: newLine.type,\n          error: rowErrors && rowErrors.type,\n          valueViewer: () =>\n            typeValue ? capitalizeFirstLetter(typeValue.description) : \"\",\n          dataEditor: selectWrapper(\n            policyLineItemTypes.map((op) => ({\n              value: op.type,\n              label: capitalizeFirstLetter(op.description)\n            }))\n          )\n        },\n        {\n          readOnly,\n          value: newLine.domain,\n          error: rowErrors && rowErrors.domain,\n          dataEditor: selectWrapper(\n            policyDomains.map((op) => ({\n              value: capitalizeFirstLetter(op.description),\n              label: capitalizeFirstLetter(op.description)\n            }))\n          )\n        },\n        {\n          readOnly,\n          value: line.subdomain,\n          error: rowErrors && rowErrors.subdomain,\n          valueViewer: singlelineTextWrapper(policySupportedChars)\n        },\n        {\n          readOnly,\n          value: newLine.description,\n          error: rowErrors && rowErrors.description,\n          dataEditor: textAreaWrapper({\n            error: rowErrors && rowErrors.description\n          }),\n          valueViewer: multilineTextWrapper(policySupportedChars)\n        },\n        {\n          readOnly,\n          value: newLine.proposaltoken,\n          error: rowErrors && rowErrors.proposaltoken,\n          valueViewer: textWithErrorWrapper(\n            proposalsError,\n            proposals ? proposals.map((p) => p.censorshiprecord.token) : []\n          )\n        },\n        {\n          readOnly: isSubContractorReadonly,\n          value: subContractorValue,\n          error: rowErrors && rowErrors.subuserid,\n          dataEditor: selectWrapper(getSubcontractorOptions(subContractors)),\n          valueViewer: textWithErrorWrapper(subContractorsError)\n        },\n        {\n          readOnly: isSubContractorReadonly,\n          error: rowErrors && rowErrors.subrate,\n          value: +fromUSDCentsToUSDUnits(newLine.subrate)\n        },\n        {\n          readOnly: isLaborReadonly,\n          value: laborHours,\n          error: rowErrors && rowErrors.labor\n        },\n        {\n          readOnly: isExpenseReadonly,\n          value: expenses,\n          error: rowErrors && rowErrors.expenses\n        },\n        {\n          readOnly: true,\n          value: parseFloat(lineSubTotal).toFixed(2)\n        }\n      ];\n      return {\n        grid: acc.grid.concat([tableLine.filter(Boolean)]),\n        expenseTotal: acc.expenseTotal + newLine.expenses,\n        laborTotal: acc.laborTotal + newLine.labor,\n        total: parseFloat(+acc.total + lineSubTotal).toFixed(2)\n      };\n    },\n    { grid: [], expenseTotal: 0, laborTotal: 0, total: 0 }\n  );\n\n  const totals = [\n    { value: \"Total\", forceComponent: true },\n    { value: +fromMinutesToHours(laborTotal) },\n    { value: +fromUSDCentsToUSDUnits(expenseTotal) },\n    { value: total }\n  ];\n\n  const totalsLine = getTotalsLine(gridBody[0].length, totals, {\n    readOnly: true\n  });\n  return grid.concat(gridBody).concat([totalsLine]);\n};\n\nexport const convertGridToLineItems = (grid) => {\n  const copyGrid = grid.map((row) => [...row]);\n  return copyGrid.reduce((acc, rowValues, row) => {\n    // skip last row\n    if (row === copyGrid.length - 1) return acc;\n\n    const lineItem = rowValues.reduce((acc, cell, col) => {\n      switch (col) {\n        case columnTypes.TYPE_COL:\n          return { ...acc, type: +cell.value };\n        case columnTypes.DOMAIN_COL:\n          return { ...acc, domain: cell.value };\n        case columnTypes.SUBDOMAIN_COL:\n          return { ...acc, subdomain: cell.value };\n        case columnTypes.DESC_COL:\n          return { ...acc, description: cell.value };\n        case columnTypes.PROP_TOKEN_COL:\n          return { ...acc, proposaltoken: cell.value };\n        case columnTypes.SUBCONTRACTOR_COL:\n          return { ...acc, subuserid: cell.value };\n        case columnTypes.SUBRATE_COL:\n          return { ...acc, subrate: fromUSDUnitsToUSDCents(+cell.value) };\n        case columnTypes.LABOR_COL:\n          return { ...acc, labor: fromHoursToMinutes(+cell.value) };\n        case columnTypes.EXP_COL:\n          return { ...acc, expenses: fromUSDUnitsToUSDCents(+cell.value) };\n        case columnTypes.SUBTOTAL_COL:\n          return { ...acc, subtotal: +cell.value };\n        default:\n          return acc;\n      }\n    }, {});\n\n    return acc.concat([lineItem]);\n  }, []);\n};\n\nexport const createTableHeaders = (isMobileScreen) =>\n  !isMobileScreen\n    ? [\n        { value: \"\", readOnly: true, width: \"2rem\" },\n        { value: \"Type\", readOnly: true, width: \"10rem\" },\n        { value: \"Domain\", readOnly: true, width: \"12rem\" },\n        { value: \"Subdomain\", readOnly: true, width: \"14rem\" },\n        { value: \"Description\", readOnly: true, width: \"30rem\" },\n        { value: \"Proposal\", readOnly: true, width: \"30rem\" },\n        { value: \"Subcontr. ID\", readOnly: true, width: \"10rem\" },\n        { value: \"Subcontr. Rate (USD)\", readOnly: true, width: \"8rem\" },\n        { value: \"Labor (hours)\", readOnly: true, width: \"7rem\" },\n        { value: \"Expense (USD)\", readOnly: true, width: \"7.5rem\" },\n        { value: \"Subtotal (USD)\", readOnly: true, width: \"7.5rem\" }\n      ]\n    : [\n        { value: \"\", readOnly: true, width: \"2rem\" },\n        { value: \"Type\", readOnly: true, width: \"7rem\" },\n        { value: \"Domain\", readOnly: true, width: \"9rem\" },\n        { value: \"Subdomain\", readOnly: true, width: \"10rem\" },\n        { value: \"Description\", readOnly: true, width: \"20rem\" },\n        { value: \"Proposal\", readOnly: true, width: \"20rem\" },\n        { value: \"Sub. ID\", readOnly: true, width: \"5rem\" },\n        { value: \"Sub. Rate (USD)\", readOnly: true, width: \"7.5rem\" },\n        { value: \"Labor (hours)\", readOnly: true, width: \"7rem\" },\n        { value: \"Expense (USD)\", readOnly: true, width: \"7.5rem\" },\n        { value: \"Subtotal (USD)\", readOnly: true, width: \"7.5rem\" }\n      ];\n\nexport const updateGridCell = (grid, row, col, values) => {\n  grid[row][col] = { ...grid[row][col], ...values };\n  return grid;\n};\n\nexport const processTypeColChange = (grid, { row, col, value }) => {\n  // if value is 1, the expense column must be 0, so we set it to readOnly\n  if (+value === 1) {\n    grid = updateGridCell(grid, row, EXP_COL, { value: 0, readOnly: true });\n  } else {\n    // if it is not 1, we make sure it is not readOnly\n    grid = updateGridCell(grid, row, EXP_COL, { readOnly: false });\n  }\n\n  // if value is 2, the labor column must be 0, so we set it to readOnly\n  if (+value === 2 || +value === 3) {\n    grid = updateGridCell(grid, row, LABOR_COL, { value: 0, readOnly: true });\n  } else {\n    // if it is not 2, we make sure it is not readOnly\n    grid = updateGridCell(grid, row, LABOR_COL, { readOnly: false });\n  }\n\n  // if value is 4, the expense column must be 0 and readOnly\n  if (+value === 4) {\n    grid = updateGridCell(grid, row, SUBCONTRACTOR_COL, { readOnly: false });\n    grid = updateGridCell(grid, row, SUBRATE_COL, {\n      value: 0,\n      readOnly: false\n    });\n    grid = updateGridCell(grid, row, EXP_COL, { readOnly: true });\n  } else {\n    grid = updateGridCell(grid, row, SUBCONTRACTOR_COL, { value: \"\" });\n    grid = updateGridCell(grid, row, SUBRATE_COL, { value: 0 });\n  }\n\n  return updateGridCell(grid, row, col, { value });\n};\n\nexport const processSubRateColChange = (grid, { row, col, value }) => {\n  const labor = grid[row][columnTypes.LABOR_COL].value;\n  grid = updateGridCell(grid, row, SUBTOTAL_COL, { value: value * labor });\n  return updateGridCell(grid, row, col, { value });\n};\n\nexport const processLaborColChange = (grid, { row, col, value }, userRate) => {\n  // updates subtotal upon labor value entry\n  const type = grid[row][columnTypes.TYPE_COL].value;\n  const subRate = grid[row][columnTypes.SUBRATE_COL].value;\n\n  // user rate\n  if (type === 1) {\n    grid = updateGridCell(grid, row, SUBTOTAL_COL, { value: value * userRate });\n  }\n\n  // sub contractor rate\n  if (type === 4) {\n    grid = updateGridCell(grid, row, SUBTOTAL_COL, { value: value * subRate });\n  }\n\n  return updateGridCell(grid, row, col, { value });\n};\n\nexport const processExpenseColChange = (grid, { row, col, value }) => {\n  // updates subtotal upon expense value entry\n  grid = updateGridCell(grid, row, SUBTOTAL_COL, { value: value });\n  return updateGridCell(grid, row, col, { value });\n};\n\nexport const processSubtotalColChange = (grid, userRate) => {\n  // case where user rate changes and grid must recalculate subtotal\n  for (const g of grid) {\n    const row = g[0].value - 1;\n    const type = g[columnTypes.TYPE_COL].value;\n    const value = g[columnTypes.LABOR_COL].value;\n    const subRate = g[columnTypes.SUBRATE_COL].value;\n\n    if (type === 1) {\n      grid = updateGridCell(grid, row, SUBTOTAL_COL, {\n        value: value * userRate\n      });\n    }\n\n    if (type === 4) {\n      grid = updateGridCell(grid, row, SUBTOTAL_COL, {\n        value: value * subRate\n      });\n    }\n  }\n  return grid;\n};\n\nexport const processCellsChange = (currentGrid, changes, userRate = 0) => {\n  return changes.reduce(\n    (acc, change) => {\n      switch (change.col) {\n        case columnTypes.TYPE_COL:\n          acc.grid = processTypeColChange(acc.grid, change);\n          return acc;\n        case columnTypes.LABOR_COL:\n          acc.grid = processLaborColChange(acc.grid, change, userRate);\n          return acc;\n        case columnTypes.EXP_COL:\n          acc.grid = processExpenseColChange(acc.grid, change);\n          return acc;\n        case columnTypes.SUBRATE_COL:\n          acc.grid = processSubRateColChange(acc.grid, change);\n          return acc;\n        case columnTypes.SUBTOTAL_COL:\n          acc.grid = processSubtotalColChange(acc.grid, userRate);\n          return acc;\n        default:\n          acc.grid = updateGridCell(acc.grid, change.row, change.col, {\n            value: change.value\n          });\n          return acc;\n      }\n    },\n    { grid: currentGrid }\n  );\n};\n\nexport const getProposalsOptions = (proposals = []) =>\n  proposals.map((p) => ({ label: p.name, value: p.censorshiprecord.token }));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentAreaContainer\":\"Comments_commentAreaContainer__8WXVJ\",\"commentsWrapper\":\"Comments_commentsWrapper__1vjNa\",\"commentsHeader\":\"Comments_commentsHeader__1bBUQ\",\"titleWrapper\":\"Comments_titleWrapper__2gbMC\",\"commentsTitle\":\"Comments_commentsTitle__SAits\",\"commentsCount\":\"Comments_commentsCount__3IEN-\",\"sortContainer\":\"Comments_sortContainer__2FeJJ\",\"flatButtonText\":\"Comments_flatButtonText__3mdhJ\",\"flatButtonWrapper\":\"Comments_flatButtonWrapper__1CEbg\",\"flatModeActive\":\"Comments_flatModeActive__3oE-Q\",\"notAllowedMessageContent\":\"Comments_notAllowedMessageContent__oRH6w\",\"modeToggleLabel\":\"Comments_modeToggleLabel__aaejb\",\"flatTooltipWrapper\":\"Comments_flatTooltipWrapper__1wbzL\",\"flatModTooltip\":\"Comments_flatModTooltip__1baab\"};"],"sourceRoot":""}