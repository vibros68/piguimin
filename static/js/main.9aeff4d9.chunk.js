/*! For license information please see main.9aeff4d9.chunk.js.LICENSE.txt */
(this.webpackJsonppoliteiagui=this.webpackJsonppoliteiagui||[]).push([[4],{10:function(e,t,n){"use strict";n.d(t,"Ab",(function(){return st})),n.d(t,"Bb",(function(){return lt})),n.d(t,"yb",(function(){return ft})),n.d(t,"p",(function(){return dt})),n.d(t,"n",(function(){return mt})),n.d(t,"xb",(function(){return pt})),n.d(t,"o",(function(){return ht})),n.d(t,"wb",(function(){return bt})),n.d(t,"eb",(function(){return vt})),n.d(t,"l",(function(){return Et})),n.d(t,"vb",(function(){return yt})),n.d(t,"db",(function(){return gt})),n.d(t,"k",(function(){return Ot})),n.d(t,"tb",(function(){return _t})),n.d(t,"sb",(function(){return jt})),n.d(t,"Z",(function(){return wt})),n.d(t,"d",(function(){return St})),n.d(t,"Vb",(function(){return Tt})),n.d(t,"Wb",(function(){return Ct})),n.d(t,"q",(function(){return kt})),n.d(t,"zb",(function(){return It})),n.d(t,"ub",(function(){return xt})),n.d(t,"cb",(function(){return Rt})),n.d(t,"j",(function(){return Nt})),n.d(t,"ob",(function(){return N})),n.d(t,"qb",(function(){return P})),n.d(t,"Fb",(function(){return L})),n.d(t,"Sb",(function(){return A})),n.d(t,"lb",(function(){return M})),n.d(t,"X",(function(){return F})),n.d(t,"ab",(function(){return G})),n.d(t,"h",(function(){return W})),n.d(t,"i",(function(){return Y})),n.d(t,"Nb",(function(){return H})),n.d(t,"Cb",(function(){return Q})),n.d(t,"fb",(function(){return q})),n.d(t,"c",(function(){return z})),n.d(t,"b",(function(){return J})),n.d(t,"gb",(function(){return Z})),n.d(t,"S",(function(){return ee})),n.d(t,"B",(function(){return te})),n.d(t,"r",(function(){return ne})),n.d(t,"R",(function(){return re})),n.d(t,"D",(function(){return ae})),n.d(t,"L",(function(){return oe})),n.d(t,"G",(function(){return ie})),n.d(t,"J",(function(){return ce})),n.d(t,"F",(function(){return ue})),n.d(t,"P",(function(){return se})),n.d(t,"A",(function(){return le})),n.d(t,"Q",(function(){return fe})),n.d(t,"E",(function(){return de})),n.d(t,"C",(function(){return me})),n.d(t,"m",(function(){return pe})),n.d(t,"hb",(function(){return he})),n.d(t,"ib",(function(){return be})),n.d(t,"g",(function(){return ve})),n.d(t,"f",(function(){return Ee})),n.d(t,"Lb",(function(){return ye})),n.d(t,"Qb",(function(){return ge})),n.d(t,"Gb",(function(){return Oe})),n.d(t,"Hb",(function(){return _e})),n.d(t,"Db",(function(){return je})),n.d(t,"t",(function(){return we})),n.d(t,"pb",(function(){return Se})),n.d(t,"Ob",(function(){return Te})),n.d(t,"nb",(function(){return Ce})),n.d(t,"Ub",(function(){return ke})),n.d(t,"Jb",(function(){return Ie})),n.d(t,"H",(function(){return xe})),n.d(t,"Mb",(function(){return Re})),n.d(t,"T",(function(){return Ne})),n.d(t,"K",(function(){return Pe})),n.d(t,"s",(function(){return Le})),n.d(t,"I",(function(){return Ae})),n.d(t,"e",(function(){return De})),n.d(t,"rb",(function(){return Ue})),n.d(t,"a",(function(){return Fe})),n.d(t,"kb",(function(){return Be})),n.d(t,"mb",(function(){return Ge})),n.d(t,"W",(function(){return We})),n.d(t,"bb",(function(){return Ye})),n.d(t,"jb",(function(){return He})),n.d(t,"Y",(function(){return Qe})),n.d(t,"N",(function(){return qe})),n.d(t,"z",(function(){return ze})),n.d(t,"U",(function(){return Ke})),n.d(t,"u",(function(){return Je})),n.d(t,"y",(function(){return Xe})),n.d(t,"w",(function(){return Ze})),n.d(t,"x",(function(){return $e})),n.d(t,"Kb",(function(){return et})),n.d(t,"Eb",(function(){return tt})),n.d(t,"Ib",(function(){return nt})),n.d(t,"Pb",(function(){return rt})),n.d(t,"M",(function(){return at})),n.d(t,"v",(function(){return ot})),n.d(t,"O",(function(){return it})),n.d(t,"V",(function(){return ct})),n.d(t,"Rb",(function(){return Lt})),n.d(t,"Tb",(function(){return At}));var r,a=n(2),o=n(18),i=n(11),c=n(3),u=n(4),s=n(19),l=n(53),f=n.n(l),d=n(13),m=(n(91),n(9)),p=n(90),h=function(e,t){return"proposal-".concat(e,"::").concat(t)},b=function(){sessionStorage.setItem(h("name","/record/new"),""),sessionStorage.setItem(h("description","/record/new"),"")},v=function(e,t){return"invoice-".concat(e,"::").concat(t)},E=function(e){sessionStorage.setItem(v("address","/invoices/new"),""),sessionStorage.setItem(v("contact","/invoices/new"),""),sessionStorage.setItem(v("lineitems","/invoices/new"),JSON.stringify([Object(p.e)(e)])),sessionStorage.setItem(v("location","/invoices/new"),""),sessionStorage.setItem(v("month","/invoices/new"),Object(m.n)()-1),sessionStorage.setItem(v("year","/invoices/new"),Object(m.o)()),sessionStorage.setItem(v("name","/invoices/new"),""),sessionStorage.setItem(v("rate","/invoices/new"),"")},y=function(e,t){return"dcc-".concat(e,"::").concat(t)},g=function(){sessionStorage.setItem(y("dcctype","/dcc/new"),""),sessionStorage.setItem(y("contractortype","/dcc/new"),""),sessionStorage.setItem(y("dccdomain","/dcc/new"),""),sessionStorage.setItem(y("dccstatement","/dcc/new"),""),sessionStorage.setItem(y("nomineeid","/dcc/new"),"")},O=n(48),_=n(27),j=n(8),w=n(7),S=n(30),T=n.n(S),C=n(177),k=n.n(C),I=(r=w,T()(k()((function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(c.a)({},t,(n=r[t],function(e,t){return{type:n,error:!!t,payload:t||e}})));var n}),{}),Object.keys)(r)),x=n(5);function R(){R=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var N=I.RESET_NEW_USER,P=function(e){return function(t){return t(I.RESET_RESCAN_USER_PAYMENTS(e))}},L=function(e){return function(t){return t(I.SET_HAS_TOTP(e))}},A=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){var t=Object(s.a)(R().mark((function t(n){var r;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(I.REQUEST_INIT_SESSION()),t.prev=1,t.next=4,d.b();case 4:if(r=t.sent,n(I.RECEIVE_INIT_SESSION(r)),r.activeusersession){t.next=10;break}Object(O.a)(),t.next=13;break;case 10:if(!e&&!r.activeusersession){t.next=13;break}return t.next=13,n(D());case 13:return t.abrupt("return",r);case 16:throw t.prev=16,t.t0=t.catch(1),n(I.RECEIVE_INIT_SESSION(null,t.t0)),t.t0;case 20:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()},D=function(){return function(e,t){e(I.REQUEST_ME());var n=j.eb(t());return d.Q().then((function(t){e(I.RECEIVE_ME(t)),n&&t.userid&&e(fe(t.userid))})).catch((function(t){throw e(I.RECEIVE_ME(null,t)),Object(O.a)(),t}))}},U=null,V=function(){return clearTimeout(U)},M=function e(){return function(t,n){var r=j.s(n());if(r)return d.Ub().then((function(e){return e.haspaid})).then((function(n){(t(I.UPDATE_USER_PAYWALL_STATUS({status:n?x.U:null,userid:r})),n)||function(e){U=e}(setTimeout((function(){return t(e())}),1e4))})).catch((function(e){throw V(),e}));V()}},F=function(){return function(){var e=Object(s.a)(R().mark((function e(t,n){var r,a,o,i,c,s,l,m;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.eb(n()),t(I.REQUEST_POLICY()),e.prev=2,e.next=5,f.a.all([d.bb(),!r&&d.ab(),!r&&d.Y(),!r&&d.Z()]);case 5:a=e.sent,o=Object(u.a)(a,4),i=o[0],c=o[1],s=o[2],l=o[3],m={www:i},r||(m.ticketvote=c,m.comments=s,m.pi=l),t(I.RECEIVE_POLICY(m)),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(2),t(I.RECEIVE_POLICY(null,e.t0)),e.t0;case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,n){return e.apply(this,arguments)}}()},B=function e(t){return function(n,r){var a=j.n(r());return a?t(n,r,a):n(A()).then((function(){return e(t)(n,r)}))}},G=function(e){var t=e.email,n=e.isTemp;return B((function(e,r,a){return e(I.REQUEST_INVITE_USER({email:t})),d.x(a,{email:t,temp:n}).then((function(t){e(I.RECEIVE_INVITE_USER(t))})).catch((function(t){throw"Error: No available storage method found."===t.toString()?e(I.RECEIVE_INVITE_USER(null,new Error("CMS requires local storage to work."))):e(I.RECEIVE_INVITE_USER(null,t)),t}))}))},W=function(e){var t=e.email,n=e.username,r=e.password;return B((function(e,a,o){return e(I.REQUEST_NEW_USER({email:t})),d.W(o,t,n,r).then((function(t){return e(I.RECEIVE_NEW_USER(t))})).catch((function(t){throw"Error: No available storage method found."===t.toString()?e(I.RECEIVE_NEW_USER(null,new Error("Politeia requires local storage to work."))):e(I.RECEIVE_NEW_USER(null,t)),t}))}))},Y=function(e){var t=e.email,n=e.username,r=e.password,a=e.verificationtoken;return B((function(e,o,i){return e(I.REQUEST_NEW_USER({email:t})),d.rb(i,t,n,r,a).then((function(t){e(I.RECEIVE_NEW_USER(t))})).catch((function(t){throw"Error: No available storage method found."===t.toString()?e(I.RECEIVE_NEW_USER(null,new Error("CMS requires local storage to work."))):e(I.RECEIVE_NEW_USER(null,t)),t}))}))},H=function(e,t,n){return function(r){return r(I.REQUEST_VERIFY_NEW_USER({email:e,verificationToken:t})),d.Rb(e,t,n).then((function(e){return r(I.RECEIVE_VERIFY_NEW_USER(e))})).catch((function(e){throw r(I.RECEIVE_VERIFY_NEW_USER(null,e)),e}))}},Q=function(e,t){return function(n){return n(I.REQUEST_USER_SEARCH()),(t?d.vb(e):d.wb(e)).then((function(t){return n(I.RECEIVE_USER_SEARCH(Object(a.a)(Object(a.a)({},t),{},{query:e})))})).catch((function(e){throw n(I.RECEIVE_USER_SEARCH(null,e)),e}))}},q=function(e){var t=e.email,n=e.password,r=e.code;return function(e,a){return e($()),B(function(){var e=Object(s.a)(R().mark((function e(a,o,i){var c,u,s,l;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(I.REQUEST_LOGIN({email:t})),e.prev=1,e.next=4,d.D(i,t,n,r);case 4:return c=e.sent,e.next=7,a(D());case 7:return a(I.RECEIVE_LOGIN(c)),u=c.userid,s=c.username,e.next=11,_.g(t,s);case 11:return(l=e.sent)&&_.i(l,u),e.abrupt("return");case 16:throw e.prev=16,e.t0=e.catch(1),a(I.RECEIVE_LOGIN(null,e.t0)),e.t0;case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,n,r){return e.apply(this,arguments)}}())(e,a)}},z=function(e,t){return function(){return e?X(t):K}},K=function(){Object(O.a)(),V(),Fe()},J=function(){return function(e){e(I.RECEIVE_LOGOUT()),K()}},X=function(e){return _.h(e).then((function(){Object(O.a)(e),V(),Fe()}))},Z=function(e,t){return B((function(n,r,a){var o=j.s(r());return n(I.REQUEST_LOGOUT()),d.E(a).then((function(t){return n(e?I.RECEIVE_CMS_LOGOUT(t):I.RECEIVE_LOGOUT(t))})).then((function(){return z(t,o)})).catch((function(e){throw n(I.RECEIVE_LOGOUT(null,e)),e}))}))},$=function(){return function(e){e(I.CSRF_NEEDED(!0))}},ee=function(){return function(e){return e(I.REQUEST_USER_INVOICES()),d.Mb().then((function(t){return e(I.RECEIVE_USER_INVOICES(t))})).catch((function(t){throw e(I.RECEIVE_USER_INVOICES(null,t)),t}))}},te=function(e){return function(t){return t(I.REQUEST_RECORD_COMMENTS()),d.z(e).then((function(n){t(I.RECEIVE_RECORD_COMMENTS(Object(a.a)(Object(a.a)({},n),{},{token:e})))})).catch((function(e){throw t(I.RECEIVE_RECORD_COMMENTS(null,e)),e}))}},ne=function(e,t,n){return B((function(r,a,o){return r(I.REQUEST_ADMIN_INVOICES()),d.a(o,e,t,n).then((function(e){return r(I.RECEIVE_ADMIN_INVOICES(e))})).catch((function(e){throw r(I.RECEIVE_ADMIN_INVOICES(null,e)),e}))}))},re=function(e,t,n){return B((function(r,a,o){return r(I.REQUEST_CODE_STATS()),d.i(o,e,t,n).then((function(a){return r(I.RECEIVE_CODE_STATS({userid:e,codestats:a.repostats,start:t,end:n}))})).catch((function(e){r(I.RECEIVE_CODE_STATS(null,e))}))}))},ae=function(e){return B((function(t,n,r){return t(I.REQUEST_PROPOSAL_BILLING()),d.db(r,e).then((function(n){return t(I.RECEIVE_PROPOSAL_BILLING({token:e,response:n}))})).catch((function(e){t(I.RECEIVE_PROPOSAL_BILLING(null,e))}))}))},oe=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return B(function(){var o=Object(s.a)(R().mark((function o(i,c,s){var l,p,h,b,v,E,y,g,O,_;return R().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=null===e||void 0===e?void 0:e.map((function(e){return{token:e,filenames:[x.eb,x.Wb]}})),o.next=3,f.a.all([n&&d.nb(s,{requests:l,state:t,includefiles:!0}),r&&d.ob(s,e),a&&d.c(s,e)]);case 3:return p=o.sent,h=Object(u.a)(p,3),b=h[0],v=h[1],E=h[2],y=n&&b&&b.records,g=y&&Object(m.z)(y),O=r&&v&&v.summaries,_=a&&E&&E.summaries,o.abrupt("return",[g,O,_]);case 13:case"end":return o.stop()}}),o)})));return function(e,t,n){return o.apply(this,arguments)}}())},ie=function(e,t){return Object(s.a)(R().mark((function n(){var r;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.fb({token:e,version:t});case 2:return r=n.sent,n.abrupt("return",r.record);case 4:case"end":return n.stop()}}),n)})))},ce=function(e){var t=e.tokens,n=e.fetchVoteSummary,r=void 0===n||n,o=e.fetchProposalSummary,i=void 0===o||o,u=e.userid,l=e.fetchCommentCounts,p=void 0===l||l;return B(function(){var e=Object(s.a)(R().mark((function e(n,o,s){var l,h,b,v,E,y,g;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(I.REQUEST_PROPOSALS_BATCH(t)),l=null===t||void 0===t?void 0:t.map((function(e){return{token:e,filenames:[x.eb,x.Wb]}})),e.prev=2,e.next=5,f.a.all([d.nb(s,{requests:l}),r&&n(Pe(t)),i&&n(Le(t)),p&&d.k(t)]);case 5:return h=e.sent,b=h.find((function(e){return e&&e.records})).records,v=r&&h.find((function(e){return e&&e.summaries})).summaries,E=i&&h.find((function(e){return e&&e.proposalSummaries})).proposalSummaries,y=p&&h.find((function(e){return e&&e.counts})).counts,g=Object.keys(b).reduce((function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(c.a)({},t,Object(a.a)(Object(a.a)({},b[t]),{},{commentsCount:y[t]})))}),{}),n(I.RECEIVE_PROPOSALS_BATCH({proposals:g,userid:u})),e.abrupt("return",[Object(m.y)(g),v,E]);case 15:throw e.prev=15,e.t0=e.catch(2),n(I.RECEIVE_PROPOSALS_BATCH(null,e.t0)),e.t0;case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n,r){return e.apply(this,arguments)}}())},ue=function(e,t){return function(){var n=Object(s.a)(R().mark((function n(r){var o,i,u,s,l,p;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(I.REQUEST_PROPOSALS_BATCH(e)),n.prev=1,n.next=4,f.a.all([d.fb({token:e,version:t}),d.k([e])]);case 4:if(o=n.sent,i=o.find((function(e){return e&&e.record})).record,u=o.find((function(e){return e&&e.counts})).counts,s=Object(m.x)(i),!s.linkby){n.next=17;break}return n.next=11,d.kb(e);case 11:return l=n.sent,p=l.submissions,r(I.RECEIVE_PROPOSALS_BATCH({proposals:Object(c.a)({},e,Object(a.a)(Object(a.a)({},i),{},{linkedfrom:p,commentsCount:u[e]}))})),n.abrupt("return",Object(a.a)(Object(a.a)({},i),{},{linkedfrom:p,commentsCount:u[e]}));case 17:return r(I.RECEIVE_PROPOSALS_BATCH({proposals:Object(c.a)({},e,Object(a.a)(Object(a.a)({},i),{},{commentsCount:u[e]}))})),n.abrupt("return",Object(a.a)(Object(a.a)({},i),{},{commentsCount:u[e]}));case 19:n.next=25;break;case 21:throw n.prev=21,n.t0=n.catch(1),I.RECEIVE_PROPOSALS_BATCH(null,n.t0),n.t0;case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e){return n.apply(this,arguments)}}()},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return function(){var a=Object(s.a)(R().mark((function a(o){return R().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(I.REQUEST_TOKEN_INVENTORY()),a.prev=1,a.next=4,f.a.all([!r&&d.pb(e,t,n),r&&e!==x.fb&&d.Vb(t,n)]).then((function(e){var t,n,a=Object(u.a)(e,2),s=a[0],l=a[1],f=!r&&(t={},Object(c.a)(t,x.Ub,s&&s.unvetted&&s.unvetted.unreviewed||[]),Object(c.a)(t,x.g,[].concat(Object(i.a)(s&&s.vetted&&s.vetted.censored||[]),Object(i.a)(s&&s.unvetted&&s.unvetted.censored||[]))),Object(c.a)(t,x.c,[].concat(Object(i.a)(s&&s.vetted&&s.vetted.archived||[]),Object(i.a)(s&&s.unvetted&&s.unvetted.archived||[]))),t),d=r&&(n={},Object(c.a)(n,x.d,l&&l.vetted&&l.vetted.authorized||[]),Object(c.a)(n,x.Tb,l&&l.vetted&&l.vetted.unauthorized||[]),Object(c.a)(n,x.a,l&&l.vetted&&l.vetted.started||[]),Object(c.a)(n,x.b,l&&l.vetted&&l.vetted.approved||[]),Object(c.a)(n,x.Nb,l&&l.vetted&&l.vetted.rejected||[]),Object(c.a)(n,x.o,l&&l.vetted&&l.vetted.ineligible||[]),n);return!r&&o(I.RECEIVE_RECORDS_INVENTORY(f)),r&&o(I.RECEIVE_VOTES_INVENTORY(d)),{records:f,votes:d}}));case 4:return a.abrupt("return",a.sent);case 7:throw a.prev=7,a.t0=a.catch(1),o(I.RECEIVE_VOTES_INVENTORY(null,a.t0)),a.t0;case 11:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return n(I.REQUEST_INVOICE(e)),d.y(e,t).then((function(e){e&&e.invoice&&Object.keys(e.invoice).length>0?n(I.RECEIVE_INVOICE(e)):n(I.RECEIVE_INVOICE(null,new Error("The requested invoice does not exist.")))})).catch((function(e){throw n(I.RECEIVE_INVOICE(null,e)),e}))}},fe=function(e){return function(t,n){t(I.REQUEST_USER(e));if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)){var r=new Error("This is not a valid user ID.");throw t(I.RECEIVE_USER(null,r)),r}var o=j.eb(n());return d.Lb(e).then((function(n){return t(I.RECEIVE_USER({user:Object(a.a)(Object(a.a)({},n.user),{},{userid:e,isCMS:o})}))})).catch((function(e){throw t(I.RECEIVE_USER(null,e)),e}))}},de=function(e){return B((function(t,n,r){return t(I.REQUEST_RECORD_COMMENTS(e)),d.eb(r,e).then((function(n){return t(I.RECEIVE_RECORD_COMMENTS(Object(a.a)(Object(a.a)({},n),{},{token:e})))})).catch((function(e){t(I.RECEIVE_RECORD_COMMENTS(null,e))}))}))},me=function(e,t){return B((function(n,r,o){return n(I.REQUEST_LIKED_COMMENTS(e)),d.C(o,e,t).then((function(t){return n(I.RECEIVE_LIKED_COMMENTS(Object(a.a)(Object(a.a)({},t),{},{token:e})))})).catch((function(e){n(I.RECEIVE_LIKED_COMMENTS(null,e))}))}))},pe=function(e){return B((function(t,n,r){return t(I.REQUEST_EDIT_CMS_USER(e)),d.s(r,e).then((function(n){var r;t(I.RECEIVE_EDIT_CMS_USER(Object(a.a)(Object(a.a)({},n),(r=e,Object.entries(r).reduce((function(e,t){var n=Object(u.a)(t,2),r=n[0],a=n[1];return a?(e[r]=a,e):e}),{})))))})).catch((function(e){t(I.RECEIVE_EDIT_CMS_USER(null,e))}))}))},he=function(e,t,n,r,o){return B((function(i,c,u){return i(I.REQUEST_MANAGE_CMS_USER()),d.O(u,e,t,n,r,o).then((function(c){return i(I.RECEIVE_MANAGE_CMS_USER(Object(a.a)(Object(a.a)({},c),{},{userID:e,domain:t,type:n,supervisorIDs:r,proposalsOwned:o})))})).catch((function(e){throw i(I.RECEIVE_MANAGE_CMS_USER(null,e)),e}))}))},be=function(e,t,n){return B((function(r,a,o){return r(I.REQUEST_MANAGE_USER({userId:e,action:t,reason:n})),d.P(o,e,t,n).then((function(t){r(I.RECEIVE_MANAGE_USER(t)),r(fe(e))})).catch((function(e){r(I.RECEIVE_MANAGE_USER(null,e))}))}))},ve=function(e,t,n,r,a,o){return B((function(i,c,u){if(e)return i(I.REQUEST_LIKE_COMMENT({commentid:n,token:t,vote:r,sectionId:o})),f.a.resolve(d.I(a,t,r,n)).then((function(t){return d.Cb(e,t)})).then((function(e){return d.j(u,e)})).then((function(){i(I.RECEIVE_LIKE_COMMENT_SUCCESS({token:t,commentid:n,vote:r,sectionId:o}))})).catch((function(e){throw i(I.RECEIVE_LIKE_COMMENT(null,e)),e}))}))},Ee=function(e,t,n,r,a,o){return B((function(i,c,u){var s;return i(I.REQUEST_CENSOR_COMMENT({commentid:n,token:t,state:r,sectionId:a})),f.a.resolve(d.F(r,t,o,n)).then((function(t){return d.zb(e,t)})).then((function(e){return s=e.publickey,d.e(u,e)})).then((function(e){var t=e.comment,n=t.receipt,r=t.commentid,c=t.token;n&&i(I.RECEIVE_CENSOR_COMMENT({commentid:r,token:c,sectionId:a,reason:o,publickey:s}))})).catch((function(e){throw i(I.RECEIVE_CENSOR_COMMENT(null,e)),e}))}))},ye=function(e){return B((function(t,n,r){return t(I.REQUEST_UPDATED_KEY()),_.b().then((function(o){return d.Kb(r,_.k(o.publicKey)).then((function(e){e.verificationtoken&&(j.fb(n())&&t(I.SHOULD_AUTO_VERIFY_KEY(!0)));return t(I.RECEIVE_UPDATED_KEY(Object(a.a)(Object(a.a)({},e),{},{success:!0})))})).then((function(){return _.e(e,o)}))})).catch((function(e){throw t(I.RECEIVE_UPDATED_KEY(null,e)),e}))}))},ge=function(e,t){return B((function(n,r,o){return n(I.REQUEST_VERIFIED_KEY({verificationtoken:t})),d.Qb(o,e,t).then((function(t){return _.f(e).then((function(e){n(I.RECEIVE_VERIFIED_KEY(Object(a.a)(Object(a.a)({},t),{},{success:!0,publickey:e}))),n(I.SHOULD_AUTO_VERIFY_KEY(!1))}))})).catch((function(e){n(I.RECEIVE_VERIFIED_KEY(null,e))}))}))},Oe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return B((function(a,o,i){var c=j.s(o());return a(I.REQUEST_SETSTATUS_INVOICE({status:t,token:e,reason:r,version:n,userid:c})),d.B(c,i,e,n,t,r).then((function(e){var t=e.invoice;a(I.RECEIVE_SETSTATUS_INVOICE(t))})).catch((function(e){throw a(I.RECEIVE_SETSTATUS_INVOICE(null,e)),e}))}))},_e=function(e){var t=e.token,n=e.status,r=e.linkto,a=e.version,o=e.reason,i=void 0===o?"":o,c=e.oldStatus;return B((function(e,o,u){var s=j.s(o());return e(I.REQUEST_SETSTATUS_PROPOSAL({status:n,token:t})),d.jb(s,u,t,n,a,i).then((function(a){var o=a.record;e(I.RECEIVE_SETSTATUS_PROPOSAL({proposal:o,oldStatus:c})),e(Le([t])),n===x.jb&&(e(Pe([t])),r&&e(ce([r])))})).catch((function(t){throw e(I.RECEIVE_SETSTATUS_PROPOSAL(null,t)),t}))}))},je=function(e,t,n){return B((function(r,a,o){var i=j.s(a());return r(I.REQUEST_SET_BILLING_STATUS({token:e,billingStatus:t,reason:n})),d.ib(i,o,e,t,n).then((function(a){var o=a.receipt,i=a.timestamp,c=a.publickey;r(I.RECEIVE_SET_BILLING_STATUS({receipt:o,timestamp:i,token:e,billingStatus:t,reason:n,publickey:c}))})).catch((function(e){throw I.RECEIVE_SET_BILLING_STATUS(null,e),e}))}))},we=function(e){return B((function(t,n,r){return t(I.REQUEST_BILLING_STATUS_CHANGES({tokens:e})),d.d(r,e).then((function(e){var n=e.billingstatuschanges;return t(I.RECEIVE_BILLING_STATUS_CHANGES({billingstatuschanges:n,success:!0}))})).catch((function(e){throw t(I.RECEIVE_BILLING_STATUS_CHANGES(null,e)),e}))}))},Se=function(e){var t=e.username,n=e.email;return B((function(e,r,a){return e(I.REQUEST_RESET_PASSWORD({username:t,email:n})),d.ub(a,t,n).then((function(t){return e(I.RECEIVE_RESET_PASSWORD(t)),t})).catch((function(t){throw e(I.RECEIVE_RESET_PASSWORD(null,t)),t}))}))},Te=function(e){var t=e.username,n=e.verificationtoken,r=e.newpassword;return B((function(e,a,o){return e(I.REQUEST_RESET_PASSWORD({username:t})),d.Sb(o,t,n,r).then((function(t){return e(I.RECEIVE_VERIFY_RESET_PASSWORD(t))})).catch((function(t){throw e(I.RECEIVE_VERIFY_RESET_PASSWORD(null,t)),t}))}))},Ce=function(e){var t=e.username,n=e.email;return B((function(e,r,a){return e(I.REQUEST_RESEND_VERIFICATION_EMAIL({email:n})),d.tb(a,n,t).then((function(t){return e(I.RECEIVE_RESEND_VERIFICATION_EMAIL(t)),t})).catch((function(t){throw e(I.RECEIVE_RESEND_VERIFICATION_EMAIL(null,t)),t}))}))},ke=function(){return function(e){return e(I.RESET_RESEND_VERIFICATION_EMAIL())}},Ie=function(e,t){return B((function(n,r,o){if(!t||t.length<1)throw Error("Invalid vote params");var i=t.map((function(e){return e.token})),c=t[0].type;return n(I.REQUEST_START_VOTE({tokens:i,type:c})),d.Hb(o,e,t).then((function(e){n(Pe(i)),n(I.RECEIVE_START_VOTE(Object(a.a)(Object(a.a)({},e),{},{type:c,tokens:i,success:!0})))})).catch((function(e){throw n(I.RECEIVE_START_VOTE(null,e)),e}))}))},xe=function(){return function(e,t){e(I.REQUEST_PROPOSAL_PAYWALL_DETAILS());var n=j.s(t());return d.gb().then((function(t){return e(I.RECEIVE_PROPOSAL_PAYWALL_DETAILS(Object(a.a)(Object(a.a)({},t),{},{userid:n})))})).catch((function(t){e(I.RECEIVE_PROPOSAL_PAYWALL_DETAILS(null,t))}))}},Re=function(){return function(e,t){e(I.REQUEST_USER_PROPOSAL_CREDITS());var n=j.s(t());return d.Nb().then((function(t){return e(I.RECEIVE_USER_PROPOSAL_CREDITS(Object(a.a)(Object(a.a)({},t),{},{userid:n})))})).catch((function(t){e(I.RECEIVE_USER_PROPOSAL_CREDITS(null,t))}))}},Ne=function(e){return B(function(){var t=Object(s.a)(R().mark((function t(n,r,o){var i,c;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(I.REQUEST_USER_INVENTORY({userid:e})),t.prev=1,t.next=4,d.Ob(o,e);case 4:return i=t.sent,c=i.vetted.length+i.unvetted.length,n(I.RECEIVE_USER_INVENTORY({proposals:Object(a.a)({},i),userid:e,numofproposals:c})),t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t.catch(1),n(I.RECEIVE_USER_INVENTORY(null,t.t0)),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n,r){return t.apply(this,arguments)}}())},Pe=function(e){return B((function(t,n,r){return t(I.REQUEST_PROPOSALS_VOTE_SUMMARY({tokens:e})),d.ob(r,e).then((function(e){return t(I.RECEIVE_PROPOSALS_VOTE_SUMMARY(Object(a.a)(Object(a.a)({},e),{},{success:!0}))),e})).catch((function(e){throw t(I.RECEIVE_PROPOSALS_VOTE_SUMMARY(null,e)),e}))}))},Le=function(e){return B((function(t,n,r){return t(I.REQUEST_BATCH_PROPOSAL_SUMMARY({tokens:e})),d.c(r,e).then((function(e){var n=e.summaries;return t(I.RECEIVE_BATCH_PROPOSAL_SUMMARY({summaries:n,success:!0})),{proposalSummaries:n}})).catch((function(e){throw t(I.RECEIVE_BATCH_PROPOSAL_SUMMARY(null,e)),e}))}))},Ae=function(e){return B((function(t,n,r){return t(I.REQUEST_PROPOSAL_VOTE_RESULTS({token:e})),d.mb(r,e).then((function(n){return t(I.RECEIVE_PROPOSAL_VOTE_RESULTS(Object(a.a)(Object(a.a)({},n),{},{token:e,success:!0})))})).catch((function(e){throw t(I.RECEIVE_PROPOSAL_VOTE_RESULTS(null,e)),e}))}))},De=function(e,t,n){return B((function(r,o,i){return r(I.REQUEST_AUTHORIZE_VOTE({token:t})),d.cb(i,"authorize",t,e,n).then((function(e){r(I.RECEIVE_AUTHORIZE_VOTE(Object(a.a)(Object(a.a)({},e),{},{token:t,success:!0})))})).catch((function(e){throw r(I.RECEIVE_AUTHORIZE_VOTE(null,e)),e}))}))},Ue=function(e,t,n){return B((function(r,o,i){return r(I.REQUEST_REVOKE_AUTH_VOTE({token:t})),d.cb(i,"revoke",t,e,n).then((function(e){return r(I.RECEIVE_REVOKE_AUTH_VOTE(Object(a.a)(Object(a.a)({},e),{},{token:t,success:!0})))})).catch((function(e){throw r(I.RECEIVE_REVOKE_AUTH_VOTE(null,e)),e}))}))},Ve=0,Me=null,Fe=function(){Me&&clearTimeout(Me)},Be=function e(t){return function(n,r){var o=j.s(r());return j.bc(r())?(Fe(),void n(I.TOGGLE_CREDITS_PAYMENT_POLLING(!1))):(n(I.REQUEST_PROPOSAL_PAYWALL_PAYMENT()),d.hb().then((function(r){if(t&&!r.txid&&Ve++,!t||Ve<6){var a=setTimeout((function(){return n(e(t))}),1e4);Me=a}else t&&6===Ve&&(n(I.TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT(!0)),n(I.TOGGLE_CREDITS_PAYMENT_POLLING(!1)));return r})).then((function(e){return n(I.RECEIVE_PROPOSAL_PAYWALL_PAYMENT(Object(a.a)(Object(a.a)({},e),{},{userid:o})))})).catch((function(e){throw n(I.RECEIVE_PROPOSAL_PAYWALL_PAYMENT(null,e)),e})))}},Ge=function(e){return B((function(t,n,r){return t(I.REQUEST_RESCAN_USER_PAYMENTS(e)),d.sb(r,e).then((function(n){t(I.RECEIVE_RESCAN_USER_PAYMENTS(Object(a.a)(Object(a.a)({},n),{},{userid:e})))})).catch((function(e){throw t(I.RECEIVE_RESCAN_USER_PAYMENTS(null,e)),e}))}))},We=function(){return B((function(e,t,n){return e(I.REQUEST_GENERATE_PAYOUTS({})),d.u(n).then((function(t){e(I.RECEIVE_GENERATE_PAYOUTS(t))})).catch((function(t){throw e(I.RECEIVE_GENERATE_PAYOUTS(null,t)),t}))}))},Ye=function(e,t){return B((function(n,r,a){return n(I.REQUEST_INVOICE_PAYOUTS({})),d.A(a,e,t).then((function(e){n(I.RECEIVE_INVOICE_PAYOUTS(e))})).catch((function(e){throw n(I.RECEIVE_INVOICE_PAYOUTS(null,e)),e}))}))},He=function(){return function(e){return e(I.REQUEST_PAY_APPROVED({})),d.X().then((function(t){e(I.RECEIVE_PAY_APPROVED(t))})).catch((function(t){throw e(I.RECEIVE_PAY_APPROVED(null,t)),t}))}},Qe=function(){return function(e){return e(I.REQUEST_SPENDING_SUMMARY({})),d.w().then((function(t){e(I.RECEIVE_SPENDING_SUMMARY(t))})).catch((function(t){throw e(I.RECEIVE_SPENDING_SUMMARY(null,t)),t}))}},qe=function(e){return B((function(t,n,r){return t(I.REQUEST_SPENDING_DETAILS({token:e})),d.v(r,e).then((function(e){return t(I.RECEIVE_SPENDING_DETAILS(Object(a.a)({},e))),e})).catch((function(e){throw t(I.RECEIVE_SPENDING_DETAILS(null,e)),e}))}))},ze=function(e,t){return B((function(n,r,o){return n(I.REQUEST_EXCHANGE_RATE({month:e,year:t})),d.t(o,+e,+t).then((function(r){return n(I.RECEIVE_EXCHANGE_RATE(Object(a.a)(Object(a.a)({},r),{},{month:e,year:t}))),r})).catch((function(e){throw n(I.RECEIVE_EXCHANGE_RATE(null,e)),e}))}))},Ke=function(){return B((function(e,t,n){return e(I.REQUEST_USER_SUBCONTRACTORS({})),d.Pb(n).then((function(t){e(I.RECEIVE_USER_SUBCONTRACTORS(t))})).catch((function(t){throw e(I.RECEIVE_USER_SUBCONTRACTORS(null,t)),t}))}))},Je=function(){return B((function(e,t,n){return e(I.REQUEST_CMS_USERS({})),d.h(n).then((function(t){e(I.RECEIVE_CMS_USERS(t))})).catch((function(t){throw e(I.RECEIVE_CMS_USERS(null,t)),t}))}))},Xe=function(e){return B((function(t,n,r){return t(I.REQUEST_DCCS({})),d.o(r,{status:e}).then((function(n){t(I.RECEIVE_DCCS(Object(a.a)(Object(a.a)({},n),{},{status:e})))})).catch((function(e){throw t(I.RECEIVE_DCCS(null,e)),e}))}))},Ze=function(e){return B((function(t,n,r){return t(I.REQUEST_DCC({})),d.n(r,e).then((function(e){t(I.RECEIVE_DCC(e))})).catch((function(e){throw t(I.RECEIVE_DCC(null,e)),e}))}))},$e=function(e){return function(t){return t(I.REQUEST_RECORD_COMMENTS()),d.m(e).then((function(n){t(I.RECEIVE_RECORD_COMMENTS(Object(a.a)(Object(a.a)({},n),{},{token:e})))})).catch((function(e){t(I.RECEIVE_RECORD_COMMENTS(null,e))}))}},et=function(e,t){return B((function(n,r,o){var i=j.p(r()),c=i.username,u=i.userid;return n(I.REQUEST_SUPPORT_OPPOSE_DCC({})),f.a.resolve(d.K(e,t)).then((function(e){return d.Fb(u,e)})).then((function(e){return d.Ib(o,e)})).then((function(r){n(I.RECEIVE_SUPPORT_OPPOSE_DCC(Object(a.a)(Object(a.a)({},r),{},{token:e,username:c,userid:u,isSupport:t===x.l})))})).catch((function(e){throw n(I.RECEIVE_SUPPORT_OPPOSE_DCC(null,e)),e}))}))},tt=function(e,t,n){return B((function(r,o,i){var c=j.s(o());if(c)return r(I.REQUEST_SET_DCC_STATUS({})),d.xb(i,c,e,t,n).then((function(o){r(I.RECEIVE_SET_DCC_STATUS(Object(a.a)(Object(a.a)({},o),{},{status:t,reason:n,token:e})))})).catch((function(e){throw r(I.RECEIVE_SET_DCC_STATUS(null,e)),e}))}))},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.Rb;return B((function(n,r,a){return n(I.REQUEST_SET_TOTP({})),d.yb(a,t,e).then((function(e){n(I.RECEIVE_SET_TOTP(e))})).catch((function(e){throw n(I.RECEIVE_SET_TOTP(null,e)),e}))}))},rt=function(e){return B((function(t,n,r){return t(I.REQUEST_VERIFY_TOTP({})),d.Tb(r,e).then((function(e){t(I.RECEIVE_VERIFY_TOTP(e))})).catch((function(e){throw t(I.RECEIVE_VERIFY_TOTP(null,e)),e}))}))},at=function(e,t){return B((function(n,r,a){return d.qb(a,e,t)}))},ot=function(e,t){return B((function(n,r,a){return d.l(a,e,t)}))},it=function(e,t){return B((function(n,r,a){return d.Jb(a,e,t)}))},ct=function(e,t){return B(function(){var n=Object(s.a)(R().mark((function n(r,a,o){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(I.REQUEST_VOTES_BUNDLE()),n.prev=1,n.next=4,f.a.all([d.lb(o,e),d.mb(o,e)]).then((function(e){var n=Object(u.a)(e,2),a=n[0],o={auths:a.auths,details:a.vote,votes:n[1].votes,serverpublickey:t};return r(I.RECEIVE_VOTES_BUNDLE(o)),o}));case 4:return n.abrupt("return",n.sent);case 7:throw n.prev=7,n.t0=n.catch(1),r(I.RECEIVE_VOTES_BUNDLE(null,n.t0)),n.t0;case 11:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e,t,r){return n.apply(this,arguments)}}())},ut=["draftId"],st=function(e){var t=e.month,n=e.year,r=e.name,o=e.location,i=e.contact,c=e.rate,u=e.address,s=e.lineitems,l=e.exchangerate,p=e.files;return function(e,h){var v=j.p(h());return e(function(e,t,n,r,o,i,c,u,s,l,m,p){return B((function(h,v,y){return h(I.REQUEST_NEW_INVOICE({month:n,year:r,exchangerate:o,name:i,location:c,contact:u,rate:s,address:l,lineItems:m,files:p})),f.a.resolve(d.M(n,r,o,i,c,u,s,l,m,p)).then((function(t){return d.Gb(e,t)})).then((function(e){return d.U(y,e)})).then((function(n){var r=j.Xb(v());h(I.RECEIVE_NEW_INVOICE(Object(a.a)(Object(a.a)({},n),{},{numcomments:0,userid:e,username:t}))),E(r)})).catch((function(e){throw h(I.RECEIVE_NEW_INVOICE(null,e)),b(),e}))}))}(v.userid,v.username,+t,+n,l,r,o,i,Object(m.j)(+c),u,s,p)).then((function(){return j.Sb(h())}))}},lt=function(e){var t=e.name,n=e.amount,r=e.startDate,o=e.endDate,i=e.domain,c=e.description,u=e.files,s=e.rfpDeadline,l=e.rfpLink,m=e.type;return function(e,p){var h=j.p(p()),v=h.userid,E=h.username;return e(function(e,t,n,r,o,i,c,u,s,l,m,p){return B((function(h,v,E){return r=Number(r),h(I.REQUEST_NEW_PROPOSAL({name:n,description:u,rfpDeadline:s,type:l,rfpLink:m,files:p,amount:r,startDate:o,endDate:i,domain:c})),f.a.resolve(d.N({name:n,amount:r,startdate:o,enddate:i,domain:c,markdown:u,linkby:s,linkto:m,attachments:p})).then((function(t){return d.Gb(e,t)})).then((function(e){return d.V(E,e)})).then((function(s){var f=s.record;h(I.RECEIVE_NEW_PROPOSAL(Object(a.a)(Object(a.a)({},f),{},{comments:0,userid:e,username:t,name:n,description:u,type:l,amount:r,startDate:o,endDate:i,domain:c}))),b()})).catch((function(e){throw h(I.RECEIVE_NEW_PROPOSAL(null,e)),b(),e}))}))}(v,E,t.trim(),100*n,r,o,i,c,s,m,l,u)).then((function(){return e(Re())})).then((function(){return j.Tb(p())}))}},ft=function(e){var t=e.type,n=e.nomineeid,r=e.statement,o=e.domain,i=e.contractortype;return function(e,c){var u=j.p(c());return e(function(e,t,n,r,o,i,c){return B((function(u,s,l){return u(I.REQUEST_NEW_DCC({})),f.a.resolve(d.J(n,r,o,i,c)).then((function(t){return d.Db(e,t)})).then((function(e){return d.S(l,e)})).then((function(n){u(I.RECEIVE_NEW_DCC(Object(a.a)(Object(a.a)({},n),{},{numcomments:0,currentUserID:e,username:t}))),g()})).catch((function(e){throw u(I.RECEIVE_NEW_DCC(null,e)),e}))}))}(u.userid,u.username,t,n,r,o,i)).then((function(){return j.Rb(c())}))}},dt=function(e){var t=e.token,n=e.name,r=e.amount,o=e.startDate,i=e.endDate,c=e.domain,u=e.description,s=e.files,l=e.rfpDeadline,m=e.type,p=e.rfpLink;return function(e,h){return e(function(e,t,n,r,o,i,c,u,s,l,m,p){return B((function(h,v,E){return n=Math.round(100*Number(n)),h(I.REQUEST_EDIT_PROPOSAL({name:t,amount:n,startDate:r,endDate:o,domain:i,description:c,files:m,rfpDeadline:u,rfpLink:l,type:s})),f.a.resolve(d.N({name:t,amount:n,startdate:r,enddate:o,domain:i,markdown:c,linkby:u,linkto:l,attachments:m})).then((function(t){return d.Gb(e,t)})).then((function(e){return d.r(E,Object(a.a)(Object(a.a)({},e),{},{token:p}))})).then((function(e){var t,n=e.record;return h(I.RECEIVE_EDIT_PROPOSAL({proposal:n})),b(),null===n||void 0===n||null===(t=n.censorshiprecord)||void 0===t?void 0:t.token})).catch((function(e){throw h(I.RECEIVE_EDIT_PROPOSAL(null,e)),b(),e}))}))}(j.s(h()),n,r,o,i,c,u,l,m,p,s,t))}},mt=function(e){var t=e.commentID,n=e.comment,r=e.token,o=e.parentID,i=e.state,c=e.extraData,u=e.extraDataHint,s=e.sectionId;return function(e,l){return e(function(e){var t=e.userid,n=e.token,r=e.commentID,o=e.comment,i=e.parentID,c=e.state,u=e.extraData,s=e.extraDataHint,l=e.sectionId;return B((function(e,m,p){var h=d.H({userid:t,token:n,comment:o,parentid:i||0,state:c,commentid:r,extradata:u,extradatahint:s||""});return e(I.REQUEST_EDIT_COMMENT(h)),f.a.resolve(d.Bb(h)).then((function(e){return d.p(p,e)})).then((function(t){var n=t.comment||{};return e(I.RECEIVE_EDIT_COMMENT(Object(a.a)(Object(a.a)({},n),{},{sectionId:l})))})).catch((function(t){throw e(I.RECEIVE_EDIT_COMMENT(null,t)),t}))}))}({userid:j.s(l()),token:r,commentID:t,comment:n,parentID:o,state:i,extraData:c,extraDataHint:u,sectionId:s}))}},pt=function(e){var t=e.comment,n=e.token,r=e.parentID,o=e.state,i=e.extraData,c=e.extraDataHint,u=e.sectionId;return function(e,s){return e(function(e,t,n,r,o,i,c,u){return B((function(s,l,p){var h=d.G(t,n,r,o,i,c);return s(I.REQUEST_NEW_COMMENT(h)),f.a.resolve(d.Ab(e,h)).then((function(e){var n=Object(m.C)(t),r=(j.m(l())[n]||{}).comments,a=r&&Object.values(r).flat();if(a&&a.find((function(t){return t.signature===e.signature})))throw new Error("That is a duplicate comment.");return e})).then((function(e){return d.R(p,e)})).then((function(e){var t=e.comment||{},n=t.commentid,r=c===x.Bb;return s(I.RECEIVE_NEW_COMMENT(Object(a.a)(Object(a.a)({},t),{},{sectionId:u||(r?n:x.db)})))})).catch((function(e){throw s(I.RECEIVE_NEW_COMMENT(null,e)),e}))}))}(j.s(s()),n,t,r,o,i,c,u))}},ht=function(e){var t=e.token,n=e.month,r=e.year,o=e.name,i=e.location,c=e.contact,u=e.rate,s=e.address,l=e.lineitems,p=e.exchangerate,h=e.files;return function(e,b){var v=j.p(b());return e(function(e,t,n,r,o,i,c,u,s,l,m,p,h){return B((function(b,v,y){var g=j.Xb(v());return b(I.REQUEST_EDIT_INVOICE({month:n,year:r,exchangerate:o,name:i,location:c,contact:u,rate:s,address:l,lineItems:m,files:p})),f.a.resolve(d.M(n,r,o,i,c,u,s,l,m,p)).then((function(t){return d.Gb(e,t)})).then((function(e){return d.q(y,Object(a.a)(Object(a.a)({},e),{},{token:h}))})).then((function(n){b(I.RECEIVE_EDIT_INVOICE(Object(a.a)(Object(a.a)({},n),{},{numcomments:0,userid:e,username:t}))),E(g)})).catch((function(e){throw b(I.RECEIVE_EDIT_INVOICE(null,e)),E(g),e}))}))}(v.userid,v.username,+n,+r,p,o,i,c,Object(m.j)(+u),s,l,h,t))}},bt=function(e){var t=e.name,n=e.description,r=e.rfpDeadline,a=e.type,o=e.rfpLink,i=e.files,c=e.draftId,u=e.startDate,s=e.endDate,l=e.amount,f=e.domain;return function(e){b();var d=c||Object(m.D)("draft");return e(I.SAVE_DRAFT_PROPOSAL({name:t?t.trim():"",description:n,files:i,rfpDeadline:r,type:a,rfpLink:o,timestamp:Math.floor(Date.now()/1e3),id:d,startDate:u,endDate:s,amount:l,domain:f})),d}},vt=function(e){return function(t,n){var r=e||j.s(n()),a=Object(O.h)(r),o=j.H(a)||null;t(I.LOAD_DRAFT_PROPOSALS(o))}},Et=function(e){return I.DELETE_DRAFT_PROPOSAL(e)},yt=function(e){var t=e.draftId,n=Object(o.a)(e,ut);return function(e,r){var o=j.Xb(r());E(o);var i=t||Object(m.D)("draft");return e(I.SAVE_DRAFT_INVOICE(Object(a.a)({id:i,timestamp:Date.now()/1e3},n))),i}},gt=function(e){return function(t,n){var r=e||j.s(n()),a=Object(O.h)(r),o=j.G(a)||null;t(I.LOAD_DRAFT_INVOICES(o))}},Ot=function(e){return I.DELETE_DRAFT_INVOICE(e)},_t=function(e){var t=e.password,n=e.newUsername;return function(e){return e(function(e,t){return B((function(n,r,o){return n(I.REQUEST_CHANGE_USERNAME()),d.g(o,e,t).then((function(e){return n(I.RECEIVE_CHANGE_USERNAME(Object(a.a)(Object(a.a)({},e),{},{username:t})))})).catch((function(e){throw n(I.RECEIVE_CHANGE_USERNAME(null,e)),e}))}))}(t,n))}},jt=function(e){var t=e.existingPassword,n=e.newPassword;return function(e){return e(function(e,t){return B((function(n,r,a){return n(I.REQUEST_CHANGE_PASSWORD()),d.f(a,e,t).then((function(e){return n(I.RECEIVE_CHANGE_PASSWORD(e))})).catch((function(e){throw n(I.RECEIVE_CHANGE_PASSWORD(null,e)),e}))}))}(t,n))}},wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return I.IDENTITY_IMPORTED({errorMsg:t,successMsg:e})},St=function(e){return function(t){return t(I.KEY_MISMATCH(e))}},Tt=function(e){return I.TOGGLE_CREDITS_PAYMENT_POLLING(e)},Ct=function(e){return I.TOGGLE_PROPOSAL_PAYMENT_RECEIVED(e)},kt=function(e){return function(t){return t(function(e){return B((function(t,n,r){return t(I.REQUEST_EDIT_USER(e)),d.s(r,e).then((function(n){t(I.RECEIVE_EDIT_USER(Object(a.a)(Object(a.a)({},n),{},{preferences:e})))})).catch((function(e){t(I.RECEIVE_EDIT_USER(null,e))}))}))}(j.hc(e)))}},It=function(e){var t=e.comment,n=e.token,r=e.parentID;return function(e,a){return e(function(e,t,n,r){return B((function(a,o,i){return a(I.REQUEST_NEW_COMMENT({token:t,comment:n,parentid:r})),f.a.resolve(d.L(t,n,r)).then((function(t){return d.Eb(e,t)})).then((function(e){var n=j.m(o())[t].comments;if(n&&n.find((function(t){return t.signature===e.signature})))throw new Error("That is a duplicate comment.");return e})).then((function(e){return d.T(i,e)})).then((function(e){var t=e.comment;a(I.RECEIVE_NEW_COMMENT(t))})).catch((function(e){throw a(I.RECEIVE_NEW_COMMENT(null,e)),e}))}))}(j.s(a()),n,t,r))}},xt=function(e){var t=e.type,n=e.nomineeid,r=e.statement,a=e.domain,o=e.contractortype,i=e.id,c=e.nomineeusername;return function(e){g();var u=i||Object(m.D)("draft");return e(I.SAVE_DRAFT_DCC({type:t,nomineeid:n,statement:r,domain:a,contractortype:o,id:u,nomineeusername:c,timestamp:Date.now()/1e3})),u}},Rt=function(e){return function(t,n){var r=e||j.s(n()),a=Object(O.h)(r),o=j.F(a)||null;t(I.LOAD_DRAFT_DCCS(o))}},Nt=function(e){return I.DELETE_DRAFT_DCC(e)},Pt=function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r=[];for(var a in t){var o=encodeURIComponent(a),i=encodeURIComponent(t[a]);r.push(o+"="+i)}return r=r.join("&"),fetch(e,{mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:n,body:r}).then((function(e){if(e.status>=400)throw new Error("Bad response from server");return e.json()}))}("https://faucet.decred.org/requestfaucet",{address:e,amount:t,json:!0})},Lt=function(e,t,n){return function(r){return r(I.REQUEST_PAYWALL_PAYMENT_WITH_FAUCET()),Pt(e,t).then((function(e){if(e.error){var t=new Error(e.error);throw r(I.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET(null,t)),t}return r(I.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET(Object(a.a)(Object(a.a)({},e),{},{userid:n})))})).catch((function(e){throw r(I.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET(null,e)),e}))}},At=function(){return I.RESET_PAYWALL_PAYMENT_WITH_FAUCET()}},1007:function(e,t,n){var r={"./cms/config.json":[1211,13],"./politeia/config.json":[437]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(a,3)}))}a.keys=function(){return Object.keys(r)},a.id=1007,e.exports=a},1008:function(e,t,n){var r={"./cms-logo-dark.svg":1009,"./cms-logo-light.svg":1010,"./pi-logo-dark.svg":1011,"./pi-logo-light.svg":1012,"./rfp-tag.svg":439,"./search-small.svg":1013};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=1008},1009:function(e,t,n){e.exports=n.p+"static/media/cms-logo-dark.1cd9b7cc.svg"},1010:function(e,t,n){e.exports=n.p+"static/media/cms-logo-light.792abe53.svg"},1011:function(e,t,n){e.exports=n.p+"static/media/pi-logo-dark.82ae787b.svg"},1012:function(e,t,n){e.exports=n.p+"static/media/pi-logo-light.60670e11.svg"},1013:function(e,t,n){e.exports=n.p+"static/media/search-small.020840ed.svg"},104:function(e,t,n){e.exports={title:"ProposalsList_title__1jcoK",statusBarTooltip:"ProposalsList_statusBarTooltip__3Y6ya",statusTag:"ProposalsList_statusTag__30vfQ",statusWrapper:"ProposalsList_statusWrapper__3J5vz",status:"ProposalsList_status__2jHSd",itemTitle:"ProposalsList_itemTitle__2e2MM",commentsLink:"ProposalsList_commentsLink__3Ewcs",itemWrapper:"ProposalsList_itemWrapper__XBOgO",statusBarWrapper:"ProposalsList_statusBarWrapper__akoFL",timeLeftPassed:"ProposalsList_timeLeftPassed__3k4pe",voteEvent:"ProposalsList_voteEvent__1Ph3Z"}},105:function(e,t,n){e.exports={statusTag:"DCC_statusTag__11Xc9",topDetails:"DCC_topDetails__1lsuC",field:"DCC_field__14v7i",fieldLabel:"DCC_fieldLabel__MPxWc",statement:"DCC_statement__212K9",supportOpposeButtons:"DCC_supportOpposeButtons__2rMco",supportOpposeBar:"DCC_supportOpposeBar__3w4TX",dccActions:"DCC_dccActions__2PL9C"}},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(0),o=n(208),i=n(179);function c(e,t){var n=Object(a.useState)(t),c=Object(r.a)(n,2),u=c[0],s=c[1],l=Object(o.a)(u,{fetchRfpLinks:!0,fetchVoteSummaries:!1}),f=l.proposals,d=l.proposalsTokens,m=l.loading,p=l.verifying,h=m||p;Object(a.useEffect)((function(){if(!h){var t=d.approved&&Object(i.difference)(d.approved,Object(i.keys)(f)).splice(0,e);s(t)}}),[f,d.approved,h,e]);var b=Object(a.useMemo)((function(){return f&&Object.values(f).filter((function(e){return!e.linkby}))}),[f]);return{proposals:Object.values(f),proposalsByToken:f,proposalsNotRFP:b,isLoading:h,remainingTokens:u}}},112:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(0),o=n(10),i=n(6),c=n(60),u=n(8),s=n(84);function l(e){var t=Object(i.c)(u.eb),n=Object(i.c)(u.s),l=t&&!n?void 0:e||n,f=Object(a.useMemo)((function(){return u.Jb(l)}),[l]),d=Object(i.c)(f),m=Object(i.c)(u.t),p=Object(i.b)(o.Q),h=Object(i.c)(u.ab),b=!d||d&&!d.identities,v=!!l&&b&&!h,E=[l],y=Object(c.a)(p,E,v),g=Object(r.a)(y,2),O=g[0],_=g[1];return Object(s.a)(_),{user:d,isAdmin:m,loading:O,currentUserID:n,isCMS:t}}},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(10),a=n(6),o=n(8);function i(){return{userPubkey:Object(a.c)(o.A),currentUserID:Object(a.c)(o.s),currentUserUsername:Object(a.c)(o.C),currentUserEmail:Object(a.c)(o.r),identityImportSuccess:Object(a.c)(o.K),keyMismatch:Object(a.c)(o.gb),updateUserKeyToken:Object(a.c)(o.u),updateUserKeyError:Object(a.c)(o.mc),shouldAutoVerifyKey:Object(a.c)(o.kc),keyMismatchAction:Object(a.b)(r.d),onIdentityImported:Object(a.b)(r.Z),onUpdateUserKey:Object(a.b)(r.Lb)}}},1132:function(e,t,n){var r={"./about-politeia.md":[1212,7],"./onboard-cms.md":[1213,8],"./onboard-pi.md":[1214,9],"./paywall-politeia.md":[1215,10],"./privacy-policy-cms.md":[1216,11],"./privacy-policy.md":[1217,12]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=1132,e.exports=a},118:function(e,t,n){e.exports={statusTag:"Invoice_statusTag__3Xjbc",topDetails:"Invoice_topDetails__1Pwp0",field:"Invoice_field__33WNF",fieldLabel:"Invoice_fieldLabel__3Dfxh"}},1180:function(e,t,n){},1208:function(e,t,n){},1209:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(95),i=n.n(o),c=n(3),u=n(2),s=n(86),l=n(29),f=n(1),d=n(6),m=n(33),p=n(1224),h=n(1223),b=n(1222),v=n(1220),E=n(18),y=n(206),g=n(641),O=["title","titleSelector"],_=function(e){var t,n=e.title,r=e.titleSelector,o=Object(E.a)(e,O),i=(t=r,Object(d.c)(t||function(){return""}));return Object(y.b)(i||n),a.a.createElement(g.a,o)},j=["history"],w=Object(h.a)((function(e){var t=e.history,n=Object(E.a)(e,j),o=Object(m.c)(),i=o.initDone,c=o.currentUser;return Object(r.useEffect)((function(){!i||c&&c.isadmin||t.push("/")}),[i,c,t]),i&&!!c&&a.a.createElement(_,n)})),S=["history"],T=Object(h.a)((function(e){var t=e.history,n=Object(E.a)(e,S),o=Object(m.c)(),i=o.initDone,c=o.currentUser;return Object(r.useEffect)((function(){i&&!c&&t.push("/")}),[i,c,t]),a.a.createElement(_,n)})),C=["history"],k=Object(h.a)((function(e){var t=e.history,n=Object(E.a)(e,C),o=Object(m.c)(),i=o.initDone,c=o.currentUser;return Object(r.useEffect)((function(){i&&c&&t.push("/")}),[i,c,t]),a.a.createElement(_,n)})),I=n(61),x=n(340),R=function(){return a.a.createElement(I.a,null,a.a.createElement(x.a,null))},N=n(152),P=function(){var e=Object(l.d)().privacyPolicyContent;return a.a.createElement(I.a,{contentWidth:"widen"},a.a.createElement(N.a,{contentName:e}))},L=n(19),A=n(4),D=n(355),U=function(e){e.children,e.show,e.style;return null},V=function(e){var t=e.email,n=void 0===t?"example@gmail.com":t,r=e.title,o=e.bulletPoints;return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.H2,null,r),a.a.createElement(f.P,{style:{marginTop:"2rem",marginBottom:0}},"Note that, for privacy reasons, Politeia does not disclose whether an email address has already been registered. If you don\u2019t receive an email:"),a.a.createElement("ul",{style:{padding:"1rem 0"}},a.a.createElement("li",null,"Check that ".concat(n," is the correct address.")),a.a.createElement("li",null,"Check your spam folder!"),o.map((function(e,t){return a.a.createElement("li",{key:"bp-".concat(t)},e)}))),a.a.createElement(f.P,null,"If you're sure you should have received an email, join the #support:decred.org channel on"," ",a.a.createElement(f.Link,{href:"https://chat.decred.org"},"Matrix")," to get assistance from Politeia administrators."))};V.defaultProps={email:"email@example.com",title:"Please check your email inbox",bulletPoints:[]};var M=V,F=n(47),B=n(10),G=n(15),W=n(85);function Y(){Y=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function H(){var e=Object(d.b)(B.nb),t=Object(d.b)(B.Ub),n=G.f().shape({email:G.h().email("Invalid email").required("Required")});return Object(r.useEffect)((function(){return function(){t()}}),[t]),{validationSchema:n,onResendVerificationEmail:e}}function Q(){var e=Object(r.useState)(!1),t=Object(A.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),i=Object(A.a)(o,2),c=i[0],u=i[1],s=Object(r.useState)(!1),l=Object(A.a)(s,2),f=l[0],m=l[1],p=Object(d.b)(B.Nb);return Object(r.useEffect)((function(){var e=G.f().shape({username:G.h().required("Username is required"),email:G.h().email("Invalid email").required("Email is required"),verificationtoken:G.h().required("Verification token is required")});function t(){return(t=Object(L.a)(Y().mark((function t(){var n,r,o,i;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(!0),n=Object(W.b)(),r=n.email,o=n.verificationtoken,i=n.username,t.next=5,e.isValid({username:i,email:r,verificationtoken:o});case 5:if(t.sent){t.next=8;break}throw new Error("Invalid email or verification token");case 8:return t.next=10,p(r,o,i);case 10:a(!1),u(!0),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),a(!1),m(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[p]),{success:c,loading:n,error:f}}function q(){q=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var z=function(){var e=H(),t=e.validationSchema,n=e.onResendVerificationEmail,o=Object(r.useState)(),i=Object(A.a)(o,2),c=i[0],u=i[1],s=Object(r.useState)(),l=Object(A.a)(s,2),d=l[0],m=l[1],p=Object(r.useCallback)(function(){var e=Object(L.a)(q().mark((function e(t,r){var a,o,i,c;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,o=r.resetForm,i=r.setFieldError,e.prev=1,e.next=4,n(t);case 4:c=e.sent,a(!1),u(t.email),m(c&&c.verificationtoken),o(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i("global",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[u,n]),h=!!c;return a.a.createElement(a.a.Fragment,null,a.a.createElement(F.a,{initialValues:{username:"",email:""},validationSchema:t,onSubmit:p},(function(e){var t=e.Form,n=e.Title,r=e.Actions,o=e.values,i=e.handleChange,u=e.handleBlur,s=e.handleSubmit,l=e.errors,d=e.touched;return h?a.a.createElement(M,{title:"Please check your inbox for your verification email",email:c}):a.a.createElement(t,{onSubmit:s},a.a.createElement(n,null,"Resend Verification Email"),a.a.createElement(f.TextInput,{label:"Username",id:"username",autoComplete:"username",value:o.username,onChange:i,onBlur:u,error:d.username&&l.username}),a.a.createElement(f.TextInput,{label:"Email",id:"email",autoComplete:"email",value:o.email,onChange:i,onBlur:u,error:d.email&&l.email}),a.a.createElement(r,null,a.a.createElement(f.Button,{type:"submit"},"Resend")))})),a.a.createElement(U,{show:d},a.a.createElement(D.a,{to:"/user/verify?email=".concat(c,"&verificationtoken=").concat(d)},"Verify email")))},K=function(){return a.a.createElement(I.a,null,a.a.createElement(z,null))},J=n(8),X=n(36),Z=n(11),$=n(39),ee=function(e){var t,n=e.minusernamelength,r=e.maxusernamelength,a=e.usernamesupportedchars;return(t=G.h()).matches.apply(t,Object(Z.a)(Object($.l)("username",a))).min(n,Object($.j)("username",n)).max(r,Object($.h)("username",r)).required("Required")},te=function(e){return G.f().shape({username:ee(e),email:G.h().email("Invalid email").required("Required")})},ne=function(e){var t=e.minpasswordlength;return G.f().shape({newpassword:G.h().min(t).required("Required"),verify_password:G.h().oneOf([G.g("newpassword")],"Passwords must match").required("Required")})},re=function(e){return G.f().shape({username:ee(e),verificationtoken:G.h().required("Verification token is required")})};function ae(){ae=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function oe(e){var t=Object(r.useState)(null),n=Object(A.a)(t,2),a=n[0],o=n[1],i=Object(X.a)().policy;return Object(r.useEffect)((function(){if(i){var t=e(i);o(t)}}),[i,e]),a}function ie(){ie=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var ce=function(){var e=function(){var e=Object(d.c)(J.B);return{onResetPassword:Object(d.b)(B.pb),validationSchema:oe(te),requestResetResponse:e}}(),t=e.validationSchema,n=e.onResetPassword,o=Object(r.useState)(""),i=Object(A.a)(o,2),c=i[0],u=i[1],s=Object(r.useState)(""),l=Object(A.a)(s,2),m=l[0],p=l[1],h=Object(r.useState)(),b=Object(A.a)(h,2),v=b[0],E=b[1],y=!!c&&!!m,g=Object(r.useCallback)(function(){var e=Object(L.a)(ie().mark((function e(t,r){var a,o,i;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,o=r.setFieldError,e.prev=1,e.next=4,n(t);case 4:i=e.sent,a(!1),u(t.username),p(t.email),E(i.verificationtoken),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),a(!1),o("global",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[n]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(F.a,{initialValues:{username:"",email:""},validationSchema:t,onSubmit:g},(function(e){var t=e.Form,n=e.Title,r=e.Actions,o=e.ErrorMessage,i=e.values,c=e.handleChange,u=e.handleBlur,s=e.handleSubmit,l=e.errors,d=e.touched,p=e.isSubmitting;return y?a.a.createElement(M,{email:m,title:"Please check your mailbox to reset your password"}):a.a.createElement(t,{onSubmit:s},a.a.createElement(n,null,"Reset Password"),l&&l.global&&a.a.createElement(o,null,l.global.toString()),a.a.createElement(f.TextInput,{label:"Username",id:"username",value:i.username,onChange:c,onBlur:u,error:d.username&&l.username}),a.a.createElement(f.TextInput,{label:"Email",id:"email",value:i.email,onChange:c,onBlur:u,error:d.email&&l.email}),a.a.createElement(r,null,a.a.createElement(f.Button,{loading:p,type:"submit"},"Reset Password")))})),a.a.createElement(U,{show:v},a.a.createElement(D.a,{to:"/user/password/reset?username=".concat(c,"&verificationtoken=").concat(v)},"Reset password")))},ue=function(){return a.a.createElement(I.a,null,a.a.createElement(ce,null))};function se(){se=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var le=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.H2,null,"Password reset completed"),a.a.createElement(f.P,{style:{marginTop:"2rem",marginBottom:0}},"Your password has been changed. You can now login with your new password."))},fe=function(){var e=Object(r.useState)(!1),t=Object(A.a)(e,2),n=t[0],o=t[1],i=function(){var e=Object(r.useState)({}),t=Object(A.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),i=Object(A.a)(o,2),c=i[0],u=i[1],s=Object(d.b)(B.Ob),l=oe(ne),f=oe(re);return Object(r.useEffect)((function(){function e(){return(e=Object(L.a)(ae().mark((function e(t){var n,r,o;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(W.b)(),r=n.username,o=n.verificationtoken,e.next=3,t.isValid({username:r,verificationtoken:o});case 3:if(e.sent){e.next=7;break}return u("Invalid email, username or verification token"),e.abrupt("return");case 7:a({username:r||"",verificationtoken:o||"",newpassword:"",verify_password:""});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f&&function(t){e.apply(this,arguments)}(f)}),[f]),{onVerifyResetPassword:s,validationSchema:l,initialValues:n,invalidParamsError:c}}(),c=i.onVerifyResetPassword,u=i.validationSchema,s=i.initialValues,l=i.invalidParamsError;if(l)throw l;function m(){return(m=Object(L.a)(se().mark((function e(t,n){var r,a,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,a=n.setFieldError,i=n.resetForm,e.prev=1,e.next=4,c(t);case 4:r(!1),o(!0),i(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),r(!1),a("global",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return a.a.createElement(F.a,{initialValues:s,validationSchema:u,loading:!u,onSubmit:function(e,t){return m.apply(this,arguments)},enableReinitialize:!0},(function(e){var t=e.Form,r=e.Title,o=e.Actions,i=e.ErrorMessage,c=e.values,u=e.handleChange,s=e.handleBlur,l=e.handleSubmit,d=e.errors,m=e.touched,p=e.isSubmitting;return n?a.a.createElement(le,null):a.a.createElement(t,{onSubmit:l},a.a.createElement(r,null,"Reset Password"),d&&d.global&&a.a.createElement(i,null,d.global.toString()),a.a.createElement(f.TextInput,{id:"newpassword",label:"Password",type:"password",autoComplete:"current-password",value:c.newpassword,onChange:u,onBlur:s,error:m.newpassword&&d.newpassword}),a.a.createElement(f.TextInput,{id:"verify_password",label:"Confirm Password",type:"password",autoComplete:"current-password",value:c.verify_password,onChange:u,onBlur:s,error:m.verify_password&&d.verify_password}),a.a.createElement(o,null,a.a.createElement(f.Button,{loading:p,type:"submit"},"Reset Password")))}))},de=function(){return a.a.createElement(I.a,null,a.a.createElement(fe,null))},me=n(34),pe=n(32),he=n(110),be=n(68),ve=n.n(be),Ee=n(447),ye=n.n(Ee),ge=n(257),Oe=n.n(ge),_e=["No type defined","Direct","Supervisor","Sub Contractor","Nominee","Revoked","Temp. Contractor","Revoked Temp.","Proposal Approved"],je=_e.map((function(e,t){return{value:t,label:e}})),we=function(e,t){return t.flatMap((function(t){var n=Oe()(e,{id:t});return n?n.username:[]}))},Se=n(360),Te=n.n(Se),Ce=function(e){var t=e.className,n=e.children,r=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement("div",{className:Object(f.classNames)("justify-center",Te.a.container),"data-testid":"help-message"},a.a.createElement(f.Text,{textAlign:"center",className:Object(f.classNames)(t,Te.a.helpMessage,r&&Te.a.dark)},n))},ke=n(129),Ie=n(654),xe=n.n(Ie);var Re=n(182),Ne=n.n(Re),Pe=n(26),Le=n(23),Ae=G.f().shape({searchBy:G.h().required("required").oneOf(["email","username","domain","contractortype"]),searchTerm:G.h().when("searchBy",(function(e,t){return"email"===e||"username"===e?t.required("required"):t})),domain:G.f().when("searchBy",(function(e,t){return"domain"===e?t.required("required"):t})),contractortype:G.f().when("searchBy",(function(e,t){return"contractortype"===e?t.required("required"):t}))}),De=n(9);function Ue(){Ue=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Ve=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=e.Title,u={searchResult:Object(d.c)(J.ic),onSearchUser:Object(d.b)(B.Cb),isCMS:Object(d.c)(J.eb)},s=u.onSearchUser,l=u.searchResult,m=u.isCMS,p=Object(r.useState)(null),h=Object(A.a)(p,2),b=h[0],v=h[1],E=Object(r.useState)([]),y=Object(A.a)(E,2),g=y[0],O=y[1],_=Object(r.useState)(),j=Object(A.a)(_,2),w=j[0],S=j[1],T=ve()(Object(Le.j)(),["policyPi","domains"]),C=m?Object(De.l)(T):[],k=Object(r.useMemo)((function(){return m?[{value:"domain",label:"Domain"},{value:"contractortype",label:"Contractor type"},{value:"username",label:"Username"}]:[{value:"email",label:"Email"},{value:"username",label:"Username"}]}),[m]);function I(){return(I=Object(L.a)(Ue().mark((function e(t,n){var r,a,o,i,u,l;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.setSubmitting,e.prev=1,v(null),a="domain"===t.searchBy,o="contractortype"===t.searchBy,i="email"===t.searchBy,u="username"===t.searchBy,l=m&&u,w&&!a&&!o){e.next=12;break}return e.next=12,s(l?{}:Object(c.a)({},t.searchBy,u||i?t.searchTerm:o?t.contractortype.value:a?t.domain.value:""),m);case 12:S(l?t.searchTerm:null),r(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),r(!1),v(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=function(e,t){return t?e&&e.filter((function(e){return e&&e.username&&e.username.includes(t)})):e}(l,w);e&&O(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return t?{Username:a.a.createElement(Pe.a,{to:"/user/".concat(e.id)},e.username),Domain:Object(De.p)(Object(De.l)(n),e.domain),Type:_e[e.contractortype]}:{Username:e.username,Email:e.email,ID:a.a.createElement(Pe.a,{to:"/user/".concat(e.id)},e.id)}}))}(e,m,T))}),[l,m,w,T]),a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{actionsContent:null,title:a.a.createElement(i,{className:"margin-right-m"},"Search")},a.a.createElement(pe.c,{initialValues:{searchTerm:"",searchBy:m?"domain":"email",contractortype:void 0,domain:void 0},onSubmit:function(e,t){return I.apply(this,arguments)},validationSchema:Ae},(function(e){var t=e.values,n=e.handleChange,r=e.handleSubmit,o=e.isSubmitting,i=e.setFieldValue,c=e.isValid,u=function(e){return function(t){return i(e,t)}},s="domain"===t.searchBy,l="contractortype"===t.searchBy,d="email"===t.searchBy;return a.a.createElement("form",null,a.a.createElement(f.RadioButtonGroup,{className:Ne.a.searchByRadioGroup,optionClassName:Ne.a.searchByRadioButton,label:"",options:k,value:t.searchBy,onChange:function(e){return i("searchBy",e.value)}}),a.a.createElement("div",{className:"justify-left margin-top-m"},!l&&!s&&a.a.createElement(f.BoxTextInput,{"data-testid":"search-user",name:"searchTerm",className:Ne.a.searchBox,value:t.searchTerm,onChange:n,placeholder:d?"User email":"Username"}),l&&a.a.createElement(ke.a,{name:"contractortype",className:Ne.a.select,options:je,value:t.contractortype,onChange:u("contractortype"),placeholder:"Choose contractor type"}),s&&a.a.createElement(ke.a,{name:"domain",className:Ne.a.select,options:C,value:t.domain,onChange:u("domain"),placeholder:"Choose a domain"}),a.a.createElement(f.Button,{className:Ne.a.searchButton,onClick:r,type:"submit",loading:o,kind:c?"primary":"disabled"},"Search")))})))),a.a.createElement(o,{fillScreen:!0},b?a.a.createElement(f.Message,{kind:"error"},b.toString()):g&&g.length?a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},a.a.createElement(f.Table,{"data-testid":"results-table",data:g,headers:m?["Username","Domain","Type"]:["Username","Email","ID"]})):a.a.createElement(Ce,null,"No users to show")))},Me=function(){return a.a.createElement(me.a,{topBannerHeight:220},(function(e){return a.a.createElement(Ve,e)}))},Fe=function(e,t){var n,r=e.minpasswordlength,a=e.minusernamelength,o=e.maxusernamelength,i=e.usernamesupportedchars;return G.f().shape({email:G.h().email("Invalid email").required("Required"),username:(n=G.h()).matches.apply(n,Object(Z.a)(Object($.l)("username",i))).min(a,Object($.j)("username",a)).max(o,Object($.h)("username",o)).required("Required"),password:G.h().min(r,Object($.j)("password",r)).required("Required"),verify_password:G.h().oneOf([G.g("password")],"Passwords must match").required("Required"),verificationtoken:t?G.h().required("Required"):G.h()})};var Be=n(25),Ge=function(e){var t=e.title,n=e.onClose,r=e.show,o=e.onConfirm,i=e.confirmMessage,c=e.isCms;return a.a.createElement(f.Modal,{style:{maxWidth:"70rem"},show:r,title:t,onClose:n,iconType:"info",iconSize:"lg"},c?a.a.createElement(f.P,null,"CMS will create your CMS \u201cidentity\u201d, which consists of a public/private cryptographic key pair and browser cookie. This is necessary to verify your identity and allow submission of invoices, DCCs, commenting, and other CMS functions. After completing the signup process, you can export your identity (public/private keys) to another browser at any time."):a.a.createElement(f.P,null,"Politeia will send you a link to verify your email address. You must open this link in the same browser. After verifying your email, Politeia will create your Politeia \u201cidentity\u201d, which consists of a public/private cryptographic key pair and browser cookie. This is necessary to verify your identity and allow submission of proposals, commenting, voting, and other Politeia functions. After completing the signup process, you can export your identity (public/private keys) to another browser at any time."),a.a.createElement(f.Button,{style:{float:"right",marginTop:"3rem"},onClick:o},i))};Ge.defaultProps={title:"Before you continue",confirmMessage:"I understand, continue"};var We=Ge;function Ye(){Ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var He=function(){var e=function(){var e=Object(d.c)(J.Ub),t=Object(d.b)(B.h),n=Object(d.b)(B.i),a=Object(d.b)(B.ob),o=Object(l.d)(),i=o.enableAdminInvite,c=o.recordType,u=o.constants,s=Object(X.a)().policy,f=Object(r.useState)(s?Fe(s,i):null),m=Object(A.a)(f,2),p=m[0],h=m[1];Object(r.useEffect)((function(){s&&!p&&h(Fe(s,i))}),[s,i,p]);var b=i?n:t,v=c!==u.RECORD_TYPE_PROPOSAL;Object(r.useEffect)((function(){return function(){a()}}),[a]);var E=Object(W.b)(),y=E.email,g=E.verificationtoken;return{signupResponse:e,validationSchema:p,onSignup:b,enableAdminInvite:i,initialValues:{email:y||"",verificationtoken:g||"",password:"",username:"",verify_password:""},isCms:v}}(),t=e.onSignup,n=e.initialValues,o=e.signupResponse,i=e.validationSchema,c=e.enableAdminInvite,u=function(e){var t=e.asyncSubmit,n=e.isCms,a=Object(Be.a)(),o=Object(A.a)(a,2),i=o[0],c=o[1],u=Object(r.useState)(""),s=Object(A.a)(u,2),l=s[0],f=s[1],d=Object(r.useState)(""),m=Object(A.a)(d,2),p=m[0],h=m[1],b=function(e,n){var r=n.setSubmitting,a=n.resetForm,o=n.setFieldError;return Object(L.a)(Ye().mark((function n(){return Ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(),n.prev=1,n.next=4,t(e);case 4:r(!1),f(e.email),h(e.username),a(),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),r(!1),o("global",n.t0);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))},v=function(e,t){var n=t.setSubmitting;return function(){n(!1),c()}};return{handleSubmitAction:function(){i(We,{title:"Before you sign up",confirmMessage:"I understand, sign me up",onClose:v.apply(void 0,arguments),onConfirm:b.apply(void 0,arguments),isCms:n})},email:l,username:p}}({asyncSubmit:t,isCms:e.isCms}),s=u.handleSubmitAction,m=u.email,p=u.username,h=!!m;return a.a.createElement(a.a.Fragment,null,a.a.createElement(F.a,{initialValues:n,loading:!i,validationSchema:i,onSubmit:s},(function(e){var t=e.Form,n=e.Title,r=e.Actions,o=e.Footer,i=e.Link,u=e.ErrorMessage,s=e.values,l=e.handleChange,d=e.handleBlur,p=e.handleSubmit,b=e.errors,v=e.touched,E=e.isSubmitting;return h?c?a.a.createElement(a.a.Fragment,null,a.a.createElement(f.H2,null,"Account created successfully"),a.a.createElement(f.P,{style:{marginTop:"2rem"}},"You may ",a.a.createElement(i,{to:"/user/login"},"login")," to your account now.")):a.a.createElement(M,{title:"Please check your inbox to verify your registration",email:m,bulletPoints:["The verification link needs to be opened with the same browser that you used to sign up.",a.a.createElement(a.a.Fragment,null,"Make sure you don\u2019t already have an account on Politeia with this email address. If you do, you should"," ",a.a.createElement(i,{to:"/user/request-reset-password"},"reset your password")," ","instead.")]}):a.a.createElement(t,{onSubmit:p},a.a.createElement(n,null,"Create a new account"),b&&b.global&&a.a.createElement(u,null,b.global.toString()),a.a.createElement(f.TextInput,{label:"Email",id:"signupemail",name:"email",autoComplete:"email",value:s.email,onChange:l,onBlur:d,error:v.email&&b.email}),a.a.createElement(f.TextInput,{label:"Username",id:"username",name:"username",autoComplete:"username",value:s.username,onChange:l,onBlur:d,error:v.username&&b.username}),a.a.createElement(f.TextInput,{id:"signuppassword",label:"Password",type:"password",name:"password",autoComplete:"new-password",value:s.password,onChange:l,onBlur:d,error:v.password&&b.password}),a.a.createElement(f.TextInput,{id:"verify_password",label:"Verify Password",type:"password",name:"verify_password",autoComplete:"new-password",value:s.verify_password,onChange:l,onBlur:d,error:v.verify_password&&b.verify_password}),c&&a.a.createElement(f.TextInput,{label:"Verification Token",id:"verificationtoken",name:"verificationtoken",value:s.verificationtoken,onChange:l,onBlur:d,error:v.verificationtoken&&b.verificationtoken}),a.a.createElement(r,null,a.a.createElement(i,{to:"/user/resend-verification-email"},"Resend verification email"),a.a.createElement(f.Button,{type:"submit",loading:E},"Sign up")),a.a.createElement(o,{className:"justify-right"},a.a.createElement(f.Text,null,"Already have an account? ",a.a.createElement(i,{to:"/user/login"},"Log in!"))))})),a.a.createElement(U,{show:o&&o.verificationtoken},a.a.createElement(D.a,{to:"/user/verify?email=".concat(m,"&verificationtoken=").concat(o&&o.verificationtoken,"&username=").concat(p,"\n          ")},"Verify email")))},Qe=function(){return a.a.createElement(I.a,null,a.a.createElement(He,null))},qe=n(449),ze=n.n(qe),Ke=["message","spinnerProps"],Je=function(e){var t=e.message,n=e.spinnerProps,r=Object(E.a)(e,Ke);return a.a.createElement("div",Object.assign({className:ze.a.wrapper},r),a.a.createElement(f.Spinner,n),a.a.createElement("span",{className:ze.a.text},t))},Xe=function(){var e=Q(),t=e.success,n=e.loading,r=e.error;if(r)throw r;return n||!t?a.a.createElement(Je,{message:"Verifying email...",spinnerProps:{invert:!0}}):a.a.createElement(a.a.Fragment,null,a.a.createElement(f.H2,null,"Your email has been successfully verified"),a.a.createElement(f.P,{style:{marginTop:"2rem"}},"To complete your registration and to be able to submit proposals and comments, you must pay a small fee in DCR, which is used to help deter spam in Politeia."),a.a.createElement(f.P,null,"Please log in to find instructions on how to pay the registration fee."))},Ze=function(){return a.a.createElement(I.a,null,a.a.createElement(Xe,null))},$e=n(91),et=n.n($e),tt=n(312),nt=n(163),rt=n.n(nt);function at(){at=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var ot=Object(h.a)((function(e){var t=e.location,n=e.history,o=Object(tt.a)(),i=o.currentUserID,c=o.userPubkey,u=o.keyMismatchAction,s=o.verifyUserKey,l=o.verifyUserKeyError,d=o.onVerifyUserKey,m=o.isCMS,p=Object(r.useState)(!1),h=Object(A.a)(p,2),b=h[0],v=h[1],E=Object(r.useCallback)(Object(L.a)(at().mark((function e(){var n,r;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=et.a.parse(t.search),!(r=n.verificationtoken)||!i){e.next=7;break}return e.next=5,d(i,r);case 5:Object(De.F)(i,c,u),v(!0);case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),v(!0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[i,c,u,d,t]);Object(r.useEffect)((function(){b||s||E()}),[E,b,s]);var y=!s&&!l,g=s&&s.success,O=l,_=Object(r.useCallback)((function(){return n.push("/")}),[n]),j=m?"Ok, go to invoices":"Ok, go to proposals";return a.a.createElement(I.a,null,a.a.createElement("div",null,y&&"Loading ...",O&&a.a.createElement("div",{className:rt.a.container},a.a.createElement("div",{className:rt.a.iconAndTextWrapper},a.a.createElement("div",{className:rt.a.iconWrapper},a.a.createElement(f.Icon,{type:"alert",size:"xlg",backgroundColor:"#ed6d47",iconColor:"white"})),a.a.createElement(f.Text,{className:"margin-left-s"},O.message)),a.a.createElement(f.Button,{className:Object(f.classNames)("margin-top-l",rt.a.btn),onClick:_,type:"button"},"Ok, go to home")),g&&a.a.createElement("div",{className:rt.a.container},a.a.createElement("div",{className:rt.a.iconAndTextWrapper},a.a.createElement(f.Icon,{type:"checkmark",size:"xlg",backgroundColor:"#41bf53",iconColor:"white"}),a.a.createElement(f.Text,{className:"margin-left-s"},"You have verified and activated your new identity.")),a.a.createElement(f.Button,{className:Object(f.classNames)("margin-top-l",rt.a.btn),onClick:_,type:"button"},j))))})),it=[a.a.createElement(k,{path:"/user/login",title:"Login",key:"user-login-route",exact:!0,component:R}),a.a.createElement(k,{path:"/user/signup",title:"Sign Up",key:"sign-up-route",exact:!0,component:Qe}),a.a.createElement(k,{path:"/user/request-reset-password",title:"Reset Password",exact:!0,key:"request-reset-password-route",component:ue}),a.a.createElement(k,{path:"/user/password/reset",exact:!0,key:"reset-password-route",component:de}),a.a.createElement(T,{path:"/user/key/verify",exact:!0,key:"user-key-verify-route",component:ot}),a.a.createElement(k,{path:"/user/resend-verification-email",title:"Verification Email",exact:!0,key:"resend-verification-email-route",component:K}),a.a.createElement(k,{path:"/user/privacy-policy",title:"Privacy Policy",exact:!0,key:"privacy-policy-route",component:P}),a.a.createElement(k,{path:"/user/verify",exact:!0,key:"user-verify-route",component:Ze}),a.a.createElement(w,{path:"/user/search",title:"Search User",exact:!0,key:"search-user-route",component:Me})],ct=n(655),ut=n.n(ct),st=n(361),lt=n.n(st),ft=Object(h.a)((function(e){var t=e.history;return a.a.createElement(I.a,{noCardWrap:!0},a.a.createElement("div",{className:lt.a.contentWrapper},a.a.createElement(f.H1,null,"Page not found"),a.a.createElement("img",{alt:"Not Found",className:lt.a.notFoundImg,src:ut.a}),a.a.createElement(f.Button,{className:lt.a.returnHomeBtn,onClick:function(){return t.push("/")}},"Return home")))})),dt=n(12),mt=n.n(dt),pt=n(149),ht=n(219),bt=n(176),vt=n(362),Et=n.n(vt),yt=G.f().shape({search:G.h().min(64,Object($.j)("Ticket token",64)).required("Required")});var gt=function(e){var t=e.show,n=e.onClose,o=e.proposal,i=Object(r.useState)(null),c=Object(A.a)(i,2),u=c[0],s=c[1],l=function(e,t){var n=Object(d.c)(J.U),a=Object(d.c)(J.Zb),o=Object(d.b)(B.I),i=Object(r.useMemo)((function(){return J.zb(e)}),[e]),c=Object(d.c)(i);return Object(r.useEffect)((function(){t&&o(e)}),[e,t,o]),{votes:c?c.castvotes:[],loading:n,error:a}}(o.censorshiprecord.token,t),m=l.votes,p=l.loading,h=l.error;Object(r.useEffect)((function(){s(null)}),[t]);return a.a.createElement(f.Modal,{show:t,onClose:n,title:"Search votes - ".concat(o.name),className:Et.a.searchVotesModal},a.a.createElement(pe.c,{initialValues:{search:""},onSubmit:function(e,t){var n,r=t.resetForm,a=t.setSubmitting,o=t.setFieldError,i=function(e,t){return t.find((function(t){return t&&t.ticket===e}))}(e.search,m);if(s(null),!i)return o("global","Ticket not found"),void a(!1);r(),s({Ticket:(n=i).ticket,Option:"2"===n.votebit?"Yes":"No"})},validationSchema:yt},(function(e){var t=e.values,n=e.handleChange,r=e.handleBlur,o=e.handleSubmit,i=e.touched,c=e.errors,u=c&&c.global||h;return a.a.createElement("div",{className:Et.a.contentWrapper},u&&a.a.createElement(f.Message,{kind:"error"},u.toString()),p?a.a.createElement("div",{className:Et.a.loadingWrapper},a.a.createElement(f.Spinner,{invert:!0}),a.a.createElement("span",null,"Fetching proposal votes...")):a.a.createElement(f.BoxTextInput,{searchInput:!0,name:"search",onChange:n,onBlur:r,value:t.search,placeholder:"Search vote by Ticket Token",onSubmit:o,error:i.search&&c.search}))})),u&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Table,{data:[u],headers:["Ticket","Option"],disablePagination:!0})))},Ot=n(42),_t=n.n(Ot),jt=n(657),wt=n.n(jt),St=n(451),Tt=n.n(St),Ct=n(21),kt=function(e){var t=e.timestamp,n=e.placement,o=e.className,i=e.additionInfo,c=e.children,u=Object(r.useMemo)((function(){return function(e){return wt()(new Date,new Date(1e3*e),{addSuffix:!0})}(t)}),[t]),s=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement(f.Tooltip,{className:Object(f.classNames)(o,Tt.a.dateTooltip,s&&Tt.a.darkDateTooltip),content:a.a.createElement(a.a.Fragment,null,Object(Ct.e)(t),i&&a.a.createElement("p",null,i)),placement:n},c({timeAgo:u}))},It=n(180),xt=n.n(It),Rt=["content","fileName","label","customComponent","isAsync","beforeDownload"],Nt=function(e){var t=e.content,n=e.fileName,o=e.label,i=e.customComponent,c=e.isAsync,u=e.beforeDownload,s=Object(E.a)(e,Rt),l=Object(r.useState)(!1),d=Object(A.a)(l,2),m=d[0],p=d[1];function h(){var e=JSON.stringify(t,null,2);xt()(e,"".concat(n,".json"))}function b(){p(!0),u().then((function(e){p(!1);var t=JSON.stringify(e,null,2);xt()(t,"".concat(n,".json"))}))}return i?i({onDownload:h}):a.a.createElement(f.Link,Object.assign({},s,{customComponent:function(e){return c&&m?a.a.createElement(f.Spinner,{invert:!0}):a.a.createElement("span",Object.assign({style:{cursor:"pointer"}},e,{onClick:c?b:h}),o)}}))},Pt=n(55),Lt=n(14),At=n.n(Lt),Dt=n(658),Ut=n.n(Dt),Vt=function(e){var t=e.children,n=e.SeparatorComponent,r=e.className,o=a.a.Children.toArray(t).filter((function(e){return!!e}));return a.a.createElement("div",{className:Object(f.classNames)(Ut.a.join,r)},o.map((function(e,t){return a.a.createElement(a.a.Fragment,{key:"join-".concat(t)},a.a.cloneElement(e),o[t+1]?a.a.createElement(n,null):"")})))};Vt.propType={children:At.a.node,SeparatorComponent:At.a.node},Vt.defaultProps={SeparatorComponent:function(){return a.a.createElement("span",{className:"text-secondary-color margin-left-s margin-right-s"},"\u2022")}};var Mt=Vt,Ft=n(452),Bt=n.n(Ft),Gt=function(e){var t=e.children,n=e.value,o=e.tooltipText,i=e.className,c=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME,u=Object(r.useState)(!1),s=Object(A.a)(u,2),l=s[0],d=s[1];return a.a.createElement(f.Tooltip,{className:Object(f.classNames)(Bt.a.copyTooltip,c&&Bt.a.darkCopyTooltip,i),placement:"bottom",content:l?"Copied!":o},t({onCopyToClipboard:function(){!function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(n),d(!0),setTimeout((function(){d(!1)}),600)}}))},Wt=function(e){var t=e.url,n=e.className;return a.a.createElement(Gt,{value:t,tooltipText:"Copy link",className:n},(function(e){var t=e.onCopyToClipboard;return a.a.createElement(f.ButtonIcon,{type:"link",onClick:t})}))},Yt=n(439),Ht=n.n(Yt),Qt=n(175),qt=["children","url"],zt=function(e){var t=e.username,n=e.url;return a.a.createElement(Pe.a,{to:n},t)},Kt=function(e){var t=e.event,n=e.timestamp,r=e.className,o=e.size,i=e.additionInfo;return a.a.createElement(kt,{timestamp:n,placement:"bottom",additionInfo:i},(function(e){var i=e.timeAgo;return a.a.createElement(f.Text,{id:"event-".concat(t,"-").concat(n),className:Object(f.classNames)(_t.a.eventTooltip,r),truncate:!0,size:o},"".concat(t," ").concat(i))}))},Jt=function(e){var t=e.token,n=e.isCopyable,r=Object(f.useMediaQuery)("(max-width: 560px)");return a.a.createElement("div",{className:_t.a.recordToken},n&&a.a.createElement(f.CopyableText,{id:"proposal-token-".concat(t),"data-testid":"record-token",truncate:!0,tooltipPlacement:r?"left":"bottom"},t),!n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Icon,{type:"sign",className:"margin-right-xs"}),a.a.createElement(f.Text,{id:"proposal-token-".concat(t),truncate:!0},t)))},Xt=function(e){var t=e.children,n=e.url,r=Object(E.a)(e,qt),o=n?Pe.a:function(e){return a.a.createElement("div",e)};return a.a.createElement(o,{to:n,className:Object(f.classNames)(_t.a.baseTitle,n&&_t.a.underlineTitle)},a.a.createElement(f.H2,Object.assign({},r,{"data-testid":"record-title"}),t))},Zt=function(e){var t=e.children,n=e.separatorSymbol,r=void 0===n?"\u2022":n;return a.a.createElement(Mt,{className:Object(f.classNames)("margin-top-s",_t.a.subtitleWrapper),SeparatorComponent:function(){return a.a.createElement("span",{className:_t.a.subtitleSeparator},r)}},t)},$t=function(e){var t=e.children,n=e.className,r=e.separatorSymbol,o=void 0===r?"\u2022":r;return a.a.createElement(Mt,{className:Object(f.classNames)(n,_t.a.flexWrap),SeparatorComponent:function(){return a.a.createElement("span",{className:_t.a.subtitleSeparator},o)}},t)},en=function(e){var t=e.url,n=e.tabIndex,r=e.disabled;return a.a.createElement(Pe.a,{to:t||"",tabIndex:n,"data-testid":"record-edit-button",className:_t.a.editButton},a.a.createElement(f.ButtonIcon,{type:"edit",disabled:r}))},tn=function(e){var t=e.children,n=e.disableMobileView,r=e.className;return a.a.createElement("div",{className:Object(f.classNames)(_t.a.status,n&&_t.a.disableMobileView,r)},t)},nn=function(e){var t=e.title,n=e.status,r=e.edit,o=e.isRfp;return a.a.createElement("div",{className:_t.a.titleWrapper},a.a.createElement("div",{className:_t.a.titleEditWrapper},o&&a.a.createElement(rn,{className:_t.a.mobileRfpTag}),t),a.a.createElement("div",{className:_t.a.titleStatusWrapper},n,r))},rn=a.a.memo((function(e){var t=e.className;return a.a.createElement("img",{alt:"rfp",className:Object(f.classNames)("margin-right-s",_t.a.rfptag,t),src:Ht.a})})),an=a.a.memo((function(e){var t=e.title,n=e.subtitle,r=e.status,o=e.edit,i=e.mobile,c=e.disableMobileView,u=void 0!==c&&c,s=e.isRfp,l=e.isRfpSubmission,d=e.rfpProposalLink;return a.a.createElement("div",{className:_t.a.header,"data-testid":"record-header"},!i||u?a.a.createElement("div",{className:_t.a.titleWrapper},a.a.createElement("div",{className:Object(f.classNames)(_t.a.titleEditWrapper,s&&_t.a.rfpTitleWrapper)},s&&a.a.createElement(rn,null),t,o),a.a.createElement("div",{className:_t.a.titleStatusWrapper},r)):a.a.createElement(nn,{title:t,isRfp:s,status:r,edit:o}),l&&d,n)})),on=function(e){var t=e.token,n=e.legacytoken,r=Object(m.b)().apiInfo,o=Object(f.useTheme)().themeName,i=r.testnet?"testnet.decred.org":"dcrdata.decred.org",c=o===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement(f.Tooltip,{className:Object(f.classNames)(_t.a.actionsTooltip,c&&_t.a.darkActionsTooltip),placement:"bottom",content:"Voting Charts"},a.a.createElement(f.Link,{target:"_blank",rel:"nofollow noopener noreferrer",href:"https://".concat(i,"/proposal/").concat(n||t)},a.a.createElement(f.ButtonIcon,{type:"chart"})))},cn=function(e){var t=e.onClick,n=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement(f.Tooltip,{className:Object(f.classNames)(_t.a.actionsTooltip,n&&_t.a.darkActionsTooltip),placement:"bottom",content:"Search for proposals votes"},a.a.createElement(f.ButtonIcon,{type:"search",onClick:t}))},un=function(e){var t=e.to,n=e.active,r=void 0!==n&&n,o=e.onClick,i=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement(f.Tooltip,{className:Object(f.classNames)(_t.a.actionsTooltip,i&&_t.a.darkActionsTooltip),placement:"bottom",content:r?"See rendered markdown":"See raw markdown"},a.a.createElement(f.Link,{target:"_blank",rel:"nofollow noopener noreferrer",href:t,onClick:o},a.a.createElement(f.ButtonIcon,{type:"markdown",viewBox:"0 0 208 128"})))},sn=function(e){var t=e.numOfComments,n=e.url,r=e.showIcon,o=void 0===r||r,i=e.className,c=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement(Pe.a,{to:n,gray:!c,dark:c,className:Object(f.classNames)(_t.a.commentsLink,i)},o&&a.a.createElement(f.Icon,{type:"discuss",className:"margin-right-s"}),a.a.createElement("span",{className:Object(f.classNames)(_t.a.commentsNumber,c&&_t.a.darkCommentsNumber)},t),"Comments")},ln=function(e){var t=e.url,n=e.rfpTitle,r=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement("div",{className:_t.a.rfpLink},a.a.createElement("span",{className:Object(f.classNames)(!r&&_t.a.proposedFor,r&&_t.a.darkProposedFor)},"Proposed for"," "),a.a.createElement(Pe.a,{to:t},n))},fn=function(e){var t=e.content,n=e.fileName,r=e.label,o=e.serverpublickey,i={record:{state:t.state,status:t.status,version:t.version,timestamp:t.timestamp,username:t.username,metadata:t.metadata,files:t.files,censorshiprecord:t.censorshiprecord},serverpublickey:o};return a.a.createElement(Nt,{fileName:n,label:r,content:i})},dn=function(e){var t=e.token,n=e.version,r=e.label,o=Object(Qt.a)().onFetchRecordTimestamps;return a.a.createElement(Nt,{label:r,fileName:"".concat(t,"-v").concat(n,"-timestamps"),isAsync:!0,content:[],beforeDownload:function(){return o(t,n)}})},mn=function(e){var t=e.label,n=e.fileName,r=e.serverpublickey,o=e.token,i=Object(Qt.a)().onFetchVotesBundle;return a.a.createElement(Nt,{label:t,fileName:n,isAsync:!0,content:[],beforeDownload:function(){return i(o,r)}})},pn=function(e){var t=e.children,n=e.className,r=e.title;return a.a.createElement(f.Dropdown,{className:n,title:r,closeOnItemClick:!1,"data-testid":"record-links"},a.a.Children.toArray(t).map((function(e,t){return a.a.createElement(f.DropdownItem,{key:t},e)})))},hn=function(e){var t=e.label;return a.a.createElement("div",{className:_t.a.metadataLabel},t,":")},bn=function(e){var t=e.value;return a.a.createElement("div",{className:"margin-left-s"},t)},vn=function(e){var t=e.amount,n=e.domain,r=e.startDate,o=e.endDate,i=e.isRFP,c=Object(De.f)(r&&Object(Ct.f)(r)||{}),u=Object(De.f)(o&&Object(Ct.f)(o)||{});return(!!t||!!n||!!r||!!o)&&a.a.createElement("div",{className:"flex-column","data-testid":"record-metadata"},a.a.createElement(Pt.a,null,a.a.createElement(hn,{label:"Domain"}),a.a.createElement(bn,{value:n})),!i&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Pt.a,null,a.a.createElement(hn,{label:"Amount"}),a.a.createElement(bn,{value:t})),a.a.createElement(Pt.a,null,a.a.createElement(hn,{label:"Start Date"}),a.a.createElement(bn,{value:c})),a.a.createElement(Pt.a,null,a.a.createElement(hn,{label:"End Date"}),a.a.createElement(bn,{value:u}))))};Kt.defaultProps={show:!0},Jt.defaultProps={isCopyable:!1};var En=function(e){var t=e.children,n=e.className;return a.a.createElement(f.Card,{className:Object(f.classNames)("container margin-bottom-m",n)},t({Author:zt,Event:Kt,Row:Pt.a,Title:Xt,RfpProposalLink:ln,CommentsLink:sn,Link:Pe.a,ChartsLink:on,SearchVotes:cn,MarkdownLink:un,CopyLink:Wt,DownloadRecord:fn,DownloadTimestamps:dn,DownloadVotes:mn,LinkSection:pn,Header:an,Subtitle:Zt,Edit:en,Status:tn,RecordToken:Jt,Metadata:vn}))},yn=n(659),gn=n.n(yn),On=["onClick","className"],_n=a.a.forwardRef((function(e,t){var n=e.onClick,r=e.className,o=Object(E.a)(e,On);return a.a.createElement("button",{ref:t,onClick:n,className:Object(f.classNames)(gn.a.iconButton,r)},a.a.createElement(f.Icon,o))})),jn=n(5),wn=function(e){return e.results.map((function(e){return{label:e.id,amount:e.votes,color:"yes"===e.id?"#41BE53":"#ED6D47"}})).sort((function(e){return"yes"===e.label?-1:1}))},Sn=function(e,t,n){var r=!!e.linkto;if(t)switch(t.status){case jn.tb:return{type:"yellowTime",text:"Unvetted"};case jn.ub:case jn.lb:return{type:n?"blueNegative":"grayNegative",text:"Abandoned"};case jn.vb:case jn.ob:return{type:"orangeNegativeCircled",text:"Censored"};case jn.sb:return{type:n?"blueTime":"blackTime",text:r?"Waiting for runoff vote to start":"Waiting for author to authorize voting"};case jn.wb:return{type:"yellowTime",text:"Waiting for admin to start voting"};case jn.xb:return{type:"bluePending",text:"Voting"};case jn.rb:return{type:"orangeNegativeCircled",text:"Rejected"};case jn.mb:return{type:"bluePending",text:"Active"};case jn.pb:return{type:"grayNegative",text:"Closed"};case jn.qb:return{type:"greenCheck",text:"Completed"};case jn.nb:return{type:"greenCheck",text:"Approved"}}return{type:"grayNegative",text:"missing"}},Tn=n(17);function Cn(e){var t=Object(d.c)(J.L),n=e?e.bestblock:0,r=Object(Tn.n)(e,n,t.testnet);return{voteBlocksLeft:Object(Tn.m)(e,n),voteEndTimestamp:r}}function kn(e){var t=Object(r.useMemo)((function(){return J.Ab(e)}),[e]),n=Object(r.useMemo)((function(){return J.yb(e)}),[e]),a=Object(r.useMemo)((function(){return J.jb(e)}),[e]),o=Object(d.c)(a),i=Object(d.c)(t),c=Object(d.c)(n),u=Object(Tn.G)(i),s=Cn(i),l=s.voteEndTimestamp;return{voteSummary:i,proposalSummary:c,billingStatusChangeMetadata:o,voteBlocksLeft:s.voteBlocksLeft,voteActive:u,voteEndTimestamp:l}}function In(e,t,n,a){var o=Object(l.d)().javascriptEnabled,i=Object(Tn.i)(e,o),c=Object(r.useMemo)((function(){return Object(Tn.b)(e,o)}),[o,e]);return{proposalURL:i,authorURL:Object(r.useMemo)((function(){return Object(Tn.a)(t,o)}),[t,o]),commentsURL:c,rfpProposalURL:Object(r.useMemo)((function(){return n&&a&&Object(Tn.i)(a,o,jn.gb)}),[n,o,a])}}var xn=n(46),Rn=n.n(xn),Nn=n(151),Pn=n(104),Ln=n.n(Pn),An=function(e){var t=e.proposal,n=e.proposal,r=n.commentsCount,o=n.name,i=n.censorshiprecord,c=e.voteSummary,u=e.proposalSummary,l=Object(s.c)().history,d=Object(Tn.G)(c),m=!!c&&!!c.endblockheight,p=Object(Tn.q)(u),h=Object(Tn.A)(t),b=Object(Tn.I)(c),v=In(i&&i.token,t.userid,!!t.linkto,t.linkto,t.state),E=v.commentsURL,y=v.proposalURL,g=Cn(c).voteEndTimestamp,O=Object(f.useMediaQuery)("(max-width: 1024px)"),_=Object(f.useMediaQuery)("(max-width: 768px)"),j=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return t&&c&&a.a.createElement(Pt.a,{className:Ln.a.itemWrapper,justify:"space-between",align:_?"flex-start":"center",onClick:Object(Tn.p)(l,y),noMargin:!0},a.a.createElement("div",{className:Object(f.classNames)(Ln.a.itemTitle,"flex-column")},a.a.createElement(Pe.a,{dark:!0,to:y},o),a.a.createElement(sn,{showIcon:!1,numOfComments:r,url:E,className:Ln.a.commentsLink})),m&&a.a.createElement(Pt.a,{className:Ln.a.statusBarWrapper,justify:"center",align:"center",noMargin:!0},a.a.createElement(f.StatusBar,{max:Object(Tn.j)(c),status:wn(c),markerPosition:"".concat(c.passpercentage,"%"),markerTooltipText:"".concat(c.passpercentage,"% Yes votes required for approval"),markerTooltipClassName:Ln.a.statusBarTooltip})),(d||b)&&!O&&a.a.createElement(Pt.a,{className:Ln.a.timeLeftPassed,justify:"center",align:"center",noMargin:!0},a.a.createElement(Kt,{event:"vote end".concat(d?"s":"ed"),timestamp:g,className:Ln.a.voteEvent,size:"small"})),(h||p)&&a.a.createElement(Pt.a,{className:Ln.a.statusWrapper,justify:"center",align:"center",noMargin:!0},a.a.createElement(tn,{className:Ln.a.status},a.a.createElement(f.StatusTag,Object.assign({className:Ln.a.statusTag},Sn(t,u,j)))),a.a.createElement("div",{className:"margin-left-s"},a.a.createElement(f.Icon,{type:"clickArrow",viewBox:"0 0 5 10",width:5,height:10}))))},Dn=function(e){for(var t=e.numberOfItems,n=e.placeholder,r=[],o=0;o<t;o++)r.push(a.a.createElement(n,{key:"placeholder-".concat(o)}));return a.a.createElement(a.a.Fragment,null,r)},Un=n(80),Vn=function(){var e=Object(f.useTheme)().theme,t=Object(f.getThemeProperty)(e,"card-background"),n=Object(f.getThemeProperty)(e,"dimmed-card-background");return a.a.createElement(Un.a,{height:220,width:800,speed:2,primaryColor:t,secondaryColor:n},a.a.createElement("rect",{x:"0",y:"30",width:"800",height:"200"}))},Mn=function(e){var t=e.data,n=t.proposals,r=t.voteSummaries,o=t.proposalSummaries,i=n.length>0;return a.a.createElement("div",{className:"margin-top-l"},a.a.createElement(f.Text,{className:Object(f.classNames)(Ln.a.title,"margin-bottom-m"),color:"primaryDark",weight:"semibold"},"Submitted Proposals"),i?n.sort((function(e,t){return e.status-t.status})).map((function(e,t){var i,c;return a.a.createElement(An,{key:t,proposal:e,voteSummary:r[Object(De.C)(null===(i=n[t])||void 0===i?void 0:i.censorshiprecord.token)],proposalSummary:o[Object(De.C)(null===(c=n[t])||void 0===c?void 0:c.censorshiprecord.token)]})})):a.a.createElement(Dn,{numberOfItems:1,placeholder:Vn}))},Fn=function(e){var t=e.eligibleVotes,n=e.quorumVotes,r=e.quorumPercentage,o=e.votesReceived,i=n-o;return a.a.createElement("div",{className:Rn.a.voteCount},a.a.createElement("div",{className:Rn.a.quorumAndVotes},a.a.createElement("div",null,a.a.createElement(f.Text,{className:Object(f.classNames)(Rn.a.votesLeft,Rn.a.quorumReached),size:"small"},i>0?"".concat(i," votes until quorum"):a.a.createElement(f.Tooltip,{placement:"bottom",content:"quorum of ".concat(r,"% (").concat(n," votes) has been reached!")},"quorum reached!"))),a.a.createElement("div",null,a.a.createElement(f.Text,{className:Rn.a.votesReceived,size:"small"},o),a.a.createElement(f.Text,{className:Rn.a.votesQuorum,size:"small"},"/","".concat(t," votes")))))},Bn=n(335),Gn=n.n(Bn),Wn=n(336),Yn=n.n(Wn),Hn=n(22),Qn=n(48);Object(r.createContext)();function qn(e,t){var n,a=Object(r.useState)(null),o=Object(A.a)(a,2),i=o[0],c=o[1],s=Object(r.useState)([]),l=Object(A.a)(s,2),f=l[0],m=l[1],p=Object(r.useState)(0),h=Object(A.a)(p,2),b=h[0],v=h[1],E=Object(r.useMemo)((function(){return J.Cb(e)}),[e]),y=Object(d.c)(E),g=Object(r.useMemo)((function(){return Object.values(y).flat()}),[y]),O=(null===g||void 0===g?void 0:g.length)||0,_=O>t,j=Object(d.b)(B.v);Object(r.useEffect)((function(){var e=g&&g.map((function(e){return e.commentid}));m(e)}),[g]);var w=function(e){return[Gn()(t)(e),Yn()(e.length-t)(e)]},S=Object(r.useCallback)((function(e){return e?(100*Object.keys(e).length/O).toFixed(0):0}),[O]);Object(r.useEffect)((function(){v(S(null===i||void 0===i?void 0:i.comments))}),[S,i]);var T=Object(Hn.f)({actions:{initial:function(){var t=Object(Qn.g)(e);return t&&Object.keys(t.comments).length===O?I(L,{timestamps:t}):e&&!i?I(R):void 0},start:function(){var t=w(f||[]),n=Object(A.a)(t,2),r=n[0],a=n[1];return j(e,r).then((function(e){var t=e.comments;return c({comments:t}),m(a),I(N)})).catch((function(e){return I(D,e)})),I(P)},verify:function(){if(0===f.length)return Object(Qn.e)(e,i),v(100),xt()(function(e){return JSON.stringify({comments:e.comments},null,2)}(i),"".concat(e,"-comments-timestamps.json")),I(L,{timestamps:i});var t=w(f),n=Object(A.a)(t,2),r=n[0],a=n[1];return j(e,r).then((function(e){return c({comments:Object(u.a)(Object(u.a)({},i.comments),e.comments)}),m(a),I(N)})).catch((function(e){return I(D,e)})),I(P)}},initialValues:{status:"idle",loading:!1,timestamps:null,progress:0}}),C=Object(A.a)(T,3),k=C[0],I=C[1],x=C[2],R=x.START,N=x.VERIFY,P=x.FETCH,L=x.RESOLVE,D=x.REJECT;return{loading:k.loading||k.verifying,error:k.error,progress:b,timestamps:{comments:null===(n=k.timestamps)||void 0===n?void 0:n.comments},multiPage:_}}var zn=function(e){var t=e.recordToken,n=e.className,o=e.label,i=function(e){var t=Object(r.useMemo)((function(){return J.Cb(e)}),[e]),n=Object(d.c)(t);return{comments:n&&Object.values(n).flat(),onFetchCommentsTimestamps:Object(Qt.a)().onFetchCommentsTimestamps}}(t).comments,c=Object(m.b)().apiInfo;return i&&i.length?a.a.createElement(Nt,{label:o,fileName:"".concat(t,"-comments"),content:{comments:i.sort((function(e,t){return e.commentid-t.commentid})),serverpublickey:c.pubkey},className:n}):null};zn.defaultProps={isTimestamp:!1,state:0,label:"Download Comments Bundle"};var Kn=zn,Jn=function(e){var t=e.recordToken,n=qn(t,Object(Le.j)().policyComments.timestampspagesize),r=n.loading,o=n.progress,i=n.timestamps,c=n.multiPage;return r?a.a.createElement(a.a.Fragment,null,c&&a.a.createElement("span",{style:{marginRight:10}},o,"%"),a.a.createElement(f.Spinner,{invert:!0})):i?a.a.createElement(Nt,{label:"Comments Timestamps",fileName:"".concat(t,"-comments-timestamps"),content:i}):null},Xn=function(e){var t=e.label,n=e.recordToken,o=e.commentsCount,i=Object(r.useState)(!1),c=Object(A.a)(i,2),u=c[0],s=c[1],l=Object(Qn.g)(n),d=l&&Object.keys(l.comments).length===o;return u||d?a.a.createElement(Jn,{recordToken:n}):a.a.createElement(f.Link,{onClick:function(){return s(!0)}},t)};var Zn=function(e){var t=e.recordToken,n=function(e,t,n){var a=Object(r.useState)(null),o=Object(A.a)(a,2),i=o[0],c=o[1],s=Object(r.useState)(null),l=Object(A.a)(s,2),f=l[0],m=l[1],p=Object(r.useState)(null),h=Object(A.a)(p,2),b=h[0],v=h[1],E=Object(r.useState)(1),y=Object(A.a)(E,2),g=y[0],O=y[1],_=Object(r.useState)(0),j=Object(A.a)(_,2),w=j[0],S=j[1],T=t>n,C=Object(d.b)(B.O),k=Object(r.useCallback)((function(e){return e?(e*n/t).toFixed(0):0}),[t,n]);Object(r.useEffect)((function(){S(k(null===i||void 0===i?void 0:i.length))}),[k,i]);var I=Object(Hn.f)({actions:{initial:function(){var n,r,a=Object(Qn.i)(e),o=null===a||void 0===a||null===(n=a.votes)||void 0===n?void 0:n.reduce((function(e,t){return e&&t.proofs.length>0}),!0);return(null===a||void 0===a||null===(r=a.votes)||void 0===r?void 0:r.length)===t&&o?N(V,a):e&&!i?N(L):void 0},start:function(){return C(e).then((function(t){m(Object(Z.a)(t.auths)),v(Object(u.a)({},t.details)),C(e,g).then((function(e){return c(Object(Z.a)(e.votes)),O(g+1),N(D)})).catch((function(e){return N(M,e)}))})).catch((function(e){return N(M,e)})),N(U)},verify:function(){return(null===i||void 0===i?void 0:i.length)===t?(Object(Qn.f)(e,{auths:f,details:b,votes:i}),xt()(JSON.stringify({auths:f,details:b,votes:i},null,2),"".concat(e,"-votes-timestamps.json")),N(V,{auths:f,details:b,votes:i})):(C(e,g).then((function(e){return c([].concat(Object(Z.a)(i),Object(Z.a)(e.votes))),O(g+1),N(D)})).catch((function(e){N(M,e)})),N(U))}},initialValues:{status:"idle",loading:!1,auths:null,details:null,votes:null,progress:0}}),x=Object(A.a)(I,3),R=x[0],N=x[1],P=x[2],L=P.START,D=P.VERIFY,U=P.FETCH,V=P.RESOLVE,M=P.REJECT;return{loading:R.loading||R.verifying,error:R.error,progress:w,timestamps:{auths:R.auths,details:R.details,votes:R.votes},multiPage:T}}(t,e.votesCount,Object(Le.j)().policyTicketVote.timestampspagesize),o=n.timestamps,i=n.progress,c=n.loading,s=n.error,l=n.multiPage;return c?a.a.createElement(a.a.Fragment,null,l&&a.a.createElement("span",{style:{marginRight:10}},i,"%"),a.a.createElement(f.Spinner,{invert:!0})):o?a.a.createElement(Nt,{label:"Votes Timestamps",fileName:"".concat(t,"-votes-timestamps"),content:o}):s?a.a.createElement("div",null,"error: ",s):null},$n=function(e){var t,n,o=e.label,i=e.recordToken,c=e.votesCount,u=Object(r.useState)(!1),s=Object(A.a)(u,2),l=s[0],d=s[1],m=Object(Qn.i)(i),p=null===m||void 0===m||null===(t=m.votes)||void 0===t?void 0:t.reduce((function(e,t){return e&&t.proofs.length>0}),!0),h=(null===m||void 0===m||null===(n=m.votes)||void 0===n?void 0:n.length)===c&&p;return l||h?a.a.createElement(Zn,{recordToken:i,votesCount:c}):a.a.createElement(f.Link,{onClick:function(){return d(!0)}},o)},er=function(e){var t=e.type,n=e.version,r=e.duration,a=e.quorumpercentage,o=e.passpercentage;return{token:e.token,version:+n,type:t,mask:3,duration:r,quorumpercentage:a,passpercentage:o,options:[{id:"no",description:"Don't approve proposal",bit:1},{id:"yes",description:"Approve proposal",bit:2}],parent:e.parent}};function tr(){tr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var nr=Object(r.createContext)(),rr=Object(r.createContext)(),ar=function(){return Object(r.useContext)(nr)},or=function(){return Object(r.useContext)(rr)};function ir(){ir=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var cr=function(e){var t=e.show,n=e.onClose,o=e.onSubmit,i=e.subject,c=e.title,u=e.reasonLabel,s=e.successMessage,l=e.successTitle,d=e.onCloseSuccess,m=Object(Le.h)(),p=Object(A.a)(m,2)[1],h=Object(Le.d)(),b=Object(r.useState)(!1),v=Object(A.a)(b,2),E=v[0],y=v[1],g=function(){var e=Object(L.a)(ir().mark((function e(t,n){var r,a,i;return ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,a=n.setFieldError,i=n.setSubmitting,e.prev=1,e.next=4,o(t.reason);case 4:r(),y(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),i(!1),a("global",e.t0),Object(Ct.g)(e.t0)&&(h(e.t0),p());case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){t||setTimeout((function(){return y(!1)}),500)}),[t]);var O=Object(f.useTheme)().theme,_=Object(f.getThemeProperty)(O,"success-icon-background-color"),j=Object(f.getThemeProperty)(O,"success-icon-checkmark-color");return a.a.createElement(f.Modal,{style:{width:"600px"},title:E&&l||c,show:t,onClose:E&&d?d:n,iconComponent:E?a.a.createElement(f.Icon,{type:"checkmark",size:26,iconColor:j,backgroundColor:_}):a.a.createElement(f.Icon,{type:"info",size:26})},!E&&a.a.createElement(f.P,{style:{marginBottom:"20px"}},"Please, provide a reason for this action."),!E&&a.a.createElement(F.a,{initialValues:{reason:""},validationSchema:G.f().shape({reason:G.h().required("Required")}),onSubmit:g},(function(e){var t=e.Form,n=e.Actions,r=e.ErrorMessage,o=e.values,c=e.handleChange,s=e.handleBlur,l=e.handleSubmit,d=e.errors,m=e.touched,p=e.isSubmitting;return a.a.createElement(t,{onSubmit:l},d&&d.global&&a.a.createElement(r,null,d.global.toString()),a.a.createElement(f.TextInput,{"data-testid":"reason",label:u,name:"reason",id:"reason-for-".concat(i),type:"text",value:o.reason,onChange:c,onBlur:s,error:m.reason&&d.reason}),a.a.createElement(n,{className:"no-padding-bottom"},a.a.createElement(f.Button,{"data-testid":"reason-confirm",loading:p,type:"submit"},"Confirm")))})),E&&a.a.createElement(a.a.Fragment,null,s,a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{"data-testid":"reason-confirm-success",onClick:d||n},"Ok"))))};cr.defaultProps={title:"Confirm Action",reasonLabel:"Reason"};var ur=a.a.memo(cr),sr=n(57),lr=Object(h.a)((function(e){var t=e.children,n=e.history,o=function(){var e=Object(d.b)(B.Hb);return{onCensorProposal:Object(r.useCallback)((function(t){var n=t.censorshiprecord.token,r=t.version,a=t.state,o=t.status;return function(t){return e({token:n,status:jn.ib,oldStatus:o,reason:t,version:r,state:a})}}),[e]),onApproveProposal:Object(r.useCallback)((function(t){var n=t.censorshiprecord.token,r=t.version,a=t.linkto,o=t.state,i=t.status;return function(){return e({token:n,status:jn.jb,oldStatus:i,linkto:a,version:r,state:o})}}),[e])}}(),i=o.onCensorProposal,c=o.onApproveProposal,u=Object(Be.a)(),s=Object(A.a)(u,2),l=s[0],m=s[1];return a.a.createElement(rr.Provider,{value:{onCensor:function(e){l(ur,{title:"Censor proposal - ".concat(e.name),reasonLabel:"Censor reason",subject:"censorProposal",onSubmit:i(e),successTitle:"Proposal censored",successMessage:a.a.createElement(f.Text,null,"The proposal has been successfully censored! Now it will appear under under ",a.a.createElement(Pe.a,{to:"/admin/records?tab=censored"},"Censored")," tab among Admin Proposals."),onClose:m,onCloseSuccess:function(){m(),n.push("/record/".concat(Object(De.C)(e.censorshiprecord.token)))}})},onApprove:function(e){l(sr.a,{title:"Approve proposal - ".concat(e.name),message:"Are you sure you want to approve this proposal?",onSubmit:c(e),successTitle:"Proposal approved",successMessage:a.a.createElement(f.Text,null,"The proposal has been successfully approved! Now it will appear in"," ",a.a.createElement(Pe.a,{to:"/?tab=under%20review"},"Under review")," tab among Public Proposals."),onClose:m,onCloseSuccess:function(){m(),n.push("/record/".concat(Object(De.C)(e.censorshiprecord.token)))}})}}},t)})),fr=function(e){return e?0:20},dr=function(e){return e?0:60},mr=function(e){return G.f().shape({quorumPercentage:G.e().required("required").min(fr(e),Object($.i)("quorum percentage",fr(e))).max(100,Object($.e)("quorum percentage",100)),passPercentage:G.e().required("required").min(dr(e),Object($.i)("pass percentage",dr(e))).max(100,Object($.e)("pass percentage",100))})};function pr(){pr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var hr=function(e,t){return[e,(n=e,r=t,Math.round((n+r)/2)),t];var n,r},br=function(e,t,n){var r=e?2:5;return hr(t,n).map((function(e){var t=Math.round(e*r/60/24);return{value:e,label:"".concat(0===t?"less than a day":"".concat(t," days")," (").concat(e," blocks)")}}))},vr=function(e){var t=e.show,n=e.onClose,o=e.onSubmit,i=e.title,c=e.successMessage,u=e.successTitle,s=e.proposal,l=e.voteType,d=Object(Le.h)(),p=Object(A.a)(d,2)[1],h=Object(Le.d)(),b=Object(r.useState)(!1),v=Object(A.a)(b,2),E=v[0],y=v[1],g=Object(m.c)().apiInfo,O=Object(f.useTheme)().theme,_=Object(Le.j)().policyTicketVote,j=_.linkbyperiodmin,w=_.votedurationmin,S=_.votedurationmax,T=Object(f.getThemeProperty)(O,"success-icon-background-color"),C=Object(f.getThemeProperty)(O,"success-icon-checkmark-color"),k=function(){var e=Object(L.a)(pr().mark((function e(t,n){var r,a,i,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.resetForm,a=n.setFieldError,i=n.setSubmitting,e.prev=1,c=s.linkby,!!!c||l!==jn.Yb||Object(Tn.D)(c,j)){e.next=7;break}throw Error("RFP deadline should meet the minimum period to start voting which is about ".concat(j/86400," days from when the vote starts"));case 7:return e.next=9,o(t);case 9:r(),y(!0),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),i(!1),a("global",e.t0),Object(Ct.g)(e.t0)&&(h(e.t0),p());case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){t||setTimeout((function(){return y(!1)}),500)}),[t]);var I={duration:hr(w,S)[0],quorumPercentage:20,passPercentage:60},x=mr(g.tesnet).isValidSync(I);return a.a.createElement(f.Modal,{style:{width:"600px"},title:E&&u||i,show:t,onClose:n,iconComponent:E?a.a.createElement(f.Icon,{type:"checkmark",iconColor:C,backgroundColor:T,size:26}):a.a.createElement(f.Icon,{type:"info",size:26})},E?a.a.createElement(a.a.Fragment,null,c,a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:n},"Ok"))):a.a.createElement(F.a,{initialValues:I,validationSchema:mr(g.testnet),isInitialValid:x,onSubmit:k},(function(e){var t=e.Form,n=e.Actions,r=e.ErrorMessage,o=e.values,i=e.isValid,c=e.handleChange,u=e.handleBlur,s=e.handleSubmit,l=e.setFieldValue,d=e.errors,m=e.isSubmitting,p=e.touched;return a.a.createElement(t,{onSubmit:s},d&&d.global&&a.a.createElement(r,null,d.global.toString()),a.a.createElement(f.TextInput,{label:"Quorum Percentage",id:"quorumPercentage",type:"number",value:o.quorumPercentage,onChange:c,onBlur:u,error:p.quorumPercentage&&d.quorumPercentage}),a.a.createElement(f.TextInput,{label:"Pass Percentage",id:"passPercentage",type:"number",value:o.passPercentage,onChange:c,onBlur:u,error:p.passPercentage&&d.passPercentage}),a.a.createElement(f.RadioButtonGroup,{label:"Duration",name:"duration",vertical:!0,options:br(g.testnet,w,S),value:o.duration,onChange:function(e){return l("duration",e.value)}}),a.a.createElement(n,{className:"no-padding-bottom"},a.a.createElement(f.Button,{loading:m,kind:i?"primary":"disabled",type:"submit"},"Start Vote")))})))};vr.defaultProps={title:"Start Proposal Vote"};var Er,yr=vr,gr=G.f().shape({billingStatus:G.e().required("Required"),reason:G.h().when("billingStatus",(function(e,t){return e===jn.Y?t.required("required"):t}))}),Or=(Er={},Object(c.a)(Er,jn.X,"Active"),Object(c.a)(Er,jn.Z,"Completed"),Object(c.a)(Er,jn.Y,"Closed"),Er),_r=n(268),jr=n.n(_r);function wr(){wr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Sr=function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"margin-y-m"},a.a.createElement("span",{className:jr.a.status},"Active")," - the proposal is actively being billed against."),a.a.createElement("div",{className:"margin-y-m"},a.a.createElement("span",{className:jr.a.status},"Completed")," - the deliverables have been completed and the proposal is no longer being billed against or the budget has been exausted and the proposal owner must request additional funds."),a.a.createElement("div",{className:"margin-y-m"},a.a.createElement("span",{className:jr.a.status},"Closed")," - the proposal owner failed to deliver a finished work product and the ability to bill against the proposal is being closed."))},Tr=function(e){var t=e.onClose,n=e.onSubmit,o=e.title,i=e.show,c=e.successMessage,u=e.successTitle,s=Object(r.useState)(!1),l=Object(A.a)(s,2),d=l[0],m=l[1],p=Object(Le.h)(),h=Object(A.a)(p,2)[1],b=Object(Le.d)(),v=Object(r.useMemo)((function(){return[jn.X,jn.Z,jn.Y].map((function(e){return{label:Or[e],value:e}}))}),[]),E=function(){var e=Object(L.a)(wr().mark((function e(t,r){var a,o,i;return wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.resetForm,o=r.setFieldError,i=r.setSubmitting,e.prev=1,e.next=4,n(t);case 4:a(),m(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),i(!1),o("global",e.t0),Object(Ct.g)(e.t0)&&(b(e.t0),h());case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),y=Object(f.useTheme)().theme,g=Object(f.getThemeProperty)(y,"success-icon-background-color"),O=Object(f.getThemeProperty)(y,"success-icon-checkmark-color");return a.a.createElement(f.Modal,{style:{width:"600px"},title:d?u:o,show:i,onClose:t,iconComponent:d?a.a.createElement(f.Icon,{type:"checkmark",iconColor:O,backgroundColor:g,size:26}):a.a.createElement(f.Icon,{type:"info",size:26})},d?a.a.createElement(a.a.Fragment,null,c,a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:t},"Ok"))):a.a.createElement(F.a,{initialValues:{billingStatus:null,reason:""},validationSchema:gr,onSubmit:E},(function(e){var t,n=e.Form,r=e.Actions,o=e.ErrorMessage,i=e.values,c=e.isValid,u=e.handleChange,s=e.handleBlur,l=e.handleSubmit,d=e.setFieldValue,m=e.setFieldTouched,p=e.errors,h=e.isSubmitting,b=e.touched,E=i.billingStatus===jn.Y;return a.a.createElement(n,{onSubmit:l},p&&p.global&&a.a.createElement(o,null,p.global.toString()),a.a.createElement(ke.a,{name:"billingStatus",placeholder:"Billing Status",className:jr.a.statusSelectWrapper,onChange:(t="billingStatus",function(e){m(t,!0),d(t,e.value)}),options:v,id:"select-billing-status"}),E&&a.a.createElement(f.TextInput,{name:"reason",id:"billing-status-reason",label:"Reason",type:"text",value:i.reason,onChange:u,onBlur:s,error:b.reason&&p.reason}),a.a.createElement(Sr,null),a.a.createElement(r,{className:"no-padding-bottom"},a.a.createElement(f.Button,{"data-testid":"set-billing-status",loading:h,kind:c?"primary":"disabled",type:"submit"},"Set Billing Status")))})))};Tr.defaultProps={title:"Set Billing Status"};var Cr=Tr,kr=n(73),Ir=n.n(kr);function xr(){xr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Rr=Object(h.a)((function(e){var t=e.children,n=e.history,o=function(){var e=Object(d.b)(B.Hb),t=Object(d.b)(B.Jb),n=Object(d.b)(B.e),a=Object(d.b)(B.rb),o=Object(d.b)(B.Db),i=Object(d.b)(B.L),c=Object(d.c)(J.s);return{onCensorProposal:Object(r.useCallback)((function(t){var n=t.censorshiprecord.token,r=t.version,a=t.state,o=t.status;return function(t){return e({token:n,status:jn.ib,oldStatus:o,reason:t,version:r,state:a})}}),[e]),onAbandonProposal:Object(r.useCallback)((function(t){var n=t.censorshiprecord.token,r=t.version,a=t.state,o=t.status;return function(t){return e({token:n,status:jn.hb,oldStatus:o,reason:t,version:r,state:a})}}),[e]),onAuthorizeVote:Object(r.useCallback)((function(e){return function(){return n(c,e.censorshiprecord.token,e.version)}}),[n,c]),onRevokeVote:Object(r.useCallback)((function(e){return function(){return a(c,e.censorshiprecord.token,e.version)}}),[a,c]),onStartVote:Object(r.useCallback)((function(e,n,r){return function(){var a=Object(L.a)(tr().mark((function a(o){var i,u,s;return tr().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=o.duration,u=o.quorumPercentage,s=o.passPercentage,a.next=3,t(c,e.map((function(e){var t=e.token,r=e.version,a=e.parent;return er({type:n,version:r,duration:i,quorumpercentage:u,passpercentage:s,token:t,parent:a})})));case 3:r&&r();case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}),[t,c]),onSetBillingStatus:Object(r.useCallback)((function(e){return function(t){var n=t.billingStatus,r=t.reason;return o(e.censorshiprecord.token,n,r)}}),[o]),onFetchProposalsBatchWithoutState:i}}(),i=o.onCensorProposal,c=o.onAbandonProposal,u=o.onAuthorizeVote,s=o.onRevokeVote,l=o.onStartVote,m=o.onSetBillingStatus,p=o.onFetchProposalsBatchWithoutState,h=Object(Be.a)(),b=Object(A.a)(h,2),v=b[0],E=b[1],y=Object(r.useCallback)((function(e){v(ur,{title:"Abandon - ".concat(e.name),reasonLabel:"Abandon reason",subject:"abandonProposal",onSubmit:c(e),successTitle:"Proposal abandoned",successMessage:a.a.createElement(f.Text,null,"The proposal has been successfully abandoned! Now it will appear under the ",a.a.createElement(Pe.a,{to:"/?tab=abandoned"},"Abandoned")," tab."),onClose:E,onCloseSuccess:function(){E(),n.push("/record/".concat(Object(De.C)(e.censorshiprecord.token)))}})}),[E,v,c,n]),g=Object(r.useCallback)((function(e){v(sr.a,{title:"Authorize vote - ".concat(e.name),message:"Are you sure you want to authorize the vote start?",onSubmit:u(e),successTitle:"Proposal vote authorized",successMessage:a.a.createElement(f.Text,null,"The proposal vote has been successfully authorized! Wait for an admin to start the vote for this proposal."),onClose:E})}),[v,E,u]),O=Object(r.useCallback)((function(e){v(sr.a,{title:"Revoke vote - ".concat(e.name),message:"Are you sure you want to revoke the vote start?",onSubmit:s(e),successTitle:"Proposal vote revoked",successMessage:a.a.createElement(f.Text,null,"The proposal vote has been successfully revoked! Now the admins cannot start the vote for this proposal until you authorize it again."),onClose:E})}),[E,v,s]),_=Object(r.useCallback)((function(e){return v(Cr,{title:"Set Billing Status - ".concat(e.name),onSubmit:m(e),successTitle:"Billing Status Set",successMessage:a.a.createElement(f.Text,null,"The proposal billing status has been successfully set!"),onClose:E,proposal:e})}),[E,v,m]),j=Object(r.useCallback)((function(e){var t=Object(Tn.h)(e),n=e&&e.version;v(yr,{title:"Start vote - ".concat(e.name),voteType:jn.Yb,onSubmit:l([{token:t,version:n}],jn.Yb),successTitle:"Proposal vote started",successMessage:a.a.createElement(f.Text,null,"The proposal vote has been successfully started!"),onClose:E,proposal:e})}),[v,E,l]),w=Object(r.useCallback)(function(){var e=Object(L.a)(xr().mark((function e(t,n){var r,o,i,c,u,s;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.linkedfrom)&&r.length){e.next=3;break}throw Error("No RFP submissions available");case 3:return e.next=5,p(r,jn.gb);case 5:o=e.sent,i=Object(A.a)(o,3),c=i[0],u=i[2],s=Ir()(c).flatMap((function(e){return Object(Tn.q)(u[e.censorshiprecord.token])?[]:[{token:Object(Tn.h)(e),version:e.version,parent:Object(Tn.h)(t)}]})),v(yr,{title:"Start runoff vote - ".concat(t.name),voteType:jn.Xb,onSubmit:l(s,jn.Xb,n),successTitle:"Proposal runoff vote started",message:"Are you sure you want to start runoff vote?",successMessage:a.a.createElement(f.Text,null,"RFP runoff vote has been successfully started! Now RFP's submissions will appear under the ",a.a.createElement(Pe.a,{to:"/?tab=voting"},"Voting")," tab."),onClose:E,proposal:t});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[l,E,v,p]);return a.a.createElement(nr.Provider,{value:{onAbandon:y,onAuthorizeVote:g,onRevokeVote:O,onStartVote:j,onCensor:function(e){v(ur,{title:"Censor proposal - ".concat(e.name),reasonLabel:"Censor reason",subject:"censorProposal",onSubmit:i(e),successTitle:"Proposal censored",successMessage:a.a.createElement(f.Text,null,"The proposal has been successfully censored! Now it will appear under under ",a.a.createElement(Pe.a,{to:"/admin/records?tab=censored"},"Censored")," tab among Admin Proposals."),onClose:E})},onStartRunoffVote:w,onSetBillingStatus:_}},t)})),Nr=function(e){var t=e.children,n=e.fallback,r=Object(m.c)(),a=r.initDone,o=r.currentUser;return a&&o&&o.isadmin?t:n};Nr.propTypes={children:At.a.node,fallback:At.a.node},Nr.defaultProps={fallback:null};var Pr=Nr,Lr=n(453),Ar=n.n(Lr),Dr=["proposal"],Ur=function(e){var t=e.proposal;if(!or())throw Error("UnvettedActions requires an UnvettedActionsProvider on a higher level of the component tree. ");var n=or(),r=n.onCensor,o=n.onApprove,i=function(e){return function(){e(t)}};return Object(Tn.F)(t)&&a.a.createElement(Pr,null,a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:i(r),className:Object(f.classNames)("margin-right-s",Ar.a.reportButton),noBorder:!0,kind:"secondary"},"Report as spam"),a.a.createElement(f.Button,{onClick:i(o)},"Approve")))},Vr=function(e){var t=e.proposal,n=e.voteSummary,r=e.billingStatusChangeMetadata,o=e.rfpSubmissionsVoteSummaries,i=e.resetRfpSubmissionsData;if(!ar())throw Error("PublicActions requires an PublicActionsProvider on a higher level of the component tree. ");var c=Object(m.c)().currentUser,u=Object(Le.j)().policyPi.billingstatuschangesmax,s=ar(),l=s.onAuthorizeVote,d=s.onRevokeVote,p=s.onAbandon,h=s.onStartVote,b=s.onStartRunoffVote,v=s.onCensor,E=s.onSetBillingStatus,y=c&&t&&c.username===t.username,g=!!t.linkto,O=!!t.linkby,_=!Object(Tn.J)(n),j=Object(Tn.C)(t,n,o),w=Object(Tn.E)(t,n),S=Object(Tn.u)(t,n),T=(r||{}).numbillingstatuschanges,C=!O&&S&&(null===c||void 0===c?void 0:c.isadmin)&&T<u,k=function(e,n){return function(){e(t,n)}};return a.a.createElement(a.a.Fragment,null,w&&a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(Pr,null,a.a.createElement(f.Button,{onClick:k(v),className:Object(f.classNames)("margin-right-s",Ar.a.reportButton),noBorder:!0,kind:"secondary"},"Report as spam")),y&&!g&&(_?a.a.createElement(f.Button,{onClick:k(d)},"Revoke voting authorization"):a.a.createElement(f.Button,{onClick:k(l)},"Authorize voting")),a.a.createElement(Pr,null,_?a.a.createElement(f.Button,{onClick:k(h)},"Start Vote"):a.a.createElement(f.Button,{onClick:k(p)},"Abandon"))),C&&a.a.createElement(Pr,null,a.a.createElement("div",{className:"justify-right margin-top-m","data-testid":"proposal-set-billing-button"},a.a.createElement(f.Button,{onClick:k(E)},"Set Billing Status"))),j&&a.a.createElement(Pr,null,a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:k(b,i)},"Start Runoff Vote"))))},Mr=function(e){var t=e.proposal,n=Object(E.a)(e,Dr);return t.state===jn.fb?a.a.createElement(Ur,{proposal:t}):a.a.createElement(Vr,Object(u.a)(Object(u.a)({},n),{},{proposal:t}))},Fr=n(134),Br=n(13),Gr=n(454),Wr=n(121),Yr=n.n(Wr),Hr=function(e){return{value:e.value,lineIndex:e.index,removed:!1,added:!0}},Qr=function(e){return{lineIndex:e.index,removed:e.value,added:!1}},qr=function(e){return{value:e.value,lineIndex:e.index,removed:!1,added:!1}},zr=function(e){return function(t){return!e.some((function(e){return e.value===t.value}))}},Kr=function(e){return function(t){return!zr(e)(t)}},Jr=function(e){return e&&e.length?e.split("\n\n").map((function(e,t){return{value:e,index:t}})):[]},Xr=function(e){return Object(u.a)(Object(u.a)({},e),{},{added:!0})},Zr=function(e){return Object(u.a)(Object(u.a)({},e),{},{removed:!0})},$r=function(e){return function(t){return!e.some((function(e){return e.name===t.name&&e.payload===t.payload}))}},ea=function(e,t){return[].concat(Object(Z.a)(e.filter($r(t)).map(Xr)),Object(Z.a)(t.filter($r(e)).map(Zr)),Object(Z.a)(e.filter((n=t,function(e){return!$r(n)(e)}))));var n},ta=function(e){return function(t){return!e.some(Yr()(t))}},na=function(e){return function(t){return!ta(e)(t)}},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((function(e,n){return Object(u.a)(Object(u.a)(Object(u.a)({},t),e),{},{index:n})}))},aa=n(66),oa=n.n(aa),ia=function(e){var t=e.added,n=void 0!==t&&t,r=e.removed,o=void 0!==r&&r,i=e.content,c=void 0===i?"":i,u=c&&c.length>0?c.join(""):c;return a.a.createElement("tr",{className:Object(f.classNames)(n&&oa.a.lineAdded,o&&oa.a.lineRemoved)},a.a.createElement("td",{className:oa.a.lineContent},a.a.createElement(bt.a,{body:u})))},ca=n(351),ua=n(660),sa=n.n(ua),la=n(661),fa=n.n(la),da=n(438),ma=n.n(da),pa=n(256),ha=n.n(pa),ba=(n(1195),n(71)),va=n.n(ba),Ea=n(662),ya=n.n(Ea),ga=function(e){var t=e.cell,n=t.error,o=t.readOnly,i=e.onDoubleClick,c=e.onMouseOver,u=e.onMouseDown,s=e.onContextMenu,l=e.editing,d=e.className,m=e.children,p=Object(r.useCallback)((function(e){c(e)}),[c]),h=Object(r.useCallback)((function(e){l||u(e)}),[u,l]);return a.a.createElement("td",{className:Object(f.classNames)(d,!o&&n&&ya.a.erroredCell),onMouseDown:h,onMouseOver:p,onDoubleClick:i,onContextMenu:s},m)},Oa=n(455),_a=n.n(Oa),ja=function(e){var t=e.onClick,n=e.disabled,r=e.children;return a.a.createElement(f.Link,{customComponent:function(e){return a.a.createElement("span",Object.assign({},e,{className:Object(f.classNames)(e.className,_a.a.tableButton,n&&_a.a.tableButtonDisabled),onClick:n?function(){return null}:t}),r)}})},wa=n(210),Sa=n(90),Ta=["headers"],Ca=function(){},ka=function(e){var t=e.headers,n=Object(E.a)(e,Ta);return a.a.createElement("table",{className:Object(f.classNames)(n.className,va.a.table)},a.a.createElement("thead",null,a.a.createElement("tr",{className:va.a.tableHead},t.map((function(e,t){return a.a.createElement("th",{key:"header-".concat(t),className:va.a.tableHeadCell,style:{minWidth:e.width,width:e.width}},e.value)})))),a.a.createElement("tbody",null,n.children))},Ia=function(e){var t=e.children,n=e.className;return a.a.createElement("tr",{className:Object(f.classNames)(va.a.tableRow,n)},t)},xa=a.a.memo((function(e){var t=e.value,n=e.onChange,o=e.readOnly,i=e.userRate,c=e.errors,u=e.proposals,s=e.proposalsError,l=e.isMobile,d=Object(X.a)().policy,m=Object(wa.a)(),p=m.subContractors,h=m.error,b=Object(r.useState)([]),v=Object(A.a)(b,2),E=v[0],y=v[1],g=Object(r.useState)(i||0),O=Object(A.a)(g,2),_=O[0],j=O[1],w=Object(r.useCallback)((function(e){var t=Object(Sa.g)(E,e,i).grid,r=Object(Sa.b)(t);n&&n(r)}),[i,n,E]);Object(r.useEffect)((function(){i&&i!==_&&(j(i),w([{col:Sa.a}]))}),[i,w,_,j]);var S=Object(r.useCallback)((function(e){e&&e.preventDefault();var r=t.concat([Object(Sa.e)(d)]);n(r)}),[n,t,d]);Object(r.useEffect)((function(){var e=Object(Sa.c)(t,o,c,_,d,u,p,s,h);y(e)}),[t,o,c,_,d,p,s,h,u]);var T=function(e,t){window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",t):e.clipboardData.setData("text/plain",t)},C=Object(r.useCallback)((function(e){e.preventDefault(),E.length>2&&n(fa()(t,1))}),[n,t,E.length]),k=Object(r.useMemo)((function(){return Object(Sa.d)(l)}),[l]),I=Object(r.useCallback)((function(e,t){return t.readOnly?e.preventDefault():null}),[]),x=Object(r.useCallback)((function(e){return e.value}),[]),R=Object(r.useCallback)((function(e){return a.a.createElement(ka,Object.assign({},e,{headers:k}))}),[k]),N=Object(r.useCallback)((function(e){return a.a.createElement(Ia,null,e.children)}),[]),P=E&&E.length<=2;return a.a.createElement("div",{className:va.a.wrapper},s&&a.a.createElement("div",{className:"margin-bottom-s margin-top-s"},a.a.createElement(f.H2,{className:va.a.invoiceError},s.toString()),a.a.createElement(f.P,{className:va.a.invoiceError},"Unable to fetch proposals")),function(){var e=ma()([ha.a,function(){return c&&c.flatMap((function(e){return Object.values(e)}))}])();return e&&e.length?a.a.createElement("div",null,a.a.createElement(f.H2,{className:va.a.invoiceError},"Errors"),e.map((function(e,t){return a.a.createElement(f.P,{key:t,className:va.a.invoiceError},e.charAt(0).toUpperCase()+e.slice(1))}))):null}(),!o&&a.a.createElement("div",{className:"justify-right margin-top-s margin-bottom-s"},a.a.createElement(ja,{onClick:S},"Add item"),a.a.createElement(ja,{disabled:P,onClick:C},"Remove item")),a.a.createElement("div",{className:va.a.datasheetWrapper},a.a.createElement(sa.a,{data:E,handleCopy:function(e){var t=e.range,n=e.start,r=e.end,a=e.event,o=e.data,i=e.dataRenderer,c=e.valueRenderer,u=document.getSelection().toString();if(n.i===r.i&&n.j===r.j&&u)T(a,u);else{var s=t(n.i,r.i).map((function(e){return t(n.j,r.j).map((function(t){var n=o[e][t],r=i?i(n,e,t):null;return""===r||null===r||"undefined"===typeof r?c(n,e,t):r})).join("\t")})).join("\n");T(a,s)}},parsePaste:function(e){for(var r=0,a=e.split(/\r\n|\n|\r/).map((function(e){return r++,e.split("\t")})),o=t,i=t.length;i<r;i++)o=o.concat([Object(Sa.e)(d)]);return n(o),a},valueRenderer:x,onContextMenu:I,onCellsChanged:o?Ca:w,sheetRenderer:R,rowRenderer:N,cellRenderer:ga})))}));xa.defaultProps={readOnly:!1};var Ra=["type","index","domain","subdomain","description","proposalname","subuserid","subrate","labor","expenses","rate"],Na=function(e){var t=e.lineItems,n=e.proposals,o=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME,i=Object(r.useCallback)((function(e){return ve()(n,[e,"name"])}),[n]),c=Object(r.useMemo)((function(){return function(e){return e.reduce((function(e,t){var n=t.type,r=t.index,a=t.domain,o=t.subdomain,i=t.description,c=t.proposalname,s=t.subuserid,l=t.subrate,f=t.labor,d=t.expenses,m=t.rate,p=Object(E.a)(t,Ra),h=+Object(De.h)(f),b=+Object(De.i)(l),v=+Object(De.i)(d),y=4!==n?h*m+d:h*b,g=+Object(De.i)(y),O=[{value:r+1},{value:n},{value:a},{value:o},{value:i,multiline:!0},{value:c},{value:s},{value:b},{value:h},{value:v},{value:g}];return{grid:e.grid.concat(Object(u.a)({items:O},p)),expenseTotal:e.expenseTotal+(t.removed?0:t.expenses),laborTotal:e.laborTotal+(t.removed?0:t.labor),total:e.total+(t.removed?0:g)}}),{grid:[],expenseTotal:0,laborTotal:0,total:0})}(t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{proposalname:i(e.proposaltoken)})})))}),[t,i]),s=c.grid,l=c.expenseTotal,d=c.laborTotal,m=c.total,p=s.length&&s[0]&&s[0].items.length,h=[{value:"Total"},{value:+Object(De.h)(d)},{value:l},{value:m}],b=Object(Sa.f)(p,h),v=s.concat({items:b});return a.a.createElement(a.a.Fragment,null,v.map((function(e,t){return a.a.createElement(Ia,{key:t,className:Object(f.classNames)(e.added&&o&&oa.a.lineitemsAddedDark,e.added&&!o&&oa.a.lineitemsAdded,e.removed&&o&&oa.a.lineitemsRemovedDark,e.removed&&!o&&oa.a.lineitemsRemoved)},e.items.map((function(e,t){return a.a.createElement("td",{key:t,className:Object(f.classNames)("cell",e.multiline&&oa.a.multiline)},e.value)})))})))},Pa=xa,La=function(e){var t=e.oldTextBody,n=e.newTextBody,o=Object(r.useMemo)((function(){var e,r,o,i=Jr(t),c=Jr(n),u=0,s=0;return(e=c,r=i,o=zr,[].concat(Object(Z.a)(e.filter(o(r)).map(Hr)),Object(Z.a)(r.filter(o(e)).map(Qr)),Object(Z.a)(e.filter(Kr(r)).map(qr)))).sort((function(e,t){return e.lineIndex-t.lineIndex})).map((function(e,t){return""!==e.value||e.removed?(e.added?u+=1:(e.removed||(u+=1),s+=1),function(e,t,n,r){var o=e.removed,i=e.value,c=e.added,u=[],s=Object(Gr.diffWordsWithSpace)(o||"",i||"").map((function(e){return e.value}));return u.push(a.a.createElement(ia,{key:t,removed:!!o,added:c,content:s,removedIndex:c?r:n})),u}(e,t,s,u)):(u+=1,s+=1,a.a.createElement(ia,{addedIndex:u,removedIndex:s,key:t}))}))}),[n,t]);return a.a.createElement("table",{className:oa.a.diffTable,cellSpacing:"0",cellPadding:"0"},a.a.createElement("tbody",null,o))},Aa=function(e){var t=e.file,n=e.className,r=Object(Be.a)(),o=Object(A.a)(r,2),i=o[0],c=o[1];return t.mime.includes("image")?a.a.createElement(a.a.Fragment,null,a.a.createElement(Fr.a,{className:n,file:t,viewOnly:!0,onClick:function(e){i(ca.a,{images:[e],onClose:c})}})):a.a.createElement(Fr.b,{file:t,viewOnly:!0})},Da=function(e){var t=e.oldFiles,n=e.newFiles,r=ea(n,t);return a.a.createElement("table",{className:Object(f.classNames)(oa.a.diffTable)},a.a.createElement("tbody",null,a.a.createElement("tr",{className:oa.a.files},r.length>0?r.map((function(e,t){return e.added?a.a.createElement("td",{key:t},a.a.createElement(Aa,{file:e,className:oa.a.fileAdded})):e.removed?a.a.createElement("td",{key:t},a.a.createElement(Aa,{file:e,className:oa.a.fileRemoved})):a.a.createElement("td",{key:t},a.a.createElement(Aa,{file:e,className:oa.a.fileUnchanged}))})):a.a.createElement("td",{className:oa.a.noFiles},a.a.createElement(Ce,null,"There are no attachment changes")))))},Ua=function(e){var t=e.newText,n=e.oldText;return Object(Gr.diffWordsWithSpace)(n,t).map((function(e,t){return a.a.createElement("span",{key:t,className:Object(f.classNames)(e.added&&oa.a.lineAdded,e.removed&&oa.a.lineRemoved)},e.value)}))},Va=function(e){var t=e.oldData,n=e.newData,r=e.className,o=e.proposals,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Object(Z.a)(e.filter(ta(t)).map(Xr)),Object(Z.a)(t.filter(ta(e)).map(Zr)),Object(Z.a)(e.filter(na(t)))).sort((function(e,t){return e.index-t.index}))}(ra(n.lineitems,{rate:n.contractorrate}),ra(t.lineitems,{rate:t.contractorrate}));return a.a.createElement(ka,{headers:Object(Sa.d)(),className:r},a.a.createElement(Na,{lineItems:i,proposals:o}))},Ma=n(70),Fa=n.n(Ma),Ba=n(663),Ga=n.n(Ba),Wa=function(e){var t=e.onChange,n=e.className,o=e.latest,i=e.base,c=e.compare,u=Object(f.useTheme)(),s=u.theme,l=u.themeName===f.DEFAULT_DARK_THEME_NAME,d=Object(f.getThemeProperty)(s,"text-color"),m=l?d:void 0,p=Object(r.useMemo)((function(){return Ga()(o+1)}),[o]);return a.a.createElement("div",{className:Fa.a.versionSelectorContainer},a.a.createElement(f.Dropdown,{title:i?"version ".concat(i):"----------",className:Fa.a.versionSelectorWrapper,itemsListClassName:n},p.map((function(e){return c>e&&a.a.createElement(f.DropdownItem,{key:e,onClick:function(){t("base",e)}},e?"version ".concat(e):"----------")}))),a.a.createElement(_n,{className:Fa.a.versionCompareIcon,iconColor:m,type:"compare"}),a.a.createElement(f.Dropdown,{title:"version ".concat(c),className:Fa.a.versionSelectorWrapper,itemsListClassName:n},p.map((function(e){return i<e&&a.a.createElement(f.DropdownItem,{key:e,onClick:function(){return t("compare",e)}},"version ",e)}))))},Ya=function(e){var t=e.proposal;return a.a.createElement($t,null,t.timestamp!==t.publishedat&&t.timestamp!==t.abandonedat&&a.a.createElement(Kt,{className:"margin-left-s margin-right-s",event:"edited",timestamp:t.timestamp}),t.abandonedat&&a.a.createElement(Kt,{className:"margin-left-s margin-right-s",event:"abandoned",timestamp:t.abandonedat}))},Ha=n(456),Qa=n.n(Ha),qa=function(e){if(!e)return{details:{},files:[],text:"",title:""};var t=Object(De.x)(e),n=t.description,r=t.name;return{details:e,files:Object(De.k)(e.files),text:n,title:r}};var za=["latest","initVersion","token"],Ka=function(e){var t=e.latest,n=e.initVersion,o=e.token,i=Object(E.a)(e,za),s=function(e,t){var n=Object(r.useState)([e,e-1]),a=Object(A.a)(n,2),o=a[0],i=a[1],s=Object(r.useState)({}),l=Object(A.a)(s,2),f=l[0],m=l[1],p=Object(r.useState)(e-1),h=Object(A.a)(p,2),b=h[0],v=h[1],E=Object(r.useState)(e),y=Object(A.a)(E,2),g=y[0],O=y[1],_=Object(r.useMemo)((function(){var e=f[b];return qa(e)}),[b,f]),j=Object(r.useMemo)((function(){var e=f[g];return qa(e)}),[g,f]),w=Object(d.b)(B.G),S=Object(Hn.f)({actions:{initial:function(){return o.length?k(Hn.d):k(Hn.c)},start:function(){if(!o.length)return k(Hn.c);var e=o[0];return e<=0?(i(Qa()(o)),k(Hn.d)):(w(t,e).then((function(t){return m(Object(u.a)(Object(u.a)({},f),{},Object(c.a)({},e,t))),i(Qa()(o)),i.length?k(Hn.d):k(Hn.c)})).catch((function(e){return k(Hn.b,e)})),k(Hn.a))},done:function(){}},initialValues:{status:"idle",loading:!0,verifying:!0}}),T=Object(A.a)(S,2),C=T[0],k=T[1],I=C.loading||"success"!==C.status;return{baseVersion:b,compareVersion:g,changedVersion:function(e,t){"compare"===e&&O(t),"base"===e&&v(t),f[t]||(i([t].concat(Object(Z.a)(o))),k(Hn.d))},baseProposal:_,compareProposal:j,loading:I}}(n,o),l=s.baseVersion,m=s.compareVersion,p=s.changedVersion,h=s.baseProposal,b=s.compareProposal,v=s.loading,y=Object(r.useMemo)((function(){return!!h.details&&!!b.details&&!v}),[h,b,v]),g=Object(r.useState)(0),O=Object(A.a)(g,2),_=O[0],j=O[1];return Object(r.useEffect)((function(){j(0)}),[i.show]),a.a.createElement(a.a.Fragment,null,a.a.createElement(an,{title:a.a.createElement(Xt,null,"Compare changes"),subtitle:a.a.createElement("p",{className:Fa.a.headerSubtitle},"Compare changes across different versions of the record.")}),a.a.createElement(Wa,{latest:t,onChange:p,base:l,compare:m}),y?a.a.createElement(a.a.Fragment,null,a.a.createElement(an,{title:a.a.createElement("p",{className:Fa.a.titleDiff},a.a.createElement(Ua,{oldText:h.title,newText:b.title})),subtitle:a.a.createElement($t,{className:"margin-top-s",separatorSymbol:":"},a.a.createElement(zt,{username:b.details.username,url:"/user/".concat(b.details.userid)}),a.a.createElement($t,{separatorSymbol:"-"},l>0&&a.a.createElement(Ya,{proposal:h.details}),a.a.createElement(Ya,{proposal:b.details})))}),a.a.createElement("span",null,"Download the timestamps for \xa0",l>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(dn,{label:"version ".concat(h.details.version),version:h.details.version,token:o}),"\xa0 or \xa0"),a.a.createElement(dn,{label:"version ".concat(b.details.version),version:b.details.version,token:o})),a.a.createElement(f.Tabs,{onSelectTab:j,activeTabIndex:_,className:Fa.a.diffTabs,contentClassName:Fa.a.diffTabContent},a.a.createElement(f.Tab,{label:"Text Changes"},a.a.createElement("div",{className:Fa.a.diffWrapper},a.a.createElement(La,{oldTextBody:h.text,newTextBody:b.text}))),a.a.createElement(f.Tab,{label:"Attachments Changes"},a.a.createElement(Da,{oldFiles:h.files,newFiles:b.files})))):a.a.createElement("div",{className:Fa.a.versionSpinnerContainer},a.a.createElement(f.Spinner,{width:"5rem",height:"5rem",invert:!0})))},Ja=["onClose","latest","initVersion","token"],Xa=function(e){var t=e.onClose,n=e.latest,r=e.initVersion,o=e.token,i=Object(E.a)(e,Ja);return a.a.createElement(f.Modal,Object.assign({onClose:t,contentClassName:Fa.a.modalContent},i),a.a.createElement(Ka,Object.assign({latest:n,initVersion:r,token:o},i)))},Za=n(118),$a=n.n(Za),eo=function(e){var t=e.label,n=e.value,r=e.renderValue;return a.a.createElement("div",{className:$a.a.field},a.a.createElement(f.Text,{className:$a.a.fieldLabel},t),r?r(n):a.a.createElement(f.Text,{size:"large",className:Object(f.classNames)("margin-top-xs margin-bottom-xs")},n))},to=n(81),no=n.n(to),ro=n(120),ao=n.n(ro),oo=n(98),io=n.n(oo),co=n(103),uo=n.n(co),so=function(){var e=Object(De.o)(),t=Object(De.n)();return 1===t?{year:e-1,month:12}:{year:e,month:t-1}},lo=function(){return{min:{year:2018,month:1},max:so()}},fo=function(e){return e&&e.input?"".concat(e.input.contractorname||e.username," - ").concat(e.input.month,"/").concat(e.input.year):""},mo=function(e){return e?"".concat(e.name," - ").concat(e.date.month,"/").concat(e.date.year):""},po=function(e){return 2===e.status||3===e.status},ho=function(e){return e?e.input.lineitems.reduce((function(e,t){return e+t.labor/60}),0):0},bo=function(e){return e?e.input.lineitems.reduce((function(e,t){return e+t.expenses/100}),0):0},vo=function(e){var t=new Date,n=t.getMonth()+1,r=t.getFullYear();return n>e?n-=e:(n=12-(e-n),r-=1),[{month:n,year:r},so()]},Eo=n(111),yo=["onClose","invoice","prevInvoice"],go=function(e){var t=e.onClose,n=e.invoice,o=e.prevInvoice,i=Object(E.a)(e,yo),c=o&&o.input?o.input:[],u=Object(X.a)().policyTicketVote.summariespagesize,s=Object(r.useMemo)((function(){var e=c.lineitems?c.lineitems.map((function(e){return e.proposaltoken})):[],t=n.input.lineitems.map((function(e){return e.proposaltoken}));return ha()([].concat(Object(Z.a)(e),Object(Z.a)(t))).filter((function(e){return""!==e}))}),[n.input.lineitems,c]),l=Object(Eo.a)(u,s),d=l.proposalsByToken,m=l.error;return a.a.createElement(f.Modal,Object.assign({onClose:t},i,{contentStyle:{width:"100%",minHeight:"40rem"}}),m&&a.a.createElement(f.Message,{kind:"error"},m.toString()),a.a.createElement(an,{title:a.a.createElement(Xt,{id:"proposal-title-gfsag",truncate:!0,linesBeforeTruncate:2},fo(n)),subtitle:a.a.createElement(Zt,null,a.a.createElement(zt,{username:n.username,url:"/user/".concat(n.userid)}),n.timestamp!==n.publishedat&&n.timestamp!==n.abandonedat&&a.a.createElement(Kt,{event:"edited",timestamp:n.timestamp}),n.abandonedat&&a.a.createElement(Kt,{event:"abandoned",timestamp:n.abandonedat}),n.version&&a.a.createElement(f.Text,{id:"proposal-".concat(n.proposalToken,"-version"),className:Fa.a.version},"version ".concat(n.version)))}),a.a.createElement(Pt.a,{topMarginSize:"s"},a.a.createElement(Jt,{token:n.censorshiprecord.token})),a.a.createElement(Pt.a,{justify:"space-between",className:Fa.a.topDetails},a.a.createElement("div",{className:Fa.a.field},a.a.createElement(f.Text,{weight:"semibold"},n.input.contractorname),a.a.createElement(f.Text,null,n.input.contractorlocation),a.a.createElement(f.Text,null,n.input.contractorcontact)),a.a.createElement(eo,{label:"Pay to Address:",value:n.input.paymentaddress,renderValue:function(e){return a.a.createElement(f.CopyableText,{id:"invoice-diff-payment-address",truncate:!0,tooltipPlacement:"bottom"},e)}})),a.a.createElement("div",{className:Fa.a.lineitemsWrapper},a.a.createElement(Va,{newData:n.input,oldData:c,proposals:d,className:"margin-top-m"})))};function Oo(){Oo=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var _o=function(e){var t=e.version,n=e.token,o=e.className,i=(e.proposalState,function(e,t){var n=Object(r.useState)(!1),a=Object(A.a)(n,2),o=a[0],i=a[1],c=Object(r.useState)(e),u=Object(A.a)(c,2),s=u[0],f=u[1],d=Object(Be.a)(),m=Object(A.a)(d,2),p=m[0],h=m[1],b=Object(l.d)(),v=b.recordType,E=b.constants,y=Object(r.useState)(),g=Object(A.a)(y,2),O=g[0],_=g[1];function j(e,t){return w.apply(this,arguments)}function w(){return(w=Object(L.a)(Oo().mark((function e(t,n){var r,a,o,i,c;return Oo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,Object(Br.y)(t,n);case 3:if(a=e.sent,!((o=a.invoice).version>1)){e.next=11;break}return e.next=8,Object(Br.y)(t,n-1);case 8:i=e.sent,c=i.invoice,r=c;case 11:return e.abrupt("return",{invoice:o,prevInvoice:r});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{disablePicker:1===e,selectedVersion:s,onChangeVersion:Object(r.useCallback)(function(){var e=Object(L.a)(Oo().mark((function e(n,r){var a,o,c;return Oo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(n),e.prev=1,v===E.RECORD_TYPE_PROPOSAL&&p(Xa,{onClose:h,latest:r,initVersion:n,token:t}),v!==E.RECORD_TYPE_INVOICE){e.next=11;break}return e.next=6,j(t,n);case 6:a=e.sent,o=a.invoice,c=a.prevInvoice,i(!1),p(go,{onClose:h,invoice:o,prevInvoice:c});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i(!1),_(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),[v,E.RECORD_TYPE_PROPOSAL,E.RECORD_TYPE_INVOICE,t,p,h]),error:O,isLoading:o}}(t,n)),c=i.disablePicker,u=i.onChangeVersion,s=i.isLoading,d=Object(r.useMemo)((function(){for(var e=[],n=t;n>=1;n--)e.push(n);return e}),[t]);return!c&&(s?a.a.createElement("div",{style:{padding:"2px"}},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(f.Dropdown,{title:"version ".concat(t),className:o,itemsListClassName:o},d.map((function(e){return a.a.createElement(f.DropdownItem,{key:e,onClick:function(){u(e,t)}},"version ",e)}))))};function jo(){jo=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,a){var o=new RegExp(e,r);return t.set(o,a||t.get(e)),Object(ht.a)(o,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var a=r[n];if("number"==typeof a)t[n]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;t[n]=e[a[o]]}return t}),Object.create(null))}return Object(pt.a)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);return n&&(n.groups=r(n,this)),n},n.prototype[Symbol.replace]=function(n,a){if("string"==typeof a){var o=t.get(this);return e[Symbol.replace].call(this,n,a.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+o[t]})))}if("function"==typeof a){var i=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(r(e,i)),a.apply(this,e)}))}return e[Symbol.replace].call(this,n,a)},jo.apply(this,arguments)}var wo=a.a.memo((function(e){var t=e.proposal,n=e.extended,o=e.collapseBodyContent,i=e.voteSummary,c=e.proposalSummary,u=e.billingStatusChangeMetadata,s=e.billingStatusChangeUsername,l=e.voteEndTimestamp,p=e.voteBlocksLeft,h=e.currentUser,b=e.history,v=t.censorshiprecord,E=t.files,y=t.name,g=t.publishedat,O=t.abandonedat,_=t.censoredat,j=t.timestamp,w=t.userid,S=t.username,T=t.version,C=t.linkby,k=t.linkto,I=t.legacytoken,x=t.proposedFor,R=t.type,N=t.rfpSubmissions,P=t.state,L=t.commentsCount,D=t.statuschangemsg,U=t.statuschangeusername,V=t.amount,M=t.domain,F=t.startDate,B=t.endDate,G=i||{},W=G.startblockheight,Y=G.endblockheight,H=Object(d.c)(J.t),Q=P===jn.gb,q=!!C||R===jn.zb,z=!!k||R===jn.Ab,K=q&&Object(Tn.t)(C),X=(q||z)&&!n,Z=!!i&&!!i.endblockheight,$=Object(De.C)(v&&v.token),ee=v&&v.token,te=!!i&&Object(Tn.o)(i),ne=In($,w,z,k),re=ne.proposalURL,ae=ne.authorURL,oe=ne.commentsURL,ie=ne.rfpProposalURL,ce=Object(Tn.A)(t),ue=Object(Tn.I)(i),se=Object(Tn.G)(i),le=Object(Tn.q)(c),fe=Object(Tn.v)(t),de=Object(Tn.x)(c),me=fe||le?D:de?null===u||void 0===u?void 0:u.reason:"",pe=fe||le?U:de?s:"",be=ce||le||fe,ve=h&&h.username===S,Ee=Object(Tn.H)(i),ye=ve&&Object(Tn.z)(t,i),ge=Object(m.b)().apiInfo,Oe=Object(f.useMediaQuery)("(max-width: 560px)"),_e=T>1&&j!==g,je=n&&T>1&&!fe&&(Q||ve||H),we=!n&&!Oe,Se=(se||ue)&&!le&&!fe,Te=n&&!!N&&!Object(De.u)(N.proposals)&&!Object(De.u)(N.voteSummaries)&&!Object(De.u)(N.proposalSummaries),Ce=ve&&Ee&&!ue&&!se&&ce,ke=Object(Be.a)(),Ie=Object(A.a)(ke,2),xe=Ie[0],Re=Ie[1],Ne=function(){xe(gt,{onClose:Re,proposal:t})},Pe=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME,Le=Object(Tn.d)(E),Ae=Object(r.useMemo)((function(){return function(e,t){var n,r=jo(/!\[[^\]]*\]\((.*?)(?="|\))(".*")?\)/g,{digest:1,optionalpart:2}),a=e.matchAll(r),o=e,i=[],c=Object(he.a)(a);try{for(c.s();!(n=c.n()).done;){var u=n.value.groups.digest,s=Object(De.s)(t,u);s&&(i.push(s),o=o.replace(u,"data:".concat(s.mime,";base64,").concat(s.payload)))}}catch(l){c.e(l)}finally{c.f()}return{text:o,markdownFiles:i}}(Le,E)}),[E,Le]),Ue=Ae.text,Ve=Ae.markdownFiles,Me=Sn(t,c,Pe),Fe=(Me||{}).text,Ge=me&&Fe&&pe;return a.a.createElement(a.a.Fragment,null,a.a.createElement(En,{id:$,className:Object(f.classNames)((le||fe)&&Rn.a.abandonedProposal,X&&Rn.a.rfpProposal)},(function(e){var r=e.Author,c=e.Event,s=e.Row,d=e.Title,m=e.RfpProposalLink,h=e.CommentsLink,v=e.ChartsLink,w=e.SearchVotes,k=e.CopyLink,R=e.MarkdownLink,A=e.DownloadRecord,D=e.DownloadTimestamps,U=e.DownloadVotes,G=e.LinkSection,J=e.Header,X=e.Subtitle,ne=e.Edit,de=e.Status,he=e.RecordToken,Ee=e.Metadata;return a.a.createElement(a.a.Fragment,null,n&&Ge&&!o&&a.a.createElement(f.Message,{kind:"warning",className:"margin-bottom-m"},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,"This proposal has been ".concat(Fe.toLowerCase()," by ").concat(pe,".")),a.a.createElement("div",null,"Reason: ".concat(me)))),a.a.createElement(J,{title:a.a.createElement(d,{id:"proposal-title-".concat($),url:re},y||$),edit:ye?a.a.createElement(ne,{url:"/record/".concat($,"/edit")}):Ce?a.a.createElement(f.Tooltip,{placement:Oe?"left":"right",content:"You have to revoke the voting authorization to edit the proposal",className:Rn.a.disabled,contentClassName:Rn.a.authorizeTooltip},a.a.createElement(ne,{tabIndex:-1})):null,isRfp:q,isRfpSubmission:z,rfpProposalLink:a.a.createElement(m,{url:ie,rfpTitle:x}),subtitle:a.a.createElement(X,null,a.a.createElement(r,{username:S,url:ae}),q&&C&&a.a.createElement(c,{event:"".concat(K?"expires":"expired"),timestamp:C}),Q?a.a.createElement("span",{"data-testid":"proposal-published-timestamp"},a.a.createElement(c,{event:"published",timestamp:g})):!_e&&a.a.createElement("span",{"data-testid":"proposal-published-timestamp"},a.a.createElement(c,{event:"submitted",timestamp:j})),_e&&a.a.createElement("span",{"data-testid":"proposal-edited-timestamp"},a.a.createElement(c,{event:"edited",timestamp:j})),we&&a.a.createElement(f.Text,{id:"proposal-".concat($,"-version"),className:Rn.a.version,truncate:!0},"version ".concat(T)),je&&a.a.createElement(_o,{className:Object(f.classNames)(Rn.a.versionPicker,Pe&&Rn.a.darkVersionPicker),version:T,token:$,proposalState:P})),status:a.a.createElement(de,null,a.a.createElement(f.StatusTag,Object.assign({className:Rn.a.statusTag},Me)),Se&&a.a.createElement(c,{event:"vote end".concat(se?"s":"ed"),timestamp:l,className:Rn.a.subtitleStatusTag,size:"small",additionInfo:ue&&"block ".concat(W," to ").concat(Y)}),le&&a.a.createElement(c,{event:"abandoned",timestamp:O,className:Rn.a.subtitleStatusTag,size:"small"}),fe&&a.a.createElement(c,{event:"censored",timestamp:_,className:Rn.a.subtitleStatusTag,size:"small"}),se&&a.a.createElement(f.Tooltip,{placement:"bottom",content:"block ".concat(W," to ").concat(Y),contentClassName:Rn.a.quorumTooltip},a.a.createElement(f.Text,{className:Object(f.classNames)("hide-on-mobile",Rn.a.blocksLeft),size:"small"},"".concat(p," block").concat(p>1?"s":""," left")))),mobile:Oe}),n&&a.a.createElement(s,{topMarginSize:"s"},a.a.createElement(he,{token:ee,isCopyable:!0})),Z&&a.a.createElement(s,null,a.a.createElement(f.StatusBar,{max:Object(Tn.j)(i),status:wn(i),markerPosition:"".concat(i.passpercentage,"%"),markerTooltipText:"".concat(i.passpercentage,"% Yes votes required for approval"),markerTooltipClassName:Rn.a.statusBarTooltip,renderStatusInfoComponent:a.a.createElement(Fn,{eligibleVotes:Object(Tn.c)(i),quorumPercentage:i.quorumpercentage,quorumVotes:Object(Tn.j)(i),votesReceived:Object(Tn.o)(i)})})),Te&&a.a.createElement(Mn,{data:N}),n&&a.a.createElement(Ee,{amount:V&&Ct.h.format(V),startDate:F,endDate:B,domain:M,isRFP:q}),n&&E&&!!E.length&&!o&&a.a.createElement("div",{"data-testid":"proposal-body"},a.a.createElement(bt.a,{className:Object(f.classNames)(Rn.a.markdownContainer,Pe&&"dark",Te&&Rn.a.rfpMarkdownContainer),body:Ue})),o&&a.a.createElement(_n,{type:"expand",className:"margin-top-m",size:"xlg",onClick:Object(Tn.p)(b,re)}),be&&!n&&a.a.createElement(s,{justify:"space-between"},a.a.createElement(h,{numOfComments:L,url:oe}),a.a.createElement("div",null,(se||ue)&&!I&&a.a.createElement(v,{token:ee}))),n&&E.length>1&&a.a.createElement(s,{className:Rn.a.filesRow,justify:"left",topMarginSize:"s"},a.a.createElement(Fr.c,{value:E.filter((function(e){return!Ve.includes(e)})),viewOnly:!0})),n&&a.a.createElement(s,{className:Rn.a.lastRow,justify:"space-between"},a.a.createElement(G,{className:Rn.a.downloadLinksWrapper,title:"Available Downloads"},a.a.createElement(A,{fileName:"".concat($,"-v").concat(T),content:t,serverpublickey:ge.pubkey,label:"Proposal Bundle"}),a.a.createElement(D,{label:"Proposal Timestamps",token:$,version:T,state:P}),ce&&L>0&&a.a.createElement(Kn,{label:"Comments Bundle",recordToken:$}),ce&&L>0&&a.a.createElement(Xn,{label:"Comments Timestamps",recordToken:$,commentsCount:L}),te>0&&a.a.createElement(U,{label:"Votes Bundle",fileName:"".concat($,"-votes"),serverpublickey:ge.pubkey,token:$}),te>0&&a.a.createElement($n,{label:"Votes Timestamps",votesCount:te,recordToken:$})),a.a.createElement(s,{className:Rn.a.proposalActions},a.a.createElement(k,{className:Object(f.classNames)(be&&Rn.a.copyLink),url:window.location.origin+re}),(se||ue)&&!I&&a.a.createElement(v,{token:ee}),(se||ue)&&Object(Tn.o)(i)>0&&a.a.createElement(w,{onClick:Ne}),!fe&&(Q||ve||H)&&a.a.createElement(R,{to:"/record/".concat($,"/raw")}))),a.a.createElement(Nn.a,null,a.a.createElement(Mr,{proposal:t,voteSummary:i,billingStatusChangeMetadata:u,rfpSubmissionsVoteSummaries:q&&N&&N.voteSummaries})))})))})),So=function(e){var t=kn(Object(De.C)(Object(Tn.h)(e.proposal))),n=t.voteSummary,r=t.proposalSummary,o=t.voteBlocksLeft,i=t.voteEndTimestamp,c=t.billingStatusChangeMetadata,l=Object(m.c)().currentUser,f=Object(s.c)().history;return a.a.createElement(wo,Object(u.a)(Object(u.a)({},e),{},{voteSummary:n,proposalSummary:r,billingStatusChangeMetadata:c,voteBlocksLeft:o,voteEndTimestamp:i,currentUser:l,history:f}))},To=n(457),Co=n.n(To),ko=n(52),Io=n.n(ko),xo=n(137),Ro=n.n(xo),No=n(155),Po=n.n(No),Lo=n(138),Ao=n.n(Lo),Do=n(664),Uo=n.n(Do),Vo=function(e){if(!e)return null;var t=!!e.linkto,n=!!e.linkby;return t||n?t?[e.linkto]:e.linkedfrom:null};function Mo(e,t,n){var a=Object(De.C)(e),o=Object(d.b)(B.F),i=Object(d.b)(B.J),c=Object(d.b)(B.K),s=Object(d.b)(B.s),l=Object(d.b)(B.t),f=Object(r.useMemo)((function(){return J.xb(a)}),[a]),p=Object(r.useMemo)((function(){return J.jb(e)}),[e]),h=Object(d.c)(f),b=Object(d.c)(J.ec),v=Object(d.c)(J.rc),E=Object(d.c)(J.db),y=Object(d.c)(J.cc),g=Object(d.c)(J.M),O=y[a],_=Object(d.c)(p)||{},j=Object(d.c)(J.N),w=Vo(h),S=h&&!!h.linkby,T=h&&!!h.linkto,C=Object(m.c)().currentUser,k=C&&h&&C.userid===h.userid,I=w&&Po()(w.map((function(e){return Object(De.C)(e)})),Ro()(b)),x=function(e,t,n){if(!e)return[];var r=n?[]:Vo(e),a=Object(Tn.h)(e);return Uo()(r||[])(a).filter((function(e){return!Ro()(t).some((function(t){return Object(De.C)(t)===Object(De.C)(e)}))}))}(h,v,T),R=w&&h.linkby&&{proposals:Ir()(Ao()(b,w.map((function(e){return Object(De.C)(e)})))),voteSummaries:Ao()(v,w.map((function(e){return Object(De.C)(e)}))),proposalSummaries:Ao()(y,w.map((function(e){return Object(De.C)(e)})))},N=!(h&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find((function(e){return"index.md"===e.name}))}(h.files)),P=v[a],L=!P,D=!O,U=null===C||void 0===C?void 0:C.isadmin,V=Object(Tn.u)(h,P),M=U&&V&&Io()(_)&&!S,F=e&&N,G=Object(Tn.v)(h),W=Object(Tn.q)(O),Y=Object(Tn.x)(O),H=Object(r.useState)(I),Q=Object(A.a)(H,2),q=Q[0],z=Q[1],K=!Io()(q),X=(h||{}).statuschangepk,Z=Object(Le.r)({userPubKey:(G||W)&&X}).username,$=_.publickey,ee=Object(Le.r)({userPubKey:$,fetch:Y}).username,te=Object(Hn.f)({actions:{initial:function(){return F?(o(e).then((function(e){var t=Vo(Object(De.x)(e));z(t),ae(ue)})).catch((function(e){return ae(se,e)})),ae(ie)):ae(ue)},load:function(){if(!(e&&!h||!Io()(x)||h&&w&&(K||!Io()(x))))return ae(ue)},verify:function(){if(K){var e=Object(Tn.l)(q,t),n=Object(A.a)(e,2),r=n[0],o=n[1];return i({tokens:r,fetchVoteSummary:S,fetchProposalSummary:S,fetchCommentCounts:!T}).then((function(){return z(o),ae(ue)})).catch((function(e){return ae(se,e)})),ae(ie)}return Io()(x)&&!L||(null===h||void 0===h?void 0:h.state)!==jn.gb||E?D&&!g?(s([a]).then((function(){return ae(ue)})).catch((function(e){return ae(se,e)})),ae(ie)):M&&!j?(l([a]).then((function(){return ae(ue)})).catch((function(e){return ae(se,e)})),ae(ie)):ae(ce,w&&R?{proposal:h,rfpSubmissions:R}:{proposal:h}):(c(x).then((function(){return ae(ue)})).catch((function(e){return ae(se,e)})),ae(ie))},done:function(){if(!Yr()(re.proposal,h)||M)return ae(ue)}},initialValues:{status:"idle"}}),ne=Object(A.a)(te,3),re=ne[0],ae=ne[1],oe=ne[2],ie=oe.FETCH,ce=oe.RESOLVE,ue=oe.VERIFY,se=oe.REJECT,le=Object(Tn.f)(re.proposal,re.rfpSubmissions,b),fe=Object(r.useCallback)((function(){return ae("RETRY",{status:"idle"})}),[ae]),de=Object(Tn.h)(le),me=null===le||void 0===le?void 0:le.state,pe=Object(Le.c)(de,me,null,n,k),he=pe.onSubmitComment,be=pe.commentSectionIds,ve=pe.hasAuthorUpdates,Ee=pe.singleThreadRootId,ye=pe.error,ge=pe.loading,Oe=pe.finishedCommentsFetch;return{proposal:le&&Object(u.a)(Object(u.a)({},le),{},{statuschangeusername:Z}),billingStatusChangeUsername:ee,error:re.error,loading:"success"!==re.status||!!M,threadParentID:n,isCurrentUserProposalAuthor:k,commentSectionIds:be,hasAuthorUpdates:ve,singleThreadRootId:Ee,onSubmitComment:he,commentsError:ye,currentUser:C,commentsLoading:ge,commentsFinishedLoading:Oe,onReloadProposalDetails:fe}}var Fo=n(99),Bo=n.n(Fo),Go=Object(r.createContext)(),Wo=n(77),Yo=n.n(Wo),Ho=function(){var e=Object(f.useTheme)().theme,t=Object(f.getThemeProperty)(e,"card-background"),n=Object(f.getThemeProperty)(e,"dimmed-card-background");return a.a.createElement(Un.a,{height:420,width:800,speed:2,primaryColor:t,secondaryColor:n},a.a.createElement("rect",{x:"0",y:"30",width:"800",height:"200"}),a.a.createElement("rect",{x:"630",y:"250",width:"170",height:"50"}))},Qo=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2)]).then(n.bind(null,1265))})),qo=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(Ho,null)},a.a.createElement(Qo,e))},zo=n(97),Ko=n.n(zo),Jo={SORT_BY_TOP:"Top",SORT_BY_OLD:"Old",SORT_BY_NEW:"New"},Xo=function(e){return{label:e,value:e}},Zo=function(e,t){return function(e){var t,n=(t={},Object(c.a)(t,Jo.SORT_BY_NEW,Ko()(["timestamp"],["desc"])),Object(c.a)(t,Jo.SORT_BY_OLD,Ko()(["timestamp"],["asc"])),Object(c.a)(t,Jo.SORT_BY_TOP,Ko()(["resultvotes","timestamp"],["desc","asc"])),t);return n[e]||n[Jo.SORT_BY_TOP]}(e)(t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{resultvotes:e.upvotes-e.downvotes})})))};var $o=n(179),ei=n(164),ti=n.n(ei);function ni(){ni=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var ri=function(e){var t,n=e.upLikes,o=e.downLikes,i=e.onLike,c=e.onDislike,u=e.option,s=e.disabled,l=Object(f.useTheme)().theme,d=Object(f.getThemeProperty)(l,"comment-like-color"),m=Object(f.getThemeProperty)(l,"comment-like-color-active"),p=1===(t=u)||"1"===t?m:d,h=function(e){return-1===e||"-1"===e}(u)?m:d;function b(){return(b=Object(L.a)(ni().mark((function e(){return ni().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(L.a)(ni().mark((function e(){return ni().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(e){return Object($o.debounce)((function(){s||e()}),300)},y=Object(r.useCallback)((function(e,t){return a.a.createElement(f.Text,{"data-testid":"score-".concat(t?"like":"dislike"),size:"small",className:Object(f.classNames)(ti.a.likesResult,"unselectable")},e)}),[]);return a.a.createElement("div",{className:"align-center"},a.a.createElement("div",{className:ti.a.leftLikeBox},a.a.createElement("button",{className:Object(f.classNames)(ti.a.likeBtn,s&&ti.a.likeDisabled),"data-testid":"like-btn",onClick:E((function(){return b.apply(this,arguments)}))},a.a.createElement(f.Icon,{iconColor:p,backgroundColor:p,type:"like"})),y(n,!0)),a.a.createElement("div",{className:ti.a.rightLikeBox},a.a.createElement("button",{className:Object(f.classNames)(ti.a.likeBtn,s&&ti.a.likeDisabled),"data-testid":"dislike-btn",onClick:E((function(){return v.apply(this,arguments)}))},a.a.createElement(f.Icon,{iconColor:h,backgroundColor:h,type:"dislike"})),y(o)))};ri.defaultProps={active:!1,upLikes:0,downLikes:0};var ai=ri,oi=["className","permalink","commentID","parentID","createdAt","timestamp","version","token","state","author","authorID","authorUpdateTitle","censored","censoredBy","reason","sectionId","highlightAuthor","likesUpCount","likesDownCount","likeOption","disableLikes","disableLikesClick","onLike","onDislike","commentBody","showReplies","disableReply","onClickCensor","onClickReply","onClickShowReplies","onEditComment","editCommentID","setEditCommentID","numOfReplies","numOfNewHiddenReplies","highlightAsNew","censorable","isFlatMode","seeInContextLink"];function ii(){ii=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var ci=["h1","h2","h3","h4","h5","h6"],ui=a.a.memo((function(e){var t=e.className,n=e.permalink,o=e.commentID,i=e.parentID,c=e.createdAt,u=e.timestamp,s=e.version,d=e.token,p=e.state,h=e.author,b=e.authorID,v=e.authorUpdateTitle,y=e.censored,g=e.censoredBy,O=e.reason,_=e.sectionId,j=e.highlightAuthor,w=e.likesUpCount,S=e.likesDownCount,T=e.likeOption,C=e.disableLikes,k=e.disableLikesClick,I=e.onLike,x=e.onDislike,R=e.commentBody,N=e.showReplies,P=e.disableReply,D=e.onClickCensor,U=e.onClickReply,V=e.onClickShowReplies,M=e.onEditComment,F=e.editCommentID,B=e.setEditCommentID,G=e.numOfReplies,W=e.numOfNewHiddenReplies,Y=e.highlightAsNew,H=e.censorable,Q=e.isFlatMode,q=e.seeInContextLink,z=Object(E.a)(e,oi),K=Object(f.useMediaQuery)("(max-width: 560px)"),J=Object(l.d)().javascriptEnabled,X=Object(Le.j)().policyComments,Z=X.editperiod,$=X.allowedits,ee=(Object(m.c)().currentUser||{}).userid,te=(new Date).getTime()/1e3,ne=b===ee&&!P&&$&&te<c+Z,re=c+Z-te,ae=Object(r.useState)(!1),oe=Object(A.a)(ae,2),ie=oe[0],ce=oe[1];Object(r.useEffect)((function(){if(ne){ce(!0);var e=setTimeout((function(){ce(!1)}),Math.round(1e3*re));return function(){return clearTimeout(e)}}}),[ne,re]);var ue=!y&&H&&a.a.createElement(f.Text,{weight:"semibold",className:Yo.a.censor,"data-testid":"comment-censor",onClick:D},"Censor"),se=Object(Le.r)({userPubKey:y&&g}).username,le=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME,fe=W>0&&!N&&!Q,de=G>0&&!Q,me=J?"/user/".concat(b):"".concat(jn.J,"/user/").concat(b),pe=Object(r.useCallback)(function(){var e=Object(L.a)(ii().mark((function e(t){var n,r,a,c;return ii().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.comment,r=t.title,a="",c="",r&&(c=jn.Bb,a=JSON.stringify({title:r})),e.next=5,M({commentID:o,comment:n,token:d,parentID:i,state:p,extraData:a,extraDataHint:c,sectionId:_});case 5:B(null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[M,o,i,p,d,_,B]);return F!==o?a.a.createElement("div",Object.assign({className:Object(f.classNames)(Yo.a.comment,Y&&Yo.a.highlightAsNew,t)},z),a.a.createElement("div",{className:Object(f.classNames)("justify-space-between",Yo.a.info)},a.a.createElement(Mt,null,a.a.createElement(Pe.a,{className:Object(f.classNames)(Yo.a.commentAuthor,j&&Yo.a.recordAuthor),to:me},h),a.a.createElement(kt,{timestamp:u,placement:"bottom"},(function(e){var t=e.timeAgo;return a.a.createElement(Pe.a,{className:Yo.a.timeAgo,to:"".concat(n)},s>1&&a.a.createElement("span",null,"edited "),t)})),Y&&!K&&a.a.createElement(f.Text,{color:"gray"},"new"),!K&&ue,!K&&q,ie&&a.a.createElement(f.Icon,{className:Yo.a.editIcon,onClick:function(){return B(o)},type:"edit","data-testid":"edit-comment-".concat(o)})),!C&&!y&&a.a.createElement("div",{className:Yo.a.likesWrapper},a.a.createElement(ai,{disabled:k,upLikes:w,downLikes:S,option:T,onLike:I,onDislike:x}))),K&&ue,K&&q,y?a.a.createElement(bt.a,{renderImages:!1,className:Yo.a.censored,body:"Censored by ".concat(se,". Reason: ").concat(O)}):a.a.createElement(bt.a,{renderImages:!1,className:Object(f.classNames)(le&&"dark","margin-top-s"),body:R,disallowedElements:ci}),a.a.createElement("div",{className:"justify-space-between margin-top-s"},a.a.createElement("div",{className:"justify-left"},!P&&a.a.createElement(Nn.a,null,a.a.createElement(f.Text,{weight:"semibold",className:Yo.a.reply,onClick:U},"Reply")),de&&a.a.createElement("span",{className:Yo.a.showReplies,onClick:V},N?"-":"+".concat(G)),fe&&a.a.createElement(f.Text,{color:"green"},"".concat(W," new"))),a.a.createElement(Wt,{url:window.location.origin+n}))):a.a.createElement(qo,{persistKey:"editing-comment-".concat(o,"-").concat(d),className:Yo.a.editForm,onSubmit:pe,onCancel:function(){return B(null)},isAuthorUpdate:!!v,values:{comment:R,title:v}})})),si=["comment","children","numOfReplies","isFlatMode","proposalState","recordBaseLink"],li=a.a.memo((function(e){var t=e.parentid,n=e.recordToken;return a.a.createElement(Pe.a,{className:Yo.a.contextLink,to:"/record/".concat(n,"/comments/").concat(t)},"see in context")})),fi=a.a.memo((function(e){var t=e.children;return a.a.createElement("div",{className:Yo.a.childrenContainer},t)})),di=a.a.memo((function(e){var t=e.showReplyForm,n=e.commentid,o=e.token,i=e.handleSubmitComment,c=e.handleToggleReplyForm,u=e.handleCommentSubmitted,s=e.isThread,l=e.children,f=Object(r.useMemo)((function(){return a.a.createElement(qo,{className:Yo.a.replyForm,persistKey:"replying-to-".concat(n,"-from-").concat(o),onSubmit:i,onCancel:c,onCommentSubmitted:u})}),[n,i,o,u,c]);return a.a.createElement(a.a.Fragment,null,t&&f,s&&l)})),mi=function(e){var t=e.comment,n=e.children,o=e.numOfReplies,i=e.isFlatMode,c=e.proposalState,u=e.recordBaseLink,s=Object(E.a)(e,si),l=Object(r.useContext)(Go),f=l.onSubmitComment,d=l.onEditComment,m=l.editCommentID,p=l.setEditCommentID,h=l.onCommentVote,b=l.getCommentLikeOption,v=l.enableCommentVote,y=l.recordAuthorID,g=l.recordAuthorUsername,O=l.loadingLikes,_=l.userLoggedIn,j=l.recordToken,w=l.readOnly,S=l.identityError,T=l.paywallMissing,C=l.openCensorModal,k=l.openLoginModal,I=l.isAdmin,x=l.currentUser,R=l.getCommentVotes,N=l.latestAuthorUpdateId,P=l.areAuthorUpdatesAllowed,L=l.comments,D=l.sectionId,U=t.comment,V=t.token,M=t.state,F=t.commentid,B=t.deleted,G=t.publickey,W=t.timestamp,Y=t.createdat,H=t.version,Q=t.username,q=t.userid,z=t.isNew,K=t.sumOfNewDescendants,J=t.parentid,X=t.extradatahint,Z=t.extradata,$=t.reason,ee=X===jn.Bb?JSON.parse(Z).title:"",te=L&&function(e,t,n){if(t===e)return!0;for(var r=n.reduce((function(e,t){return e[t.commentid]=t,e}),{}),a=r[t];a&&0!==a.parentid;){if(a.parentid===e)return!0;a=r[a.parentid]}return!1}(N,F,L),ne=P&&!te,re=y===q||g===Q,ae=I&&!w,oe=Object(r.useState)(!1),ie=Object(A.a)(oe,2),ce=ie[0],ue=ie[1],se=Object(r.useState)(!0),le=Object(A.a)(se,2),fe=le[0],de=le[1],me=Object(r.useMemo)((function(){return R(t.commentid)||t}),[R,t]),pe=me.upvotes,he=me.downvotes,be=Object(r.useMemo)((function(){return!!a.a.Children.toArray(n).filter((function(e){return e.props&&e.props.comments&&!!e.props.comments.length})).length}),[n]),ve=fe&&be&&!i,Ee=i&&J>0,ye=Object(r.useCallback)((function(){ue(!ce)}),[ce]),ge=Object(r.useCallback)((function(){de(!fe)}),[fe]),Oe=Object(r.useCallback)((function(e){var t=e.comment;return f({comment:t,token:V,parentID:F,state:c,sectionId:D})}),[f,V,F,c,D]),_e=Object(r.useCallback)((function(){ue(!1),de(!0)}),[]),je=Object(r.useCallback)((function(){if(_)return h(F,jn.bb);k()}),[k,_,h,F]),we=Object(r.useCallback)((function(){if(_)return h(F,jn.ab);k()}),[k,h,_,F]),Se=Object(r.useCallback)((function(){return C(F)}),[F,C]),Te=Ee&&a.a.createElement(li,{parentid:J,recordToken:j}),Ce=O||w||_&&(S||T||x.username===Q)||ne;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ui,Object.assign({permalink:"".concat(u,"/comments/").concat(F),commentID:F,parentID:J,token:V,state:M,seeInContextLink:Te,censorable:ae,author:Q,authorID:q,authorUpdateTitle:ee,createdAt:Y,timestamp:W,version:H,censored:B,sectionId:D,censoredBy:G,reason:$,highlightAuthor:re,highlightAsNew:z,disableLikes:!v||c===jn.fb,disableLikesClick:Ce,disableReply:w||!!S||T||ne,likesUpCount:pe,likesDownCount:he,likeOption:b(F),onLike:je,onDislike:we,showReplies:fe,isFlatMode:i,onClickCensor:Se,onClickReply:ye,onClickShowReplies:ge,onEditComment:d,editCommentID:m,setEditCommentID:p,numOfReplies:o,numOfNewHiddenReplies:K,commentBody:U},s)),a.a.createElement(di,{showReplyForm:ce,commentid:F,token:V,handleSubmitComment:Oe,handleToggleReplyForm:ye,handleCommentSubmitted:_e,isThread:ve},a.a.createElement(fi,null,n)))},pi=function e(t){var n=t.comments,r=t.isFlatMode,o=t.proposalState,i=t.recordBaseLink;return n.map((function(t){return a.a.createElement(mi,{key:"comment-".concat(t.commentid),comment:t,numOfReplies:t.children&&t.children.length||0,isFlatMode:r,recordBaseLink:i,proposalState:o},a.a.createElement(e,{comments:t.children,proposalState:o,recordBaseLink:i}))}))},hi=function(e,t,n,r){return e.filter((function(e){return+e.parentid===+t})).map((function(t){return bi(t,e,n,r)}))},bi=function(e,t,n,r){var a=hi(t,e.commentid,n,r),o=n&&r!==e.userid&&e.timestamp>n,i=a.filter((function(e){return e.isNew})).length,c=a.reduce((function(e,t){return e+t.sumOfNewDescendants}),i);return Object(u.a)(Object(u.a)({},e),{},{isNew:o,numOfNewChildren:i,sumOfNewDescendants:c,children:a})},vi=a.a.memo((function(e){var t=e.comments,n=e.threadParentID,o=e.lastTimeAccessed,i=e.currentUserID,c=e.isFlatMode,u=e.proposalState,s=e.recordsBaseLink,l=Object(r.useState)([]),f=Object(A.a)(l,2),d=f[0],m=f[1],p=n&&!!t.length;return Object(r.useEffect)((function(){if(!c||p)if(p){var e=t.find((function(e){return+e.commentid===+n}));m([bi(e,t,o,i)])}else{var r=hi(t,0,o,i);m(r)}else m(t.map((function(e){return bi(e,t,o,i)})))}),[t,n,i,c,o,p]),a.a.createElement(pi,{comments:d,isFlatMode:!p&&c,proposalState:u,recordBaseLink:s})})),Ei=function(){var e=Object(f.useTheme)().theme,t=Object(f.getThemeProperty)(e,"card-background"),n=Object(f.getThemeProperty)(e,"dimmed-card-background"),r=Object(f.useMediaQuery)("(max-width: 560px)");return a.a.createElement(Un.a,{height:100,width:r?400:600,speed:2,primaryColor:t,secondaryColor:n},a.a.createElement("rect",{x:"0",y:"10",rx:"3",ry:"3",width:r?"300":"100",height:"16"}),a.a.createElement("rect",{x:"0",y:"36",rx:"4",ry:"4",width:r?"400":"600",height:"12"}),a.a.createElement("rect",{x:"0",y:"52",rx:"4",ry:"4",width:r?"400":"600",height:"12"}),a.a.createElement("rect",{x:"0",y:"74",rx:"3",ry:"3",width:r?"120":"76",height:"16"}))},yi=n(100),gi=n.n(yi),Oi=n(665),_i=n.n(Oi),ji={comments:[],sortOption:void 0},wi="sort",Si="update",Ti=function(e,t){switch(t.type){case wi:return Object(u.a)(Object(u.a)({},e),{},{comments:Zo(t.sortOption,e.comments),sortOption:t.sortOption});case Si:if(t.sortOption!==e.sortOption)return Object(u.a)(Object(u.a)({},e),{},{sortOption:t.sortOption,comments:Zo(t.sortOption,t.comments)});if(t.comments.length>e.comments.length){var n=_i()(t.comments,(function(e){return+e.commentid}));return Object(u.a)(Object(u.a)({},e),{},{comments:[n].concat(e.comments)})}return Object(u.a)(Object(u.a)({},e),{},{comments:e.comments.map((function(e){var n=t.comments.find((function(t){return t.commentid===e.commentid}));return gi()(e,n)?e:n}))});default:return e}},Ci=function(e){var t=e.isActive,n=e.onClick;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Object(f.classNames)(Bo.a.flatButtonWrapper,t&&Bo.a.flatModeActive),onClick:n},a.a.createElement(f.Text,{className:Object(f.classNames)(Bo.a.flatButtonText,t&&Bo.a.flatModeActive)},"Flat mode")),a.a.createElement("div",null,a.a.createElement(f.Tooltip,{className:Bo.a.flatTooltipWrapper,contentClassName:Bo.a.flatModTooltip,content:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Flat mode flattens out the comment hierarchy so that filtering criteria can be applied to both top level comments and comment replies equally."),a.a.createElement("p",null,"When flat mode is turned off, filtering criteria is only applied to top level comments."))},a.a.createElement(f.Icon,{type:"info"}))))},ki=a.a.memo((function(e){var t=e.sortOption,n=e.setSortOption,o=e.dispatch,i=e.comments,c=e.numOfComments,u=e.state,s=e.threadParentID,l=e.isSingleThread,d=e.recordTokenFull,m=e.onCommentVote,p=e.recordToken,h=e.recordType,b=e.lastVisitTimestamp,v=e.commentsCtx,E=e.onCensorComment,y=e.currentUser,g=e.userid,O=e.proposalState,_=e.handleOpenModal,j=e.handleCloseModal,w=e.loading,S=e.recordAuthorID,T=e.recordAuthorUsername,C=e.recordBaseLink,k=e.onSubmitComment,I=e.onEditComment,x=e.readOnly,R=e.identityError,N=e.paywallMissing,P=e.handleOpenLoginModal,L=e.latestAuthorUpdateId,D=e.areAuthorUpdatesAllowed,U=e.authorUpdateTitle,V=e.sectionId,M=v.getCommentLikeOption,F=v.enableCommentVote,B=v.userLoggedIn,G=v.userEmail,W=v.loadingLikes,Y=v.getCommentVotes,H=i?i.length:0,Q=c-u.comments.length,q=!!u.comments.length&&Q>0,z=Object(r.useState)(null),K=Object(A.a)(z,2),J=K[0],X=K[1],Z=!!J,$=Object(r.useCallback)((function(e){n(e.value),o({type:wi,sortOption:e.value})}),[o,n]),ee=Object(r.useMemo)((function(){return Object.keys(Jo).map((function(e){return Xo(Jo[e])}))}),[]),te=Object(r.useMemo)((function(){return Xo(t)}),[t]),ne=Object(Le.g)("flatComments",!1),re=Object(A.a)(ne,2),ae=re[0],oe=re[1],ie=Object(r.useState)(ae),ce=Object(A.a)(ie,2),ue=ce[0],se=ce[1],le=Object($o.debounce)((function(){var e=!ue;se(e),oe(e),o({type:wi,sortOption:t})}),50),fe=Object(r.useCallback)((function(e,t){return d?m(e,t,d):null}),[m,d]),de=Object(r.useCallback)((function(e){var t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t){return e.apply(void 0,n.concat([t]))}}(E,g,d,e,O,V);_(ur,{title:"Censor comment",reasonLabel:"Censor reason",subject:"censorComment",successTitle:"Comment censored",successMessage:a.a.createElement(f.Text,null,"The comment has been successfully censored."),onSubmit:t,onClose:function(){return j()}})}),[E,g,d,O,_,j,V]),me=Object(r.useMemo)((function(){if(!w)return null;for(var e=c<3?c:3,t=[],n=0;n<e;n++)t.push(a.a.createElement(Ei,{key:"comment-loader-".concat(n)}));return t}),[c,w]),pe=l&&(i&&!i.find((function(e){return e.commentid===+s}))||0===c);return a.a.createElement(a.a.Fragment,null,!Z&&a.a.createElement("div",{className:Object(f.classNames)("container",Bo.a.commentsHeader)},!l&&a.a.createElement("div",{className:Bo.a.titleWrapper},a.a.createElement(f.H2,{className:Bo.a.commentsTitle},U||"Comments"," ",a.a.createElement("span",{className:Bo.a.commentsCount},"(".concat(H,")"))),q&&a.a.createElement(f.Text,{color:"gray",size:"small"},"(".concat(Q," duplicate comments omitted)"))),a.a.createElement("div",{className:Bo.a.sortContainer},!!i&&!!i.length&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Select,{value:te,onChange:$,options:ee}),!l&&a.a.createElement(Ci,{isActive:ue,onClick:le}))),l&&a.a.createElement("div",{className:"justify-left margin-top-s"},a.a.createElement(f.Text,{className:"margin-right-xs"},"Single comment thread. "),a.a.createElement(Pe.a,{to:"/record/".concat(p,"?scrollToComments=true")},"View all."))),a.a.createElement("div",{className:Bo.a.commentsWrapper},w?me:pe?null:a.a.createElement(Go.Provider,{value:{onSubmitComment:k,onEditComment:I,editCommentID:J,setEditCommentID:X,onCommentVote:fe,recordAuthorID:S,recordAuthorUsername:T,recordToken:p,threadParentID:s,recordType:h,proposalState:O,readOnly:x,identityError:R,paywallMissing:N,isAdmin:y&&y.isadmin,currentUser:y,openCensorModal:de,openLoginModal:P,latestAuthorUpdateId:L,areAuthorUpdatesAllowed:D,comments:i,getCommentLikeOption:M,enableCommentVote:F,userLoggedIn:B,userEmail:G,loadingLikes:W,getCommentVotes:Y,sectionId:V}},a.a.createElement(vi,{lastTimeAccessed:b,threadParentID:s,currentUserID:g,comments:u.comments,isFlatMode:ue,proposalState:O,recordsBaseLink:C})),pe&&a.a.createElement(f.Message,{kind:"error"},"The comment you are trying to access does not exist or it is a duplicated. Return to the full thread to select a valid comment.")))})),Ii=a.a.memo((function(e){var t=e.recordToken,n=e.recordTokenFull,o=e.recordAuthorID,i=e.recordAuthorUsername,c=e.threadParentID,u=e.readOnly,s=e.className,l=e.proposalState,d=e.recordBaseLink,m=e.areAuthorUpdatesAllowed,p=e.handleOpenModal,h=e.handleCloseModal,b=e.handleOpenLoginModal,v=e.paywallMissing,E=e.identityError,y=e.sectionId,g=!!c,O=Object(Le.c)(n,l,y,c),_=O.onSubmitComment,j=O.onEditComment,w=O.onCommentVote,S=O.onCensorComment,T=O.comments,C=O.loading,k=O.recordType,I=O.lastVisitTimestamp,x=O.currentUser,R=O.getCommentLikeOption,N=O.enableCommentVote,P=O.userLoggedIn,L=O.userEmail,D=O.loadingLikes,U=O.getCommentVotes,V=O.latestAuthorUpdateId,M=(x||{}).userid,F=null===T||void 0===T?void 0:T.length,B=Object(r.useReducer)(Ti,ji),G=Object(A.a)(B,2),W=G[0],Y=G[1],H=Object(Le.g)("sortComments-".concat(t),Jo.SORT_BY_TOP),Q=Object(A.a)(H,2),q=Q[0],z=Q[1],K=Object(r.useCallback)((function(e){var t=T.find((function(t){return t.commentid===e})).extradata;return JSON.parse(t).title}),[T]);Object(r.useEffect)((function(){T&&T.length&&Y({type:Si,comments:T,sortOption:q})}),[T,q]);var J=Object(r.useMemo)((function(){if(y&&y!==jn.db&&!g)return K(y)}),[y,K,g]);return a.a.createElement(a.a.Fragment,null,T&&a.a.createElement(f.Card,{id:"commentArea",className:Object(f.classNames)(Bo.a.commentAreaContainer,s)},a.a.createElement(ki,{sortOption:q,setSortOption:z,dispatch:Y,comments:T,numOfComments:F,state:W,threadParentID:c,isSingleThread:g,recordTokenFull:n,onCommentVote:w,recordToken:t,recordType:k,lastVisitTimestamp:I,commentsCtx:{getCommentLikeOption:R,enableCommentVote:N,userLoggedIn:P,userEmail:L,loadingLikes:D,getCommentVotes:U},onCensorComment:S,userid:M,currentUser:x,proposalState:l,handleOpenModal:p,handleCloseModal:h,loading:C,recordAuthorID:o,recordAuthorUsername:i,recordBaseLink:d,onSubmitComment:_,onEditComment:j,readOnly:u,identityError:E,paywallMissing:v,handleOpenLoginModal:b,latestAuthorUpdateId:V,areAuthorUpdatesAllowed:m,authorUpdateTitle:J,sectionId:y})))})),xi=function(e){var t=e.primaryColor,n=e.secondaryColor,r=e.extended,o=e.yOffset;return a.a.createElement(Un.a,{height:r?300:170,width:400,speed:2,primaryColor:t,secondaryColor:n},a.a.createElement("rect",{x:"0",y:"0",width:"180",height:"10"}),a.a.createElement("rect",{x:"0",y:"20",width:"360",height:"20"}),a.a.createElement("rect",{x:"0",y:"60",width:"80",height:"20"}),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"100",width:"20",height:"14"}),a.a.createElement("rect",{x:"30",y:"100",width:"400",height:"14"}),a.a.createElement("rect",{x:"0",y:"134",width:"400",height:"1"}),a.a.createElement("rect",{x:"0",y:"154",width:"200",height:"12"}),a.a.createElement("rect",{x:"0",y:"180",width:"400",height:"12"}),a.a.createElement("rect",{x:"0",y:"212",width:"400",height:"1"})),a.a.createElement("rect",{x:"0",y:"".concat(156+o),width:"130",height:"14"}),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"220",width:"140",height:"20"}),a.a.createElement("rect",{x:"150",y:"220",width:"140",height:"20"})))},Ri=function(e){var t=e.primaryColor,n=e.secondaryColor,r=e.extended,o=e.yOffset;return a.a.createElement(Un.a,{height:r?240:100,width:800,speed:2,primaryColor:t,secondaryColor:n},a.a.createElement("rect",{x:"0",y:"0",width:"600",height:"20"}),a.a.createElement("rect",{x:"700",y:"0",width:"100",height:"20"}),a.a.createElement("rect",{x:"0",y:"40",width:"100",height:"10"}),a.a.createElement("rect",{x:"110",y:"40",width:"200",height:"10"}),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"60",width:"20",height:"14"}),a.a.createElement("rect",{x:"30",y:"60",width:"500",height:"14"}),a.a.createElement("rect",{x:"0",y:"100",width:"800",height:"1"}),a.a.createElement("rect",{x:"0",y:"120",width:"600",height:"12"}),a.a.createElement("rect",{x:"0",y:"136",width:"800",height:"12"}),a.a.createElement("rect",{x:"0",y:"164",width:"800",height:"1"})),a.a.createElement("rect",{x:"0",y:"".concat(80+o),width:"130",height:"14"}),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"220",width:"140",height:"20"}),a.a.createElement("rect",{x:"150",y:"220",width:"140",height:"20"})))},Ni=function(e){var t=e.extended,n=Object(f.useMediaQuery)("(max-width: 560px)"),r=t?100:0,o=Object(f.useTheme)().theme,i=Object(f.getThemeProperty)(o,"card-background"),c=Object(f.getThemeProperty)(o,"dimmed-card-background");return a.a.createElement(En,null,(function(){return n?a.a.createElement(xi,{primaryColor:i,secondaryColor:c,extended:t,yOffset:r}):a.a.createElement(Ri,{primaryColor:i,secondaryColor:c,extended:t,yOffset:r})}))},Pi=function(e){var t=e.children;return a.a.Children.toArray(t).filter((function(e){return!!e}))[0]||null};Pi.propType={children:At.a.node};var Li,Ai=Pi,Di=n(150),Ui=n(269),Vi=n.n(Ui),Mi=function(e){var t=e.onLoginClick,n=e.onSignupClick,r=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement("div",{className:Vi.a.wrapper},a.a.createElement(f.Text,{className:Object(f.classNames)(Vi.a.text,r&&Vi.a.darkText)},"What are your thoughts?"),a.a.createElement("div",{className:Vi.a.buttonsWrapper},t&&a.a.createElement(f.Button,{kind:"secondary",onClick:t,"data-testid":"wayt-login-button"},"Log in"),n&&a.a.createElement(f.Button,{onClick:n},"Sign up")))},Fi=n(205),Bi=function(e){var t=e.title;return Object(Le.e)(t),null},Gi=Object(h.a)((function(e){var t=e.Main,n=e.match,o=e.history,i=Object(De.C)(mt()("params.token",n)),c=mt()("params.commentid",n),u=!!Object(W.a)("scrollToComments"),d=Object(Le.j)().policyTicketVote,m=null===d||void 0===d?void 0:d.summariespagesize,p=Mo(i,m,c),h=p.proposal,b=p.loading,v=p.threadParentID,E=p.error,y=p.isCurrentUserProposalAuthor,g=p.commentSectionIds,O=p.hasAuthorUpdates,_=p.singleThreadRootId,j=p.onSubmitComment,w=p.currentUser,S=p.commentsError,T=p.commentsLoading,C=p.onReloadProposalDetails,k=p.billingStatusChangeUsername,I=p.commentsFinishedLoading,x=(w||{}).userid,R=!!v,N=Object(Tn.h)(h),P=null===h||void 0===h?void 0:h.state,L=kn(N||i),D=L.voteSummary,U=L.proposalSummary,V=!Object(Tn.v)(h)&&!Object(Tn.I)(D)&&!Object(Tn.q)(U),M=Object(Tn.s)(U),F=P===jn.fb,B=!V&&!M,G=function(e){return Object(Tn.q)(e)?"This proposal has been abandoned. No additional changes are allowed.":Object(Tn.B)(e)?"Voting has finished for this proposal. No additional changes are allowed.":Object(Tn.w)(e)?"This proposal has been censored. No additional changes are allowed.":Object(Tn.x)(e)?"Proposal is closed. No additional changes are allowed.":Object(Tn.y)(e)?"Proposal is completed. No additional changes are allowed.":""}(U),Y=Object(l.d)().javascriptEnabled,H=Object(Le.i)(),Q=H.isPaid,q=H.paywallEnabled,z=q&&!Q,K=Object(Le.f)(),J=Object(A.a)(K,2)[1],X=Object(r.useState)(!0),Z=Object(A.a)(X,2),$=Z[0],ee=Z[1],te=h&&!$&&!b,ne=(u||R)&&te&&I;Object(Le.n)("commentArea",ne);var re=Object(r.useCallback)((function(){return o.push("/user/signup")}),[o]),ae=Object(r.useCallback)((function(e){var t=e.comment,n=e.title,r="",a="";return n&&(a=jn.Bb,r=JSON.stringify({title:n})),j({comment:t,token:N,parentID:0,state:P,extraData:r,extraDataHint:a})}),[j,P,N]),oe=Object(Le.h)(),ie=Object(A.a)(oe,2),ce=ie[0],ue=ie[1],se=Object(r.useCallback)((function(){ce(Fi.a,{id:"commentsLoginModal",onLoggedIn:function(){F&&C(),ue()}})}),[ce,ue,F,C]),le=a.a.memo((function(e){var t=e.sectionId;return a.a.createElement(Ii,{recordAuthorID:null===h||void 0===h?void 0:h.userid,recordAuthorUsername:null===h||void 0===h?void 0:h.username,recordToken:i,recordTokenFull:N,threadParentID:v,readOnly:B,areAuthorUpdatesAllowed:M,proposalState:P,recordBaseLink:Object(Tn.e)(h,Y),handleOpenModal:ce,handleCloseModal:ue,handleOpenLoginModal:se,paywallMissing:z,identityError:J,sectionId:t})})),fe=!R&&!B&&(!M||M&&y)&&!!N,de=Object(r.useMemo)((function(){return a.a.createElement(a.a.Fragment,null,B&&a.a.createElement(f.Message,{kind:"blocked",title:"Comments are not allowed"},G),!(w&&R)&&!B&&a.a.createElement(f.Card,{className:Object(f.classNames)("container",Co.a.commentsHeaderWrapper)},a.a.createElement(Nn.a,{fallback:a.a.createElement(Mi,{onLoginClick:se,onSignupClick:re})},a.a.createElement(Ai,null,!Q&&q&&w&&a.a.createElement(f.Message,{kind:"error"},a.a.createElement(f.P,null,"You won't be able to submit comments or proposals before paying the paywall, please visit your"," ",a.a.createElement(Pe.a,{to:"/user/".concat(x,"?tab=credits")},"account")," ","page to correct this problem.")),!!J&&a.a.createElement(Di.a,null),M&&!y&&a.a.createElement(f.Message,null,"Replies & upvotes/downvotes are allowed only on the latest author update thread.")),fe&&a.a.createElement(qo,{persistKey:"commenting-on-".concat(i),onSubmit:ae,disableSubmit:!!J||z,isAuthorUpdate:M&&y,hasAuthorUpdates:O}))),S&&a.a.createElement(f.Message,{kind:"error",className:"margin-top-m"},S.toString()),_?a.a.createElement(le,{sectionId:_}):a.a.createElement(a.a.Fragment,null,null===g||void 0===g?void 0:g.map((function(e){return a.a.createElement(le,{key:e,sectionId:e})}))))}),[g,_,M,w,se,ae,J,y,Q,R,re,q,z,B,G,i,x,S,O,fe]);return Object(r.useEffect)((function(){var e=setTimeout((function(){ee(!1)}),500);return function(){return clearTimeout(e)}}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(t,{className:Co.a.customMain,fillScreen:!0},h&&a.a.createElement(s.a,{breakpoint:"/record/:token"}),h&&a.a.createElement(Bi,{title:h.name}),a.a.createElement(lr,null,a.a.createElement(Rr,null,E?a.a.createElement(f.Message,{kind:"error"},E.toString()):te?a.a.createElement(a.a.Fragment,null,a.a.createElement(So,{proposal:h,billingStatusChangeUsername:k,extended:!0,collapseBodyContent:!!v}),(null===h||void 0===h?void 0:h.legacytoken)&&a.a.createElement(f.Message,{className:"margin-bottom-m"},a.a.createElement(f.P,null,"This proposal was submitted to a previous version of politeia that saved all proposal data to a git repo. The original proposal data, including all proposal signatures and timestamps, can be found"," ",a.a.createElement(f.Link,{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/decred-proposals/mainnet/tree/master/".concat(h.legacytoken)},"here"),".")),!T&&I&&de):a.a.createElement(Ni,{extended:!0})))))})),Wi=function(){return a.a.createElement(me.a,{topBannerHeight:0},(function(e){return a.a.createElement(Gi,e)}))},Yi=n(666),Hi=n.n(Yi),Qi="Under Review",qi="Approved",zi="Rejected",Ki="Abandoned",Ji=(Li={},Object(c.a)(Li,Qi,[jn.Cb,jn.Eb,jn.Hb]),Object(c.a)(Li,qi,[jn.Db]),Object(c.a)(Li,zi,[jn.Ib]),Object(c.a)(Li,Ki,[jn.Gb]),Li),Xi=n(667),Zi=n.n(Xi),$i=function(){return a.a.createElement("div",{className:"loader",key:0},"Loading ...")},ec=function(){return a.a.createElement("span",null,"Empty")},tc=function(e){var t=e.items,n=e.initialLoad,o=e.isLoading,i=e.loadingPlaceholder,c=e.onFetchMore,u=e.hasMore,s=e.emptyListComponent,l=e.renderItem,f=e.pageStart,d=e.minInitialLoading,m=!t.length,p=Object(r.useState)(!0),h=Object(A.a)(p,2),b=h[0],v=h[1];return Object(r.useEffect)((function(){var e;return d>0&&b&&(e=setTimeout((function(){v(!1)}),d)),function(){clearTimeout(e)}}),[d,b]),b?a.a.createElement("div",{"data-testid":"lazy-list"},a.a.createElement("div",{"data-testid":"loading-placeholders"},i)):a.a.createElement("div",{"data-testid":"lazy-list"},a.a.createElement(Zi.a,{pageStart:f,loadMore:c,initialLoad:n,hasMore:u},t.map(l)),o?a.a.createElement("div",{"data-testid":"loading-placeholders"},i):m?s:null)};tc.defaultProps={initialLoad:!0,emptyListComponent:a.a.createElement(ec,null),loadingPlaceholder:a.a.createElement($i,null),pageStart:0,minInitialLoading:1250};var nc,rc=tc,ac=function(e){for(var t=e.numberOfItems,n=e.placeholder,r=[],o=0;o<t;o++)r.push(a.a.createElement(n,{key:"placeholder-".concat(o)}));return a.a.createElement(a.a.Fragment,null,r)},oc=function(e,t,n,r){var a=t[n].map((function(e){return Object(De.C)(e)})),o=e&&a&&function(e,t){return t.map((function(t){return e[t]})).filter(Boolean)}(e,a)||[];return r&&(o=o.filter((function(e){return e.status!==jn.ib}))),[o,a]},ic=function(){return"No records available"},cc=function(e){var t=e.children,n=e.records,o=e.tabLabels,i=e.recordTokensByTab,c=e.renderRecord,u=e.placeholder,s=e.getEmptyMessage,d=void 0===s?ic:s,m=e.onFetchMoreProposals,p=e.onTabChange,h=e.isLoading,b=e.index,v=e.onSetIndex,E=e.hasMore,y=e.filterCensored,g=e.pageSize,O=e.sort,_=Object(r.useState)(g),j=Object(A.a)(_,2),w=j[0],S=j[1],T=Object(l.d)().javascriptEnabled;Object(r.useEffect)((function(){p&&p(b)}),[b,p]);var C=o[b],k=Object(r.useMemo)((function(){return oc(n,i,C,y)}),[i,n,C,y,O]),I=Object(A.a)(k,2),x=I[0],R=I[1],N=Object(r.useMemo)((function(){return o.map((function(e){return a.a.createElement(f.Tab,{key:"tab-".concat(e),label:e})}))}),[o]),P=Object(r.useMemo)((function(){return o.map((function(e){return a.a.createElement(f.Tab,{key:"tab2-".concat(e),label:a.a.createElement("a",{href:"".concat(jn.J,"/?tab=").concat(e.toLowerCase())},e)})}))}),[o]),L=Object(r.useMemo)((function(){return a.a.createElement(ac,{numberOfItems:w,placeholder:u})}),[w,u]);return t({tabs:a.a.createElement(f.Tabs,{onSelectTab:v,activeTabIndex:b,mode:"horizontal"},T?N:P),content:a.a.createElement(rc,{items:x,renderItem:c,onFetchMore:function(){R&&!h&&(m&&m(),S(g))},hasMore:!!E,emptyListComponent:a.a.createElement(Ce,null,d(C)),isLoading:h,loadingPlaceholder:L})})},uc=function(e){return(null===e||void 0===e?void 0:e.forceLoad)?a.a.createElement(Ni,null):a.a.createElement(So,{key:e.censorshiprecord.token,proposal:e})},sc=[Qi,qi,zi,Ki],lc=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Sidebar,i=e.Main,u=Object(Le.l)("tab",0,sc),s=Object(A.a)(u,2),l=s[0],f=s[1],d=Ji[sc[l]],m=Object(X.a)(),p=ve()(m,["policyTicketVote","summariespagesize"]),h=ve()(m,["policyTicketVote","inventorypagesize"]),b=Object(Le.k)({fetchRfpLinks:!0,fetchVoteSummaries:!0,statuses:d,proposalPageSize:p,inventoryPageSize:h,fetchVoteSummary:!0,fetchProposalSummary:!0}),v=b.proposals,E=b.proposalsTokens,y=b.loading,g=b.verifying,O=b.onRestartMachine,_=b.hasMoreProposals,j=b.onFetchMoreProposals,w=Object(r.useCallback)((function(e){var t;return(t={},Object(c.a)(t,Qi,"No proposals under review"),Object(c.a)(t,qi,"No proposals approved"),Object(c.a)(t,zi,"No proposals rejected"),Object(c.a)(t,Ki,"No proposals archived or censored"),t)[e]}),[]),S=Object(r.useMemo)((function(){return Object(Tn.K)(Ji,E)}),[E]),T=Object(r.useCallback)((function(e){var r=e.tabs,c=e.content;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:jn.A},r)),a.a.createElement(o,null),a.a.createElement(i,{className:Hi.a.customMain},a.a.createElement(Rr,null,E&&c)))}),[E]);return a.a.createElement(cc,{records:v,tabLabels:sc,recordTokensByTab:S,renderRecord:uc,displayTabCount:!!E,placeholder:Ni,getEmptyMessage:w,index:l,onSetIndex:function(e){f(e),O(Ji[sc[e]])},onFetchMoreProposals:j,dropdownTabsForMobile:!0,hasMore:_,pageSize:p,isLoading:y||g},T)},fc=function(){return a.a.createElement(me.a,{disableScrollToTop:!0},(function(e){return a.a.createElement(lc,e)}))},dc=n(208),mc=n(213),pc="Unreviewed",hc="Censored",bc=(nc={},Object(c.a)(nc,pc,[jn.kb]),Object(c.a)(nc,hc,[jn.ib]),nc),vc=function(e){return a.a.createElement(So,{key:e.censorshiprecord.token,proposal:e})},Ec=[pc,hc],yc=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=Object(mc.a)("tab",0,Ec),u=Object(A.a)(i,2),s=u[0],l=u[1],f=Object(X.a)().policyTicketVote,d=f.summariespagesize,m=f.inventorypagesize,p=Object(dc.a)({fetchRfpLinks:!0,fetchVoteSummary:!1,fetchProposalSummary:!0,unvetted:!0,proposalStatus:bc[Ec[s]],proposalPageSize:d,inventoryPageSize:m}),h=p.proposals,b=p.proposalsTokens,v=p.loading,E=p.verifying,y=p.onRestartMachine,g=p.hasMoreProposals,O=p.onFetchMoreProposals,_=Object(r.useCallback)((function(e){var t;return(t={},Object(c.a)(t,pc,"No proposals unreviewed"),Object(c.a)(t,hc,"No proposals censored"),t)[e]}),[]);return a.a.createElement(cc,{records:h,tabLabels:Ec,recordTokensByTab:Object(Tn.K)(bc,b,!0),renderRecord:vc,displayTabCount:!!b,placeholder:Ni,index:s,onSetIndex:function(e){l(e),y(bc[Ec[e]])},onFetchMoreProposals:O,dropdownTabsForMobile:!0,hasMore:g,pageSize:d,isLoading:v||E,getEmptyMessage:_},(function(e){var r=e.tabs,i=e.content;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:jn.z},r)),a.a.createElement(o,{fillScreen:!0},a.a.createElement(Rr,null,a.a.createElement(lr,null,b&&i))))}))},gc=function(){return a.a.createElement(me.a,{disableScrollToTop:!0},(function(e){return a.a.createElement(yc,e)}))},Oc=function(){var e=Object(f.useTheme)().theme,t=Object(f.getThemeProperty)(e,"card-background"),n=Object(f.getThemeProperty)(e,"dimmed-card-background");return a.a.createElement(Un.a,{height:420,width:800,speed:2,primaryColor:t,secondaryColor:n},a.a.createElement("rect",{x:"0",y:"10",width:"800",height:"40"}),a.a.createElement("rect",{x:"0",y:"75",width:"800",height:"1"}),a.a.createElement("rect",{x:"0",y:"100",width:"800",height:"150"}),a.a.createElement("rect",{x:"0",y:"280",width:"800",height:"1"}),a.a.createElement("rect",{x:"0",y:"310",width:"130",height:"14"}),a.a.createElement("rect",{x:"150",y:"310",width:"130",height:"14"}),a.a.createElement("rect",{x:"500",y:"360",width:"140",height:"40"}),a.a.createElement("rect",{x:"650",y:"360",width:"140",height:"40"}))},_c=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3)]).then(n.bind(null,1264))})),jc=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(Oc,null)},a.a.createElement(_c,e))},wc=n(59),Sc=n(209);var Tc=function(){var e={onSubmitProposal:Object(d.b)(B.Bb),currentUser:Object(m.c)().currentUser},t=e.onSubmitProposal,n=(e.currentUser||{}).userid,r=Object(wc.a)(),o=r.isPaid,i=r.paywallEnabled,c=Object(Sc.a)(),u=Object(A.a)(c,2)[1];return a.a.createElement(f.Card,{className:"container"},a.a.createElement(Ai,null,!o&&i&&a.a.createElement(f.Message,{kind:"error"},a.a.createElement(f.P,null,"You won't be able to submit comments or proposals before paying the paywall, please visit your"," ",a.a.createElement(Pe.a,{to:"/user/".concat(n,"?tab=credits")},"account")," page to correct this problem.")),!!u&&a.a.createElement(Di.a,null)),a.a.createElement(jc,{disableSubmit:i&&!o||!!u,onSubmit:t}))},Cc=n(214),kc=n(363),Ic=n.n(kc),xc=Object(h.a)((function(e){var t=e.show,n=e.onClose,r=e.drafts,o=e.history;return a.a.createElement(f.Modal,{show:t,onClose:n,style:{width:"600px"}},a.a.createElement(f.H3,{className:Ic.a.modalTitle},"My Drafts"),a.a.createElement("div",{className:"margin-bottom-m margin-top-m"},r.map((function(e){return a.a.createElement(f.Card,{className:Ic.a.draftWrapper,onClick:(t=e.draftId,function(){n(),o.push("/record/new?draft=".concat(t))})},e.type===jn.zb?a.a.createElement(Xt,null,a.a.createElement(rn,null),a.a.createElement("span",{className:Ic.a.draftTitleRfp},e.name)):a.a.createElement(Xt,null,e.name),a.a.createElement(Kt,{event:"",timestamp:e.timestamp}));var t}))))})),Rc=function(){var e=Object(Le.h)(),t=Object(A.a)(e,2),n=t[0],o=t[1],i=Object(Cc.a)().draftProposals,c=Object(r.useMemo)((function(){return i?Object.values(i).filter((function(e){return!!e.draftId})):[]}),[i]),u=Object(r.useCallback)((function(){n(xc,{onClose:o,drafts:c})}),[n,o,c]);return c.length>0&&a.a.createElement(f.Button,{kind:"secondary",onClick:u,"data-testid":"proposal-new-draft-button"},"Drafts")},Nc=function(){return a.a.createElement(me.a,{topBannerHeight:90},(function(e){var t=e.TopBanner,n=e.PageDetails,r=e.Main;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Create Proposal",actionsContent:a.a.createElement(Rc,null)})),a.a.createElement(r,{fillScreen:!0},a.a.createElement(Tc,null)))}))};var Pc=Object(h.a)((function(e){var t=e.match,n=Mo(mt()("params.token",t),Object(X.a)().policyTicketVote.summariespagesize),r=n.proposal,o=n.loading,i=Object(Tn.A)(r),c={onEditProposal:Object(d.b)(B.p),currentUser:Object(m.c)().currentUser},u=c.onEditProposal,s=(c.currentUser||{}).userid,l=Object(wc.a)(),p=l.isPaid,h=l.paywallEnabled,b=Object(Sc.a)(),v=Object(A.a)(b,2)[1],E=(null===r||void 0===r?void 0:r.files.filter((function(e){return"index.md"===e.name})).length)>0,y=r?{token:r.censorshiprecord.token,name:r.name,type:r&&r.linkby?jn.zb:r.linkto?jn.Ab:jn.yb,rfpDeadline:r.linkby&&Object(Ct.f)(r.linkby),rfpLink:r.linkto,description:Object(Tn.d)(r.files),files:Object(De.k)(r.files),amount:r.amount?"".concat(Ct.h.format(r.amount)):void 0,startDate:r.startDate&&Object(Ct.f)(r.startDate),endDate:r.endDate&&Object(Ct.f)(r.endDate),domain:r.domain}:null;return a.a.createElement(f.Card,{className:"container"},a.a.createElement(Ai,null,!p&&h&&a.a.createElement(f.Message,{kind:"error"},a.a.createElement(f.P,null,"You won't be able to submit comments or proposals before paying the paywall, please visit your"," ",a.a.createElement(Pe.a,{to:"/user/".concat(s,"?tab=credits")},"account")," page to correct this problem.")),!!v&&a.a.createElement(Di.a,null)),!o&&r&&E?a.a.createElement(jc,{initialValues:y,onSubmit:u,isPublic:i}):a.a.createElement(Oc,null))})),Lc=Object(h.a)((function(e){var t=e.history,n=e.match,r=Object(f.useMediaQuery)("(max-width: 560px)"),o=function(){return a.a.createElement(f.Button,{type:"button",kind:"secondary",size:r?"sm":"md",onClick:function(){return t.push("/record/".concat(n.params.token))}},"Cancel")};return a.a.createElement(me.a,{topBannerHeight:90},(function(e){var t=e.TopBanner,n=e.PageDetails,r=e.Main;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Edit Proposal",actionsContent:a.a.createElement(o,null)})),a.a.createElement(r,{fillScreen:!0},a.a.createElement(Pc,null)))}))})),Ac=function(e){var t=e.match,n=Object(X.a)().policyTicketVote.summariespagesize,r=Mo(mt()("params.token",t),n),o=r.proposal,i=r.loading,c=r.error,u=o?Object(Tn.d)(o.files):null;return i||c?null:a.a.createElement("div",null,a.a.createElement("pre",{className:Object(f.classNames)("markdown-body",Rn.a.rawMarkdownPre)},u))},Dc=Object(h.a)((function(e){return a.a.createElement(Ac,e)})),Uc=n(317);function Vc(){Vc=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Mc=function(e){var t=e.show,n=e.onClose,o=e.validationSchema,i=e.onChangeUsername,c=Object(r.useState)(""),u=Object(A.a)(c,2),s=u[0],l=u[1],d=!!s,m=function(){var e=Object(L.a)(Vc().mark((function e(t,n){var r,a,o;return Vc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,a=n.setSubmitting,o=n.setFieldError,e.prev=1,e.next=4,i(t);case 4:r(),a(!1),l(t.newUsername),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a(!1),o("global",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){l("")}),[t]);var p=Object(f.useTheme)().theme,h=Object(f.getThemeProperty)(p,"success-icon-background-color"),b=Object(f.getThemeProperty)(p,"success-icon-checkmark-color");return a.a.createElement(f.Modal,{title:d?"Username successfully changed":"Change Username",iconComponent:d&&a.a.createElement(f.Icon,{type:"checkmark",size:26,iconColor:b,backgroundColor:h}),show:t,onClose:n},!d&&a.a.createElement(F.a,{initialValues:{newUsername:"",password:""},onSubmit:m,loading:!o,validationSchema:o},(function(e){var t=e.Form,n=e.Actions,r=e.ErrorMessage,o=e.values,i=e.handleChange,c=e.handleBlur,u=e.handleSubmit,s=e.isSubmitting,l=e.errors,d=e.touched,m=o.newUsername&&o.password&&Object(De.u)(l);return a.a.createElement(t,{onSubmit:u},l&&l.global&&a.a.createElement(r,null,l.global.toString()),a.a.createElement(f.TextInput,{label:"New Username",id:"newUsername",type:"text",autoComplete:"username",value:o.newUsername,onChange:i,onBlur:c,error:d.newUsername&&l.newUsername}),a.a.createElement(f.TextInput,{label:"Password",id:"password",type:"password",autoComplete:"current-password",value:o.password,onChange:i,onBlur:c,error:d.password&&l.password}),a.a.createElement(n,{className:"no-padding-bottom"},a.a.createElement(f.Button,{loading:s,kind:m?"primary":"disabled",type:"submit"},"Change Username")))})),d&&a.a.createElement(a.a.Fragment,null,'Your username was successfully changed! Now your username is "'.concat(s,'". '),a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:n},"Ok"))))},Fc=n(668),Bc=n.n(Fc),Gc=a.a.memo((function(e){var t=e.draft,n=e.onDelete,r=t.name,o=t.draftId,i=t.timestamp,c=t.type;function u(){n(o)}return a.a.createElement(a.a.Fragment,null,a.a.createElement(En,null,(function(e){var t=e.Event,n=e.Title,s=e.Header,l=e.Subtitle,f=e.Edit,d=e.Status;return a.a.createElement(a.a.Fragment,null,a.a.createElement(s,{disableMobileView:!0,title:a.a.createElement(n,{id:"proposal-title-".concat(o),truncate:!0,linesBeforeTruncate:2,url:"/record/new?draft=".concat(o)},r),status:a.a.createElement(d,{disableMobileView:!0},a.a.createElement("button",{onClick:u,className:Bc.a.deleteDraft},"\xd7")),isRfp:c===jn.zb,edit:a.a.createElement(f,{url:"/record/new?draft=".concat(o)}),subtitle:a.a.createElement(l,null,a.a.createElement(t,{keepOnMobile:!0,event:"edited",timestamp:i}))}))})))})),Wc=function(){var e=Object(Cc.a)(),t=e.draftProposals,n=e.onDeleteDraftProposal,r=t?Object.values(t).filter((function(e){return!!e.draftId})):[],o=Object(Be.a)(),i=Object(A.a)(o,2),c=i[0],u=i[1];return a.a.createElement(a.a.Fragment,null,r.length?r.map((function(e){return a.a.createElement(Gc,{key:"draft-".concat(e.draftId),onDelete:(t=e.draftId,function(){var e;c(sr.a,{title:"Delete draft proposal",message:"Are you sure you want to delete this draft?",successTitle:"Draft proposal deleted",successMessage:a.a.createElement(f.Text,null,"The draft proposal has been successfully deleted!"),onClose:u,onSubmit:(e=t,function(){n(e)})})}),draft:e});var t})):a.a.createElement(Ce,null,"No drafts available"))};function Yc(){Yc=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Hc=function(e){var t=Object(r.useState)(!1),n=Object(A.a)(t,2),o=n[0],i=n[1],c=e.userID,u=Object(X.a)().policyTicketVote.summariespagesize,s=Object(Cc.b)({proposalPageSize:u,userID:c}),l=s.proposals,f=s.loading,d=s.numOfUserProposals,m=s.onFetchMoreProposals,p=l?l.length:0;function h(){return(h=Object(L.a)(Yc().mark((function e(){var t,n;return Yc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=l&&!!l.length&&l[l.length-1],n=t&&t.censorshiprecord.token,i(!1),!n){e.next=7;break}return e.next=7,m();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var b=l.length,v=b===d;Object(r.useEffect)((function(){i(!v||b<d)}),[b,d,v]);var E=d-p,y=E>u?u:E;return a.a.createElement(lr,null,a.a.createElement(Rr,null,a.a.createElement(rc,{items:l||[],renderItem:function(e){return a.a.createElement(So,{key:e.censorshiprecord.token,proposal:e})},onFetchMore:function(){return h.apply(this,arguments)},hasMore:o,isLoading:f,emptyListComponent:a.a.createElement(Ce,null,"No proposals available"),loadingPlaceholder:a.a.createElement(Dn,{placeholder:Ni,numberOfItems:y||3})})))},Qc=n(69),qc=Object(r.createContext)(),zc=function(){return Object(r.useContext)(qc)},Kc=function(e){var t=e.children,n=function(){var e=Object(d.b)(B.Gb),t=Object(d.b)(B.jb),n=Object(d.c)(J.c),a=Object(r.useMemo)((function(){return n&&n.find((function(e){return Object(Qc.b)(Yr()(2),Yr()(3))(e.status)}))}),[n]);return{onRejectInvoice:Object(r.useCallback)((function(t){return function(n){return e(t.censorshiprecord.token,5,t.version,n)}}),[e]),onApproveInvoice:Object(r.useCallback)((function(t){return function(){return e(t.censorshiprecord.token,6,t.version)}}),[e]),onDisputeInvoice:Object(r.useCallback)((function(t){return function(){return e(t.censorshiprecord.token,4,t.version)}}),[e]),onPayApprovedInvoices:t,nextInvoice:a}}(),o=n.onRejectInvoice,i=n.onApproveInvoice,c=n.onDisputeInvoice,u=n.onPayApprovedInvoices,s=n.nextInvoice,l=Object(Be.a)(),m=Object(A.a)(l,2),p=m[0],h=m[1];return a.a.createElement(qc.Provider,{value:{onReject:function(e){p(ur,{title:"Reject ".concat(fo(e)),reasonLabel:"Reject reason",subject:"rejectInvoice",onSubmit:o(e),successTitle:"Invoice censored",successMessage:a.a.createElement(f.Text,null,"The invoice has been successfully rejected!"),onClose:h})},onApprove:function(e){p(sr.a,{title:"Approve ".concat(fo(e)),message:"Are you sure you want to approve this invoice?",onSubmit:i(e),successTitle:"Invoice approved",successMessage:a.a.createElement(f.Text,null,"The invoice has been successfully approved!"),onClose:h})},onDispute:function(e){p(sr.a,{title:"Dispute ".concat(fo(e)),message:"Are you sure you want to dispute this invoice?",onSubmit:c(e),successTitle:"Invoice on dispute",successMessage:a.a.createElement(f.Text,null,"The invoice has been successfully disputed!"),onClose:h})},onPay:function(){p(sr.a,{title:"Pay approved invoices",message:"Are you sure you want to set all of these approved invoices to paid?",onSubmit:u,successTitle:"Inovices paid",successMessage:a.a.createElement(f.Text,null,"The invoices have been successfully updated!"),onClose:h})},nextInvoice:s}},t)},Jc=function(e){var t=e.invoice,n=e.extended;if(!zc())throw Error("Admin invoices actions requires an 'AdminActionsProvider' on a higher level of the component tree. ");var o=Object(f.useMediaQuery)("(max-width: 560px)"),i=zc(),c=i.onApprove,u=i.onReject,s=i.onDispute,l=i.nextInvoice,d=Object(r.useCallback)((function(e){return function(){e(t)}}),[t]),m=a.a.createElement(f.Button,{onClick:d(c)},"Approve"),p=a.a.createElement(f.Button,{onClick:d(u),className:Object(f.classNames)("margin-right-s"),noBorder:!0,kind:"secondary"},"Reject"),h=a.a.createElement(f.Button,{onClick:d(s),className:Object(f.classNames)("margin-right-s"),noBorder:!0,kind:"secondary"},"Dispute");return po(t)?a.a.createElement(Pr,null,a.a.createElement("div",{className:"justify-right margin-top-m"},o?a.a.createElement(f.Dropdown,{title:"Actions",className:"margin-right-l"},a.a.createElement(f.DropdownItem,null,m),a.a.createElement(f.DropdownItem,null,p),a.a.createElement(f.DropdownItem,null,h)):a.a.createElement(a.a.Fragment,null,p,h,m))):n&&l?a.a.createElement(Pr,null,a.a.createElement(Pe.a,{to:l.censorshiprecord.token},"Go to next invoice: ",fo(l))):null},Xc=function(e){switch(e.status){case 2:case 3:return{type:"blackTime",text:"Waiting for review"};case 4:return{type:"bluePending",text:"On dispute"};case 5:return{type:"grayNegative",text:"Rejected"};case 6:return{type:"yellowTime",text:"Waiting payment"};case 7:return{type:"greenCheck",text:"Paid"}}},Zc=function(e){var t=e.invoice,n=e.isAuthor,o=e.isPublicMode,i=e.extended,c=e.approvedProposalsError,s=e.approvedProposals,l=t.censorshiprecord,d=t.file,m=t.input,p=t.status,h=t.timestamp,b=t.userid,v=t.username,E=t.version,y=t.payout,g=Object(f.useMediaQuery)("(max-width: 560px)"),O=Object(f.useTheme)().themeName,_=n&&function(e){return 2===e||3===e||4===e}(p),j=l&&l.token,w="/invoices/".concat(j),S=m&&m.contractorname,T=m&&m.contractorlocation,C=m&&m.contractorrate,k=m&&m.contractorcontact,I=m&&m.paymentaddress,x=m&&m.exchangerate,R=ho(t),N=y&&y.expensetotal/100,P=y&&y.total/100,L=y&&Object(Ct.a)(y.dcrtotal),A=i&&E>1,D=E>1&&!i&&!g,U=O===f.DEFAULT_DARK_THEME_NAME,V=Object(r.useMemo)((function(){return(d||[]).filter((function(e){return!e.mime.includes("text/")}))}),[d]);return a.a.createElement(En,null,(function(e){var n,r=e.Author,l=e.Event,d=e.Row,m=e.Title,p=e.Header,y=e.Subtitle,O=e.Status,M=e.Edit,F=e.RecordToken;return a.a.createElement(a.a.Fragment,null,a.a.createElement(p,{title:a.a.createElement(m,{id:"invoice-title-".concat(j),truncate:!0,linesBeforeTruncate:2,url:i?"":w},fo(t)),subtitle:a.a.createElement(y,null,a.a.createElement(r,{username:v,url:"/user/".concat(b),id:b}),a.a.createElement(l,{event:"edited",timestamp:h}),D&&a.a.createElement(f.Text,{id:"invoice-".concat(j,"-version"),className:Object(f.classNames)($a.a.version),color:"gray",truncate:!0},"version ".concat(E)),A&&a.a.createElement(_o,{className:Object(f.classNames)($a.a.versionPicker,U&&$a.a.darkVersionPicker),version:E,token:j,proposals:s})),status:a.a.createElement(O,null,a.a.createElement(f.StatusTag,Object.assign({className:$a.a.statusTag},Xc(t)))),edit:_&&a.a.createElement(M,{url:"/invoices/".concat(j,"/edit")})}),i&&a.a.createElement(a.a.Fragment,null,a.a.createElement(d,{topMarginSize:"s"},a.a.createElement(F,{token:j})),a.a.createElement(d,{justify:"space-between",className:$a.a.topDetails},a.a.createElement("div",{className:$a.a.field},a.a.createElement(f.Text,{weight:"semibold"},S),a.a.createElement(f.Text,null,T),a.a.createElement(f.Text,null,k)),!o&&a.a.createElement(eo,{label:"Pay to Address:",value:I,renderValue:function(e){return a.a.createElement(f.CopyableText,{id:"invoice-payment-address",truncate:!0,tooltipPlacement:"bottom"},e)}})),!o&&a.a.createElement(d,{justify:"space-between",className:$a.a.topDetails},a.a.createElement(eo,{label:"Total hours:",value:"".concat((n=R,n%1!==0?R.toFixed(2):R),"h")}),a.a.createElement(eo,{label:"Contractor Rate:",value:Ct.h.format(C/100)}),a.a.createElement(eo,{label:"Total expenses:",value:Ct.h.format(N)}),a.a.createElement(eo,{label:"Exchange rate:",value:Ct.h.format(x/100)}),a.a.createElement(eo,{label:"Amount:",value:Ct.h.format(P)}),a.a.createElement(eo,{label:"Amount (dcr):",value:L})),i&&!!V.length&&a.a.createElement(d,{className:$a.a.filesRow,justify:"left",topMarginSize:"s"},a.a.createElement(Fr.c,{value:V,onClick:function(){return null},viewOnly:!0})),a.a.createElement(Pa,{value:t&&t.input.lineitems&&t.input.lineitems.map((function(e){var t=s.find((function(t){return t.censorshiprecord.token===e.proposaltoken}));return Object(u.a)(Object(u.a)({},e),{},{proposaltoken:t?t.name:""})})),readOnly:!0,isMobile:g,userRate:C/100,proposals:s||[],proposalsError:c})),a.a.createElement(Jc,{invoice:t,extended:i}))}))},$c=n(60),eu=n(84);function tu(){var e=Object(d.c)(J.c),t=Object(d.b)(B.r),n=Object($c.a)(t),r=Object(A.a)(n,2),a=r[0],o=r[1];return Object(eu.a)(o),{loading:a,invoices:e}}var nu=n(669),ru=n.n(nu),au=function(e){var t=e.userID,n=tu(),o=n.loading,i=n.invoices.filter((function(e){return e.userid===t})),c=Object(r.useCallback)((function(e){return a.a.createElement(Zc,{key:"invoice-".concat(e.censorshiprecord.token),invoice:e})}),[]),u=Object(r.useCallback)((function(e){return e.map(c)}),[c]),s=Object(r.useCallback)((function(e){return!e.length&&a.a.createElement(Ce,null,"There are no invoices submitted by this user.")}),[]);return a.a.createElement(Kc,null,o&&a.a.createElement("div",{className:ru.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})),!o&&a.a.createElement(a.a.Fragment,null,s(i),u(i)))},ou=n(113),iu=n(112),cu=n(27);function uu(){var e=Object(d.b)(B.db),t=Object(d.b)(B.vb),n=Object(d.b)(B.k),a=Object(d.c)(J.G),o=Object(r.useState)(Object(d.d)(Qn.c)),i=Object(A.a)(o,1)[0];return Object(r.useEffect)((function(){a||e()}),[e,a]),Object(r.useEffect)((function(){return i}),[i]),{onLoadDraftInvoices:e,draftInvoices:a,onSaveDraftInvoice:t,onDeleteDraftInvoice:n}}var su=n(670),lu=n.n(su),fu=a.a.memo((function(e){var t=e.draft,n=e.onDelete,r=t.draftId,o=t.timestamp;function i(){n(r)}return a.a.createElement(a.a.Fragment,null,a.a.createElement(En,null,(function(e){var n=e.Event,c=e.Title,u=e.Header,s=e.Subtitle,l=e.Edit,d=e.Status;return a.a.createElement(a.a.Fragment,null,a.a.createElement(u,{disableMobileView:!0,title:a.a.createElement(c,{id:"invoice-".concat(r),truncate:!0,linesBeforeTruncate:2,url:"/invoices/new?draft=".concat(r)},mo(t)),status:a.a.createElement(d,null,a.a.createElement(f.Button,{kind:"secondary",size:"sm",className:lu.a.deleteDraft,onClick:i},"Delete")),edit:a.a.createElement(l,{url:"/invoices/new?draft=".concat(r)}),subtitle:a.a.createElement(s,null,a.a.createElement(n,{keepOnMobile:!0,event:"edited",timestamp:o}))}))})))})),du=function(){var e=uu(),t=e.draftInvoices,n=e.onDeleteDraftInvoice,r=Object(Be.a)(),o=Object(A.a)(r,2),i=o[0],c=o[1],u=function(e){return function(){n(e)}},s=t?Object.values(t).filter((function(e){return!!e.draftId})).sort((function(e,t){return t.timestamp-e.timestamp})):[];return a.a.createElement("div",{className:"margin-top-m"},s.length?s.map((function(e){return a.a.createElement(fu,{key:"draft-".concat(e.draftId),onDelete:(t=e.draftId,function(){i(sr.a,{title:"Delete draft invoice",message:"Are you sure you want to delete this draft?",successTitle:"Draft invoice deleted",successMessage:a.a.createElement(f.Text,null,"The draft invoice has been successfully deleted!"),onClose:c,onSubmit:u(t)})}),draft:e});var t})):a.a.createElement(Ce,null,"No drafts available"))};function mu(){var e=Object(d.b)(B.cb),t=Object(d.b)(B.ub),n=Object(d.b)(B.j),a=Object(d.c)(J.F),o=Object(r.useState)(Object(d.d)(Qn.b)),i=Object(A.a)(o,1)[0];return Object(r.useEffect)((function(){e()}),[e]),Object(r.useEffect)((function(){return i}),[i]),{onLoadDraftDccs:e,draftDccs:a,onSaveDraftDcc:t,onDeleteDraftDcc:n}}var pu=n(37),hu=n(671),bu=n.n(hu),vu=a.a.memo((function(e){var t=e.draft,n=e.onDelete,r=Object(Le.j)().policy.supporteddomains,o=Object(De.l)(r),i=t.id,c=t.timestamp,u=t.statement,s=t.domain,l=Object(De.p)(o,s);function d(){n(i)}return a.a.createElement(a.a.Fragment,null,a.a.createElement(En,null,(function(e){var n=e.Event,r=e.Title,o=e.Header,m=e.Subtitle,p=e.Edit,h=e.Status;return a.a.createElement(a.a.Fragment,null,a.a.createElement(o,{disableMobileView:!0,title:a.a.createElement(r,{id:"dcc-".concat(i),truncate:!0,linesBeforeTruncate:2,url:"/dccs/new?draft=".concat(i)},Object(pu.q)(t)),status:a.a.createElement(h,null,a.a.createElement(f.Button,{kind:"secondary",size:"sm",className:bu.a.deleteDraft,onClick:d},"Delete")),edit:a.a.createElement(p,{url:"/dccs/new?draft=".concat(i)}),subtitle:a.a.createElement(m,null,a.a.createElement(n,{keepOnMobile:!0,event:"edited",timestamp:c}),s&&a.a.createElement(f.Text,{id:"draft-domain"},l),u&&a.a.createElement(f.Text,{truncate:!0,id:"draft-statement"},Object(pu.r)(u)))}))})))})),Eu=function(){var e=mu(),t=e.draftDccs,n=e.onDeleteDraftDcc,r=Object(Be.a)(),o=Object(A.a)(r,2),i=o[0],c=o[1],u=t?Object.values(t).filter((function(e){return!!e.id})).sort((function(e,t){return t.timestamp-e.timestamp})):[];return a.a.createElement("div",{className:"margin-top-m"},u.length?u.map((function(e){return a.a.createElement(vu,{key:"draft-".concat(e.id),onDelete:(t=e.id,function(){i(sr.a,{title:"Delete draft DCC",message:"Are you sure you want to delete this draft?",successTitle:"Draft DCC deleted",successMessage:a.a.createElement(f.Text,null,"The draft DCC has been successfully deleted!"),onClose:c,onSubmit:Object(pu.g)(t,n)})}),draft:e});var t})):a.a.createElement(Ce,null,"No drafts available"))},yu=function(){var e=Object(r.useState)(0),t=Object(A.a)(e,2),n=t[0],o=t[1];return a.a.createElement(f.Tabs,{mode:"dropdown",onSelectTab:o,activeTabIndex:n},a.a.createElement(f.Tab,{label:"Invoices"},a.a.createElement(du,null)),a.a.createElement(f.Tab,{label:"DCCs"},a.a.createElement(Eu,null)))};function gu(){return a.a.createElement("input",{type:"text",autoComplete:"username",style:{visibility:"hidden"}})}function Ou(){Ou=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var _u=function(e){var t=e.show,n=e.onClose,o=e.validationSchema,i=e.onChangePassword,c=Object(r.useState)(!1),u=Object(A.a)(c,2),s=u[0],l=u[1],d=function(){var e=Object(L.a)(Ou().mark((function e(t,n){var r,a,o;return Ou().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,a=n.setSubmitting,o=n.setFieldError,e.prev=1,e.next=4,i(t);case 4:r(),a(!1),l(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a(!1),o("global",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){l(!1)}),[t]);var m=Object(f.useTheme)().theme,p=Object(f.getThemeProperty)(m,"success-icon-background-color"),h=Object(f.getThemeProperty)(m,"success-icon-checkmark-color");return a.a.createElement(f.Modal,{title:s?"Password successfully changed":"Change Password",iconComponent:s&&a.a.createElement(f.Icon,{type:"checkmark",size:26,iconColor:h,backgroundColor:p}),show:t,onClose:n},!s&&a.a.createElement(F.a,{initialValues:{existingPassword:"",newPassword:"",newPasswordVerify:""},onSubmit:d,loading:!o,validationSchema:o},(function(e){var t=e.Form,n=e.Actions,r=e.ErrorMessage,o=e.values,i=e.handleChange,c=e.handleBlur,u=e.handleSubmit,s=e.isSubmitting,l=e.errors,d=e.touched,m=o.existingPassword&&o.newPassword&&o.newPasswordVerify&&Object(De.u)(l);return a.a.createElement(t,{onSubmit:u},l&&l.global&&a.a.createElement(r,null,l.global.toString()),a.a.createElement(gu,null),a.a.createElement(f.TextInput,{label:"Current Password",id:"existingPassword",type:"password",autoComplete:"current-password",value:o.existingPassword,onChange:i,onBlur:c,error:d.existingPassword&&l.existingPassword}),a.a.createElement(f.TextInput,{label:"New Password",id:"newPassword",type:"password",autoComplete:"new-password",value:o.newPassword,onChange:i,onBlur:c,error:d.newPassword&&l.newPassword}),a.a.createElement(f.TextInput,{label:"Verify Password",id:"newPasswordVerify",type:"password",autoComplete:"new-password",value:o.newPasswordVerify,onChange:i,onBlur:c,error:d.newPasswordVerify&&l.newPasswordVerify}),a.a.createElement(n,{className:"no-padding-bottom"},a.a.createElement(f.Button,{loading:s,kind:m?"primary":"disabled",type:"submit"},"Change Password")))})),s&&a.a.createElement(a.a.Fragment,null,"Your password was successfully changed!",a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:n},"Ok"))))},ju=function(){return G.f().shape({reason:G.h().required("Required")})},wu=function(e){var t=e.minpasswordlength;return G.f().shape({newPassword:G.h().min(t,Object($.j)("password",t)).required("Required"),newPasswordVerify:G.h().oneOf([G.g("newPassword")],"Passwords must match").required("Required"),existingPassword:G.h().min(t,Object($.j)("password",t)).required("Required")})},Su=function(e){var t=e.reduce((function(e,t){return e+t}),"^[");return new RegExp(t+="]*$")},Tu=function(e){var t=e.minusernamelength,n=e.usernamesupportedchars,r=e.maxusernamelength,a=e.minpasswordlength;return G.f().shape({newUsername:G.h().matches(Su(n),{excludeEmptyString:!0},{message:"Invalid username"}).min(t,Object($.j)("username",t)).max(r,Object($.h)("username",r)).required("Required"),password:G.h().min(a,Object($.j)("password",a)).required("Required")})},Cu={IDENTITY:"Identity",ACCOUNT:"Account",PREFERENCES:"Preferences",CREDITS:"Credits",SUBMITTED_PROPOSALS:"Submitted Proposals",DRAFT_PROPOSALS:"Draft Proposals",INVOICES:"Invoices",DRAFTS:"Drafts",MANAGE_DCC:"Manage Contractor",PROPOSALS_OWNED:"Proposals Owned",TOTP:"Two-Factor Authentication"},ku=function(e){return(new Date).getTime()>1e3*e};function Iu(e,t){var n=Object(d.b)(B.ib),a=Object(r.useMemo)((function(){return J.Qb(e)}),[e]),o=Object(d.c)(a);return[Object(r.useCallback)((function(r){n(t,e,r)}),[t,e,n]),o]}var xu=n(211);function Ru(){return{onChangePassword:Object(d.b)(B.sb),validationSchema:Object(xu.a)(wu)}}var Nu=n(184),Pu=n.n(Nu),Lu=n(88),Au=n.n(Lu),Du=function(e){var t=e.label,n=e.info,r=e.alignLabelCenter,o=e.className,i=e.noMargin,c=e.error,u=e.isLoading,s=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement("div",{className:Object(f.classNames)(Pu.a.sectionWrapper,"margin-bottom-s",o,i&&"no-margin-bottom")},a.a.createElement("span",{className:Object(f.classNames)(Pu.a.label,s&&Pu.a.darkLabel),style:r&&{alignSelf:"center"}},t,":"),u?a.a.createElement(f.Spinner,{invert:!0}):c?a.a.createElement(f.P,{className:Pu.a.infoError},c.toString()):Au()(n)?a.a.createElement("span",{className:Pu.a.noInfo},"No information provided"):a.a.createElement("span",{className:Pu.a.info},n))},Uu=n(270),Vu=n.n(Uu),Mu=function(e){var t=e.isadmin;return a.a.createElement(Du,{className:"no-margin-top",label:"Admin",info:t?"Yes":"No"})},Fu=function(e){var t=e.address;return a.a.createElement(Du,{label:"Address",info:a.a.createElement("span",{style:{wordBreak:"break-word"}},t)})},Bu=function(e){var t,n=e.token;return a.a.createElement(Du,{label:"Verified email",info:(t=n,t?"No":"Yes")})},Gu=function(e){var t=e.onClick;return a.a.createElement(Du,{label:"Password",alignLabelCenter:!0,info:a.a.createElement(f.Button,{size:"sm",onClick:t},"Change Password")})},Wu=function(e){var t=e.amount,n=e.timestamp;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Du,{label:"Amount",info:"".concat(Object(Ct.a)(t)," DCR")}),a.a.createElement(Du,{label:"Pay after",info:Object(Ct.e)(n)}))},Yu=n(148),Hu=function(){var e=Object(Yu.a)(),t=e.onLogout,n=e.isCMS,r=function(){return t(n,!0)},o=Object(Be.a)(),i=Object(A.a)(o,2),c=i[0],u=i[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Du,{label:"Personal data",info:a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Text,{color:"gray"},"You can clear all of your user data stored in the browser, including your identity and draft records. Make a backup copy of your identity key if you are choosing to do so. You will be logged out after doing this."),a.a.createElement(f.Button,{size:"sm",className:"margin-top-s margin-bottom-m",onClick:function(){c(sr.a,{onClose:u,onSubmit:r,title:"Clear user data"})}},"Clear data"))}))},Qu=function(e){var t=e.userid,n=e.newuserverificationtoken,r=e.newuserverificationexpiry,o=e.newuserpaywalladdress,i=e.newuserpaywallamount,c=e.newuserpaywalltxnotbefore,u=e.failedloginattempts,s=e.resetpasswordverificationtoken,d=e.resetpasswordverificationexpiry,m=e.updatekeyverificationtoken,p=e.updatekeyverificationexpiry,h=e.islocked,b=e.isdeactivated,v=e.isadmin,E=e.isUserPageOwner,y=Object(l.d)().enablePaywall,g=Iu(jn.D,t),O=Object(A.a)(g,2),_=O[0],j=O[1],w=Iu(jn.H,t),S=Object(A.a)(w,2),T=S[0],C=S[1],k=Iu(jn.E,t),I=Object(A.a)(k,2),x=I[0],R=I[1],N=Iu(jn.F,t),P=Object(A.a)(N,2),L=P[0],D=P[1],U=Iu(jn.G,t),V=Object(A.a)(U,2),M=V[0],F=V[1],B=j||C,G=Ru(),W=G.onChangePassword,Y=G.validationSchema,H=Object(Be.a)(),Q=Object(A.a)(H,2),q=Q[0],z=Q[1],K=function(){q(ur,{subject:"deactivateOrReactivateUser",onSubmit:b?T:_,validationSchema:ju,onClose:z,successTitle:b?"User activated":"User deactivated",successMessage:a.a.createElement(f.Text,null,"The user has been successfully"," ",b?"activated":"deactivated",".")})};return a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},a.a.createElement(Mu,{isadmin:v}),a.a.createElement(Bu,{token:n}),E&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Gu,{onClick:function(){q(_u,{onChangePassword:W,validationSchema:Y,onClose:z})}}),a.a.createElement(Hu,null)),y&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Fu,{address:o}),a.a.createElement(Wu,{amount:i,timestamp:c})),a.a.createElement(f.Text,{weight:"semibold",className:Vu.a.subtitle},"Security"),a.a.createElement(Du,{label:"Failed login attempts",info:u}),a.a.createElement(Du,{noMargin:!0,label:"Locked",info:h?"Yes":"No"}),b?a.a.createElement(f.Button,{"data-testid":"user-activate",className:"margin-top-s",loading:B,size:"sm",onClick:K},"Reactivate"):a.a.createElement(f.Button,{"data-testid":"user-deactivate",className:"margin-top-s",loading:B,size:"sm",onClick:K},"Deactivate"),s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Text,{color:"grayDark",weight:"semibold",className:Vu.a.subtitle},"Password"),a.a.createElement(Du,{label:"Reset password token",info:s}),a.a.createElement(Du,{noMargin:!0,label:"Expires",info:ku(d)?a.a.createElement("span",null,"Expired"):Object(Ct.e)(d)}),!ku(d)&&a.a.createElement(f.Button,{loading:D,size:"sm",className:"margin-top-s",onClick:function(){q(ur,{subject:"expireResetPasswordToken",onSubmit:L,validationSchema:ju,onClose:z,successTitle:"Reset password token marked as expired",successMessage:a.a.createElement(f.Text,null,"The reset password token has been successfully marked as expired.")})}},"Mark as expired")),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Text,{color:"grayDark",weight:"semibold",className:Vu.a.subtitle},"Verification token"),a.a.createElement(Du,{label:"Verification token",info:n}),a.a.createElement(Du,{noMargin:!0,label:"Expires",info:ku(r)?a.a.createElement("span",null,"Expired"):Object(Ct.e)(r)}),!ku(r)&&a.a.createElement(f.Button,{loading:R,className:"margin-top-s",size:"sm",onClick:function(){q(ur,{subject:"expireVerificationToken",onSubmit:x,validationSchema:ju,onClose:z,successTitle:"Verification token marked as expired",successMessage:a.a.createElement(f.Text,null,"The verification token has been successfully marked as expired.")})}},"Mark as expired")),m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Text,{color:"grayDark",weight:"semibold",className:Vu.a.subtitle},"Update key"),a.a.createElement(Du,{label:"Update key token",info:m}),a.a.createElement(Du,{noMargin:!0,label:"Expires",info:ku(p)?a.a.createElement("span",null,"Expired"):Object(Ct.e)(p)}),!ku(p)&&a.a.createElement(f.Button,{loading:F,className:"margin-top-s",size:"sm",onClick:function(){q(ur,{subject:"expireUpdateKey",onSubmit:M,validationSchema:ju,onClose:z,successTitle:"Update key token marked as expired",successMessage:a.a.createElement(f.Text,null,"The update key token has been successfully marked as expired.")})}},"Mark as expired")))},qu=function(e){var t=e.newuserverificationtoken,n=e.newuserpaywalladdress,r=e.newuserpaywallamount,o=e.newuserpaywalltxnotbefore,i=e.isadmin,c=Object(l.d)().enablePaywall,u=Object(Be.a)(),s=Object(A.a)(u,2),d=s[0],m=s[1],p=Ru(),h=p.onChangePassword,b=p.validationSchema;return a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},a.a.createElement(Mu,{isadmin:i}),a.a.createElement(Bu,{token:t}),a.a.createElement(Gu,{onClick:function(){d(_u,{onChangePassword:h,validationSchema:b,onClose:m})}}),a.a.createElement(Hu,null),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Fu,{address:n}),a.a.createElement(Wu,{amount:r,timestamp:o})))},zu=function(e){var t=e.isadmin;return a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},a.a.createElement(Du,{className:"no-margin-top",label:"Admin",info:t?"Yes":"No"}))},Ku=["isAdmin","isUserPageOwner"],Ju=function(e){var t=e.isAdmin,n=e.isUserPageOwner,r=Object(E.a)(e,Ku);return t?a.a.createElement(Qu,Object.assign({isUserPageOwner:n},r)):!t&&n?a.a.createElement(qu,r):a.a.createElement(zu,{isadmin:r.isadmin})},Xu=n(65),Zu=n(58),$u=n.n(Zu),es=function(e){var t=e.isPaid,n=e.isUser,r=e.isAdmin,o=e.openPaywallModal,i=e.isApiRequestingMarkAsPaid,c=e.openMarkAsPaidModal,u=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement("div",{className:$u.a.block},a.a.createElement("div",{className:$u.a.blockDetails},a.a.createElement(f.Text,{className:Object(f.classNames)($u.a.title,u&&$u.a.darkTitle)},"Registration fee"),a.a.createElement(f.Text,{size:"large",className:Object(f.classNames)($u.a.status,"margin-top-xs margin-bottom-xs")},t?"Paid":"Not paid"),!t&&n&&a.a.createElement(f.Button,{className:"margin-top-s",size:"sm",onClick:o},"Pay registration fee"),!t&&r&&a.a.createElement(f.Button,{"data-testid":"mark-paid",className:"margin-top-s",loading:i,size:"sm",onClick:c},"Mark as paid")),a.a.createElement("div",{className:$u.a.description},a.a.createElement(f.P,{className:Object(f.classNames)($u.a.descriptionParagraph,u&&$u.a.darkDescriptionParagraph)},a.a.createElement("b",null,"Registration Fee:")," In order to participate on proposals and to submit your own, Politeia requires a small registration fee of",a.a.createElement("b",null," exactly 0.1 DCR."))))},ts=function(e){var t=e.proposalCredits,n=e.proposalCreditPrice,r=Object(f.useTheme)().themeName===f.DEFAULT_DARK_THEME_NAME;return a.a.createElement("div",{className:Object(f.classNames)($u.a.block,"margin-top-l")},a.a.createElement("div",{className:$u.a.blockDetails},a.a.createElement(f.Text,{className:Object(f.classNames)($u.a.title,r&&$u.a.darkTitle)},"Proposal Credits"),a.a.createElement(f.Text,{size:"large",className:Object(f.classNames)($u.a.status,"margin-top-xs margin-bottom-xs")},t)),a.a.createElement("div",{className:$u.a.description},a.a.createElement(f.P,{className:Object(f.classNames)($u.a.descriptionParagraph,r&&$u.a.darkDescriptionParagraph)},a.a.createElement("b",null,"Proposal credits:")," each proposal submission requires"," ",a.a.createElement("b",null,"1 proposal")," credit which costs"," ",a.a.createElement("b",null,"exactly ",n||.1," DCR"),".")))},ns=function(e){var t=e.amountOfCreditsAddedOnRescan,n=e.errorRescan;return a.a.createElement(a.a.Fragment,null,null!==t&&a.a.createElement(f.Message,{className:"margin-top-s",kind:"success"},"User credits are up to date. ",t," proposal credits were found by the rescan and added to the user account."),n&&a.a.createElement(f.Message,{className:"margin-top-s",kind:"error"},n.toString()))},rs=function(e){var t=e.user,n=t&&t.userid,r=Iu(jn.C,n),o=Object(A.a)(r,2),i=o[0],c=o[1],u=Object(wc.a)(n).isPaid,s=Object(Xu.a)(n),l=s.proposalCredits,d=s.proposalCreditPrice,m=Object(Xu.c)(n),p=m.onRescanUserCredits,h=m.errorRescan,b=m.isLoadingRescan,v=m.amountOfCreditsAddedOnRescan,E=Object(Be.a)(),y=Object(A.a)(E,2),g=y[0],O=y[1];return a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},a.a.createElement(es,{isPaid:u,isAdmin:!0,isUser:!1,isApiRequestingMarkAsPaid:c,openMarkAsPaidModal:function(){g(ur,{subject:"markUserPaywallAsPaid",onSubmit:i,title:"Mark user paywall as paid",successTitle:"Paywall marked as paid",successMessage:"The user paywall was successfully marked as paid!",onClose:O})}}),a.a.createElement(ts,{proposalCredits:l,proposalCreditPrice:d}),a.a.createElement(f.Button,{"data-testid":"rescan-credits",onClick:p,loading:b,className:"margin-top-s",size:"sm"},"Rescan"),a.a.createElement(ns,{amountOfCreditsAddedOnRescan:v,errorRescan:h}))},as=function(e){var t=e.txID,n=Object(m.c)().apiInfo.testnet?"testnet.decred.org":"dcrdata.decred.org";return a.a.createElement(f.Link,{target:"_blank",rel:"noopener noreferrer",className:"use-ellipsis",href:"https://".concat(n,"/tx/").concat(t)},t)},os=["Type","Amount","DCRs Paid","Transaction","Status","Date"],is=["created_by_dbutil","cleared_by_admin"],cs=function(e){return{Type:"fee"===e.type?"Registration Fee":"Credits",Amount:e.numberPurchased,"DCRs Paid":e.price?(e.price*e.numberPurchased).toFixed(1):0,Transaction:is.includes(e.txId)?e.txId:a.a.createElement(as,{txID:e.txId}),Status:e.confirming?a.a.createElement(f.StatusTag,{type:"bluePending",text:"Pending (".concat(e.confirmations,"/").concat(e.paywallConfirmations," confirmations)")}):a.a.createElement(f.StatusTag,{type:"greenCheck",text:"Confirmed"}),Date:"just now"===e.datePurchased?e.datePurchased:Object(Ct.c)(e.datePurchased),timestamp:"just now"===e.datePurchased?99999999999:e.datePurchased}},us=function(e){return e.filter((function(e){return!e.confirming})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{datePurchased:e.datePurchased?Object(Ct.e)(e.datePurchased):"",price:e.price,type:"fee"===e.type?"registration fee":"credits"})}))},ss=function(e){var t=e.children,n=e.data,r=e.fields,o=e.filename,i=e.className;return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:i,onClick:function(){!function(e,t,n){var r=e.reduce((function(e,n){var r="";return t.forEach((function(e){return r+='"'.concat(n[e],'",')})),e+r+"\n"}),""),a=t.reduce((function(e,t){return e+'"'.concat(t,'",')}),""),o=encodeURI("data:text/csv;charset=utf-8,"+a+"\n"+r),i=document.createElement("a");i.setAttribute("href",o),i.setAttribute("download",n),document.getElementById("csv-hidden-div").appendChild(i),i.click()}(n,r,o)}},t),a.a.createElement("div",{id:"csv-hidden-div",style:{display:"none"}}))},ls=function(e){var t,n,r,o=e.proposalCreditPrice,i=e.user,c=i&&i.userid,u=Object(Xu.a)(c),s=u.proposalCreditsPurchases,l=u.proposalPaywallPaymentConfirmations,d=u.proposalPaywallPaymentTxid,m=u.proposalPaywallPaymentAmount,p=Object(wc.a)(c),h=p.paywallTxNotBefore,b=p.paywallAmount,v=p.paywallTxId,E=p.userPaywallStatus,y={datePurchased:h,numberPurchased:1,price:b,txId:v,type:"fee"},g=jn.U===E?[].concat(Object(Z.a)(s),[y]):s,O=Object(X.a)().policy,_=(t=g,n={confirmations:l,paywallConfirmations:O.paywallconfirmations,txID:d,amount:m},r=o,Ko()(["timestamp"],["desc"])(t.map(cs).concat(n&&n.txID?[cs({numberPurchased:Math.round(1*n.amount/(1e8*r)),price:r,txId:n.txID,confirming:!0,confirmations:n.confirmations,paywallConfirmations:n.paywallConfirmations,datePurchased:"just now"})]:[])).map((function(e){return delete e.timestamp,e}))),j=Object(f.useMediaQuery)("(max-width: 560px)");return _&&_.length?a.a.createElement("div",{className:"margin-top-l",style:j?{}:{overflowX:"scroll"}},a.a.createElement(f.Text,{className:"margin-right-xs"},"Credit History"),a.a.createElement(ss,{data:us(g),fields:["numberPurchased","price","txId","datePurchased","type"],filename:"payment_history"},a.a.createElement(f.Link,{style:{cursor:"pointer"}},"Export to csv")),a.a.createElement("div",{className:"margin-top-s"},a.a.createElement(f.Table,{data:_,headers:os}))):null},fs=function(e){var t=e.user,n=t&&t.userid,o=Iu(jn.C,n),i=Object(A.a)(o,2),c=i[0],u=i[1],s=Object(wc.a)(n),l=s.isPaid,d=s.paywallEnabled,m=Object(Xu.a)(n),p=m.proposalCreditPrice,h=m.isApiRequestingUserProposalCredits,b=m.proposalCredits,v=m.toggleCreditsPaymentPolling,E=m.proposalPaymentReceived,y=m.toggleProposalPaymentReceived,g=m.onPollProposalPaywallPayment,O=m.shouldPollPaywallPayment,_=Object(Xu.c)(n),j=_.onRescanUserCredits,w=_.errorRescan,S=_.isLoadingRescan,T=_.amountOfCreditsAddedOnRescan;Object(r.useEffect)((function(){O&&(v(!0),y(!1),g(!1))}),[O,g,v,y]);var C=Object(Xu.d)(t),k=C.handleOpenPaywallModal,I=C.handleOpenBuyCreditsModal,x=Object(Be.a)(),R=Object(A.a)(x,2),N=R[0],P=R[1];return Object(r.useEffect)((function(){E&&(v(!1),y(!1),P())}),[E,v,y,P]),h?a.a.createElement("div",{className:$u.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},a.a.createElement(es,{isPaid:l,isAdmin:!0,isUser:!0,openPaywallModal:k,isApiRequestingMarkAsPaid:u,openMarkAsPaidModal:function(){N(ur,{subject:"markUserPaywallAsPaid",onSubmit:c,title:"Mark user paywall as paid",successTitle:"Paywall marked as paid",successMessage:"The user paywall was successfully marked as paid!",onClose:P})}}),a.a.createElement(ts,{proposalCredits:b,proposalCreditPrice:p}),a.a.createElement("div",{className:$u.a.buttonsWrapper},l&&d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Button,{className:"margin-top-s",size:"sm",onClick:I},"Purchase more"),a.a.createElement(f.Button,{onClick:j,loading:S,className:"margin-top-s",size:"sm"},"Rescan"))),a.a.createElement(ns,{amountOfCreditsAddedOnRescan:T,errorRescan:w}),a.a.createElement(ls,{user:t,proposalCreditPrice:p}))},ds=function(e){var t=e.user,n=t&&t.userid,o=Object(wc.a)(n),i=o.isPaid,c=o.paywallEnabled,u=Object(Xu.a)(n),s=u.proposalCreditPrice,l=u.isApiRequestingUserProposalCredits,d=u.proposalCredits,m=u.toggleCreditsPaymentPolling,p=u.toggleProposalPaymentReceived,h=u.proposalPaymentReceived,b=u.onPollProposalPaywallPayment,v=u.shouldPollPaywallPayment,E=Object(Xu.d)(t),y=E.handleOpenPaywallModal,g=E.handleOpenBuyCreditsModal,O=E.handleCloseModal;return Object(r.useEffect)((function(){v&&(m(!0),p(!1),b(!1))}),[v,b,m,p]),Object(r.useEffect)((function(){h&&(m(!1),O())}),[h,m,O]),l?a.a.createElement("div",{className:$u.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},a.a.createElement(es,{isPaid:i,isAdmin:!1,isUser:!0,openPaywallModal:y}),a.a.createElement(ts,{proposalCredits:d,proposalCreditPrice:s}),i&&c&&a.a.createElement(f.Button,{className:"margin-top-s",size:"sm",onClick:g},"Purchase more"),a.a.createElement(ls,{user:t,proposalCreditPrice:s}))},ms=function(e){var t=e.user,n=t&&t.userid,r=Object(Xu.a)(n),o=r.currentUserID,i=r.isAdmin,c=t&&o===t.userid;return t&&(i||o===t.userid)?i&&!c?a.a.createElement(rs,{user:t}):!i&&c?a.a.createElement(ds,{user:t}):a.a.createElement(fs,{user:t}):a.a.createElement(f.Message,{kind:"error"},"Only admins or the user himself can access this route.")},ps=n(458),hs=n.n(ps);var bs=n(75),vs=n.n(bs),Es=function(e){var t=e.pubkey;return t?a.a.createElement(f.P,{className:"margin-top-s margin-bottom-s"},a.a.createElement(f.Text,{backgroundColor:"blueLighter",monospace:!0},t)):a.a.createElement(f.P,{className:"margin-top-s"},"There isn't an active public key")},ys=Object(r.memo)((function(e){var t=e.identities;return a.a.createElement("ol",{className:Object(f.classNames)(vs.a.identityList,"margin-bottom-s")},t.map((function(e){return a.a.createElement("li",{className:"margin-top-l",key:e.pubkey},a.a.createElement(f.Text,{backgroundColor:"blueLighter",monospace:!0},e.pubkey))})))})),gs=["pastIdentities"];function Os(e){var t=e.pastIdentities,n=Object(E.a)(e,gs);return a.a.createElement(f.Modal,n,a.a.createElement(ys,{full:!0,identities:t}))}var _s=function(e){var t=e.pastIdentities,n=Object(Be.a)(!1),r=Object(A.a)(n,2),o=r[0],i=r[1];return t?a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Text,{weight:"semibold",className:Object(f.classNames)(vs.a.block,vs.a.fieldHeading,"margin-bottom-s","margin-top-l")},"Past public keys"),a.a.createElement(f.P,null,0!==t.length?"List of inactive public keys your account has had in the past.":"This account only had one active public key until now."),0!==t.length&&a.a.createElement(f.Button,{size:"sm",kind:"primary",onClick:function(){o(Os,{onClose:i,title:"Past public keys",pastIdentities:t})}},"Show all")):null},js=function(e){var t=e.id;return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Text,{weight:"semibold",className:Object(f.classNames)(vs.a.block,vs.a.fieldHeading,"margin-bottom-s","margin-top-l")},"User ID"),a.a.createElement(f.P,{className:"margin-bottom-s"},"Unique 16-byte UUID, as defined in"," ",a.a.createElement(f.Link,{href:"https://tools.ietf.org/html/rfc4122",target:"_blank",rel:"nofollow noopener noreferrer"},"RFC 4122"),", used to identify your user."),a.a.createElement(f.Text,{backgroundColor:"blueLighter",monospace:!0},t))},ws=function(e){var t=e.loadingKey,n=e.user,o=n.userid,i=n.identities,c=Object(ou.a)(),u=c.currentUserID,s=c.userPubkey,l=c.keyMismatchAction;Object(r.useEffect)((function(){Object(De.F)(u,s,l)}),[u,s,l]);var d=i&&i.filter((function(e){return e.isactive}))[0],m=d&&d.pubkey,p=i&&i.filter((function(e){return!e.isactive}));return t===jn.Mb?a.a.createElement("div",{className:vs.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(f.Card,{className:"margin-bottom-m",paddingSize:"small"},a.a.createElement(f.Text,{color:"grayDark",weight:"semibold",className:Object(f.classNames)(vs.a.fieldHeading,vs.a.block)},"Public key"),a.a.createElement(Es,{pubkey:m}),a.a.createElement(_s,{pastIdentities:p}),a.a.createElement(js,{id:o}))},Ss=n(672),Ts=n.n(Ss);function Cs(){Cs=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var ks=function(e,t,n){if(e.publicKey!==t)throw new Error(jn.Kb);if(!cu.l(e))throw new Error(jn.r);n(null)},Is=function(e,t){return function(n){var r=n.base64;try{var a=Object(De.r)(r);if(!a||!a.publicKey||!a.secretKey)throw new Error(jn.q);t("publicKey",a.publicKey),t("secretKey",a.secretKey),e(null)}catch(o){console.error(o.stack),e(o)}}},xs=function(e){var t=e.show,n=e.onClose,o=e.validationSchema,i=e.successMessage,c=e.successTitle,u=Object(ou.a)(),s=u.onIdentityImported,l=u.userPubkey,d=u.currentUserID,m=u.keyMismatchAction,p=Object(r.useState)(null),h=Object(A.a)(p,2),b=h[0],v=h[1],E=Object(r.useState)(null),y=Object(A.a)(E,2),g=y[0],O=y[1],_=function(){var e=Object(L.a)(Cs().mark((function e(t,n){var r,a,o;return Cs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,a=n.setSubmitting,o=n.setFieldError,e.prev=1,e.next=4,ks(t,l,v);case 4:return e.next=6,cu.d(d,t).catch((function(){throw new Error(jn.B)}));case 6:r(),O(!0),m(!1),a(!1),s("Successfully imported identity"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a(!1),o("global",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){t||setTimeout((function(){return O(!1)}),500)}),[t]);var j=Object(f.useTheme)().theme,w=Object(f.getThemeProperty)(j,"success-icon-background-color"),S=Object(f.getThemeProperty)(j,"success-icon-checkmark-color");return a.a.createElement(f.Modal,{title:g?c:"Import Identity",show:t,onClose:n,style:{width:"600px"},iconComponent:g&&a.a.createElement(f.Icon,{type:"checkmark",size:26,iconColor:S,backgroundColor:w})},g?a.a.createElement(a.a.Fragment,null,i,a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:n},"Ok"))):a.a.createElement(F.a,{initialValues:{publicKey:"",secretKey:""},onSubmit:_,validationSchema:o},(function(e){var t=e.Form,n=e.Actions,r=e.ErrorMessage,o=e.values,i=e.handleChange,c=e.handleBlur,u=e.setFieldValue,s=e.handleSubmit,l=e.isSubmitting,d=e.errors,m=o.publicKey&&o.secretKey&&Object(De.u)(d)&&!b;return a.a.createElement(t,{onSubmit:s},d&&d.global&&a.a.createElement(r,null,d.global.toString()),b&&a.a.createElement(r,null,b.toString()),a.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},a.a.createElement(Ts.a,{base64:!0,handleFiles:Is(v,u),multipleFiles:!1,fileTypes:"json"},a.a.createElement(f.Button,{type:"button"},"Upload json identity file")),a.a.createElement(f.Text,{className:"margin-top-l margin-bottom-m",color:"grayDark"},"Or paste in your own")),a.a.createElement(f.TextInput,{id:"publicKey",label:"Public key",name:"publicKey",value:o.publicKey,onChange:i,onBlur:c}),a.a.createElement(f.TextInput,{id:"secretKey",label:"Private key",name:"secretKey",value:o.secretKey,onChange:i,onBlur:c}),a.a.createElement(n,{className:"no-padding-bottom"},a.a.createElement(f.Button,{loading:l,kind:m?"primary":"disabled",type:"submit"},"Update Identity")))})))};xs.defaultProps={successTitle:"Identity imported successfully",successMessage:"Your keys were imported successfully"};var Rs=xs,Ns=function(e){var t=e.children,n=e.style,r=e.filename,o=void 0===r?"download.txt":r,i=e.mime,c=void 0===i?"text/plain;charset=utf-8":i,u=e.data;return a.a.createElement("a",{style:n,className:"download-link",href:"data:".concat(c,",").concat(encodeURIComponent(u)),download:o},t)},Ps=function(e){var t=e.keyData;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ns,{style:{marginRight:"1.7rem"},filename:"politeia-pki.json",mime:"application/json;charset=utf-8",data:t},a.a.createElement(f.Button,{size:"sm"},"Download Identity")))};function Ls(){Ls=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var As=Object(h.a)((function(e){var t=e.history,n=e.loadingKey,o=e.user,i=o.userid,c=o.identities,u=Object(ou.a)(),s=u.currentUserEmail,l=u.currentUserID,d=u.userPubkey,m=u.identityImportSuccess,p=u.onUpdateUserKey,h=u.updateUserKeyToken,b=u.keyMismatch,v=u.keyMismatchAction,E=u.shouldAutoVerifyKey;Object(r.useEffect)((function(){Object(De.F)(l,d,v)}),[l,d,v]);var y=c&&c.filter((function(e){return e.isactive}))[0],g=y&&y.pubkey,O=c&&c.filter((function(e){return!e.isactive})),_=Object(r.useCallback)(Object(L.a)(Ls().mark((function e(){return Ls().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(l);case 2:case"end":return e.stop()}}),e)}))),[p,l]),j=Object(r.useState)(),w=Object(A.a)(j,2),S=w[0],T=w[1],C=Object(Be.a)(),k=Object(A.a)(C,2),I=k[0],x=k[1];return Object(r.useEffect)((function(){var e=!0;return function(e){return cu.c(e).then((function(e){return JSON.stringify(e,null,2)}))}(l).then((function(t){e&&T(t)})),function(){return e=!1}}),[l]),n===jn.Mb?a.a.createElement("div",{className:vs.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(f.Card,{className:"margin-bottom-m",paddingSize:"small"},a.a.createElement(f.Text,{weight:"semibold",className:Object(f.classNames)(vs.a.fieldHeading,vs.a.block)},"Public key"),E&&h?a.a.createElement(U,{style:{margin:"1rem 0 1rem 0"},show:!0},a.a.createElement(f.Button,{type:"button",onClick:function(){return t.push("/user/key/verify?verificationtoken=".concat(h))}},"Auto verify key")):b&&!m?a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Message,{className:"margin-top-s",kind:"error"},"Your key is invalid or inexistent. Please create/import one."),a.a.createElement(f.P,{className:"margin-top-s"},"The public key on the Politeia server differs from the key on your browser. This is usually caused from the local data on your browser being cleared or by using a different browser."),a.a.createElement(f.P,{className:"margin-bottom-s"},"You can fix this by importing your old identity, logging in with the proper browser, or by creating a new identity (destroying your old identity)")):a.a.createElement("div",{className:Object(f.classNames)(vs.a.block,"margin-bottom-s","margin-top-s")},a.a.createElement(f.P,null,"Your public and private keys constitute your identity. The private key is used to sign your proposals, comments and any up/down votes on Politeia. You can have only one identity active at a time. Your keys are stored in your browser by default, so if you use Politeia on multiple machines you will need to import your keys before you can participate."),a.a.createElement(Es,{pubkey:g})),a.a.createElement("div",{className:vs.a.buttonsWrapper},a.a.createElement(f.Button,{size:"sm",onClick:function(){I(sr.a,{title:"Create new identity",message:"Are you sure you want to generate a new identity?",onClose:x,onSubmit:_,successTitle:"Create new identity",successMessage:"Your new identity has been requested, please check your email at ".concat(s," to verify and activate it.\n\n      The verification link needs to be open with the same browser that you used to generate this new identity.")})}},"Create new identity"),a.a.createElement(f.Button,{size:"sm",onClick:function(){I(Rs,{onClose:x})}},"Import identity"),a.a.createElement(Ps,{keyData:S})),a.a.createElement(_s,{pastIdentities:O}),a.a.createElement(js,{id:i}))})),Ds=["user"],Us=function(e){var t=e.user,n=Object(E.a)(e,Ds),r=Object(ou.a)().currentUserID;return t&&r===t.userid?a.a.createElement(As,Object.assign({user:t},n)):a.a.createElement(ws,Object.assign({user:t},n))};var Vs=n(271),Ms=n.n(Vs),Fs=function(e){var t=e.user,n={isAdmin:Object(d.c)(J.t),isApiRequestingEditUser:Object(d.c)(J.Q),currentUserID:Object(d.c)(J.s),editUserResponse:Object(d.c)(J.q),editUserError:Object(d.c)(J.I),initialValues:Object(d.c)(J.z),onEditUser:Object(d.b)(B.q)},o=n.currentUserID,i=n.editUserError,c=n.editUserResponse,u=n.isAdmin,s=n.isApiRequestingEditUser,l=n.initialValues,m=n.onEditUser,p=Object(r.useState)(!1),h=Object(A.a)(p,2),b=h[0],v=h[1],E=t&&o===t.userid;return E?a.a.createElement(pe.c,{initialValues:l,onSubmit:function(){v(!0),m.apply(void 0,arguments)},enableReinitialize:!0},(function(e){var t=e.handleSubmit,n=e.setFieldValue,r=e.values,o=function(){v(!1),n.apply(void 0,arguments)};return a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,a.a.createElement(f.Message,{className:Ms.a.marginHorizontal1,kind:"info"},"Currently, only one attempt is made to send each notification email. Politeia will not try to resend an email if, for whatever reason, it cannot be delivered."),a.a.createElement(f.Card,{className:"container margin-top-s"},a.a.createElement(f.H2,null,"Email notifications for my proposals"),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["myproposalnotifications-statuschange"],onChange:function(e){return o("myproposalnotifications-statuschange",e.target.checked)},className:"margin-top-m",id:"1",name:"myproposalnotifications-statuschange",label:"Proposal approved or censored"}),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["myproposalnotifications-votestarted"],onChange:function(e){return o("myproposalnotifications-votestarted",e.target.checked)},className:"margin-top-m",id:"2",name:"myproposalnotifications-votestarted",label:"Voting started for proposal"})),a.a.createElement(f.Card,{className:"container margin-top-s"},a.a.createElement(f.H2,null,"Email notifications for other's proposals"),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["regularproposalnotifications-vetted"],onChange:function(e){return o("regularproposalnotifications-vetted",e.target.checked)},className:"margin-top-m",id:"3",name:"regularproposalnotifications-vetted",label:"New proposal published"}),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["regularproposalnotifications-edited"],onChange:function(e){return o("regularproposalnotifications-edited",e.target.checked)},className:"margin-top-m",id:"4",name:"regularproposalnotifications-edited",label:"Proposal edited"}),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["regularproposalnotifications-votestarted"],onChange:function(e){return o("regularproposalnotifications-votestarted",e.target.checked)},className:"margin-top-m",id:"5",name:"regularproposalnotifications-votestarted",label:"Voting started for proposal"})),u&&E&&a.a.createElement(f.Card,{className:"container margin-top-s"},a.a.createElement(f.H2,null,"Admin email notifications"),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["adminproposalnotifications-new"],onChange:function(e){return o("adminproposalnotifications-new",e.target.checked)},className:"margin-top-m",id:"6",name:"adminproposalnotifications-new",label:"New proposal submitted"}),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["adminproposalnotifications-voteauthorized"],onChange:function(e){return o("adminproposalnotifications-voteauthorized",e.target.checked)},className:"margin-top-m",id:"7",name:"adminproposalnotifications-voteauthorized",label:"Voting authorized for proposal"})),a.a.createElement(f.Card,{className:"container margin-top-s"},a.a.createElement(f.H2,null,"Comment email notifications"),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["commentnotifications-proposal"],onChange:function(e){return o("commentnotifications-proposal",e.target.checked)},className:"margin-top-m",id:"8",name:"commentnotifications-proposal",label:"New comment on your proposal"}),a.a.createElement(pe.a,{component:f.Checkbox,checked:r["commentnotifications-comment"],onChange:function(e){return o("commentnotifications-comment",e.target.checked)},className:"margin-top-m",id:"9",name:"commentnotifications-comment",label:"New comment reply to your comment"})),a.a.createElement(f.Button,{width:195,type:"submit",loading:s,kind:b?"disabled":"primary",className:Object(f.classNames)(Ms.a.submitButton,"margin-bottom-m")},b&&c?a.a.createElement("div",{className:Ms.a.savedIcon},"Saved",a.a.createElement(f.Icon,{type:"checkmark",backgroundColor:"#e6eaed",size:"lg",iconColor:"#8997a5"})):"Save preferences"),b&&i&&a.a.createElement(f.Message,{className:Ms.a.confirmMessage,kind:"error"},i)))})):a.a.createElement(f.Message,{kind:"error"},"Only admins or the user himself can access this route.")},Bs=n(337),Gs=n.n(Bs),Ws=n(311);function Ys(){Ys=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Hs={container:function(e){return Object(u.a)(Object(u.a)({},e),{},{width:"200px",minWidth:"200px"})}},Qs={container:function(e){return Object(u.a)(Object(u.a)({},e),{},{width:"100%",minWidth:"200px"})}},qs=function(e){var t=e.onUpdate,n=e.user,o=n.domain,i=n.contractortype,c=n.userid,u=n.supervisoruserids,s=void 0===u?[]:u,l=n.proposalsowned,d=void 0===l?[]:l,m=Object(Le.j)(),p=m.policy.supporteddomains,h=m.policyTicketVote.summariespagesize,b=Object(De.l)(p),v=Object(r.useState)(!1),E=Object(A.a)(v,2),y=E[0],g=E[1],O=Object(Ws.a)(),_=O.loading,j=O.supervisors,w=O.error,S=function(e,t){var n,r=[],a=[],o=Object(he.a)(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=i.username,u=i.id,s={label:c,value:u};ye()(t,u)?a.push(s):r.push(s)}}catch(l){o.e(l)}finally{o.f()}return{supervisorsOptions:r,initialSupervisorOptions:a}}(j,s),T=S.supervisorsOptions,C=S.initialSupervisorOptions,k=Object(Eo.a)(h),I=k.proposals,x=k.isLoading,R=k.error,N=function(e,t){var n,r=[],a=[],o=Object(he.a)(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,c=i.name,u=i.censorshiprecord.token,s={label:c,value:u};ye()(t,u)?a.push(s):r.push(s)}}catch(l){o.e(l)}finally{o.f()}return{proposalsOptions:r,initialOwnedProposals:a}}(I,d),P=N.proposalsOptions,D=N.initialOwnedProposals,U=Object(r.useCallback)(function(){var e=Object(L.a)(Ys().mark((function e(n,r){var a,o,i;return Ys().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,o=r.setFieldError,i=r.resetForm,e.prev=1,e.next=4,t(c,n.domain,n.type,n.users.map((function(e){return e.value})),n.proposals.map((function(e){return e.value})));case 4:a(!1),g(!0),i(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),o("global",e.t0),a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[t,c]);return a.a.createElement(pe.c,{onSubmit:U,enableReinitialize:!0,initialValues:{domain:o,type:i,users:C,proposals:D}},(function(e){var t=e.values,n=e.setFieldValue,r=e.handleSubmit,o=e.isSubmitting,i=e.dirty,c=e.errors,u=i&&!_&&!x;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:r},c&&c.global&&a.a.createElement(f.Message,{className:Gs.a.errorMessage,kind:"error"},c.global.toString()),a.a.createElement(f.H2,null,"Edit DCC Info"),a.a.createElement("div",{className:"margin-bottom-m margin-top-m"},a.a.createElement(Du,{className:"no-margin-top",label:"Contractor Type",info:a.a.createElement(ke.a,{name:"type",options:je,styles:Hs})}),a.a.createElement(Du,{label:"Domain",info:a.a.createElement(ke.a,{name:"domain",options:b,styles:Hs})}),a.a.createElement(Du,{label:"Supervisors",isLoading:_,info:a.a.createElement(f.Select,{placeholder:"Select Supervisor",value:t.users,onChange:function(e){n("users",e)},isMulti:!0,options:T,styles:Qs}),error:w}),a.a.createElement(Du,{label:"Owned Proposals",error:R,isLoading:x,info:a.a.createElement(f.Select,{placeholder:"Select Proposals",value:t.proposals,onChange:function(e){n("proposals",e)},isMulti:!0,options:P,styles:Qs})})),a.a.createElement(f.Button,{kind:u?"primary":"disabled",loading:o,type:"submit"},y&&!u?"DCC Info Updated \u2713":"Update DCC Info")))}))},zs=function(e){var t=e.contractorType,n=e.domain,r=e.userSupervisors,o=e.proposalsOwned,i=e.showEdit,c=e.onToggleDccEdit,u=e.supervisorsError,s=Object(Le.j)().policyTicketVote.summariespagesize,l=Object(Le.b)(o,s),d=l.proposalsByToken,m=l.isLoading,p=l.error,h=function(e,t){return e?e.map((function(e){return ve()(t,[e,"name"])})):[]}(o,d),b=r.length?r.join(", "):"No supervisors",v=h.length?h.join(", "):"No owned proposals";return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.H2,null,"DCC Info"),a.a.createElement("div",{className:"margin-top-s margin-bottom-s"},a.a.createElement(Du,{label:"Contractor Type",info:t}),a.a.createElement(Du,{label:"Domain",info:n}),a.a.createElement(Du,{label:"Supervisors",info:b,error:u}),a.a.createElement(Du,{label:"Owned Proposals",error:p,isLoading:m,info:v})),i&&a.a.createElement(f.Button,{className:"margin-bottom-m",onClick:c,kind:m?"disabled":"primary"},m?a.a.createElement(f.Spinner,{invert:!0}):"Edit"))},Ks=function(e){var t=e.githubname,n=e.matrixname,r=e.contractorcontact,o=e.contractorname,i=e.contractorlocation,c=e.showGitHubName,u=e.showEdit,s=e.onToggleContractorInfoEdit;return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.H2,null,"Contractor Info"),a.a.createElement("div",{className:"margin-top-s"},a.a.createElement(Du,{label:"Name",info:o}),c&&a.a.createElement(Du,{label:"GitHub Username",info:t}),a.a.createElement(Du,{label:"Matrix Name",info:n}),a.a.createElement(Du,{label:"Location",info:i}),a.a.createElement(Du,{label:"Contact",info:r}),u&&a.a.createElement(f.Button,{onClick:s},"Edit")))},Js=function(e){var t=e.user,n=e.showGitHubName,r=e.requireGitHubName,o=e.hideDccInfo,i=e.hideContractorInfo,c=e.showDccForm,s=e.showContractorInfoForm,l=e.onToggleDccEdit,d=e.onToggleContractorInfoEdit,m=t.domain,p=t.contractortype,h=t.supervisoruserids,b=void 0===h?[]:h,v=Object(Le.q)(),E=v.supervisors,y=v.error,g=Object(Le.j)().policy.supporteddomains,O=Object(De.l)(g);return a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(f.Message,{kind:"warning",className:"margin-bottom-s"},"Update your GitHub Username information"),!o&&a.a.createElement(zs,{contractorType:_e[p],domain:Object(De.p)(O,m),proposalsOwned:t.proposalsowned,userSupervisors:we(E,b),supervisorsError:y,showEdit:c,onToggleDccEdit:l}),!i&&a.a.createElement(Ks,Object(u.a)(Object(u.a)({},t),{},{showGitHubName:n,showEdit:s,onToggleContractorInfoEdit:d})))};Js.defaultProps={showGitHubName:!1,hideDccInfo:!1,hideContractorInfo:!1};var Xs=Js;function Zs(){Zs=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function $s(e){var t=e.onEdit,n=e.user,r=e.onClose,o={matrixname:n.matrixname,githubname:n.githubname,contractorname:n.contractorname,contractorlocation:n.contractorlocation,contractorcontact:n.contractorcontact},i=function(){var e=Object(L.a)(Zs().mark((function e(n,a){var o,i,c;return Zs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.resetForm,i=a.setSubmitting,c=a.setFieldError,e.prev=1,e.next=4,t(n);case 4:i(!1),o(),r(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),i(!1),c("global",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return a.a.createElement(pe.c,{onSubmit:i,initialValues:o},(function(e){var t=e.values,n=e.errors,r=e.handleChange,o=e.handleSubmit,i=e.isSubmitting;return a.a.createElement("form",{onSubmit:o},a.a.createElement(f.H2,null,"Edit Contractor Info"),a.a.createElement("div",{className:Gs.a.editContractor},a.a.createElement(f.TextInput,{label:"Contractor Name",name:"contractorname",id:"contractorname",value:t.contractorname,error:n.contractorname,onChange:r}),a.a.createElement(f.TextInput,{label:"GitHub Username",name:"githubname",id:"githubname",value:t.githubname,error:n.githubname,onChange:r}),a.a.createElement(f.TextInput,{label:"Matrix Name",name:"matrixname",id:"matrixname",value:t.matrixname,error:n.matrixname,onChange:r}),a.a.createElement(f.TextInput,{label:"Contractor Location",name:"contractorlocation",id:"contractorlocation",value:t.contractorlocation,error:n.contractorlocation,onChange:r}),a.a.createElement(f.TextInput,{label:"Contractor Contact",name:"contractorcontact",id:"contractorcontact",value:t.contractorcontact,error:n.contractorcontact,onChange:r})),a.a.createElement(f.Button,{type:"submit",loading:i},"Update Contractor Info"))}))}var el=n(49);function tl(e){var t=Object(d.b)(B.hb),n=Object(d.b)(B.m),r=Object(iu.a)(e),a=r.user,o=r.isAdmin,i=r.loading;return{onUpdateDccInfo:t,onUpdateContractorInfo:n,user:a,isAdmin:o,isDeveloper:Object(el.i)(a),requireGitHubName:Object(el.i)(a)&&Au()(a.githubname),loading:i}}var nl=function(e){var t=e.userID,n=e.isUserPageOwner,o=Object(r.useState)(!0),i=Object(A.a)(o,2),c=i[0],u=i[1],s=tl(t),l=s.user,d=s.isAdmin,m=s.onUpdateDccInfo,p=s.isDeveloper,h=s.onUpdateContractorInfo,b=s.requireGitHubName,v=s.loading,E=Object(r.useState)(d),y=Object(A.a)(E,2),g=y[0],O=y[1],_=function(){return u(!c)},j=n||d,w=d&&!g,S=n&&!c;return a.a.createElement(f.Card,{className:Object(f.classNames)("container","margin-bottom-m")},w&&a.a.createElement("div",{className:"margin-bottom-m"},a.a.createElement(qs,{user:l,onUpdate:m})),!v&&l.isCMS&&a.a.createElement(Xs,{user:l,showGitHubName:p||!Au()(l.githubname),requireGitHubName:b&&n,hideDccInfo:w,hideContractorInfo:S,showDccForm:d,showContractorInfoForm:n&&c,onToggleDccEdit:function(){return O(d&&!g)},onToggleContractorInfoEdit:_,enableEditMode:j}),S&&a.a.createElement($s,{onEdit:h,user:l,onClose:_}))};var rl=n(235),al=n.n(rl),ol=n(459),il=n.n(ol),cl=["Username","Date","Domain","Subdomain","Description","Labor","Expenses","Sub Total"],ul=function(e,t){var n=t.lineitem;return e+n.expenses/100+n.labor/60*t.contractorrate/100},sl=function(e){var t=e.userid,n=e.month,r=e.year,o=e.username,i=e.lineitem,c=i.description,u=i.domain,s=i.subdomain,l=i.labor,f=i.expenses;return f/=100,l=l/60*e.contractorrate/100,{Username:a.a.createElement(Pe.a,{to:"/user/".concat(t)},o),Date:"".concat(n,"/").concat(r),Domain:u,Subdomain:s,Description:c,Labor:Ct.h.format(l),Expenses:Ct.h.format(f),Total:Ct.h.format(l+f)}},ll=function(e){var t=e.monthItems,n=t.map(sl),r=t.reduce(ul,0);return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Table,{headers:cl,data:n,linesPerPage:50}),a.a.createElement(f.H3,{className:al.a.totalText},"Total: ",Ct.h.format(r)))},fl=function(e){var t=e.year,n=e.yearItems,r=il()((function(e){return e.month}),n);return Object.keys(r).reverse().map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.H3,null,jn.I[e-1]," ",t),a.a.createElement(ll,{monthItems:r[e]}))}))},dl=function(e){var t=e.groupedByYearItems;return Object.keys(t).reverse().map((function(e){return a.a.createElement(fl,{year:e,yearItems:t[e]})}))},ml=function(e){var t=e.lineItems;if(0===t.length)return a.a.createElement(f.H3,{className:"margin-top-m"},"No billings for this proposal yet");var n=il()((function(e){return e.year}),t),r=t.map(sl),o=t.reduce(ul,0);return a.a.createElement("div",{className:"margin-top-m"},a.a.createElement(dl,{groupedByYearItems:n}),a.a.createElement(ss,{data:r.map((function(e){var t=e.Username,n=e.Date,r=e.Domain,a=e.Subdomain,o=e.Description,i=e.Labor,c=e.Expenses,u=e.Total;return{Username:t.props.children,Date:n,Domain:r,Subdomain:a,Description:o,Labor:i,Expenses:c,Total:u}})),fields:["Username","Date","Domain","Subdomain","Description","Labor","Expenses","Total"],filename:"proposal_details.csv"},a.a.createElement(f.Link,{className:"cursor-pointer"},"Export All To Csv")),a.a.createElement(f.H3,{className:Object(f.classNames)(al.a.totalText,"margin-top-l")},"Total for this proposal: ",Ct.h.format(o)))},pl=function(e){var t=e.title,n=e.onClick;return a.a.createElement(f.Text,{weight:"bold",size:"large",onClick:n,className:al.a.proposalTitle},t)},hl=function(e){var t=e.token,n=e.title,o=function(e){var t=Object(r.useMemo)((function(){return J.ib(e)}),[e]);return{billingInfo:Object(d.c)(t),isLoading:Object(d.c)(J.X),getProposalBillingInfo:Object(d.b)(B.D)}}(t),i=o.billingInfo,c=o.getProposalBillingInfo,u=Object(r.useState)(!1),s=Object(A.a)(u,2),l=s[0],m=s[1],p=l&&i,h=l&&!i;return a.a.createElement(f.Card,{paddingSize:"small",className:"margin-bottom-m"},a.a.createElement(pl,{title:n,onClick:function(){i||c(t),m(!l)}}),p&&a.a.createElement(ml,{lineItems:i.lineitems}),h&&a.a.createElement("div",{className:"margin-top-m"},a.a.createElement(f.Spinner,{invert:!0})))},bl=function(e){var t=e.proposalsOwned,n=Object(X.a)().policyTicketVote.summariespagesize,r=Object(Eo.a)(t,n),o=r.proposalsByToken,i=r.isLoading,c=r.error;return(i||Io()(o))&&!c?a.a.createElement("div",{className:al.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})):c?a.a.createElement(f.Message,{kind:"error"},c.toString()):a.a.createElement(a.a.Fragment,null,t?t.map((function(e){return a.a.createElement(hl,{key:e,token:e,title:o[e.trim()].name})})):a.a.createElement(f.H3,null,"No proposals owned"))};function vl(){return{hasTotp:Object(d.c)(J.oc),onSetHasTotp:Object(d.b)(B.Fb)}}var El=n(342),yl=n(161),gl=n.n(yl),Ol=function(e){var t=e.totp,n=void 0===t?{}:t;return e.isAlreadySet?a.a.createElement("div",{className:"margin-bottom-m"},a.a.createElement(f.H2,null,"Two-Factor Authentication"),a.a.createElement(f.P,null,"You have enabled the Two-Factor Authentication in your account.")):a.a.createElement("div",{className:"margin-bottom-m","data-testid":"totp-set-wrapper"},a.a.createElement(f.H2,null,"Set Two-Factor Authentication"),a.a.createElement("div",{className:gl.a.setContainer},a.a.createElement("div",{className:gl.a.qrcode},n.image&&a.a.createElement("img",{src:"data:image/png;base64, ".concat(n.image),alt:n.key})),a.a.createElement("div",{className:gl.a.instructions},a.a.createElement(f.P,null,"You can activate 2FA on your account by following the instructions below. Once you activate 2FA on your account,"," ",a.a.createElement("b",null,"you'll be required to enter your code every time you login.")),a.a.createElement(f.P,null,"You will be able to deactivate the 2FA after you setup the keys."),a.a.createElement(f.P,null,"1 - ",a.a.createElement("b",null,"Save the backup key below"),". If you did not write down or copy this backup key during 2FA setup, there's no way for you to view it later."),a.a.createElement("div",{className:gl.a.copyableKey},n.key&&a.a.createElement(f.CopyableText,{id:"totp-key"},n.key)),a.a.createElement(f.P,null,"2 - Scan the QR Code with a TOTP Authenticator"," ",a.a.createElement("span",{className:gl.a.totpAuthenticators},"(Authy, Google Authenticator, FreeOTP, YubiKey, etc)")),a.a.createElement(f.P,null,"3 - Verify the 6-numbers code given by the authenticator using the input below to activate the 2FA"))))},_l=function(){var e=function(){var e=Object(d.b)(B.Ib),t=Object(d.b)(B.Pb),n=Object(d.c)(J.nc),r=vl().hasTotp,a=Object(Hn.f)({actions:{initial:function(){if(r)c(m,{alreadySet:!0,error:null});else if(!n)return e().then((function(){return c(l)})).catch((function(e){return c(f,e)})),c(p);return c(m,{totp:n})},load:function(){if(n)return c(m,{totp:n})},error:function(e){if(function(e){return 77===(null===e||void 0===e?void 0:e.errorcode)}(e)&&!i.alreadySet)return c(m,{alreadySet:!0,error:null})},done:function(){if(!gi()(n,i.totp))return c(m,{totp:n})}},initialValues:{status:"idle",loading:!0,alreadySet:!1,verifying:!0}}),o=Object(A.a)(a,3),i=o[0],c=o[1],s=o[2],l=s.VERIFY,f=s.REJECT,m=s.RESOLVE,p=s.FETCH;return Object(u.a)(Object(u.a)({},i),{},{onSetTotp:e,onVerifyTotp:t,loading:i.loading||i.verifying})}(),t=e.loading,n=e.totp,r=e.onVerifyTotp,o=e.onSetTotp,i=vl(),c=i.hasTotp,s=i.onSetHasTotp,l=Object(Be.a)(),m=Object(A.a)(l,2),p=m[0],h=m[1],b=function(e,t){return function(){return o(e).then((function(){s(!1),t()}))}},v=function(e,t){return function(){return r(e).then((function(){s(!0),t()}))}};return t&&!c?a.a.createElement("div",{className:"justify-center"},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(f.Card,{paddingSize:"small"},a.a.createElement(Ol,{totp:n,isAlreadySet:c}),a.a.createElement(El.a,{onVerify:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,n){var r={title:"Verify TOTP",message:a.a.createElement(f.P,null,"You are about to activate the 2FA on your account."," ",a.a.createElement("b",null,"Please remember to save the backup key. This key will be used in case you lose access to your TOTP authenticator."," "),"The backup key should be treated the same way you treat a password and should not be stored digitally!"),successTitle:"2FA activated",successMessage:a.a.createElement(f.P,null,a.a.createElement("b",null,"Your account now has the 2FA enabled.")," You'll be required to inform the code generated by the authenticator app everytime you want to perform a login action."),onClose:h,onSubmit:v(t,n)},o={title:"Reset TOTP",message:"You are about to delete the 2FA on your account. Please keep in mind that you will not be required to type the code anymore.",successTitle:"Reset 2FA",successMessage:a.a.createElement("b",null,"You have disabled the 2FA on your account."),onClose:h,onSubmit:b(t,n)};p(sr.a,e?o:r)}}(c),title:c?"Reset 2FA":"Verify Code",buttonLabel:c?"Reset":"Verify"}))},jl=["user"],wl=Object(h.a)((function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=e.Title,u=e.Tabs,s=e.Tab,m=e.match.params.userid,p=Object(ou.a)(),h=p.userPubkey,b=p.identityImportSuccess,v=Object(iu.a)(m),y=v.user,g=v.isAdmin,O=v.currentUserID,_=Object(l.d)(),j=_.recordType,w=_.enablePaywall,S=_.constants,T=S.RECORD_TYPE_INVOICE,C=S.RECORD_TYPE_PROPOSAL,k=y&&O===y.userid,I=y&&(g||O===y.userid),x=y&&y.proposalsowned,R=x&&x.length>0,N=Object(r.useMemo)((function(){return[Cu.IDENTITY,Cu.ACCOUNT,Cu.PREFERENCES,Cu.CREDITS,Cu.SUBMITTED_PROPOSALS,Cu.DRAFT_PROPOSALS,Cu.INVOICES,Cu.DRAFTS,Cu.MANAGE_DCC,Cu.PROPOSALS_OWNED,Cu.TOTP].filter((function(e){return!((t=e)===Cu.PREFERENCES&&!k||!(t!==Cu.CREDITS||I&&w)||t===Cu.MANAGE_DCC&&!I||t===Cu.INVOICES&&!g||t===Cu.DRAFT_PROPOSALS&&!k||t===Cu.DRAFTS&&!k||!(t!==Cu.PROPOSALS_OWNED||k&&R)||t===Cu.TOTP&&!k)&&function(e){return j===T?e!==Cu.SUBMITTED_PROPOSALS&&e!==Cu.DRAFT_PROPOSALS&&e!==Cu.PREFERENCES&&e!==Cu.CREDITS:j!==C||e!==Cu.MANAGE_DCC&&e!==Cu.DRAFTS&&e!==Cu.INVOICES&&e!==Cu.PROPOSALS_OWNED}(e);var t}))}),[k,I,w,g,R,j,T,C]),P=Object(mc.a)("tab",0,N),L=Object(A.a)(P,2),D=L[0],U=L[1],V={username:Object(d.c)(J.C),onChangeUsername:Object(d.b)(B.tb),validationSchema:Object(xu.a)(Tu)},M=V.username,F=V.onChangeUsername,G=V.validationSchema,W=Object(r.useState)(jn.Mb),Y=Object(A.a)(W,2),H=Y[0],Q=Y[1],q=Object(r.useState)(""),z=Object(A.a)(q,2),K=z[0],X=z[1],Z=Object(r.useCallback)((function(e){return Object(cu.a)(O).then((function(){Object(cu.f)(O).then((function(t){e&&(X(t),Q(jn.Lb))})).catch((function(){e&&Q(jn.Lb)}))}))}),[O,X]);Object(r.useEffect)((function(){var e=!0;return(h!==K||b)&&Z(e),function(){return e=!1}}),[Z,h,K,b]);var $=Object(f.useMediaQuery)("(max-width:560px)"),ee=y&&function(e){var t,n=e.user,r=Object(E.a)(e,jl);return t={},Object(c.a)(t,Cu.IDENTITY,a.a.createElement(Us,Object.assign({key:"tab-identity",user:n},r))),Object(c.a)(t,Cu.ACCOUNT,a.a.createElement(Ju,Object.assign({key:"tab-account"},n,r))),Object(c.a)(t,Cu.PREFERENCES,a.a.createElement(Fs,Object.assign({user:n,key:"tab-preferences"},r))),Object(c.a)(t,Cu.CREDITS,a.a.createElement(ms,Object.assign({key:"tab-credits",user:n},r))),Object(c.a)(t,Cu.SUBMITTED_PROPOSALS,a.a.createElement(Hc,{key:"tab-submitted-proposals",userID:n.userid})),Object(c.a)(t,Cu.DRAFT_PROPOSALS,a.a.createElement(Wc,{key:"tab-draft-proposals"})),Object(c.a)(t,Cu.INVOICES,a.a.createElement(au,{userID:n.userid})),Object(c.a)(t,Cu.DRAFTS,a.a.createElement(yu,{key:"tab-invoices"})),Object(c.a)(t,Cu.MANAGE_DCC,a.a.createElement(nl,Object.assign({userID:n.userid},r))),Object(c.a)(t,Cu.PROPOSALS_OWNED,a.a.createElement(bl,{proposalsOwned:n.proposalsowned})),Object(c.a)(t,Cu.TOTP,a.a.createElement(_l,null)),t}({user:y,isAdminOrTheUser:I,isUserPageOwner:k,isAdmin:g,loadingKey:H,pubkey:K})[N[D]],te=Object(r.useMemo)((function(){return a.a.createElement(u,{onSelectTab:U,className:$?"padding-bottom-s":"",activeTabIndex:D,mode:$?"dropdown":"horizontal"},N.map((function(e){return a.a.createElement(s,{key:"tab-".concat(e),label:e})})))}),[N,U,$,D]),ne=Object(Be.a)(),re=Object(A.a)(ne,2),ae=re[0],oe=re[1];return y?a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:a.a.createElement("div",{className:hs.a.titleWrapper},a.a.createElement(i,null,k&&M||y.username),k&&a.a.createElement(f.Link,{href:"#",onClick:function(e){e.preventDefault(),ae(Mc,{validationSchema:G,onChangeUsername:F,onClose:oe})},className:hs.a.titleLink},"Change Username")),subtitle:y.email,actionsContent:null},te)),a.a.createElement(o,{fillScreen:!0,className:"main"},ee)):null})),Sl=function(){return a.a.createElement(me.a,null,(function(e){return a.a.createElement(wl,e)}))},Tl=Object(h.a)((function(e){var t=e.location;return Object(Uc.a)(),a.a.createElement(b.a,null,a.a.createElement(v.a,{key:t.key,classNames:"fade",timeout:300},a.a.createElement(p.a,{location:t},a.a.createElement(_,{path:"/",title:jn.A,exact:!0,component:fc}),it,a.a.createElement(_,{path:"/user/:userid",title:"User Detail",exact:!0,key:"user-detail-route",component:Sl}),a.a.createElement(w,{path:"/admin/records",title:jn.z,exact:!0,component:gc}),a.a.createElement(T,{path:"/record/new",title:"New Proposal",exact:!0,render:Nc}),a.a.createElement(_,{path:"/record/:token",title:"Proposal Detail",exact:!0,component:Wi}),a.a.createElement(_,{path:"/record/:token/raw",title:"Proposal Detail",exact:!0,component:Dc}),a.a.createElement(_,{path:"/record/:token/comments/:commentid",title:"Proposal Detail",exact:!0,component:Wi}),a.a.createElement(T,{path:"/record/:token/edit",title:"Edit Proposal",exact:!0,render:Lc}),a.a.createElement(_,{title:"Page Not Found",path:"*",component:ft}))))})),Cl=function(e){var t=e.name,n=e.label;return a.a.createElement(pe.d,null,(function(e){var r=e.values,o=e.setFieldValue;return a.a.createElement(pe.a,{component:f.Checkbox,checked:ve()(r,t),onChange:function(e){o(t,e.target.checked)},id:"check-".concat(t),name:t,label:n})}))},kl=n(272),Il=n.n(kl),xl=function(e){var t=e.groupName,n=e.options,o=Object(f.useMediaQuery)("(max-width: 760px)"),i=Object(r.useMemo)((function(){return n.map((function(e,n){return a.a.createElement(Cl,{key:"check-".concat(n),name:(r=e.name,"".concat(t,".").concat(r)),label:e.label});var r}))}),[n,t]),c=Object(r.useCallback)((function(e){return a.a.createElement("ul",{className:Il.a.groupList},e.map((function(e,t){return a.a.createElement("li",{key:"list-item-".concat(t),className:Il.a.groupListItem},e)})))}),[]),u=Object(r.useCallback)((function(e){return a.a.createElement(f.Dropdown,{closeOnItemClick:!1,title:"Filter by status",className:Il.a.groupDropdown},e.map((function(e,t){return a.a.createElement(f.DropdownItem,{key:"checkbox-".concat(t),className:Il.a.groupDropdownItem},e)})))}),[]);return o?u(i):c(i)},Rl=n(364),Nl=n.n(Rl),Pl=n(313),Ll=function(e){if(e&&e.year&&e.month)return"".concat(jn.I[e.month-1]," ").concat(e.year);if(e instanceof Array){var t=e[0]?"".concat(jn.I[e[0].month-1]," ").concat(e[0].year):"",n=e[1]?"".concat(jn.I[e[1].month-1]," ").concat(e[1].year):"";return t===n?t:"".concat(t," - ").concat(n)}return"?"},Al=function(e){var t=e.isOpen;return a.a.createElement("div",{className:t?Nl.a.arrowAnchorOpen:Nl.a.arrowAnchor})},Dl=function(e){var t=e.name,n=e.label,o=e.years,i=e.readOnly,c=e.toggleable,u=e.className,s=e.multiChoice,l=Object(r.useState)(!1),d=Object(A.a)(l,2),m=d[0],p=d[1],h=Object(Pl.a)(!1),b=Object(A.a)(h,3),v=b[0],E=b[1],y=b[2],g=function(){v?y():E()};return a.a.createElement(pe.d,null,(function(e){var r=e.setFieldValue,l=e.values,d=e.initialValues;return a.a.createElement("div",{className:u},a.a.createElement("div",{style:{display:"flex"}},c&&a.a.createElement(f.Checkbox,{id:"checkMonth",checked:!m,onChange:function(){var e=!m;p(e),r(t,e?{year:"",month:""}:d[t])}}),a.a.createElement(f.Text,{color:"gray"},n)),m?a.a.createElement("span",{className:"cursor-not-allowed"},"Any"):a.a.createElement(f.DatePicker,{show:v&&!i,isMonthsMode:!0,isRange:s,years:o,value:l[t],lang:jn.I,onChange:function(e,n,a){var o={year:e,month:n};if(e&&n){if(!s)return r(t,{year:e,month:n}),void y();if(l[t].length){var i=Object(Z.a)(l[t]);return i[a]={year:e,month:n},void r(t,i)}if(r(t,[o,o]),1!==a);else y()}else y()}},a.a.createElement("span",{className:Object(f.classNames)(Nl.a.valueWrapper,i&&"cursor-not-allowed"),onClick:g},Ll(l[t]),!i&&a.a.createElement(Al,{isOpen:v}))))}))};Dl.defaultProps={readOnly:!1};var Ul=Dl,Vl=n(185),Ml=n.n(Vl),Fl=n(673),Bl=n.n(Fl),Gl=function(e){var t=e.onChange,n=e.value,o=e.className,i=e.styles,c=Object(r.useState)(""),u=Object(A.a)(c,2),s=u[0],l=u[1],m=function(e,t){var n=Object(d.b)(B.Cb),a=Object(r.useState)(),o=Object(A.a)(a,2),i=o[0],c=o[1],u=Object(r.useMemo)((function(){return J.Gb(e)}),[e]),s=Object(r.useMemo)((function(){return J.Hb(t)}),[t]),l=Object(d.c)(u),f=Object(d.c)(s);return Object(r.useEffect)((function(){e&&!l&&n({email:e}).catch((function(){c(new Error("unable to fetch users"))}))}),[e,l,n]),Object(r.useEffect)((function(){t&&!f&&n({username:t}).catch((function(){c(new Error("unable to fetch users"))}))}),[t,f,n]),{error:i,results:xe()(f,l,"id")}}(s,s).results.map((function(e){return{value:e.id,label:"".concat(e.username," | ").concat(e.email)}}));return a.a.createElement(f.Select,{placeholder:"Search by User",className:Object(f.classNames)(Bl.a.select,o),value:n,onInputChange:function(e){return l(e)},onChange:t,isMulti:!0,options:m,styles:i,isSearchable:!0,noOptionsMessage:function(){return""===s?"Insert a username or email":"No options available"},escapeClearsValue:!0})},Wl=function(){return{date:vo(6),users:[],filters:{all:!0,unreviewed:!1,disputed:!1,approved:!1,rejected:!1,paid:!1}}},Yl=function(e){var t=e.formikProps,n=e.onChange;return Object(r.useEffect)((function(){n(t.values)}),[t.values,n]),null},Hl=function(e){var t=e.formikProps,n=t.values.filters,a=t.setFieldValue,o=n.all,i=n.unreviewed,c=n.disputed,u=n.approved,s=n.rejected,l=n.paid;return Object(r.useEffect)((function(){(i||c||u||s||l)&&a("filters.all",!1)}),[i,c,u,s,l,a]),Object(r.useEffect)((function(){o&&a("filters",Wl().filters)}),[o,a]),null},Ql=function(e){var t=e.onChange,n=e.children,r=e.disableUserFilter,o=e.isAdminPage,i=e.onSubmit,c=void 0===i?function(){}:i;return a.a.createElement(pe.c,{initialValues:Wl(),onSubmit:c},(function(e){var i=e.values,c=e.setFieldValue,u=function(e){return function(t){t&&t.preventDefault(),c("date",vo(e))}},s=[{name:"all",label:"All"},{name:"unreviewed",label:"Unreviewed"},{name:"disputed",label:"Disputed"},{name:"approved",label:"Approved"},{name:"rejected",label:"Rejected"},{name:"paid",label:"Paid"}],l=[].concat(s);return l.push(l.shift()),a.a.createElement(a.a.Fragment,null,a.a.createElement(pe.b,{className:Ml.a.form},a.a.createElement("div",{className:Ml.a.topFilters},a.a.createElement(Ul,{years:lo(),name:"date",label:"By Date",toggleable:!0,multiChoice:!0,className:Ml.a.monthPicker}),a.a.createElement("div",{className:Ml.a.checkboxesWrapper},a.a.createElement(xl,{groupName:"filters",options:o?l:s}))),a.a.createElement("div",{className:Ml.a.presetDates},"Last:",a.a.createElement(f.Link,{onClick:u(3),href:""},"3 months"),a.a.createElement(f.Link,{onClick:u(6),href:""},"6 months"),a.a.createElement(f.Link,{onClick:u(12),href:""},"12 months")),!r&&a.a.createElement(Gl,{onChange:function(e){c("users",e)},className:Ml.a.selector,value:i.users}),a.a.createElement(Yl,{formikProps:e,onChange:t}),a.a.createElement(Hl,{formikProps:e})),n&&n(i))}))},ql=function(e){var t=e.invoices,n=e.children,a=e.filterValues,o=a.date,i=a.filters,c=a.users,u=Object(r.useCallback)(io()((function(e){return o&&o.month&&o.year?("all"===o.month||e.input.month===o.month)&&e.input.year===o.year:e})),[o]),s=Object(r.useCallback)(io()((function(e){if(!o)return e;if(!(o.length&&o.length>1))return e;var n=Object(A.a)(o,2),r=n[0],a=n[1];if(!r||!a)return t;var i=new Date(r.year,r.month).getTime(),c=new Date(a.year,a.month).getTime(),u=new Date(e.input.year,e.input.month).getTime();return u>=i&&u<=c})),[o]),l=Object(r.useCallback)(io()((function(e){return c&&c.length?c.find((function(t){return t.value===e.userid})):e})),[c]),f=Object(r.useCallback)(io()((function(e){if(!i||i.all)return!0;switch(e.status){case 2:case 3:return i.unreviewed;case 4:return i.disputed;case 6:return i.approved;case 5:return i.rejected;case 7:return i.paid;default:return!1}})),[i]),d=no()(f,u,s,l)(t);return n&&n(d)};ql.propTypes={invoices:At.a.array,children:At.a.func.isRequired,filterValues:At.a.object.isRequired},ql.defaultProps={invoices:[]};var zl=ql,Kl=n(674),Jl=n.n(Kl),Xl=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=e.DefaultNewButton,c=function(e){var t=Object(d.c)(J.s),n=e||t,a=Object(r.useMemo)((function(){return J.ob(n)}),[n]),o=Object(d.c)(a),i=Object(d.b)(B.S),c=Object($c.a)(i),u=Object(A.a)(c,2),s=u[0],l=u[1];return Object(eu.a)(l),{loading:s,invoices:o}}(),u=c.loading,s=c.invoices,l=tl(),m=l.requireGitHubName,p=l.user,h=Object(r.useState)({}),b=Object(A.a)(h,2),v=b[0],E=b[1],y=Object(r.useCallback)((function(e){return a.a.createElement(Zc,{key:"invoice-".concat(e.censorshiprecord.token),invoice:e})}),[]),g=Object(r.useCallback)((function(e){E(e)}),[E]),O=Object(r.useCallback)((function(e){return!e.length&&a.a.createElement(Ce,null,s.length?"There are no invoices matching the selected filters":"You don't have any invoices yet")}),[s]),_=Object(r.useCallback)((function(e){return e.map(y)}),[y]);return a.a.createElement(Kc,null,a.a.createElement(t,null,a.a.createElement(n,{title:"My Invoices",actionsContent:a.a.createElement(a.a.Fragment,null,p&&p.proposalsowned&&p.proposalsowned.length>0&&a.a.createElement(Pe.a,{className:"cursor-pointer",to:"/user/".concat(p.userid,"?tab=proposals owned")},"Proposals owned"),a.a.createElement(i,null))},a.a.createElement(Ql,{onChange:g,disableUserFilter:!0}))),a.a.createElement(o,{fillScreen:!0},m&&a.a.createElement(f.Message,{kind:"warning",className:"margin-bottom-m"},"Update your GitHub Username information on Account > Manage Contractor"),u&&a.a.createElement("div",{className:Jl.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})),!u&&v&&a.a.createElement(zl,{invoices:s,filterValues:v},(function(e){return a.a.createElement(a.a.Fragment,null,_(e),O(e))}))))},Zl=function(){return a.a.createElement(me.a,{disableScrollToTop:!0},(function(e){return a.a.createElement(Xl,e)}))},$l=n(623),ef=/[A-z]*\[[0-9]*\]\.[A-z]*/gm,tf=n(323),nf=n.n(tf),rf=function(e){var t=e.values,n=e.setValues,o=e.submitSuccess,i=Object(r.useState)(Object(W.a)("draft")),c=Object(A.a)(i,2),s=c[0],l=c[1],d=uu(),m=d.draftInvoices,p=d.onDeleteDraftInvoice,h=d.onSaveDraftInvoice,b=Object(r.useState)(!1),v=Object(A.a)(b,2),E=v[0],y=v[1],g=Object(r.useState)(!1),O=Object(A.a)(g,2),_=O[0],j=O[1],w=t&&!!t.name&&!_;return Object(r.useEffect)((function(){s&&Object(W.c)("draft",s)}),[s]),Object(r.useEffect)((function(){j(!1)}),[t,j]),Object(r.useEffect)((function(){o&&s&&p(s)}),[o,s,p]),Object(r.useEffect)((function(){var e=!!m&&s&&m[s];if(e){var t=e;n(nf()(t,"timestamp"))}}),[m,s,n]),a.a.createElement(f.Button,{type:"button",kind:E||!w?"disabled":"secondary",loading:E,onClick:function(){var e=h(Object(u.a)({draftId:s},t));s||l(e),y(!0),setTimeout((function(){j(!0),y(!1)}),300)}},_?"Saved \u2713":"Save Draft")},af=function(e){return a.a.createElement(pe.d,null,(function(t){return a.a.createElement(rf,Object(u.a)(Object(u.a)({},e),t))}))},of=n(309),cf=function(e){var t=e.month,n=e.year,o=e.onChange,i=e.name,c=Object(of.a)(t,n),u=Object(A.a)(c,3),s=u[0],l=u[1],d=u[2],m=Object(r.useCallback)((function(e){o(i,e)}),[o,i]);return Object(r.useEffect)((function(){m(s)}),[s,m]),a.a.createElement("div",{style:{display:"grid"}},a.a.createElement(f.Text,{color:"gray"},"Exchange rate"),d?a.a.createElement(f.Text,null,d.toString()):l?a.a.createElement(f.Spinner,{invert:!0}):a.a.createElement(f.Text,null,Ct.h.format(s/100)))},uf=function(e){var t=e.name;return a.a.createElement(pe.d,null,(function(e){var n=e.setFieldValue,r=e.values.date,o=r.month,i=r.year;return a.a.createElement(cf,{month:o,year:i,name:t,onChange:n})}))},sf=n(315),lf=n(314),ff=n(677),df=n.n(ff),mf=["date"];function pf(){pf=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var hf=a.a.memo((function(e){var t=e.values,n=e.handleChange,o=e.handleSubmit,i=e.isSubmitting,s=e.setFieldValue,l=e.setFieldTouched,d=e.setFieldError,m=e.errors,p=e.touched,h=e.isValid,b=e.submitSuccess,v=e.setSessionStorageInvoice,E=e.approvedProposals,y=e.approvedProposalsError,g=e.validateFiles,O=e.requireGitHubName,_=e.isEditing,j=t.files;Object(lf.a)(m&&m.global);var w=h&&!O,S=function(){return a.a.createElement(f.Button,{type:"submit",kind:w?"primary":"disabled",loading:i},"Submit")},T=Object(r.useCallback)((function(e){s("lineitems",e),!_&&v(Object(u.a)(Object(u.a)({},t),{},{lineitems:e}))}),[s,t,v,_]),C=Object(r.useCallback)((function(e){var t=j.concat(e),n=g(t);n&&n.files&&d("global",n.files.join(" ")),s("files",t,!1)}),[s,j,g,d]),k=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];return Object(u.a)(Object(u.a)({},t),{},Object(c.a)({},n,r.replace(ef,n)))}),{})}))}(m.lineitems)}),[m.lineitems]),I=Object(r.useCallback)((function(e){var t=j.filter((function(t){return t.payload!==e.payload}));s("files",t)}),[s,j]),x=function(e){return function(r){l(e,!0),!_&&v(Object(u.a)(Object(u.a)({},t),{},Object(c.a)({},e,r.target.value))),n(r)}};return a.a.createElement("form",{onSubmit:o},m&&m.global&&a.a.createElement(f.Message,{kind:"error",className:"margin-bottom-m"},m.global.toString()),O&&a.a.createElement(f.Message,{kind:"warning",className:"margin-bottom-m"},"Update your GitHub Username information on Account ",">"," Manage Contractor to submit an Invoice"),a.a.createElement("div",{className:"justify-space-between"},a.a.createElement(Ul,{years:lo(),name:"date",label:"Reference month"}),a.a.createElement(uf,{name:"exchangerate"})),a.a.createElement(f.BoxTextInput,{placeholder:"Contractor name",name:"name",tabIndex:1,value:t.name,error:p.name&&m.name,onChange:x("name")}),a.a.createElement(f.BoxTextInput,{placeholder:"Contractor location",name:"location",tabIndex:1,value:t.location,error:p.location&&m.location,onChange:x("location")}),a.a.createElement(f.BoxTextInput,{placeholder:"Contractor contact",name:"contact",tabIndex:1,value:t.contact,error:p.contact&&m.contact,onChange:x("contact")}),a.a.createElement(f.BoxTextInput,{placeholder:"Payment address",name:"address",tabIndex:1,value:t.address,error:p.address&&m.address,onChange:x("address")}),a.a.createElement(f.BoxTextInput,{placeholder:"Contractor rate",name:"rate",type:"number",tabIndex:1,value:t.rate,error:p.rate&&m.rate,onChange:x("rate")}),a.a.createElement($l.a,{label:"Attach files",type:"button",onChange:C}),a.a.createElement(Fr.c,{value:j,onClick:function(){return null},onRemove:I,errorsPerFile:m.files}),a.a.createElement(Pa,{value:t.lineitems,userRate:t.rate,errors:k,onChange:T,proposals:E,proposalsError:y}),a.a.createElement("div",{className:"justify-right"},a.a.createElement(af,{submitSuccess:b}),a.a.createElement(S,null)))})),bf=Object(h.a)((function(e){var t=e.initialValues,n=e.onSubmit,o=e.history,i=e.approvedProposals,c=e.approvedProposalsError,s=e.editMode,l=Object(X.a)().policy,d=Object(r.useState)(!1),m=Object(A.a)(d,2),p=m[0],h=m[1],b=tl(),v=b.user,y=b.loading,g=b.requireGitHubName,O=b.onUpdateContractorInfo,_=Object(r.useMemo)((function(){return function(e,t){var n,r,a,o,i,c,u=e.cmscontactsupportedchars,s=e.cmsnamelocationsupportedchars,l=e.maxlocationlength,f=e.minlocationlength,d=e.mincontactlength,m=e.maxcontactlength,p=e.minnamelength,h=e.maxnamelength,b=e.minlineitemcollength,v=e.maxlineitemcollength,E=e.invoicefieldsupportedchars;return G.f().shape({name:(n=G.h().required("required").min(p).max(h)).matches.apply(n,Object(Z.a)(Object($.l)("Name",s))),location:(r=G.h().min(f).max(l)).matches.apply(r,Object(Z.a)(Object($.l)("Location",s))),contact:(a=G.h().required("required").min(d).max(m)).matches.apply(a,Object(Z.a)(Object($.l)("Contact",u))),rate:G.e().required("required").min(5).max(500).typeError("rate must be a number"),address:G.h().required("required"),lineitems:G.b().of(G.f().shape({type:G.e().required("required").oneOf([1,2,3,4]),domain:(o=G.h().required("required").min(b).max(v)).matches.apply(o,Object(Z.a)(Object($.l)("Domain",E))),subdomain:(i=G.h().required("required").min(b).max(v)).matches.apply(i,Object(Z.a)(Object($.l)("Sub domain",E))),description:(c=G.h().min(b).max(v)).matches.apply(c,Object(Z.a)(Object($.l)("Description",E))),proposaltoken:G.h().optional().oneOf(t,"Proposal token invalid"),labor:G.e().min(0),subuserid:G.h().when("type",(function(e,t){return 4===e?t.required("required"):t})),subrate:G.e().when("type",(function(e,t){return 4===e?t.required("required").min(500,"must be greater or equal to 5").max(5e4,"must be less or equal to 500"):t})),expenses:G.e().min(0)})).min(1),files:G.b()})}(l,[].concat(Object(Z.a)(i.map((function(e){return e.censorshiprecord.token}))),[""]))}),[l,i]),j=Object(r.useMemo)((function(){return function(e){var t=e.validmimetypes,n=e.maximagesize,r=e.maximages;return function(e){var a,o=t.filter((function(e){return e.startsWith("image/")})),i=[],c={files:[]},u=Object(he.a)(e);try{for(u.s();!(a=u.n()).done;){var s=a.value;i.length>r-1||e>r-1?c.files.push(Object($.g)(r)):o.includes(s.mime)?s.mime.startsWith("image/")&&s.size>n?c.files.push(Object($.f)()):i.push(s):c.files.push(Object($.k)(o))}}catch(l){u.e(l)}finally{u.f()}return 0===c.files.length&&delete c.files,c}}(l)}),[l]),w={name:v?v.contractorname:"",location:v?v.contractorlocation:"",contact:v?v.contractorcontact:"",address:"",exchangerate:"",rate:"",date:so(),lineitems:[Object(Sa.e)(l)],files:[]},S=t?Object(u.a)(Object(u.a)({},w),t):w,T=Object(sf.a)("invoice",null),C=Object(A.a)(T,2),k=C[0],I=C[1];null!==k&&(S=Object(u.a)(Object(u.a)({},w),k));var x=_.isValidSync(S),R=Object(r.useCallback)(function(){var e=Object(L.a)(pf().mark((function e(t,r){var a,i,c,s,l,f,d,m,p,b;return pf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.resetForm,i=r.setSubmitting,c=r.setFieldError,e.prev=1,s=t.date,l=s.month,f=s.year,d=Object(E.a)(t,mf),e.next=5,n(Object(u.a)(Object(u.a)({},d),{},{month:l,year:f}));case 5:m=e.sent,p=m||t.token,i(!1),h(!0),b={githubname:v.githubname,matrixname:v.matrixname,contractorname:d.name,contractorlocation:d.location,contractorcontact:d.contact},O(b),o.push("/invoices/".concat(p)),I(null),a(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),i(!1),c("global",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[o,n,I,O,v]);return y?a.a.createElement("div",{className:df.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(pe.c,{onSubmit:R,initialValues:S,isInitialValid:x,validationSchema:_},(function(e){return a.a.createElement(hf,Object(u.a)(Object(u.a)({},e),{},{submitSuccess:p,setSessionStorageInvoice:I,approvedProposals:i,approvedProposalsError:c,validateFiles:j,requireGitHubName:g,isEditing:s}))}))}));var vf=function(){var e=Object(X.a)().policyTicketVote.summariespagesize,t={onSubmitInvoice:Object(d.b)(B.Ab)}.onSubmitInvoice,n=Object(Eo.a)(e),r=n.proposalsNotRFP,o=n.error;return a.a.createElement(f.Card,{className:"container margin-bottom-l"},a.a.createElement(bf,{onSubmit:t,approvedProposals:r,proposalsError:o}))},Ef=function(){return a.a.createElement(me.a,{topBannerHeight:90},(function(e){var t=e.TopBanner,n=e.PageDetails,r=e.Main;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Create Invoice",actionsContent:null})),a.a.createElement(r,{fillScreen:!0},a.a.createElement(vf,null)))}))};function yf(e){var t=Object(r.useMemo)((function(){return J.nb(e)}),[e]),n=Object(d.c)(t),a=Object(d.c)(J.p),o=Object(d.c)(J.ec),i=Object(d.b)(B.A),c=Object(d.b)(B.J),u=Po()(function(e){return e&&e.input&&e.input.lineitems&&no()(ao()((function(e){return e.proposaltoken})),uo.a,io()((function(e){return""!==e})))(e.input.lineitems)}(n))(Ro()(o)),s=!Io()(u),l={status:"idle",loading:!0},f=Object(Hn.f)({actions:{initial:function(){return!n||n&&!n.payout?(i(e).then((function(){return h(E)})).catch((function(e){return h(y,e)})),h(v)):h(E)},load:function(){if(n&&!s)return h(E)},verify:function(){return n&&s&&c({tokens:u,fetchVoteSummary:!1,fetchProposalSummary:!1}).then((function(){return h(E)})).catch((function(e){return h(y,e)})),h(g,{invoice:n,proposals:Ir()(o)})},done:function(){if(!Yr()(p.invoice,n))return h(O,l)}},initialValues:l}),m=Object(A.a)(f,3),p=m[0],h=m[1],b=m[2],v=b.FETCH,E=b.VERIFY,y=b.REJECT,g=b.RESOLVE,O=b.RETRY;return{invoice:p.invoice,loading:p.loading||p.verifying,proposals:p.proposals,proposalsError:p.error,currentUser:a}}var gf=function(e){var t=e.primaryColor,n=e.secondaryColor,r=e.yOffset,o=e.extended;return a.a.createElement(Un.a,{height:o?300:170,width:400,speed:2,primaryColor:t,secondaryColor:n},a.a.createElement("rect",{x:"0",y:"0",width:"180",height:"10"}),a.a.createElement("rect",{x:"0",y:"20",width:"360",height:"20"}),a.a.createElement("rect",{x:"0",y:"60",width:"80",height:"20"}),o&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"100",width:"20",height:"14"}),a.a.createElement("rect",{x:"30",y:"100",width:"400",height:"14"}),a.a.createElement("rect",{x:"0",y:"134",width:"400",height:"1"}),a.a.createElement("rect",{x:"0",y:"154",width:"200",height:"12"}),a.a.createElement("rect",{x:"0",y:"180",width:"400",height:"12"}),a.a.createElement("rect",{x:"0",y:"212",width:"400",height:"1"})),a.a.createElement("rect",{x:"0",y:"".concat(156+r),width:"130",height:"14"}),o&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"220",width:"140",height:"20"}),a.a.createElement("rect",{x:"150",y:"220",width:"140",height:"20"})))},Of=function(e){var t=e.extended,n=e.primaryColor,r=e.secondaryColor,o=e.yOffset;return a.a.createElement(Un.a,{height:t?240:100,width:800,speed:2,primaryColor:n,secondaryColor:r},a.a.createElement("rect",{x:"0",y:"0",width:"600",height:"20"}),a.a.createElement("rect",{x:"700",y:"0",width:"100",height:"20"}),a.a.createElement("rect",{x:"0",y:"40",width:"100",height:"10"}),a.a.createElement("rect",{x:"110",y:"40",width:"200",height:"10"}),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"60",width:"20",height:"14"}),a.a.createElement("rect",{x:"30",y:"60",width:"500",height:"14"}),a.a.createElement("rect",{x:"0",y:"100",width:"800",height:"1"}),a.a.createElement("rect",{x:"0",y:"120",width:"600",height:"12"}),a.a.createElement("rect",{x:"0",y:"136",width:"800",height:"12"}),a.a.createElement("rect",{x:"0",y:"164",width:"800",height:"1"})),a.a.createElement("rect",{x:"0",y:"".concat(80+o),width:"130",height:"14"}),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"220",width:"140",height:"20"}),a.a.createElement("rect",{x:"150",y:"220",width:"140",height:"20"})))},_f=function(e){var t=e.extended,n=Object(f.useMediaQuery)("(max-width: 560px)"),r=Object(f.useTheme)().theme,o=Object(f.getThemeProperty)(r,"card-background"),i=Object(f.getThemeProperty)(r,"dimmed-card-background"),c=t?100:0;return a.a.createElement(En,null,(function(){return n?a.a.createElement(gf,{primaryColor:o,secondaryColor:i,yOffset:c,extended:t}):a.a.createElement(Of,{primaryColor:o,secondaryColor:i,yOffset:c,extended:t})}))},jf=Object(h.a)((function(e){var t=e.match,n=mt()("params.token",t),r={onEditInvoice:Object(d.b)(B.o)}.onEditInvoice,o=yf(n),i=o.invoice,c=o.loading,u=o.error,s=Object(X.a)().policyTicketVote.summariespagesize,l=!c&&!!i,m=i?{token:n,name:i.input.contractorname,location:i.input.contractorlocation,contact:i.input.contractorcontact,address:i.input.paymentaddress,rate:Object(De.i)(i.input.contractorrate),date:{month:i.input.month,year:i.input.year},files:i.file?i.file.filter((function(e){return"invoice.json"!==e.name})):[],lineitems:i.input.lineitems}:null,p=Object(Eo.a)(s),h=p.proposalsNotRFP,b=p.error;return a.a.createElement(f.Card,{className:"container margin-bottom-l"},u?a.a.createElement(f.Message,{kind:"error"},u.toString()):l?a.a.createElement(bf,{initialValues:m,onSubmit:r,approvedProposals:h,approvedProposalsError:b,editMode:!0}):a.a.createElement(_f,{extended:!0}))})),wf=function(e){var t=e.history,n=e.match,r=Object(f.useMediaQuery)("(max-width: 560px)"),o=function(){return a.a.createElement(f.Button,{type:"button",kind:"secondary",size:r?"sm":"md",onClick:function(){return t.push("/invoices/".concat(n.params.token))}},"Cancel")};return a.a.createElement(me.a,{topBannerHeight:90},(function(e){var t=e.TopBanner,n=e.PageDetails,r=e.Main;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Edit Invoice",actionsContent:a.a.createElement(o,null)})),a.a.createElement(r,{fillScreen:!0},a.a.createElement(jf,null)))}))},Sf=n(82),Tf=n.n(Sf),Cf=["Date","Repo","Commits","Merged","Updates","Reviews"],kf=function(){return a.a.createElement("div",{className:Object(f.classNames)(Tf.a.statsHeader,Tf.a.collapse)},Cf.map((function(e,t){return a.a.createElement("span",{key:t},e)})))},If=function(e){var t=e.add,n=e.del;return a.a.createElement("div",{className:Tf.a.singleStat},a.a.createElement("div",{className:Tf.a.addition},"+ ",t),a.a.createElement("div",{className:Tf.a.deletion},"- ",n))},xf=function(e){var t=e.links,n=e.label,o=e.pos,i=void 0===o?4:o;return a.a.createElement("div",null,n,":"," ",a.a.createElement(f.Text,{className:Tf.a.prs},0===t.length?"none":t.map(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return function(n,o){var i=new URL(n).pathname.split("/")[t];return a.a.createElement(r.Fragment,{key:o},a.a.createElement(Pe.a,{to:{pathname:n},target:"_blank"},i.substring(0,7)),o===e?"":", ")}}(t.length-1,i,!0))))},Rf=function(e){var t=e.commitadditions,n=e.commitdeletions,o=e.updatedadditions,i=e.updateddeletions,c=e.repository,u=e.mergedadditions,s=e.mergeddeletions,l=e.reviewadditions,d=e.reviewdeletions,m=e.prs,p=e.reviews,h=e.commits,b=e.month,v=e.year,E=Object(r.useState)(!1),y=Object(A.a)(E,2),g=y[0],O=y[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Tf.a.collapse,onClick:function(){return O(!g)}},a.a.createElement(f.Text,{textAlign:"center"},"".concat(b,"/").concat(v)),a.a.createElement(f.Text,{textAlign:"center"},c),a.a.createElement(If,{add:t,del:n}),a.a.createElement(If,{add:u,del:s}),a.a.createElement(If,{add:o,del:i}),a.a.createElement(If,{add:l,del:d})),g&&a.a.createElement("div",{className:Tf.a.contributionDetails},a.a.createElement(xf,{links:m,label:"Pull Requests"}),a.a.createElement(xf,{links:p,label:"Reviews"}),a.a.createElement(xf,{links:h,pos:5,label:"Commits"})))},Nf=function(e){var t=function(e,t,n){var r=Object(d.b)(B.R),a=Object($c.a)(r,[e,t,n]),o=Object(A.a)(a,2);return{loading:o[0],error:o[1]}}(e.id,e.start,e.end),n=t.loading,r=t.error;return n?a.a.createElement(f.Spinner,null):r?a.a.createElement(f.Text,null,"Error fetching codestats. Err: ",r):null},Pf=function(e){var t=e.id,n=e.start,o=e.end,i=Object(iu.a)(t).user,c=function(e,t,n){var a=Object(r.useMemo)((function(){return J.kb(e,t,n)}),[e,t,n]);return{codestats:Object(d.c)(a)}}(t,n,o).codestats,u=c&&c.length>0,s=c&&0===c.length;return a.a.createElement(a.a.Fragment,null,!c&&a.a.createElement(Nf,{id:t,start:n,end:o}),a.a.createElement(f.H5,{className:"margin-top-s"},i&&i.username),u?a.a.createElement("div",{className:Tf.a.codeStats},a.a.createElement(kf,null),c.map((function(e,t){return a.a.createElement(Rf,Object.assign({},e,{key:t}))}))):s&&a.a.createElement(f.Text,null,"No code stats for this user in the past 3 months"))},Lf=Object(r.memo)((function(e){var t=e.ids,n=e.start,r=e.end;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Object(f.classNames)(Tf.a.titleLinkWrapper,"margin-top-m","margin-bottom-s")},a.a.createElement(f.H4,null,"Past 3 months code stats")),t.map((function(e){return a.a.createElement(Pf,{key:e,id:e,start:n,end:r})})))})),Af=["Date","Invoice","Total (USD)"],Df=function(e){var t=e.total,n=e.censorshiprecord.token,r=e.input,o=r.month,i=r.year;return{Date:"".concat(o,"/").concat(i),Invoice:a.a.createElement(Pe.a,{to:"/invoices/".concat(n),className:Tf.a.invoiceLinkWrapper},a.a.createElement(f.Text,{color:"primary"},Object(De.C)(n))),"Total (USD)":Object(Ct.b)(t)}},Uf=function(){return tu().loading?a.a.createElement(f.Spinner,null):null},Vf=Object(r.memo)((function(e){var t=e.token,n=e.userid,o=e.start,i=e.end,c=Object(r.useState)(!1),u=Object(A.a)(c,2),s=u[0],l=u[1],m=function(e,t,n,r){var a=Object(d.c)(J.c);return{invoices:a&&a.length>0?a.filter((function(a){var o=new Date(a.input.year,a.input.month).getTime()/1e3;return a.censorshiprecord.token!==e&&a.userid===t&&o>=n&&o<=r})):null}}(t,n,o,i).invoices,p=s&&m&&m.length>0,h=m&&0===m.length;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Object(f.classNames)(Tf.a.titleLinkWrapper,"margin-bottom-s")},a.a.createElement(f.H4,null,"Past 3 months invoices"),!m&&a.a.createElement(Uf,null),a.a.createElement(f.Link,{className:Tf.a.uilink,onClick:function(){return l(!s)}},h?"":s?"Hide":"Show")),p?a.a.createElement(f.Table,{headers:Af,data:m.map(Df)}):h&&a.a.createElement(f.Text,null,"No invoices for the past 3 months"))})),Mf=Object(r.memo)((function(e){var t=e.subContractors,n=e.subContractorsError,r=e.invoiceToken,o=e.userid,i=e.start,c=e.end,u=Object(iu.a)(o).user,s=t?t.map((function(e){return e.id})):[];return a.a.createElement(f.Card,{paddingSize:"small"},a.a.createElement(f.H2,{className:Tf.a.statsTitle},"Stats"),a.a.createElement(Vf,{start:i,end:c,token:r,userid:o}),Object(pu.l)(u)&&!n&&a.a.createElement(Lf,{ids:[].concat(Object(Z.a)(s),[o]),start:i,end:c}),n&&{subContractorsError:n})})),Ff=Object(h.a)((function(e){var t,n=e.Main,r=e.match,o=mt()("params.token",r),i=mt()("params.commentid",r),c=yf(o),u=c.invoice,l=c.loading,d=c.currentUser,m=c.error,p=c.proposals,h=c.proposalsError,b=Object(wa.a)(),v=b.subContractors,E=b.error;if(u&&v){var g=u.input.lineitems.map((function(e){return e.subuserid}));t=v.filter((function(e){return g.includes(e.id)}))}var O=d&&u&&u.userid===d.userid,_=d&&d.isadmin,j=!_&&!O;Object(y.b)(fo(u));var w=0,S=0;if(u){var T=new Date(u.input.year,u.input.month),C=new Date(u.input.year,u.input.month);C.setMonth(C.getMonth()-3),S=T.getTime()/1e3,w=C.getTime()/1e3}return a.a.createElement(a.a.Fragment,null,a.a.createElement(n,{fillScreen:!0},a.a.createElement(s.a,null),a.a.createElement(Kc,null,m?a.a.createElement(f.Message,{kind:"error"},m.toString()):u&&!l?a.a.createElement(a.a.Fragment,null,a.a.createElement(Zc,{invoice:u,isAuthor:O,isPublicMode:j,extended:!0,approvedProposals:p||[],approvedProposalsError:h}),_&&a.a.createElement(Mf,{subContractors:t,subContractorsError:E,invoiceToken:u.censorshiprecord.token,userid:u.userid,start:w,end:S})):a.a.createElement(_f,{extended:!0}),!j&&a.a.createElement(Ii,{recordAuthorID:u&&u.userid,recordToken:o,threadParentID:i,readOnly:u&&!po(u),readOnlyReason:"This invoice can no longer receive comments due its current status.",recordBaseLink:"/invoices/".concat(o)}))))})),Bf=function(){return a.a.createElement(me.a,{topBannerHeight:0},(function(e){return a.a.createElement(Ff,e)}))};function Gf(){Gf=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var Wf=function(e){var t=e.show,n=e.onClose,o=Object(r.useState)(!1),i=Object(A.a)(o,2),c=i[0],u=i[1],s={onInviteContractor:Object(d.b)(B.ab)}.onInviteContractor,l=function(){var e=Object(L.a)(Gf().mark((function e(t,n){var r,a,o;return Gf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,a=n.setFieldError,o=n.setSubmitting,e.prev=1,e.next=4,s(t);case 4:r(),u(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),o(!1),a("global",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){t||setTimeout((function(){return u(!1)}),500)}),[t]);var m=Object(r.useMemo)((function(){return c?a.a.createElement(f.Icon,{type:"mailCheck",size:26}):a.a.createElement(f.Icon,{type:"mail",size:26})}),[c]);return a.a.createElement(f.Modal,{style:{width:"600px"},title:c?"Invite sent!":"Invite Contractor",show:t,onClose:n,iconComponent:m},!c&&a.a.createElement(f.P,{style:{marginBottom:"20px"}},"Please, provide the email to where to send the invitation"),!c&&a.a.createElement(F.a,{initialValues:{email:"",isTemp:!1},validationSchema:G.f().shape({email:G.h().email("Invalid email").required("Required"),isTemp:G.c()}),onSubmit:l},(function(e){var t=e.Form,n=e.Actions,r=e.ErrorMessage,o=e.values,i=e.handleChange,c=e.handleBlur,u=e.handleSubmit,s=e.errors,l=e.isSubmitting,d=e.touched;return a.a.createElement(t,{onSubmit:u},s&&s.global&&a.a.createElement(r,null,s.global.toString()),a.a.createElement(f.TextInput,{label:"Email",name:"email",id:"email",type:"text",value:o.email,onChange:i,onBlur:c,error:d.email&&s.email}),a.a.createElement(Cl,{name:"isTemp",label:"Temporary Invite"}),a.a.createElement(n,{className:"no-padding-bottom"},a.a.createElement(f.Button,{loading:l,type:"submit"},"Invite")))})),c&&a.a.createElement(a.a.Fragment,null,"The invitation was sent to the provided email.",a.a.createElement("div",{className:"justify-right margin-top-m"},a.a.createElement(f.Button,{onClick:n},"Ok"))))};Wf.propType={show:At.a.bool,onClose:At.a.func};var Yf=a.a.memo(Wf),Hf=n(365),Qf=n.n(Hf),qf=function(e){var t=e.openInviteModal,n=Object(f.useMediaQuery)("(max-width: 768px)"),r=a.a.createElement(f.Link,{className:"cursor-pointer",onClick:t},"Invite contractor"),o=a.a.createElement(Pe.a,{className:"cursor-pointer",to:"/admin/payouts"},"Generate payouts"),i=a.a.createElement(Pe.a,{className:"cursor-pointer",to:"/admin/invoicepayouts"},"Payout summaries"),c=a.a.createElement(Pe.a,{className:"cursor-pointer",to:"/admin/proposalsbilling"},"Proposal billing");return a.a.createElement(Pr,null,n?a.a.createElement(f.Dropdown,{title:"Actions",className:Qf.a.actionsWrapper},a.a.createElement(f.DropdownItem,null,r),a.a.createElement(f.DropdownItem,null,o),a.a.createElement(f.DropdownItem,null,i),a.a.createElement(f.DropdownItem,null,c)):a.a.createElement(Pt.a,{justify:"space-between",className:Qf.a.actionsWrapper},r,o,i,c))},zf=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=tu(),c=i.loading,u=i.invoices,s=Object(iu.a)().isAdmin,l=Object(r.useState)({}),d=Object(A.a)(l,2),m=d[0],p=d[1],h=Object(Be.a)(),b=Object(A.a)(h,2),v=b[0],E=b[1],y=Object(r.useCallback)((function(e){return a.a.createElement(Zc,{key:"invoice-".concat(e.censorshiprecord.token),invoice:e})}),[]),g=Object(r.useCallback)((function(e){p(e)}),[p]),O=Object(r.useCallback)((function(e){return!e.length&&a.a.createElement(Ce,null,u.length?"There are no invoices matching the selected filters":"There are no invoices submitted yet")}),[u]),_=Object(r.useCallback)((function(e){return e.map(y)}),[y]);return a.a.createElement(Kc,null,a.a.createElement(t,null,a.a.createElement(n,{title:s?"All Invoices":"Domain Invoices",actionsContent:a.a.createElement(qf,{openInviteModal:function(){v(Yf,{onClose:E})}})},a.a.createElement(Ql,{onChange:g,isAdminPage:!0}))),a.a.createElement(o,{fillScreen:!0},c&&a.a.createElement("div",{className:Qf.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})),!c&&m&&a.a.createElement(zl,{invoices:u,filterValues:m},(function(e){return a.a.createElement(a.a.Fragment,null,_(e),O(e))}))))},Kf=function(){return a.a.createElement(me.a,{disableScrollToTop:!0,topBannerHeight:160},(function(e){return a.a.createElement(zf,e)}))};var Jf=n(237),Xf=n.n(Jf),Zf=function(e){var t=e.TopBanner,n=e.PageDetails,r=e.Main,o=function(){var e=Object(d.c)(J.Wb),t=Object(d.b)(B.W),n=Object($c.a)(t),r=Object(A.a)(n,2),a=r[0],o=r[1];return Object(eu.a)(o),{loading:a,payouts:e}}(),i=o.loading,c=o.payouts,u=zc().onPay,s=!i&&c&&c.length>0,l=s&&a.a.createElement(f.Button,{className:Object(f.classNames)("cursor-pointer",Xf.a.payBtn),onClick:u},"Set invoices to paid");return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Payouts",actionsContent:l})),a.a.createElement(r,{fillScreen:!0},i&&a.a.createElement("div",{className:Xf.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})),s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Table,{bodyCellClassName:Xf.a.tableBodyCell,headClassName:Xf.a.tableHead,data:c.map((function(e){var t=e.approvedtime,n=e.year,r=e.month,o=e.contractorname,i=e.contractorrate,c=e.labortotal,u=e.expensetotal,s=e.total,l=e.exchangerate,d=e.dcrtotal,m=e.address;return{approvedtime:Object(Ct.c)(t),month:"".concat(r,"/").concat(n),contractorname:o,contractorrate:Object(Ct.b)(i),labortotal:Object(Ct.b)(c),expensetotal:Object(Ct.b)(u),total:Object(Ct.b)(s),exchangerate:Object(Ct.b)(l),dcrtotal:Object(Ct.a)(d)+" DCR",address:a.a.createElement(f.CopyableText,{truncate:!0,id:"payment-address-".concat(t),className:Xf.a.copyableText,tooltipPlacement:"left"},m)}})),headers:["Approved Time","Date","Name","Rate(USD)","Labor Total(USD)","Expense Total(USD)","Combined Total(USD)","Exchange Rate(USD)","Total Payment(DCR)","Address"]}),a.a.createElement(Pt.a,{noMargin:!0,justify:"right"},a.a.createElement(ss,{data:c.map((function(e){var t=e.approvedtime,n=e.year,r=e.month,a=e.contractorname,o=e.contractorrate,i=e.labortotal,c=e.expensetotal,u=e.total,s=e.exchangerate,l=e.address,f=e.dcrtotal;return o/=100,i/=100,c/=100,u/=100,s/=100,{approvedtime:Object(Ct.c)(t),month:"".concat(r,"/").concat(n),contractorname:a,contractorrate:o.toFixed(2),labortotal:i.toFixed(2),expensetotal:c.toFixed(2),total:u.toFixed(2),exchangerate:s.toFixed(2),address:l,dcrtotal:Object(Ct.a)(f)}})),fields:["approvedtime","year","month","contractorname","contractorrate","labortotal","expensetotal","total","exchangerate","address","dcrtotal"],filename:"payouts"},a.a.createElement(f.Link,{className:"cursor-pointer"},"Export To Csv")))),!s&&a.a.createElement(Ce,null,"There are no payouts for approved invoices")))},$f=function(){return a.a.createElement(me.a,{disableScrollToTop:!0,topBannerHeight:90},(function(e){return a.a.createElement(Kc,null,a.a.createElement(Zf,e))}))},ed=n(678),td=n.n(ed),nd={sDate:so(),eDate:Object(De.m)()},rd={min:{year:2018,month:1},max:Object(De.m)()},ad=function(e){var t=e.formikProps,n=e.onChange;return Object(r.useEffect)((function(){n(t.values)}),[t.values,n]),null},od=function(e){var t=e.onChange,n=e.children;return a.a.createElement(pe.c,{initialValues:nd},(function(e){var r=e.values;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{className:td.a.form},a.a.createElement(Ul,{years:rd,name:"sDate",label:"Start"}),a.a.createElement(Ul,{className:"margin-left-s",years:rd,name:"eDate",label:"End"}),a.a.createElement(ad,{formikProps:e,onChange:t})),n&&n(r))}))};var id=n(238),cd=n.n(id),ud=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=Object(r.useState)(),c=Object(A.a)(i,2),u=c[0],s=c[1],l=Object(r.useState)({sDate:null,eDate:null}),m=Object(A.a)(l,2),p=m[0],h=m[1],b=function(){var e=Object(d.c)(J.hb);return{loading:Object(d.c)(J.R),lineItemPayouts:e,onInvoicePayouts:Object(d.b)(B.bb)}}(),v=b.loading,E=b.lineItemPayouts,y=b.onInvoicePayouts,g=!v&&E&&E.length>0;Object(r.useEffect)((function(){if(p.sDate&&p.eDate){var e=new Date(p.sDate.year,p.sDate.month),t=new Date(p.eDate.year,p.eDate.month);y(Math.round(e.valueOf()/1e3),Math.round(t.valueOf()/1e3)).catch((function(e){return s(e)}))}}),[p]);var O=Object(r.useCallback)((function(e){h(e)}),[h]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Line Item Payouts",actionsContent:null},a.a.createElement(od,{onChange:O}))),a.a.createElement(o,{fillScreen:!0},v&&a.a.createElement("div",{className:cd.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})),u&&a.a.createElement(f.Message,{kind:"error"},u.toString()),g&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.Table,{bodyCellClassName:cd.a.tableBodyCell,headClassName:cd.a.tableHead,data:E.map((function(e){var t=e.year,n=e.month,r=e.token,o=e.domain,i=e.subdomain,c=e.description,u=e.proposaltoken,s=e.expenses,l=e.labor,d=e.paiddate,m=e.amountreceived;return{month:"".concat(n,"/").concat(t),invoicetoken:r&&a.a.createElement(f.CopyableText,{truncate:!0,id:"invoice-token-".concat(r),className:cd.a.copyableText,tooltipPlacement:"left"},r),domain:o,subdomain:i,description:c,proposaltoken:u&&a.a.createElement(f.CopyableText,{truncate:!0,id:"proposal-token-".concat(u),className:cd.a.copyableText,tooltipPlacement:"left"},u),expenses:s,labor:l,total:l+s,paiddate:d,amountreceived:Object(Ct.a)(m)}})),headers:["Date","Invoice Token","Domain","Sub Domain","Description","Proposal Token","Expense(USD)","Labor(USD)","Total(USD)","Paid Date","Amount Received(DCR)"]}),a.a.createElement(Pt.a,{noMargin:!0,justify:"right"},a.a.createElement(ss,{data:E,fields:["year","month","token","domain","subdomain","description","proposaltoken","expenses","labor","paiddate","amountreceived"],filename:"payouts"},a.a.createElement(f.Link,{className:"cursor-pointer"},"Export To Csv")))),!g&&!u&&a.a.createElement(Ce,null,"No payouts in the given time range!")))},sd=function(){return a.a.createElement(me.a,{disableScrollToTop:!0,topBannerHeight:140},(function(e){return a.a.createElement(Kc,null,a.a.createElement(ud,e))}))};var ld=n(239),fd=n.n(ld),dd=["Proposal","Amount"],md=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=Object(r.useState)(),c=Object(A.a)(i,2),u=c[0],s=c[1],l=function(){var e=Object(d.c)(J.dc);return{loading:Object(d.c)(J.W),proposalsBilled:e,getSpendingSummary:Object(d.b)(B.Y)}}(),m=l.getSpendingSummary,p=l.proposalsBilled,h=l.loading,b=Object(r.useState)(p),v=Object(A.a)(b,2),E=v[0],y=v[1];Object(r.useEffect)((function(){!p&&m().catch((function(e){return s(e)}))}),[m,p]),Object(r.useEffect)((function(){y(p)}),[p]);var g=Object(r.useState)(""),O=Object(A.a)(g,2),_=O[0],j=O[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Proposal Billing",actionsClassName:fd.a.searchWrapper,actionsContent:a.a.createElement("div",null,a.a.createElement(f.BoxTextInput,{searchInput:!0,rounded:!0,onChange:function(e){return j(e.target.value)},onSubmit:function(){var e=new RegExp(_,"i"),t=p.filter((function(t){return t.title.match(e)}));y(t)},value:_,placeholder:"Proposal name",name:"search"}))})),a.a.createElement(o,{fillScreen:!0},u?a.a.createElement(f.Message,{kind:"error"},u.toString()):h||!E?a.a.createElement("div",{className:fd.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})):a.a.createElement(f.Card,{paddingSize:"small",className:fd.a.card},a.a.createElement(f.Table,{className:fd.a.table,data:E.map((function(e){var t=e.token,n=e.title,r=e.totalbilled;return{Proposal:a.a.createElement(Pe.a,{to:"/admin/proposalsbilling/".concat(t),className:fd.a.titleLink},n),Amount:Object(Ct.b)(r)}})),headers:dd}))))},pd=function(){return a.a.createElement(me.a,{disableScrollToTop:!0,topBannerHeight:140},(function(e){return a.a.createElement(Kc,null,a.a.createElement(md,e))}))};var hd=n(679),bd=n.n(hd),vd=n(461),Ed=n.n(vd),yd=["Month","Year","User","Contractor Rate","Exchange Rate","Labor (hours)","Expense (USD)","Total (DCR)","Total (USD)","Invoice"],gd=function(e){return 4===e.type},Od=function(e){return no()(ao()((function(e){return e.labor})),bd.a)(e)},_d=function(e){return io()(gd)(e)},jd=n(186),wd=n.n(jd),Sd=function(e){var t=e.username,n=void 0===t?"":t,o=e.userid,i=void 0===o?"":o,c=e.value,u=Object(r.useState)(),s=Object(A.a)(u,2),l=s[0],f=s[1];return a.a.createElement("div",{onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:wd.a.value},c,"*",l&&a.a.createElement(Pe.a,{className:wd.a.reference,to:"/user/".concat(i)},a.a.createElement("b",null,"Sub Contractor:")," ",n))},Td=function(e,t){return e&&e.map((function(e){var n,r,o=e.username,i=e.userid,c=e.censorshiprecord.token,s=e.input,l=(n=s.contractorrate,(r=s.lineitems).filter((function(e){return!gd(e)})).reduce((function(e,t){return e+t.labor}),0)/60*n+r.reduce((function(e,t){return e+t.expenses}),0)),f=l/s.exchangerate,d=Od(s.lineitems),m=bo(s?{input:s}:null),p=function(e){return no()(_d,Od)(e)}(s.lineitems),h={month:s.month,year:s.year,user:a.a.createElement(Pe.a,{to:"/user/".concat(i)},o),contractorrate:Ct.h.format(s.contractorrate/100),exchangerate:Ct.h.format(s.exchangerate/100),labor:Object(De.h)(d),expensetotal:Ct.h.format(m),totaldcr:f.toFixed(8),totalusd:Ct.h.format(l/100),invoice:a.a.createElement(Pe.a,{to:"/invoices/".concat(c)},c)};if(p&&!m){var b=function(e){return e.filter(gd).reduce((function(e,t){return e+t.subrate*t.labor/60}),0)}(s.lineitems),v=b/s.exchangerate,E=function(e){return no()(_d,Ed.a,mt()("subrate"))(e)}(s.lineitems),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=no()(_d,Ed.a,mt()("subuserid"))(e);return t.find((function(e){return e.id===n}))}(s.lineitems,t),g=y.username,O=y.id;h=Object(u.a)(Object(u.a)({},h),{},{totalusd:a.a.createElement(Sd,{value:Ct.h.format(b/100),username:g,userid:O}),totaldcr:a.a.createElement(Sd,{value:v.toFixed(8),username:g,userid:O}),labor:a.a.createElement(Sd,{value:Object(De.h)(p),username:g,userid:O}),contractorrate:a.a.createElement(Sd,{value:Ct.h.format(E/100),username:g,userid:O})})}return h}))||[]},Cd=Object(h.a)((function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=e.match,c=Object(r.useState)(),u=Object(A.a)(c,2),l=u[0],m=u[1],p=mt()("params.token",i),h=function(){var e=Object(d.c)(J.ac);return{loading:Object(d.c)(J.V),proposalBillingDetails:e,getSpendingDetails:Object(d.b)(B.N)}}(),b=h.getSpendingDetails,v=h.proposalBillingDetails,E=h.loading,y=Object(Le.p)(),g=y.subContractors,O=y.loading,_=y.error;Object(r.useEffect)((function(){b(p).catch((function(e){return m(e)}))}),[b,p]);var j=v&&0===v.totalbilled&&0===v.invoices.length,w=v&&!E&&!O,S=_||l,T=w&&Td(v.invoices,g).sort((function(e,t){return t.year-e.year||t.month-e.month}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Proposal Billing Details: ".concat(w?v.title:""),subtitle:w?v.token:"",actionsContent:null})),a.a.createElement(o,{fillScreen:!0},a.a.createElement(s.a,null),S?a.a.createElement(f.Message,{kind:"error"},S.toString()):w?j?a.a.createElement(f.Card,{paddingSize:"small"},"There are no billings for this proposal yet"):a.a.createElement(f.Card,{paddingSize:"small",className:wd.a.tableWrapper},a.a.createElement(f.Table,{className:wd.a.table,data:T,headers:yd,linesPerPage:50}),a.a.createElement(ss,{data:T.map((function(e){var t=e.month,n=e.year,r=e.user,a=e.contractorrate,o=e.exchangerate,i=e.labor,c=e.expensetotal,u=e.totaldcr,s=e.totalusd,l=e.invoice;return{month:"".concat(t,"/").concat(n),username:r.props.children,contractorrate:a,exchangerate:o,labor:i,expensetotal:c,totaldcr:u,totalusd:s,invoice:l.props.children}})),fields:["month","username","contractorrate","exchangerate","labor","expensetotal","totaldcr","totalusd","invoice"],filename:"proposal_details.csv"},a.a.createElement(f.Link,{className:"cursor-pointer"},"Export To Csv")),a.a.createElement(f.H3,{className:wd.a.totalText},"Total: ",Object(Ct.b)(v.totalbilled))):a.a.createElement("div",{className:wd.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0}))))})),kd=function(){return a.a.createElement(me.a,{disableScrollToTop:!0,topBannerHeight:140},(function(e){return a.a.createElement(Kc,null,a.a.createElement(Cd,e))}))},Id=[];var xd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Id,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(Hn.f)({actions:{initial:function(){if(n)return e.apply(void 0,Object(Z.a)(t||[])).then((function(){return i(Hn.c)})).catch((function(e){return i(Hn.b,{error:e})})),i(Hn.a)}}}),a=Object(A.a)(r,2),o=a[0],i=a[1];return[o.loading,o.error]};var Rd=n(105),Nd=n.n(Rd),Pd=function(e){var t=e.label,n=e.value,r=e.renderValue;return a.a.createElement("div",{className:Nd.a.field},a.a.createElement(f.Text,{size:"small"},t),r?r(n):a.a.createElement(f.Text,{size:"large"},n))},Ld=n(45),Ad=Object(r.createContext)(),Dd=function(){return Object(r.useContext)(Ad)},Ud=function(e){var t=e.children,n=function(){var e=Object(d.b)(B.Eb);return{onApproveDcc:Object(r.useCallback)((function(t){return function(n){return e(t.censorshiprecord.token,Ld.i,n)}}),[e]),onRejectDcc:Object(r.useCallback)((function(t){return function(n){return e(t.censorshiprecord.token,Ld.k,n)}}),[e])}}(),o=n.onRejectDcc,i=n.onApproveDcc,c=Object(Be.a)(),u=Object(A.a)(c,2),s=u[0],l=u[1];return a.a.createElement(Ad.Provider,{value:{onReject:function(e){s(ur,{title:"Reject ".concat(Object(pu.o)(e)),reasonLabel:"Reject reason",subject:"rejectDcc",onSubmit:o(e),successTitle:"DCC rejected",successMessage:a.a.createElement(f.Text,null,"The dcc has been successfully rejected!"),onClose:l})},onApprove:function(e){s(ur,{title:"Approve ".concat(Object(pu.o)(e)),reasonLabe:"Approve reason",subject:"approveDcc",onSubmit:i(e),successTitle:"DCC approved",successMessage:a.a.createElement(f.Text,null,"The dcc has been successfully approved!"),onClose:l})}}},t)},Vd=function(e){var t=e.dcc,n=e.className;if(!Dd())throw Error("Admin dccs actions requires an 'AdminActionsProvider' on a higher level of the component tree. ");var o=Dd(),i=o.onApprove,c=o.onReject,u=Object(r.useCallback)((function(e){return function(){e(t)}}),[t]);return Object(pu.h)(t)?a.a.createElement(Pr,null,a.a.createElement("div",{className:n},a.a.createElement(f.Dropdown,{title:"Approve/Reject DCC",itemsListClassName:"full-width"},a.a.createElement(f.DropdownItem,{onClick:u(i)},"Approve"),a.a.createElement(f.DropdownItem,{onClick:u(c)},"Reject")))):null},Md=n(462),Fd=n.n(Md),Bd=function(e){var t=e.options,n=e.currentID;return a.a.createElement("div",{className:Fd.a.list},t.length?t.map((function(e){return a.a.createElement(f.Card,{key:e.value,marker:e.value===n,className:Fd.a.card},a.a.createElement(Pe.a,{to:"/user/".concat(e.value)},e.label))})):a.a.createElement(f.Card,null,"No votes yet"))},Gd=function(e){var t=e.supportList,n=e.againstList,o=e.neutralList,i=e.show,c=e.onClose,u=e.currentID,s=Object(r.useState)(0),l=Object(A.a)(s,2),d=l[0],m=l[1];return a.a.createElement(f.Modal,{onClose:c,show:i},a.a.createElement(f.Tabs,{onSelectTab:m,activeTabIndex:d},a.a.createElement(f.Tab,{label:"support",count:t.length},a.a.createElement(Bd,{options:t,currentID:u})),a.a.createElement(f.Tab,{label:"against",count:n.length},a.a.createElement(Bd,{options:n,currentID:u})),o&&a.a.createElement(f.Tab,{label:"neutral",count:o.length},a.a.createElement(Bd,{options:o,currentID:u}))))},Wd=function(e){var t=e.dcc,n=e.token,o=e.className,i=e.buttonsClassName,c=function(e){var t=Object(d.b)(B.Kb),n=Object(d.b)(B.u),a=Object(d.c)(J.o),o=Object(d.c)(J.s),i=Object($c.a)(n,null,!a),c=Object(A.a)(i,2);return{onSupportDcc:function(){return t(e,Ld.l)},onOpposeDcc:function(){return t(e,Ld.g)},loading:c[0],userID:o,error:c[1],isContractor:Object(r.useMemo)((function(){return a&&Object(pu.m)(a)}),[a])}}(n),u=c.onSupportDcc,s=c.onOpposeDcc,l=c.userID,m=c.isContractor,p=c.loading,h=c.error,b=Object(f.useMediaQuery)("(max-width: 560px)"),v=t.supportuserids,E=t.supportusernames,y=t.againstuserids,g=t.againstusernames,O=Object(Be.a)(),_=Object(A.a)(O,2),j=_[0],w=_[1],S=Object(r.useCallback)((function(e){j(sr.a,{onClose:w,onSubmit:e,title:"Support/Oppose DCC"})}),[w,j]),T=Object(r.useCallback)((function(){S(u)}),[S,u]),C=Object(r.useCallback)((function(){S(s)}),[S,s]),k=Object(r.useMemo)((function(){return Object(pu.j)(l,t)&&m}),[t,l,m]),I=a.a.createElement(f.Button,{onClick:T},"Support"),x=a.a.createElement(f.Button,{kind:"secondary",onClick:C},"Oppose");return h?a.a.createElement(f.Message,{kind:"error"},"Could not fetch user list. ",h.toString()):!p&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:o},a.a.createElement(f.StatusBar,{status:Object(pu.b)(v,y),showMarker:!1,renderStatusInfoComponent:a.a.createElement(f.Link,{href:"#",onClick:function(){j(Gd,{supportList:Object(pu.a)(v,E),againstList:Object(pu.a)(y,g),onClose:w,currentID:l})}},"Votes")})),k&&!b&&a.a.createElement("div",{className:Object(f.classNames)("margin-top-s justify-right",i)},I,x),k&&b&&a.a.createElement(f.Dropdown,{title:"Support/Oppose"},a.a.createElement(f.DropdownItem,null,I),a.a.createElement(f.DropdownItem,null,x)))},Yd=a.a.memo((function(e){var t=e.dcc,n=e.extended,r=t.censorshiprecord,o=t.dccpayload,i=t.timesubmitted,c=t.sponsoruserid,u=t.nomineeusername,s=t.sponsorusername,l=t.statuschangereason,d=t.timereviewed,m=Object(Le.j)().policy.supporteddomains,p=Object(De.l)(m),h=Object(pu.h)(t),b=r&&r.token,v="/dccs/".concat(b),E=o&&o.domain,y=o&&o.contractortype,g=o&&o.statement,O=Object(De.p)(p,E);return a.a.createElement(En,null,(function(e){var r=e.Author,o=e.Event,m=e.Row,p=e.Title,E=e.Header,_=e.Subtitle,j=e.Status,w=e.RecordToken;return a.a.createElement(a.a.Fragment,null,a.a.createElement(E,{title:a.a.createElement(p,{id:"dcc-title-".concat(b),truncate:!0,linesBeforeTruncate:2,url:n?"":v},Object(pu.o)(t)),subtitle:a.a.createElement(_,null,a.a.createElement(r,{username:s,url:"/user/".concat(c)}),!n&&!Object(pu.k)(t)&&a.a.createElement(f.Text,null,Object(pu.n)(y)),!n&&a.a.createElement(f.Text,null,O),a.a.createElement(o,{event:"submitted",timestamp:i}),d&&a.a.createElement(o,{event:Object(pu.i)(t)?"approved":"rejected",timestamp:d}),!h&&!n&&a.a.createElement(f.Text,null,l)),status:a.a.createElement(j,null,a.a.createElement(f.StatusTag,Object.assign({className:Nd.a.statusTag},Object(pu.d)(t))))}),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(m,{topMarginSize:"s"},a.a.createElement(w,{token:b})),a.a.createElement(m,{justify:"space-between",bottomMarginSize:"m",className:Nd.a.topDetails},a.a.createElement(Pd,{label:"Type",value:Object(pu.p)(t)}),a.a.createElement(Pd,{label:"Nominee",value:u}),a.a.createElement(Pd,{label:"Domain",value:O}),!Object(pu.k)(t)&&a.a.createElement(Pd,{label:"Contractor Type",value:Object(pu.n)(y)})),a.a.createElement(m,{justify:"space-between",className:Nd.a.topDetails},a.a.createElement("div",{className:Nd.a.field},a.a.createElement(f.Text,{size:"small"},"Statement"),a.a.createElement(f.Text,{className:Nd.a.statement},Object(pu.r)(g)))),!h&&a.a.createElement(m,{justify:"space-between",className:Nd.a.topDetails},a.a.createElement("div",{className:Nd.a.field},a.a.createElement(f.Text,{size:"small"},"Status change reason"),a.a.createElement(f.Text,null,l))),a.a.createElement(Wd,{className:Nd.a.supportOpposeBar,buttonsClassName:Nd.a.supportOpposeButtons,dcc:t,token:b})),a.a.createElement(Vd,{dcc:t,className:Object(f.classNames)(!n&&"justify-right margin-bottom-xs",Nd.a.dccActions)}))}))})),Hd=function(e){var t=e.extended,n=e.yOffset,r=e.primaryColor,o=e.secondaryColor;return a.a.createElement(Un.a,{height:t?300:170,width:400,speed:2,primaryColor:r,secondaryColor:o},a.a.createElement("rect",{x:"0",y:"0",width:"180",height:"10"}),a.a.createElement("rect",{x:"0",y:"20",width:"360",height:"20"}),a.a.createElement("rect",{x:"0",y:"60",width:"80",height:"20"}),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"100",width:"20",height:"14"}),a.a.createElement("rect",{x:"30",y:"100",width:"400",height:"14"}),a.a.createElement("rect",{x:"0",y:"134",width:"400",height:"1"}),a.a.createElement("rect",{x:"0",y:"154",width:"200",height:"12"}),a.a.createElement("rect",{x:"0",y:"180",width:"400",height:"12"}),a.a.createElement("rect",{x:"0",y:"212",width:"400",height:"1"})),a.a.createElement("rect",{x:"0",y:"".concat(156+n),width:"130",height:"14"}),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"220",width:"140",height:"20"}),a.a.createElement("rect",{x:"150",y:"220",width:"140",height:"20"})))},Qd=function(e){var t=e.extended,n=e.yOffset,r=e.primaryColor,o=e.secondaryColor;return a.a.createElement(Un.a,{height:t?240:100,width:800,speed:2,primaryColor:r,secondaryColor:o},a.a.createElement("rect",{x:"0",y:"0",width:"600",height:"20"}),a.a.createElement("rect",{x:"700",y:"0",width:"100",height:"20"}),a.a.createElement("rect",{x:"0",y:"40",width:"100",height:"10"}),a.a.createElement("rect",{x:"110",y:"40",width:"200",height:"10"}),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"60",width:"20",height:"14"}),a.a.createElement("rect",{x:"30",y:"60",width:"500",height:"14"}),a.a.createElement("rect",{x:"0",y:"100",width:"800",height:"1"}),a.a.createElement("rect",{x:"0",y:"120",width:"600",height:"12"}),a.a.createElement("rect",{x:"0",y:"136",width:"800",height:"12"}),a.a.createElement("rect",{x:"0",y:"164",width:"800",height:"1"})),a.a.createElement("rect",{x:"0",y:"".concat(80+n),width:"130",height:"14"}),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("rect",{x:"0",y:"220",width:"140",height:"20"}),a.a.createElement("rect",{x:"150",y:"220",width:"140",height:"20"})))},qd=function(e){var t=e.extended,n=Object(f.useMediaQuery)("(max-width: 560px)"),r=t?100:0,o=Object(f.useTheme)().theme,i=Object(f.getThemeProperty)(o,"card-background"),c=Object(f.getThemeProperty)(o,"dimmed-card-background");return a.a.createElement(En,null,(function(){return n?a.a.createElement(Hd,{extended:t,yOffset:r,primaryColor:i,secondaryColor:c}):a.a.createElement(Qd,{extended:t,yOffset:r,primaryColor:i,secondaryColor:c})}))},zd=Object(h.a)((function(e){var t=e.Main,n=e.match,o=mt()("params.token",n),i=mt()("params.commentid",n),c=function(e){var t=Object(r.useMemo)((function(){return J.mb(e)}),[e]),n=Object(d.c)(t),a=Object(d.b)(B.w),o=xd(a,[e],!n),i=Object(A.a)(o,2);return{dcc:n,loading:i[0],error:i[1]}}(o),u=c.dcc,l=c.loading,m=c.error,p="/dccs/".concat(o);return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,{fillScreen:!0},a.a.createElement(Ud,null,a.a.createElement(s.a,null),m?a.a.createElement(f.Message,{kind:"error"},m.toString()):u&&!l?a.a.createElement(Yd,{dcc:u,extended:!0}):a.a.createElement(qd,{extended:!0}),a.a.createElement(Ii,{recordAuthorID:u&&u.sponsoruserid,recordToken:o,threadParentID:i,readOnly:u&&!Object(pu.h)(u),readOnlyReason:"This DCC can no longer receive comments due its current status.",recordBaseLink:p}))))})),Kd=function(){return a.a.createElement(me.a,{topBannerHeight:0},(function(e){return a.a.createElement(zd,e)}))};var Jd=n(680),Xd=n.n(Jd),Zd=function(e){var t=e.TopBanner,n=e.PageDetails,o=e.Main,i=function(){var e=Object(r.useState)(el.c),t=Object(A.a)(e,2),n=t[0],a=t[1],o=Object(d.c)(J.E),i=Object(d.b)(B.y),c=Object($c.a)(i),u=Object(A.a)(c,2),s=u[0],l=u[1],f=Object(r.useMemo)((function(){var e=o&&o[n];return Object(el.k)(e)}),[o,n]),m=Object(r.useCallback)((function(e){a(e+1)}),[a]);return Object(eu.a)(l),{dccs:f||[],loading:s,status:n,handleTabChange:m}}(),c=i.loading,u=i.dccs,s=i.handleTabChange,l=i.status;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"DCCs"},a.a.createElement(f.Tabs,{onSelectTab:s,activeTabIndex:l-1},a.a.createElement(f.Tab,{label:"Active"}),a.a.createElement(f.Tab,{label:"Approved"}),a.a.createElement(f.Tab,{label:"Rejected"})))),a.a.createElement(o,{fillScreen:!0},c&&a.a.createElement("div",{className:Xd.a.spinnerWrapper},a.a.createElement(f.Spinner,{invert:!0})),!c&&u&&a.a.createElement(Ud,null,function(e){return e&&e.map((function(e){return a.a.createElement(Yd,{key:"dcc-".concat(e.censorshiprecord.token),dcc:e})}))}(u)),!c&&Au()(u)&&a.a.createElement(Ce,null,"There are no ",Object(pu.s)(l)," DCCs")))},$d=function(){var e=Object(f.useMediaQuery)("(max-width: 760px)");return a.a.createElement(me.a,{disableScrollToTop:!0,topBannerHeight:e?160:140},(function(e){return a.a.createElement(Zd,e)}))},em=function(e,t){return e===el.d?t.min(1,"required"):t.min(0)},tm=n(212),nm=n(681),rm=n.n(nm),am=function(e){var t=e.values,n=e.setValues,o=e.submitSuccess,i=Object(tm.a)("draft"),c=Object(A.a)(i,2),s=c[0],l=c[1],d=mu(),m=d.draftDccs,p=d.onDeleteDraftDcc,h=d.onSaveDraftDcc,b=Object(r.useState)(!1),v=Object(A.a)(b,2),E=v[0],y=v[1],g=Object(r.useState)(!1),O=Object(A.a)(g,2),_=O[0],j=O[1],w=t&&!!t.type&&!!t.nomineeid&&!_;return Object(r.useEffect)((function(){j(!1)}),[t,j]),Object(r.useEffect)((function(){o&&s&&p(s)}),[o,s,p]),Object(r.useEffect)((function(){var e=m&&s&&m[s];e&&n(e)}),[m,s,n]),a.a.createElement(f.Button,{type:"button",kind:E||!w?"disabled":"secondary",loading:E,onClick:function(){var e=h(Object(u.a)({id:s},t));s||l(e),y(!0),rm()((function(){j(!0),y(!1)}),300)}},_?"Saved \u2713":"Save Draft")},om=function(e){return a.a.createElement(pe.d,null,(function(t){return a.a.createElement(am,Object(u.a)(Object(u.a)({},e),t))}))},im=n(274),cm=n.n(im),um=["error"];function sm(){sm=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var lm=function(e){var t=e.error,n=Object(E.a)(e,um);return a.a.createElement("div",{className:Object(f.classNames)(cm.a.formSelect,t&&cm.a.formSelectError)},a.a.createElement(ke.a,n),t&&a.a.createElement("p",{className:cm.a.errorMsg},t))},fm=a.a.memo((function(e){var t=e.values,n=e.handleSubmit,o=e.isSubmitting,i=e.setFieldValue,s=e.setFieldTouched,l=e.errors,d=e.touched,m=e.isValid,p=e.cmsUsers,h=e.setSessionStorageDcc,b=e.submitSuccess,v=e.isUserValid,E=e.isSupervisor,y=Object(Le.j)().policy.supporteddomains,g=Object(De.l)(y),O=Object(r.useState)(),_=Object(A.a)(O,2),j=_[0],w=_[1];Object(Le.m)(l&&l.global),Object(r.useEffect)((function(){t.type===el.d?w(!0):t.type===el.e&&(i("contractortype",el.a),w(!1))}),[t.type,i]);var S=Object(r.useCallback)((function(){return a.a.createElement(f.Button,{type:"submit",kind:m&&v?"primary":"disabled",loading:o},"Submit")}),[m,o,v]),T=function(e){return function(n){s(e,!0),h(Object(u.a)(Object(u.a)({},t),{},Object(c.a)({},e,n.value))),i(e,n.value)}},C=function(e){s("nomineeid",!0),i("nomineeid",e.value),i("nomineeusername",e.label),h(Object(u.a)(Object(u.a)({},t),{},{nomineeid:e.value,nomineeusername:e.label}))};return a.a.createElement("form",{onSubmit:n},l&&l.global&&a.a.createElement(f.Message,{kind:"error"},l.global.toString()),!v&&a.a.createElement(f.Message,{kind:"error"},"You don't have the contractor status required to complete a DCC request"),v&&a.a.createElement(f.Message,{kind:"info"},"Before creating a new DCC the nominee must be invited to CMS by an admin. Please contact an admin on DCR Contractors channel on matrix."),a.a.createElement(f.RadioButtonGroup,{label:"DCC Type",name:"type",options:Object(el.g)(),value:t.type,error:d.type&&l.type,onChange:function(e){s("type",!0),h(Object(u.a)(Object(u.a)({},t),{},{type:e.value})),i("type",e.value),i("nomineeid","")},className:cm.a.radioButton}),a.a.createElement(lm,{name:"domain",options:g,placeholder:"Domain",error:d.domain&&l.domain,onChange:T("domain")}),j?a.a.createElement(a.a.Fragment,null,a.a.createElement(lm,{name:"nomineeid",options:Object(el.h)(p.nominee),placeholder:"Nominee",error:d.nomineeid&&l.nomineeid,onChange:C,isDisabled:!t.type}),a.a.createElement(lm,{name:"contractortype",options:Object(el.f)(E),placeholder:"Contractor Type",error:d.contractortype&&l.contractortype,onChange:T("contractortype")})):a.a.createElement(lm,{name:"nomineeid",options:Object(el.h)(p.full),placeholder:"Nominee",error:d.nomineeid&&l.nomineeid,onChange:C,isDisabled:!t.type}),a.a.createElement(pe.a,{component:f.TextArea,name:"statement",value:t.statement,onChange:function(e){h(Object(u.a)(Object(u.a)({},t),{},{statement:e.target.value})),s("statement",!0),i("statement",e.target.value)},placeholder:"Statement",id:"statement",error:d.statement&&l.statement}),a.a.createElement("div",{className:"justify-right"},a.a.createElement(om,{submitSuccess:b}),a.a.createElement(S,null)))})),dm=Object(h.a)((function(e){var t=e.initialValues,n=e.onSubmit,o=e.history,i=e.cmsUsers,c=e.userDomain,s=e.isUserValid,l=Object(r.useState)(!1),f=Object(A.a)(l,2),d=f[0],m=f[1],p=Object(Le.j)().policy,h=Object(Le.s)().user,b=Object(r.useMemo)((function(){return function(e){var t,n=e.cmsstatementsupportedchars;return G.f().shape({nomineeid:G.h().required("required"),type:G.e().required("required").min(1).max(2),statement:(t=G.h().required("required").max(5e3)).matches.apply(t,Object(Z.a)(Object($.l)("Statement",n))),domain:G.e().when("type",em).max(6),contractortype:G.e().when("type",em).max(5)})}(p)}),[p]),v=t||{type:0,nomineeid:"",statement:"",domain:c,contractortype:0},E=Object(Le.o)("dcc",null),y=Object(A.a)(E,2),g=y[0],O=y[1];null!==g&&(v=g);var _=b.isValidSync(v),j=h.contractortype===el.b,w=Object(r.useCallback)(function(){var e=Object(L.a)(sm().mark((function e(t,r){var a,i,c,u,s;return sm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.resetForm,i=r.setSubmitting,c=r.setFieldError,e.prev=1,e.next=4,n(t);case 4:u=e.sent,s=u||t.token,i(!1),m(!0),o.push("/dccs/".concat(s)),O(null),a(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i(!1),c("global",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),[o,n,O]);return a.a.createElement(pe.c,{onSubmit:w,initialValues:v,isInitialValid:_,validationSchema:b},(function(e){return a.a.createElement(fm,Object(u.a)(Object(u.a)({},e),{},{submitSuccess:d,setSessionStorageDcc:O,cmsUsers:i,isUserValid:s,isSupervisor:j}))}))})),mm=function(e,t){return e&&e.filter((function(e){return!gi()(e,t)}))};var pm=function(){var e=function(){var e=Object(d.b)(B.u),t=Object(d.b)(B.yb),n=Object($c.a)(e),r=Object(A.a)(n,2),a=r[0],o=r[1],i=Object(d.c)(J.o),c=J.Pb(Ld.a),u=Object(d.c)(J.pc),s=Object(d.c)(c);return{loading:a,usersError:o,onSubmitDcc:t,users:{full:mm(u,i),nominee:s},user:i,isUserValid:Object(pu.m)(i)}}(),t=e.onSubmitDcc,n=e.users,r=e.loading,o=e.user,i=e.isUserValid,c=e.usersError;return a.a.createElement(f.Card,{className:"container margin-bottom-l"},c?a.a.createElement(f.Message,{kind:"error"},c.toString(),". Users list is not available. Please, try again later"):n&&o&&!r?a.a.createElement(dm,{onSubmit:t,cmsUsers:n,userDomain:o.domain,isUserValid:i}):a.a.createElement(qd,{extended:!0}))},hm=function(){return a.a.createElement(me.a,{topBannerHeight:90},(function(e){var t=e.TopBanner,n=e.PageDetails,r=e.Main;return a.a.createElement(a.a.Fragment,null,a.a.createElement(t,null,a.a.createElement(n,{title:"Create DCC",actionsContent:null})),a.a.createElement(r,{fillScreen:!0},a.a.createElement(pm,null)))}))},bm=Object(h.a)((function(e){var t=e.to,n=e.history,a=e.location;return Object(r.useEffect)((function(){a.pathname!==t&&n.push({pathname:t,search:a.search})}),[n,a.pathname,t,a.search]),null})),vm=Object(h.a)((function(e){var t=e.location,n=Object(m.c)().currentUser,r=!!n;return a.a.createElement(b.a,null,a.a.createElement(v.a,{key:t.key,classNames:"fade",timeout:300},a.a.createElement(p.a,{location:t},a.a.createElement(_,{exact:!0,path:"/"},r?n.isadmin?a.a.createElement(bm,{to:"/invoices"}):a.a.createElement(bm,{to:"/invoices/me"}):a.a.createElement(bm,{to:"/user/login"})),a.a.createElement(_,{exact:!0,path:"/register"},a.a.createElement(bm,{to:"/user/signup"})),it,a.a.createElement(T,{path:"/user/:userid",title:"User Detail",exact:!0,key:"user-detail-route",component:Sl}),a.a.createElement(T,{path:"/invoices/me",title:"My Invoices",exact:!0,component:Zl}),a.a.createElement(T,{path:"/invoices/new",title:"New Invoice",exact:!0,component:Ef}),a.a.createElement(T,{path:"/invoices",title:r&&n&&n.isadmin?"All Invoices":"Domain Invoices",exact:!0,component:Kf}),a.a.createElement(T,{path:"/invoices/:token",title:"Invoice Detail",exact:!0,component:Bf}),a.a.createElement(T,{path:"/invoices/:token/comments/:commentid",title:"Invoice Detail",exact:!0,component:Bf}),a.a.createElement(T,{path:"/invoices/:token/edit",title:"Edit Invoice",exact:!0,component:wf}),a.a.createElement(w,{path:"/admin/payouts",title:"Payouts",exact:!0,component:$f}),a.a.createElement(w,{path:"/admin/invoicepayouts",title:"Line Item Payouts",exact:!0,component:sd}),a.a.createElement(w,{path:"/admin/proposalsbilling",title:"Proposals Billing Summary",exact:!0,component:pd}),a.a.createElement(w,{path:"/admin/proposalsbilling/:token",title:"Proposal Billing Details",exact:!0,component:kd}),a.a.createElement(T,{path:"/dccs",title:"DCCs",exact:!0,component:Object(el.l)($d)}),a.a.createElement(T,{path:"/dccs/new",title:"New DCC",exact:!0,component:Object(el.l)(hm)}),a.a.createElement(T,{path:"/dccs/:token",title:"DCC Detail",exact:!0,component:Object(el.l)(Kd)}),a.a.createElement(T,{path:"/dccs/:token/comments/:commentid",title:"DCC Detail",exact:!0,component:Object(el.l)(Kd)}),a.a.createElement(_,{title:"Page Not Found",path:"*",component:ft}))))})),Em=function(){var e,t=Object(l.d)(),n=t.recordType,r=t.constants;return(e={},Object(c.a)(e,r.RECORD_TYPE_INVOICE,a.a.createElement(vm,null)),Object(c.a)(e,r.RECORD_TYPE_PROPOSAL,a.a.createElement(Tl,null)),e)[n]};var ym=function(e){var t=e.children,n=e.showModal,a=function(){var e=Object(d.c)(J.p),t=Object(d.b)(B.b),n=Object(r.useState)(),a=Object(A.a)(n,2),o=a[0],i=a[1],c=Object(r.useMemo)((function(){if(e){var t=e.sessionmaxage,n=e.lastlogintime;return 1e3*t-(Date.now()/1e3-n)}}),[e]),u=Object(r.useCallback)((function(){var t=e.sessionmaxage,n=e.lastlogintime,r=t<Date.now()/1e3-n;i(r)}),[e]);return Object(r.useEffect)((function(){var e;return c&&(e=setInterval((function(){u()}),c)),function(){e&&clearInterval(e)}}),[c,u]),{sessionExpired:o,setSessionExpired:i,handleLogout:t}}(),o=a.sessionExpired,i=a.setSessionExpired,c=a.handleLogout,u=Object(Be.a)(),s=Object(A.a)(u,2),l=s[0],f=s[1],m=Object(r.useCallback)((function(){c(),f(),i(!1)}),[f,c,i]),p=Object(r.useCallback)((function(){l(Fi.a,{onLoggedIn:function(){i(!1),f()},id:"sessionExpiredModal",title:"Your session has expired. Please log in again",onClose:m,disableDismiss:!0})}),[i,l,m,f]);return Object(r.useEffect)((function(){o&&n&&p()}),[o,p,n]),t};ym.propTypes={children:At.a.node.isRequired,showModal:At.a.bool};var gm=ym,Om=n(346),_m=n(345);n(1207),n(1208);G.a(G.e,"maxByteSize",(function(e){return G.d().test({name:"maxByteSize",test:function(t){return t<=e},message:"File size must be less or equal than ".concat(e/1024,"kb")})})),G.a(G.b,"files",(function(e,t,n){return G.b().of(G.f().shape({name:G.h(),mime:G.h().oneOf(n),payload:G.h(),size:G.e().maxByteSize(e)})).max(t)}));var jm,wm=n(682),Sm=n.n(wm),Tm=n(683),Cm=n.n(Tm),km=n(684),Im=n.n(km),xm={"font-family-text":"Source Sans Pro"},Rm=(jm={},Object(c.a)(jm,f.DEFAULT_LIGHT_THEME_NAME,Object(u.a)(Object(u.a)({},f.defaultLightTheme),xm)),Object(c.a)(jm,f.DEFAULT_DARK_THEME_NAME,Object(u.a)(Object(u.a)({},f.defaultDarkTheme),xm)),jm),Nm=[{"font-family":"Source Sans Pro",src:"url(".concat(Sm.a,') format("truetype")'),"font-weight":f.defaultLightTheme["font-weight-light"],"font-style":"normal","font-display":"swap"},{"font-family":"Source Sans Pro",src:"url(".concat(Cm.a,') format("truetype")'),"font-weight":f.defaultLightTheme["font-weight-regular"],"font-style":"normal","font-display":"swap"},{"font-family":"Source Sans Pro",src:"url(".concat(Im.a,') format("truetype")'),"font-weight":f.defaultLightTheme["font-weight-semi-bold"],"font-style":"normal","font-display":"swap"}],Pm=function(){return a.a.createElement(f.ThemeProvider,{themes:Rm,defaultThemeName:f.DEFAULT_LIGHT_THEME_NAME,fonts:Nm},a.a.createElement(d.a,null,a.a.createElement(l.c,null,a.a.createElement(m.a,null,a.a.createElement(Om.a,null,a.a.createElement(s.b,null,a.a.createElement(_m.a,null,a.a.createElement(gm,null,a.a.createElement(Em,null)))))))))},Lm=document.getElementById("root");i.a.render(a.a.createElement(Pm,null),Lm)},127:function(e,t,n){"use strict";n.d(t,"w",(function(){return y})),n.d(t,"x",(function(){return g})),n.d(t,"v",(function(){return j})),n.d(t,"u",(function(){return C})),n.d(t,"s",(function(){return k})),n.d(t,"e",(function(){return I})),n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return R})),n.d(t,"d",(function(){return L})),n.d(t,"o",(function(){return A})),n.d(t,"f",(function(){return D})),n.d(t,"m",(function(){return U})),n.d(t,"h",(function(){return V})),n.d(t,"k",(function(){return M})),n.d(t,"j",(function(){return F})),n.d(t,"g",(function(){return B})),n.d(t,"p",(function(){return G})),n.d(t,"c",(function(){return W})),n.d(t,"n",(function(){return Y})),n.d(t,"i",(function(){return H})),n.d(t,"l",(function(){return Q})),n.d(t,"q",(function(){return q})),n.d(t,"r",(function(){return z})),n.d(t,"t",(function(){return K})),n.d(t,"A",(function(){return J})),n.d(t,"y",(function(){return X})),n.d(t,"z",(function(){return Z}));n(3),n(2);var r=n(4),a=n(24),o=n(232),i=n(12),c=n.n(i),u=n(632),s=n.n(u),l=n(633),f=n.n(l),d=n(30),m=n.n(d),p=n(73),h=n.n(p),b=n(634),v=n.n(b),E=c()(["users","byID"]),y=c()(["users","search","results"]),g=c()(["users","search","resultsByID"]),O=c()(["users","search","queryByEmail"]),_=c()(["users","search","queryByUsername"]),j=c()(["users","search","queryByPublicKey"]),w=c()(["users","cms","byContractorType"]),S=c()(["users","cms","byDomain"]),T=c()(["users","cms","byID"]),C=c()(["users","newUser"]),k=(c()(["users","newUser","verificationtoken"]),function(e){return Object(a.a)(E,(function(t){return t[e]||null}))}),I=c()(["users","currentUserID"]),x=Object(a.a)(E,I,(function(e,t){return e[t]})),R=Object(a.a)(T,I,(function(e,t){return e[t]})),N=["email","username","lastlogintime","isadmin","sessionmaxage","publickey","paywalladdress","paywalltxid","paywalltxnotbefore","verificationtoken","verifiedkey","edited","resetpassword","resendverificationtoken"].map((function(e){return Object(a.a)(x,(function(t){return t&&t[e]}))})),P=Object(r.a)(N,14),L=P[0],A=P[1],D=(P[2],P[3]),U=(P[4],P[5]),V=P[6],M=P[7],F=P[8],B=P[9],G=P[10],W=P[11],Y=P[12],H=(P[13],Object(a.a)(x,(function(e){return e&&e.paywallamount/1e8}))),Q=Object(a.a)(x,(function(e){return e&&Object(o.b)(e.emailnotifications)})),q=function(e){return Object(a.a)(g,O,(function(t,n){var r=n[e];return r?r.map((function(e){return t[e]})):null}))},z=function(e){return Object(a.a)(g,_,(function(t,n){var r=n[e];return r?r.map((function(e){return t[e]})):null}))},K=function(e){return Object(a.a)(w,(function(t){var n=s()(e);return m()(v.a,h.a,f()(n))(t)}))},J=Object(a.a)(S,R,(function(e,t){var n=t&&t.domain;return c()(n)(e)})),X=Object(a.a)(x,(function(e){return e&&e.totp})),Z=Object(a.a)(x,(function(e){return e&&e.totpverified}))},129:function(e,t,n){"use strict";var r=n(18),a=n(0),o=n.n(a),i=n(1),c=n(32),u=["name","options","disabled"],s=function(e,t){return t.find((function(t){return t.value===e}))};t.a=function(e){var t=e.name,n=e.options,a=e.disabled,l=Object(r.a)(e,u);return o.a.createElement(c.d,null,(function(e){var r=e.values,c=e.setFieldValue;return o.a.createElement(i.Select,Object.assign({value:s(r[t],n),onChange:function(e){var n=e.value;c(t,n)},options:n,isDisabled:a},l))}))}},13:function(e,t,n){"use strict";(function(e){n.d(t,"N",(function(){return k})),n.d(t,"M",(function(){return I})),n.d(t,"G",(function(){return x})),n.d(t,"H",(function(){return R})),n.d(t,"L",(function(){return N})),n.d(t,"I",(function(){return P})),n.d(t,"F",(function(){return L})),n.d(t,"J",(function(){return A})),n.d(t,"K",(function(){return D})),n.d(t,"Gb",(function(){return U})),n.d(t,"Eb",(function(){return V})),n.d(t,"Ab",(function(){return M})),n.d(t,"Bb",(function(){return F})),n.d(t,"Db",(function(){return B})),n.d(t,"Fb",(function(){return G})),n.d(t,"Cb",(function(){return W})),n.d(t,"zb",(function(){return Y})),n.d(t,"Q",(function(){return Q})),n.d(t,"b",(function(){return q})),n.d(t,"W",(function(){return z})),n.d(t,"rb",(function(){return K})),n.d(t,"Rb",(function(){return J})),n.d(t,"C",(function(){return X})),n.d(t,"s",(function(){return Z})),n.d(t,"P",(function(){return $})),n.d(t,"O",(function(){return ee})),n.d(t,"db",(function(){return te})),n.d(t,"D",(function(){return ne})),n.d(t,"j",(function(){return re})),n.d(t,"e",(function(){return ae})),n.d(t,"g",(function(){return oe})),n.d(t,"f",(function(){return ie})),n.d(t,"ub",(function(){return ce})),n.d(t,"Sb",(function(){return ue})),n.d(t,"tb",(function(){return se})),n.d(t,"Kb",(function(){return le})),n.d(t,"i",(function(){return fe})),n.d(t,"Qb",(function(){return de})),n.d(t,"bb",(function(){return me})),n.d(t,"ab",(function(){return pe})),n.d(t,"Y",(function(){return he})),n.d(t,"Z",(function(){return be})),n.d(t,"Ob",(function(){return ve})),n.d(t,"wb",(function(){return Ee})),n.d(t,"nb",(function(){return ye})),n.d(t,"fb",(function(){return ge})),n.d(t,"Lb",(function(){return Oe})),n.d(t,"eb",(function(){return _e})),n.d(t,"k",(function(){return je})),n.d(t,"l",(function(){return we})),n.d(t,"z",(function(){return Se})),n.d(t,"E",(function(){return Te})),n.d(t,"jb",(function(){return Ce})),n.d(t,"ib",(function(){return ke})),n.d(t,"d",(function(){return Ie})),n.d(t,"V",(function(){return xe})),n.d(t,"r",(function(){return Re})),n.d(t,"R",(function(){return Ne})),n.d(t,"p",(function(){return Pe})),n.d(t,"Hb",(function(){return Le})),n.d(t,"ob",(function(){return Ae})),n.d(t,"c",(function(){return De})),n.d(t,"mb",(function(){return Ue})),n.d(t,"lb",(function(){return Ve})),n.d(t,"kb",(function(){return Me})),n.d(t,"Jb",(function(){return Fe})),n.d(t,"cb",(function(){return Be})),n.d(t,"Ub",(function(){return Ge})),n.d(t,"gb",(function(){return We})),n.d(t,"hb",(function(){return Ye})),n.d(t,"Nb",(function(){return He})),n.d(t,"sb",(function(){return Qe})),n.d(t,"pb",(function(){return qe})),n.d(t,"Vb",(function(){return ze})),n.d(t,"qb",(function(){return Ke})),n.d(t,"B",(function(){return Je})),n.d(t,"vb",(function(){return Xe})),n.d(t,"x",(function(){return Ze})),n.d(t,"U",(function(){return $e})),n.d(t,"q",(function(){return et})),n.d(t,"y",(function(){return tt})),n.d(t,"Mb",(function(){return nt})),n.d(t,"a",(function(){return rt})),n.d(t,"u",(function(){return at})),n.d(t,"A",(function(){return ot})),n.d(t,"X",(function(){return it})),n.d(t,"w",(function(){return ct})),n.d(t,"v",(function(){return ut})),n.d(t,"t",(function(){return st})),n.d(t,"Pb",(function(){return lt})),n.d(t,"S",(function(){return ft})),n.d(t,"o",(function(){return dt})),n.d(t,"n",(function(){return mt})),n.d(t,"Ib",(function(){return pt})),n.d(t,"xb",(function(){return ht})),n.d(t,"m",(function(){return bt})),n.d(t,"T",(function(){return vt})),n.d(t,"h",(function(){return Et})),n.d(t,"yb",(function(){return yt})),n.d(t,"Tb",(function(){return gt}));var r=n(2),a=n(11),o=n(53),i=n.n(o),c=(n(846),n(27)),u=n(91),s=n.n(u),l=n(12),f=n.n(l),d=n(627),m=n(5),p=n(441),h=n(9),b={400:"Bad response from server",401:"Not authorized",403:"You must be logged in to perform this action.",404:"Not found"},v="".concat("/api/","records/"),E="".concat("/api/","ticketvote/"),y="".concat("/api/","comments/"),g="".concat("/api/","pi/"),O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/api/";return e||t?"".concat(n).concat(t).concat(e):n},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"v1",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/api/";return fetch(O(e,n?void 0:t,r),{credentials:"include"}).then(H)},j=function(e,t,n){return{headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Csrf-Token":e},credentials:"include",method:n,body:JSON.stringify(t)}},w=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/api/",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"v1";return fetch(O(e,a,r),j(t,n,"POST")).then(H)},S=f()("response"),T=function(e){return{name:"index.md",mime:"text/plain; charset=utf-8",payload:Object(h.E)(e)}},C=function(e,t){return{name:t,mime:"text/plain; charset=utf-8",payload:Object(h.E)(JSON.stringify(e))}},k=function(e){var t=e.name,n=e.amount,r=e.startdate,o=e.enddate,i=e.domain,c=e.markdown,u=e.linkby,s=void 0===u?0:u,l=e.linkto,f=void 0===l?"":l,d=e.attachments,p=void 0===d?[]:d;return{files:[T(c),{name:m.eb,mime:"text/plain; charset=utf-8",digest:Object(h.w)({name:t,amount:n,startdate:r,enddate:o,domain:i}),payload:Object(h.a)(Object(h.v)({name:t,amount:n,startdate:r,enddate:o,domain:i}))}].concat(Object(a.a)(s||f?[{name:m.Wb,mime:"text/plain; charset=utf-8",digest:Object(h.w)({linkto:f,linkby:s}),payload:Object(h.a)(Object(h.v)({linkto:f,linkby:s}))}]:[]),Object(a.a)(p||[])).map((function(e){var t=e.name,n=e.mime,r=e.payload,a=e.digest;return{name:t,mime:n,payload:r,digest:a||Object(h.e)(r)}}))}},I=function(e,t,n,r,o,i,c,u,s){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],f=C({version:1,month:e,year:t,exchangerate:n,contractorname:r,contractorlocation:o,contractorcontact:i,contractorrate:c,paymentaddress:u,lineItems:s},"invoice.json"),d=f.name,m=f.mime,p=f.payload;return{id:"",month:e,year:t,exchangerate:n,contractorname:r,contractorlocation:o,contractorcontact:i,contractorrate:c,paymentaddress:u,files:[{name:d,mime:m,payload:p,digest:Object(h.e)(p)}].concat(Object(a.a)(l)).map((function(e){var t=e.name,n=e.mime,r=e.payload;return{name:t,mime:n,payload:r,digest:Object(h.e)(r)}}))}},x=function(e,t,n,r,a,o){return{token:e,parentid:n||0,comment:t,state:r,extradata:a,extradatahint:o}},R=function(e){return{userid:e.userid,token:e.token,commentid:e.commentid,parentid:e.parentid,comment:e.comment,state:e.state,extradata:e.extradata,extradatahint:e.extradatahint}},N=function(e,t,n){return{token:e,comment:t,parentid:n}},P=function(e,t,n,r){return{state:e,token:t,commentid:r,vote:n}},L=function(e,t,n,r){return{state:e,token:t,commentid:r,reason:n}},A=function(e,t,n,r,a){var o=C({type:e,nomineeuserid:t,statement:n,domain:r,contractortype:a},"dcc.json"),i=o.name,c=o.mime,u=o.payload;return{name:i,mime:c,payload:u,digest:Object(h.e)(u)}},D=function(e,t){return{token:e,vote:t}},U=function(t,n){if("string"!==typeof t||"object"!==typeof n)throw Error("signRegister: Invalid params");return c.f(t).then((function(a){var o=n.files.map((function(t){return e.from(f()("digest",t),"hex")})).sort(e.compare),i=new d.a(o).getRoot().toString("hex");return c.j(t,i).then((function(e){return Object(r.a)(Object(r.a)({},n),{},{publickey:a,signature:e})}))}))},V=function(e,t){return c.f(e).then((function(n){return c.j(e,[t.token,t.parentid,t.comment].join("")).then((function(e){return Object(r.a)(Object(r.a)({},t),{},{publickey:n,signature:e})}))}))},M=function(e,t){return c.f(e).then((function(n){return c.j(e,[t.state,t.token,t.parentid,t.comment,t.extradata,t.extradatahint].join("")).then((function(e){return Object(r.a)(Object(r.a)({},t),{},{publickey:n,signature:e})}))}))},F=function(e){var t=e.userid,n=e.token,r=e.commentid,a=e.parentid,o=e.comment,i=e.state,u=e.extradata,s=e.extradatahint;return c.f(t).then((function(e){return c.j(t,[i,n,a,r,o,u,s].join("")).then((function(c){return{userid:t,token:n,commentid:r,parentid:a,comment:o,state:i,extradata:u,extradatahint:s,publickey:e,signature:c}}))}))},B=function(e,t){return c.f(e).then((function(n){return c.j(e,t.digest).then((function(e){return{file:t,publickey:n,signature:e}}))}))},G=function(e,t){return c.f(e).then((function(n){return c.j(e,[t.token,t.vote].join("")).then((function(e){return Object(r.a)(Object(r.a)({},t),{},{publickey:n,signature:e})}))}))},W=function(e,t){return c.f(e).then((function(n){return c.j(e,[t.state,t.token,t.commentid,t.vote].join("")).then((function(e){return Object(r.a)(Object(r.a)({},t),{},{publickey:n,signature:e})}))}))},Y=function(e,t){return c.f(e).then((function(n){return c.j(e,[t.state,t.token,t.commentid,t.reason].join("")).then((function(e){return Object(r.a)(Object(r.a)({},t),{},{publickey:n,signature:e})}))}))},H=function(e){return new i.a((function(t,n){return function(e){return new i.a((function(t,n){var r=e.headers.get("content-type");r&&r.includes("application/json")&&t(e.json());var a=new Error(b[e.status]||"Internal server error");a.internalError=!0,a.statusCode=e.status,n(a)}))}(e).then((function(r){r||200!==e.status||t({response:{},csrfToken:e.headers.get("X-Csrf-Token")});var a=r.errorcode||r.ErrorCode,o=r.errorcontext||r.ErrorContext;r.pluginid&&n(new p.a(r.pluginid,a,o)),a&&n(new p.b(e,a,o)),b[e.status]&&n(new Error(b[e.status])),t({response:r,csrfToken:e.headers.get("X-Csrf-Token")})})).catch((function(e){return n(e)}))}))},Q=function(){return _("/user/me").then(S)},q=function(){return _("","",!0).then((function(e){var t=e.csrfToken,n=e.response;return{csrfToken:t,version:n.version,route:n.route,pubkey:n.pubkey,testnet:n.testnet,mode:n.mode,activeusersession:n.activeusersession}}))},z=function(e,t,n,r){return c.b().then((function(a){return c.e(n,a).then((function(){return c.f(n).then((function(a){return w("/user/new",e,{email:t,username:n,password:Object(h.d)(r),publickey:a}).then(S)}))}))}))},K=function(e,t,n,r,a){return c.b().then((function(o){return c.e(n,o).then((function(){return c.f(n).then((function(o){return w("/register",e,{email:t,username:n,password:Object(h.d)(r),publickey:o,verificationtoken:a}).then(S)}))}))}))},J=function(e,t,n){return c.j(n,t).then((function(n){return _("/user/verify?".concat(s.a.stringify({email:e,verificationToken:t,signature:n})))})).then(S)},X=function(e,t,n){return w("/votes",e,{token:t,userid:n},y).then(S)},Z=function(e,t){return w("/user/edit",e,t).then(S)},$=function(e,t,n,r){return w("/user/manage",e,{userid:t,action:n,reason:r}).then(S)},ee=function(e,t,n,r,a,o){return w("/admin/managecms",e,{userid:t,domain:n,contractortype:r,supervisoruserids:a,proposalsowned:o})},te=function(e,t){return w("/proposals/billing",e,{token:t}).then(S)},ne=function(e,t,n,r){return w("/login",e,{email:t.toLowerCase(),password:Object(h.d)(n),code:r}).then(S)},re=function(e,t){return w("/vote",e,t,y).then(S)},ae=function(e,t){return w("/del",e,t,y).then(S)},oe=function(e,t,n){return w("/user/username/change",e,{password:Object(h.d)(t),newusername:n}).then(S)},ie=function(e,t,n){return w("/user/password/change",e,{currentpassword:Object(h.d)(t),newpassword:Object(h.d)(n)}).then(S)},ce=function(e,t,n){return w("/user/password/reset",e,{username:t,email:n}).then(S)},ue=function(e,t,n,r){return w("/user/password/reset/verify",e,{username:t,verificationtoken:n,newpassword:Object(h.d)(r)}).then(S)},se=function(e,t,n){return c.b().then((function(e){return c.e(n,e)})).then((function(){return c.f(n)})).then((function(n){return w("/user/new/resend",e,{email:t,publickey:n}).then(S)}))},le=function(e,t){return w("/user/key",e,{publickey:t}).then(S)},fe=function(e,t,n,r){return w("/user/codestats",e,{userid:t,starttime:n,endtime:r}).then(S)},de=function(e,t,n){return c.j(t,n).then((function(t){return w("/user/key/verify",e,{signature:t,verificationtoken:n}).then(S)}))},me=function(){return _("/policy").then(S)},pe=function(e){return w("/policy",e,{},E).then(S)},he=function(e){return w("/policy",e,{},y).then(S)},be=function(e){return w("/policy",e,{},g).then(S)},ve=function(e,t){return w("/userrecords",e,{userid:t},v).then(S)},Ee=function(e){return _("/users?".concat(s.a.stringify(e))).then(S)},ye=function(e,t){return w("/records",e,t,v).then(S)},ge=function(e){return w("/details","",e,v).then(S)},Oe=function(e){return _("/user/".concat(e)).then(S)},_e=function(e,t){return w("/comments",e,{token:t},y).then(S)},je=function(e){return w("/count","",{tokens:e},y).then(S)},we=function(e,t,n){return w("/timestamps",e,{token:t,commentids:n},y).then(S)},Se=function(e){return _("/invoices/".concat(e,"/comments")).then(S)},Te=function(e){return w("/logout",e,{})},Ce=function(e,t,n,r,a,o){return c.f(e).then((function(i){return c.j(e,n+a+r+o).then((function(e){return w("/setstatus",t,{status:r,version:a,token:n,signature:e,publickey:i,reason:o},v)}))})).then(S)},ke=function(e,t,n,r,a){var o;return c.f(e).then((function(i){return o=i,c.j(e,n+r+a).then((function(e){return w("/setbillingstatus",t,{token:n,status:r,reason:a,signature:e,publickey:o},g)}))})).then((function(e){var t=S(e),n=t.timestamp,r=t.receipt;return{publickey:o,timestamp:n,receipt:r}}))},Ie=function(e,t){return w("/billingstatuschanges",e,{tokens:t},g).then(S)},xe=function(e,t){return w("/new",e,t,v).then(S)},Re=function(e,t){return w("/edit",e,t,v).then(S)},Ne=function(e,t){return w("/new",e,t,y).then(S)},Pe=function(e,t){return w("/edit",e,t,y).then(S)},Le=function(e,t,n){return c.f(t).then((function(r){return i.a.all(n.map((function(e){return c.j(t,Object(h.w)(e))}))).then((function(t){return w("/start",e,{starts:t.map((function(e,t){return{params:n[t],publickey:r,signature:e}}))},E)}))})).then(S)},Ae=function(e,t){return w("/summaries",e,{tokens:t},E).then(S)},De=function(e,t){return w("/summaries",e,{tokens:t},g).then(S)},Ue=function(e,t){return w("/results",e,{token:t},E).then(S)},Ve=function(e,t){return w("/details",e,{token:t},E).then(S)},Me=function(e){return w("/submissions","",{token:e},E).then(S)},Fe=function(e,t,n){return w("/timestamps",e,{token:t,votespage:n},E).then(S)},Be=function(e,t,n,r,a){return c.f(r).then((function(o){return c.j(r,"".concat(n).concat(a).concat(t)).then((function(r){return w("/authorize",e,{action:t,token:n,version:+a,signature:r,publickey:o},E)}))})).then(S)},Ge=function(){return _("/user/payments/registration").then(S)},We=function(){return _("/user/payments/paywall").then(S)},Ye=function(){return _("/user/payments/paywalltx").then(S)},He=function(){return _("/user/payments/credits").then(S)},Qe=function(e,t){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/api/",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"v1";return fetch(O(e,a,r),j(t,n,"PUT")).then(H)}("/user/payments/rescan",e,{userid:t}).then(S)},qe=function(e,t,n){return w("/inventory","",{state:e,status:t,page:n},v).then(S)},ze=function(e,t){return w("/inventory","",{status:e,page:t},E).then(S)},Ke=function(e,t,n){return w("/timestamps",e,{token:t,version:n},v).then(S)},Je=function(e,t,n,r,a,o){return c.f(e).then((function(i){return c.j(e,n+r+a+o).then((function(e){return w("/invoices/".concat(n,"/status"),t,{status:a,token:n,signature:e,publickey:i,reason:o})}))})).then(S)},Xe=function(e){return _("/cmsusers?".concat(s.a.stringify(e))).then(S)},Ze=function(e,t){return w("/invite",e,t).then(S)},$e=function(e,t){return w("/invoices/new",e,t).then((function(e){var n=e.response.censorshiprecord;return Object(r.a)(Object(r.a)({},t),{},{censorshiprecord:n,timestamp:Date.now()/1e3,status:m.x})}))},et=function(e,t){return w("/invoices/edit",e,t).then(S)},tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _("/invoices/".concat(e)+(t?"?version=".concat(t):"")).then(S)},nt=function(){return _("/user/invoices").then(S)},rt=function(e,t,n,r){return w("/invoices",e,{starttime:t,endtime:n,userid:r}).then(S)},at=function(e){return w("/admin/generatepayouts",e,{}).then(S)},ot=function(e,t,n){return w("/admin/invoicepayouts",e,{starttime:t,endtime:n}).then(S)},it=function(){return _("/admin/payinvoices").then(S)},ct=function(){return _("/proposals/spendingsummary").then(S)},ut=function(e,t){return w("/proposals/spendingdetails",e,{token:t}).then(S)},st=function(e,t,n){return w("/invoices/exchangerate",e,{month:t,year:n}).then(S)},lt=function(e){return _("/user/subcontractors",e).then(S)},ft=function(e,t){return w("/dcc/new",e,t).then((function(e){var n=e.response.censorshiprecord;return Object(r.a)(Object(r.a)({},t),{},{censorshiprecord:n,timestamp:Date.now()/1e3,status:m.k})}))},dt=function(e,t){return w("/dcc",e,t).then(S)},mt=function(e,t){return _("/dcc/".concat(t),e).then(S)},pt=function(e,t){return w("/dcc/supportoppose",e,t).then(S)},ht=function(e,t,n,r,a){return c.f(t).then((function(o){return c.j(t,n+r+a).then((function(t){return w("/dcc/".concat(n,"/status"),e,{status:r,token:n,signature:t,publickey:o,reason:a})}))})).then(S)},bt=function(e){return _("/dcc/".concat(e,"/comments")).then(S)},vt=function(e,t){return w("/dcc/newcomment",e,t).then(S)},Et=function(e){return _("/v1/cmsusers",e).then(S)},yt=function(e,t,n){return w("/user/totp",e,{type:t,code:n}).then(S)},gt=function(e,t){return w("/user/verifytotp",e,{code:t}).then(S)}}).call(this,n(43).Buffer)},134:function(e,t,n){"use strict";n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(4),a=n(0),o=n.n(a),i=n(55),c=n(89),u=n.n(c),s=n(1),l=function(e){var t=e.file,n=e.onRemove;return o.a.createElement("button",{className:u.a.removeFileIcon,onClick:function(e){e.preventDefault(),n(t)}},"\xd7")},f=function(e){var t=e.file,n=e.viewOnly,r=e.onClick,i=e.onRemove,c=e.className,f=Object(a.useCallback)((function(){r(t)}),[r,t]);return o.a.createElement("div",{className:Object(s.classNames)(u.a.imageThumbnailWrapper,n&&u.a.marginRight,c)},o.a.createElement("img",{onClick:f,className:u.a.imageThumbnail,alt:t.name,src:"data:".concat(t.mime,";base64,").concat(t.payload)}),!n&&o.a.createElement(l,{file:t,onRemove:i}))},d=function(e){var t=e.file,n=e.viewOnly,r=e.onRemove;return o.a.createElement("div",{className:Object(s.classNames)(u.a.fileThumbnailWrapper,n&&u.a.marginRight)},o.a.createElement("div",{className:u.a.fileThumbnail},o.a.createElement(s.P,{className:u.a.fileThumbnailText},".txt")),!n&&o.a.createElement(l,{file:t,onRemove:r}))},m=n(11),p=function(e){var t=e.errors.files||[];return(Array.isArray(t)?Object(m.a)(new Set(t)):[t]).map((function(e){return e&&o.a.createElement("p",{key:e,className:u.a.fileErrorText},e)}))},h=n(351),b=n(25),v=n(9),E=function(e){var t=e.value,n=void 0===t?[]:t,a=e.onRemove,c=e.errors,s=void 0===c?[]:c,l=e.viewOnly,m=void 0!==l&&l,E=Object(v.k)(n),y=Object(b.a)(),g=Object(r.a)(y,2),O=g[0],_=g[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(p,{errors:s}),o.a.createElement(i.a,{className:u.a.thumbnailGrid,justify:"left",topMarginSize:s?"s":"m"},E.map((function(e,t){return e.mime.includes("image")?o.a.createElement(f,{key:"img-".concat(t),file:e,viewOnly:m,onClick:(n=t,function(){O(h.a,{images:E,onClose:_,initialIndex:n})}),onRemove:a}):o.a.createElement(d,{key:"txt-".concat(t),file:e,viewOnly:m,onRemove:a});var n}))))}},140:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(0),o=n(147);function i(e,t){var n=Object(a.useState)(null),i=Object(r.a)(n,2),c=i[0],u=i[1],s=Object(a.useState)((function(){try{return function(e){var t=localStorage.getItem(e);return JSON.parse(t)}(e)||t}catch(n){return u(n),t}})),l=Object(r.a)(s,2),f=l[0],d=l[1],m=Object(a.useCallback)((function(t){try{!function(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)}(e,t),d(t)}catch(n){u(n)}}),[e,u]);return Object(o.a)("storage",(function(t){if(t.key===e&&t.newValue!==t.oldValue)try{var n=JSON.parse(t.newValue);d(n)}catch(r){u(r)}})),c&&console.log(c),[f,m,c]}},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=t}),[t]),Object(r.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(10),a=n(8),o=n(6);function i(){var e=Object(o.c)(a.p),t=Object(o.c)(a.eb);return{user:e,username:e&&e.username,onLogout:Object(o.b)(r.gb),isCMS:t}}},150:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n(26),c=n(33);t.a=function(){var e=Object(c.c)().currentUser;return e?a.a.createElement(o.Message,{className:"margin-bottom-m",kind:"error"},a.a.createElement(o.P,null,"Your identity is invalid. You cannot currently submit proposals or comments, please visit your"," ",a.a.createElement(i.a,{to:"/user/".concat(e.userid)},"account")," page to correct this problem.")):null}},151:function(e,t,n){"use strict";var r=n(33),a=n(14),o=n.n(a),i=function(e){var t=e.children,n=e.fallback,a=Object(r.c)(),o=a.initDone,i=a.currentUser;return o&&i?t:n};i.propTypes={children:o.a.node,fallback:o.a.node},i.defaultProps={fallback:null},t.a=i},152:function(e,t,n){"use strict";var r=n(308);n.d(t,"a",(function(){return r.a}))},161:function(e,t,n){e.exports={setContainer:"Totp_setContainer__sCvoG",qrcode:"Totp_qrcode__2ml2E",instructions:"Totp_instructions__2bv0-",copyableKey:"Totp_copyableKey__OaYJp",resetLink:"Totp_resetLink__2RJep",inputLabel:"Totp_inputLabel__3kCoL",totpAuthenticators:"Totp_totpAuthenticators__wVzEN"}},162:function(e,t,n){e.exports={title:"FormWrapper_title__zI0T4",form:"FormWrapper_form__2nijH",actions:"FormWrapper_actions__K_Xwy",errorMessage:"FormWrapper_errorMessage__2Gx4v",singleAction:"FormWrapper_singleAction__1Bmt2 FormWrapper_actions__K_Xwy",footer:"FormWrapper_footer__CQLM4",loader:"FormWrapper_loader__2Fos1"}},163:function(e,t,n){e.exports={container:"VerifyKey_container__3tvlw",iconAndTextWrapper:"VerifyKey_iconAndTextWrapper__1L5QD",iconWrapper:"VerifyKey_iconWrapper__2XGjr",btn:"VerifyKey_btn__2Eyow"}},164:function(e,t,n){e.exports={likeBox:"Likes_likeBox__3r_IU",leftLikeBox:"Likes_leftLikeBox__1MfQu Likes_likeBox__3r_IU",rightLikeBox:"Likes_rightLikeBox__Wdxpt Likes_likeBox__3r_IU",likeBoxSpinner:"Likes_likeBoxSpinner__SYMcr",likeBtn:"Likes_likeBtn__1c0lh",likesResult:"Likes_likesResult__1PStH",likeDisabled:"Likes_likeDisabled__z3SHu"}},17:function(e,t,n){"use strict";n.d(t,"o",(function(){return j})),n.d(t,"j",(function(){return w})),n.d(t,"c",(function(){return S})),n.d(t,"A",(function(){return T})),n.d(t,"r",(function(){return C})),n.d(t,"t",(function(){return k})),n.d(t,"D",(function(){return I})),n.d(t,"C",(function(){return x})),n.d(t,"F",(function(){return R})),n.d(t,"v",(function(){return N})),n.d(t,"J",(function(){return P})),n.d(t,"H",(function(){return L})),n.d(t,"I",(function(){return A})),n.d(t,"z",(function(){return D})),n.d(t,"E",(function(){return U})),n.d(t,"q",(function(){return V})),n.d(t,"w",(function(){return M})),n.d(t,"u",(function(){return F})),n.d(t,"G",(function(){return B})),n.d(t,"x",(function(){return G})),n.d(t,"y",(function(){return W})),n.d(t,"s",(function(){return Y})),n.d(t,"B",(function(){return H})),n.d(t,"m",(function(){return Q})),n.d(t,"n",(function(){return q})),n.d(t,"d",(function(){return z})),n.d(t,"h",(function(){return K})),n.d(t,"i",(function(){return J})),n.d(t,"b",(function(){return X})),n.d(t,"a",(function(){return Z})),n.d(t,"p",(function(){return $})),n.d(t,"k",(function(){return ee})),n.d(t,"f",(function(){return te})),n.d(t,"g",(function(){return ne})),n.d(t,"e",(function(){return re})),n.d(t,"l",(function(){return ae})),n.d(t,"K",(function(){return oe}));var r=n(4),a=n(11),o=n(3),i=n(2),c=n(5),u=n(9),s=n(20),l=n.n(s),f=n(73),d=n.n(f),m=n(138),p=n.n(m),h=n(52),b=n.n(h),v=n(335),E=n.n(v),y=n(336),g=n.n(y),O=n(12),_=n.n(O),j=function(e){return e&&e.results?e.results.reduce((function(e,t){return e+t.votes}),0):0},w=function(e){return Math.trunc(e.eligibletickets*e.quorumpercentage/100)},S=function(e){return e.eligibletickets},T=function(e){return!!e&&e.status===c.jb},C=function(e,t){return F(e,t)&&e.linkby&&k(e.linkby)},k=function(e){return Math.round((new Date).getTime()/1e3)<Number(e)},I=function(e,t){var n=(new Date).getTime()/1e3;return Math.round(n+t)<e},x=function(e,t,n){var r=n&&!b()(n)&&!Object.values(n).some((function(e){return[c.Fb,c.Db,c.Ib,c.Cb].includes(e.status)}));return F(e,t)&&A(t)&&e.linkby&&(new Date).getTime()/1e3>Number(e.linkby)&&r},R=function(e){return e.status===c.kb},N=function(e){return(null===e||void 0===e?void 0:e.status)===c.ib},P=function(e){return!!e&&e.status===c.Hb},L=function(e){return!!e&&e.status===c.Eb},A=function(e){return!!e&&(e.status===c.Fb||e.status===c.Db||e.status===c.Ib)},D=function(e,t){return R(e)||U(e,t)&&P(t)},U=function(e,t){return T(e)&&!B(t)&&!A(t)},V=function(e){return!!e&&(e.status===c.lb||e.status===c.ub)},M=function(e){return!!e&&(e.status===c.vb||e.status===c.ob)},F=function(e,t){return!!(e&&t&&T(e))&&t.status===c.Db},B=function(e){return!!e&&e.status===c.Cb},G=function(e){return!!e&&e.status===c.pb},W=function(e){return!!e&&e.status===c.qb},Y=function(e){return!!e&&e.status===c.mb},H=function(e){return!!e&&e.status===c.rb},Q=function(e,t){return e?+e.endblockheight-t:null},q=function(e,t,n){if(!e)return"";var r=Q(e,t),a=n?r*c.f:r*c.e,o=new Date(6e4*a+Date.now());return Math.round(o/1e3)},z=function(e){var t=e.find((function(e){return"index.md"===e.name}));return t?Object(u.t)(t):""},K=function(e){return e&&e.censorshiprecord&&e.censorshiprecord.token},J=function(e,t){return t?"/record/".concat(Object(u.C)(e)):"".concat(c.J,"/record/").concat(e)},X=function(e,t){return t?"/record/".concat(Object(u.C)(e),"?scrollToComments=true"):"".concat(c.J,"/record/").concat(e,"?scrollToComments=true")},Z=function(e,t){return t?"/user/".concat(e):"".concat(c.J,"/user/").concat(e)},$=function(e,t){return function(n){if(!n.metaKey&&!n.ctrlKey)return e.push(t)}},ee=function(e,t,n){return d()(e).reduce((function(r,a){var c=Object(u.C)(K(a)),s=!!a.linkby,f=!!a.linkto;if(!f&&!s)return r;if(f){var m=e[Object(u.C)(a.linkto)];return m?l()([c,"proposedFor"],m.name)(r):r}if(s){var h,b=(null===(h=a.linkedfrom)||void 0===h?void 0:h.map((function(e){return Object(u.C)(e)})))||[],v=b&&{proposals:d()(p()(e,b)),voteSummaries:p()(t,b),proposalSummaries:p()(n,b)};return Object(i.a)(Object(i.a)({},r),{},Object(o.a)({},c,Object(i.a)(Object(i.a)({},a),{},{rfpSubmissions:v})))}return r}),e)},te=function(e,t,n){var r;if(e){var a=!!e.linkby,o=!!e.linkto;if(!a&&!o)return e;var c=a&&t,s=o&&!b()(n);return c?Object(i.a)(Object(i.a)({},e),{},{rfpSubmissions:t}):s?Object(i.a)(Object(i.a)({},e),{},{proposedFor:null===(r=n[Object(u.C)(e.linkto)])||void 0===r?void 0:r.name}):e}},ne=function(e,t){var n,r;return _()(e)(t?(n={},Object(o.a)(n,c.kb,c.Ub),Object(o.a)(n,c.hb,c.c),Object(o.a)(n,c.ib,c.g),Object(o.a)(n,c.jb,c.Jb),n):(r={},Object(o.a)(r,c.Hb,c.Tb),Object(o.a)(r,c.Eb,c.d),Object(o.a)(r,c.Cb,c.a),Object(o.a)(r,c.Db,c.b),Object(o.a)(r,c.Ib,c.Nb),Object(o.a)(r,c.Gb,c.o),r))},re=function(e,t){var n;return e?J(null===(n=e.censorshiprecord)||void 0===n?void 0:n.token,t,e.state):""},ae=function(e,t){return[E()(t)(e),g()(e.length-t)(e)]},oe=function(e,t,n){return Object.entries(e).reduce((function(e,c){var u=Object(r.a)(c,2),s=u[0],l=u[1];return Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},s,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.reduce((function(e,r){var o=ne(r,t);return[].concat(Object(a.a)(e),Object(a.a)(n[o]||[]))}),[])}(l,n,t)))}),{})}},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(10),a=n(6);function o(){return{onFetchRecordTimestamps:Object(a.b)(r.M),onFetchCommentsTimestamps:Object(a.b)(r.v),onFetchTicketVoteTimestamps:Object(a.b)(r.O),onFetchVotesBundle:Object(a.b)(r.V)}}},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(18),a=n(0),o=n.n(a),i=n(14),c=n.n(i),u=n(326),s=n.n(u),l=n(656),f=n.n(l),d=n(4),m=n(2),p=n(1),h=function(e){var t=e.show,n=e.onClose,r=e.link,a=document.createElement("a");return a.href=r,o.a.createElement(p.Modal,{show:t,onClose:n,title:"Warning: Leaving Politeia"},o.a.createElement(p.Message,{kind:"warning"},o.a.createElement(p.P,null," ","You are about to be sent to an external website. This can result in unintended consequences.",o.a.createElement("strong",null," DO NOT")," enter your Politeia credentials or reveal any other sensitive information.",o.a.createElement("strong",null," DO NOT")," download or run any linked files on the computer storing your cryptocurrencies.")),o.a.createElement("div",{className:"margin-top-s"},o.a.createElement(p.Text,{className:"margin-top-s",weight:"bold"},"External link:"),o.a.createElement("div",{className:"margin-top-xs",style:{display:"inline-block",border:"1px solid #dcdcdc",padding:".5em",borderRadius:"6px",background:"#dcdcdc5c",width:"100%"}},o.a.createElement(p.Text,null,a.protocol+"//"),o.a.createElement(p.Text,{color:"orange"},a.hostname),o.a.createElement(p.Text,null,a.pathname+a.search+a.hash))),o.a.createElement("div",{className:"margin-top-m justify-center"},o.a.createElement(p.Text,{weight:"semibold"},"Are you sure you want to open this link?")),o.a.createElement("div",{className:"margin-top-m justify-right"},o.a.createElement(p.Button,{className:"margin-top-s",onClick:function(){var e=window.open();e.opener=null,e.location.href=r,e.target="_blank",n()}},"Yes, proceed")))},b=n(25),v=n(450),E=n.n(v),y=function(e){var t=e.url,n=e.children,r=Object(b.a)(),a=Object(d.a)(r,2),i=a[0],c=a[1];return function(e){if("string"===typeof e)return e;var t=e.props;if(!t)return e;var n=Object(m.a)({},t);return n.url&&(n.url=E.a.uriInDoubleQuotedAttr(t.url)),n.href&&(n.href=E.a.uriInDoubleQuotedAttr(t.href)),Object(m.a)(Object(m.a)({},e),{},{props:n})}(o.a.createElement("a",{href:t,onClick:function(e){(function(e){var t=document.createElement("a");return t.href=e,t.hostname&&t.hostname!==window.top.location.hostname})(t)&&(e.preventDefault(),i(h,{onClose:c,link:t}))}},n))},g=function(e){return function(t){var n=t.src,r=t.alt;return e?o.a.createElement("img",{src:n,alt:r}):o.a.createElement(y,{url:n},r)}},O=function(e){var t=e.href,n=e.children;return o.a.createElement(y,{url:t},n)},_=function(e){return{img:g(e),a:O}},j=(n(1180),["body","className","renderImages","disallowedElements"]),w=function(e){var t=e.body,n=e.className,a=e.renderImages,i=void 0===a||a,c=e.disallowedElements,u=Object(r.a)(e,j);return o.a.createElement("div",Object.assign({className:n},u,{"data-testid":"markdown-wrapper"}),o.a.createElement(s.a,{className:"markdown-body",skipHtml:!0,unwrapDisallowed:!0,remarkPlugins:[f.a],components:_(i),disallowedElements:c},t))};w.prototype={body:c.a.string,className:c.a.string,confirmWithModal:c.a.bool,renderImages:c.a.bool,displayExternalLikWarning:c.a.bool,escapeHtml:c.a.bool};var S=o.a.memo(w)},182:function(e,t,n){e.exports={titleWrapper:"Search_titleWrapper__1wGsc",searchBox:"Search_searchBox__3d0Cf",select:"Search_select__3IQT2",searchButton:"Search_searchButton__2ixLQ",searchByRadioGroup:"Search_searchByRadioGroup__18zyc",searchByRadioButton:"Search_searchByRadioButton__2xepw"}},183:function(e,t,n){e.exports={wrapper:"ModalFullImage_wrapper__3hy-o",content:"ModalFullImage_content__3c896",navigator:"ModalFullImage_navigator__1AhjN",navigatorIcon:"ModalFullImage_navigatorIcon__2ERqz",navigatorCard:"ModalFullImage_navigatorCard__3COXB"}},184:function(e,t,n){e.exports={label:"InfoSection_label__hT5YY",darkLabel:"InfoSection_darkLabel__2tuO_",sectionWrapper:"InfoSection_sectionWrapper__nb5kw",info:"InfoSection_info__2Rrcv",noInfo:"InfoSection_noInfo__3DGkE",infoError:"InfoSection_infoError__270zC"}},185:function(e,t,n){e.exports={form:"InvoiceFilterForm_form__2dYRn",checkboxesWrapper:"InvoiceFilterForm_checkboxesWrapper__2g52X",topFilters:"InvoiceFilterForm_topFilters__1uQSG",monthPicker:"InvoiceFilterForm_monthPicker__18SK-",presetDates:"InvoiceFilterForm_presetDates__VNzzq",selector:"InvoiceFilterForm_selector__1zM9b"}},186:function(e,t,n){e.exports={spinnerWrapper:"ProposalBillingDetails_spinnerWrapper__1_EsJ",totalText:"ProposalBillingDetails_totalText__1g4ml",reference:"ProposalBillingDetails_reference__10tko",value:"ProposalBillingDetails_value__O9X-U",tableWrapper:"ProposalBillingDetails_tableWrapper__16Kxs",table:"ProposalBillingDetails_table__yxyq6"}},205:function(e,t,n){"use strict";var r=n(18),a=n(1),o=n(0),i=n.n(o),c=n(340),u=n(310),s=["title","onLoggedIn","onClose"];t.a=i.a.memo((function(e){var t=e.title,n=void 0===t?"Login":t,o=e.onLoggedIn,l=e.onClose,f=Object(r.a)(e,s);return Object(u.a)(l),i.a.createElement(a.Modal,Object.assign({title:n,onClose:l,iconType:"info","data-testid":"modal-login",iconSize:"lg"},f,{contentStyle:{width:"100%"},titleStyle:{paddingRight:"4rem"}}),i.a.createElement(c.a,{onLoggedIn:o,hideTitle:!0,redirectToPrivacyPolicyRoute:!0,emailId:"modalloginemail",passwordId:"modalloginpassword",renderPrivacyPolicyModal:!1}))}))},206:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(0),a=n(29);function o(e){var t=Object(a.d)().title,n=e||t;Object(r.useEffect)((function(){!function(e){document.title=e}(n)}),[n])}t.a=o},207:function(e,t,n){"use strict";var r=n(0);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(r.useLayoutEffect)((function(){e||window.scrollTo(0,0)}),[e])}},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var r=n(11),a=n(4),o=n(3),i=n(2),c=n(0),u=n(8),s=n(10),l=n(69),f=n(6),d=n(84),m=n(22),p=n(73),h=n.n(p),b=n(262),v=n.n(b),E=n(103),y=n.n(E),g=n(120),O=n.n(g),_=n(81),j=n.n(_),w=n(52),S=n.n(w),T=n(448),C=n.n(T),k=n(137),I=n.n(k),x=n(155),R=n.n(x),N=n(334),P=n.n(N),L=n(5),A=n(9),D=n(17),U=function(e,t){return R()(t.map((function(e){return Object(A.C)(e)})))(I()(e).map((function(e){return Object(A.C)(e)})))},V={},M=function(e,t){Object.keys(e).forEach((function(n){var r=Object(A.C)(n);V[r]=C()(V[r])||t?e[n].status:V[r]}))};function F(e,t,n,r){var a,c,u=Object(D.k)(function(e){return Object.keys(e).reduce((function(t,n){var r=Object(A.C)(n);return Object(i.a)(Object(i.a)({},t),{},Object(o.a)({},r,Object(i.a)(Object(i.a)({},e[n]),{},{voteStatus:V[r]})))}),{})}(e),t,n);return c=u,(a=r)&&a.forEach((function(e){c[e]&&(c[e].forceLoad=!0)})),c}function B(e){var t=e.fetchRfpLinks,n=e.fetchVoteSummary,o=void 0!==n&&n,i=e.fetchProposalSummary,p=void 0!==i&&i,b=e.unvetted,E=void 0!==b&&b,g=e.proposalStatus,_=e.statuses,w=e.proposalPageSize,T=e.inventoryPageSize,k=Object(c.useState)([]),I=Object(a.a)(k,2),x=I[0],R=I[1],N=Object(c.useState)(_),V=Object(a.a)(N,2),B=V[0],G=V[1],W=Object(c.useState)(!1),Y=Object(a.a)(W,2),H=Y[0],Q=Y[1],q=C()(B),z=Object(f.c)(u.t),K=Object(f.c)(u.ec),J=E?L.fb:L.gb,X=q?g||[L.kb]:B,Z=Object(c.useState)(0),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useMemo)((function(){return X[ee]}),[X,ee]),re=Object(f.c)(u.rc);M(re);var ae=Object(f.c)(u.cc),oe=Object(f.c)(u.l),ie=Object(f.c)(q?u.a:u.b),ce=Object(c.useMemo)((function(){return Object(D.g)(ne,q)}),[ne,q]),ue=ce===L.b,se=Object(c.useMemo)((function(){return ie[ce]||[]}),[ie,ce]),le=Object(c.useMemo)((function(){return K?se.filter((function(e){return!!K[e]})):[]}),[K,se]),fe=Object(c.useMemo)((function(){return se?Math.floor(+se.length/T):0}),[se,T]),de=Object(c.useMemo)((function(){return Object(l.b)(u.i,u.j)}),[]),me=Object(f.c)(de),pe=Object(f.b)(s.J),he=Object(f.b)(s.P),be=Object(f.b)(s.t),ve=!S()(x),Ee=Object(c.useMemo)((function(){return z&&ue?le.filter((function(e){return S()(oe[Object(A.C)(e)])})):[]}),[z,ue,le,oe]),ye=Object(m.f)({actions:{initial:function(){return _e(m.d)},start:function(){if(!w)return _e(m.c);if(x.length>w)return _e(m.e);if(H&&(!(se.length%T===0&&se.length>0)||x.length===w&&X[ee+1])){var e=function e(t,n){var a=X[t],o=U(K,y()(ie[Object(D.g)(a,q)]||[])),i=[].concat(Object(r.a)(n),Object(r.a)(o));return i.length<w&&t<X.length?e(t+1,i):{index:(null===o||void 0===o?void 0:o.length)?t:t-1,tokens:i}}(ee+1,x),t=e.index,n=e.tokens;return te(t),R(n),S()(n)?_e(m.c):_e(m.e)}return he(J,fe&&ne,fe+1,!q).catch((function(e){return _e(m.b,e)})).then((function(e){var t=e.votes,n=e.records;Q(!0);var a=Object(D.g)(ne,q),o=q?n:t,i=o[a],c=[].concat(Object(r.a)(i),Object(r.a)(x));R(c);var u=c.length===w,s=ee+1<X.length,l=c.length<w&&s;if(u&&s||l){var f=ee+1,d=X[f],p=U(K,y()((fe?ie:o)[Object(D.g)(d,q)]||[]));return R([].concat(Object(r.a)(c),Object(r.a)(p))),te(f),_e(m.d)}return _e(m.e)})),_e(m.a)},verify:function(){var e;if(!ve&&!Ee.length)return _e(m.c,{proposals:K});if(Ee.length){var n=Object(D.l)(Ee,w),i=Object(a.a)(n,1)[0];return be(i).then((function(){return _e(m.e)})).catch((function(e){return _e(m.b,e)})),_e(m.a)}var c,u=Object(D.l)(x,w),s=Object(a.a)(u,2),l=s[0],f=s[1];return ue&&z&&(c=l.filter((function(e){return S()(oe[Object(A.C)(e)])}))),Promise.all([(null===(e=c)||void 0===e?void 0:e.length)&&be(c),pe({tokens:l,fetchVoteSummary:o,fetchProposalSummary:p})]).then((function(e){var n=Object(a.a)(e,2),o=Object(a.a)(n[1],1)[0];if(S()(o))return R(f),_e(m.c);var i=U(P()(K,o),l);if(R([].concat(Object(r.a)(i),Object(r.a)(f))),t){var c=function(e){return j()(h.a,O()((function(e){return e.linkto})),y.a,v.a)(e)}(o),u=U(K,c);if(!S()(u))return R([].concat(Object(r.a)(u),Object(r.a)(i),Object(r.a)(f))),_e(m.e)}return _e(m.c)})).catch((function(e){return _e(m.b,e)})),_e(m.a)},done:function(){if(Ee.length)return _e(m.e)}},initialValues:{status:"idle",loading:!0,proposals:{},proposalsTokens:{},verifying:!0}}),ge=Object(a.a)(ye,2),Oe=ge[0],_e=ge[1],je=!x.length&&"success"===Oe.status&&!U(K,se).length,we=se&&se.length&&se.length%T===0,Se=Object(c.useCallback)((function(){return x.length<w?_e(m.d):_e(m.e)}),[_e,x,w]),Te=me||Oe.error;return Object(d.a)(Te),Object(c.useEffect)((function(){_e(m.d)}),[w,_e]),{proposals:F(K,re,ae,Ee),onFetchProposalsBatch:pe,proposalsTokens:ie,loading:Oe.loading||!h()(K).length&&ee+1<(null===B||void 0===B?void 0:B.length),verifying:Oe.verifying,onRestartMachine:function(e){M(re,!0);var t=[],n=0,r=e||X,a=r.find((function(e,r){var a=Object(D.g)(e,q);return(t=U(K,y()(ie[a]||[]))).length>0&&(n=r,!0)}));return R(t),q?g=r:G(r),a?(te(n),_e(m.d)):(te(r.length-1),_e(m.c))},onFetchMoreProposals:Se,hasMoreProposals:!!x.length&&!!h()(K).length||we,isProposalsBatchComplete:je&&!we,machineCurrentState:Oe.status}}},209:function(e,t,n){"use strict";var r=n(2),a=n(19),o=n(4),i=n(0),c=n(33),u=n(27);function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:_(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=l;var d={};function m(){}function p(){}function h(){}var b={};u(b,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(C([])));E&&E!==t&&n.call(E,o)&&(b=E);var y=h.prototype=m.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=f(e[a],e,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new O(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),u(y,c,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var l="Failed to load user identity. You need tor restore it from a backup or generate a new one.",f="User identity doesn't match with the server identity.";t.a=function(){var e=Object(i.useState)(null),t=Object(o.a)(e,2),n=t[0],d=t[1],m=Object(i.useState)(null),p=Object(o.a)(m,2),h=p[0],b=p[1],v=Object(c.c)(),E=v.initDone,y=v.currentUser,g=E&&!!y,O=!!y&&y.userid,_=!!y&&y.publickey;return Object(i.useEffect)((function(){function e(){return(e=Object(a.a)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.c(O);case 3:if(t=e.sent){e.next=6;break}throw new Error(l);case 6:if(n=t.publicKey===_,b(Object(r.a)(Object(r.a)({},t),{},{valid:n})),n){e.next=10;break}throw new Error(f);case 10:d(null),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}g&&O&&function(){e.apply(this,arguments)}()}),[g,O,_]),[h,n]}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return m}));var r,a=n(5),o=n(9),i=function(e){return e/1e8},c=function(e){return new Date(1e3*e).toUTCString()},u=function(e){var t=new Date(1e3*e);return{day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()}},s=function(e){var t=new Date(1e3*e);return"".concat(t.getUTCDate()," ").concat(a.I[t.getUTCMonth()]," ").concat(t.getUTCFullYear())},l=(r="USD",new Intl.NumberFormat("en-US",{style:"currency",currency:r})),f=function(e){return(e/100).toFixed(2)+" USD"},d=function(e){var t=e&&e.errorid&&{"comments-user":3,comments:2,"records-user":10,"pi-user":2,"ticketvote-user":2,ticketvote:2,www:21}[e.errorid]===e.errorcode;return(null===e||void 0===e?void 0:e.message)===a.n||t};function m(e){var t=e,n=e.match(/[0-9]+/g);return n&&n.forEach((function(e){var n=Object(o.f)(u(e));t=t.replace(e,n)})),t}},210:function(e,t,n){"use strict";var r=n(4),a=n(8),o=n(10),i=n(6),c=n(23);t.a=function(){var e=Object(i.c)(a.lc),t=Object(i.b)(o.U),n=Object(c.a)(t,[],!e),u=Object(r.a)(n,2),s=u[0];return{subContractors:e,error:u[1],loading:s}}},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(0),o=n(36);function i(e){var t=Object(o.a)().policy,n=Object(a.useState)(t?e(t):null),i=Object(r.a)(n,2),c=i[0],u=i[1];return Object(a.useEffect)((function(){t&&!c&&u(e(t))}),[t,c,e]),c}},212:function(e,t,n){"use strict";var r=n(4),a=n(0),o=n(85);t.a=function(e,t){var n=Object(a.useState)(Object(o.a)(e)||t),i=Object(r.a)(n,2),c=i[0],u=i[1];return[c,Object(a.useCallback)((function(t){u(t),Object(o.c)(e,t)}),[e])]}},213:function(e,t,n){"use strict";var r=n(4),a=n(0),o=n(212),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.findIndex((function(t){return t===e}));return r>=0?r:n};t.a=function(e,t,n){var c=Object(a.useMemo)((function(){return n.map((function(e){return e.toLowerCase()}))}),[n]),u=Object(o.a)(e,n[t]),s=Object(r.a)(u,2),l=s[0],f=s[1],d=Object(a.useState)(i(l,c,t)),m=Object(r.a)(d,2),p=m[0],h=m[1],b=Object(a.useCallback)((function(e){var t=c[e];f(t)}),[c,f]);return Object(a.useEffect)((function(){h(i(l,c,t))}),[l,c,t]),[p,b]}},214:function(e,t,n){"use strict";n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return D}));var r=n(11),a=n(4),o=n(0),i=n(8),c=n(10),u=n(69),s=n(6),l=n(84),f=n(22),d=n(73),m=n.n(d),p=n(262),h=n.n(p),b=n(103),v=n.n(b),E=n(120),y=n.n(E),g=n(177),O=n.n(g),_=n(81),j=n.n(_),w=n(52),S=n.n(w),T=n(137),C=n.n(T),k=n(155),I=n.n(k),x=n(334),R=n.n(x),N=n(17),P=n(48);function L(){var e=Object(s.c)(i.H),t=Object(s.b)(c.eb),n=Object(s.b)(c.wb),r=Object(s.b)(c.l),u=Object(o.useState)(Object(s.d)(P.d)),l=Object(a.a)(u,1)[0];return Object(o.useEffect)((function(){e||t()}),[t,e]),Object(o.useEffect)((function(){return l}),[l]),{draftProposals:e,onLoadDraftProposals:t,onSaveDraftProposal:n,onDeleteDraftProposal:r}}var A=function(e,t){return I()(t)(C()(e))};function D(e){var t=e.proposalPageSize,n=e.fetchRfpLinks,d=void 0===n||n,p=e.fetchVoteSummary,b=void 0===p||p,E=e.fetchProposalSummary,g=void 0===E||E,_=e.userID,w=Object(o.useState)([]),T=Object(a.a)(w,2),C=T[0],k=T[1],I=Object(s.c)(i.rc),x=Object(s.c)(i.cc),P=Object(o.useMemo)((function(){return i.Ob(_)}),[_]),L=Object(o.useMemo)((function(){return i.Nb(_)}),[_]),D=Object(s.c)(L),U=Object(s.c)(P),V=U?[].concat(Object(r.a)(U.unvetted),Object(r.a)(U.vetted)):[],M=Object(o.useMemo)((function(){return i.qb(_)}),[_]),F=Object(s.c)(M),B=Object(o.useMemo)((function(){return Object(u.b)(i.i,i.j)}),[]),G=Object(s.c)(B),W=Object(s.b)(c.J),Y=Object(s.b)(c.T),H=!S()(C),Q=Object(f.f)({actions:{initial:function(){return K(f.d)},start:function(){return H?K(f.e):(Y(_).catch((function(e){return K(f.b,e)})).then((function(e){var t=[].concat(Object(r.a)(e.unvetted),Object(r.a)(e.vetted));return t?(k(t),K(f.e)):K(f.c)})),K(f.a))},verify:function(){if(!H)return K(f.c,{proposals:D});if(D&&F===D.length)return K(f.c,{proposals:D});var e=Object(N.l)(C,t),n=Object(a.a)(e,2),o=n[0],i=n[1];return W({tokens:o,fetchVoteSummary:b,fetchProposalSummary:g,userid:_}).then((function(e){var t=Object(a.a)(e,1)[0];if(S()(t))return k(i),K(f.c);if(d){var n=function(e){return j()(m.a,y()((function(e){return e.linkto})),v.a,h.a)(e)}(t),c=function(e){return j()(m.a,O()((function(e,t){return[].concat(Object(r.a)(e),Object(r.a)(t.linkedfrom||[]))}),[]),v.a,h.a)(e)}(t),u=A(D,[].concat(Object(r.a)(n),Object(r.a)(c)));if(!S()(u))return W({tokens:u,fetchVoteSummary:b,fetchProposalSummary:g,userid:_}).then((function(){var e=A(R()(D,t),o);return k([].concat(Object(r.a)(e),Object(r.a)(i))),K(f.c)})).catch((function(e){return K(f.b,e)})),K(f.a)}return k(Object(r.a)(i)),K(f.c)})).catch((function(e){return K(f.b,e)})),K(f.a)},done:function(){}},initialValues:{status:"idle",loading:!0,proposals:{},proposalsTokens:{},verifying:!0}}),q=Object(a.a)(Q,2),z=q[0],K=q[1],J=Object(o.useCallback)((function(){return S()(C)?K(f.d):K(f.e)}),[K,C]),X=G||z.error;return Object(l.a)(X),{proposals:D?Object.values(Object(N.k)(D,I,x)):[],onFetchProposalsBatch:W,proposalsTokens:V,loading:z.loading,verifying:z.verifying,onFetchMoreProposals:J,hasMoreProposals:!!C.length,machineCurrentState:z.status,numOfUserProposals:F}}},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return E})),n.d(t,"f",(function(){return _}));var r,a=n(4),o=n(2),i=n(3),c=n(0),u=n(68),s=n.n(u),l=n(20),f=n.n(l),d=n(30),m=n.n(d),p="FETCH",h="START",b="RESOLVE",v="VERIFY",E="REJECT",y={status:"idle",loading:!1},g=(r={},Object(i.a)(r,p,"loading"),Object(i.a)(r,v,"verifying"),Object(i.a)(r,E,"failure"),Object(i.a)(r,b,"success"),Object(i.a)(r,"RETRY","idle"),Object(i.a)(r,h,"starting"),r),O=function(e,t){var n=function(e){return s()(g,e.type)}(t);if(!n)return f()("error",new Error("unhanlded state change"))(e);switch(t.type){case p:return m()(f()("status",n),f()("loading",!0),f()("verifying",!1))(e);case h:return m()(f()("status",n),f()("loading",!1),f()("verifying",!1))(e);case b:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,verifying:!1,status:n},t.payload||{});case v:return m()(f()("loading",!1),f()("verifying",!0),f()("status",n))(e);case E:return m()(f()("loading",!1),f()("verifying",!1),f()("error",t.payload),f()("status",n))(e);case"RETRY":return t.payload;default:return f()("error",new Error("unhanlded state machine action"))(e)}};function _(e){var t=e.actions,n=e.initialValues,r=Object(c.useReducer)(O,n||y),o=Object(a.a)(r,2),i=o[0],u=o[1];Object(c.useEffect)((function(){switch(i.status){case"idle":return t.initial&&t.initial();case"starting":return t.initial&&t.start();case"loading":return t.load&&t.load();case"verifying":return t.verify&&t.verify();case"success":return t.done&&t.done();case"failure":return t.error&&t.error(i.error);default:return}}),[i,t,u]);var s=Object(c.useCallback)((function(e,t){return u({type:e,payload:t})}),[u]);return[i,s,{FETCH:p,RESOLVE:b,VERIFY:v,REJECT:E,RETRY:"RETRY",START:h}]}},23:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"f",(function(){return a.a})),n.d(t,"i",(function(){return o.a})),n.d(t,"j",(function(){return i.a})),n.d(t,"k",(function(){return c.a})),n.d(t,"c",(function(){return y})),n.d(t,"p",(function(){return g.a})),n.d(t,"q",(function(){return O.a})),n.d(t,"s",(function(){return _.a})),n.d(t,"r",(function(){return j})),n.d(t,"a",(function(){return w.a})),n.d(t,"e",(function(){return S.a})),n.d(t,"g",(function(){return T.a})),n.d(t,"h",(function(){return E.a})),n.d(t,"l",(function(){return C.a})),n.d(t,"m",(function(){return k.a})),n.d(t,"n",(function(){return I.a})),n.d(t,"o",(function(){return x.a})),n.d(t,"d",(function(){return R}));var r=n(111),a=(n(309),n(209)),o=(n(148),n(59)),i=n(36),c=n(208),u=(n(175),n(4)),s=n(0),l=n(29),f=n(69),d=n(8),m=n(10),p=n(6),h=n(33),b=n(5),v=n(205),E=n(25);function y(e,t,n,r,a){var o=!!r,i=Object(l.d)(),c=i.enableCommentVote,y=i.recordType,g=i.constants,O=Object(E.a)(),_=Object(u.a)(O,2),j=_[0],w=_[1],S=Object(f.b)(d.h,d.f,d.e,d.g,d.d),T=Object(p.c)(S),C=Object(s.useMemo)((function(){return d.Cb(e)}),[e]),k=Object(s.useMemo)((function(){return d.Fb(e,n)}),[e,n]),I=Object(s.useMemo)((function(){return d.Bb(e)}),[e]),x=Object(s.useMemo)((function(){return d.Db(e)}),[e]),R=Object(s.useMemo)((function(){return d.Eb(e)}),[e]),N=Object(s.useMemo)((function(){return d.pb(e)}),[e]),P=Object(p.c)(k),L=Object(p.c)(C),A=Object(p.c)(I),D=A&&A.length>1,U=Object(p.c)(x),V=Object(p.c)(R),M=Object(p.c)(N),F=Object(p.c)(d.O),B=Object(p.c)(d.P),G=Object(p.b)(y===g.RECORD_TYPE_DCC?m.zb:m.xb),W=Object(p.b)(m.n),Y=Object(p.b)(y===g.RECORD_TYPE_PROPOSAL?m.E:y===g.RECORD_TYPE_DCC?m.x:m.B),H=Object(p.b)(m.C),Q=Object(p.b)(m.g),q=Object(p.b)(m.f),z=Object(h.c)().currentUser,K=z&&z.userid,J=z&&z.email,X=z&&z.isadmin,Z=!!J,$=y===g.RECORD_TYPE_PROPOSAL,ee=!L,te=!!e&&ee,ne=t===b.gb,re=$?te&&(ne||X||a):te&&Z,ae=!!e&&!U&&c&&Z&&!B&&t===b.gb;Object(s.useEffect)((function(){re&&Y(e)}),[Y,re,e]),Object(s.useEffect)((function(){ae&&H(e,K)}),[H,ae,e,K]);var oe,ie=Object(s.useCallback)((function(){j(v.a,{onLoggedIn:w,onClose:w,title:"Your session has expired. Please log in again"})}),[j,w]),ce=Object(s.useCallback)((function(e,r,a){Q(K,a,e,r,t,n).catch((function(e){403===e.statusCode&&ie()}))}),[Q,K,t,n,ie]),ue=Object(s.useCallback)((function(e){var t=U&&U[e];return t||0}),[U]),se=Object(s.useCallback)((function(e){return V&&V[e]}),[V]);if(o&&D)for(var le=0,fe=Object.entries(L);le<fe.length;le++){var de=Object(u.a)(fe[le],2),me=de[0];de[1].map((function(e){return e.commentid})).includes(+r)&&(oe=me)}return{comments:P,onCommentVote:ce,onCensorComment:q,getCommentLikeOption:ue,enableCommentVote:c,userLoggedIn:Z,userEmail:J,recordType:y,currentUser:z,lastVisitTimestamp:M,loading:F,loadingLikes:B,onSubmitComment:G,onEditComment:W,error:T,getCommentVotes:se,commentSectionIds:A,hasAuthorUpdates:D,finishedCommentsFetch:!ee,latestAuthorUpdateId:D&&A[0],singleThreadRootId:oe}}var g=n(210),O=n(311),_=n(112);n(113),n(211),n(312);function j(e){var t=e.userPubKey,n=e.fetch,r=void 0===n||n,a=Object(p.b)(m.Cb),o=Object(p.c)(d.fc),i=Object(p.c)(d.jc),c=t&&o[t],u=c&&i[c],l=(u||{}).username,f=Object(p.c)(d.cb),h=t&&!f&&!u&&r;return Object(s.useEffect)((function(){h&&a({publickey:t})})),{username:l}}var w=n(60),S=(n(306),n(313),n(206));n(147);var T=n(146),C=(n(616),n(317),n(310),n(212),n(213)),k=n(314),I=n(463),x=(n(207),n(315));n(84),n(2);function R(){var e=Object(s.useState)(),t=Object(u.a)(e,2)[1];return Object(s.useCallback)((function(e){return t((function(){throw e}))}),[])}},231:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,a=n(3),o=n(1),i=n(14),c=n.n(i),u=n(0),s=n.n(u),l=n(5),f=n(356),d=n.n(f),m=(r={},Object(a.a)(r,l.V,s.a.createElement(o.StatusTag,{className:d.a.statusTag,type:"yellowTime",text:"Waiting for payment"})),Object(a.a)(r,l.T,s.a.createElement(o.StatusTag,{className:d.a.statusTag,type:"bluePending",text:"Waiting for confirmations"})),Object(a.a)(r,l.U,s.a.createElement(o.StatusTag,{className:d.a.statusTag,type:"greenCheck","data-testid":"paywall-status-paid",text:"Confirmed"})),r),p=function(e){var t=e.status;return m[t]||null};p.propTypes={status:c.a.number};var h=p},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(24),a=n(258),o=n(100),i=n.n(o),c=n(5),u=Object(r.b)(a.a,i.a),s=function(e){return{"myproposalnotifications-statuschange":!!(e&c.O),"myproposalnotifications-votestarted":!!(e&c.P),"regularproposalnotifications-vetted":!!(e&c.R),"regularproposalnotifications-edited":!!(e&c.Q),"regularproposalnotifications-votestarted":!!(e&c.S),"adminproposalnotifications-new":!!(e&c.K),"adminproposalnotifications-voteauthorized":!!(e&c.L),"commentnotifications-proposal":!!(e&c.N),"commentnotifications-comment":!!(e&c.M)}}},235:function(e,t,n){e.exports={proposalTitle:"ProposalsOwned_proposalTitle__3dgCW",totalText:"ProposalsOwned_totalText__3kn_y",spinnerWrapper:"ProposalsOwned_spinnerWrapper__2Mqus"}},237:function(e,t,n){e.exports={spinnerWrapper:"PayoutsList_spinnerWrapper__32Y-c",payBtn:"PayoutsList_payBtn__1Jklo",tableBodyCell:"PayoutsList_tableBodyCell__2zMRq",tableHead:"PayoutsList_tableHead__1qWhL"}},238:function(e,t,n){e.exports={spinnerWrapper:"PayoutSummaries_spinnerWrapper__u2apO",tableBodyCell:"PayoutSummaries_tableBodyCell__1mcFF",tableHead:"PayoutSummaries_tableHead__1nS83"}},239:function(e,t,n){e.exports={spinnerWrapper:"ProposalBillingSummary_spinnerWrapper__-XNqz",searchWrapper:"ProposalBillingSummary_searchWrapper__2qJwl",card:"ProposalBillingSummary_card__2tDcC",titleLink:"ProposalBillingSummary_titleLink__17dt2",billed:"ProposalBillingSummary_billed__3g-27",table:"ProposalBillingSummary_table__3kYFs"}},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n(345);function o(){return Object(r.useContext)(a.b)}},26:function(e,t,n){"use strict";var r=n(18),a=n(1),o=n(0),i=n.n(o),c=n(355),u=["to","children"];t.a=function(e){var t=e.to,n=e.children,o=Object(r.a)(e,u);return i.a.createElement(a.Link,Object.assign({},o,{customComponent:function(e){return i.a.createElement(c.a,Object.assign({to:t},e))}}),n)}},265:function(e,t,n){e.exports={transactionIdLink:"PaymentFaucet_transactionIdLink__3zavE",transactionLabel:"PaymentFaucet_transactionLabel__2meWx",transactionIdMessage:"PaymentFaucet_transactionIdMessage__1HXcX"}},266:function(e,t,n){e.exports={paywallInfo:"PaymentComponent_paywallInfo__3xL1C",dark:"PaymentComponent_dark__1osQ_",qrcodeWrapper:"PaymentComponent_qrcodeWrapper__11PGs",infoWrapper:"PaymentComponent_infoWrapper__2tk5_"}},267:function(e,t,n){e.exports={navigationDrawer:"NavigationDrawer_navigationDrawer__14hnx",navigationDrawerHeader:"NavigationDrawer_navigationDrawerHeader__3-W_I",navigationDrawerFullScreen:"NavigationDrawer_navigationDrawerFullScreen__eJ1Sp NavigationDrawer_navigationDrawer__14hnx",navigationDrawerShow:"NavigationDrawer_navigationDrawerShow__1-5zr NavigationDrawer_navigationDrawer__14hnx",navWrapper:"NavigationDrawer_navWrapper__3Hu2y"}},268:function(e,t,n){e.exports={statusSelectWrapper:"ModalSetBillingStatus_statusSelectWrapper__2Lndy",status:"ModalSetBillingStatus_status__3oC8a"}},269:function(e,t,n){e.exports={wrapper:"WhatAreYourThoughts_wrapper__3TEeC",text:"WhatAreYourThoughts_text__30ivk",darkText:"WhatAreYourThoughts_darkText__135XT",buttonsWrapper:"WhatAreYourThoughts_buttonsWrapper__1DKrC"}},27:function(e,t,n){"use strict";(function(e){n.d(t,"k",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return E})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return _})),n.d(t,"j",(function(){return w})),n.d(t,"l",(function(){return S})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return k})),n.d(t,"g",(function(){return I})),n.d(t,"i",(function(){return x}));var r=n(53),a=n.n(r),o=n(236),i=n.n(o),c=n(264),u=n.n(c),s=n(440),l=n.n(s),f=n(12),d=n.n(f),m=n(5),p=function(t){return e.from(b(t)).toString("hex")},h=function(e){for(var t=new Uint8Array(Math.ceil(e.length/2)),n=0;n<t.length;n++)t[n]=parseInt(e.substr(2*n,2),16);return t},b=function(e){return"[object Object]"!==Object.prototype.toString.call(e)?e:Uint8Array.from(Object.keys(e).map((function(t){return e[t]})))},v=function(e,t){return i.a.setItem(m.Ob+e,t).then((function(){return t}))},E=function(e){return i.a.removeItem(m.Ob+e)},y=function(){return a.a.resolve(u.a.sign.keyPair())},g=function(e){return i.a.getItem(m.Ob+e).catch((function(e){return console.warn(e)}))},O=function(e){return g(e).then((function(e){return e&&e.secretKey&&e}))},_=function(e){return function(e){return O(e).then(d()("publicKey"))}(e).then((function(e){return p(e)})).catch((function(){throw new Error(m.n)}))},j=function(e,t){return O(e).then((function(e){var n=e.secretKey;return u.a.sign.detached(b(t),b(n))})).catch((function(){throw new Error(m.n)}))},w=function(e,t){return function(e,t){return j(e,l.a.decodeUTF8(t))}(e,t).then(p)},S=function(e){var t=l.a.decodeUTF8("any"),n=T(e),r=n.publicKey,a=n.secretKey;return function(e,t,n){return u.a.sign.detached.verify(b(e),b(t),b(n))}(t,u.a.sign.detached(b(t),b(a)),r)},T=function(e){var t=e.publicKey,n=e.secretKey;return{publicKey:h(t),secretKey:h(n)}},C=function(e){return O(e).then((function(e){return e?function(e){var t=e.publicKey,n=e.secretKey;return{publicKey:p(t),secretKey:p(n)}}(e):e}))},k=function(e,t){return a.a.resolve(T(t)).then((function(t){return v(e,t)}))},I=function(e,t){return i.a.keys().then((function(n){return n.includes(m.Ob+e)?e:n.includes(m.Ob+t)?t:null}))},x=function(e,t){return O(e).then((function(n){return v(t,n).then((function(){return i.a.removeItem(m.Ob+e)}))}))}}).call(this,n(43).Buffer)},270:function(e,t,n){e.exports={subtitle:"Account_subtitle__3GOii"}},271:function(e,t,n){e.exports={submitButton:"Preferences_submitButton__3yPRc",confirmMessage:"Preferences_confirmMessage__ECbAZ",savedIcon:"Preferences_savedIcon__372Wa",marginHorizontal1:"Preferences_marginHorizontal1__2hZNE"}},272:function(e,t,n){e.exports={groupList:"CheckboxGroupField_groupList__1yz3e",groupListItem:"CheckboxGroupField_groupListItem__3mCMn",groupDropdownItem:"CheckboxGroupField_groupDropdownItem__1smha"}},273:function(e,t,n){e.exports={wrapper:"ModalAttachFiles_wrapper__Pt3X-",selectFileWrapper:"ModalAttachFiles_selectFileWrapper__2z19u",greyText:"ModalAttachFiles_greyText__37Bz8"}},274:function(e,t,n){e.exports={formSelect:"DccForm_formSelect__19Jh7",formSelectError:"DccForm_formSelectError__3ypE2",errorMsg:"DccForm_errorMsg__2w9pL",radioButton:"DccForm_radioButton__10vuQ",statement:"DccForm_statement__3uBsu"}},29:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return x}));var r=n(2),a=n(4),o=n(19),i=n(626),c=n.n(i),u=n(0),s=n.n(u),l=n(18),f=n(321),d=["children"],m=["children"],p=Object(u.createContext)(),h=Object(u.createContext)(),b=p.Consumer,v=function(){var e=Object(u.useContext)(p),t=Object(u.useContext)(h);return Object(u.useMemo)((function(){return t?Object(r.a)(Object(r.a)({},e),t):e}),[t,e])},E=function(e){var t=e.children,n=Object(l.a)(e,d);return s.a.createElement(p.Provider,{value:Object(r.a)(Object(r.a)({},n),{},{constants:f.a})},t)},y=function(e){var t=e.children,n=Object(l.a)(e,m);return s.a.createElement(h.Provider,{value:Object(r.a)({},n)},t)},g=n(437),O=n(123),_=n(85),j=n(36);function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(C([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var S=c()(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_WEBSITE_NAME:"Politeia",REACT_APP_WEBSITE_DESCRIPTION:"Politeia is the proposal system that is used to request funding from Decred's network treasury. The Decred stakeholders decide how treasury funds are allocated.",REACT_APP_WEBSITE_SUBTITLE:"Decred's Proposal System",REACT_APP_PRESET:"politeia"})),T=g,C={javascriptEnabled:!Object(_.a)("nojavascript")},k=function(){var e=Object(o.a)(w().mark((function e(){var t,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S["REACT_APP_".concat("PRESET")]){e.next=3;break}return e.abrupt("return",Object(O.mergeAll)([T,C]));case 3:return e.next=5,n(1007)("./".concat(t,"/config.json"));case 5:return r=e.sent,e.abrupt("return",Object(O.mergeAll)([r.default,C]));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){var t=e.children,n=Object(u.useState)(!1),i=Object(a.a)(n,2),c=i[0],l=i[1],f=Object(u.useState)(""),d=Object(a.a)(f,2),m=d[0],p=d[1],h=Object(u.useState)(null),b=Object(a.a)(h,2),v=b[0],y=b[1],g=Object(j.a)().policy;return Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,k();case 4:t=e.sent,l(!1),y(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),p(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),s.a.createElement(E,Object(r.a)(Object(r.a)({},v),{},{enablePaywall:!!(null===g||void 0===g?void 0:g.paywallenabled),enableCredits:!!(null===g||void 0===g?void 0:g.paywallenabled)}),!c&&!m&&v&&t,m)},x=function(e){var t=e.showIf,n=e.children;return s.a.createElement(b,null,(function(e){return t(e)?n:null}))};t.c=I},306:function(e,t,n){"use strict";var r=n(4),a=n(0);t.a=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),o=n[0],i=n[1];return[o,function(e){return new Promise((function(t){i(e),t(e)}))}]}},307:function(e,t,n){"use strict";var r=n(1),a=n(0),o=n.n(a),i=n(59),c=n(338),u=n(231),s=n(644),l=n.n(s);t.a=function(e){var t=e.show,n=e.title,a=e.onClose,s=Object(i.a)(),f=s.userPaywallStatus,d=s.paywallAmount,m=s.paywallAddress,p=Object(r.useMediaQuery)("(max-width: 560px)");return o.a.createElement(r.Modal,{show:t,title:n,onClose:a},p&&o.a.createElement(u.a,{status:f}),o.a.createElement(r.P,{className:l.a.paywallDescription},"To participate on proposals and to submit your own, Politeia requires you to pay a small registration fee of"," ",o.a.createElement(r.Text,{weight:"bold"},"exactly ",d," DCR.")," This helps keep Politeia free of things like spam and comment manipulation."),o.a.createElement(c.a,{address:m,amount:+d,extraSmall:p,status:f}))}},308:function(e,t,n){"use strict";var r=n(19),a=n(4),o=n(0),i=n.n(o),c=n(326),u=n.n(c),s=n(1),l=n(645),f=n.n(l),d=n(346);function m(){m=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:_(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var f={};function d(){}function p(){}function h(){}var b={};u(b,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(C([])));E&&E!==t&&n.call(E,o)&&(b=E);var y=h.prototype=d.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new O(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),u(y,c,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var p=function(e){var t=e.children;return i.a.createElement(s.P,null,t)},h=function(e){var t=e.level,n=e.children,r=[s.H1,s.H2,s.H3,s.H4,s.H5,s.H6][t-1]||s.H4;return i.a.createElement(r,{style:{marginBottom:"1.7rem"},className:f.a.markdownHeadings},n)},b=function(e){var t=e.href,n=e.children;return i.a.createElement(s.Link,{href:t,rel:"nofollow noopener noreferrer",target:"_blank"},n)};t.a=i.a.memo((function(e){var t=e.contentName,n=Object(o.useState)(""),c=Object(a.a)(n,2),s=c[0],l=c[1],f=Object(d.b)().getContent;Object(o.useEffect)((function(){function e(){return(e=Object(r.a)(m().mark((function e(){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t);case 3:n=e.sent,l(n),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}s||function(){e.apply(this,arguments)}()}),[t,f,s]);var v=Object(o.useMemo)((function(){return{p:p,h2:h,a:b}}),[]);return i.a.createElement(u.a,{className:"static-md",components:v},s)}))},309:function(e,t,n){"use strict";var r=n(4),a=n(0),o=n(8),i=n(10),c=n(6),u=n(60);t.a=function(e,t){var n=Object(c.c)(o.J),s=Object(c.b)(i.z),l=n[function(e,t){return"".concat(t,"-").concat(e)}(e,t)],f=!l,d=Object(a.useMemo)((function(){return[e,t]}),[e,t]),m=Object(u.a)(s,d,f),p=Object(r.a)(m,2);return[l,p[0],p[1]]}},310:function(e,t,n){"use strict";var r=n(0),a=n(86);t.a=function(e){var t=Object(a.c)().location,n=Object(r.useRef)(!1);Object(r.useEffect)((function(){n.current?e():n.current=!0}),[e,t.pathname])}},311:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(8),o=n(10),i=n(6),c=n(49),u=n(60);function s(){var e=Object(i.b)(o.u),t=Object(i.c)(a.Pb(c.b)),n=Object(u.a)(e),s=Object(r.a)(n,2);return{supervisors:t,loading:s[0],error:s[1]}}},312:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(10),a=n(6),o=n(8);function i(){return{userPubkey:Object(a.c)(o.A),currentUserEmail:Object(a.c)(o.r),currentUserID:Object(a.c)(o.s),keyMismatch:Object(a.c)(o.gb),verifyUserKey:Object(a.c)(o.D),verifyUserKeyError:Object(a.c)(o.qc),onVerifyUserKey:Object(a.b)(r.Qb),keyMismatchAction:Object(a.b)(r.d),isCMS:Object(a.c)(o.eb)}}},313:function(e,t,n){"use strict";var r=n(4),a=n(0);t.a=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2),o=n[0],i=n[1],c=Object(a.useCallback)((function(e){e&&e.preventDefault&&e.preventDefault(),i(!1)}),[]);return[o,Object(a.useCallback)((function(e){e&&e.preventDefault&&e.preventDefault(),i(!0)}),[]),c]}},314:function(e,t,n){"use strict";var r=n(0);t.a=function(e){Object(r.useEffect)((function(){e&&window.scrollTo(0,0)}),[e])}},315:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),a=n(0),o=n(147);function i(e,t){var n=Object(a.useState)(null),i=Object(r.a)(n,2),c=i[0],u=i[1],s=Object(a.useState)((function(){try{return function(e){var t=sessionStorage.getItem(e);return JSON.parse(t)}(e)||t}catch(n){return u(n),t}})),l=Object(r.a)(s,2),f=l[0],d=l[1],m=Object(a.useCallback)((function(t){try{!function(e,t){var n=JSON.stringify(t);sessionStorage.setItem(e,n)}(e,t),d(t)}catch(n){u(n)}}),[e,u]);return Object(o.a)("session",(function(t){if(t.key===e&&t.newValue!==t.oldValue)try{var n=JSON.parse(t.newValue);d(n)}catch(r){u(r)}})),c&&console.log(c),[f,m,c]}},316:function(e,t,n){"use strict";var r=n(4),a=n(1),o=n(0),i=n.n(o),c=n(1219),u=n(347),s=n(354),l=n.n(s),f=function(e){var t=e.toggleShowMenu,n=e.showMenu;return i.a.createElement("div",{className:l.a.navButton,onClick:t},i.a.createElement("span",{className:n?l.a.navIconClose:l.a.navIcon}))},d=n(1223),m=n(146),p=n(148),h=n(29),b=n(65),v=n(445),E=n.n(v),y=n(652),g=n.n(y),O=Object(d.a)((function(e){var t=e.user,n=e.history,r=t&&t.userid,o=Object(b.a)(r).proposalCredits;Object(b.b)();return i.a.createElement("div",{className:E.a.wrapper},i.a.createElement(a.Text,null,"proposal credits:"," ",i.a.createElement("span",{"data-testid":"proposal-credits-number"},t&&o)),i.a.createElement("img",{alt:"purchase proposal credits",className:E.a.proposalCreditsButton,src:g.a,onClick:function(){return n.push("/user/".concat(t.userid,"?tab=credits"))}}))})),_=n(83),j=n.n(_),w=n(49),S=Object(d.a)((function(e){var t=e.history,n=Object(p.a)(),u=n.user,s=n.username,l=n.onLogout,f=n.isCMS,d=Object(h.d)(),b=d.navMenuPaths,v=d.enableCredits,E=d.enableAdminInvite,y=u||{},g=y.isadmin,_=y.userid,S=Object(a.useTheme)(),T=S.themeName,C=S.setThemeName,k=u&&g,I=Object(w.j)(u),x=Object(o.useMemo)((function(){return b.map((function(e,n){var r=e.label,o=e.path,c=e.admin,u=e.dccRequired;"/user"===o&&(o+="/"+_),"/user-proposals"===o&&(o="/user/".concat(_,"?tab=submitted proposals")),"/drafts"===o&&(o="/user/".concat(_,"?tab=draft proposals")),"/invoices"===o&&(r=k?"All Invoices":"Domain Invoices");var s=window.location.pathname===o;return(c&&k||!c)&&!(!k&&u&&!I)&&i.a.createElement(a.DropdownItem,{className:Object(a.classNames)(s&&j.a.activeDropdownItem),key:"link-".concat(n),onClick:function(e){return function(){return t.push(e)}}(o)},r)}))}),[t,b,k,_,I]),R=Object(m.a)("darkTheme",!1),N=Object(r.a)(R,2),P=N[0],L=N[1];Object(o.useEffect)((function(){P&&T===a.DEFAULT_LIGHT_THEME_NAME&&C(a.DEFAULT_DARK_THEME_NAME)}),[P,C,T]);var A=function(){T===a.DEFAULT_LIGHT_THEME_NAME?(L(!0),C(a.DEFAULT_DARK_THEME_NAME)):(L(!1),C(a.DEFAULT_LIGHT_THEME_NAME))};return u&&s?i.a.createElement("div",{"data-testid":"header-nav",className:Object(a.classNames)(j.a.loggedInContainer,!v&&j.a.noCreditsContainer)},i.a.createElement(h.a,{showIf:function(e){return e.enableCredits}},i.a.createElement(O,{user:u})),i.a.createElement(a.Dropdown,{className:Object(a.classNames)(j.a.dropdown,!v&&j.a.noCreditsDropdown),itemsListClassName:j.a.dropdownList,closeOnItemClick:!1,title:s},x,i.a.createElement(a.DropdownItem,{onClick:A},i.a.createElement(a.DarkLightToggle,{onToggle:A,toggled:T===a.DEFAULT_DARK_THEME_NAME})),i.a.createElement(a.DropdownItem,{onClick:function(){return l(f,!1)}},"Logout"))):i.a.createElement("nav",{className:j.a.navContainer},i.a.createElement("div",{className:Object(a.classNames)(j.a.themeToggleWrapper,j.a.publicWrapper)},i.a.createElement(a.DarkLightToggle,{onToggle:A,toggled:T===a.DEFAULT_DARK_THEME_NAME})),!E&&i.a.createElement("div",{className:j.a.navLinkCtn},i.a.createElement(c.a,{className:j.a.navLink,activeClassName:j.a.activeNavLink,to:"/user/login"},i.a.createElement(a.Text,{className:j.a.navLinkText,"data-testid":"nav-login"},"Log in")),i.a.createElement(c.a,{className:j.a.navLink,activeClassName:j.a.activeNavLink,to:"/user/signup"},i.a.createElement(a.Text,{className:j.a.navLinkText},"Sign up"))))})),T=n(343),C=n(267),k=n.n(C),I=function(e){var t=e.show,n=e.fullScreen;return Object(a.useLockBodyScrollOnTrue)(t),i.a.createElement("div",{className:Object(a.classNames)(n?k.a.navigationDrawerFullScreen:k.a.navigationDrawer,t&&k.a.navigationDrawerShow)},i.a.createElement("div",{className:Object(a.classNames)(k.a.navWrapper,"margin-bottom-s")},i.a.createElement(S,null)),i.a.createElement(T.a,null))},x=n(5),R=n(358),N=n.n(R);t.a=function(e){var t=e.noBorder,n=Object(a.useMediaQuery)("(max-width: 1000px)"),s=Object(a.useMediaQuery)("(max-width: 560px)"),l=Object(o.useState)(!1),d=Object(r.a)(l,2),m=d[0],p=d[1],b=Object(h.d)().javascriptEnabled?"/":x.J+"/",v=Object(o.useCallback)((function(){return p(!m)}),[m,p]);return i.a.createElement(a.Header,{className:Object(a.classNames)(t&&N.a.noBorder)},i.a.createElement(c.a,{to:b,className:s&&m?N.a.hideLogo:N.a.showLogo},i.a.createElement(u.a,null)),n?i.a.createElement(i.a.Fragment,null,i.a.createElement(f,{toggleShowMenu:v,showMenu:m}),i.a.createElement(I,{show:m,fullScreen:s,toggleShowMenu:v})):i.a.createElement(S,null))}},317:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(4),a=n(0),o=n.n(a),i=n(1),c=n(152),u=n(29),s=function(e){var t=e.show,n=e.onClose,r=Object(u.d)(),a=r.onBoardContent,s=r.onBoardLink;return o.a.createElement(i.Modal,{show:t,onClose:n},o.a.createElement(c.a,{contentName:a}),o.a.createElement("div",{className:"justify-right margin-top-l"},o.a.createElement(i.Button,{kind:"secondary",onClick:n},"Maybe later"),o.a.createElement(i.Button,{onClick:function(){window.open(s,"_blank","noopener=true,noreferrer=true").focus(),n()}},"Yes, show me more")))},l=n(25),f=n(6),d=n(8);function m(){var e=Object(f.c)(d.p),t=e&&!e.lastlogintime,n=Object(a.useState)(t),o=Object(r.a)(n,2),i=o[0],c=o[1],u=Object(l.a)(),m=Object(r.a)(u,2),p=m[0],h=m[1];Object(a.useEffect)((function(){c(t)}),[t]),Object(a.useEffect)((function(){i&&(c(!1),p(s,{onClose:h}))}),[h,p,i])}},321:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={RECORD_TYPE_INVOICE:"invoice",RECORD_TYPE_PROPOSAL:"proposal",RECORD_TYPE_DCC:"dcc"}},325:function(e,t,n){"use strict";var r=n(217),a=n(218),o=n(149),i=n(339),c=n(0),u=n.n(c),s=n(1),l=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={error:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.errorRenderer,r=e.displayError,a=this.state.error;return a&&r?n(a,t):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(c.Component);l.defaultProps={title:"Error",errorRenderer:function(e,t){return u.a.createElement(s.Message,{title:t,header:t,kind:"error"},e.toString())},displayError:!0},t.a=l},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return w}));var r=n(19),a=n(4),o=n(0),i=n.n(o),c=n(8),u=n(10),s=n(6);function l(){return{user:Object(s.c)(c.p),apiInfo:Object(s.c)(c.L),onRequestApiInfo:Object(s.b)(u.Sb),localLogout:Object(s.b)(u.c),onPollUserPayment:Object(s.b)(u.lb),onUserProposalCredits:Object(s.b)(u.Mb)}}var f=n(2),d=n(1),m=n(443),p=n.n(m),h=n(347),b=n(146),v=n(685),E={maxWidth:"20rem",transition:"opacity ".concat(300,"ms ease-in-out"),opacity:0},y={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}},g=function(e){var t=e.error,n=Object(o.useState)(!1),r=Object(a.a)(n,2),c=r[0],u=r[1],s=Object(d.useTheme)(),l=s.themeName,m=s.setThemeName,g=Object(b.a)("darkTheme",!1),O=Object(a.a)(g,1)[0];return Object(o.useEffect)((function(){O&&l===d.DEFAULT_LIGHT_THEME_NAME&&m(d.DEFAULT_DARK_THEME_NAME)}),[O,m,l]),Object(o.useEffect)((function(){return u(!0),function(){u(!1)}}),[]),i.a.createElement("div",{className:Object(d.classNames)(p.a.container,p.a.dark)},i.a.createElement(v.a,{in:c,timeout:300},(function(e){return i.a.createElement(h.a,{style:Object(f.a)(Object(f.a)({},E),y[e])})})),t&&i.a.createElement(d.Message,{className:"margin-top-m",kind:"error"},t.toString()))},O=n(29);function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(C([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var j=Object(o.createContext)(),w=function(){return Object(o.useContext)(j)},S=function(e){var t=e.children,n=Object(O.d)(),c=n.enablePaywall,u=n.enableCredits,s=Object(o.useState)(!1),f=Object(a.a)(s,2),d=f[0],m=f[1],p=Object(o.useState)(null),h=Object(a.a)(p,2),v=h[0],E=h[1],y=Object(o.useState)(null),w=Object(a.a)(y,2),S=w[0],T=w[1],C=l(),k=C.onRequestApiInfo,I=C.user,x=C.localLogout,R=C.onPollUserPayment,N=C.onUserProposalCredits,P=Object(b.a)("userActive",!1),L=Object(a.a)(P,2),A=L[0],D=L[1];Object(o.useEffect)((function(){function e(){return(e=Object(r.a)(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(!1);case 3:t=e.sent,T(t),m(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),E(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k]);var U=!!I;return Object(o.useEffect)((function(){d&&D(U)}),[U,d,D]),Object(o.useEffect)((function(){A||x(!1)}),[A,x]),Object(o.useEffect)((function(){c&&!!I&&R().catch((function(){E(new Error("Unable to Poll User Payment"))}))}),[I,c,R]),Object(o.useEffect)((function(){u&&U&&N()}),[U,N,u]),i.a.createElement(j.Provider,{value:{initDone:d,error:v,currentUser:I,apiInfo:S}},d&&!v?t:i.a.createElement(g,{error:v}))}},337:function(e,t,n){e.exports={errorMessage:"ManageContractor_errorMessage__3aCst",editDcc:"ManageContractor_editDcc__15B61",editContractor:"ManageContractor_editContractor__2hfTs",fieldError:"ManageContractor_fieldError__1vVBo"}},338:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(1),a=n(0),o=n.n(a),i=n(148),c=n(10),u=n(6),s=n(8);var l=n(265),f=n.n(l),d=function(){},m=function(e){var t,n=e.address,l=e.amount,m=e.onFail,p=void 0===m?d:m,h=Object(i.a)().user,b=function(){var e=Object(u.c)(s.s),t=Object(u.c)(s.fb),n=Object(u.c)(s.S),r=Object(a.useMemo)((function(){return s.wb(e)}),[e]),o=Object(u.c)(r),i=Object(a.useMemo)((function(){return s.vb(e)}),[e]);return{isTestnet:t,isApiRequestingPayWithFaucet:n,payWithFaucetTxId:Object(u.c)(i)||o,payWithFaucetError:Object(u.c)(s.Vb),payWithFaucet:Object(u.b)(c.Rb),resetFaucet:Object(u.b)(c.Tb)}}(),v=b.payWithFaucetError,E=b.payWithFaucet,y=b.payWithFaucetTxId,g=b.isApiRequestingPayWithFaucet,O=b.isTestnet,_=Object(a.useCallback)((function(){return E(n,l,h.userid).catch(p)}),[n,l,h.userid,E,p]);return O&&o.a.createElement("div",{className:f.a.paywallFaucet},o.a.createElement(r.P,{className:"margin-top-m"},"This Politeia instance is running on Testnet, which means you can pay with the Decred faucet:"),y?null:o.a.createElement(r.Button,{className:"margin-top-s",loading:g,onClick:_},"Pay with Faucet"),v?o.a.createElement(r.Message,{kind:"error",className:"margin-top-m"},v.toString()):null,y?o.a.createElement(r.Message,{kind:"info",className:f.a.transactionIdMessage},o.a.createElement("span",{className:f.a.transactionLabel},"Sent transaction: "),o.a.createElement(r.Link,{href:(t=y,"".concat("https://testnet.decred.org/explorer/tx","/").concat(t)),target:"_blank",id:"transactionLink",truncate:!0,rel:"noopener noreferrer",className:f.a.transactionIdLink},y)):null)},p=n(231),h=n(643),b=n.n(h),v=function(e){var t=e.addr,n=b.a.imageSync("decred:"+t,{type:"svg"});return o.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}})},E=n(266),y=n.n(E),g=function(e){var t=e.address,n=e.amount,a=e.extraSmall,i=e.status,c=Object(r.useTheme)().themeName===r.DEFAULT_DARK_THEME_NAME;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{"data-testid":"payment-component",className:Object(r.classNames)(y.a.paywallInfo,c&&y.a.dark,"margin-top-l")},o.a.createElement("div",{className:y.a.qrcodeWrapper},o.a.createElement(v,{addr:t})),o.a.createElement("div",{className:Object(r.classNames)(y.a.infoWrapper,"margin-left-m")},o.a.createElement(r.H4,{weight:"bold",className:"margin-bottom-xs"},"Send"),o.a.createElement(r.Text,null,n," DCR"),o.a.createElement(r.H4,{weight:"bold",className:"margin-top-s margin-bottom-xs"},"To address"),o.a.createElement(r.CopyableText,{id:"component-payment-address",truncate:!0,tooltipPlacement:"bottom"},t),!a&&o.a.createElement("span",{"data-testid":"payment-status-tag"},o.a.createElement(p.a,{status:i})))),o.a.createElement(m,{address:t,amount:n}))}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n(18),a=n(3),o=n(1),i=n(0),c=n.n(i),u=n(325),s=n(1223),l=n(151),f=n(642),d=n.n(f),m=Object(s.a)((function(e){var t=e.history,n=e.goTo,r=e.label,a=e.disabled,u=Object(o.useMediaQuery)("(max-width: 560px)"),s=Object(i.useCallback)((function(){return t.push(n)}),[t,n]);return c.a.createElement(l.a,null,c.a.createElement(o.Button,{type:"button",kind:a?"disabled":"primary",className:d.a.newButton,onClick:s},u?"+":r))})),p=n(316),h=n(207),b=n(343),v=function(){return c.a.createElement(b.a,{wrapper:o.Sidebar})},E=n(76),y=n.n(E),g=n(29),O=n(59),_=n(646),j=n.n(_),w=["className","title","subtitle","actionsContent","actionsClassName","children","headerClassName","titleAndSubtitleWrapperClassName"],S=["className"],T=["className"],C=["className","fillScreen"],k=["children","disableScrollToTop"],I=function(e){return c.a.createElement(D,{className:y.a.singleContentMain},c.a.createElement(o.Message,{kind:"error"},e.toString()))},x=function(){var e,t=Object(g.d)(),n=t.recordType,r=t.constants,o=r.RECORD_TYPE_PROPOSAL,i=r.RECORD_TYPE_INVOICE,u=r.RECORD_TYPE_DCC,s=Object(O.a)().isPaid;return(e={},Object(a.a)(e,o,c.a.createElement(m,{disabled:!j()(s)&&!s,label:"New Proposal",goTo:"/record/new"})),Object(a.a)(e,i,c.a.createElement(m,{label:"New Invoice",goTo:"/invoices/new"})),Object(a.a)(e,u,c.a.createElement(m,{label:"New DCC",goTo:"/dccs/new"})),e)[n]||null},R=function(e){return c.a.createElement(o.H1,e)},N=function(e){return c.a.createElement("span",Object.assign({className:y.a.subtitle},e),e.children)},P=function(e){var t=e.className,n=e.title,a=e.subtitle,i=e.actionsContent,u=e.actionsClassName,s=e.children,l=e.headerClassName,f=e.titleAndSubtitleWrapperClassName,d=Object(r.a)(e,w),m="string"===typeof n?c.a.createElement(o.H1,{id:"page-title",truncate:!0,linesBeforeTruncate:2,className:y.a.pageDetailsTitle},n):n;return c.a.createElement(o.PageDetails,Object.assign({className:Object(o.classNames)(y.a.customPageDetails,t)},d),c.a.createElement("div",{className:Object(o.classNames)(y.a.pageDetailsHeader,l)},c.a.createElement("div",{className:Object(o.classNames)(y.a.titleAndSubtitleWrapper,f)},m,!!a&&c.a.createElement(N,null,a)),c.a.createElement("div",{className:Object(o.classNames)(y.a.pageDetailsActions,u)},i)),s)},L=function(e){var t=e.className,n=Object(r.a)(e,S);return c.a.createElement(o.Tab,Object.assign({className:Object(o.classNames)(y.a.customTab,t)},n))},A=function(e){var t=e.className,n=Object(r.a)(e,T);return c.a.createElement(o.Tabs,Object.assign({className:Object(o.classNames)(t)},n))},D=function(e){var t=e.className,n=e.fillScreen,a=Object(r.a)(e,C);return c.a.createElement(o.Main,Object.assign({className:Object(o.classNames)(y.a.customMain,n&&y.a.customMainNoSidebar,t)},a))},U=function(e){var t=e.children,n=e.disableScrollToTop,a=Object(r.a)(e,k);return Object(h.a)(n),c.a.createElement(o.Container,a,c.a.createElement(p.a,{noBorder:!0}),c.a.createElement(u.a,{errorRenderer:I},t({Sidebar:v,TopBanner:o.TopBanner,Main:D,Subtitle:N,PageDetails:P,DefaultNewButton:x,Title:R,Tabs:A,Tab:L})))};P.defaultProps={actionsContent:c.a.createElement(x,null)},U.defaultProps={disableScrollToTop:!1};var V=U},340:function(e,t,n){"use strict";var r=n(18),a=n(2),o=n(19),i=n(4),c=n(1),u=n(0),s=n.n(u),l=n(1223),f=n(47),d=n(29),m=n(26),p=n(152),h=function(e){var t=Object(d.d)().privacyPolicyContent;return s.a.createElement(c.Modal,Object.assign({style:{maxWidth:"70rem"}},e,{iconType:"info",iconSize:"lg"}),s.a.createElement(p.a,{contentName:t}),s.a.createElement("div",{className:"justify-right"},s.a.createElement(m.a,{to:"/user/privacy-policy",className:"margin-top-m"},"Privacy Policy Permalink")))},b=n(446),v=n.n(b),E=n(10),y=n(6),g=n(36),O=n(15),_=function(e){var t=e.minpasswordlength;return O.f().shape({email:O.h().trim().email("Invalid email").required("Required"),password:O.h().min(t,"Password must be at least ".concat(t," characters")).required("Required")})};var j=n(25),w=n(342),S=n(5),T=function(e){var t=e.onClose,n=e.onVerify,r=Object(u.useState)(),a=Object(i.a)(r,2),o=a[0],l=a[1];return s.a.createElement("div",{"data-testid":"modal-totp-verify"},o&&s.a.createElement(c.Message,{kind:"error","data-testid":"modal-totp-verify-error",className:"margin-bottom-m"},o.toString()),s.a.createElement(w.a,{onType:function(e,r){e.length===S.Qb&&n(e).then((function(){t()})).catch((function(e){r(),l(e)}))},extended:!1,tabIndex:1,title:"Authenticator Code"}))},C=function(e){var t=e.show,n=e.onClose,r=e.onVerify;return s.a.createElement(c.Modal,{show:t,onClose:n,title:"Verify 2FA Code"},s.a.createElement(T,{onVerify:r,onClose:n}))},k=["className"];function I(){I=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(k){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new S(a||[]);return r(i,"_invoke",{value:O(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var f={};function d(){}function m(){}function p(){}var h={};u(h,o,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var E=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=p,r(E,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:m,configurable:!0}),m.displayName=u(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},y(g.prototype),u(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(E),u(E,c,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var x=function(e){var t=e.hideTitle,n=e.onLoggedIn,l=e.redirectToPrivacyPolicyRoute,m=e.history,p=e.emailId,b=e.passwordId,O=e.renderPrivacyPolicyModal,w=function(){var e=Object(y.b)(E.fb),t=Object(g.a)(),n=t.policy,r=t.loading,a=Object(u.useState)(n?_(n):null),o=Object(i.a)(a,2),c=o[0],s=o[1];return Object(u.useEffect)((function(){n&&!c&&s(_(n))}),[n,c]),{onLogin:e,validationSchema:c,loadingPolicy:r}}(),T=w.onLogin,x=w.validationSchema,R=Object(d.d)().enableAdminInvite,N=Object(j.a)(),P=Object(i.a)(N,2),L=P[0],A=P[1],D=function(){var e=Object(o.a)(I().mark((function e(t,r){var o,i,c,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.resetForm,i=r.setSubmitting,c=r.setFieldError,u=Object(a.a)(Object(a.a)({},t),{},{email:t.email.trim()}),e.prev=2,e.next=5,T(u);case 5:i(!1),o(),n&&n(),e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(2),i(!1),e.t0.errorcode!==S.Sb){e.next=16;break}return L(C,{onVerify:function(e){return T(Object(a.a)(Object(a.a)({},u),{},{code:e}))},onClose:A},{overlay:!0}),e.abrupt("return");case 16:c("global",e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}();function U(){l?m.push("/user/privacy-policy"):O&&L(h,{onClose:A})}return s.a.createElement(f.a,{initialValues:{email:"",password:""},loading:!x,validationSchema:x,onSubmit:D},(function(e){var n=e.Form,a=e.Title,o=e.Actions,i=e.Footer,u=e.Link,l=e.ErrorMessage,f=e.values,d=e.handleChange,m=e.handleBlur,h=e.handleSubmit,E=e.isSubmitting,y=e.errors,g=e.touched;return s.a.createElement(n,{onSubmit:h},!t&&s.a.createElement(a,null,"Log in"),y&&y.global&&s.a.createElement(l,null,y.global.toString()),s.a.createElement(c.TextInput,{id:p,label:"Email",name:"email",tabIndex:1,autoComplete:"email",value:f.email.trim(),onChange:d,onBlur:m,error:g.email&&y.email}),s.a.createElement(c.TextInput,{id:b,label:"Password",type:"password",name:"password",tabIndex:2,autoComplete:"current-password",value:f.password,onChange:d,onBlur:m,error:g.password&&y.password}),s.a.createElement(o,null,s.a.createElement(u,{to:"/user/request-reset-password"},"Reset Password"),s.a.createElement(c.Button,{loading:E,kind:"primary",type:"submit","data-testid":"login-form-button"},"Login")),s.a.createElement(i,null,s.a.createElement(c.Link,{gray:!0,onClick:U,customComponent:function(e){var t=e.className,n=Object(r.a)(e,k);return s.a.createElement(c.Text,Object.assign({className:Object(c.classNames)(t,v.a.privacyPolicyTxt)},n)," ","Privacy Policy")}}),!R&&s.a.createElement(c.Text,{className:v.a.createAccounTxt},"Don't have an account?"," ",s.a.createElement(u,{to:"/user/signup"},"Create here!"))))}))};x.defaultProps={emailId:"loginemail",passwordId:"loginpassword",renderPrivacyPolicyModal:!0};t.a=Object(l.a)(x)},342:function(e,t,n){"use strict";var r=n(4),a=n(18),o=n(0),i=n.n(o),c=n(1),u=n(11),s=n(359),l=n.n(s),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=e.split("").slice(0,t);if(n.length<t){var r=Array(t-n.length).fill("");n=[].concat(Object(u.a)(n),Object(u.a)(r))}return n},d=function(e){var t=e.length,n=e.onChange,a=e.className,s=e.code,d=e.tabIndex,m=e.autoFocus,p=Object(o.useState)(f(s,t)),h=Object(r.a)(p,2),b=h[0],v=h[1],E=Object(o.useState)(),y=Object(r.a)(E,2),g=y[0],O=y[1],_=Object(o.useRef)(null);Object(o.useEffect)((function(){v(f(s,t))}),[s,t]);return Object(o.useEffect)((function(){g&&_.current.focus()}),[g]),Object(o.useEffect)((function(){O(m)}),[m]),i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"text","data-testid":"digits-input",className:l.a.mainInput,onChange:function(e){e&&e.preventDefault();var r=e.target.value.toString().replace(/^\D+/g,"");n(f(r,t).join(""))},value:b.join(""),ref:_,onBlur:function(){!m&&O(!1)}}),i.a.createElement("div",{className:Object(c.classNames)(a,l.a.digitsWrapper,g&&l.a.focusedInput)},b.map((function(e,t){return i.a.createElement(c.NumberInput,{id:"id-digit-".concat(t),key:"digit-".concat(t),defaultValue:e,tabIndex:d,onFocus:function(e){e&&e.target&&e.target.value?function(e){Object(u.a)(b)[e]="",_.current.selectionStart=e,_.current.selectionEnd=e+1,_.current.focus()}(t):_.current.focus(),O(!0)}})}))))};d.defaultProps={tabIndex:1,length:6,onChange:function(){},onFill:function(){},autoFocus:!1};var m=d,p=n(5),h=n(161),b=n.n(h),v=["isForm"],E=function(e){var t=e.isForm,n=Object(a.a)(e,v);return t?i.a.createElement("form",n):i.a.createElement("div",n)},y=function(e){var t=e.onVerify,n=e.buttonLabel,a=e.extended,u=e.title,s=e.description,l=e.className,f=e.inputClassName,d=e.onType,h=e.tabIndex,v=Object(o.useState)(!1),y=Object(r.a)(v,2),g=y[0],O=y[1],_=Object(o.useState)(""),j=Object(r.a)(_,2),w=j[0],S=j[1],T=function(e){O(e.length===p.Qb),S(e),d(e,(function(){S("")}))};return i.a.createElement(E,{isForm:a,className:l},a?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.H2,null,u),i.a.createElement(c.P,null,s)):i.a.createElement(c.Text,{className:b.a.inputLabel},u),i.a.createElement("div",null,i.a.createElement(m,{onChange:T,className:f,tabIndex:h,code:w,autoFocus:!0}),a&&i.a.createElement(c.Button,{"data-testid":"totp-verify-button",type:"submit",kind:g?a?"primary":"secondary":"disabled",onClick:function(e){e&&e.preventDefault(),t(w,(function(){return T("")}))}},n)))};y.defaultProps={buttonLabel:"Verify",extended:!0,description:"",onType:function(){}};t.a=y},343:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(18),a=n(1),o=n(0),i=n.n(o),c=n(29),u=n(4),s=n(59),l=n(307),f=n(25),d=n(152),m=["wrapper"],p=function(e){var t=e.wrapper,n=Object(r.a)(e,m),o=Object(c.d)().paywallContent,p=Object(s.a)(),h=p.isPaid,b=p.currentUserEmail,v=t,E=Object(f.a)(),y=Object(u.a)(E,2),g=y[0],O=y[1];return!!b&&!1===h&&null!==h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(v,n,i.a.createElement(d.a,{contentName:o}),i.a.createElement(a.Button,{onClick:function(){return g(l.a,{title:"Complete your registration",onClose:O})},className:"margin-top-m","data-testid":"registration-fee-btn"},"Pay the registration fee")))};p.defaultProps={wrapper:i.a.Fragment};var h=p,b=n(308),v=n(444),E=n.n(v),y=["children","className"],g=function(e){var t=e.children,n=e.className,o=Object(r.a)(e,y);return i.a.createElement(a.Card,Object.assign({className:Object(a.classNames)(E.a.sideBarBlockWrapper,"margin-bottom-m",n)},o),t)},O=function(e){var t=e.wrapper,n=Object(c.d)(),r=n.aboutContent,u=n.enablePaywall;return Object(o.useMemo)((function(){return i.a.createElement(t,{"data-testid":"sidebar"},u&&i.a.createElement(h,{wrapper:g,className:Object(a.classNames)(E.a.sideBarBlockWrapper,"margin-bottom-s"),marker:!0}),!!r&&i.a.createElement(g,null,i.a.createElement(b.a,{contentName:r})))}),[r,u])};O.defaultProps={wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,null,t)}};var _=O},345:function(e,t,n){"use strict";n.d(t,"b",(function(){return y}));var r=n(2),a=n(4),o=n(0),i=n.n(o),c=n(217),u=n(218),s=n(149),l=n(339),f=n(1),d=n(1223),m=n(61),p=n(150),h=n(21),b=n(55),v=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={error:!1},r}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.history;t.listen((function(){e.state.error&&e.setState({error:!1})}));var n=this.state.error;return Object(h.g)(n)?function(e){return i.a.createElement(m.a,{noCardWrap:!0},i.a.createElement(p.a,null),i.a.createElement(b.a,{justify:"center"},i.a.createElement(f.Button,{onClick:function(){return e.push("/")}},"Return home")))}(t):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(o.Component),E=Object(d.a)(v),y=Object(o.createContext)({component:function(){return null},props:{}}),g={component:function(){return null},props:{show:!1}};function O(e){return{toggle:!e.toggle}}t.a=function(e){var t=e.children,n=Object(o.useRef)([]),c=Object(o.useRef)(g),u=Object(o.useReducer)(O,{toggle:!1}),s=Object(a.a)(u,2)[1],l=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.overlay,i={component:e,props:Object(r.a)({show:!0},t)};!n.current||o?(n.current&&n.current.push(i),c.current=i,s()):c.current&&!c.current.props.show&&(c.current=i,s())}),[]),f=Object(o.useCallback)((function(){n.current&&n.current.pop();var e=n.current&&n.current.pop();c.current=e||g,s()}),[]),d=Object(r.a)({onClose:f},c.current.props);return i.a.createElement(E,null,i.a.createElement(y.Provider,{value:[l,f]},t,i.a.createElement(c.current.component,d)))}},346:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(3),a=n(2),o=n(19),i=n(4),c=n(0),u=n.n(c);function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:_(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=l;var d={};function m(){}function p(){}function h(){}var b={};u(b,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(C([])));E&&E!==t&&n.call(E,o)&&(b=E);var y=h.prototype=m.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=f(e[a],e,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new O(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),u(y,c,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var l=Object(c.createContext)(),f=function(){return Object(c.useContext)(l)},d=function(e){var t=e.children,f=Object(c.useState)({}),d=Object(i.a)(f,2),m=d[0],p=d[1],h=Object(c.useCallback)(function(){var e=Object(o.a)(s().mark((function e(t){var o,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","");case 2:if(!m[t]){e.next=4;break}return e.abrupt("return",m[t]);case 4:return e.prev=4,e.next=7,n(1132)("./".concat(t,".md"));case 7:return o=e.sent,e.next=10,fetch(o.default);case 10:return i=e.sent,e.next=13,i.text();case 13:return c=e.sent,p(Object(a.a)(Object(a.a)({},m),{},Object(r.a)({},t,c))),e.abrupt("return",c);case 18:throw e.prev=18,e.t0=e.catch(4),new Error("Failed loading static content: ".concat(t,". Error: ").concat(e.t0));case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[m]);return u.a.createElement(l.Provider,{value:{getContent:h}},t)}},347:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(1),i=n(29),c=function(e){var t=e.style,r=Object(o.useTheme)().themeName,c=Object(i.d)(),u=c.logoLight,s=c.logoDark,l=r===o.DEFAULT_DARK_THEME_NAME?s:u;return a.a.createElement("img",{role:"presentation",alt:"logo",style:t,src:n(1008)("./".concat(l))})}},351:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),a=n(18),o=n(0),i=n.n(o),c=n(1),u=n(147),s=n(183),l=n.n(s),f=["images","show","initialIndex"],d=function(e){var t=e.images,n=e.show,s=e.initialIndex,d=void 0===s?0:s,m=Object(a.a)(e,f),p=Object(o.useState)(d),h=Object(r.a)(p,2),b=h[0],v=h[1],E=t[b],y=E?"data:".concat(E.mime,";base64,").concat(E.payload):"",g=E?E.name:"image",O=t&&t.length>1;function _(){var e=t.length>b+1?b+1:0;v(e)}function j(){var e=0===b?t.length-1:b-1;v(e)}return Object(u.a)("keydown",(function(e){var t=e.key;"ArrowLeft"===t&&O&&j(),"ArrowRight"===t&&O&&_()})),i.a.createElement(c.Modal,Object.assign({},m,{show:n,wrapperClassName:l.a.wrapper,contentClassName:l.a.content}),i.a.createElement("div",{className:l.a.navigator},i.a.createElement(c.Card,{className:l.a.navigatorCard},O&&i.a.createElement(c.Icon,{className:l.a.navigatorIcon,onClick:j,type:"left"}),i.a.createElement("span",{className:"padding-x-s"},"".concat(b+1,"/").concat(t.length)),O&&i.a.createElement(c.Icon,{className:l.a.navigatorIcon,onClick:_,type:"right",size:"lg"}))),i.a.createElement("img",{alt:g,style:{width:"100%"},src:y}))}},352:function(e,t,n){e.exports={returnLink:"GoBackLink_returnLink__1dNp8",darkReturnLink:"GoBackLink_darkReturnLink__2qn9L",returnLinkContainer:"GoBackLink_returnLinkContainer__2ZKnr"}},354:function(e,t,n){e.exports={navButton:"HamburgerMenu_navButton__2HqQV",navIcon:"HamburgerMenu_navIcon__2JDl7",navIconClose:"HamburgerMenu_navIconClose__2vq7v HamburgerMenu_navIcon__2JDl7"}},356:function(e,t,n){e.exports={statusTag:"PaymentStatusTag_statusTag__SoV-U"}},358:function(e,t,n){e.exports={noBorder:"Header_noBorder__2M57E",showLogo:"Header_showLogo__2bj9a",hideLogo:"Header_hideLogo__QDhue Header_showLogo__2bj9a",customHeader:"Header_customHeader__WHHYF"}},359:function(e,t,n){e.exports={digitsWrapper:"DigitsInput_digitsWrapper__3g8bx",focusedInput:"DigitsInput_focusedInput__4MVNd",mainInput:"DigitsInput_mainInput__2PhN3"}},36:function(e,t,n){"use strict";var r=n(4),a=n(0),o=n(10),i=n(6),c=n(8),u=n(88),s=n.n(u);t.a=function(){var e=Object(i.c)(c.Xb),t=Object(i.c)(c.T),n=Object(i.b)(o.X),u=Object(a.useState)(),l=Object(r.a)(u,2),f=l[0],d=l[1];return Object(a.useEffect)((function(){s()(e)&&n().catch((function(e){d(e)}))}),[e,n]),{policy:e.www,policyTicketVote:e.ticketvote,policyComments:e.comments,policyPi:e.pi,loading:t,error:f}}},360:function(e,t,n){e.exports={container:"HelpMessage_container__3WYkK",helpMessage:"HelpMessage_helpMessage__2CQ55",dark:"HelpMessage_dark__28Pg1"}},361:function(e,t,n){e.exports={contentWrapper:"NotFound_contentWrapper__2daCB",notFoundImg:"NotFound_notFoundImg__V8ct0",returnHomeBtn:"NotFound_returnHomeBtn__3P2YH"}},362:function(e,t,n){e.exports={contentWrapper:"ModalSearchVotes_contentWrapper__2tEmV",loadingWrapper:"ModalSearchVotes_loadingWrapper___Xx4y",searchVotesModal:"ModalSearchVotes_searchVotesModal__2jcaa"}},363:function(e,t,n){e.exports={draftWrapper:"ModalDrafts_draftWrapper__Ua6Em",modalTitle:"ModalDrafts_modalTitle__1P7XW",draftTitleRfp:"ModalDrafts_draftTitleRfp__2x2yL"}},364:function(e,t,n){e.exports={arrowAnchor:"MonthPickerField_arrowAnchor__2Y4Pa",arrowAnchorOpen:"MonthPickerField_arrowAnchorOpen__3Gibu MonthPickerField_arrowAnchor__2Y4Pa",valueWrapper:"MonthPickerField_valueWrapper__nfh_N"}},365:function(e,t,n){e.exports={spinnerWrapper:"List_spinnerWrapper__2UBsS",actionsWrapper:"List_actionsWrapper__2MzQc"}},37:function(e,t,n){"use strict";n.d(t,"p",(function(){return E})),n.d(t,"d",(function(){return y})),n.d(t,"o",(function(){return g})),n.d(t,"q",(function(){return O})),n.d(t,"n",(function(){return _})),n.d(t,"r",(function(){return j})),n.d(t,"s",(function(){return w})),n.d(t,"k",(function(){return S})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return C})),n.d(t,"c",(function(){return k})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return x})),n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return N})),n.d(t,"j",(function(){return L})),n.d(t,"m",(function(){return A})),n.d(t,"l",(function(){return D})),n.d(t,"t",(function(){return U})),n.d(t,"g",(function(){return V}));var r,a,o=n(11),i=n(3),c=n(45),u=n(88),s=n.n(u),l=n(653),f=n.n(l),d=n(121),m=n.n(d),p=n(69),h=n(5),b=(r={},Object(i.a)(r,c.n,"Revocation"),Object(i.a)(r,c.m,"Issuance"),r),v=(a={},Object(i.a)(a,c.h,"active"),Object(i.a)(a,c.i,"approved"),Object(i.a)(a,c.k,"rejected"),a),E=function(e){return e&&e.dccpayload&&b[e.dccpayload.type]},y=function(e){switch(e.status){case c.h:return{type:"yellowTime",text:"Active"};case c.i:return{type:"greenCheck",text:"Approved"};case c.k:return{type:"orangeNegativeCircled",text:"Rejected"};case c.j:return{type:"blackTime",text:"Draft"}}},g=function(e){return e&&e.dccpayload?"".concat(E(e)," for ").concat(e.nomineeusername):""},O=function(e){return e&&e.type&&e.nomineeusername?"".concat(b[e.type]," DCC draft for ").concat(e.nomineeusername):""},_=function(e){return h.j[e]},j=function(e){return s()(e)?"No statement provided":e},w=function(e){return v[e]},S=function(e){return e&&e.dccpayload&&e.dccpayload.type===c.n},T=function(e){return e&&e.status===c.h},C=function(e){return e&&e.status===c.i},k=function(e){return h.j.reduce((function(e,t,n){return n===c.a||n===c.b||n===c.d?Object(o.a)(e):[].concat(Object(o.a)(e),[{label:t,value:n}])}),[]).filter((function(t){return!!e||t.value!==c.c}))},I=function(){return[{label:b[c.m],value:c.m},{label:b[c.n],value:c.n}]},x=function(e){return e.map((function(e){return{label:e.username,value:e.id}}))},R=function(e,t){return[{label:"Support",amount:e.length,color:"green"},{label:"Against",amount:t.length,color:"orange"}]},N=function(e,t){return e.map((function(e,n){return{label:t[n],value:e}}))},P=function(e){return function(t){return f()((function(e){return e===t}))(e)}},L=function(e,t){return!Object(p.b)(P(t.supportuserids),P(t.againstuserids),m()(t.sponsoruserid),function(e){return function(){return!T(e)}}(t))(e)},A=function(e){return e&&c.f.includes(e.contractortype)},D=function(e){return A(e)&&e.domain===c.e},U=function(e){return e&&Object.values(e).sort((function(e,t){return t.timestamp-e.timestamp}))},V=function(e,t){return function(){t(e)}}},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"l",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"k",(function(){return h}));var r=n(140),a=function(e){var t=e.reduce((function(e,t){return"/"===(n=t)||"."===n||"-"===n?e+"\\".concat(t):e+t;var n}),"");return new RegExp("^["+t+"]*$")},o=function(e){var t=e.reduce((function(e,t){return"/"===(n=t)||"."===n||"-"===n?"".concat(e,"\\").concat(t):"".concat(e).concat(t);var n}),""),n="([".concat(t,"])");return new RegExp(n,"gi")},i=function(e,t){return"".concat(r.a(e)," is not valid. Valid chars are ").concat(function(e){return e.reduce((function(e,t){return e+t}),"")}(t)," ")},c=function(e,t){return[a(t),{excludeEmptyString:!0,message:i(e,t)}]},u=function(e,t){return"".concat(r.a(e)," must be at least ").concat(t," characters")},s=function(e,t){return"".concat(r.a(e)," must be exactly ").concat(t," characters")},l=function(e,t){return"".concat(r.a(e)," must be at most ").concat(t," characters")},f=function(e,t){return"".concat(r.a(e)," must be greater than or equal to ").concat(t)},d=function(e,t){return"".concat(r.a(e)," must be less than or equal to ").concat(t)},m=function(){return"Files size can be at most 512kb"},p=function(e){return"Proposals must have at most ".concat(e," attached images")},h=function(e){return"Files must have a valid mime type: ".concat(e)}},42:function(e,t,n){e.exports={baseTitle:"RecordWrapper_baseTitle__tqu6p",underlineTitle:"RecordWrapper_underlineTitle__xhPYI",header:"RecordWrapper_header__ccbxR",subtitleWrapper:"RecordWrapper_subtitleWrapper__2b9cK",subtitleSeparator:"RecordWrapper_subtitleSeparator__2PKij",flexWrap:"RecordWrapper_flexWrap__PsyUK",eventTooltip:"RecordWrapper_eventTooltip__2KLN5",status:"RecordWrapper_status__233kH",editButton:"RecordWrapper_editButton__2HvKV",titleWrapper:"RecordWrapper_titleWrapper__3SJZN",rfpLink:"RecordWrapper_rfpLink__2MR3e",darkProposedFor:"RecordWrapper_darkProposedFor__eqxoN",proposedFor:"RecordWrapper_proposedFor__GiAam",titleEditWrapper:"RecordWrapper_titleEditWrapper__1z58d",rfpTitleWrapper:"RecordWrapper_rfpTitleWrapper__nX1-q",rfptag:"RecordWrapper_rfptag__1yXfQ",mobileRfpTag:"RecordWrapper_mobileRfpTag__9tZFD",commentsLink:"RecordWrapper_commentsLink__1ADUe",commentsNumber:"RecordWrapper_commentsNumber__2Y2AF",darkCommentsNumber:"RecordWrapper_darkCommentsNumber__1_HSX",actionsTooltip:"RecordWrapper_actionsTooltip__3w4fp",darkActionsTooltip:"RecordWrapper_darkActionsTooltip__1XXPq",recordToken:"RecordWrapper_recordToken__3ASxY",author:"RecordWrapper_author__16JxO",metadataLabel:"RecordWrapper_metadataLabel__1vmTN",disableMobileView:"RecordWrapper_disableMobileView__2_AzI",titleStatusWrapper:"RecordWrapper_titleStatusWrapper__4sgJH",title:"RecordWrapper_title__13QZe"}},437:function(e){e.exports=JSON.parse('{"title":"Politeia","logoLight":"pi-logo-light.svg","logoDark":"pi-logo-dark.svg","aboutContent":"about-politeia","paywallContent":"paywall-politeia","recordType":"proposal","enableAdminInvite":false,"enableCommentVote":true,"onBoardContent":"onboard-pi","onBoardLink":"https://docs.decred.org/governance/politeia/overview/","privacyPolicyContent":"privacy-policy","navMenuPaths":[{"label":"All Proposals","path":"/","admin":false},{"label":"My Proposals","path":"/user-proposals","admin":false},{"label":"My Drafts","path":"/drafts","admin":false},{"label":"Admin","path":"/admin/records","admin":true},{"label":"Search for users","path":"/user/search","admin":true},{"label":"Account","path":"/user","admin":false}]}')},439:function(e,t,n){e.exports=n.p+"static/media/rfp-tag.610c1f4b.svg"},441:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(21),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"\n  The server encountered an unexpected error, please contact Politeia\n  administrators and inform the api/".concat(t," error code: ").concat(e,"\n")};function o(e,t,n){switch(new URL(e.url).pathname.split("/")[2]){case"pi":throw new c(t);case"records":throw new u(t,n);case"comments":throw new s(t);case"ticketvote":throw new l(t,n);case"v1":throw new f(t,n);default:a()}}function i(e,t,n){switch(e){case"pi":throw new d(t,n);case"piuser":throw new m(t);case"comments":throw new p(t,n);case"ticketvote":throw new h(t,n);default:a()}}function c(e){this.message={1:"Invalid inputs for request",2:"The provided user identity is not active",3:"The provided record token is invalid",4:"The provided record was not found"}[e]||a(e,"pi"),this.errorcode=e,this.errorid="pi-user"}function u(e,t){var n={1:"Invalid inputs for request",2:"The provided record files are empty",3:"The file ".concat(t," has an invalid name"),4:"The provided record has duplicate files: ".concat(t),5:"The file ".concat(t," has an invalid MIME type"),6:"The file ".concat(t," has an unsupported MIME type."),7:"The file ".concat(t," has an invalid digest"),8:"The provided record mdstream has an invalid payload",9:"The provided record mdstream has an invalid ID ".concat(t),10:"The provided user public key is invalid",11:"The provided signature is invalid",12:"The provided record token is invalid",13:"The record was not found",14:"The record is locked for changes",15:"The record has no changes and therefore cannot be updated",16:"The record state is invalid",17:"The record status is invalid",18:"The status transition is invalid: ".concat(t),19:"The status reason was not found",20:"The number of requested record tokens exceeds the page size policy.",29:"You must be logged in to perform this action"};this.message=n[e]||a(e,"records"),this.errorcode=e,this.errorid="records-user"}function s(e){this.message={1:"Invalid inputs for request",2:"You must be an author or admin to perform this action",3:"The user public key is not active",4:"The provided signature was invalid for this comment",5:"The record has an invalid state",6:"The record token is invalid",7:"The record was not found",8:"The record is locked for changes",9:"No tokens found in the count votes request"}[e]||a(e,"comments"),this.errorcode=e,this.errorid="comments-user"}function l(e,t){var n={0:"Invalid vote error.",1:"Internal server error.",2:"The user public key is not active",3:"Unauthorized: ".concat(t),4:"The provided record was not found",5:"The provided record is locked",6:"The provided token is invalid",7:"The page size has exceeded: ".concat(t),8:"The provided payload is duplicate"};this.message=n[e]||a(e,"ticketvote"),this.errorcode=e,this.errorid="ticketvote-user"}function f(e,t){var n={1:"The provided password was invalid",2:"The provided email address is invalid",3:"The provided verification token is invalid. Please ensure you click the link or copy and paste it exactly as it appears in the verification email",4:"The provided verification token is expired. Please register again to receive another email with a new verification token",5:"The provided proposal is missing the following file(s): ".concat(t),6:"The requested proposal was not found",7:"The provided proposal has duplicate files: ".concat(t),8:"The provided proposal has an invalid title",9:"The submitted proposal has too many markdown files",10:"The submitted proposal has too many images",11:"The submitted proposal markdown is too large",12:"The submitted proposal has one or more images that are too large",13:"The password you provided is invalid; it's either too short, too long, or has unsupported characters.",14:"The requested comment was not found",15:"The provided proposal name was invalid",16:"The SHA256 checksum for one of the files was incorrect",17:"The Base64 encoding for one of the files was incorrect",18:"The MIME type detected for ".concat(t," is not supported"),19:"The MIME type for one of the files is not supported",20:"The requested proposal status transition is invalid",21:"The provided public key was invalid",22:"No active public key was found for your account, please visit your account page to resolve this issue",23:"The provided signature was invalid",24:"The provided inputs were invalid",25:"The private key used for signing was invalid",26:"Your comment is too long",27:"The user was not found",28:"The proposal is in an unexpected state, please contact Politeia administrators",29:"You must be logged in to perform this action",30:"You must pay the registration fee to perform this action",31:"You cannot change the status of your own proposal, please have another admin review it!",32:"The username you provided is invalid; it's either too short, too long, or has unsupported characters",33:"Another user already has that username, please choose another",34:"A verification email has already been sent recently. Please check your email, or wait until it expires and send another one",35:"The server cannot verify the payment at this time, please try again later or contact Politeia administrators",36:"The public key provided is already taken by another user",37:"The proposal cannot be set to that voting status",38:"Your account has been locked due to too many login attempts",40:"That is an invalid user edit action",41:"You are not authorized to perform this action",42:"This proposal is in the wrong state for that action",43:"Commenting is not allowed on this proposal",44:"You cannot vote on this comment",45:"You must provide a reason for censoring the proposal",46:"You must provide a reason for censoring the comment",47:"You cannot censor this comment",48:"Only the proposal author may perform this action",49:"The author has not yet authorized a vote for this proposal",50:"The vote has already been authorized for this proposal",51:"That is an invalid vote authorization action",52:"This account has been deactivated",53:"Your email address has not yet been verified",54:"Invalid proposal vote parameters",55:"Email address is not verified",56:"Invalid user ID",57:"Invalid like comment action",58:"Invalid proposal censorship token",59:"Email address is already verified",60:"No changes were found in the proposal",61:"Maximum proposal page size exceeded",62:"That is a duplicate comment.",63:"Invalid login credentials",64:"Comment is censored",65:"Invalid proposal version",66:"Invalid proposal metadata",67:"Missing proposal metadata",68:"Proposal metadata digest invalid",69:"Invalid vote type",70:"Invalid vote option",71:"The proposal linkby deadline was not met yet",72:"The RFP proposal has no linked proposals",73:"Invalid proposal linkto",74:"Invalid proposal linkby",75:"Invalid runoff vote",76:"Wrong proposal type",77:"Wrong 2FA code was provided",78:"Invalid TOTP type",79:"Login requires the TOTP code",80:"You must wait until the next TOTP code window",1001:"Malformed name",1002:"Malformed location",1003:"Invoice cannot be found",1004:"Month or year was set, while the other was not",1005:"Invalid invoice status transition",1006:"Reason for action not provided",1007:"Submitted invoice file is malformed",1008:"Submitted invoice is a duplicate of an existing invoice",1009:"Invalid payment address",1010:"Malformed line item submitted",1011:"Invoice missing contractor name",1013:"Invoice missing contractor contact",1014:"Invoice missing contractor rate",1015:"Invoice has invalid contractor rate",1016:"Invoice has malformed contractor contact",1017:"Line item has malformed proposal token",1018:"Line item has malformed domain",1019:"Line item has malformed subdomain",1020:"Line item has malformed description",1021:"Invoice is an wrong status to be editted (approved, rejected or paid)",1022:"Invoices require at least 1 line item",1023:"Only one invoice per month/year is allowed to be submitted",1024:"An invalid month/year was submitted on an invoice",1025:"Exchange rate was invalid or didn't match the expected result",1026:"An invalid line item type was entered",1027:"An invalid value was entered into labor or expenses",1028:"The invoice has a duplicate payment address, please use a new address",1029:"Invalid dates were requested for line item payouts",1030:"An attempted edit of invoice included an unauthorized month or year change",1031:"An invalid DCC Type was included in the request",1032:"Your domain does not match the DCC domain",1033:"The DCC sponsor statement is malformed",1034:"The submitted DCC file is malformed, please review and try again",1035:"This error is currently not implemented",1036:"There was an invalid status transition detected",1037:"That email is already being used by another user",1038:"You do not have the correct contractor status to submit an invoice",1039:"An invalid nominee was submitted for a DCC",1040:"The requested DCC was not found",1041:"Cannot comment/support/oppose a DCC if it's not active",1042:"Invalid suppport or opposition vote was included, must be aye or nay",1043:"You have already supported or opposed this DCC",1044:"You may not support or oppose your own sponsored DCC",1045:"You are not authorized to complete a DCC request",1046:"You must include a valid contractor type for a DCC",1047:"You must be a Supervisor Contractor to submit a Sub Contractor line item",1048:"You must supply a UserID for a Sub Contractor line item",1049:"Invalid SubContractor",1050:"Supervisor Error - ".concat(t),1051:"Malformed DCC",1052:"The DCC is not currently up for an all user vote",1053:"The user does not have the sufficient user weight for this vote",1054:"The all contractors voting period has ended",1055:"Cannot update the status of a DCC while the vote is still live",1056:"The user has already submitted a vote for this DCC",1057:"Codestats site username is required to receive the code stats",1058:"Code tracker required for attempted request, check token setting in config"};this.message=n[e]||a(e,"v1"),this.errorcode=e,this.errorid="www"}function d(e,t){var n={1:"The submitted proposal has an invalid file name: ".concat(t),2:"The file size is invalid, ".concat(t),3:"The required ".concat(t," file is missing"),4:"The provided images exceeds the maximum allowed, ".concat(t),5:"The file exceeds the maximum allowed size, ".concat(t),6:"Proposal name is invalid, ".concat(t),7:"This operation is not allowed, ".concat(t),8:"Proposal start date is invalid, ".concat(Object(r.d)(t)),9:"Proposal end date is invalid, ".concat(Object(r.d)(t)),10:"Proposal amount is invalid, ".concat(t),11:"Proposal domain is invalid, ".concat(t),15:"".concat(t),16:"".concat(t),17:"Comment replies are only allowed on the most recent author update thread",18:"Author update title is missing"};this.message=n[e]||a(e,"pi"),this.errorcode=e,this.errorid="pi"}function m(e){this.message={2:"You do not have any proposal credits; you must purchase one before you can submit a proposal."}[e]||a(e,"piuser"),this.errorcode=e}function p(e,t){var n={1:"The provided proposal token is invalid, ".concat(t),2:"The provided user public key is not active",3:"The provided signature is invalid",4:"The comment exceeds the maximum length allowed, ".concat(t),5:"The comment has no changes and therefore cannot be updated",6:"The provided comment code is not found ".concat(t),7:"Only the comment author is allowed to edit",8:"The provided parent ID is invalid, ".concat(t),9:"The provided comment vote is invalid, ".concat(t),10:"You have exceeded the max number of changes on your vote",12:"Backend does not accept the extra data needed for author updates",13:t,14:t};this.message=n[e]||a(e,"comments"),this.errorcode=e,this.errorid="comments"}function h(e,t){var n={1:"The provided record token is invalid, ".concat(t),2:"The provided user public key is invalid",3:"The provided signature is invalid",4:"The provided record version is invalid, ".concat(t),5:"The provided authorization is invalid, ".concat(t),6:"The start details for this vote are missing, ".concat(t),7:"The start details for this vote are invalid, ".concat(t),8:"The provided vote type is invalid, ".concat(t),9:"The provided vote duration is invalid, ".concat(t),10:"The provided quorum is invalid, ".concat(t),11:"The provided pass percentage is invalid, ".concat(t),12:"The provided vote options are invalid, ".concat(t),13:"The provided vote bits are invalid, ".concat(t),14:"The parent for the runnoff vote is invalid, ".concat(t),15:"The provided vote status is invalid, ".concat(t),16:"The provided metadata for this vote is invalid, ".concat(t),17:"The provided linkBy is invalid, ".concat(t),18:"The provided linkTo is invalid, ".concat(t),19:"The linkBy deadline for this record is not yet expired, ".concat(t),20:"The provided record status is invalid, ".concat(t)};this.message=n[e]||a(e,"comments"),this.errorcode=e,this.errorid="ticketvote"}c.prototype=new Error,u.prototype=new Error,s.prototype=new Error,l.prototype=new Error,f.prototype=new Error,d.prototype=new Error,m.prototype=new Error,p.prototype=new Error,h.prototype=new Error},443:function(e,t,n){e.exports={container:"LoaderScreen_container__1Ugw2",dark:"LoaderScreen_dark__X5H0N","logo-enter":"LoaderScreen_logo-enter__1qVRw","logo-active":"LoaderScreen_logo-active__3OqdW","logo-exit":"LoaderScreen_logo-exit__-K3yH"}},444:function(e,t,n){e.exports={sideBarBlockWrapper:"SidebarContent_sideBarBlockWrapper__1Jdl1"}},445:function(e,t,n){e.exports={wrapper:"ProposalCreditsIndicator_wrapper__2zDh4",proposalCreditsButton:"ProposalCreditsIndicator_proposalCreditsButton__1IH7I"}},446:function(e,t,n){e.exports={privacyPolicyTxt:"LoginForm_privacyPolicyTxt__1UFZg",createAccounTxt:"LoginForm_createAccounTxt__2b4IR",totp:"LoginForm_totp__fSiqj",hide:"LoginForm_hide__1RUue",totpInput:"LoginForm_totpInput__3Su30"}},449:function(e,t,n){e.exports={wrapper:"LoadingWithMessage_wrapper__2RMwY",text:"LoadingWithMessage_text__1SRc3"}},45:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"m",(function(){return c})),n.d(t,"n",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"g",(function(){return b}));var r=1,a=2,o=3,i=4,c=1,u=2,s=2,l=3,f=4,d=5,m=1,p=[1,s,l],h="aye",b="nay"},451:function(e,t,n){e.exports={dateTooltip:"DateTooltip_dateTooltip__2NVWM",darkDateTooltip:"DateTooltip_darkDateTooltip__1DuEZ"}},452:function(e,t,n){e.exports={copyTooltip:"CopyToClipboard_copyTooltip__2l_Xm",darkCopyTooltip:"CopyToClipboard_darkCopyTooltip__6oVLG"}},453:function(e,t,n){e.exports={reportButton:"ProposalActions_reportButton__3oKuD"}},455:function(e,t,n){e.exports={tableButton:"TableButton_tableButton__1AHkD",tableButtonDisabled:"TableButton_tableButtonDisabled__1e9WI"}},457:function(e,t,n){e.exports={customMain:"Detail_customMain__3wa5A",customHeader:"Detail_customHeader__2GzmO",customTitleAndSubtitleWrapper:"Detail_customTitleAndSubtitleWrapper__2Hwr-",commentsHeaderWrapper:"Detail_commentsHeaderWrapper__2l6sn"}},458:function(e,t,n){e.exports={titleWrapper:"Detail_titleWrapper__2AjQi",sidebanner:"Detail_sidebanner__3xpCe",titleLink:"Detail_titleLink__1H8NR"}},46:function(e,t,n){e.exports={row:"Proposal_row__8stpv",authorizeTooltip:"Proposal_authorizeTooltip__3f519",disabled:"Proposal_disabled__24e_p",filesRow:"Proposal_filesRow__ym64j",blocksLeft:"Proposal_blocksLeft__12W8-",subtitleStatusTag:"Proposal_subtitleStatusTag__2uCLC",version:"Proposal_version__2X0Wi",versionPicker:"Proposal_versionPicker__1gIcB",darkVersionPicker:"Proposal_darkVersionPicker__gbLga",markdownContainer:"Proposal_markdownContainer__24dtL",rfpMarkdownContainer:"Proposal_rfpMarkdownContainer__2m7-3",voteCount:"Proposal_voteCount__2_LLq",quorumAndVotes:"Proposal_quorumAndVotes__s5iX4",voteCountSearch:"Proposal_voteCountSearch__11xx_",lastRow:"Proposal_lastRow__1Jc7D",copyLink:"Proposal_copyLink__2JXZk",downloadCommentsLink:"Proposal_downloadCommentsLink__b-R0t",abandonedProposal:"Proposal_abandonedProposal__1P0gD",rfpProposal:"Proposal_rfpProposal__feOrH",proposalActions:"Proposal_proposalActions__25ckk",statusTag:"Proposal_statusTag__xFNdF",statusBarTooltip:"Proposal_statusBarTooltip__EYAQq",quorumTooltip:"Proposal_quorumTooltip__1Y3mb",darkQuorumTooltip:"Proposal_darkQuorumTooltip__2eZkr",votesQuorum:"Proposal_votesQuorum__26bzh",votesLeft:"Proposal_votesLeft__3FUna",votesReceived:"Proposal_votesReceived__1wGQy",rawMarkdownPre:"Proposal_rawMarkdownPre__1XnBe",toggleMarkdownLink:"Proposal_toggleMarkdownLink__1D9TB"}},460:function(e,t,n){e.exports={attachFileButton:"AttachFileInput_attachFileButton__1Z6uh",small:"AttachFileInput_small__ZjsQs"}},462:function(e,t,n){e.exports={list:"ModalVotesList_list__MzlH0",card:"ModalVotesList_card__20fs0"}},463:function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){var n=Object(r.useRef)(null),a=Object(r.useCallback)((function(e){n.current=setTimeout((function(){return document.getElementById(e).scrollIntoView()}),100)}),[]);Object(r.useLayoutEffect)((function(){return t&&a(e),function(){return n.current&&clearTimeout(n.current)}}),[e,a,t])}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(2),a=n(18),o=n(0),i=n.n(o),c=n(1),u=n(32),s=n(26),l=n(162),f=n.n(l),d=["className"],m=["className"],p=["className"],h=["className"],b=["className"],v=["className"],E=["children","loading"],y=function(e){var t=e.className,n=Object(a.a)(e,d);return i.a.createElement(c.H1,Object.assign({className:Object(c.classNames)(f.a.title,t)},n))},g=function(e){var t=e.className,n=Object(a.a)(e,m);return i.a.createElement("div",Object.assign({className:Object(c.classNames)(n.children.length>1?f.a.actions:f.a.singleAction,t)},n))},O=function(e){var t=e.className,n=Object(a.a)(e,p);return i.a.createElement("div",Object.assign({className:Object(c.classNames)(f.a.footer,t)},n))},_=function(e){var t=e.className,n=Object(a.a)(e,h);return i.a.createElement("form",Object.assign({className:Object(c.classNames)(f.a.form,t)},n))},j=function(e){var t=e.className,n=Object(a.a)(e,b);return i.a.createElement(c.Message,Object.assign({kind:"error",className:Object(c.classNames)(f.a.errorMessage,t)},n))},w=function(e){var t=e.className,n=Object(a.a)(e,v);return i.a.createElement("div",Object.assign({className:Object(c.classNames)(f.a.loader,t)},n),i.a.createElement(c.Spinner,{invert:!0}))},S=function(e){var t=e.children,n=e.loading,o=Object(a.a)(e,E);return n?i.a.createElement(w,null):i.a.createElement(u.c,o,(function(e){return t(Object(r.a)(Object(r.a)({},e),{},{Actions:g,Footer:O,Title:y,Form:_,ErrorMessage:j,Link:s.a}))}))}},48:function(e,t,n){"use strict";n.d(t,"h",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return g}));var r=n(100),a=n.n(r),o=n(68),i=n.n(o),c=n(260),u=n.n(c),s=n(127),l=function(e){return e?function(e){return"state-".concat(e)}(e):"state"},f=function(e){try{var t=localStorage.getItem(l(e));return t?JSON.parse(t):void 0}catch(n){return}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var n=JSON.stringify(e);localStorage.setItem(l(t),n)}catch(r){console.log(r)}},m=function(e){var t=l(e);localStorage.removeItem(t)},p=function(e,t){return d(t,"".concat(e,"-votes-timestamps"))},h=function(e){return f("".concat(e,"-votes-timestamps"))},b=function(e,t){return d(t,"".concat(e,"-comments-timestamps"))},v=function(e){return f("".concat(e,"-comments-timestamps"))},E=function(e){var t=Object(s.e)(e);if(t){var n=f(t)||{},r=e.app.draftProposals,o=i()(n,["app","draftProposals"],{});if(r&&!a()(r,o)){var c=u()(n,["app","draftProposals"],r);d(c,t)}}},y=function(e){var t=Object(s.e)(e);if(t){var n=f(t)||{},r=e.app.draftInvoices,o=i()(n,["app","draftInvoices"],{});if(r&&!a()(r,o)){var c=u()(n,["app","draftInvoices"],r);d(c,t)}}},g=function(e){var t=Object(s.e)(e);if(t){var n=f(t)||{},r=e.app.draftDccs,o=i()(n,["app","draftDccs"],{});if(r&&!a()(r,o)){var c=u()(n,["app","draftDccs"],r);d(c,t)}}}},49:function(e,t,n){"use strict";n.d(t,"c",(function(){return r.h})),n.d(t,"d",(function(){return r.m})),n.d(t,"e",(function(){return r.n})),n.d(t,"b",(function(){return r.d})),n.d(t,"a",(function(){return r.b})),n.d(t,"f",(function(){return a.c})),n.d(t,"g",(function(){return a.e})),n.d(t,"h",(function(){return a.f})),n.d(t,"j",(function(){return a.m})),n.d(t,"i",(function(){return a.l})),n.d(t,"k",(function(){return a.t})),n.d(t,"l",(function(){return s}));var r=n(45),a=n(37),o=(n(2),n(0)),i=n.n(o),c=n(29),u={recordType:n(321).a.RECORD_TYPE_DCC},s=function(e){return function(t){return i.a.createElement(c.b,u,i.a.createElement(e,t))}}},5:function(e,t,n){"use strict";n.d(t,"Pb",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"h",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"x",(function(){return s})),n.d(t,"cb",(function(){return l})),n.d(t,"kb",(function(){return f})),n.d(t,"jb",(function(){return d})),n.d(t,"ib",(function(){return m})),n.d(t,"hb",(function(){return p})),n.d(t,"tb",(function(){return h})),n.d(t,"ub",(function(){return b})),n.d(t,"vb",(function(){return v})),n.d(t,"sb",(function(){return E})),n.d(t,"lb",(function(){return y})),n.d(t,"ob",(function(){return g})),n.d(t,"wb",(function(){return O})),n.d(t,"xb",(function(){return _})),n.d(t,"rb",(function(){return j})),n.d(t,"mb",(function(){return w})),n.d(t,"qb",(function(){return S})),n.d(t,"nb",(function(){return T})),n.d(t,"pb",(function(){return C})),n.d(t,"fb",(function(){return k})),n.d(t,"gb",(function(){return I})),n.d(t,"yb",(function(){return x})),n.d(t,"zb",(function(){return R})),n.d(t,"Ab",(function(){return N})),n.d(t,"X",(function(){return P})),n.d(t,"Y",(function(){return L})),n.d(t,"Z",(function(){return A})),n.d(t,"Yb",(function(){return D})),n.d(t,"Xb",(function(){return U})),n.d(t,"eb",(function(){return V})),n.d(t,"Wb",(function(){return M})),n.d(t,"Bb",(function(){return F})),n.d(t,"W",(function(){return B})),n.d(t,"db",(function(){return G})),n.d(t,"Vb",(function(){return W})),n.d(t,"V",(function(){return Y})),n.d(t,"T",(function(){return H})),n.d(t,"U",(function(){return Q})),n.d(t,"Mb",(function(){return q})),n.d(t,"Lb",(function(){return z})),n.d(t,"Hb",(function(){return K})),n.d(t,"Eb",(function(){return J})),n.d(t,"Cb",(function(){return X})),n.d(t,"Fb",(function(){return Z})),n.d(t,"Db",(function(){return $})),n.d(t,"Ib",(function(){return ee})),n.d(t,"Gb",(function(){return te})),n.d(t,"bb",(function(){return ne})),n.d(t,"ab",(function(){return re})),n.d(t,"Ub",(function(){return ae})),n.d(t,"a",(function(){return oe})),n.d(t,"b",(function(){return ie})),n.d(t,"d",(function(){return ce})),n.d(t,"Tb",(function(){return ue})),n.d(t,"Nb",(function(){return se})),n.d(t,"o",(function(){return le})),n.d(t,"c",(function(){return fe})),n.d(t,"Jb",(function(){return de})),n.d(t,"g",(function(){return me})),n.d(t,"E",(function(){return pe})),n.d(t,"G",(function(){return he})),n.d(t,"F",(function(){return be})),n.d(t,"C",(function(){return ve})),n.d(t,"D",(function(){return Ee})),n.d(t,"H",(function(){return ye})),n.d(t,"A",(function(){return ge})),n.d(t,"z",(function(){return Oe})),n.d(t,"O",(function(){return _e})),n.d(t,"P",(function(){return je})),n.d(t,"R",(function(){return we})),n.d(t,"Q",(function(){return Se})),n.d(t,"S",(function(){return Te})),n.d(t,"K",(function(){return Ce})),n.d(t,"L",(function(){return ke})),n.d(t,"N",(function(){return Ie})),n.d(t,"M",(function(){return xe})),n.d(t,"Ob",(function(){return Re})),n.d(t,"n",(function(){return Ne})),n.d(t,"Kb",(function(){return Pe})),n.d(t,"r",(function(){return Le})),n.d(t,"q",(function(){return Ae})),n.d(t,"B",(function(){return De})),n.d(t,"u",(function(){return Ue})),n.d(t,"y",(function(){return Ve})),n.d(t,"t",(function(){return Me})),n.d(t,"w",(function(){return Fe})),n.d(t,"s",(function(){return Be})),n.d(t,"v",(function(){return Ge})),n.d(t,"f",(function(){return We})),n.d(t,"e",(function(){return Ye})),n.d(t,"j",(function(){return He})),n.d(t,"J",(function(){return Qe})),n.d(t,"I",(function(){return qe})),n.d(t,"p",(function(){return ze})),n.d(t,"Qb",(function(){return Ke})),n.d(t,"Rb",(function(){return Je})),n.d(t,"Sb",(function(){return Xe}));var r="testnet",a="cmswww",o="dcrdata",i=16,c=1,u="aye",s=2,l=0,f=1,d=2,m=3,p=4,h="unvetted",b="unvetted-abandoned",v="unvetted-censored",E="under-review",y="abandoned",g="censored",O="vote-authorized",_="vote-started",j="rejected",w="active",S="completed",T="approved",C="closed",k=1,I=2,x=1,R=2,N=3,P=1,L=2,A=3,D=1,U=2,V="proposalmetadata.json",M="votemetadata.json",F="proposalupdate",B="$",G="main",W="usermd",Y=0,H=1,Q=2,q=0,z=1,K=1,J=2,X=3,Z=4,$=5,ee=6,te=7,ne=1,re=-1,ae="unreviewed",oe="started",ie="approved",ce="authorized",ue="unauthorized",se="rejected",le="ineligible",fe="archived",de="public",me="censored",pe=1,he=2,be=3,ve=4,Ee=6,ye=7,ge="Proposals",Oe="Admin Proposals",_e=1,je=2,we=4,Se=8,Te=16,Ce=32,ke=64,Ie=128,xe=256,Re="ed255191~",Ne="User identity not found. You need to restore it from a backup or generate a new one.",Pe="The provided public key doesn't match the key stored in the server.",Le="The provided key pair is not valid.",Ae="This is not a valid identity file. The identity has to be a JSON file containing the publicKey and the secretKey values.",De="Sorry, something went wrong while importing the identity file, please try again. If the error persists, contact the Politeia support.",Ue=2,Ve=3,Me=4,Fe=5,Be=6,Ge=7,We=2,Ye=5,He=["No type defined","Direct","Supervisor","Sub Contractor","Nominee","Revoked"],Qe="/nojavascript",qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ze="Invalid date",Ke=6,Je=1,Xe=79},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(34),n(61);var r=n(0),a=n.n(r),o=n(76),i=n.n(o),c=n(1),u=function(e){var t=e.children,n=e.topMarginSize,r=e.justify,o=e.align,u=e.noMargin,s=e.className,l=e.hide,f=e.wrap,d=e.onClick;return!l&&a.a.createElement("div",{className:Object(c.classNames)(!u&&"margin-top-".concat(n),"justify-".concat(r),"align-".concat(o),f&&i.a.wrap,s),onClick:d},t)};u.defaultProps={topMarginSize:"m",justify:"left",align:"stretch",wrap:!1,hide:!1,noMargin:!1};var s=u},57:function(e,t,n){"use strict";var r=n(19),a=n(4),o=n(0),i=n.n(o),c=n(1),u=n(47),s=n(23),l=n(21);function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:_(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var d={};function m(){}function p(){}function h(){}var b={};u(b,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(C([])));E&&E!==t&&n.call(E,o)&&(b=E);var y=h.prototype=m.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new O(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),u(y,c,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var d=function(e){var t=e.show,n=e.onClose,d=e.onSubmit,m=e.title,p=e.message,h=e.successTitle,b=e.successMessage,v=e.onCloseSuccess,E=Object(s.h)(),y=Object(a.a)(E,2)[1],g=Object(s.d)(),O=Object(o.useState)(!1),_=Object(a.a)(O,2),j=_[0],w=_[1],S=Object(c.useTheme)().theme,T=Object(c.getThemeProperty)(S,"success-icon-background-color"),C=Object(c.getThemeProperty)(S,"success-icon-checkmark-color"),k=function(){var e=Object(r.a)(f().mark((function e(t,n){var r,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,a=n.setFieldError,o=n.setSubmitting,e.prev=1,e.next=4,d();case 4:r(),w(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),o(!1),a("global",e.t0),Object(l.g)(e.t0)&&(g(e.t0),y());case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){t||setTimeout((function(){return w(!1)}),500)}),[t]),i.a.createElement(c.Modal,{style:{width:"600px"},title:j&&h||m,show:t,onClose:j&&v?v:n,iconComponent:j?i.a.createElement(c.Icon,{type:"checkmark",iconColor:C,backgroundColor:T,size:26}):i.a.createElement(c.Icon,{type:"info",size:26})},!j&&i.a.createElement(u.a,{initialValues:{},onSubmit:k},(function(e){var t=e.Form,n=e.Actions,r=e.ErrorMessage,a=e.handleSubmit,o=e.errors,u=e.isSubmitting;return i.a.createElement(t,{onSubmit:a},o&&o.global&&i.a.createElement(r,{"data-testid":"modal-confirm-error"},o.global.toString()),i.a.createElement(c.Text,null,p),i.a.createElement(n,{className:"no-padding-bottom"},i.a.createElement(c.Button,{loading:u,type:"submit","data-testid":"modal-confirm-button"},"Confirm")))})),j&&i.a.createElement(i.a.Fragment,null,b,i.a.createElement("div",{className:"justify-right margin-top-m"},i.a.createElement(c.Button,{onClick:v||n,"data-testid":"modal-confirm-success-msg"},"Ok"))))};d.defaultProps={title:"Confirm Action",message:"Are you sure?"},t.a=i.a.memo(d)},58:function(e,t,n){e.exports={block:"Credits_block__3BOUe",blockDetails:"Credits_blockDetails__TYhgI",descriptionParagraph:"Credits_descriptionParagraph__pQDVO",darkDescriptionParagraph:"Credits_darkDescriptionParagraph__23NrY",title:"Credits_title__3M6BW",status:"Credits_status__-jFqS",darkTitle:"Credits_darkTitle__1W7vM",spinnerWrapper:"Credits_spinnerWrapper__11pos",buttonsWrapper:"Credits_buttonsWrapper__1Rpsp"}},59:function(e,t,n){"use strict";var r=n(0),a=n(8),o=n(6),i=n(29);t.a=function(e){var t=Object(o.c)(a.s),n=e||t,c=Object(o.c)(a.r),u=Object(o.c)(a.v),s=Object(o.c)(a.w),l=Object(o.c)(a.x),f=Object(o.c)(a.y),d=Object(r.useMemo)((function(){return a.Lb(n)}),[n]),m=Object(r.useMemo)((function(){return a.Mb(n)}),[n]),p=Object(o.c)(d),h=Object(o.c)(m),b=Object(i.d)();return{currentUserEmail:c,paywallAddress:u,paywallAmount:s,paywallTxId:f,paywallTxNotBefore:l,userPaywallStatus:h,isPaid:p,paywallEnabled:b.enablePaywall,creditsEnabled:b.enableCredits}}},6:function(e,t,n){"use strict";n.d(t,"c",(function(){return ft})),n.d(t,"b",(function(){return mt})),n.d(t,"d",(function(){return pt})),n.d(t,"a",(function(){return bt}));var r,a,o,i=n(11),c=n(160),u=n(638),s=n(3),l=n(2),f=n(7),d={init:{},policy:{},keyMismatch:!1,draftProposals:null,draftInvoices:null,draftDccs:null,csrfIsNeeded:null,shouldVerifyKey:!1,identityImportResult:{errorMsg:"",successMsg:""},pollingCreditsPayment:!1,reachedCreditsPaymentPollingLimit:!1,proposalPaymentReceived:!1},m=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(s.a)(e,f.RECEIVE_INIT_SESSION,(function(){return n.error?t:Object(l.a)(Object(l.a)({},t),{},{init:n.payload})})),Object(s.a)(e,f.RECEIVE_POLICY,(function(){return n.error?t:Object(l.a)(Object(l.a)({},t),{},{policy:n.payload})})),Object(s.a)(e,f.KEY_MISMATCH,(function(){return Object(l.a)(Object(l.a)({},t),{},{keyMismatch:n.payload})})),Object(s.a)(e,f.SAVE_DRAFT_PROPOSAL,(function(){var e=t.draftProposals,r=n.payload.id;return Object(l.a)(Object(l.a)({},t),{},{draftProposals:Object(l.a)(Object(l.a)({},e),{},Object(s.a)({newDraft:!0,lastSubmitted:n.payload.name},r,Object(l.a)(Object(l.a)({},n.payload),{},{draftId:r})))})})),Object(s.a)(e,f.DELETE_DRAFT_PROPOSAL,(function(){var e=n.payload;if(!t.draftProposals[e])return t;var r=t.draftProposals;return delete r[e],Object(l.a)(Object(l.a)({},t),{},{draftProposals:r})})),Object(s.a)(e,f.LOAD_DRAFT_PROPOSALS,(function(){return Object(l.a)(Object(l.a)({},t),{},{draftProposals:n.payload})})),Object(s.a)(e,f.SAVE_DRAFT_INVOICE,(function(){var e=t.draftInvoices,r=n.payload.id;return Object(l.a)(Object(l.a)({},t),{},{draftInvoices:Object(l.a)(Object(l.a)({},e),{},Object(s.a)({newDraft:!0,lastSubmitted:n.payload.name},r,Object(l.a)(Object(l.a)({},n.payload),{},{draftId:r})))})})),Object(s.a)(e,f.DELETE_DRAFT_INVOICE,(function(){var e=n.payload;if(!t.draftInvoices[e])return t;var r=t.draftInvoices;return delete r[e],Object(l.a)(Object(l.a)({},t),{},{draftInvoices:r})})),Object(s.a)(e,f.LOAD_DRAFT_INVOICES,(function(){return Object(l.a)(Object(l.a)({},t),{},{draftInvoices:n.payload})})),Object(s.a)(e,f.SAVE_DRAFT_DCC,(function(){var e=t.draftDccs,r=n.payload.id;return Object(l.a)(Object(l.a)({},t),{},{draftDccs:Object(l.a)(Object(l.a)({},e),{},Object(s.a)({newDraft:!0,lastSubmitted:r},r,Object(l.a)(Object(l.a)({},n.payload),{},{draftId:r})))})})),Object(s.a)(e,f.DELETE_DRAFT_DCC,(function(){var e=n.payload;if(!t.draftDccs[e])return t;var r=t.draftDccs;return delete r[e],Object(l.a)(Object(l.a)({},t),{},{draftDccs:r})})),Object(s.a)(e,f.LOAD_DRAFT_DCCS,(function(){return Object(l.a)(Object(l.a)({},t),{},{draftDccs:n.payload})})),Object(s.a)(e,f.CSRF_NEEDED,(function(){return Object(l.a)(Object(l.a)({},t),{},{init:Object(l.a)(Object(l.a)({},t.init),{},{csrfToken:null})})})),Object(s.a)(e,f.SHOULD_AUTO_VERIFY_KEY,(function(){return Object(l.a)(Object(l.a)({},t),{},{shouldVerifyKey:n.payload})})),Object(s.a)(e,f.IDENTITY_IMPORTED,(function(){return Object(l.a)(Object(l.a)({},t),{},{identityImportResult:n.payload})})),Object(s.a)(e,f.TOGGLE_CREDITS_PAYMENT_POLLING,(function(){return Object(l.a)(Object(l.a)({},t),{},{pollingCreditsPayment:n.payload})})),Object(s.a)(e,f.TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT,(function(){return Object(l.a)(Object(l.a)({},t),{},{reachedCreditsPaymentPollingLimit:n.payload})})),Object(s.a)(e,f.TOGGLE_PROPOSAL_PAYMENT_RECEIVED,(function(){return Object(l.a)(Object(l.a)({},t),{},{proposalPaymentReceived:n.payload})})),Object(s.a)(e,f.RECEIVE_LOGOUT,(function(){return Object(l.a)(Object(l.a)({},d),{},{policy:t.policy})})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return Object(l.a)(Object(l.a)({},d),{},{policy:t.policy})})),e)[n.type]||function(){return t})()},p={isRequesting:!1,error:null},h=function(e,t,n){var r=n.payload,a=n.error;return r?Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},e,Object(l.a)(Object(l.a)({},t[e]),{},{payload:a?null:r,isRequesting:!a,error:a?r:null}))):Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},e,Object(l.a)(Object(l.a)({},t[e]),{},{isRequesting:!a,error:a?r:null})))},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.payload,a=n.error,o=arguments.length>3?arguments[3]:void 0;return Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},e,Object(l.a)(Object(l.a)({},t[e]),{},{payload:a?null:r,isRequesting:!1,error:a?r:o?t[e].error:null})))},v=function(e,t){return Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},e,p))},E=function(e,t){e=h("likeComment",e,t);var n=t.payload.commentid;return Object(l.a)(Object(l.a)({},e),{},{likeComment:Object(l.a)(Object(l.a)({},e.likeComment),{},{isRequesting:Object(s.a)({},n,!0)})})},y=n(30),g=n.n(y),O={me:p,init:p,policy:p,newUser:p,verifyNewUser:p,user:p,login:p,logout:p,changeUsername:p,changePassword:p,userProposals:p,userInventory:p,tokenInventory:p,proposalsBatch:p,proposal:p,proposalComments:p,likeComment:p,censorComment:p,commentslikes:p,editUser:p,codestats:p,manageUser:p,userSearch:p,newProposal:p,editProposal:p,newComment:p,proposalPaywallDetails:p,proposalOwnerBilling:p,userProposalCredits:p,resetPassword:p,verifyResetPassword:p,resendVerificationEmail:p,setStatusProposal:p,startVote:p,updateUserKey:p,verifyUserKey:p,proposalsVoteSummary:p,proposalVoteResults:p,authorizeVote:p,proposalPaywallPayment:p,rescanUserPayments:p,payouts:p,invoicePayouts:p,payApproved:p,spendingSummary:p,inviteUser:p,newInvoice:p,userInvoices:p,adminInvoices:p,invoice:p,invoiceComments:p,setStatusInvoice:p,editInvoice:p,exchangeRate:p,manageCmsUser:p,userSubcontractors:p,newDcc:p,dccs:p,dcc:p,supportOpposeDCC:p,setDCCStatus:p,setTotp:p,verifyTotp:p},_=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(s.a)(e,f.REQUEST_ME,(function(){return h("me",t,n)})),Object(s.a)(e,f.RECEIVE_ME,(function(){return b("me",t,n)})),Object(s.a)(e,f.REQUEST_INIT_SESSION,(function(){return h("init",t,n)})),Object(s.a)(e,f.RECEIVE_INIT_SESSION,(function(){return b("init",t,n)})),Object(s.a)(e,f.REQUEST_POLICY,(function(){return h("policy",t,n)})),Object(s.a)(e,f.RECEIVE_POLICY,(function(){return b("policy",t,n)})),Object(s.a)(e,f.REQUEST_NEW_USER,(function(){return h("newUser",t,n)})),Object(s.a)(e,f.RECEIVE_NEW_USER,(function(){return b("newUser",t,n)})),Object(s.a)(e,f.RESET_NEW_USER,(function(){return v("newUser",t)})),Object(s.a)(e,f.REQUEST_VERIFY_NEW_USER,(function(){return h("verifyNewUser",t,n)})),Object(s.a)(e,f.RECEIVE_VERIFY_NEW_USER,(function(){return b("verifyNewUser",t,n)})),Object(s.a)(e,f.REQUEST_USER,(function(){return h("user",t,n)})),Object(s.a)(e,f.RECEIVE_USER,(function(){return b("user",t,n)})),Object(s.a)(e,f.REQUEST_LOGIN,(function(){return h("login",t,n)})),Object(s.a)(e,f.RECEIVE_LOGIN,(function(){return b("login",t,n)})),Object(s.a)(e,f.REQUEST_LOGOUT,(function(){return h("logout",t,n)})),Object(s.a)(e,f.RECEIVE_LOGOUT,(function(){return b("logout",t,n)})),Object(s.a)(e,f.REQUEST_CHANGE_USERNAME,(function(){return h("changeUsername",t,n)})),Object(s.a)(e,f.RECEIVE_CHANGE_USERNAME,(function(){return b("changeUsername",t,n)})),Object(s.a)(e,f.REQUEST_CHANGE_PASSWORD,(function(){return h("changePassword",t,n)})),Object(s.a)(e,f.RECEIVE_CHANGE_PASSWORD,(function(){return b("changePassword",t,n)})),Object(s.a)(e,f.REQUEST_USER_INVENTORY,(function(){return h("userInventory",t,n)})),Object(s.a)(e,f.RECEIVE_USER_INVENTORY,(function(){return b("userInventory",t)})),Object(s.a)(e,f.REQUEST_TOKEN_INVENTORY,(function(){return h("tokenInventory",t,n)})),Object(s.a)(e,f.RECEIVE_VOTES_INVENTORY,(function(){return b("tokenInventory",t,n)})),Object(s.a)(e,f.REQUEST_PROPOSALS_BATCH,(function(){return h("proposalsBatch",t,n)})),Object(s.a)(e,f.RECEIVE_PROPOSALS_BATCH,(function(){return b("proposalsBatch",t)})),Object(s.a)(e,f.REQUEST_PROPOSAL,(function(){return h("proposal",t,n)})),Object(s.a)(e,f.RECEIVE_PROPOSAL,(function(){return b("proposal",t,n)})),Object(s.a)(e,f.REQUEST_CODE_STATS,(function(){return h("codestats",t,n)})),Object(s.a)(e,f.RECEIVE_CODE_STATS,(function(){return b("codestats",t,n)})),Object(s.a)(e,f.REQUEST_PROPOSAL_BILLING,(function(){return h("proposalOwnerBilling",t,n)})),Object(s.a)(e,f.RECEIVE_PROPOSAL_BILLING,(function(){return b("proposalOwnerBilling",t,n)})),Object(s.a)(e,f.REQUEST_RECORD_COMMENTS,g()((function(e){return b("likeComment",e,{payload:{}})}),(function(){return h("proposalComments",t,n)}))),Object(s.a)(e,f.RECEIVE_RECORD_COMMENTS,(function(){return b("proposalComments",t,n)})),Object(s.a)(e,f.REQUEST_LIKE_COMMENT,(function(){return E(t,n)})),Object(s.a)(e,f.RECEIVE_LIKE_COMMENT,(function(){return b("likeComment",t,n,!0)})),Object(s.a)(e,f.RECEIVE_LIKE_COMMENT_SUCCESS,(function(){return b("likeComment",t,n)})),Object(s.a)(e,f.REQUEST_CENSOR_COMMENT,(function(){return h("censorComment",t,n)})),Object(s.a)(e,f.RECEIVE_CENSOR_COMMENT,(function(){return b("censorComment",t)})),Object(s.a)(e,f.REQUEST_LIKED_COMMENTS,(function(){return h("commentslikes",t,n)})),Object(s.a)(e,f.RECEIVE_LIKED_COMMENTS,(function(){return b("commentslikes",t,n)})),Object(s.a)(e,f.REQUEST_EDIT_USER,(function(){return h("editUser",t,n)})),Object(s.a)(e,f.RECEIVE_EDIT_USER,(function(){return b("editUser",t,n)})),Object(s.a)(e,f.REQUEST_MANAGE_USER,(function(){return h("manageUser",t,n)})),Object(s.a)(e,f.RECEIVE_MANAGE_USER,(function(){return b("manageUser",t)})),Object(s.a)(e,f.REQUEST_USER_SEARCH,(function(){return h("userSearch",t,n)})),Object(s.a)(e,f.RECEIVE_USER_SEARCH,(function(){return b("userSearch",t,n)})),Object(s.a)(e,f.REQUEST_NEW_PROPOSAL,(function(){return h("newProposal",t,n)})),Object(s.a)(e,f.RECEIVE_NEW_PROPOSAL,(function(){return b("newProposal",t,n)})),Object(s.a)(e,f.REQUEST_EDIT_PROPOSAL,(function(){return h("editProposal",t,n)})),Object(s.a)(e,f.RECEIVE_EDIT_PROPOSAL,(function(){return b("editProposal",t,n)})),Object(s.a)(e,f.REQUEST_NEW_COMMENT,(function(){return h("newComment",t,n)})),Object(s.a)(e,f.RECEIVE_NEW_COMMENT,(function(){return b("newComment",t)})),Object(s.a)(e,f.REQUEST_EDIT_COMMENT,(function(){return h("editComment",t,n)})),Object(s.a)(e,f.RECEIVE_EDIT_COMMENT,(function(){return b("editComment",t)})),Object(s.a)(e,f.REQUEST_PROPOSAL_PAYWALL_DETAILS,(function(){return h("proposalPaywallDetails",t,n)})),Object(s.a)(e,f.RECEIVE_PROPOSAL_PAYWALL_DETAILS,(function(){return b("proposalPaywallDetails",t,n)})),Object(s.a)(e,f.REQUEST_USER_PROPOSAL_CREDITS,(function(){return h("userProposalCredits",t,n)})),Object(s.a)(e,f.RECEIVE_USER_PROPOSAL_CREDITS,(function(){return b("userProposalCredits",t,n)})),Object(s.a)(e,f.REQUEST_RESET_PASSWORD,(function(){return h("resetPassword",t,n)})),Object(s.a)(e,f.RECEIVE_RESET_PASSWORD,(function(){return b("resetPassword",t,n)})),Object(s.a)(e,f.REQUEST_VERIFY_RESET_PASSWORD,(function(){return h("verifyResetPassword",t,n)})),Object(s.a)(e,f.RECEIVE_VERIFY_RESET_PASSWORD,(function(){return b("verifyResetPassword",t,n)})),Object(s.a)(e,f.REQUEST_RESEND_VERIFICATION_EMAIL,(function(){return h("resendVerificationEmail",t,n)})),Object(s.a)(e,f.RECEIVE_RESEND_VERIFICATION_EMAIL,(function(){return b("resendVerificationEmail",t,n)})),Object(s.a)(e,f.RESET_RESEND_VERIFICATION_EMAIL,(function(){return v("resendVerificationEmail",t)})),Object(s.a)(e,f.REQUEST_SETSTATUS_PROPOSAL,(function(){return h("setStatusProposal",t,n)})),Object(s.a)(e,f.RECEIVE_SETSTATUS_PROPOSAL,(function(){return b("setStatusProposal",t)})),Object(s.a)(e,f.REQUEST_SET_BILLING_STATUS,(function(){return h("setBillingStatus",t,n)})),Object(s.a)(e,f.RECEIVE_SET_BILLING_STATUS,(function(){return b("setBillingStatus",t)})),Object(s.a)(e,f.REQUEST_BILLING_STATUS_CHANGES,(function(){return h("billingStatusChanges",t,n)})),Object(s.a)(e,f.RECEIVE_BILLING_STATUS_CHANGES,(function(){return b("billingStatusChanges",t)})),Object(s.a)(e,f.REQUEST_START_VOTE,(function(){return h("startVote",t,n)})),Object(s.a)(e,f.RECEIVE_START_VOTE,(function(){return b("startVote",t)})),Object(s.a)(e,f.RECEIVE_START_RUNOFF_VOTE,(function(){return b("startRunoffVote",t)})),Object(s.a)(e,f.REQUEST_START_RUNOFF_VOTE,(function(){return h("startRunoffVote",t,n)})),Object(s.a)(e,f.REQUEST_UPDATED_KEY,(function(){return h("updateUserKey",t,n)})),Object(s.a)(e,f.RECEIVE_UPDATED_KEY,(function(){return b("updateUserKey",t,n)})),Object(s.a)(e,f.REQUEST_VERIFIED_KEY,(function(){return h("verifyUserKey",t,n)})),Object(s.a)(e,f.RECEIVE_VERIFIED_KEY,(function(){return b("verifyUserKey",t,n)})),Object(s.a)(e,f.REQUEST_PROPOSALS_VOTE_SUMMARY,(function(){return h("proposalsVoteSummary",t,n)})),Object(s.a)(e,f.RECEIVE_PROPOSALS_VOTE_SUMMARY,(function(){return b("proposalsVoteSummary",t,{})})),Object(s.a)(e,f.REQUEST_BATCH_PROPOSAL_SUMMARY,(function(){return h("batchProposalSummary",t,n)})),Object(s.a)(e,f.RECEIVE_BATCH_PROPOSAL_SUMMARY,(function(){return b("batchProposalSummary",t,n)})),Object(s.a)(e,f.REQUEST_PROPOSAL_VOTE_RESULTS,(function(){return h("proposalVoteResults",t,n)})),Object(s.a)(e,f.RECEIVE_PROPOSAL_VOTE_RESULTS,(function(){return b("proposalVoteResults",t,n)})),Object(s.a)(e,f.REQUEST_VOTES_DETAILS,(function(){return h("votesDetails",t,n)})),Object(s.a)(e,f.RECEIVE_VOTES_DETAILS,(function(){return b("votesDetails",t,n)})),Object(s.a)(e,f.REQUEST_AUTHORIZE_VOTE,(function(){return h("authorizeVote",t,n)})),Object(s.a)(e,f.RECEIVE_AUTHORIZE_VOTE,(function(){return b("authorizeVote",t,{})})),Object(s.a)(e,f.REQUEST_REVOKE_AUTH_VOTE,(function(){return h("authorizeVote",t,n)})),Object(s.a)(e,f.RECEIVE_REVOKE_AUTH_VOTE,(function(){return b("authorizeVote",t,{})})),Object(s.a)(e,f.REQUEST_PROPOSAL_PAYWALL_PAYMENT,(function(){return h("proposalPaywallPayment",t,n)})),Object(s.a)(e,f.RECEIVE_PROPOSAL_PAYWALL_PAYMENT,(function(){return b("proposalPaywallPayment",t,n)})),Object(s.a)(e,f.REQUEST_RESCAN_USER_PAYMENTS,(function(){return h("rescanUserPayments",t,n)})),Object(s.a)(e,f.RECEIVE_RESCAN_USER_PAYMENTS,(function(){return b("rescanUserPayments",t,{})})),Object(s.a)(e,f.RESET_RESCAN_USER_PAYMENTS,(function(){return v("rescanUserPayments",t)})),Object(s.a)(e,f.RESET_RESCAN_USER_PAYMENTS,(function(){return v("rescanUserPayments",t)})),Object(s.a)(e,f.REQUEST_SET_TOTP,(function(){return h("setTotp",t,n)})),Object(s.a)(e,f.RECEIVE_SET_TOTP,(function(){return b("setTotp",t,n)})),Object(s.a)(e,f.REQUEST_VERIFY_TOTP,(function(){return h("verifyTotp",t,n)})),Object(s.a)(e,f.RECEIVE_VERIFY_TOTP,(function(){return b("verifyTotp",t,n)})),Object(s.a)(e,f.REQUEST_VOTES_BUNDLE,(function(){return h("votesBundle",t,n)})),Object(s.a)(e,f.RECEIVE_VOTES_BUNDLE,(function(){return b("votesBundle",t,n)})),Object(s.a)(e,f.REQUEST_GENERATE_PAYOUTS,(function(){return h("payouts",t,n)})),Object(s.a)(e,f.RECEIVE_GENERATE_PAYOUTS,(function(){return b("payouts",t,n)})),Object(s.a)(e,f.REQUEST_INVOICE_PAYOUTS,(function(){return h("invoicePayouts",t,n)})),Object(s.a)(e,f.RECEIVE_INVOICE_PAYOUTS,(function(){return b("invoicePayouts",t,n)})),Object(s.a)(e,f.REQUEST_PAY_APPROVED,(function(){return h("payApproved",t,n)})),Object(s.a)(e,f.RECEIVE_PAY_APPROVED,(function(){return b("payApproved",t,n)})),Object(s.a)(e,f.REQUEST_SPENDING_SUMMARY,(function(){return h("spendingSummary",t,n)})),Object(s.a)(e,f.RECEIVE_SPENDING_SUMMARY,(function(){return b("spendingSummary",t,n)})),Object(s.a)(e,f.REQUEST_SPENDING_DETAILS,(function(){return h("spendingDetails",t,n)})),Object(s.a)(e,f.RECEIVE_SPENDING_DETAILS,(function(){return b("spendingDetails",t,n)})),Object(s.a)(e,f.REQUEST_INVITE_USER,(function(){return h("inviteUser",t,n)})),Object(s.a)(e,f.RECEIVE_INVITE_USER,(function(){return b("inviteUser",t,n)})),Object(s.a)(e,f.REQUEST_NEW_INVOICE,(function(){return h("newInvoice",t,n)})),Object(s.a)(e,f.RECEIVE_NEW_INVOICE,(function(){return b("newInvoice",t,n)})),Object(s.a)(e,f.REQUEST_USER_INVOICES,(function(){return h("userInvoices",t,n)})),Object(s.a)(e,f.RECEIVE_USER_INVOICES,(function(){return b("userInvoices",t,n)})),Object(s.a)(e,f.REQUEST_ADMIN_INVOICES,(function(){return h("adminInvoices",t,n)})),Object(s.a)(e,f.RECEIVE_ADMIN_INVOICES,(function(){return b("adminInvoices",t,n)})),Object(s.a)(e,f.REQUEST_INVOICE,(function(){return h("invoice",t,n)})),Object(s.a)(e,f.RECEIVE_INVOICE,(function(){return b("invoice",t,n)})),Object(s.a)(e,f.REQUEST_RECORD_COMMENTS,g()((function(e){return b("likeComment",e,{payload:{}})}),(function(){return h("invoiceComments",t,n)}))),Object(s.a)(e,f.RECEIVE_RECORD_COMMENTS,(function(){return b("invoiceComments",t,n)})),Object(s.a)(e,f.REQUEST_SETSTATUS_INVOICE,(function(){return h("setStatusInvoice",t,n)})),Object(s.a)(e,f.RECEIVE_SETSTATUS_INVOICE,(function(){return b("setStatusInvoice",t,n)})),Object(s.a)(e,f.REQUEST_EDIT_INVOICE,(function(){return h("editInvoice",t,n)})),Object(s.a)(e,f.RECEIVE_EDIT_INVOICE,(function(){return b("editInvoice",t,n)})),Object(s.a)(e,f.REQUEST_EXCHANGE_RATE,(function(){return h("exchangeRate",t,n)})),Object(s.a)(e,f.RECEIVE_EXCHANGE_RATE,(function(){return b("exchangeRate",t,n)})),Object(s.a)(e,f.REQUEST_MANAGE_CMS_USER,(function(){return h("manageCmsUser",t,n)})),Object(s.a)(e,f.RECEIVE_MANAGE_CMS_USER,(function(){return b("manageCmsUser",t,n)})),Object(s.a)(e,f.REQUEST_USER_SUBCONTRACTORS,(function(){return h("userSubcontractors",t,n)})),Object(s.a)(e,f.RECEIVE_USER_SUBCONTRACTORS,(function(){return b("userSubcontractors",t,n)})),Object(s.a)(e,f.REQUEST_NEW_DCC,(function(){return h("newDcc",t,n)})),Object(s.a)(e,f.RECEIVE_NEW_DCC,(function(){return b("newDcc",t,n)})),Object(s.a)(e,f.REQUEST_DCCS,(function(){return h("dccs",t,n)})),Object(s.a)(e,f.RECEIVE_DCCS,(function(){return b("dccs",t,n)})),Object(s.a)(e,f.REQUEST_DCC,(function(){return h("dcc",t,n)})),Object(s.a)(e,f.RECEIVE_DCC,(function(){return b("dcc",t,n)})),Object(s.a)(e,f.REQUEST_SUPPORT_OPPOSE_DCC,(function(){return h("supportOpposeDCC",t,n)})),Object(s.a)(e,f.RECEIVE_SUPPORT_OPPOSE_DCC,(function(){return b("supportOpposeDCC",t,n)})),Object(s.a)(e,f.REQUEST_SET_DCC_STATUS,(function(){return h("setDCCStatus",t,n)})),Object(s.a)(e,f.RECEIVE_SET_DCC_STATUS,(function(){return b("setDccStatus",t,n)})),e)[n.type]||function(){return t})()},j={payWithFaucet:p},w=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,n=arguments.length>1?arguments[1]:void 0;return((e={},Object(s.a)(e,f.REQUEST_PAYWALL_PAYMENT_WITH_FAUCET,(function(){return h("payWithFaucet",t,n)})),Object(s.a)(e,f.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET,(function(){return b("payWithFaucet",t,n)})),Object(s.a)(e,f.TOGGLE_PROPOSAL_PAYMENT_RECEIVED,(function(){return v("payWithFaucet",t)})),Object(s.a)(e,f.RECEIVE_LOGOUT,(function(){return j})),e)[n.type]||function(){return t})()},S=n(18),T=n(635),C=n.n(T),k=n(636),I=n.n(k),x=n(20),R=n.n(x),N=n(12),P=n.n(N),L=n(637),A=n.n(L),D=n(320),U=n.n(D),V=n(28),M=n.n(V),F=n(9),B=n(5),G=["sectionId"],W=["sectionId","commentid"],Y={comments:{byToken:{},accessTimeByToken:{},backup:null},commentsVotes:{byToken:{},backup:null},commentsLikes:{byToken:{},backup:null}},H=function(e,t){return e.timestamp-t.timestamp},Q=function(e){return e.sort(H).reduce((function(e,t){var n=t.commentid;return e[n]&&e[n]===t.vote?Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},n,0)):Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},n,t.vote))}),{})},q=function(e,t,n){var r=e.upvotes,a=e.downvotes;return t===n?n>0?r--:a--:0!==t?n>0?(r++,a--):(r--,a++):n>0?r++:a++,{newUpvotes:r,newDownvotes:a}},z=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,n=arguments.length>1?arguments[1]:void 0;return n.error?n.type===f.RECEIVE_LIKE_COMMENT?function(){var e=P()(["commentsLikes","backup"])(t),n=e.token,r=e.commentid,a=e.oldVote,o=P()(["commentsVotes","backup"])(t);return g()(R()(["commentsLikes","backup"],null),M()(["commentsLikes","byToken",n],(function(e){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},r,a))})),M()(["commentsVotes","byToken",n],(function(e){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},r,o))})))(t)}():t:((e={},Object(s.a)(e,f.RECEIVE_RECORD_COMMENTS,(function(){var e=n.payload,r=e.token,a=e.comments,o=e.accesstime,c=Object(F.C)(r),u=C()(I()(a),(function(e,t){return e.signature&&e.signaure!==t.signaure})),s=u.filter((function(e){return e.extradatahint===B.Bb})).map((function(e){return e.commentid})),l=[].concat(Object(i.a)(s),[B.db]),f={},d=[];return s.forEach((function(e){var t=Object(F.b)(e,u);d=[].concat(Object(i.a)(d),Object(i.a)(t)),f[e]=u.filter((function(e){var n=e.commentid;return t.includes(n)}))})),f[B.db]=u.filter((function(e){var t=e.commentid;return!d.includes(t)})),g()(R()(["comments","byToken",c],{sectionIds:l,comments:f}),R()(["comments","accessTimeByToken",c],o))(t)})),Object(s.a)(e,f.RECEIVE_NEW_COMMENT,(function(){var e=n.payload,r=e.sectionId,a=Object(S.a)(e,G),o=Object(F.C)(a.token),c=t.comments.byToken[o].sectionIds,u=!c.includes(r);return g()(M()(["comments","byToken",o,"comments",r],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[a].concat(Object(i.a)(e))})),u?R()(["comments","byToken",o,"sectionIds"],[r].concat(Object(i.a)(c))):function(e){return e})(t)})),Object(s.a)(e,f.RECEIVE_EDIT_COMMENT,(function(){var e=n.payload,r=e.sectionId,a=e.commentid,o=Object(S.a)(e,W),i=Object(F.C)(o.token),c=g()(U()((function(e){return e.commentid===a})),P()(["comments","byToken",i,"comments",r]))(t);return R()(["comments","byToken",i,"comments",r,c],Object(l.a)({commentid:a},o))(t)})),Object(s.a)(e,f.RECEIVE_LIKED_COMMENTS,(function(){var e=n.payload,r=e.token,a=e.votes,o=Q(a);return R()(["commentsLikes","byToken",Object(F.C)(r)],o)(t)})),Object(s.a)(e,f.REQUEST_LIKE_COMMENT,(function(){var e=n.payload,r=e.token,a=e.vote,o=e.commentid,i=e.sectionId,c=Object(F.C)(r),u=g()(A()((function(e){return e.commentid===o})),P()(["comments","byToken",c,"comments",i]))(t),f=t.commentsLikes.byToken[c],d=P()(["commentsVotes","byToken",c,o])(t),m=f&&f[o]?f[o]:0,p=f;p[o]=0===m||m!==a?a:0;var h=q(d||u,m,a),b={upvotes:h.newUpvotes,downvotes:h.newDownvotes};return g()(R()(["commentsLikes","byToken",c],p),R()(["commentsLikes","backup"],{token:c,commentid:o,oldVote:m,oldComment:u}),R()(["commentsVotes","backup"],{downvotes:u.downvotes,upvotes:u.upvotes}),M()(["commentsVotes","byToken",c],(function(e){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},o,b))})))(t)})),Object(s.a)(e,f.RECEIVE_LIKE_COMMENT_SUCCESS,(function(){var e=n.payload,r=e.token,a=e.commentid,o=e.sectionId,i=Object(F.C)(r),c=t.commentsVotes.byToken[i][a],u=c.upvotes,s=c.downvotes;return M()(["comments","byToken",i,"comments",o],(function(e){return e.map((function(e){return e.commentid!==a?e:Object(l.a)(Object(l.a)({},e),{},{upvotes:u,downvotes:s})}))}))(t)})),Object(s.a)(e,f.RECEIVE_CENSOR_COMMENT,(function(){var e=n.payload,r=e.commentid,a=e.token,o=e.sectionId,i=e.reason,c=e.publickey,u=function(e){return e.commentid!==r?e:Object(l.a)(Object(l.a)({},e),{},{publickey:c,deleted:!0,comment:"",reason:i})};return g()(M()(["comments","byToken",Object(F.C)(a),"comments",o],(function(e){return e.map(u)})))(t)})),Object(s.a)(e,f.RECEIVE_SETSTATUS_PROPOSAL,(function(){var e=n.payload,r=e.proposal,a=e.oldStatus;return r.status===B.jb&&a===B.kb&&delete t.comments.byToken[Object(F.C)(r.censorshiprecord.token)],t})),Object(s.a)(e,f.RECEIVE_LOGOUT,(function(){return M()(["comments","byToken"],(function(e){return Object.keys(e).reduce((function(t,n){var r=e[n],a=r.sectionIds,o=r.comments;return a.some((function(e){return o[e].some((function(e){return e.state===B.fb}))}))?Object(l.a)({},t):Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},n,e[n]))}),{})}))(t)})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return Y})),e)[n.type]||function(){return t})()},K={byUserID:{}},J=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_USER_PROPOSAL_CREDITS,(function(){return R()(["byUserID",n.payload.userid],{unspent:n.payload.unspentcredits,spent:n.payload.spentcredits,newcredits:null})(t)})),Object(s.a)(e,f.RECEIVE_RESCAN_USER_PAYMENTS,(function(){var e=n.payload.userid,r=n.payload.newcredits||[],a=t.byUserID[e]?[].concat(Object(i.a)(t.byUserID[e].unspent),Object(i.a)(r)):Object(i.a)(r);return M()(["byUserID",e],(function(e){return Object(l.a)(Object(l.a)({},e),{},{unspent:a,newcredits:r.length})}))(t)})),Object(s.a)(e,f.RESET_RESCAN_USER_PAYMENTS,(function(){return M()(["byUserID",n.payload],(function(e){return Object(l.a)(Object(l.a)({},e),{},{newcredits:null})}))(t)})),e)[n.type]||function(){return t})()},X={results:[],resultsByID:{},queryByEmail:{},queryByUsername:{},queryByPublicKey:{}},Z={byID:{},currentUserID:null,search:X,cms:{byContractorType:{},byDomain:{},byID:{}},newUser:{}},$=function(e){return g()(R()("search",X),R()("currentUserID",null),M()("byID",(function(e){var t={};return Object.keys(e).map((function(n){return t[n]={id:n,userid:e[n].userid,isadmin:e[n].isadmin,username:e[n].username,identities:e[n].identities}})),t})))(e)},ee=function(e){return g()(R()("currentUserID",null),M()("byID",(function(e){var t={};return Object.keys(e).map((function(e){return t[e]={}})),t})))(e)},te=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_USER,(function(){var e=n.payload.user.id;return delete n.payload.user.id,M()(["byID",e],(function(t){return Object(l.a)(Object(l.a)(Object(l.a)({},t),n.payload.user),{},{userid:e})}))(t)})),Object(s.a)(e,f.RECEIVE_ME||f.RECEIVE_LOGIN,(function(){return g()(R()("currentUserID",n.payload.userid),R()(["byID",n.payload.userid],n.payload))(t)})),Object(s.a)(e,f.RECEIVE_EDIT_USER,(function(){return g()(R()(["byID",t.currentUserID,"emailnotifications"],n.payload.preferences.emailnotifications),R()(["byID",t.currentUserID,"edited"],n.payload))(t)})),Object(s.a)(e,f.RECEIVE_EDIT_CMS_USER,(function(){return M()(["byID",t.currentUserID],(function(e){return Object(l.a)(Object(l.a)({},e),n.payload)}))(t)})),Object(s.a)(e,f.RECEIVE_CHANGE_USERNAME,(function(){return R()(["byID",t.currentUserID,"username"],n.payload.username)(t)})),Object(s.a)(e,f.RECEIVE_VERIFIED_KEY,(function(){return M()(["byID",t.currentUserID],(function(e){return Object(l.a)(Object(l.a)({},e),{},{publickey:n.payload.publickey,verifiedkey:n.payload})}))(t)})),Object(s.a)(e,f.RECEIVE_MANAGE_CMS_USER,(function(){var e=n.payload,r=e.domain,a=e.type,o=e.supervisorIDs,i=e.proposalsOwned,c=e.userID;return M()(["byID",c],(function(e){return Object(l.a)(Object(l.a)({},e),{},{domain:r,contractortype:a,supervisoruserids:o,proposalsowned:i})}))(t)})),Object(s.a)(e,f.RECEIVE_USER_SEARCH,(function(){var e=n.payload,r=e.users,a=e.query,o=a.email,i=a.username,c=a.publickey,u=null===r||void 0===r?void 0:r.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t.id,t))}),{}),f=null===r||void 0===r?void 0:r.map((function(e){return e.id})),d=!!o,m=!!i,p=!!c;return g()(R()(["search","results"],r),M()("search.resultsByID",(function(e){return Object(l.a)(Object(l.a)({},e),u)})),d?R()(["search","queryByEmail",o],f):function(e){return e},m?R()(["search","queryByUsername",i],f):function(e){return e},p?R()(["search","queryByPublicKey",c],f):function(e){return e})(t)})),Object(s.a)(e,f.RECEIVE_LOGOUT,(function(){return $(t)})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return ee(t)})),Object(s.a)(e,f.RECEIVE_CMS_USERS,(function(){var e=n.payload.users,r=null===e||void 0===e?void 0:e.reduce((function(e,t){var n=e[t.contractortype]||[];return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t.contractortype,[t].concat(Object(i.a)(n))))}),{}),a=null===e||void 0===e?void 0:e.reduce((function(e,t){var n=e[t.domain]||[];return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t.domain,[t].concat(Object(i.a)(n))))}),{}),o=null===e||void 0===e?void 0:e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t.id,t))}),{});return R()("cms",{byContractorType:r,byDomain:a,byID:o})(t)})),Object(s.a)(e,f.RECEIVE_UPDATED_KEY,(function(){return M()(["byID",t.currentUserID],(function(e){return Object(l.a)(Object(l.a)({},e),n.payload)}))(t)})),Object(s.a)(e,f.RECEIVE_NEW_USER,(function(){return R()("newUser",n.payload)(t)})),Object(s.a)(e,f.RESET_NEW_USER,(function(){return R()("newUser",Z.newUser)(t)})),Object(s.a)(e,f.RECEIVE_SET_TOTP,(function(){return R()(["byID",t.currentUserID,"totp"],n.payload)(t)})),Object(s.a)(e,f.RECEIVE_VERIFY_TOTP,(function(){return R()(["byID",t.currentUserID,"totp"],n.payload)(t)})),Object(s.a)(e,f.SET_HAS_TOTP,(function(){return M()(["byID",t.currentUserID],(function(e){return Object(l.a)(Object(l.a)({},e),{},{totpverified:n.payload})}))(t)})),e)[n.type]||function(){return t})()},ne=n(4),re=(r={},Object(s.a)(r,B.kb,B.Ub),Object(s.a)(r,B.hb,B.c),Object(s.a)(r,B.ib,B.g),Object(s.a)(r,B.jb,B.Jb),r),ae={byToken:{},summaries:{},billingStatusChanges:{},allByVoteStatus:(a={},Object(s.a)(a,B.Tb,[]),Object(s.a)(a,B.d,[]),Object(s.a)(a,B.a,[]),Object(s.a)(a,B.b,[]),Object(s.a)(a,B.Nb,[]),Object(s.a)(a,B.o,[]),a),allByRecordStatus:(o={},Object(s.a)(o,B.c,[]),Object(s.a)(o,B.g,[]),Object(s.a)(o,B.Ub,[]),o),allProposalsByUserId:{},allTokensByUserId:{},numOfProposalsByUserId:{},newProposalToken:null},oe=function(e,t){switch(e){case B.kb:return B.Ub;case B.ib:return t!==B.fb?B.o:B.g;case B.jb:return B.Tb;case B.hb:return t!==B.fb?B.o:B.c;default:throw Error("mapReviewStatusToTokenInventoryStatus: Invalid proposal status:\n      ".concat(e))}},ie=function(e){return e.censorshiprecord.token},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(F.q)([e,t].join("\n\n"))},ue=function(e,t,n){var r={};return n.map((function(e){return Object(F.C)(e)})).forEach((function(n){var a=Object.keys(e).reduce((function(a,o){var i=r[o]||e[o]||[],c=i.find((function(e){return e===n}));return c&&o!==t?Object(l.a)(Object(l.a)({},a),{},Object(s.a)({},o,i.filter((function(e){return e!==n})))):c||o!==t?Object(l.a)(Object(l.a)({},a),{},Object(s.a)({},o,i)):Object(l.a)(Object(l.a)({},a),{},Object(s.a)({},o,[n].concat(i)))}),r);r=Object(l.a)(Object(l.a)({},r),a)})),r},se=function(e){return function(t){return e.linkto&&P()(["byToken",Object(F.C)(e.linkto)])(t)?M()(["byToken",Object(F.C)(e.linkto),"linkedfrom"],(function(t){return t?[].concat(Object(i.a)(t),[Object(F.C)(ie(e))]):[Object(F.C)(ie(e))]}))(t):t}},le=function(e){return function(t){return Object(l.a)(Object(l.a)({},t),Object.keys(e).reduce((function(n,r){var a=t[r]?t[r]:[],o=e[r]?e[r]:[];return Object(l.a)(Object(l.a)({},n),{},Object(s.a)({},r,Object(i.a)(new Set([].concat(Object(i.a)(a),Object(i.a)(o.map((function(e){return Object(F.C)(e)}))))))))}),{}))}},fe=function(e){return g()(M()("byToken",(function(e){var t={},n={};return Object.keys(e).flatMap((function(r){return e[r].state===B.gb?t[r]=Object(l.a)({},e[r]):e[r].state===B.fb?n[r]={name:r,censorshiprecord:e[r].censorshiprecord,userid:e[r].userid,username:e[r].username,state:e[r].state,status:e[r].status,files:[],timestamp:e[r].timestamp,version:e[r].version,metadata:e[r].metadata}:[]})),Object(l.a)(Object(l.a)({},t),n)})),R()("allProposalsByUserId",ae.allProposalsByUserId),R()("allTokensByUserId",ae.allTokensByUserId),R()("numOfProposalsByUserId",ae.numOfProposalsByUserId))(e)},de=function(e,t,n){return function(r){return e.forEach((function(e){return r=me(r,e,t,n)})),r}},me=function(e,t,n){return M()(["summaries",Object(F.C)(t)],(function(e){return Object(l.a)(Object(l.a)({},e),{},{status:n})}))(e)},pe=function(e){return function(t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=Object(ne.a)(r[n],2),o=a[0],i=a[1];t=he(t,o,i)}return t}},he=function(e,t,n){var r=(null===n||void 0===n?void 0:n.length)||0,a=r>0&&n[r-1]||{};return a.numbillingstatuschanges=r,R()(["billingStatusChanges",Object(F.C)(t)],a)(e)},be=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_PROPOSALS_BATCH,(function(){return g()(n.payload.userid?M()(["allProposalsByUserId"],(function(e){return Object(s.a)({},n.payload.userid,Object(l.a)(Object(l.a)({},e[n.payload.userid]),Object(F.z)(n.payload.proposals)))})):function(e){return e},M()("byToken",(function(e){return Object(l.a)(Object(l.a)({},e),Object(F.z)(n.payload.proposals))})))(t)})),Object(s.a)(e,f.RECEIVE_BATCH_PROPOSAL_SUMMARY,(function(){var e=Object.keys(n.payload.summaries).reduce((function(e,r){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},Object(F.C)(r),Object(l.a)(Object(l.a)({},t.summaries[Object(F.C)(r)]),n.payload.summaries[r])))}),{});return M()("summaries",(function(t){return Object(l.a)(Object(l.a)({},t),e)}))(t)})),Object(s.a)(e,f.RECEIVE_VOTES_INVENTORY,(function(){return M()("allByVoteStatus",le(n.payload))(t)})),Object(s.a)(e,f.RECEIVE_RECORDS_INVENTORY,(function(){return M()("allByRecordStatus",le(n.payload))(t)})),Object(s.a)(e,f.RECEIVE_EDIT_PROPOSAL,(function(){return R()(["byToken",Object(F.C)(n.payload.proposal.censorshiprecord.token)],Object(F.x)(n.payload.proposal))(t)})),Object(s.a)(e,f.RECEIVE_NEW_PROPOSAL,(function(){var e=ce(n.payload.name,n.payload.description);return g()(R()(["byToken",Object(F.C)(ie(n.payload))],Object(F.x)(Object(l.a)(Object(l.a)({},n.payload),{},{files:[].concat(Object(i.a)(n.payload.files),[e]),commentsCount:0}))),M()(["allByRecordStatus",B.Ub],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[Object(F.C)(ie(n.payload))].concat(Object(i.a)(e))})),M()(["allProposalsByUserId",n.payload.userid],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(F.C)(ie(n.payload));return Object(l.a)(Object(s.a)({},t,n.payload),e)})),M()(["numOfProposalsByUserId",n.payload.userid],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return++e})),R()("newProposalToken",Object(F.C)(n.payload.censorshiprecord.token)))(t)})),Object(s.a)(e,f.RECEIVE_SETSTATUS_PROPOSAL,(function(){return g()(se(n.payload.proposal),R()(["byToken",Object(F.C)(ie(n.payload.proposal))],Object(F.x)(n.payload.proposal)),M()(["allByVoteStatus"],(function(e){return ue(e,oe(n.payload.proposal.status,n.payload.proposal.state),[Object(F.C)(ie(n.payload.proposal))])})),M()(["allByRecordStatus"],(function(e){var t,r=e[re[n.payload.proposal.status]],a=Object(F.C)(n.payload.proposal.censorshiprecord.token),o=r?[a].concat(Object(i.a)(r)):[a];return e[re[n.payload.oldStatus]]?Object(l.a)(Object(l.a)({},e),{},(t={},Object(s.a)(t,re[n.payload.oldStatus],e[re[n.payload.oldStatus]].filter((function(e){return e!==a}))),Object(s.a)(t,re[n.payload.proposal.status],o),t)):Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},re[n.payload.proposal.status],o))})))(t)})),Object(s.a)(e,f.RECEIVE_USER_INVENTORY,(function(){return g()(M()(["allTokensByUserId"],(function(){return Object(s.a)({},n.payload.userid,n.payload.proposals)})),R()(["numOfProposalsByUserId",n.payload.userid],n.payload.numofproposals))(t)})),Object(s.a)(e,f.RECEIVE_START_VOTE,(function(){return g()(M()("allByVoteStatus",(function(e){return ue(e,B.a,n.payload.tokens)})),de(n.payload.tokens,B.xb))(t)})),Object(s.a)(e,f.RECEIVE_AUTHORIZE_VOTE,(function(){return me(t,n.payload.token,B.wb)})),Object(s.a)(e,f.RECEIVE_REVOKE_AUTH_VOTE,(function(){return me(t,n.payload.token,B.sb)})),Object(s.a)(e,f.RECEIVE_SET_BILLING_STATUS,(function(){return t=me(t,n.payload.token,n.payload.billingStatus===B.Y?B.pb:n.payload.billingStatus===B.Z?B.qb:B.mb),M()(["billingStatusChanges",Object(F.C)(n.payload.token)],(function(e){return Object(l.a)(Object(l.a)({},e),{},{token:n.payload.token,status:n.payload.billingStatus,numbillingstatuschanges:((null===e||void 0===e?void 0:e.numbillingstatuschanges)||0)+1,reason:n.payload.reason,receipt:n.payload.receipt,timestamp:n.payload.timestamp,publickey:n.payload.publickey})}))(t)})),Object(s.a)(e,f.RECEIVE_BILLING_STATUS_CHANGES,(function(){return pe(n.payload.billingstatuschanges)(t)})),Object(s.a)(e,f.RECEIVE_NEW_COMMENT,(function(){var e=n.payload;return t.byToken[e.token]?M()(["byToken",e.token,"commentsCount"],(function(e){return++e}))(t):t})),Object(s.a)(e,f.RECEIVE_LOGOUT,(function(){return fe(t)})),e)[n.type]||function(){return t})()},ve={byToken:[],bestBlock:null},Ee=function(e,t,n){return M()(["byToken",Object(F.C)(t)],(function(e){return Object(l.a)(Object(l.a)({},e),{},{status:n})}))(e)},ye=function(e,t,n){return t.forEach((function(t){return Ee(e,t,n)})),e},ge=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_PROPOSALS_VOTE_SUMMARY,(function(){var e=Object.keys(n.payload.summaries).reduce((function(e,r){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},Object(F.C)(r),Object(l.a)(Object(l.a)({},t.byToken[Object(F.C)(r)]),n.payload.summaries[r])))}),{});return g()(M()("byToken",(function(t){return Object(l.a)(Object(l.a)({},t),e)})),R()("bestBlock",n.payload.bestblock))(t)})),Object(s.a)(e,f.RECEIVE_VOTES_DETAILS,(function(){return M()(["byToken",Object(F.C)(n.payload.token)],(function(e){return Object(l.a)(Object(l.a)({},e),{},{details:{auths:n.payload.auths,details:n.payload.vote}})}))(t)})),Object(s.a)(e,f.RECEIVE_PROPOSAL_VOTE_RESULTS,(function(){return M()(["byToken",Object(F.C)(n.payload.token)],(function(e){return Object(l.a)(Object(l.a)({},e),{},{votes:n.payload.votes})}))(t)})),Object(s.a)(e,f.RECEIVE_AUTHORIZE_VOTE,(function(){return Ee(t,n.payload.token,B.Eb)})),Object(s.a)(e,f.RECEIVE_REVOKE_AUTH_VOTE,(function(){return Ee(t,n.payload.token,B.Hb)})),Object(s.a)(e,f.RECEIVE_START_VOTE,(function(){return ye(t,n.payload.tokens,B.Cb)})),e)[n.type]||function(){return t})()},Oe=n(322),_e=n.n(Oe),je={byToken:{},all:[],exchangeRates:{},subContractors:null,newInvoiceToken:null},we=function(){return g()(R()("all",[]),R()("byToken",{}))(je)},Se=function(e){return e.censorshiprecord.token},Te=function(e){return e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},Se(t),t))}),{})},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return g()(M()("byToken",(function(e){return Object(l.a)(Object(l.a)({},e),Te(t))})),M()("all",_e()(t.map(Se))))(e)},ke=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_EXCHANGE_RATE,(function(){var e=n.payload,r=e.year,a=e.month,o=e.exchangerate;return R()(["exchangeRates","".concat(r,"-").concat(a)],o)(t)})),Object(s.a)(e,f.RECEIVE_USER_SUBCONTRACTORS,(function(){var e=n.payload.users;return R()("subContractors",e)(t)})),Object(s.a)(e,f.RECEIVE_USER_INVOICES,(function(){return Ce(t,n.payload.invoices)})),Object(s.a)(e,f.RECEIVE_ADMIN_INVOICES,(function(){return Ce(t,n.payload.invoices)})),Object(s.a)(e,f.RECEIVE_INVOICE,(function(){var e=n.payload,r=e.invoice,a=e.payout;return R()(["byToken",Se(r)],Object(l.a)(Object(l.a)({},r),{},{payout:a}))(t)})),Object(s.a)(e,f.RECEIVE_EDIT_INVOICE,(function(){var e=n.payload.invoice;return R()(["byToken",Se(e)],e)(t)})),Object(s.a)(e,f.RECEIVE_SETSTATUS_INVOICE,(function(){var e=n.payload;return R()(["byToken",Se(e)],e)(t)})),Object(s.a)(e,f.RECEIVE_NEW_INVOICE,(function(){var e=n.payload;return R()("newInvoiceToken",e.censorshiprecord.token)(t)})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return we()})),e)[n.type]||function(){return t})()},Ie={payouts:[],payoutSummaries:[]},xe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_GENERATE_PAYOUTS,(function(){return R()("payouts",n.payload.payouts)(t)})),Object(s.a)(e,f.RECEIVE_INVOICE_PAYOUTS,(function(){return R()("payoutSummaries",n.payload.invoices)(t)})),Object(s.a)(e,f.RECEIVE_PAY_APPROVED,(function(){return Ie})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return Ie})),e)[n.type]||function(){return t})()},Re=n(323),Ne=n.n(Re),Pe=n(88),Le=n.n(Pe),Ae=["status"],De={byToken:{},all:[],byStatus:{},newDccToken:null},Ue=function(e){return e.censorshiprecord.token},Ve=function(e){return e.status},Me=function(e,t){return g()(M()("byToken",(function(e){return Object(l.a)(Object(l.a)({},e),function(e){return e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},Ue(t),t))}),{})}(t))})),M()("all",_e()(t.map(Ue))),M()("byStatus",(function(e){return Object(l.a)(Object(l.a)({},e),function(e){return e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},Ve(t),Object(l.a)(Object(l.a)({},e[Ve(t)]||[]),{},Object(s.a)({},Ue(t),t))))}),{})}(t))})))(e)},Fe=function(e,t){return R()(["byToken",Ue(t)],Object(l.a)({},t))(e)},Be=function(e,t){var n=t.token,r=t.userid,a=t.username,o=t.isSupport,c=g()(M()(["byToken",n,"supportuserids"],(function(e){return[].concat(Object(i.a)(e),[r])})),M()(["byToken",n,"supportusernames"],(function(e){return[].concat(Object(i.a)(e),[a])}))),u=g()(M()(["byToken",n,"againstuserids"],(function(e){return[].concat(Object(i.a)(e),[r])})),M()(["byToken",n,"againstusernames"],(function(e){return[].concat(Object(i.a)(e),[a])})));return o?c(e):u(e)},Ge=function(e,t){var n=t.status,r=t.reason,a=t.token,o=P()(["byToken",a])(e),i=o.status,c=Object(S.a)(o,Ae),u=Date.now()/1e3,s=Object(l.a)(Object(l.a)({},c),{},{status:n,statuschangereason:r,timereviewed:u});return g()(R()(["byToken",a],s),R()(["byStatus",n,a],s),M()(["byStatus",i],(function(e){return function(e,t){return Le()(e)?e:Ne()(e,t)}(e,a)})))(e)},We=function(e,t){return R()(["drafts",t.id],Object(l.a)({},t))(e)},Ye=function(e,t){return R()("drafts",Object(l.a)({},t))(e)},He=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_DCCS,(function(){return Me(t,n.payload.dccs)})),Object(s.a)(e,f.RECEIVE_DCC,(function(){return Fe(t,n.payload.dcc)})),Object(s.a)(e,f.RECEIVE_NEW_DCC,(function(){return R()("newDccToken",n.payload.censorshiprecord.token)(t)})),Object(s.a)(e,f.RECEIVE_SUPPORT_OPPOSE_DCC,(function(){return Be(t,n.payload)})),Object(s.a)(e,f.RECEIVE_SET_DCC_STATUS,(function(){return Ge(t,n.payload)})),Object(s.a)(e,f.SAVE_DRAFT_DCC,(function(){return We(t,n.payload)})),Object(s.a)(e,f.LOAD_DRAFT_DCCS,(function(){return Ye(t,n.payload)})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return De})),e)[n.type]||function(){return t})()},Qe=n(123),qe={byUserID:{}},ze=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_USER,(function(){var e=n.payload.user,r=e.userid,a=e.newuserpaywalltx,o=t.byUserID[r],i=!!o&&o.isPaid;return Object(Qe.update)(["byUserID",r],(function(e){return Object(l.a)(Object(l.a)({},e),{},{isPaid:i||""!==a})}))(t)})),Object(s.a)(e,f.RECEIVE_PROPOSAL_PAYWALL_DETAILS,(function(){var e=n.payload.userid;return delete n.payload.userid,Object(Qe.update)(["byUserID",e],(function(e){return Object(l.a)(Object(l.a)({},e),n.payload)}))(t)})),Object(s.a)(e,f.RECEIVE_PROPOSAL_PAYWALL_PAYMENT,(function(){var e=n.payload.userid;return delete n.payload.userid,Object(Qe.update)(["byUserID",e],(function(e){return Object(l.a)(Object(l.a)({},e),n.payload)}))(t)})),Object(s.a)(e,f.UPDATE_USER_PAYWALL_STATUS,(function(){var e=n.payload,r=e.userid,a=e.status;return Object(Qe.update)(["byUserID",r],(function(e){return Object(l.a)(Object(l.a)({},e),{},{status:a,isPaid:a===B.U})}))(t)})),Object(s.a)(e,f.RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET,(function(){var e=n.payload,r=e.userid,a=e.txid;return Object(Qe.update)(["byUserID",r],(function(e){return Object(l.a)(Object(l.a)({},e),{},{faucetTxid:a})}))(t)})),Object(s.a)(e,f.RECEIVE_LOGOUT,(function(){return qe})),e)[n.type]||function(){return t})()},Ke={byUserID:{}},Je=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_CODE_STATS,(function(){var e=n.payload,r=e.userid,a=e.codestats,o=e.start,i=e.end;return R()(["byUserID",r,"".concat(o).concat(i)],a)(t)})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return Ke})),e)[n.type]||function(){return t})()},Xe={proposalsList:null,proposalDetails:null},Ze=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_SPENDING_SUMMARY,(function(){return R()("proposalsList",n.payload.proposals)(t)})),Object(s.a)(e,f.RECEIVE_SPENDING_DETAILS,(function(){return R()("proposalDetails",n.payload.details)(t)})),Object(s.a)(e,f.RECEIVE_PAY_APPROVED,(function(){return Xe})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return Xe})),e)[n.type]||function(){return t})()},$e={byProposalToken:{}},et=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,n=arguments.length>1?arguments[1]:void 0;return n.error?t:((e={},Object(s.a)(e,f.RECEIVE_PROPOSAL_BILLING,(function(){var e=n.payload,r=e.token,a=e.response;return Object(Qe.set)(["byProposalToken",Object(F.C)(r)],a)(t)})),Object(s.a)(e,f.RECEIVE_CMS_LOGOUT,(function(){return $e})),e)[n.type]||function(){return t})()},tt=Object(c.c)({app:m,api:_,external_api:w,comments:z,credits:J,users:te,proposals:be,proposalVotes:ge,invoices:ke,invoicePayouts:xe,dccs:He,paywall:ze,codestats:Je,proposalBilling:Ze,proposalOwnerBilling:et}),nt=function(){"object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;return c.d},rt=function(){return[u.a]},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=nt(),n=rt();return Object(c.e)(tt,e,t(c.a.apply(void 0,Object(i.a)(n))))},ot=n(0),it=n.n(ot),ct=n(263),ut=n(640),st=n.n(ut),lt=it.a.createContext(),ft=Object(ct.c)(lt),dt=Object(ct.b)(lt);function mt(e){var t=dt();return Object(ot.useMemo)((function(){return Object(c.b)(e,t)}),[e,t])}var pt=function(e){var t=Object(ot.useContext)(lt).store;return t.subscribe(st()((function(){var n=t.getState();e(n)}),1e3))},ht=at(),bt=function(e){var t=e.children;return it.a.createElement(ct.a,{context:lt,store:ht},t)}},60:function(e,t,n){"use strict";var r=n(19),a=n(4),o=n(0);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:_(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=l;var d={};function m(){}function p(){}function h(){}var b={};s(b,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(C([])));E&&E!==t&&n.call(E,o)&&(b=E);var y=h.prototype=m.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=f(e[a],e,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,u,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new O(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),s(y,u,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var c=[];function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=Object(o.useState)(!1),s=Object(a.a)(u,2),l=s[0],f=s[1],d=Object(o.useState)(!1),m=Object(a.a)(d,2),p=m[0],h=m[1],b=Object(o.useState)(null),v=Object(a.a)(b,2),E=v[0],y=v[1];return Object(o.useEffect)((function(){var a=!0;function o(){return(o=Object(r.a)(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a&&f(!0),n.prev=1,n.next=4,e.apply(null,t);case 4:r=n.sent,a&&(f(!1),y(r)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),f(!1),h(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))).apply(this,arguments)}return n&&function(){o.apply(this,arguments)}(),function(){a=!1}}),[e,t,n]),[l,p,E]}function s(e,t){if(e.length!==t.length)return!1;return e.every((function(e,n){return r=e,a=t[n],r===a;var r,a}))}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(o.useRef)(t),a=t&&r.current&&s(t,r.current),i=a?r.current:t;return Object(o.useEffect)((function(){r.current=i}),[i]),u(e,i,n)}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),a=n.n(r),o=n(1),i=n(76),c=n.n(i),u=n(325),s=n(316),l=n(207),f=function(e){return a.a.createElement(o.Message,{kind:"error"},e.toString())},d=function(e){var t=e.children,n=e.contentWidth,r=e.disableScrollToTop,i=e.noCardWrap;return Object(l.a)(r),a.a.createElement(o.Container,{className:c.a.customContainer,singleContent:!0},a.a.createElement(s.a,{noBorder:!0}),a.a.createElement(o.Main,{fill:!0,className:Object(o.classNames)(c.a.singleContentMain,c.a[n])},a.a.createElement(u.a,{errorRenderer:f},i?t:a.a.createElement(o.Card,{className:c.a.card},t))))};d.defaultProps={contentWidth:"narrow",disableScrollToTop:!1,noCardWrap:!1};var m=d},616:function(e,t){},622:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),a=n.n(r),o=n(1),i=n(273),c=n.n(i),u=n(676),s=n.n(u),l=n(4);var f=function(e){var t=e.onChange,n=e.children,r=e.acceptedFiles;return a.a.createElement(s.a,{as:"binary",id:"my-file-input",accept:r||"*",onChange:function(e,n){var r=function(e){var t=[];return e.forEach((function(e){var n=Object(l.a)(e,2),r=n[0],a=n[1];t.push({name:a.name,mime:a.name.includes(".txt")?"".concat(a.type,"; charset=utf-8"):a.type,size:a.size,payload:btoa(r.target.result)})})),t}(n);t(r,n)},multiple:!0},n)},d=n(36),m=function(e){var t=e.title,n=void 0===t?"Attach a file":t,r=e.subTitle,i=void 0===r?"Select the file that you would like to attach to your proposal.":r,u=e.show,s=e.onChange,l=e.onClose,m=Object(d.a)().policyPi;return a.a.createElement(o.Modal,{title:n,show:u,onClose:l},a.a.createElement("div",{className:c.a.wrapper},a.a.createElement(o.P,null,i),m&&a.a.createElement(o.P,null,"Valid MIME types - image/png ",a.a.createElement("br",null),"Max image size - 512kb ",a.a.createElement("br",null),"Max number of files - ",m.imagefilecountmax),a.a.createElement(o.P,{className:c.a.greyText},"If you have any problems with your upload, try using a smaller file."),a.a.createElement("div",{className:c.a.selectFileWrapper},a.a.createElement(f,{onChange:s,acceptedFiles:"image/png"},a.a.createElement(o.Button,{className:c.a.selectFileButton,type:"submit",kind:"primary"},"Select file")))))}},623:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(4),a=n(18),o=n(0),i=n.n(o),c=n(1),u=n(460),s=n.n(u),l=n(675),f=n.n(l),d=n(622),m=n(25),p=["onChange","label","small","acceptedFiles"],h=function(e){var t=e.onChange,n=e.label,u=e.small,l=e.acceptedFiles,h=Object(a.a)(e,p),b=Object(m.a)(),v=Object(r.a)(b,2),E=v[0],y=v[1],g=Object(o.useCallback)((function(e){t(e),y()}),[t,y]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",Object.assign({className:Object(c.classNames)(s.a.attachFileButton,u&&s.a.small),onClick:function(){E(d.a,{acceptedFiles:l,onChange:g,onClose:y})}},h),n,i.a.createElement("img",{alt:"Attach",src:f.a})))}},627:function(e,t,n){"use strict";(function(e){var r=n(217),a=n(218),o=n(628),i=n.n(o);function c(e){return i.a.createHash("sha256").update(e).digest()}var u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;Object(r.a)(this,t),this.hashAlgo=n,this.leaves=e,this.layers=[e],this.createHashes(this.leaves)}return Object(a.a)(t,[{key:"createHashes",value:function(t){if(1===t.length)return!1;var n=this.layers.length;this.layers.push([]);for(var r=0;r<t.length-1;r+=2){var a,o=t[r],i=t[r+1];a=e.concat([o,i]);var c=this.hashAlgo(a);this.layers[n].push(c)}if(t.length%2===1){var u,s=t[t.length-1];s=e.concat([s,s]),u=this.hashAlgo(s),this.layers[n].push(u)}this.createHashes(this.layers[n])}},{key:"getLeaves",value:function(){return this.leaves}},{key:"getLayers",value:function(){return this.layers}},{key:"getRoot",value:function(){return this.layers[this.layers.length-1][0]}},{key:"getProof",value:function(t,n){var r=[];if("number"!==typeof n){n=-1;for(var a=0;a<this.leaves.length;a++)0===e.compare(t,this.leaves[a])&&(n=a)}if(n<=-1)return[];if(n===this.leaves.length-1){for(var o=0;o<this.layers.length-1;o++){var i=this.layers[o],c=n%2,u=c?n-1:n;u<i.length&&r.push({position:c?"left":"right",data:i[u]}),n=n/2|0}return r}for(var s=0;s<this.layers.length;s++){var l=this.layers[s],f=n%2,d=f?n-1:n+1;d<l.length&&r.push({position:f?"left":"right",data:l[d]}),n=n/2|0}return r}},{key:"verify",value:function(t,n,r){var a=n;if(!Array.isArray(t)||!t.length||!n||!r)return!1;for(var o=0;o<t.length;o++){var i=t[o],c="left"===i.position,u=[];u.push(a),u[c?"unshift":"push"](i.data),a=this.hashAlgo(e.concat(u))}return 0===e.compare(a,r)}}]),t}();t.a=u}).call(this,n(43).Buffer)},642:function(e,t,n){e.exports={newButton:"NewButton_newButton__2SXmT"}},644:function(e,t,n){e.exports={paywallDescription:"ModalPayPaywall_paywallDescription__17hwp"}},645:function(e,t,n){e.exports={markdownHeadings:"StaticMarkdown_markdownHeadings__2O33x"}},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return C}));var r=n(4),a=n(0),o=n.n(a),i=n(10),c=n(8),u=n(59),s=n(6),l=n(25),f=n(1),d=n(47),m=n(338),p=n(231),h=n(650),b=n.n(h),v=n(15),E=v.f().shape({creditsNumber:v.e().min(1,"Credits must be higher than 0").max(999,"Credits muts be less than 999")}),y=n(5),g=n(21);function O(e){var t,n=Object(a.useMemo)((function(){return c.tb(e)}),[e]),r=Object(a.useMemo)((function(){return c.wb(e)}),[e]),o=Object(s.c)(n),i=Object(s.c)(r),u=Object(s.c)(c.Yb),l=Object(a.useMemo)((function(){return c.sb(e)}),[e]),f=Object(s.c)(l);return{status:(t=o,i?t<2?y.T:y.U:y.V),isPollingCreditsPayment:u,amount:Object(g.a)(f)}}var _=function(e){var t=e.show,n=e.onClose,i=e.price,c=e.initialStep,u=void 0===c?0:c,s=e.address,l=e.userID,h=e.startPollingPayment,v=Object(a.useState)(1),y=Object(r.a)(v,2),g=y[0],_=y[1],j=function(){n(),setTimeout((function(){return C(u)}),300)},w=Object(a.useState)(u),S=Object(r.a)(w,2),T=S[0],C=S[1];var k=O(l),I=k.isPollingCreditsPayment,x=k.status,R=k.amount;Object(a.useEffect)((function(){C(u)}),[u]),Object(a.useEffect)((function(){I||1!==T||h()}),[I,h,T]);var N=Object(f.useMediaQuery)("(max-width: 560px)");return T?o.a.createElement(f.Modal,{show:t,onClose:j,title:"Complete your purchase"},N&&o.a.createElement(p.a,{status:x}),o.a.createElement(m.a,{address:s,amount:R||+(g*i).toFixed(1),extraSmall:N,status:x})):o.a.createElement(f.Modal,{show:t,onClose:j,title:"Purchase Proposal Credits",contentStyle:{width:"100%"}},o.a.createElement(d.a,{initialValues:{creditsNumber:"1"},validationSchema:E,onSubmit:function(e){C(1),_(+e.creditsNumber)}},(function(e){var t=e.Form,n=e.ErrorMessage,r=e.values,a=e.handleChange,i=e.handleSubmit,c=e.errors,u=c&&c.creditsNumber||!+r.creditsNumber;return o.a.createElement(t,{onSubmit:i},o.a.createElement("div",null,o.a.createElement(f.Text,null,"How many credits do you want to buy? "),o.a.createElement(f.NumberInput,{id:"creditsNumber",name:"creditsNumber",value:r.creditsNumber,onChange:a}),c&&c.creditsNumber&&o.a.createElement(n,null,c.creditsNumber)),o.a.createElement("div",{className:"margin-top-s"},o.a.createElement(f.Text,{color:"gray"},"Each proposal credit costs 0.1 DCR")),o.a.createElement("div",{className:Object(f.classNames)("margin-top-l",b.a.actionButtons)},o.a.createElement(f.Button,{onClick:j,kind:"secondary"},"Back"),o.a.createElement(f.Button,{kind:u?"disabled":"primary",type:"submit"},"Next")))})))},j=n(307);function w(e){var t=Object(s.c)(c.Y),n=Object(s.c)(c.bb),r=Object(a.useMemo)((function(){return c.rb(e)}),[e]),o=Object(a.useMemo)((function(){return c.ub(e)}),[e]),l=Object(a.useMemo)((function(){return c.wb(e)}),[e]),f=Object(a.useMemo)((function(){return c.sb(e)}),[e]),d=Object(a.useMemo)((function(){return c.tb(e)}),[e]),m=Object(a.useMemo)((function(){return c.vb(e)}),[e]),p=Object(a.useMemo)((function(){return c.Ib(e)}),[e]),h=Object(a.useMemo)((function(){return c.Kb(e)}),[e]),b=Object(s.c)(r),v=Object(s.c)(o),E=Object(s.c)(l),y=Object(s.c)(f),g=Object(s.c)(d),O=Object(s.c)(p),_=Object(s.c)(h),j=Object(s.c)(m),w=Object(s.c)(c.Yb),S=Object(s.c)(c.gc),T=Object(s.c)(c.bc),C=Object(s.c)(c.t),k=Object(s.c)(c.s),I=Object(s.b)(i.Mb),x=Object(s.b)(i.H),R=Object(s.b)(i.kb),N=Object(s.b)(i.Vb),P=Object(s.b)(i.Wb),L=Object(s.b)(i.a),A=Object(u.a)(e),D=A.isPaid,U=A.paywallEnabled,V=A.creditsEnabled,M=O.length,F=k===e,B=V&&D&&!!e&&F&&!v&&!t,G=U&&D&&F&&""!==E&&!w&&!S,W=D&&e&&F&&!n&&!(null!==M);return Object(a.useEffect)((function(){B&&x()}),[B,x]),Object(a.useEffect)((function(){W&&I()}),[W,I]),{proposalCreditPrice:v,isAdmin:C,isApiRequestingUserProposalCredits:n,proposalCredits:M,proposalCreditsPurchases:_,currentUserID:k,proposalPaywallAddress:b,proposalPaywallPaymentConfirmations:g,proposalPaywallPaymentTxid:E,proposalPaywallPaymentAmount:y,toggleCreditsPaymentPolling:N,pollingCreditsPayment:w,proposalPaymentReceived:T,toggleProposalPaymentReceived:P,onPollProposalPaywallPayment:R,shouldPollPaywallPayment:G,clearProposalPaymentPollingPointer:L,paywallFaucetTxid:j}}function S(){var e=Object(s.c)(c.s),t=Object(a.useMemo)((function(){return c.wb(e)}),[e]),n=Object(s.c)(t),r=Object(s.b)(i.H),o=Object(s.c)(c.Yb),u=Object(s.b)(i.Mb),l=Object(s.b)(i.Vb),f=Object(s.b)(i.Wb),d=Object(a.useRef)(null);return Object(a.useEffect)((function(){o&&d.current&&!n&&(f(!0),l(!1),u(),r()),d.current=n}),[o,n,f,l,u,r]),{}}function T(e){var t=Object(s.c)(c.k),n=Object(s.c)(c.Z),r=Object(a.useMemo)((function(){return c.lb(e)}),[e]),o=Object(s.c)(r),u=Object(s.b)(i.mb),l=Object(s.b)(i.qb);return Object(a.useEffect)((function(){null!==o&&setTimeout((function(){return l(e)}),3e3)}),[o,l,e]),{onRescanUserCredits:Object(a.useCallback)((function(){u(e)}),[u,e]),errorRescan:t,isLoadingRescan:n,amountOfCreditsAddedOnRescan:o}}function C(e){var t=e&&e.userid,n=w(t),a=n.proposalCreditPrice,o=n.proposalPaywallAddress,i=n.proposalPaywallPaymentTxid,c=n.toggleCreditsPaymentPolling,u=n.onPollProposalPaywallPayment,s=n.toggleProposalPaymentReceived,f=Object(l.a)(),d=Object(r.a)(f,2),m=d[0],p=d[1],h=function(){c(!0),u(!1)},b=function(){s(!1),p()};return{handleOpenPaywallModal:function(){m(j.a,{title:"Complete your registration",onClose:p})},handleOpenBuyCreditsModal:function(){m(_,{title:"Purchase Proposal Credits",price:a,address:o,startPollingPayment:h,initialStep:i?1:0,onClose:b,userID:t})},handleCloseModal:p}}},650:function(e,t,n){e.exports={actionButtons:"ModalBuyProposalCredits_actionButtons__2xewZ",inputNumber:"ModalBuyProposalCredits_inputNumber__1Kptc"}},652:function(e,t,n){e.exports=n.p+"static/media/plus.2d8b4d24.svg"},655:function(e,t,n){e.exports=n.p+"static/media/notFound.12a4c9d0.svg"},658:function(e,t,n){e.exports={join:"Join_join__3Uo6C"}},659:function(e,t,n){e.exports={iconButton:"IconButton_iconButton__3nqcI"}},66:function(e,t,n){e.exports={"diff-text-preview-toggle":"Diff_diff-text-preview-toggle__2NKBw","diff-active-toggle":"Diff_diff-active-toggle__15fkz",diffTable:"Diff_diffTable__13C6Q",lineIndex:"Diff_lineIndex__3VW5U",lineIcon:"Diff_lineIcon__cIDAh",lineContent:"Diff_lineContent__27u-T",lineAdded:"Diff_lineAdded__3aoVi",lineRemoved:"Diff_lineRemoved__30R19","diff-out-line":"Diff_diff-out-line__2mwbh","diff-header":"Diff_diff-header__mhREM","diff-wrapper":"Diff_diff-wrapper___22hN",files:"Diff_files__SICTV",fileAdded:"Diff_fileAdded__34LjJ",fileRemoved:"Diff_fileRemoved__yhmuY",lineitemsRemoved:"Diff_lineitemsRemoved__Nl0Mx",lineitemsRemovedDark:"Diff_lineitemsRemovedDark__1Cora",lineitemsAdded:"Diff_lineitemsAdded__YVIkc",lineitemsAddedDark:"Diff_lineitemsAddedDark__37bTR",multiline:"Diff_multiline__2FnHm",fileUnchanged:"Diff_fileUnchanged__146PC"}},662:function(e,t,n){e.exports={errorTooltip:"CellRenderer_errorTooltip__1-Chu",errorTooltipContent:"CellRenderer_errorTooltipContent__2zoK6",value:"CellRenderer_value__3RYID",erroredCell:"CellRenderer_erroredCell__9SRDR"}},666:function(e,t,n){e.exports={spinnerWrapper:"VettedProposals_spinnerWrapper__2xC6z",customMain:"VettedProposals_customMain__3mZSd",pulse:"VettedProposals_pulse__TEjDr"}},668:function(e,t,n){e.exports={deleteDraft:"DraftProposal_deleteDraft__1rD49"}},669:function(e,t,n){e.exports={spinnerWrapper:"ListWrapper_spinnerWrapper__2BsIf"}},670:function(e,t,n){e.exports={deleteDraft:"DraftInvoice_deleteDraft__1ohvQ"}},671:function(e,t,n){e.exports={deleteDraft:"DraftDcc_deleteDraft__1Bp5j"}},673:function(e,t,n){e.exports={select:"SearchSelector_select__24Fc-"}},674:function(e,t,n){e.exports={spinnerWrapper:"List_spinnerWrapper__1JJ0l"}},675:function(e,t,n){e.exports=n.p+"static/media/attach-file.a5d32ac1.svg"},677:function(e,t,n){e.exports={spinnerWrapper:"InvoiceForm_spinnerWrapper__3C3Zl"}},678:function(e,t,n){e.exports={form:"PayoutsDateRange_form__3519Q"}},680:function(e,t,n){},682:function(e,t,n){e.exports=n.p+"static/media/SourceSansPro-Light.ee2a11b8.ttf"},683:function(e,t,n){e.exports=n.p+"static/media/SourceSansPro-Regular.5182da42.ttf"},684:function(e,t,n){e.exports=n.p+"static/media/SourceSansPro-SemiBold.774c05cc.ttf"},689:function(e,t,n){e.exports=n(1209)},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(e){return function(){return!!e.apply(void 0,arguments)}},a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a;return!!t.find((function(e){return a=e.apply(void 0,n)}))&&a}}},7:function(e,t,n){"use strict";n.r(t),n.d(t,"REQUEST_INIT_SESSION",(function(){return r})),n.d(t,"RECEIVE_INIT_SESSION",(function(){return a})),n.d(t,"REQUEST_ME",(function(){return o})),n.d(t,"RECEIVE_ME",(function(){return i})),n.d(t,"REQUEST_POLICY",(function(){return c})),n.d(t,"RECEIVE_POLICY",(function(){return u})),n.d(t,"REQUEST_CODE_STATS",(function(){return s})),n.d(t,"RECEIVE_CODE_STATS",(function(){return l})),n.d(t,"REQUEST_NEW_USER",(function(){return f})),n.d(t,"RECEIVE_NEW_USER",(function(){return d})),n.d(t,"RESET_NEW_USER",(function(){return m})),n.d(t,"RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET",(function(){return p})),n.d(t,"REQUEST_PAYWALL_PAYMENT_WITH_FAUCET",(function(){return h})),n.d(t,"UPDATE_USER_PAYWALL_STATUS",(function(){return b})),n.d(t,"REQUEST_CHANGE_USERNAME",(function(){return v})),n.d(t,"RECEIVE_CHANGE_USERNAME",(function(){return E})),n.d(t,"REQUEST_CHANGE_PASSWORD",(function(){return y})),n.d(t,"RECEIVE_CHANGE_PASSWORD",(function(){return g})),n.d(t,"REQUEST_VERIFY_NEW_USER",(function(){return O})),n.d(t,"RECEIVE_VERIFY_NEW_USER",(function(){return _})),n.d(t,"REQUEST_USER",(function(){return j})),n.d(t,"RECEIVE_USER",(function(){return w})),n.d(t,"REQUEST_PROPOSAL_BILLING",(function(){return S})),n.d(t,"RECEIVE_PROPOSAL_BILLING",(function(){return T})),n.d(t,"REQUEST_LOGIN",(function(){return C})),n.d(t,"RECEIVE_LOGIN",(function(){return k})),n.d(t,"KEY_MISMATCH",(function(){return I})),n.d(t,"REQUEST_RESEND_VERIFICATION_EMAIL",(function(){return x})),n.d(t,"RECEIVE_RESEND_VERIFICATION_EMAIL",(function(){return R})),n.d(t,"RESET_RESEND_VERIFICATION_EMAIL",(function(){return N})),n.d(t,"REQUEST_LOGOUT",(function(){return P})),n.d(t,"RECEIVE_LOGOUT",(function(){return L})),n.d(t,"RECEIVE_CMS_LOGOUT",(function(){return A})),n.d(t,"REQUEST_USER_INVENTORY",(function(){return D})),n.d(t,"RECEIVE_USER_INVENTORY",(function(){return U})),n.d(t,"REQUEST_PROPOSAL",(function(){return V})),n.d(t,"RECEIVE_PROPOSAL",(function(){return M})),n.d(t,"REQUEST_RECORD_COMMENTS",(function(){return F})),n.d(t,"RECEIVE_RECORD_COMMENTS",(function(){return B})),n.d(t,"REQUEST_NEW_PROPOSAL",(function(){return G})),n.d(t,"RECEIVE_NEW_PROPOSAL",(function(){return W})),n.d(t,"REQUEST_EDIT_PROPOSAL",(function(){return Y})),n.d(t,"RECEIVE_EDIT_PROPOSAL",(function(){return H})),n.d(t,"REQUEST_NEW_COMMENT",(function(){return Q})),n.d(t,"RECEIVE_NEW_COMMENT",(function(){return q})),n.d(t,"REQUEST_EDIT_COMMENT",(function(){return z})),n.d(t,"RECEIVE_EDIT_COMMENT",(function(){return K})),n.d(t,"REQUEST_SETSTATUS_PROPOSAL",(function(){return J})),n.d(t,"RECEIVE_SETSTATUS_PROPOSAL",(function(){return X})),n.d(t,"REQUEST_SET_BILLING_STATUS",(function(){return Z})),n.d(t,"RECEIVE_SET_BILLING_STATUS",(function(){return $})),n.d(t,"REQUEST_BILLING_STATUS_CHANGES",(function(){return ee})),n.d(t,"RECEIVE_BILLING_STATUS_CHANGES",(function(){return te})),n.d(t,"REQUEST_START_VOTE",(function(){return ne})),n.d(t,"RECEIVE_START_VOTE",(function(){return re})),n.d(t,"REQUEST_START_RUNOFF_VOTE",(function(){return ae})),n.d(t,"RECEIVE_START_RUNOFF_VOTE",(function(){return oe})),n.d(t,"REQUEST_UPDATED_KEY",(function(){return ie})),n.d(t,"RECEIVE_UPDATED_KEY",(function(){return ce})),n.d(t,"REQUEST_VERIFIED_KEY",(function(){return ue})),n.d(t,"RECEIVE_VERIFIED_KEY",(function(){return se})),n.d(t,"REQUEST_LIKE_COMMENT",(function(){return le})),n.d(t,"RECEIVE_LIKE_COMMENT",(function(){return fe})),n.d(t,"RECEIVE_LIKE_COMMENT_SUCCESS",(function(){return de})),n.d(t,"REQUEST_CENSOR_COMMENT",(function(){return me})),n.d(t,"RECEIVE_CENSOR_COMMENT",(function(){return pe})),n.d(t,"REQUEST_LIKED_COMMENTS",(function(){return he})),n.d(t,"RECEIVE_LIKED_COMMENTS",(function(){return be})),n.d(t,"REQUEST_EDIT_USER",(function(){return ve})),n.d(t,"RECEIVE_EDIT_USER",(function(){return Ee})),n.d(t,"REQUEST_MANAGE_USER",(function(){return ye})),n.d(t,"RECEIVE_MANAGE_USER",(function(){return ge})),n.d(t,"REQUEST_PROPOSAL_VOTE_RESULTS",(function(){return Oe})),n.d(t,"RECEIVE_PROPOSAL_VOTE_RESULTS",(function(){return _e})),n.d(t,"REQUEST_PROPOSALS_VOTE_SUMMARY",(function(){return je})),n.d(t,"RECEIVE_PROPOSALS_VOTE_SUMMARY",(function(){return we})),n.d(t,"REQUEST_BATCH_PROPOSAL_SUMMARY",(function(){return Se})),n.d(t,"RECEIVE_BATCH_PROPOSAL_SUMMARY",(function(){return Te})),n.d(t,"REQUEST_VOTES_DETAILS",(function(){return Ce})),n.d(t,"RECEIVE_VOTES_DETAILS",(function(){return ke})),n.d(t,"REQUEST_USER_SEARCH",(function(){return Ie})),n.d(t,"RECEIVE_USER_SEARCH",(function(){return xe})),n.d(t,"SAVE_DRAFT_PROPOSAL",(function(){return Re})),n.d(t,"DELETE_DRAFT_PROPOSAL",(function(){return Ne})),n.d(t,"LOAD_DRAFT_PROPOSALS",(function(){return Pe})),n.d(t,"REQUEST_PROPOSAL_PAYWALL_DETAILS",(function(){return Le})),n.d(t,"RECEIVE_PROPOSAL_PAYWALL_DETAILS",(function(){return Ae})),n.d(t,"REQUEST_USER_PROPOSAL_CREDITS",(function(){return De})),n.d(t,"RECEIVE_USER_PROPOSAL_CREDITS",(function(){return Ue})),n.d(t,"CSRF_NEEDED",(function(){return Ve})),n.d(t,"SHOULD_AUTO_VERIFY_KEY",(function(){return Me})),n.d(t,"IDENTITY_IMPORTED",(function(){return Fe})),n.d(t,"REQUEST_AUTHORIZE_VOTE",(function(){return Be})),n.d(t,"RECEIVE_AUTHORIZE_VOTE",(function(){return Ge})),n.d(t,"REQUEST_REVOKE_AUTH_VOTE",(function(){return We})),n.d(t,"RECEIVE_REVOKE_AUTH_VOTE",(function(){return Ye})),n.d(t,"REQUEST_PROPOSAL_PAYWALL_PAYMENT",(function(){return He})),n.d(t,"RECEIVE_PROPOSAL_PAYWALL_PAYMENT",(function(){return Qe})),n.d(t,"TOGGLE_CREDITS_PAYMENT_POLLING",(function(){return qe})),n.d(t,"TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT",(function(){return ze})),n.d(t,"TOGGLE_PROPOSAL_PAYMENT_RECEIVED",(function(){return Ke})),n.d(t,"REQUEST_RESCAN_USER_PAYMENTS",(function(){return Je})),n.d(t,"RECEIVE_RESCAN_USER_PAYMENTS",(function(){return Xe})),n.d(t,"RESET_RESCAN_USER_PAYMENTS",(function(){return Ze})),n.d(t,"REQUEST_TOKEN_INVENTORY",(function(){return $e})),n.d(t,"RECEIVE_VOTES_INVENTORY",(function(){return et})),n.d(t,"RECEIVE_RECORDS_INVENTORY",(function(){return tt})),n.d(t,"REQUEST_RESET_PASSWORD",(function(){return nt})),n.d(t,"RECEIVE_RESET_PASSWORD",(function(){return rt})),n.d(t,"REQUEST_VERIFY_RESET_PASSWORD",(function(){return at})),n.d(t,"RECEIVE_VERIFY_RESET_PASSWORD",(function(){return ot})),n.d(t,"REQUEST_PROPOSALS_BATCH",(function(){return it})),n.d(t,"RECEIVE_PROPOSALS_BATCH",(function(){return ct})),n.d(t,"REQUEST_INVITE_USER",(function(){return ut})),n.d(t,"RECEIVE_INVITE_USER",(function(){return st})),n.d(t,"REQUEST_NEW_INVOICE",(function(){return lt})),n.d(t,"RECEIVE_NEW_INVOICE",(function(){return ft})),n.d(t,"REQUEST_EDIT_INVOICE",(function(){return dt})),n.d(t,"RECEIVE_EDIT_INVOICE",(function(){return mt})),n.d(t,"REQUEST_USER_INVOICES",(function(){return pt})),n.d(t,"RECEIVE_USER_INVOICES",(function(){return ht})),n.d(t,"REQUEST_ADMIN_INVOICES",(function(){return bt})),n.d(t,"RECEIVE_ADMIN_INVOICES",(function(){return vt})),n.d(t,"REQUEST_INVOICE",(function(){return Et})),n.d(t,"RECEIVE_INVOICE",(function(){return yt})),n.d(t,"SAVE_DRAFT_INVOICE",(function(){return gt})),n.d(t,"DELETE_DRAFT_INVOICE",(function(){return Ot})),n.d(t,"LOAD_DRAFT_INVOICES",(function(){return _t})),n.d(t,"REQUEST_SETSTATUS_INVOICE",(function(){return jt})),n.d(t,"RECEIVE_SETSTATUS_INVOICE",(function(){return wt})),n.d(t,"REQUEST_GENERATE_PAYOUTS",(function(){return St})),n.d(t,"RECEIVE_GENERATE_PAYOUTS",(function(){return Tt})),n.d(t,"REQUEST_INVOICE_PAYOUTS",(function(){return Ct})),n.d(t,"RECEIVE_INVOICE_PAYOUTS",(function(){return kt})),n.d(t,"REQUEST_PAY_APPROVED",(function(){return It})),n.d(t,"RECEIVE_PAY_APPROVED",(function(){return xt})),n.d(t,"REQUEST_SPENDING_SUMMARY",(function(){return Rt})),n.d(t,"RECEIVE_SPENDING_SUMMARY",(function(){return Nt})),n.d(t,"REQUEST_SPENDING_DETAILS",(function(){return Pt})),n.d(t,"RECEIVE_SPENDING_DETAILS",(function(){return Lt})),n.d(t,"REQUEST_EXCHANGE_RATE",(function(){return At})),n.d(t,"RECEIVE_EXCHANGE_RATE",(function(){return Dt})),n.d(t,"REQUEST_MANAGE_CMS_USER",(function(){return Ut})),n.d(t,"RECEIVE_MANAGE_CMS_USER",(function(){return Vt})),n.d(t,"REQUEST_USER_SUBCONTRACTORS",(function(){return Mt})),n.d(t,"RECEIVE_USER_SUBCONTRACTORS",(function(){return Ft})),n.d(t,"REQUEST_NEW_DCC",(function(){return Bt})),n.d(t,"RECEIVE_NEW_DCC",(function(){return Gt})),n.d(t,"REQUEST_DCCS",(function(){return Wt})),n.d(t,"RECEIVE_DCCS",(function(){return Yt})),n.d(t,"REQUEST_DCC",(function(){return Ht})),n.d(t,"RECEIVE_DCC",(function(){return Qt})),n.d(t,"REQUEST_SUPPORT_OPPOSE_DCC",(function(){return qt})),n.d(t,"RECEIVE_SUPPORT_OPPOSE_DCC",(function(){return zt})),n.d(t,"REQUEST_SET_DCC_STATUS",(function(){return Kt})),n.d(t,"RECEIVE_SET_DCC_STATUS",(function(){return Jt})),n.d(t,"REQUEST_CMS_USERS",(function(){return Xt})),n.d(t,"RECEIVE_CMS_USERS",(function(){return Zt})),n.d(t,"SAVE_DRAFT_DCC",(function(){return $t})),n.d(t,"DELETE_DRAFT_DCC",(function(){return en})),n.d(t,"LOAD_DRAFT_DCCS",(function(){return tn})),n.d(t,"REQUEST_EDIT_CMS_USER",(function(){return nn})),n.d(t,"RECEIVE_EDIT_CMS_USER",(function(){return rn})),n.d(t,"REQUEST_SET_TOTP",(function(){return an})),n.d(t,"RECEIVE_SET_TOTP",(function(){return on})),n.d(t,"REQUEST_VERIFY_TOTP",(function(){return cn})),n.d(t,"RECEIVE_VERIFY_TOTP",(function(){return un})),n.d(t,"SET_HAS_TOTP",(function(){return sn})),n.d(t,"REQUEST_VOTES_BUNDLE",(function(){return ln})),n.d(t,"RECEIVE_VOTES_BUNDLE",(function(){return fn}));var r="API_REQUEST_INIT_SESSION",a="API_RECEIVE_INIT_SESSION",o="API_REQUEST_ME",i="API_RECEIVE_ME",c="API_REQUEST_POLICY",u="API_RECEIVE_POLICY",s="API_REQUEST_CODE_STATS",l="API_RECEIVE_CODE_STATS",f="API_REQUEST_NEW_USER",d="API_RECEIVE_NEW_USER",m="API_RESET_NEW_USER",p="RECEIVE_PAYWALL_PAYMENT_WITH_FAUCET",h="REQUEST_PAYWALL_PAYMENT_WITH_FAUCET",b="UPDATE_USER_PAYWALL_STATUS",v="API_REQUEST_CHANGE_USERNAME",E="API_RECEIVE_CHANGE_USERNAME",y="API_REQUEST_CHANGE_PASSWORD",g="API_RECEIVE_CHANGE_PASSWORD",O="API_REQUEST_VERIFY_NEW_USER",_="API_RECEIVE_VERIFY_NEW_USER",j="API_REQUEST_USER",w="API_RECEIVE_USER",S="API_REQUEST_PROPOSAL_BILLING",T="API_RECEIVE_PROPOSAL_BILLING",C="API_REQUEST_LOGIN",k="API_RECEIVE_LOGIN",I="KEY_MISMATCH",x="API_REQUEST_RESEND_VERIFICATION_EMAIL",R="API_RECEIVE_RESEND_VERIFICATION_EMAIL",N="API_RESET_RESEND_VERIFICATION_EMAIL",P="API_REQUEST_LOGOUT",L="API_RECEIVE_LOGOUT",A="API_RECEIVE_CMS_LOGOUT",D="REQUEST_USER_INVENTORY",U="RECEIVE_USER_INVENTORY",V="API_REQUEST_PROPOSAL",M="API_RECEIVE_PROPOSAL",F="API_REQUEST_RECORD_COMMENTS",B="API_RECEIVE_RECORD_COMMENTS",G="API_REQUEST_NEW_PROPOSAL",W="API_RECEIVE_NEW_PROPOSAL",Y="API_REQUEST_EDIT_PROPOSAL",H="API_RECEIVE_EDIT_PROPOSAL",Q="API_REQUEST_NEW_COMMENT",q="API_RECEIVE_NEW_COMMENT",z="API_REQUEST_EDIT_COMMENT",K="API_RECEIVE_EDIT_COMMENT",J="API_REQUEST_SETSTATUS_PROPOSAL",X="API_RECEIVE_SETSTATUS_PROPOSAL",Z="API_REQUEST_SET_BILLING_STATUS",$="API_RECEIVE_SET_BILLING_STATUS",ee="API_REQUEST_BILLING_STATUS_CHANGES",te="API_RECEIVE_BILLING_STATUS_CHANGES",ne="API_REQUEST_START_VOTE",re="API_RECEIVE_START_VOTE",ae="API_REQUEST_START_RUNOFF_VOTE",oe="API_RECEIVE_START_RUNOFF_VOTE",ie="API_REQUEST_UPDATED_KEY",ce="API_RECEIVE_UPDATED_KEY",ue="API_REQUEST_VERIFIED_KEY",se="API_RECEIVE_VERIFIED_KEY",le="API_REQUEST_LIKE_COMMENT",fe="API_RECEIVE_LIKE_COMMENT",de="API_RECEIVE_LIKE_COMMENT_SUCCESS",me="API_REQUEST_CENSOR_COMMENT",pe="API_RECEIVE_CENSOR_COMMENT",he="API_REQUEST_LIKED_COMMENTS",be="API_RECEIVE_LIKED_COMMENTS",ve="API_REQUEST_EDIT_USER",Ee="API_RECEIVE_EDIT_USER",ye="API_REQUEST_MANAGE_USER",ge="API_RECEIVE_MANAGE_USER",Oe="API_REQUEST_PROPOSAL_VOTE_RESULTS",_e="API_RECEIVE_PROPOSAL_VOTE_RESULTS",je="API_REQUEST_PROPOSALS_VOTE_SUMMARY",we="API_RECEIVE_PROPOSALS_VOTE_SUMMARY",Se="API_REQUEST_BATCH_PROPOSAL_SUMMARY",Te="API_RECEIVE_BATCH_PROPOSAL_SUMMARY",Ce="API_REQUEST_VOTES_DETAILS",ke="API_RECEIVE_VOTES_DETAILS",Ie="API_REQUEST_USER_SEARCH",xe="API_RECEIVE_USER_SEARCH",Re="SAVE_DRAFT_PROPOSAL",Ne="DELETE_DRAFT_PROPOSAL",Pe="LOAD_DRAFT_PROPOSALS",Le="API_REQUEST_PROPOSAL_PAYWALL_DETAILS",Ae="API_RECEIVE_PROPOSAL_PAYWALL_DETAILS",De="API_REQUEST_USER_PROPOSAL_CREDITS",Ue="API_RECEIVE_USER_PROPOSAL_CREDITS",Ve="API_CSRF_NEEDED",Me="API_SHOULD_AUTO_VERIFY_KEY",Fe="IDENTITY_IMPORTED",Be="REQUEST_AUTHORIZE_VOTE",Ge="RECEIVE_AUTHORIZE_VOTE",We="REQUEST_REVOKE_AUTH_VOTE",Ye="RECEIVE_REVOKE_AUTH_VOTE",He="REQUEST_PROPOSAL_PAYWALL_PAYMENT",Qe="RECEIVE_PROPOSAL_PAYWALL_PAYMENT",qe="TOGGLE_CREDITS_PAYMENT_POLLING",ze="TOGGLE_CREDITS_PAYMENT_POLLING_REACHED_LIMIT",Ke="TOGGLE_PROPOSAL_PAYMENT_RECEIVED",Je="REQUEST_RESCAN_USER_PAYMENTS",Xe="RECEIVE_RESCAN_USER_PAYMENTS",Ze="RESET_RESCAN_USER_PAYMENTS",$e="REQUEST_TOKEN_INVENTORY",et="RECEIVE_VOTES_INVENTORY",tt="RECEIVE_RECORDS_INVENTORY",nt="REQUEST_RESET_PASSWORD",rt="RECEIVE_RESET_PASSWORD",at="REQUEST_VERIFY_RESET_PASSWORD",ot="RECEIVE_VERIFY_RESET_PASSWORD",it="REQUEST_PROPOSALS_BATCH",ct="RECEIVE_PROPOSALS_BATCH",ut="REQUEST_INVITE_USER",st="RECEIVE_INVITE_USER",lt="API_REQUEST_NEW_INVOICE",ft="API_RECEIVE_NEW_INVOICE",dt="API_REQUEST_EDIT_INVOICE",mt="API_RECEIVE_EDIT_INVOICE",pt="API_REQUEST_USER_INVOICES",ht="API_RECEIVE_USER_INVOICES",bt="API_REQUEST_ADMIN_INVOICES",vt="API_RECEIVE_ADMIN_INVOICES",Et="API_REQUEST_INVOICE",yt="API_RECEIVE_INVOICE",gt="SAVE_DRAFT_INVOICE",Ot="DELETE_DRAFT_INVOICE",_t="LOAD_DRAFT_INVOICES",jt="API_REQUEST_SETSTATUS_INVOICE",wt="API_RECEIVE_SETSTATUS_INVOICE",St="API_REQUEST_GENERATE_PAYOUTS",Tt="API_RECEIVE_GENERATE_PAYOUTS",Ct="API_REQUEST_INVOICE_PAYOUTS",kt="API_RECEIVE_INVOICE_PAYOUTS",It="API_REQUEST_PAY_APPROVED",xt="API_RECEIVE_PAY_APPROVED",Rt="API_REQUEST_SPENDING_SUMMARY",Nt="API_RECEIVE_SPENDING_SUMMARY",Pt="API_REQUEST_SPENDING_DETAILS",Lt="API_RECEIVE_SPENDING_DETAILS",At="API_REQUEST_EXCHANGE_RATE",Dt="API_RECEIVE_EXCHANGE_RATE",Ut="API_REQUEST_MANAGE_CMS_USER",Vt="API_RECEIVE_MANAGE_CMS_USER",Mt="API_REQUEST_USER_SUBCONTRACTORS",Ft="API_RECEIVE_USER_SUBCONTRACTORS",Bt="API_REQUEST_NEW_DCC",Gt="API_RECEIVE_NEW_DCC",Wt="API_REQUEST_DCCS",Yt="API_RECEIVE_DCCS",Ht="API_REQUEST_DCC",Qt="API_RECEIVE_DCC",qt="API_REQUEST_SUPPORT_OPPOSE_DCC",zt="API_RECEIVE_SUPPORT_OPPOSE_DCC",Kt="API_REQUEST_SET_DCC_STATUS",Jt="API_RECEIVE_SET_DCC_STATUS",Xt="API_REQUEST_CMS_USERS",Zt="API_RECEIVE_CMS_USERS",$t="SAVE_DRAFT_DCC",en="DELETE_DRAFT_DCC",tn="LOAD_DRAFT_DCCS",nn="API_REQUEST_EDIT_CMS_USER",rn="API_RECEIVE_EDIT_CMS_USER",an="API_REQUEST_SET_TOTP",on="API_RECEIVE_SET_TOTP",cn="API_REQUEST_VERIFY_TOTP",un="API_RECEIVE_VERIFY_TOTP",sn="SET_HAS_TOTP",ln="API_REQUEST_VOTES_BUNDLE",fn="API_RECEIVE_VOTES_BUNDLE"},70:function(e,t,n){e.exports={diffTabs:"ModalDiff_diffTabs__3Lz89",modalContent:"ModalDiff_modalContent__Y5moP",diffTabContent:"ModalDiff_diffTabContent__3j7qo",diffWrapper:"ModalDiff_diffWrapper__3vRJb",version:"ModalDiff_version__Zjuah",field:"ModalDiff_field__x7-qc",lineitemsWrapper:"ModalDiff_lineitemsWrapper__26Xkl",versionSelectorContainer:"ModalDiff_versionSelectorContainer__frzzI",versionSelectorWrapper:"ModalDiff_versionSelectorWrapper__25wee",versionCompareIcon:"ModalDiff_versionCompareIcon__3Auxa",versionSpinnerContainer:"ModalDiff_versionSpinnerContainer__3E5PR",headerSubtitle:"ModalDiff_headerSubtitle__28zCQ",titleDiff:"ModalDiff_titleDiff__1NQTD"}},71:function(e,t,n){e.exports={wrapper:"InvoiceDatasheet_wrapper__1aFeJ","data-grid":"InvoiceDatasheet_data-grid__1o7tv",cell:"InvoiceDatasheet_cell__Z8EQd",multilineCellValue:"InvoiceDatasheet_multilineCellValue__2160Y",table:"InvoiceDatasheet_table__3Haps",tableHead:"InvoiceDatasheet_tableHead__3yYlt",tableCell:"InvoiceDatasheet_tableCell__TrjEW",tableHeadCell:"InvoiceDatasheet_tableHeadCell__3Zw6J InvoiceDatasheet_tableCell__TrjEW",tableRow:"InvoiceDatasheet_tableRow__U-Cjn",datasheetWrapper:"InvoiceDatasheet_datasheetWrapper__2hwQ-",highlightChar:"InvoiceDatasheet_highlightChar__34noR",textWrapper:"InvoiceDatasheet_textWrapper__5auVY",invoiceError:"InvoiceDatasheet_invoiceError__lzwRZ"}},75:function(e,t,n){e.exports={fieldHeading:"Identity_fieldHeading__31P1y",block:"Identity_block__xfAfU",identityList:"Identity_identityList__3Dh5S",buttonsWrapper:"Identity_buttonsWrapper__34vKJ",spinnerWrapper:"Identity_spinnerWrapper__23PUN"}},76:function(e,t,n){e.exports={customMain:"layouts_customMain__2zC9I",customMainNoSidebar:"layouts_customMainNoSidebar__4nmF_",singleContentMain:"layouts_singleContentMain__2cVbY layouts_customMain__2zC9I",customPageDetails:"layouts_customPageDetails__2h4A9",titleAndSubtitleWrapper:"layouts_titleAndSubtitleWrapper__3MoB2",subtitle:"layouts_subtitle__29sor",pageDetailsHeader:"layouts_pageDetailsHeader__2SA5t",pageDetailsTitle:"layouts_pageDetailsTitle__1WSVs",pageDetailsActions:"layouts_pageDetailsActions__29ORE",card:"layouts_card__LMftl",narrow:"layouts_narrow__-nY1q",widen:"layouts_widen__1-OcW",wrap:"layouts_wrap__3rhSq"}},77:function(e,t,n){e.exports={comment:"Comment_comment__2x0rw",reply:"Comment_reply__15f8G",editForm:"Comment_editForm__2mGZ7",censor:"Comment_censor__1Se5z",censored:"Comment_censored__2aah8",timeAgo:"Comment_timeAgo__3gRzF",editIcon:"Comment_editIcon__2ahL3",contextLink:"Comment_contextLink__2-GNd",info:"Comment_info__1So_U",likesWrapper:"Comment_likesWrapper__21g8Y",childrenContainer:"Comment_childrenContainer__2ueeD",showReplies:"Comment_showReplies__2CduP",commentAuthor:"Comment_commentAuthor__OiN-w",recordAuthor:"Comment_recordAuthor__2_qSN",permalinkTooltip:"Comment_permalinkTooltip__2bep7",copyLinkIcon:"Comment_copyLinkIcon__2Ajzb",highlightAsNew:"Comment_highlightAsNew__2FX1b",replyForm:"Comment_replyForm__hdxiT"}},8:function(e,t,n){"use strict";n.d(t,"L",(function(){return l})),n.d(t,"Xb",(function(){return f})),n.d(t,"n",(function(){return d})),n.d(t,"fb",(function(){return m})),n.d(t,"eb",(function(){return h})),n.d(t,"gb",(function(){return b})),n.d(t,"H",(function(){return v})),n.d(t,"G",(function(){return E})),n.d(t,"F",(function(){return y})),n.d(t,"hc",(function(){return g})),n.d(t,"kc",(function(){return O})),n.d(t,"K",(function(){return _})),n.d(t,"Yb",(function(){return j})),n.d(t,"gc",(function(){return w})),n.d(t,"bc",(function(){return S})),n.d(t,"T",(function(){return N})),n.d(t,"ab",(function(){return P})),n.d(t,"cb",(function(){return L})),n.d(t,"U",(function(){return A})),n.d(t,"M",(function(){return U})),n.d(t,"N",(function(){return V})),n.d(t,"Q",(function(){return F})),n.d(t,"Y",(function(){return B})),n.d(t,"bb",(function(){return G})),n.d(t,"db",(function(){return W})),n.d(t,"Z",(function(){return Y})),n.d(t,"X",(function(){return H})),n.d(t,"O",(function(){return Q})),n.d(t,"P",(function(){return q})),n.d(t,"Qb",(function(){return X})),n.d(t,"mc",(function(){return Z})),n.d(t,"qc",(function(){return $})),n.d(t,"I",(function(){return ee})),n.d(t,"Zb",(function(){return ne})),n.d(t,"j",(function(){return oe})),n.d(t,"i",(function(){return ie})),n.d(t,"k",(function(){return ce})),n.d(t,"h",(function(){return ue})),n.d(t,"f",(function(){return se})),n.d(t,"e",(function(){return le})),n.d(t,"g",(function(){return fe})),n.d(t,"d",(function(){return de})),n.d(t,"R",(function(){return me})),n.d(t,"W",(function(){return pe})),n.d(t,"V",(function(){return he})),n.d(t,"S",(function(){return be})),n.d(t,"Vb",(function(){return ve})),n.d(t,"m",(function(){return ye})),n.d(t,"Bb",(function(){return Te})),n.d(t,"Fb",(function(){return Ce})),n.d(t,"Cb",(function(){return ke})),n.d(t,"Eb",(function(){return xe})),n.d(t,"Db",(function(){return Re})),n.d(t,"pb",(function(){return Ne})),n.d(t,"lb",(function(){return Ae})),n.d(t,"Ib",(function(){return De})),n.d(t,"Kb",(function(){return Ue})),n.d(t,"ic",(function(){return Ve.w})),n.d(t,"jc",(function(){return Ve.x})),n.d(t,"fc",(function(){return Ve.v})),n.d(t,"Ub",(function(){return Ve.u})),n.d(t,"Jb",(function(){return Ve.s})),n.d(t,"s",(function(){return Ve.e})),n.d(t,"p",(function(){return Ve.b})),n.d(t,"o",(function(){return Ve.a})),n.d(t,"r",(function(){return Ve.d})),n.d(t,"C",(function(){return Ve.o})),n.d(t,"t",(function(){return Ve.f})),n.d(t,"A",(function(){return Ve.m})),n.d(t,"v",(function(){return Ve.h})),n.d(t,"y",(function(){return Ve.k})),n.d(t,"x",(function(){return Ve.j})),n.d(t,"u",(function(){return Ve.g})),n.d(t,"D",(function(){return Ve.p})),n.d(t,"q",(function(){return Ve.c})),n.d(t,"B",(function(){return Ve.n})),n.d(t,"w",(function(){return Ve.i})),n.d(t,"z",(function(){return Ve.l})),n.d(t,"Gb",(function(){return Ve.q})),n.d(t,"Hb",(function(){return Ve.r})),n.d(t,"Pb",(function(){return Ve.t})),n.d(t,"pc",(function(){return Ve.A})),n.d(t,"nc",(function(){return Ve.y})),n.d(t,"oc",(function(){return Ve.z})),n.d(t,"ec",(function(){return Ge})),n.d(t,"cc",(function(){return We})),n.d(t,"l",(function(){return Ye})),n.d(t,"b",(function(){return ze})),n.d(t,"a",(function(){return Ke})),n.d(t,"Tb",(function(){return Je})),n.d(t,"xb",(function(){return Xe})),n.d(t,"yb",(function(){return Ze})),n.d(t,"jb",(function(){return $e})),n.d(t,"Ob",(function(){return et})),n.d(t,"qb",(function(){return tt})),n.d(t,"Nb",(function(){return nt})),n.d(t,"rc",(function(){return rt})),n.d(t,"Ab",(function(){return at})),n.d(t,"zb",(function(){return ot})),n.d(t,"J",(function(){return lt})),n.d(t,"lc",(function(){return ft})),n.d(t,"Sb",(function(){return dt})),n.d(t,"c",(function(){return pt})),n.d(t,"ob",(function(){return ht})),n.d(t,"nb",(function(){return bt})),n.d(t,"Wb",(function(){return vt})),n.d(t,"hb",(function(){return yt})),n.d(t,"E",(function(){return _t})),n.d(t,"Rb",(function(){return jt})),n.d(t,"mb",(function(){return Tt})),n.d(t,"Mb",(function(){return It})),n.d(t,"ub",(function(){return xt})),n.d(t,"Lb",(function(){return Pt})),n.d(t,"rb",(function(){return Lt})),n.d(t,"wb",(function(){return At})),n.d(t,"sb",(function(){return Dt})),n.d(t,"tb",(function(){return Ut})),n.d(t,"vb",(function(){return Vt})),n.d(t,"kb",(function(){return Ft})),n.d(t,"dc",(function(){return Wt})),n.d(t,"ac",(function(){return Yt})),n.d(t,"ib",(function(){return Qt}));n(3);var r,a=n(2),o=n(12),i=n.n(o),c=n(30),u=n.n(c),s=n(5),l=i()(["app","init"]),f=i()(["app","policy"]),d=u()(i()("csrfToken"),l),m=u()(i()("testnet"),l),p=u()(i()("mode"),l),h=function(e){return p(e)===s.i},b=i()(["app","keyMismatch"]),v=function(e){return e&&e.app&&e.app.draftProposals},E=function(e){return e&&e.app&&e.app.draftInvoices},y=function(e){return e&&e.app&&e.app.draftDccs},g=function(e){return{emailnotifications:(e["myproposalnotifications-statuschange"]?s.O:0)|(e["myproposalnotifications-votestarted"]?s.P:0)|(e["regularproposalnotifications-vetted"]?s.R:0)|(e["regularproposalnotifications-edited"]?s.Q:0)|(e["regularproposalnotifications-votestarted"]?s.S:0)|(e["adminproposalnotifications-new"]?s.K:0)|(e["adminproposalnotifications-voteauthorized"]?s.L:0)|(e["commentnotifications-proposal"]?s.N:0)|(e["commentnotifications-comment"]?s.M:0)}},O=function(e){return e.app.shouldVerifyKey},_=function(e){return e.app.identityImportResult&&e.app.identityImportResult.successMsg},j=function(e){return e.app.pollingCreditsPayment},w=function(e){return e.app.reachedCreditsPaymentPollingLimit},S=function(e){return e.app.proposalPaymentReceived},T=n(24),C=n(69),k=function(e){return Object(C.a)(i()(["api",e,"isRequesting"]))},I=function(e){return i()(["api",e,"error"])},x=k("proposal"),R=k("init"),N=k("policy"),P=(k("userProposals"),k("user")),L=k("userSearch"),A=k("proposalVoteResults"),D=k("proposalsVoteSummary"),U=k("batchProposalSummary"),V=k("billingStatusChanges"),M=k("votesDetails"),F=k("editUser"),B=k("proposalPaywallDetails"),G=k("userProposalCredits"),W=(i()(["api","likeComment","isRequesting"]),Object(C.b)(R,x),Object(C.b)(D,A,M)),Y=k("rescanUserPayments"),H=k("proposalOwnerBilling"),Q=Object(C.b)(k("proposalComments"),k("invoiceComments")),q=k("commentslikes"),z=k("manageUser"),K=(r="manageUser",i()(["api",r,"payload"])),J=u()(i()("action"),K),X=function(e){return Object(T.a)((function(t){return z(t)&&J(t)===e}))},Z=I("updateUserKey"),$=I("verifyUserKey"),ee=I("editUser"),te=I("init"),ne=I("proposalVoteResults"),re=I("userProposals"),ae=I("proposal"),oe=I("proposalsVoteSummaryError"),ie=(Object(C.b)(te,re),I("proposalsBatch")),ce=(Object(C.b)(te,ae),I("rescanUserPayments")),ue=I("proposalComments"),se=I("invoiceComments"),le=I("dccComments"),fe=I("likeComment"),de=I("commentslikes"),me=k("invoicePayouts"),pe=k("spendingSummary"),he=k("spendingDetails"),be=function(e){return Object(C.a)(i()(["external_api",e,"isRequesting"]))}("payWithFaucet"),ve=function(e){return i()(["external_api",e,"error"])}("payWithFaucet"),Ee=(u()(i()("txid"),function(e){return i()(["external_api",e,"response"])}("payWithFaucet")),n(9)),ye=i()(["comments","comments","byToken"]),ge=i()(["comments","commentsVotes","byToken"]),Oe=i()(["comments","comments","accessTimeByToken"]),_e=i()(["comments","commentsLikes","byToken"]),je=function(e){return function(t){return t[e&&Object(Ee.C)(e)]}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sectionIds;return t},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.comments;return t},Te=function(e){return Object(T.a)(Ie(e),we)},Ce=function(e,t){return Object(T.a)(ke(e),function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t[e]}}(t))},ke=function(e){return Object(T.a)(Ie(e),Se)},Ie=function(e){return Object(T.a)(ye,je(e))},xe=function(e){return Object(T.a)(ge,je(e))},Re=function(e){return Object(T.a)(_e,je(e))},Ne=function(e){return Object(T.a)(Oe,je(e))},Pe=n(11),Le=i()(["credits","byUserID"]),Ae=function(e){return Object(T.a)(Le,(function(t){return t[e]?t[e].newcredits:null}))},De=function(e){return Object(T.a)(Le,(function(t){return t[e]?t[e].unspent:[]}))},Ue=function(e){var t=function(e){return Object(T.a)(Le,(function(t){return t[e]?t[e].spent:[]}))}(e),n=De(e);return Object(T.a)(t,n,(function(e,t){var n=e&&t&&[].concat(Object(Pe.a)(e),Object(Pe.a)(t)).reduce((function(e,t){return t.txid in e?e[t.txid].numberPurchased++:e[t.txid]={price:t.price/1e8,datePurchased:t.datepurchased,numberPurchased:1,txId:t.txid},e}),[]);return n?Object.values(n).sort((function(e,t){return e.datePurchased-t.datePurchased})):[]}))},Ve=n(127),Me=n(94),Fe=n.n(Me),Be=n(232),Ge=i()(["proposals","byToken"]),We=i()(["proposals","summaries"]),Ye=i()(["proposals","billingStatusChanges"]),He=i()(["proposals","allProposalsByUserId"]),Qe=i()(["proposals","allTokensByUserId"]),qe=i()(["proposals","numOfProposalsByUserId"]),ze=Object(Be.a)(i()(["proposals"]),(function(e){return e.allByVoteStatus})),Ke=Object(Be.a)(i()(["proposals"]),(function(e){return e.allByRecordStatus})),Je=(Object(Be.a)(i()(["api"]),(function(e){return e.tokenInventory.payload})),i()(["proposals","newProposalToken"])),Xe=function(e){return Object(T.a)(Ge,(function(t){return t[Object(Ee.C)(e)]}))},Ze=function(e){return Object(T.a)(We,(function(t){return t[Fe()(t).find((function(t){return Object(Ee.C)(t)===Object(Ee.C)(e)}))]}))},$e=function(e){return Object(T.a)(Ye,(function(t){return t[Fe()(t).find((function(t){return Object(Ee.C)(t)===Object(Ee.C)(e)}))]}))},et=function(e){return Object(T.a)(Qe,i()(e))},tt=function(e){return Object(T.a)(qe,i()(e))},nt=function(e){return Object(T.a)(He,(function(t){return Object(Ee.u)(t)?[]:t[e]}))},rt=i()(["proposalVotes","byToken"]),at=(i()(["proposalVotes","bestBlock"]),function(e){return Object(T.a)(rt,(function(t){return t[Fe()(t).find((function(t){return Object(Ee.C)(t)===Object(Ee.C)(e)}))]}))}),ot=function(e){return Object(T.a)(at(e),(function(e){return e&&{castvotes:e.votes,startvotereply:e.startvotereply}}))},it=n(97),ct=n.n(it),ut=i()(["invoices","byToken"]),st=i()(["invoices","all"]),lt=i()(["invoices","exchangeRates"]),ft=i()(["invoices","subContractors"]),dt=i()(["invoices","newInvoiceToken"]),mt=ct()(["timestamp"],["desc"]),pt=Object(T.a)(st,ut,(function(e,t){return mt(e.map((function(e){return t[e]})))})),ht=function(e){return Object(T.a)(pt,(function(t){return t.filter((function(t){return t.userid===e}))}))},bt=(Object(T.a)(pt,Ve.e,(function(e,t){return e.filter((function(e){return e.userid===t}))})),function(e){return Object(T.a)(ut,i()(e))}),vt=i()(["invoicePayouts","payouts"]),Et=i()(["invoicePayouts","payoutSummaries"]),yt=Object(T.a)(Et,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ct()(["timestamp"],["asc"])(e.reduce((function(e,t){return e.concat(t.input.lineitems.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{timestamp:t.timestamp,token:t.censorshiprecord.token,labor:e.labor/60*(t.input.contractorrate/100),expenses:e.expenses/100,description:e.description.replace(/#/g,""),month:t.input.month,year:t.input.year,paiddate:new Date(1e3*t.payment.timelastupdated).toLocaleString(),amountreceived:t.payment.amountreceived/1e8})})))}),[]))})),gt=i()(["dccs","byToken"]),Ot=i()(["dccs","all"]),_t=i()(["dccs","byStatus"]),jt=i()(["dccs","newDccToken"]),wt=ct()(["timestamp"],["desc"]),St=Object(T.a)(Ot,gt,(function(e,t){return wt(e.map((function(e){return t[e]})))})),Tt=(Object(T.a)(St,Ve.e,(function(e,t){return e.filter((function(e){return e.userid===t}))})),function(e){return Object(T.a)(gt,i()(e))}),Ct=i()(["paywall","byUserID"]),kt=function(e){return Object(T.a)(Ct,i()(e))},It=function(e){return Object(T.a)(kt(e),(function(e){return e?Rt(e):null}))},xt=function(e){return Object(T.a)(kt(e),(function(e){return e?e.creditprice/1e8:null}))},Rt=function(e){return e.isPaid?s.U:e.status||s.V},Nt=function(e,t){return Object(T.a)(kt(e),(function(e){return e?e[t]:null}))},Pt=function(e){return Nt(e,"isPaid")},Lt=function(e){return Nt(e,"paywalladdress")},At=function(e){return Nt(e,"txid")},Dt=function(e){return Nt(e,"amount")},Ut=function(e){return Nt(e,"confirmations")},Vt=function(e){return Nt(e,"faucetTxid")},Mt=i()(["codestats","byUserID"]),Ft=function(e,t,n){return Object(T.a)(function(e){return Object(T.a)(Mt,i()(e))}(e),(function(e){return e?e["".concat(t).concat(n)]:null}))},Bt=i()(["proposalBilling","proposalsList"]),Gt=i()(["proposalBilling","proposalDetails"]),Wt=Object(T.a)(Bt,(function(e){return e?ct()(["totalbilled"],["desc"],e):null})),Yt=Gt,Ht=i()(["proposalOwnerBilling","byProposalToken"]),Qt=function(e){return Object(T.a)(Ht,i()(Object(Ee.C)(e)))}},82:function(e,t,n){e.exports={statsTitle:"Detail_statsTitle__9mEiN",uilink:"Detail_uilink__7PmzV",titleLinkWrapper:"Detail_titleLinkWrapper__OhmB_",collapse:"Detail_collapse__28jpV",statsHeader:"Detail_statsHeader__3lzD2",codeStats:"Detail_codeStats__3464b",singleStat:"Detail_singleStat__3AFhS",addition:"Detail_addition__1YFXQ",deletion:"Detail_deletion__1eiLX",contributionDetails:"Detail_contributionDetails__3r7sO",invoiceLinkWrapper:"Detail_invoiceLinkWrapper__1jUOK",prs:"Detail_prs__3bGwD"}},83:function(e,t,n){e.exports={sharedNavAtribute:"HeaderNav_sharedNavAtribute__QoKxe",navContainer:"HeaderNav_navContainer__22YWV HeaderNav_sharedNavAtribute__QoKxe",loggedInContainer:"HeaderNav_loggedInContainer__1t1Gb",noCreditsContainer:"HeaderNav_noCreditsContainer__nTKb-",navLinkCtn:"HeaderNav_navLinkCtn__2LmuQ HeaderNav_sharedNavAtribute__QoKxe",navLink:"HeaderNav_navLink__Wcu6P HeaderNav_sharedNavAtribute__QoKxe",activeDropdownItem:"HeaderNav_activeDropdownItem__1kamu",activeNavLink:"HeaderNav_activeNavLink__1unlU",dropdownList:"HeaderNav_dropdownList__1XY9O",themeToggleWrapper:"HeaderNav_themeToggleWrapper__3auzw",publicWrapper:"HeaderNav_publicWrapper__3Mh36",dropdown:"HeaderNav_dropdown__2xkXy",noCreditsDropdown:"HeaderNav_noCreditsDropdown__2OaHw"}},84:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){Object(r.useEffect)((function(){if(e)throw e}),[e])}},848:function(e,t){},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n(3),a=n(2),o=n(91),i=n.n(o),c=function(e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+e;window.history.replaceState({path:t,search:e},"",t)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,n=i.a.parse(t);return n[e]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;return i.a.parse(e)},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.search,o=i.a.parse(n),u=i.a.stringify(Object(a.a)(Object(a.a)({},o),{},Object(r.a)({},e,t)));c("?".concat(u))}},850:function(e,t){},852:function(e,t){},86:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return d}));var r=n(0),a=n.n(r),o=n(1221),i=n(11),c=n(2),u=n(18),s=n(1223),l=["location","children"],f=Object(r.createContext)(),d=function(){return Object(r.useContext)(f)},m=Object(s.a)((function(e){var t=e.location,n=e.children,o=Object(u.a)(e,l),s=Object(r.useRef)([]),d=Object(r.useMemo)((function(){return Object(c.a)(Object(c.a)({},o),{},{location:t})}),[o,t]);return Object(r.useEffect)((function(){s.current=[t].concat(Object(i.a)(s.current))}),[t]),a.a.createElement(f.Provider,{value:Object(c.a)(Object(c.a)({},d),{},{navigationHistory:s.current})},n)})),p=function(e){var t=e.children;return a.a.createElement(o.a,null,a.a.createElement(m,null,t))},h=n(1218),b=n(1),v=n(352),E=n.n(v),y=n(320),g=n.n(y),O=a.a.createElement(a.a.Fragment,null,"\u2190");function _(e){return null===e||void 0===e?void 0:e.isExact}var j=function(e){var t=e.label,n=e.hierarchy,o=e.breakpoint,i=Object(b.useTheme)().themeName===b.DEFAULT_DARK_THEME_NAME,c=d(),u=c.history,s=c.navigationHistory,l=Object(r.useRef)(n),f=Object(r.useMemo)((function(){if(l.current){var e=l.current.map((function(e){return Object(h.a)(u.location.pathname,{path:e,strict:!0})})),t=e.findIndex(_);return e[t>0?t-1:0].url}}),[u]),m=Object(r.useMemo)((function(){return g()((function(e){return!Object(h.a)(e.pathname,{path:o,strict:!0})}))(s)}),[s,o]);return!f&&m<0?null:a.a.createElement("div",{className:E.a.returnLinkContainer},a.a.createElement(b.Link,{className:Object(b.classNames)(E.a.returnLink,i&&E.a.darkReturnLink),onClick:function(){return f?u.push(f):u.go(-(m+1))}},O," ",t))};j.defaultProps={label:"Go Back"};var w=j},861:function(e,t){},863:function(e,t){},89:function(e,t,n){e.exports={thumbnailGrid:"Files_thumbnailGrid__2DFxb",fileError:"Files_fileError__1YTen",fileErrorText:"Files_fileErrorText__31dut",marginRight:"Files_marginRight__ySxfa",removeFileIcon:"Files_removeFileIcon__1r2s0",fileThumbnailWrapper:"Files_fileThumbnailWrapper__FfP4u",fileThumbnail:"Files_fileThumbnail__3YAnA",imageThumbnailWrapper:"Files_imageThumbnailWrapper__etpVz",imageThumbnail:"Files_imageThumbnail__Lv-_T",fileThumbnailText:"Files_fileThumbnailText__27h4X"}},890:function(e,t){},891:function(e,t){},896:function(e,t){},898:function(e,t){},9:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return N})),n.d(t,"d",(function(){return P})),n.d(t,"E",(function(){return L})),n.d(t,"C",(function(){return D})),n.d(t,"z",(function(){return U})),n.d(t,"x",(function(){return V})),n.d(t,"y",(function(){return M})),n.d(t,"t",(function(){return F})),n.d(t,"q",(function(){return B})),n.d(t,"v",(function(){return G})),n.d(t,"a",(function(){return W})),n.d(t,"w",(function(){return Y})),n.d(t,"D",(function(){return q})),n.d(t,"F",(function(){return z})),n.d(t,"s",(function(){return K})),n.d(t,"r",(function(){return J})),n.d(t,"n",(function(){return X})),n.d(t,"o",(function(){return Z})),n.d(t,"m",(function(){return $})),n.d(t,"h",(function(){return ee})),n.d(t,"g",(function(){return te})),n.d(t,"i",(function(){return ne})),n.d(t,"j",(function(){return re})),n.d(t,"u",(function(){return ae})),n.d(t,"l",(function(){return oe})),n.d(t,"p",(function(){return ie})),n.d(t,"c",(function(){return ce})),n.d(t,"A",(function(){return ue})),n.d(t,"B",(function(){return le})),n.d(t,"k",(function(){return fe})),n.d(t,"b",(function(){return me})),n.d(t,"f",(function(){return pe}));var r,a=n(110),o=n(149),i=n(219),c=n(11),u=n(3),s=n(2),l=n(4),f=n(353),d=n.n(f),m=n(12),p=n.n(m),h=(n(81),n(98)),b=n.n(h),v=(n(629),n(442),n(120)),E=n.n(v),y=n(630),g=n.n(y),O=n(177),_=n.n(O),j=n(30),w=n.n(j),S=n(103),T=n.n(S),C=n(27),k=n(631),I=n(140),x=n(5);function R(){R=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,a){var o=new RegExp(e,r);return t.set(o,a||t.get(e)),Object(i.a)(o,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var a=r[n];if("number"==typeof a)t[n]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;t[n]=e[a[o]]}return t}),Object.create(null))}return Object(o.a)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);return n&&(n.groups=r(n,this)),n},n.prototype[Symbol.replace]=function(n,a){if("string"==typeof a){var o=t.get(this);return e[Symbol.replace].call(this,n,a.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+o[t]})))}if("function"==typeof a){var i=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(r(e,i)),a.apply(this,e)}))}return e[Symbol.replace].call(this,n,a)},R.apply(this,arguments)}var N=function(e){return d.a.SHA256(Q(H(e))).toString(d.a.enc.Hex)},P=function(e){return Object(k.sha3_256)(e)},L=function(e){return window.btoa(unescape(encodeURIComponent(e)))},A=function(e){return decodeURIComponent(escape(window.atob(e)))},D=function(e){return e.substring(0,7)},U=function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var a=Object(l.a)(r[n],2),o=a[0],i=a[1];t[D(o)]=Object(s.a)({},V(i))}return t},V=function(e){var t,n,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.files&&e.files.find((function(e){return e.name===x.eb}));return t?JSON.parse(atob(t.payload)):{}}(e),a=r.name,o=r.startdate,i=r.enddate,c=r.domain,l=r.amount,f=r.legacytoken,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.files&&e.files.find((function(e){return e.name===x.Wb}));return t?JSON.parse(atob(t.payload)):{}}(e),m=d.linkby,h=d.linkto,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.files&&e.files.find((function(e){return"index.md"===e.name}));return t?{description:F(t)}:{}}(e).description,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w()(_()((function(e,t){return t.status?Object(s.a)(Object(s.a)({},e),{},{byStatus:Object(s.a)(Object(s.a)({},e.byStatus),{},Object(u.a)({},t.status,t))}):Object(s.a)(Object(s.a)({},e),t)}),{byStatus:{}}),E()((function(e){var t=e.payload;try{return JSON.parse(t)}catch(n){return w()(_()((function(e,t){return t.status?Object(s.a)(Object(s.a)({},e),{},{byStatus:Object(s.a)(Object(s.a)({},e.byStatus),{},Object(u.a)({},t.status,t))}):Object(s.a)(Object(s.a)({},e),t)}),{byStatus:{}}),b()((function(e){return Object.keys(e).length})),E()((function(e){return JSON.parse("{".concat(e,"}"))})),g()(/\{(.*?)\}/))(t)}})),b()((function(e){return e.pluginid===x.Vb})),p()("metadata"))(e)}(e),O=null===(t=y.byStatus[e.status])||void 0===t?void 0:t.reason,j=null===(n=y.byStatus[e.status])||void 0===n?void 0:n.publickey,S=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{publishedat:(null===(e=r[x.jb])||void 0===e?void 0:e.timestamp)||0,censoredat:(null===(t=r[x.ib])||void 0===t?void 0:t.timestamp)||0,abandonedat:(null===(n=r[x.hb])||void 0===n?void 0:n.timestamp)||0}}(y.byStatus),T=S.publishedat,C=S.censoredat,k=S.abandonedat;return Object(s.a)(Object(s.a)({},e),{},{description:v||e.description,name:a||e.name,amount:l/100,startDate:o,endDate:i,legacytoken:f,domain:c,linkby:m,userid:y.userid||e.userid,linkto:h,commentsCount:e.commentsCount||0,statuschangemsg:O,statuschangepk:j,publishedat:T,censoredat:C,abandonedat:k})},M=function(e){return Object.keys(e).reduce((function(t,n){return Object(s.a)(Object(s.a)({},t),{},Object(u.a)({},n,V(e[n])))}),{})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.payload?A(e.payload):""},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:"index.md",mime:"text/plain; charset=utf-8",payload:L(e)}},G=function(t){return e.from(JSON.stringify(t))},W=function(e){return e.toString("base64")},Y=function(e){var t=G(e),n=W(t);return N(n)},H=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),a=0;a<n;a++)r[a]=t.charCodeAt(a);return r.buffer},Q=function(e){for(var t=new Uint8Array(e),n=[],r=0;r<t.length;r+=4)n.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return d.a.lib.WordArray.create(n,t.length)},q=function(e){return e+"_"+Math.random().toString(36).substr(2,9)},z=function(e,t,n){return C.c(e).then((function(e){var r=!e||e.publicKey!==t;n(r)}))},K=function(e,t){return Object.values(e).find((function(e){return e.digest===t}))},J=(r={},Object(u.a)(r,x.u,"Invoice unreviewed"),Object(u.a)(r,x.y,"Invoice updated and unreviewed"),Object(u.a)(r,x.w,"Invoice rejected"),Object(u.a)(r,x.t,"Invoice disputed"),Object(u.a)(r,x.s,"Invoice approved"),Object(u.a)(r,x.v,"Invoice paid"),function(e){var t=atob(e.split(",").pop());try{var n=JSON.parse(t);if(!n)throw new Error(x.q);return n}catch(r){throw new Error(x.q)}}),X=function(){return(new Date).getMonth()+1},Z=function(){return(new Date).getFullYear()},$=function(){return{month:X(),year:Z()}},ee=function(e){return parseFloat(e/60).toFixed(2)},te=function(e){return parseInt(60*e,10)},ne=function(e){return parseFloat(e/100).toFixed(2)},re=function(e){return parseInt(100*e,10)},ae=function(e){return 0===Object.keys(e).length},oe=function(e){return[{label:"No domain defined",value:0}].concat(Object(c.a)(e.map((function(e){return{label:Object(I.a)(e.description),value:e.type}}))))},ie=function(e,t){var n=e.find((function(e){return e.value===t}));return n?n.label:""},ce=function(e,t){if(!e)return 0;var n=e.day,r=e.month,a=e.year;return t?new Date(a,r-1,n,23,59,59).getTime()/1e3:new Date(a,r-1,n,0,0,1).getTime()/1e3};function ue(e,t){var n,r=R(/!\[[^\]]*\]\((.*?)(?="|\))(".*")?\)/g,{blob:1,optionalpart:2}),o=e.matchAll(r),i=e,c=[],u=Object(a.a)(o);try{for(u.s();!(n=u.n()).done;){var s=n.value.groups.blob;t.has(s)&&(i=i.replace(s,t.get(s).digest),c.push(t.get(s)))}}catch(l){u.e(l)}finally{u.f()}return{description:i,files:c}}var se=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(e),a=[],o=0;o<r.length;o+=n){for(var i=r.slice(o,o+n),c=new Array(i.length),u=0;u<i.length;u++)c[u]=i.charCodeAt(u);var s=new Uint8Array(c);a.push(s)}var l=new Blob(a,{type:t});return l};function le(e,t){if(!e)return{text:"",markdownFiles:[]};var n,r=e.description,o=e.files,i=R(/!\[[^\]]*\]\((.*?)(?="|\))(".*")?\)/g,{digest:1,optionalpart:2}),c=r.matchAll(i),u=r,s=[],l=Object(a.a)(c);try{for(l.s();!(n=l.n()).done;){var f=n.value.groups.digest,d=K(o,f);if(d){var m=(window.URL||window.webkitURL).createObjectURL(se(d.payload,d.mime));t.set(m,d),s.push(d),u=u.replace(f,m)}}}catch(p){l.e(p)}finally{l.f()}return{text:u,markdownFiles:s}}function fe(e){return e.filter((function(e){return!["index.md","data.json",x.eb,x.Wb].includes(e.name)}))}var de=function(e,t){return e.filter((function(e){var n=e.parentid;return t.includes(n)})).map((function(e){return e.commentid}))},me=function(e,t){for(var n=[e],r=de(t,n),a=T()([].concat(Object(c.a)(n),Object(c.a)(r)));a.length>n.length;){n=a;var o=Object(c.a)(n);r=de(t,o),a=T()([].concat(Object(c.a)(n),Object(c.a)(r)))}return a},pe=function(e){var t=e.day,n=e.month,r=e.year;if(void 0===x.I[n-1])return x.p;var a="0".concat(t).slice(-2);return"".concat(a," ").concat(x.I[n-1]," ").concat(r)}}).call(this,n(43).Buffer)},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return z})),n.d(t,"c",(function(){return K})),n.d(t,"b",(function(){return J})),n.d(t,"d",(function(){return X})),n.d(t,"g",(function(){return ae}));var r=n(110),a=n(2),o=n(11),i=n(9),c=n(18),u=n(0),s=n.n(u),l=n(19),f=n(4),d=n(1),m=n(306);function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new T(a||[]);return r(i,"_invoke",{value:_(e,n,c)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=s;var f={};function d(){}function m(){}function h(){}var b={};u(b,o,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(C([])));E&&E!==t&&n.call(E,o)&&(b=E);var y=h.prototype=d.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var a;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(a,i){!function r(a,o,i,c){var u=l(e[a],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:m,configurable:!0}),m.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new O(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),u(y,c,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var h={container:function(e){return Object(a.a)(Object(a.a)({},e),{},{height:"100%"})},control:function(e){return Object(a.a)(Object(a.a)({},e),{},{height:"100%"})}},b=function(e){var t=e.value,n=e.options,r=e.onChange,a=e.onCommit,o=Object(u.useCallback)((function(e){return n.find((function(t){return t.value===e}))}),[n]),i=Object(m.a)(o(t)),c=Object(f.a)(i,2),b=c[0],v=c[1],E=Object(u.useCallback)(function(){var e=Object(l.a)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,v(o(n));case 3:r(n),a(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,o,r,a]);return s.a.createElement(d.Select,{options:n,value:b,onChange:E,styles:h})},v=function(e){var t=e.onChange,n=e.row,r=e.col,a=e.value,o=Object(u.useCallback)((function(e){t(e.target.value)}),[t]);return s.a.createElement(d.TextArea,{id:"item-".concat(n,"-").concat(r),onChange:o,value:a,wrapped:!0,autoFocus:!0})},E=n(71),y=n(39),g=["value"],O=function(e){return function(t){return s.a.createElement(b,Object(a.a)(Object(a.a)({},t),{},{options:e}))}},_=function(e,t){return function(n){var r=n.value,a=Object(c.a)(n,g);return e?s.a.createElement("span",{className:E.highlightChar},e.toString()):t&&r&&!t.includes(r)&&!a.cell.readOnly?s.a.createElement("span",{className:Object(d.classNames)(E.highlightChar,"value-viewer")},r):s.a.createElement("span",{className:"value-viewer"},r)}},j=function(){return function(e){return s.a.createElement("div",{className:E.textWrapper},s.a.createElement(v,e))}},w=function(e,t,n){return s.a.createElement("div",{className:n?E.multilineCellValue:""},t.split("").map((function(t){return e.has(t)?s.a.createElement("span",{className:E.highlightChar},t):t})))},S=function(e,t){var n=Object(y.b)(e),r=t.replace(n,"");return new Set(r)},T=function(e){return function(t){var n=t.value,r=S(e,n);return w(r,n,!0)}},C=function(e){return function(t){var n=t.value,r=S(e,n);return w(r,n,!1)}},k=n(257),I=n.n(k),x=1,R=2,N=3,P=4,L=5,A=6,D=7,U=8,V=9,M=10,F=A,B=D,G=U,W=V,Y=M,H=function(e){return e[0].toUpperCase()+e.substring(1)},Q=function(e){return e?e.map((function(e){return{value:e.id,label:e.username}})):[]},q=function(e){return{type:(n=e.supportedlineitemtypes,n[0].type),domain:(t=e.supporteddomains,H(t[0].description)),subdomain:"",description:"",proposaltoken:"",labor:0,expenses:0,subtotal:"",subuserid:"",subrate:0};var t,n},z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e>t.length?[].concat(Object(o.a)(new Array(e-t.length).fill(n)),Object(o.a)(t.map((function(e){return Object(a.a)(Object(a.a)({},e),n)})))):t},K=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,s=arguments.length>8?arguments[8]:void 0,l=a.supporteddomains,f=a.supportedlineitemtypes,d=a.invoicefieldsupportedchars,m=[],p=e.reduce((function(e,a,m){var p=a,h=2===p.type||(3===p.type||t),b=4!==p.type||t,v=1===p.type||4===p.type||t,E=I()(c,{id:p.subuserid}),y=b?E&&E.username:p.subuserid,g=f.find((function(e){return e.type===p.type})),w=+Object(i.h)(p.labor),S=+Object(i.i)(p.expenses),k=+Object(i.i)(p.subrate),x=4!==p.type?w*r+S:w*k,R=n&&n[m]||{},N=[{readOnly:!0,value:m+1},{readOnly:t,value:p.type,error:R&&R.type,valueViewer:function(){return g?H(g.description):""},dataEditor:O(f.map((function(e){return{value:e.type,label:H(e.description)}})))},{readOnly:t,value:p.domain,error:R&&R.domain,dataEditor:O(l.map((function(e){return{value:H(e.description),label:H(e.description)}})))},{readOnly:t,value:a.subdomain,error:R&&R.subdomain,valueViewer:C(d)},{readOnly:t,value:p.description,error:R&&R.description,dataEditor:j(R&&R.description),valueViewer:T(d)},{readOnly:t,value:p.proposaltoken,error:R&&R.proposaltoken,valueViewer:_(u,o?o.map((function(e){return e.censorshiprecord.token})):[])},{readOnly:b,value:y,error:R&&R.subuserid,dataEditor:O(Q(c)),valueViewer:_(s)},{readOnly:b,error:R&&R.subrate,value:+Object(i.i)(p.subrate)},{readOnly:h,value:w,error:R&&R.labor},{readOnly:v,value:S,error:R&&R.expenses},{readOnly:!0,value:parseFloat(x).toFixed(2)}];return{grid:e.grid.concat([N.filter(Boolean)]),expenseTotal:e.expenseTotal+p.expenses,laborTotal:e.laborTotal+p.labor,total:parseFloat(+e.total+x).toFixed(2)}}),{grid:[],expenseTotal:0,laborTotal:0,total:0}),h=p.grid,b=p.expenseTotal,v=p.laborTotal,E=p.total,y=[{value:"Total",forceComponent:!0},{value:+Object(i.h)(v)},{value:+Object(i.i)(b)},{value:E}],g=z(h[0].length,y,{readOnly:!0});return m.concat(h).concat([g])},J=function(e){var t=e.map((function(e){return Object(o.a)(e)}));return t.reduce((function(e,n,r){if(r===t.length-1)return e;var o=n.reduce((function(e,t,n){switch(n){case x:return Object(a.a)(Object(a.a)({},e),{},{type:+t.value});case R:return Object(a.a)(Object(a.a)({},e),{},{domain:t.value});case N:return Object(a.a)(Object(a.a)({},e),{},{subdomain:t.value});case P:return Object(a.a)(Object(a.a)({},e),{},{description:t.value});case L:return Object(a.a)(Object(a.a)({},e),{},{proposaltoken:t.value});case A:return Object(a.a)(Object(a.a)({},e),{},{subuserid:t.value});case D:return Object(a.a)(Object(a.a)({},e),{},{subrate:Object(i.j)(+t.value)});case U:return Object(a.a)(Object(a.a)({},e),{},{labor:Object(i.g)(+t.value)});case V:return Object(a.a)(Object(a.a)({},e),{},{expenses:Object(i.j)(+t.value)});case M:return Object(a.a)(Object(a.a)({},e),{},{subtotal:+t.value});default:return e}}),{});return e.concat([o])}),[])},X=function(e){return e?[{value:"",readOnly:!0,width:"2rem"},{value:"Type",readOnly:!0,width:"7rem"},{value:"Domain",readOnly:!0,width:"9rem"},{value:"Subdomain",readOnly:!0,width:"10rem"},{value:"Description",readOnly:!0,width:"20rem"},{value:"Proposal",readOnly:!0,width:"20rem"},{value:"Sub. ID",readOnly:!0,width:"5rem"},{value:"Sub. Rate (USD)",readOnly:!0,width:"7.5rem"},{value:"Labor (hours)",readOnly:!0,width:"7rem"},{value:"Expense (USD)",readOnly:!0,width:"7.5rem"},{value:"Subtotal (USD)",readOnly:!0,width:"7.5rem"}]:[{value:"",readOnly:!0,width:"2rem"},{value:"Type",readOnly:!0,width:"10rem"},{value:"Domain",readOnly:!0,width:"12rem"},{value:"Subdomain",readOnly:!0,width:"14rem"},{value:"Description",readOnly:!0,width:"30rem"},{value:"Proposal",readOnly:!0,width:"30rem"},{value:"Subcontr. ID",readOnly:!0,width:"10rem"},{value:"Subcontr. Rate (USD)",readOnly:!0,width:"8rem"},{value:"Labor (hours)",readOnly:!0,width:"7rem"},{value:"Expense (USD)",readOnly:!0,width:"7.5rem"},{value:"Subtotal (USD)",readOnly:!0,width:"7.5rem"}]},Z=function(e,t,n,r){return e[t][n]=Object(a.a)(Object(a.a)({},e[t][n]),r),e},$=function(e,t){var n=t.row,r=t.col,a=t.value;return e=Z(e,n,W,1===+a?{value:0,readOnly:!0}:{readOnly:!1}),e=Z(e,n,G,2===+a||3===+a?{value:0,readOnly:!0}:{readOnly:!1}),4===+a?(e=Z(e,n,F,{readOnly:!1}),e=Z(e,n,B,{value:0,readOnly:!1}),e=Z(e,n,W,{readOnly:!0})):(e=Z(e,n,F,{value:""}),e=Z(e,n,B,{value:0})),Z(e,n,r,{value:a})},ee=function(e,t){var n=t.row,r=t.col,a=t.value,o=e[n][U].value;return e=Z(e,n,Y,{value:a*o}),Z(e,n,r,{value:a})},te=function(e,t,n){var r=t.row,a=t.col,o=t.value,i=e[r][x].value,c=e[r][D].value;return 1===i&&(e=Z(e,r,Y,{value:o*n})),4===i&&(e=Z(e,r,Y,{value:o*c})),Z(e,r,a,{value:o})},ne=function(e,t){var n=t.row,r=t.col,a=t.value;return e=Z(e,n,Y,{value:a}),Z(e,n,r,{value:a})},re=function(e,t){var n,a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,i=o[0].value-1,c=o[x].value,u=o[U].value,s=o[D].value;1===c&&(e=Z(e,i,Y,{value:u*t})),4===c&&(e=Z(e,i,Y,{value:u*s}))}}catch(l){a.e(l)}finally{a.f()}return e},ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.reduce((function(e,t){switch(t.col){case x:return e.grid=$(e.grid,t),e;case U:return e.grid=te(e.grid,t,n),e;case V:return e.grid=ne(e.grid,t),e;case D:return e.grid=ee(e.grid,t),e;case M:return e.grid=re(e.grid,n),e;default:return e.grid=Z(e.grid,t.row,t.col,{value:t.value}),e}}),{grid:e})}},905:function(e,t){},924:function(e,t){},99:function(e,t,n){e.exports={commentAreaContainer:"Comments_commentAreaContainer__8WXVJ",commentsWrapper:"Comments_commentsWrapper__1vjNa",commentsHeader:"Comments_commentsHeader__1bBUQ",titleWrapper:"Comments_titleWrapper__2gbMC",commentsTitle:"Comments_commentsTitle__SAits",commentsCount:"Comments_commentsCount__3IEN-",sortContainer:"Comments_sortContainer__2FeJJ",flatButtonText:"Comments_flatButtonText__3mdhJ",flatButtonWrapper:"Comments_flatButtonWrapper__1CEbg",flatModeActive:"Comments_flatModeActive__3oE-Q",notAllowedMessageContent:"Comments_notAllowedMessageContent__oRH6w",modeToggleLabel:"Comments_modeToggleLabel__aaejb",flatTooltipWrapper:"Comments_flatTooltipWrapper__1wbzL",flatModTooltip:"Comments_flatModTooltip__1baab"}}},[[689,5,6]]]);
//# sourceMappingURL=main.9aeff4d9.chunk.js.map